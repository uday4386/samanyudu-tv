function _mergeNamespaces(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in t)){const u=Object.getOwnPropertyDescriptor(i,o);u&&Object.defineProperty(t,o,u.get?u:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function getAugmentedNamespace(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var o=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,o.get?o:{enumerable:!0,get:function(){return t[i]}})}),n}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production_min;function requireReact_production_min(){if(hasRequiredReact_production_min)return react_production_min;hasRequiredReact_production_min=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),d=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),f=Symbol.iterator;function l(ee){return ee===null||typeof ee!="object"?null:(ee=f&&ee[f]||ee["@@iterator"],typeof ee=="function"?ee:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,S={};function T(ee,le,ge){this.props=ee,this.context=le,this.refs=S,this.updater=ge||g}T.prototype.isReactComponent={},T.prototype.setState=function(ee,le){if(typeof ee!="object"&&typeof ee!="function"&&ee!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ee,le,"setState")},T.prototype.forceUpdate=function(ee){this.updater.enqueueForceUpdate(this,ee,"forceUpdate")};function E(){}E.prototype=T.prototype;function O(ee,le,ge){this.props=ee,this.context=le,this.refs=S,this.updater=ge||g}var R=O.prototype=new E;R.constructor=O,v(R,T.prototype),R.isPureReactComponent=!0;var M=Array.isArray,C=Object.prototype.hasOwnProperty,j={current:null},$={key:!0,ref:!0,__self:!0,__source:!0};function L(ee,le,ge){var Ae,Te={},Ce=null,De=null;if(le!=null)for(Ae in le.ref!==void 0&&(De=le.ref),le.key!==void 0&&(Ce=""+le.key),le)C.call(le,Ae)&&!$.hasOwnProperty(Ae)&&(Te[Ae]=le[Ae]);var Re=arguments.length-2;if(Re===1)Te.children=ge;else if(1<Re){for(var Ee=Array(Re),Ie=0;Ie<Re;Ie++)Ee[Ie]=arguments[Ie+2];Te.children=Ee}if(ee&&ee.defaultProps)for(Ae in Re=ee.defaultProps,Re)Te[Ae]===void 0&&(Te[Ae]=Re[Ae]);return{$$typeof:t,type:ee,key:Ce,ref:De,props:Te,_owner:j.current}}function N(ee,le){return{$$typeof:t,type:ee.type,key:le,ref:ee.ref,props:ee.props,_owner:ee._owner}}function B(ee){return typeof ee=="object"&&ee!==null&&ee.$$typeof===t}function U(ee){var le={"=":"=0",":":"=2"};return"$"+ee.replace(/[=:]/g,function(ge){return le[ge]})}var H=/\/+/g;function Y(ee,le){return typeof ee=="object"&&ee!==null&&ee.key!=null?U(""+ee.key):le.toString(36)}function K(ee,le,ge,Ae,Te){var Ce=typeof ee;(Ce==="undefined"||Ce==="boolean")&&(ee=null);var De=!1;if(ee===null)De=!0;else switch(Ce){case"string":case"number":De=!0;break;case"object":switch(ee.$$typeof){case t:case e:De=!0}}if(De)return De=ee,Te=Te(De),ee=Ae===""?"."+Y(De,0):Ae,M(Te)?(ge="",ee!=null&&(ge=ee.replace(H,"$&/")+"/"),K(Te,le,ge,"",function(Ie){return Ie})):Te!=null&&(B(Te)&&(Te=N(Te,ge+(!Te.key||De&&De.key===Te.key?"":(""+Te.key).replace(H,"$&/")+"/")+ee)),le.push(Te)),1;if(De=0,Ae=Ae===""?".":Ae+":",M(ee))for(var Re=0;Re<ee.length;Re++){Ce=ee[Re];var Ee=Ae+Y(Ce,Re);De+=K(Ce,le,ge,Ee,Te)}else if(Ee=l(ee),typeof Ee=="function")for(ee=Ee.call(ee),Re=0;!(Ce=ee.next()).done;)Ce=Ce.value,Ee=Ae+Y(Ce,Re++),De+=K(Ce,le,ge,Ee,Te);else if(Ce==="object")throw le=String(ee),Error("Objects are not valid as a React child (found: "+(le==="[object Object]"?"object with keys {"+Object.keys(ee).join(", ")+"}":le)+"). If you meant to render a collection of children, use an array instead.");return De}function z(ee,le,ge){if(ee==null)return ee;var Ae=[],Te=0;return K(ee,Ae,"","",function(Ce){return le.call(ge,Ce,Te++)}),Ae}function V(ee){if(ee._status===-1){var le=ee._result;le=le(),le.then(function(ge){(ee._status===0||ee._status===-1)&&(ee._status=1,ee._result=ge)},function(ge){(ee._status===0||ee._status===-1)&&(ee._status=2,ee._result=ge)}),ee._status===-1&&(ee._status=0,ee._result=le)}if(ee._status===1)return ee._result.default;throw ee._result}var G={current:null},ie={transition:null},Z={ReactCurrentDispatcher:G,ReactCurrentBatchConfig:ie,ReactCurrentOwner:j};function te(){throw Error("act(...) is not supported in production builds of React.")}return react_production_min.Children={map:z,forEach:function(ee,le,ge){z(ee,function(){le.apply(this,arguments)},ge)},count:function(ee){var le=0;return z(ee,function(){le++}),le},toArray:function(ee){return z(ee,function(le){return le})||[]},only:function(ee){if(!B(ee))throw Error("React.Children.only expected to receive a single React element child.");return ee}},react_production_min.Component=T,react_production_min.Fragment=n,react_production_min.Profiler=o,react_production_min.PureComponent=O,react_production_min.StrictMode=i,react_production_min.Suspense=m,react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z,react_production_min.act=te,react_production_min.cloneElement=function(ee,le,ge){if(ee==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+ee+".");var Ae=v({},ee.props),Te=ee.key,Ce=ee.ref,De=ee._owner;if(le!=null){if(le.ref!==void 0&&(Ce=le.ref,De=j.current),le.key!==void 0&&(Te=""+le.key),ee.type&&ee.type.defaultProps)var Re=ee.type.defaultProps;for(Ee in le)C.call(le,Ee)&&!$.hasOwnProperty(Ee)&&(Ae[Ee]=le[Ee]===void 0&&Re!==void 0?Re[Ee]:le[Ee])}var Ee=arguments.length-2;if(Ee===1)Ae.children=ge;else if(1<Ee){Re=Array(Ee);for(var Ie=0;Ie<Ee;Ie++)Re[Ie]=arguments[Ie+2];Ae.children=Re}return{$$typeof:t,type:ee.type,key:Te,ref:Ce,props:Ae,_owner:De}},react_production_min.createContext=function(ee){return ee={$$typeof:d,_currentValue:ee,_currentValue2:ee,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},ee.Provider={$$typeof:u,_context:ee},ee.Consumer=ee},react_production_min.createElement=L,react_production_min.createFactory=function(ee){var le=L.bind(null,ee);return le.type=ee,le},react_production_min.createRef=function(){return{current:null}},react_production_min.forwardRef=function(ee){return{$$typeof:h,render:ee}},react_production_min.isValidElement=B,react_production_min.lazy=function(ee){return{$$typeof:_,_payload:{_status:-1,_result:ee},_init:V}},react_production_min.memo=function(ee,le){return{$$typeof:p,type:ee,compare:le===void 0?null:le}},react_production_min.startTransition=function(ee){var le=ie.transition;ie.transition={};try{ee()}finally{ie.transition=le}},react_production_min.unstable_act=te,react_production_min.useCallback=function(ee,le){return G.current.useCallback(ee,le)},react_production_min.useContext=function(ee){return G.current.useContext(ee)},react_production_min.useDebugValue=function(){},react_production_min.useDeferredValue=function(ee){return G.current.useDeferredValue(ee)},react_production_min.useEffect=function(ee,le){return G.current.useEffect(ee,le)},react_production_min.useId=function(){return G.current.useId()},react_production_min.useImperativeHandle=function(ee,le,ge){return G.current.useImperativeHandle(ee,le,ge)},react_production_min.useInsertionEffect=function(ee,le){return G.current.useInsertionEffect(ee,le)},react_production_min.useLayoutEffect=function(ee,le){return G.current.useLayoutEffect(ee,le)},react_production_min.useMemo=function(ee,le){return G.current.useMemo(ee,le)},react_production_min.useReducer=function(ee,le,ge){return G.current.useReducer(ee,le,ge)},react_production_min.useRef=function(ee){return G.current.useRef(ee)},react_production_min.useState=function(ee){return G.current.useState(ee)},react_production_min.useSyncExternalStore=function(ee,le,ge){return G.current.useSyncExternalStore(ee,le,ge)},react_production_min.useTransition=function(){return G.current.useTransition()},react_production_min.version="18.3.1",react_production_min}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production_min()),react.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production_min;function requireReactJsxRuntime_production_min(){if(hasRequiredReactJsxRuntime_production_min)return reactJsxRuntime_production_min;hasRequiredReactJsxRuntime_production_min=1;var t=requireReact(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function d(h,m,p){var _,f={},l=null,g=null;p!==void 0&&(l=""+p),m.key!==void 0&&(l=""+m.key),m.ref!==void 0&&(g=m.ref);for(_ in m)i.call(m,_)&&!u.hasOwnProperty(_)&&(f[_]=m[_]);if(h&&h.defaultProps)for(_ in m=h.defaultProps,m)f[_]===void 0&&(f[_]=m[_]);return{$$typeof:e,type:h,key:l,ref:g,props:f,_owner:o.current}}return reactJsxRuntime_production_min.Fragment=n,reactJsxRuntime_production_min.jsx=d,reactJsxRuntime_production_min.jsxs=d,reactJsxRuntime_production_min}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production_min()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production_min;function requireScheduler_production_min(){return hasRequiredScheduler_production_min||(hasRequiredScheduler_production_min=1,(function(t){function e(ie,Z){var te=ie.length;ie.push(Z);e:for(;0<te;){var ee=te-1>>>1,le=ie[ee];if(0<o(le,Z))ie[ee]=Z,ie[te]=le,te=ee;else break e}}function n(ie){return ie.length===0?null:ie[0]}function i(ie){if(ie.length===0)return null;var Z=ie[0],te=ie.pop();if(te!==Z){ie[0]=te;e:for(var ee=0,le=ie.length,ge=le>>>1;ee<ge;){var Ae=2*(ee+1)-1,Te=ie[Ae],Ce=Ae+1,De=ie[Ce];if(0>o(Te,te))Ce<le&&0>o(De,Te)?(ie[ee]=De,ie[Ce]=te,ee=Ce):(ie[ee]=Te,ie[Ae]=te,ee=Ae);else if(Ce<le&&0>o(De,te))ie[ee]=De,ie[Ce]=te,ee=Ce;else break e}}return Z}function o(ie,Z){var te=ie.sortIndex-Z.sortIndex;return te!==0?te:ie.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;t.unstable_now=function(){return u.now()}}else{var d=Date,h=d.now();t.unstable_now=function(){return d.now()-h}}var m=[],p=[],_=1,f=null,l=3,g=!1,v=!1,S=!1,T=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(ie){for(var Z=n(p);Z!==null;){if(Z.callback===null)i(p);else if(Z.startTime<=ie)i(p),Z.sortIndex=Z.expirationTime,e(m,Z);else break;Z=n(p)}}function M(ie){if(S=!1,R(ie),!v)if(n(m)!==null)v=!0,V(C);else{var Z=n(p);Z!==null&&G(M,Z.startTime-ie)}}function C(ie,Z){v=!1,S&&(S=!1,E(L),L=-1),g=!0;var te=l;try{for(R(Z),f=n(m);f!==null&&(!(f.expirationTime>Z)||ie&&!U());){var ee=f.callback;if(typeof ee=="function"){f.callback=null,l=f.priorityLevel;var le=ee(f.expirationTime<=Z);Z=t.unstable_now(),typeof le=="function"?f.callback=le:f===n(m)&&i(m),R(Z)}else i(m);f=n(m)}if(f!==null)var ge=!0;else{var Ae=n(p);Ae!==null&&G(M,Ae.startTime-Z),ge=!1}return ge}finally{f=null,l=te,g=!1}}var j=!1,$=null,L=-1,N=5,B=-1;function U(){return!(t.unstable_now()-B<N)}function H(){if($!==null){var ie=t.unstable_now();B=ie;var Z=!0;try{Z=$(!0,ie)}finally{Z?Y():(j=!1,$=null)}}else j=!1}var Y;if(typeof O=="function")Y=function(){O(H)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,z=K.port2;K.port1.onmessage=H,Y=function(){z.postMessage(null)}}else Y=function(){T(H,0)};function V(ie){$=ie,j||(j=!0,Y())}function G(ie,Z){L=T(function(){ie(t.unstable_now())},Z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ie){ie.callback=null},t.unstable_continueExecution=function(){v||g||(v=!0,V(C))},t.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<ie?Math.floor(1e3/ie):5},t.unstable_getCurrentPriorityLevel=function(){return l},t.unstable_getFirstCallbackNode=function(){return n(m)},t.unstable_next=function(ie){switch(l){case 1:case 2:case 3:var Z=3;break;default:Z=l}var te=l;l=Z;try{return ie()}finally{l=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ie,Z){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var te=l;l=ie;try{return Z()}finally{l=te}},t.unstable_scheduleCallback=function(ie,Z,te){var ee=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?ee+te:ee):te=ee,ie){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=te+le,ie={id:_++,callback:Z,priorityLevel:ie,startTime:te,expirationTime:le,sortIndex:-1},te>ee?(ie.sortIndex=te,e(p,ie),n(m)===null&&ie===n(p)&&(S?(E(L),L=-1):S=!0,G(M,te-ee))):(ie.sortIndex=le,e(m,ie),v||g||(v=!0,V(C))),ie},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(ie){var Z=l;return function(){var te=l;l=Z;try{return ie.apply(this,arguments)}finally{l=te}}}})(scheduler_production_min)),scheduler_production_min}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production_min()),scheduler.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production_min;function requireReactDom_production_min(){if(hasRequiredReactDom_production_min)return reactDom_production_min;hasRequiredReactDom_production_min=1;var t=requireReact(),e=requireScheduler();function n(b){for(var w="https://reactjs.org/docs/error-decoder.html?invariant="+b,A=1;A<arguments.length;A++)w+="&args[]="+encodeURIComponent(arguments[A]);return"Minified React error #"+b+"; visit "+w+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function u(b,w){d(b,w),d(b+"Capture",w)}function d(b,w){for(o[b]=w,b=0;b<w.length;b++)i.add(w[b])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},f={};function l(b){return m.call(f,b)?!0:m.call(_,b)?!1:p.test(b)?f[b]=!0:(_[b]=!0,!1)}function g(b,w,A,I){if(A!==null&&A.type===0)return!1;switch(typeof w){case"function":case"symbol":return!0;case"boolean":return I?!1:A!==null?!A.acceptsBooleans:(b=b.toLowerCase().slice(0,5),b!=="data-"&&b!=="aria-");default:return!1}}function v(b,w,A,I){if(w===null||typeof w>"u"||g(b,w,A,I))return!0;if(I)return!1;if(A!==null)switch(A.type){case 3:return!w;case 4:return w===!1;case 5:return isNaN(w);case 6:return isNaN(w)||1>w}return!1}function S(b,w,A,I,D,F,W){this.acceptsBooleans=w===2||w===3||w===4,this.attributeName=I,this.attributeNamespace=D,this.mustUseProperty=A,this.propertyName=b,this.type=w,this.sanitizeURL=F,this.removeEmptyString=W}var T={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(b){T[b]=new S(b,0,!1,b,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(b){var w=b[0];T[w]=new S(w,1,!1,b[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(b){T[b]=new S(b,2,!1,b.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(b){T[b]=new S(b,2,!1,b,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(b){T[b]=new S(b,3,!1,b.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(b){T[b]=new S(b,3,!0,b,null,!1,!1)}),["capture","download"].forEach(function(b){T[b]=new S(b,4,!1,b,null,!1,!1)}),["cols","rows","size","span"].forEach(function(b){T[b]=new S(b,6,!1,b,null,!1,!1)}),["rowSpan","start"].forEach(function(b){T[b]=new S(b,5,!1,b.toLowerCase(),null,!1,!1)});var E=/[\-:]([a-z])/g;function O(b){return b[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(b){var w=b.replace(E,O);T[w]=new S(w,1,!1,b,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(b){var w=b.replace(E,O);T[w]=new S(w,1,!1,b,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(b){var w=b.replace(E,O);T[w]=new S(w,1,!1,b,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(b){T[b]=new S(b,1,!1,b.toLowerCase(),null,!1,!1)}),T.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(b){T[b]=new S(b,1,!1,b.toLowerCase(),null,!0,!0)});function R(b,w,A,I){var D=T.hasOwnProperty(w)?T[w]:null;(D!==null?D.type!==0:I||!(2<w.length)||w[0]!=="o"&&w[0]!=="O"||w[1]!=="n"&&w[1]!=="N")&&(v(w,A,D,I)&&(A=null),I||D===null?l(w)&&(A===null?b.removeAttribute(w):b.setAttribute(w,""+A)):D.mustUseProperty?b[D.propertyName]=A===null?D.type===3?!1:"":A:(w=D.attributeName,I=D.attributeNamespace,A===null?b.removeAttribute(w):(D=D.type,A=D===3||D===4&&A===!0?"":""+A,I?b.setAttributeNS(I,w,A):b.setAttribute(w,A))))}var M=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,C=Symbol.for("react.element"),j=Symbol.for("react.portal"),$=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),U=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),K=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),G=Symbol.for("react.offscreen"),ie=Symbol.iterator;function Z(b){return b===null||typeof b!="object"?null:(b=ie&&b[ie]||b["@@iterator"],typeof b=="function"?b:null)}var te=Object.assign,ee;function le(b){if(ee===void 0)try{throw Error()}catch(A){var w=A.stack.trim().match(/\n( *(at )?)/);ee=w&&w[1]||""}return`
`+ee+b}var ge=!1;function Ae(b,w){if(!b||ge)return"";ge=!0;var A=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(w)if(w=function(){throw Error()},Object.defineProperty(w.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(w,[])}catch(_e){var I=_e}Reflect.construct(b,[],w)}else{try{w.call()}catch(_e){I=_e}b.call(w.prototype)}else{try{throw Error()}catch(_e){I=_e}b()}}catch(_e){if(_e&&I&&typeof _e.stack=="string"){for(var D=_e.stack.split(`
`),F=I.stack.split(`
`),W=D.length-1,se=F.length-1;1<=W&&0<=se&&D[W]!==F[se];)se--;for(;1<=W&&0<=se;W--,se--)if(D[W]!==F[se]){if(W!==1||se!==1)do if(W--,se--,0>se||D[W]!==F[se]){var ue=`
`+D[W].replace(" at new "," at ");return b.displayName&&ue.includes("<anonymous>")&&(ue=ue.replace("<anonymous>",b.displayName)),ue}while(1<=W&&0<=se);break}}}finally{ge=!1,Error.prepareStackTrace=A}return(b=b?b.displayName||b.name:"")?le(b):""}function Te(b){switch(b.tag){case 5:return le(b.type);case 16:return le("Lazy");case 13:return le("Suspense");case 19:return le("SuspenseList");case 0:case 2:case 15:return b=Ae(b.type,!1),b;case 11:return b=Ae(b.type.render,!1),b;case 1:return b=Ae(b.type,!0),b;default:return""}}function Ce(b){if(b==null)return null;if(typeof b=="function")return b.displayName||b.name||null;if(typeof b=="string")return b;switch(b){case $:return"Fragment";case j:return"Portal";case N:return"Profiler";case L:return"StrictMode";case Y:return"Suspense";case K:return"SuspenseList"}if(typeof b=="object")switch(b.$$typeof){case U:return(b.displayName||"Context")+".Consumer";case B:return(b._context.displayName||"Context")+".Provider";case H:var w=b.render;return b=b.displayName,b||(b=w.displayName||w.name||"",b=b!==""?"ForwardRef("+b+")":"ForwardRef"),b;case z:return w=b.displayName||null,w!==null?w:Ce(b.type)||"Memo";case V:w=b._payload,b=b._init;try{return Ce(b(w))}catch{}}return null}function De(b){var w=b.type;switch(b.tag){case 24:return"Cache";case 9:return(w.displayName||"Context")+".Consumer";case 10:return(w._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return b=w.render,b=b.displayName||b.name||"",w.displayName||(b!==""?"ForwardRef("+b+")":"ForwardRef");case 7:return"Fragment";case 5:return w;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ce(w);case 8:return w===L?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof w=="function")return w.displayName||w.name||null;if(typeof w=="string")return w}return null}function Re(b){switch(typeof b){case"boolean":case"number":case"string":case"undefined":return b;case"object":return b;default:return""}}function Ee(b){var w=b.type;return(b=b.nodeName)&&b.toLowerCase()==="input"&&(w==="checkbox"||w==="radio")}function Ie(b){var w=Ee(b)?"checked":"value",A=Object.getOwnPropertyDescriptor(b.constructor.prototype,w),I=""+b[w];if(!b.hasOwnProperty(w)&&typeof A<"u"&&typeof A.get=="function"&&typeof A.set=="function"){var D=A.get,F=A.set;return Object.defineProperty(b,w,{configurable:!0,get:function(){return D.call(this)},set:function(W){I=""+W,F.call(this,W)}}),Object.defineProperty(b,w,{enumerable:A.enumerable}),{getValue:function(){return I},setValue:function(W){I=""+W},stopTracking:function(){b._valueTracker=null,delete b[w]}}}}function Le(b){b._valueTracker||(b._valueTracker=Ie(b))}function Se(b){if(!b)return!1;var w=b._valueTracker;if(!w)return!0;var A=w.getValue(),I="";return b&&(I=Ee(b)?b.checked?"true":"false":b.value),b=I,b!==A?(w.setValue(b),!0):!1}function Ye(b){if(b=b||(typeof document<"u"?document:void 0),typeof b>"u")return null;try{return b.activeElement||b.body}catch{return b.body}}function Fe(b,w){var A=w.checked;return te({},w,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:A??b._wrapperState.initialChecked})}function at(b,w){var A=w.defaultValue==null?"":w.defaultValue,I=w.checked!=null?w.checked:w.defaultChecked;A=Re(w.value!=null?w.value:A),b._wrapperState={initialChecked:I,initialValue:A,controlled:w.type==="checkbox"||w.type==="radio"?w.checked!=null:w.value!=null}}function lt(b,w){w=w.checked,w!=null&&R(b,"checked",w,!1)}function dt(b,w){lt(b,w);var A=Re(w.value),I=w.type;if(A!=null)I==="number"?(A===0&&b.value===""||b.value!=A)&&(b.value=""+A):b.value!==""+A&&(b.value=""+A);else if(I==="submit"||I==="reset"){b.removeAttribute("value");return}w.hasOwnProperty("value")?xt(b,w.type,A):w.hasOwnProperty("defaultValue")&&xt(b,w.type,Re(w.defaultValue)),w.checked==null&&w.defaultChecked!=null&&(b.defaultChecked=!!w.defaultChecked)}function Rt(b,w,A){if(w.hasOwnProperty("value")||w.hasOwnProperty("defaultValue")){var I=w.type;if(!(I!=="submit"&&I!=="reset"||w.value!==void 0&&w.value!==null))return;w=""+b._wrapperState.initialValue,A||w===b.value||(b.value=w),b.defaultValue=w}A=b.name,A!==""&&(b.name=""),b.defaultChecked=!!b._wrapperState.initialChecked,A!==""&&(b.name=A)}function xt(b,w,A){(w!=="number"||Ye(b.ownerDocument)!==b)&&(A==null?b.defaultValue=""+b._wrapperState.initialValue:b.defaultValue!==""+A&&(b.defaultValue=""+A))}var Ct=Array.isArray;function wt(b,w,A,I){if(b=b.options,w){w={};for(var D=0;D<A.length;D++)w["$"+A[D]]=!0;for(A=0;A<b.length;A++)D=w.hasOwnProperty("$"+b[A].value),b[A].selected!==D&&(b[A].selected=D),D&&I&&(b[A].defaultSelected=!0)}else{for(A=""+Re(A),w=null,D=0;D<b.length;D++){if(b[D].value===A){b[D].selected=!0,I&&(b[D].defaultSelected=!0);return}w!==null||b[D].disabled||(w=b[D])}w!==null&&(w.selected=!0)}}function Ze(b,w){if(w.dangerouslySetInnerHTML!=null)throw Error(n(91));return te({},w,{value:void 0,defaultValue:void 0,children:""+b._wrapperState.initialValue})}function St(b,w){var A=w.value;if(A==null){if(A=w.children,w=w.defaultValue,A!=null){if(w!=null)throw Error(n(92));if(Ct(A)){if(1<A.length)throw Error(n(93));A=A[0]}w=A}w==null&&(w=""),A=w}b._wrapperState={initialValue:Re(A)}}function Yt(b,w){var A=Re(w.value),I=Re(w.defaultValue);A!=null&&(A=""+A,A!==b.value&&(b.value=A),w.defaultValue==null&&b.defaultValue!==A&&(b.defaultValue=A)),I!=null&&(b.defaultValue=""+I)}function rt(b){var w=b.textContent;w===b._wrapperState.initialValue&&w!==""&&w!==null&&(b.value=w)}function Er(b){switch(b){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ir(b,w){return b==null||b==="http://www.w3.org/1999/xhtml"?Er(w):b==="http://www.w3.org/2000/svg"&&w==="foreignObject"?"http://www.w3.org/1999/xhtml":b}var jr,ir=(function(b){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(w,A,I,D){MSApp.execUnsafeLocalFunction(function(){return b(w,A,I,D)})}:b})(function(b,w){if(b.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in b)b.innerHTML=w;else{for(jr=jr||document.createElement("div"),jr.innerHTML="<svg>"+w.valueOf().toString()+"</svg>",w=jr.firstChild;b.firstChild;)b.removeChild(b.firstChild);for(;w.firstChild;)b.appendChild(w.firstChild)}});function Gt(b,w){if(w){var A=b.firstChild;if(A&&A===b.lastChild&&A.nodeType===3){A.nodeValue=w;return}}b.textContent=w}var ur={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},At=["Webkit","ms","Moz","O"];Object.keys(ur).forEach(function(b){At.forEach(function(w){w=w+b.charAt(0).toUpperCase()+b.substring(1),ur[w]=ur[b]})});function $r(b,w,A){return w==null||typeof w=="boolean"||w===""?"":A||typeof w!="number"||w===0||ur.hasOwnProperty(b)&&ur[b]?(""+w).trim():w+"px"}function Xe(b,w){b=b.style;for(var A in w)if(w.hasOwnProperty(A)){var I=A.indexOf("--")===0,D=$r(A,w[A],I);A==="float"&&(A="cssFloat"),I?b.setProperty(A,D):b[A]=D}}var Ar=te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zr(b,w){if(w){if(Ar[b]&&(w.children!=null||w.dangerouslySetInnerHTML!=null))throw Error(n(137,b));if(w.dangerouslySetInnerHTML!=null){if(w.children!=null)throw Error(n(60));if(typeof w.dangerouslySetInnerHTML!="object"||!("__html"in w.dangerouslySetInnerHTML))throw Error(n(61))}if(w.style!=null&&typeof w.style!="object")throw Error(n(62))}}function nn(b,w){if(b.indexOf("-")===-1)return typeof w.is=="string";switch(b){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var er=null;function nt(b){return b=b.target||b.srcElement||window,b.correspondingUseElement&&(b=b.correspondingUseElement),b.nodeType===3?b.parentNode:b}var Pr=null,hr=null,tr=null;function et(b){if(b=Xi(b)){if(typeof Pr!="function")throw Error(n(280));var w=b.stateNode;w&&(w=Oo(w),Pr(b.stateNode,b.type,w))}}function Me(b){hr?tr?tr.push(b):tr=[b]:hr=b}function Ve(){if(hr){var b=hr,w=tr;if(tr=hr=null,et(b),w)for(b=0;b<w.length;b++)et(w[b])}}function Mt(b,w){return b(w)}function $t(){}var pr=!1;function Pt(b,w,A){if(pr)return b(w,A);pr=!0;try{return Mt(b,w,A)}finally{pr=!1,(hr!==null||tr!==null)&&($t(),Ve())}}function Nt(b,w){var A=b.stateNode;if(A===null)return null;var I=Oo(A);if(I===null)return null;A=I[w];e:switch(w){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(I=!I.disabled)||(b=b.type,I=!(b==="button"||b==="input"||b==="select"||b==="textarea")),b=!I;break e;default:b=!1}if(b)return null;if(A&&typeof A!="function")throw Error(n(231,w,typeof A));return A}var mr=!1;if(h)try{var Lt={};Object.defineProperty(Lt,"passive",{get:function(){mr=!0}}),window.addEventListener("test",Lt,Lt),window.removeEventListener("test",Lt,Lt)}catch{mr=!1}function Wt(b,w,A,I,D,F,W,se,ue){var _e=Array.prototype.slice.call(arguments,3);try{w.apply(A,_e)}catch(Oe){this.onError(Oe)}}var gr=!1,Xt=null,Gr=!1,fn=null,qn={onError:function(b){gr=!0,Xt=b}};function Vn(b,w,A,I,D,F,W,se,ue){gr=!1,Xt=null,Wt.apply(qn,arguments)}function Q(b,w,A,I,D,F,W,se,ue){if(Vn.apply(this,arguments),gr){if(gr){var _e=Xt;gr=!1,Xt=null}else throw Error(n(198));Gr||(Gr=!0,fn=_e)}}function oe(b){var w=b,A=b;if(b.alternate)for(;w.return;)w=w.return;else{b=w;do w=b,(w.flags&4098)!==0&&(A=w.return),b=w.return;while(b)}return w.tag===3?A:null}function ce(b){if(b.tag===13){var w=b.memoizedState;if(w===null&&(b=b.alternate,b!==null&&(w=b.memoizedState)),w!==null)return w.dehydrated}return null}function fe(b){if(oe(b)!==b)throw Error(n(188))}function ye(b){var w=b.alternate;if(!w){if(w=oe(b),w===null)throw Error(n(188));return w!==b?null:b}for(var A=b,I=w;;){var D=A.return;if(D===null)break;var F=D.alternate;if(F===null){if(I=D.return,I!==null){A=I;continue}break}if(D.child===F.child){for(F=D.child;F;){if(F===A)return fe(D),b;if(F===I)return fe(D),w;F=F.sibling}throw Error(n(188))}if(A.return!==I.return)A=D,I=F;else{for(var W=!1,se=D.child;se;){if(se===A){W=!0,A=D,I=F;break}if(se===I){W=!0,I=D,A=F;break}se=se.sibling}if(!W){for(se=F.child;se;){if(se===A){W=!0,A=F,I=D;break}if(se===I){W=!0,I=F,A=D;break}se=se.sibling}if(!W)throw Error(n(189))}}if(A.alternate!==I)throw Error(n(190))}if(A.tag!==3)throw Error(n(188));return A.stateNode.current===A?b:w}function we(b){return b=ye(b),b!==null?Ne(b):null}function Ne(b){if(b.tag===5||b.tag===6)return b;for(b=b.child;b!==null;){var w=Ne(b);if(w!==null)return w;b=b.sibling}return null}var We=e.unstable_scheduleCallback,Be=e.unstable_cancelCallback,ot=e.unstable_shouldYield,bt=e.unstable_requestPaint,ft=e.unstable_now,Vt=e.unstable_getCurrentPriorityLevel,xe=e.unstable_ImmediatePriority,pt=e.unstable_UserBlockingPriority,vt=e.unstable_NormalPriority,yr=e.unstable_LowPriority,Nr=e.unstable_IdlePriority,wn=null,_r=null;function fo(b){if(_r&&typeof _r.onCommitFiberRoot=="function")try{_r.onCommitFiberRoot(wn,b,void 0,(b.current.flags&128)===128)}catch{}}var Ot=Math.clz32?Math.clz32:po,oi=Math.log,ho=Math.LN2;function po(b){return b>>>=0,b===0?32:31-(oi(b)/ho|0)|0}var Un=64,si=4194304;function zn(b){switch(b&-b){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return b&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return b&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return b}}function hn(b,w){var A=b.pendingLanes;if(A===0)return 0;var I=0,D=b.suspendedLanes,F=b.pingedLanes,W=A&268435455;if(W!==0){var se=W&~D;se!==0?I=zn(se):(F&=W,F!==0&&(I=zn(F)))}else W=A&~D,W!==0?I=zn(W):F!==0&&(I=zn(F));if(I===0)return 0;if(w!==0&&w!==I&&(w&D)===0&&(D=I&-I,F=w&-w,D>=F||D===16&&(F&4194240)!==0))return w;if((I&4)!==0&&(I|=A&16),w=b.entangledLanes,w!==0)for(b=b.entanglements,w&=I;0<w;)A=31-Ot(w),D=1<<A,I|=b[A],w&=~D;return I}function ji(b,w){switch(b){case 1:case 2:case 4:return w+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return w+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mo(b,w){for(var A=b.suspendedLanes,I=b.pingedLanes,D=b.expirationTimes,F=b.pendingLanes;0<F;){var W=31-Ot(F),se=1<<W,ue=D[W];ue===-1?((se&A)===0||(se&I)!==0)&&(D[W]=ji(se,w)):ue<=w&&(b.expiredLanes|=se),F&=~se}}function ai(b){return b=b.pendingLanes&-1073741825,b!==0?b:b&1073741824?1073741824:0}function $i(){var b=Un;return Un<<=1,(Un&4194240)===0&&(Un=64),b}function li(b){for(var w=[],A=0;31>A;A++)w.push(b);return w}function on(b,w,A){b.pendingLanes|=w,w!==536870912&&(b.suspendedLanes=0,b.pingedLanes=0),b=b.eventTimes,w=31-Ot(w),b[w]=A}function go(b,w){var A=b.pendingLanes&~w;b.pendingLanes=w,b.suspendedLanes=0,b.pingedLanes=0,b.expiredLanes&=w,b.mutableReadLanes&=w,b.entangledLanes&=w,w=b.entanglements;var I=b.eventTimes;for(b=b.expirationTimes;0<A;){var D=31-Ot(A),F=1<<D;w[D]=0,I[D]=-1,b[D]=-1,A&=~F}}function ui(b,w){var A=b.entangledLanes|=w;for(b=b.entanglements;A;){var I=31-Ot(A),D=1<<I;D&w|b[I]&w&&(b[I]|=w),A&=~D}}var gt=0;function Ni(b){return b&=-b,1<b?4<b?(b&268435455)!==0?16:536870912:4:1}var ut,ci,st,it,di,Sn=!1,Gn=[],Wr=null,Hr=null,Kr=null,Tn=new Map,En=new Map,Yr=[],yo="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Di(b,w){switch(b){case"focusin":case"focusout":Wr=null;break;case"dragenter":case"dragleave":Hr=null;break;case"mouseover":case"mouseout":Kr=null;break;case"pointerover":case"pointerout":Tn.delete(w.pointerId);break;case"gotpointercapture":case"lostpointercapture":En.delete(w.pointerId)}}function An(b,w,A,I,D,F){return b===null||b.nativeEvent!==F?(b={blockedOn:w,domEventName:A,eventSystemFlags:I,nativeEvent:F,targetContainers:[D]},w!==null&&(w=Xi(w),w!==null&&ci(w)),b):(b.eventSystemFlags|=I,w=b.targetContainers,D!==null&&w.indexOf(D)===-1&&w.push(D),b)}function _o(b,w,A,I,D){switch(w){case"focusin":return Wr=An(Wr,b,w,A,I,D),!0;case"dragenter":return Hr=An(Hr,b,w,A,I,D),!0;case"mouseover":return Kr=An(Kr,b,w,A,I,D),!0;case"pointerover":var F=D.pointerId;return Tn.set(F,An(Tn.get(F)||null,b,w,A,I,D)),!0;case"gotpointercapture":return F=D.pointerId,En.set(F,An(En.get(F)||null,b,w,A,I,D)),!0}return!1}function Li(b){var w=Wn(b.target);if(w!==null){var A=oe(w);if(A!==null){if(w=A.tag,w===13){if(w=ce(A),w!==null){b.blockedOn=w,di(b.priority,function(){st(A)});return}}else if(w===3&&A.stateNode.current.memoizedState.isDehydrated){b.blockedOn=A.tag===3?A.stateNode.containerInfo:null;return}}}b.blockedOn=null}function q(b){if(b.blockedOn!==null)return!1;for(var w=b.targetContainers;0<w.length;){var A=br(b.domEventName,b.eventSystemFlags,w[0],b.nativeEvent);if(A===null){A=b.nativeEvent;var I=new A.constructor(A.type,A);er=I,A.target.dispatchEvent(I),er=null}else return w=Xi(A),w!==null&&ci(w),b.blockedOn=A,!1;w.shift()}return!0}function J(b,w,A){q(b)&&A.delete(w)}function ne(){Sn=!1,Wr!==null&&q(Wr)&&(Wr=null),Hr!==null&&q(Hr)&&(Hr=null),Kr!==null&&q(Kr)&&(Kr=null),Tn.forEach(J),En.forEach(J)}function ae(b,w){b.blockedOn===w&&(b.blockedOn=null,Sn||(Sn=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ne)))}function he(b){function w(D){return ae(D,b)}if(0<Gn.length){ae(Gn[0],b);for(var A=1;A<Gn.length;A++){var I=Gn[A];I.blockedOn===b&&(I.blockedOn=null)}}for(Wr!==null&&ae(Wr,b),Hr!==null&&ae(Hr,b),Kr!==null&&ae(Kr,b),Tn.forEach(w),En.forEach(w),A=0;A<Yr.length;A++)I=Yr[A],I.blockedOn===b&&(I.blockedOn=null);for(;0<Yr.length&&(A=Yr[0],A.blockedOn===null);)Li(A),A.blockedOn===null&&Yr.shift()}var be=M.ReactCurrentBatchConfig,je=!0;function Ke(b,w,A,I){var D=gt,F=be.transition;be.transition=null;try{gt=1,ct(b,w,A,I)}finally{gt=D,be.transition=F}}function ht(b,w,A,I){var D=gt,F=be.transition;be.transition=null;try{gt=4,ct(b,w,A,I)}finally{gt=D,be.transition=F}}function ct(b,w,A,I){if(je){var D=br(b,w,A,I);if(D===null)Os(b,w,I,Et,A),Di(b,I);else if(_o(D,b,w,A,I))I.stopPropagation();else if(Di(b,I),w&4&&-1<yo.indexOf(b)){for(;D!==null;){var F=Xi(D);if(F!==null&&ut(F),F=br(b,w,A,I),F===null&&Os(b,w,I,Et,A),F===D)break;D=F}D!==null&&I.stopPropagation()}else Os(b,w,I,null,A)}}var Et=null;function br(b,w,A,I){if(Et=null,b=nt(I),b=Wn(b),b!==null)if(w=oe(b),w===null)b=null;else if(A=w.tag,A===13){if(b=ce(w),b!==null)return b;b=null}else if(A===3){if(w.stateNode.current.memoizedState.isDehydrated)return w.tag===3?w.stateNode.containerInfo:null;b=null}else w!==b&&(b=null);return Et=b,null}function cr(b){switch(b){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Vt()){case xe:return 1;case pt:return 4;case vt:case yr:return 16;case Nr:return 536870912;default:return 16}default:return 16}}var ve=null,mt=null,Tt=null;function Dr(){if(Tt)return Tt;var b,w=mt,A=w.length,I,D="value"in ve?ve.value:ve.textContent,F=D.length;for(b=0;b<A&&w[b]===D[b];b++);var W=A-b;for(I=1;I<=W&&w[A-I]===D[F-I];I++);return Tt=D.slice(b,1<I?1-I:void 0)}function Xr(b){var w=b.keyCode;return"charCode"in b?(b=b.charCode,b===0&&w===13&&(b=13)):b=w,b===10&&(b=13),32<=b||b===13?b:0}function bo(){return!0}function Fa(){return!1}function Or(b){function w(A,I,D,F,W){this._reactName=A,this._targetInst=D,this.type=I,this.nativeEvent=F,this.target=W,this.currentTarget=null;for(var se in b)b.hasOwnProperty(se)&&(A=b[se],this[se]=A?A(F):F[se]);return this.isDefaultPrevented=(F.defaultPrevented!=null?F.defaultPrevented:F.returnValue===!1)?bo:Fa,this.isPropagationStopped=Fa,this}return te(w.prototype,{preventDefault:function(){this.defaultPrevented=!0;var A=this.nativeEvent;A&&(A.preventDefault?A.preventDefault():typeof A.returnValue!="unknown"&&(A.returnValue=!1),this.isDefaultPrevented=bo)},stopPropagation:function(){var A=this.nativeEvent;A&&(A.stopPropagation?A.stopPropagation():typeof A.cancelBubble!="unknown"&&(A.cancelBubble=!0),this.isPropagationStopped=bo)},persist:function(){},isPersistent:bo}),w}var fi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(b){return b.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hs=Or(fi),Fi=te({},fi,{view:0,detail:0}),Zu=Or(Fi),ps,ms,Bi,vo=te({},Fi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ys,button:0,buttons:0,relatedTarget:function(b){return b.relatedTarget===void 0?b.fromElement===b.srcElement?b.toElement:b.fromElement:b.relatedTarget},movementX:function(b){return"movementX"in b?b.movementX:(b!==Bi&&(Bi&&b.type==="mousemove"?(ps=b.screenX-Bi.screenX,ms=b.screenY-Bi.screenY):ms=ps=0,Bi=b),ps)},movementY:function(b){return"movementY"in b?b.movementY:ms}}),Ba=Or(vo),ec=te({},vo,{dataTransfer:0}),tc=Or(ec),rc=te({},Fi,{relatedTarget:0}),gs=Or(rc),nc=te({},fi,{animationName:0,elapsedTime:0,pseudoElement:0}),ic=Or(nc),oc=te({},fi,{clipboardData:function(b){return"clipboardData"in b?b.clipboardData:window.clipboardData}}),sc=Or(oc),ac=te({},fi,{data:0}),qa=Or(ac),lc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dc(b){var w=this.nativeEvent;return w.getModifierState?w.getModifierState(b):(b=cc[b])?!!w[b]:!1}function ys(){return dc}var fc=te({},Fi,{key:function(b){if(b.key){var w=lc[b.key]||b.key;if(w!=="Unidentified")return w}return b.type==="keypress"?(b=Xr(b),b===13?"Enter":String.fromCharCode(b)):b.type==="keydown"||b.type==="keyup"?uc[b.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ys,charCode:function(b){return b.type==="keypress"?Xr(b):0},keyCode:function(b){return b.type==="keydown"||b.type==="keyup"?b.keyCode:0},which:function(b){return b.type==="keypress"?Xr(b):b.type==="keydown"||b.type==="keyup"?b.keyCode:0}}),hc=Or(fc),pc=te({},vo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Va=Or(pc),mc=te({},Fi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ys}),gc=Or(mc),yc=te({},fi,{propertyName:0,elapsedTime:0,pseudoElement:0}),_c=Or(yc),bc=te({},vo,{deltaX:function(b){return"deltaX"in b?b.deltaX:"wheelDeltaX"in b?-b.wheelDeltaX:0},deltaY:function(b){return"deltaY"in b?b.deltaY:"wheelDeltaY"in b?-b.wheelDeltaY:"wheelDelta"in b?-b.wheelDelta:0},deltaZ:0,deltaMode:0}),vc=Or(bc),xc=[9,13,27,32],_s=h&&"CompositionEvent"in window,qi=null;h&&"documentMode"in document&&(qi=document.documentMode);var wc=h&&"TextEvent"in window&&!qi,Ua=h&&(!_s||qi&&8<qi&&11>=qi),za=" ",Ga=!1;function Wa(b,w){switch(b){case"keyup":return xc.indexOf(w.keyCode)!==-1;case"keydown":return w.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ha(b){return b=b.detail,typeof b=="object"&&"data"in b?b.data:null}var hi=!1;function Sc(b,w){switch(b){case"compositionend":return Ha(w);case"keypress":return w.which!==32?null:(Ga=!0,za);case"textInput":return b=w.data,b===za&&Ga?null:b;default:return null}}function Tc(b,w){if(hi)return b==="compositionend"||!_s&&Wa(b,w)?(b=Dr(),Tt=mt=ve=null,hi=!1,b):null;switch(b){case"paste":return null;case"keypress":if(!(w.ctrlKey||w.altKey||w.metaKey)||w.ctrlKey&&w.altKey){if(w.char&&1<w.char.length)return w.char;if(w.which)return String.fromCharCode(w.which)}return null;case"compositionend":return Ua&&w.locale!=="ko"?null:w.data;default:return null}}var Ec={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ka(b){var w=b&&b.nodeName&&b.nodeName.toLowerCase();return w==="input"?!!Ec[b.type]:w==="textarea"}function Ya(b,w,A,I){Me(I),w=Eo(w,"onChange"),0<w.length&&(A=new hs("onChange","change",null,A,I),b.push({event:A,listeners:w}))}var Vi=null,Ui=null;function Ac(b){hl(b,0)}function xo(b){var w=bi(b);if(Se(w))return b}function Pc(b,w){if(b==="change")return w}var Xa=!1;if(h){var bs;if(h){var vs="oninput"in document;if(!vs){var Ja=document.createElement("div");Ja.setAttribute("oninput","return;"),vs=typeof Ja.oninput=="function"}bs=vs}else bs=!1;Xa=bs&&(!document.documentMode||9<document.documentMode)}function Qa(){Vi&&(Vi.detachEvent("onpropertychange",Za),Ui=Vi=null)}function Za(b){if(b.propertyName==="value"&&xo(Ui)){var w=[];Ya(w,Ui,b,nt(b)),Pt(Ac,w)}}function Oc(b,w,A){b==="focusin"?(Qa(),Vi=w,Ui=A,Vi.attachEvent("onpropertychange",Za)):b==="focusout"&&Qa()}function kc(b){if(b==="selectionchange"||b==="keyup"||b==="keydown")return xo(Ui)}function Rc(b,w){if(b==="click")return xo(w)}function Cc(b,w){if(b==="input"||b==="change")return xo(w)}function Mc(b,w){return b===w&&(b!==0||1/b===1/w)||b!==b&&w!==w}var Jr=typeof Object.is=="function"?Object.is:Mc;function zi(b,w){if(Jr(b,w))return!0;if(typeof b!="object"||b===null||typeof w!="object"||w===null)return!1;var A=Object.keys(b),I=Object.keys(w);if(A.length!==I.length)return!1;for(I=0;I<A.length;I++){var D=A[I];if(!m.call(w,D)||!Jr(b[D],w[D]))return!1}return!0}function el(b){for(;b&&b.firstChild;)b=b.firstChild;return b}function tl(b,w){var A=el(b);b=0;for(var I;A;){if(A.nodeType===3){if(I=b+A.textContent.length,b<=w&&I>=w)return{node:A,offset:w-b};b=I}e:{for(;A;){if(A.nextSibling){A=A.nextSibling;break e}A=A.parentNode}A=void 0}A=el(A)}}function rl(b,w){return b&&w?b===w?!0:b&&b.nodeType===3?!1:w&&w.nodeType===3?rl(b,w.parentNode):"contains"in b?b.contains(w):b.compareDocumentPosition?!!(b.compareDocumentPosition(w)&16):!1:!1}function nl(){for(var b=window,w=Ye();w instanceof b.HTMLIFrameElement;){try{var A=typeof w.contentWindow.location.href=="string"}catch{A=!1}if(A)b=w.contentWindow;else break;w=Ye(b.document)}return w}function xs(b){var w=b&&b.nodeName&&b.nodeName.toLowerCase();return w&&(w==="input"&&(b.type==="text"||b.type==="search"||b.type==="tel"||b.type==="url"||b.type==="password")||w==="textarea"||b.contentEditable==="true")}function Ic(b){var w=nl(),A=b.focusedElem,I=b.selectionRange;if(w!==A&&A&&A.ownerDocument&&rl(A.ownerDocument.documentElement,A)){if(I!==null&&xs(A)){if(w=I.start,b=I.end,b===void 0&&(b=w),"selectionStart"in A)A.selectionStart=w,A.selectionEnd=Math.min(b,A.value.length);else if(b=(w=A.ownerDocument||document)&&w.defaultView||window,b.getSelection){b=b.getSelection();var D=A.textContent.length,F=Math.min(I.start,D);I=I.end===void 0?F:Math.min(I.end,D),!b.extend&&F>I&&(D=I,I=F,F=D),D=tl(A,F);var W=tl(A,I);D&&W&&(b.rangeCount!==1||b.anchorNode!==D.node||b.anchorOffset!==D.offset||b.focusNode!==W.node||b.focusOffset!==W.offset)&&(w=w.createRange(),w.setStart(D.node,D.offset),b.removeAllRanges(),F>I?(b.addRange(w),b.extend(W.node,W.offset)):(w.setEnd(W.node,W.offset),b.addRange(w)))}}for(w=[],b=A;b=b.parentNode;)b.nodeType===1&&w.push({element:b,left:b.scrollLeft,top:b.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<w.length;A++)b=w[A],b.element.scrollLeft=b.left,b.element.scrollTop=b.top}}var jc=h&&"documentMode"in document&&11>=document.documentMode,mi=null,ws=null,Gi=null,Ss=!1;function il(b,w,A){var I=A.window===A?A.document:A.nodeType===9?A:A.ownerDocument;Ss||mi==null||mi!==Ye(I)||(I=mi,"selectionStart"in I&&xs(I)?I={start:I.selectionStart,end:I.selectionEnd}:(I=(I.ownerDocument&&I.ownerDocument.defaultView||window).getSelection(),I={anchorNode:I.anchorNode,anchorOffset:I.anchorOffset,focusNode:I.focusNode,focusOffset:I.focusOffset}),Gi&&zi(Gi,I)||(Gi=I,I=Eo(ws,"onSelect"),0<I.length&&(w=new hs("onSelect","select",null,w,A),b.push({event:w,listeners:I}),w.target=mi)))}function wo(b,w){var A={};return A[b.toLowerCase()]=w.toLowerCase(),A["Webkit"+b]="webkit"+w,A["Moz"+b]="moz"+w,A}var gi={animationend:wo("Animation","AnimationEnd"),animationiteration:wo("Animation","AnimationIteration"),animationstart:wo("Animation","AnimationStart"),transitionend:wo("Transition","TransitionEnd")},Ts={},ol={};h&&(ol=document.createElement("div").style,"AnimationEvent"in window||(delete gi.animationend.animation,delete gi.animationiteration.animation,delete gi.animationstart.animation),"TransitionEvent"in window||delete gi.transitionend.transition);function So(b){if(Ts[b])return Ts[b];if(!gi[b])return b;var w=gi[b],A;for(A in w)if(w.hasOwnProperty(A)&&A in ol)return Ts[b]=w[A];return b}var sl=So("animationend"),al=So("animationiteration"),ll=So("animationstart"),ul=So("transitionend"),cl=new Map,dl="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pn(b,w){cl.set(b,w),u(w,[b])}for(var Es=0;Es<dl.length;Es++){var As=dl[Es],$c=As.toLowerCase(),Nc=As[0].toUpperCase()+As.slice(1);Pn($c,"on"+Nc)}Pn(sl,"onAnimationEnd"),Pn(al,"onAnimationIteration"),Pn(ll,"onAnimationStart"),Pn("dblclick","onDoubleClick"),Pn("focusin","onFocus"),Pn("focusout","onBlur"),Pn(ul,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dc=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wi));function fl(b,w,A){var I=b.type||"unknown-event";b.currentTarget=A,Q(I,w,void 0,b),b.currentTarget=null}function hl(b,w){w=(w&4)!==0;for(var A=0;A<b.length;A++){var I=b[A],D=I.event;I=I.listeners;e:{var F=void 0;if(w)for(var W=I.length-1;0<=W;W--){var se=I[W],ue=se.instance,_e=se.currentTarget;if(se=se.listener,ue!==F&&D.isPropagationStopped())break e;fl(D,se,_e),F=ue}else for(W=0;W<I.length;W++){if(se=I[W],ue=se.instance,_e=se.currentTarget,se=se.listener,ue!==F&&D.isPropagationStopped())break e;fl(D,se,_e),F=ue}}}if(Gr)throw b=fn,Gr=!1,fn=null,b}function It(b,w){var A=w[js];A===void 0&&(A=w[js]=new Set);var I=b+"__bubble";A.has(I)||(pl(w,b,2,!1),A.add(I))}function Ps(b,w,A){var I=0;w&&(I|=4),pl(A,b,I,w)}var To="_reactListening"+Math.random().toString(36).slice(2);function Hi(b){if(!b[To]){b[To]=!0,i.forEach(function(A){A!=="selectionchange"&&(Dc.has(A)||Ps(A,!1,b),Ps(A,!0,b))});var w=b.nodeType===9?b:b.ownerDocument;w===null||w[To]||(w[To]=!0,Ps("selectionchange",!1,w))}}function pl(b,w,A,I){switch(cr(w)){case 1:var D=Ke;break;case 4:D=ht;break;default:D=ct}A=D.bind(null,w,A,b),D=void 0,!mr||w!=="touchstart"&&w!=="touchmove"&&w!=="wheel"||(D=!0),I?D!==void 0?b.addEventListener(w,A,{capture:!0,passive:D}):b.addEventListener(w,A,!0):D!==void 0?b.addEventListener(w,A,{passive:D}):b.addEventListener(w,A,!1)}function Os(b,w,A,I,D){var F=I;if((w&1)===0&&(w&2)===0&&I!==null)e:for(;;){if(I===null)return;var W=I.tag;if(W===3||W===4){var se=I.stateNode.containerInfo;if(se===D||se.nodeType===8&&se.parentNode===D)break;if(W===4)for(W=I.return;W!==null;){var ue=W.tag;if((ue===3||ue===4)&&(ue=W.stateNode.containerInfo,ue===D||ue.nodeType===8&&ue.parentNode===D))return;W=W.return}for(;se!==null;){if(W=Wn(se),W===null)return;if(ue=W.tag,ue===5||ue===6){I=F=W;continue e}se=se.parentNode}}I=I.return}Pt(function(){var _e=F,Oe=nt(A),ke=[];e:{var Pe=cl.get(b);if(Pe!==void 0){var qe=hs,ze=b;switch(b){case"keypress":if(Xr(A)===0)break e;case"keydown":case"keyup":qe=hc;break;case"focusin":ze="focus",qe=gs;break;case"focusout":ze="blur",qe=gs;break;case"beforeblur":case"afterblur":qe=gs;break;case"click":if(A.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":qe=Ba;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":qe=tc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":qe=gc;break;case sl:case al:case ll:qe=ic;break;case ul:qe=_c;break;case"scroll":qe=Zu;break;case"wheel":qe=vc;break;case"copy":case"cut":case"paste":qe=sc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":qe=Va}var Ge=(w&4)!==0,Ut=!Ge&&b==="scroll",pe=Ge?Pe!==null?Pe+"Capture":null:Pe;Ge=[];for(var de=_e,me;de!==null;){me=de;var $e=me.stateNode;if(me.tag===5&&$e!==null&&(me=$e,pe!==null&&($e=Nt(de,pe),$e!=null&&Ge.push(Ki(de,$e,me)))),Ut)break;de=de.return}0<Ge.length&&(Pe=new qe(Pe,ze,null,A,Oe),ke.push({event:Pe,listeners:Ge}))}}if((w&7)===0){e:{if(Pe=b==="mouseover"||b==="pointerover",qe=b==="mouseout"||b==="pointerout",Pe&&A!==er&&(ze=A.relatedTarget||A.fromElement)&&(Wn(ze)||ze[pn]))break e;if((qe||Pe)&&(Pe=Oe.window===Oe?Oe:(Pe=Oe.ownerDocument)?Pe.defaultView||Pe.parentWindow:window,qe?(ze=A.relatedTarget||A.toElement,qe=_e,ze=ze?Wn(ze):null,ze!==null&&(Ut=oe(ze),ze!==Ut||ze.tag!==5&&ze.tag!==6)&&(ze=null)):(qe=null,ze=_e),qe!==ze)){if(Ge=Ba,$e="onMouseLeave",pe="onMouseEnter",de="mouse",(b==="pointerout"||b==="pointerover")&&(Ge=Va,$e="onPointerLeave",pe="onPointerEnter",de="pointer"),Ut=qe==null?Pe:bi(qe),me=ze==null?Pe:bi(ze),Pe=new Ge($e,de+"leave",qe,A,Oe),Pe.target=Ut,Pe.relatedTarget=me,$e=null,Wn(Oe)===_e&&(Ge=new Ge(pe,de+"enter",ze,A,Oe),Ge.target=me,Ge.relatedTarget=Ut,$e=Ge),Ut=$e,qe&&ze)t:{for(Ge=qe,pe=ze,de=0,me=Ge;me;me=yi(me))de++;for(me=0,$e=pe;$e;$e=yi($e))me++;for(;0<de-me;)Ge=yi(Ge),de--;for(;0<me-de;)pe=yi(pe),me--;for(;de--;){if(Ge===pe||pe!==null&&Ge===pe.alternate)break t;Ge=yi(Ge),pe=yi(pe)}Ge=null}else Ge=null;qe!==null&&ml(ke,Pe,qe,Ge,!1),ze!==null&&Ut!==null&&ml(ke,Ut,ze,Ge,!0)}}e:{if(Pe=_e?bi(_e):window,qe=Pe.nodeName&&Pe.nodeName.toLowerCase(),qe==="select"||qe==="input"&&Pe.type==="file")var He=Pc;else if(Ka(Pe))if(Xa)He=Cc;else{He=kc;var Je=Oc}else(qe=Pe.nodeName)&&qe.toLowerCase()==="input"&&(Pe.type==="checkbox"||Pe.type==="radio")&&(He=Rc);if(He&&(He=He(b,_e))){Ya(ke,He,A,Oe);break e}Je&&Je(b,Pe,_e),b==="focusout"&&(Je=Pe._wrapperState)&&Je.controlled&&Pe.type==="number"&&xt(Pe,"number",Pe.value)}switch(Je=_e?bi(_e):window,b){case"focusin":(Ka(Je)||Je.contentEditable==="true")&&(mi=Je,ws=_e,Gi=null);break;case"focusout":Gi=ws=mi=null;break;case"mousedown":Ss=!0;break;case"contextmenu":case"mouseup":case"dragend":Ss=!1,il(ke,A,Oe);break;case"selectionchange":if(jc)break;case"keydown":case"keyup":il(ke,A,Oe)}var Qe;if(_s)e:{switch(b){case"compositionstart":var tt="onCompositionStart";break e;case"compositionend":tt="onCompositionEnd";break e;case"compositionupdate":tt="onCompositionUpdate";break e}tt=void 0}else hi?Wa(b,A)&&(tt="onCompositionEnd"):b==="keydown"&&A.keyCode===229&&(tt="onCompositionStart");tt&&(Ua&&A.locale!=="ko"&&(hi||tt!=="onCompositionStart"?tt==="onCompositionEnd"&&hi&&(Qe=Dr()):(ve=Oe,mt="value"in ve?ve.value:ve.textContent,hi=!0)),Je=Eo(_e,tt),0<Je.length&&(tt=new qa(tt,b,null,A,Oe),ke.push({event:tt,listeners:Je}),Qe?tt.data=Qe:(Qe=Ha(A),Qe!==null&&(tt.data=Qe)))),(Qe=wc?Sc(b,A):Tc(b,A))&&(_e=Eo(_e,"onBeforeInput"),0<_e.length&&(Oe=new qa("onBeforeInput","beforeinput",null,A,Oe),ke.push({event:Oe,listeners:_e}),Oe.data=Qe))}hl(ke,w)})}function Ki(b,w,A){return{instance:b,listener:w,currentTarget:A}}function Eo(b,w){for(var A=w+"Capture",I=[];b!==null;){var D=b,F=D.stateNode;D.tag===5&&F!==null&&(D=F,F=Nt(b,A),F!=null&&I.unshift(Ki(b,F,D)),F=Nt(b,w),F!=null&&I.push(Ki(b,F,D))),b=b.return}return I}function yi(b){if(b===null)return null;do b=b.return;while(b&&b.tag!==5);return b||null}function ml(b,w,A,I,D){for(var F=w._reactName,W=[];A!==null&&A!==I;){var se=A,ue=se.alternate,_e=se.stateNode;if(ue!==null&&ue===I)break;se.tag===5&&_e!==null&&(se=_e,D?(ue=Nt(A,F),ue!=null&&W.unshift(Ki(A,ue,se))):D||(ue=Nt(A,F),ue!=null&&W.push(Ki(A,ue,se)))),A=A.return}W.length!==0&&b.push({event:w,listeners:W})}var Lc=/\r\n?/g,Fc=/\u0000|\uFFFD/g;function gl(b){return(typeof b=="string"?b:""+b).replace(Lc,`
`).replace(Fc,"")}function Ao(b,w,A){if(w=gl(w),gl(b)!==w&&A)throw Error(n(425))}function Po(){}var ks=null,Rs=null;function Cs(b,w){return b==="textarea"||b==="noscript"||typeof w.children=="string"||typeof w.children=="number"||typeof w.dangerouslySetInnerHTML=="object"&&w.dangerouslySetInnerHTML!==null&&w.dangerouslySetInnerHTML.__html!=null}var Ms=typeof setTimeout=="function"?setTimeout:void 0,Bc=typeof clearTimeout=="function"?clearTimeout:void 0,yl=typeof Promise=="function"?Promise:void 0,qc=typeof queueMicrotask=="function"?queueMicrotask:typeof yl<"u"?function(b){return yl.resolve(null).then(b).catch(Vc)}:Ms;function Vc(b){setTimeout(function(){throw b})}function Is(b,w){var A=w,I=0;do{var D=A.nextSibling;if(b.removeChild(A),D&&D.nodeType===8)if(A=D.data,A==="/$"){if(I===0){b.removeChild(D),he(w);return}I--}else A!=="$"&&A!=="$?"&&A!=="$!"||I++;A=D}while(A);he(w)}function On(b){for(;b!=null;b=b.nextSibling){var w=b.nodeType;if(w===1||w===3)break;if(w===8){if(w=b.data,w==="$"||w==="$!"||w==="$?")break;if(w==="/$")return null}}return b}function _l(b){b=b.previousSibling;for(var w=0;b;){if(b.nodeType===8){var A=b.data;if(A==="$"||A==="$!"||A==="$?"){if(w===0)return b;w--}else A==="/$"&&w++}b=b.previousSibling}return null}var _i=Math.random().toString(36).slice(2),sn="__reactFiber$"+_i,Yi="__reactProps$"+_i,pn="__reactContainer$"+_i,js="__reactEvents$"+_i,Uc="__reactListeners$"+_i,zc="__reactHandles$"+_i;function Wn(b){var w=b[sn];if(w)return w;for(var A=b.parentNode;A;){if(w=A[pn]||A[sn]){if(A=w.alternate,w.child!==null||A!==null&&A.child!==null)for(b=_l(b);b!==null;){if(A=b[sn])return A;b=_l(b)}return w}b=A,A=b.parentNode}return null}function Xi(b){return b=b[sn]||b[pn],!b||b.tag!==5&&b.tag!==6&&b.tag!==13&&b.tag!==3?null:b}function bi(b){if(b.tag===5||b.tag===6)return b.stateNode;throw Error(n(33))}function Oo(b){return b[Yi]||null}var $s=[],vi=-1;function kn(b){return{current:b}}function jt(b){0>vi||(b.current=$s[vi],$s[vi]=null,vi--)}function kt(b,w){vi++,$s[vi]=b.current,b.current=w}var Rn={},or=kn(Rn),vr=kn(!1),Hn=Rn;function xi(b,w){var A=b.type.contextTypes;if(!A)return Rn;var I=b.stateNode;if(I&&I.__reactInternalMemoizedUnmaskedChildContext===w)return I.__reactInternalMemoizedMaskedChildContext;var D={},F;for(F in A)D[F]=w[F];return I&&(b=b.stateNode,b.__reactInternalMemoizedUnmaskedChildContext=w,b.__reactInternalMemoizedMaskedChildContext=D),D}function xr(b){return b=b.childContextTypes,b!=null}function ko(){jt(vr),jt(or)}function bl(b,w,A){if(or.current!==Rn)throw Error(n(168));kt(or,w),kt(vr,A)}function vl(b,w,A){var I=b.stateNode;if(w=w.childContextTypes,typeof I.getChildContext!="function")return A;I=I.getChildContext();for(var D in I)if(!(D in w))throw Error(n(108,De(b)||"Unknown",D));return te({},A,I)}function Ro(b){return b=(b=b.stateNode)&&b.__reactInternalMemoizedMergedChildContext||Rn,Hn=or.current,kt(or,b),kt(vr,vr.current),!0}function xl(b,w,A){var I=b.stateNode;if(!I)throw Error(n(169));A?(b=vl(b,w,Hn),I.__reactInternalMemoizedMergedChildContext=b,jt(vr),jt(or),kt(or,b)):jt(vr),kt(vr,A)}var mn=null,Co=!1,Ns=!1;function wl(b){mn===null?mn=[b]:mn.push(b)}function Gc(b){Co=!0,wl(b)}function Cn(){if(!Ns&&mn!==null){Ns=!0;var b=0,w=gt;try{var A=mn;for(gt=1;b<A.length;b++){var I=A[b];do I=I(!0);while(I!==null)}mn=null,Co=!1}catch(D){throw mn!==null&&(mn=mn.slice(b+1)),We(xe,Cn),D}finally{gt=w,Ns=!1}}return null}var wi=[],Si=0,Mo=null,Io=0,Lr=[],Fr=0,Kn=null,gn=1,yn="";function Yn(b,w){wi[Si++]=Io,wi[Si++]=Mo,Mo=b,Io=w}function Sl(b,w,A){Lr[Fr++]=gn,Lr[Fr++]=yn,Lr[Fr++]=Kn,Kn=b;var I=gn;b=yn;var D=32-Ot(I)-1;I&=~(1<<D),A+=1;var F=32-Ot(w)+D;if(30<F){var W=D-D%5;F=(I&(1<<W)-1).toString(32),I>>=W,D-=W,gn=1<<32-Ot(w)+D|A<<D|I,yn=F+b}else gn=1<<F|A<<D|I,yn=b}function Ds(b){b.return!==null&&(Yn(b,1),Sl(b,1,0))}function Ls(b){for(;b===Mo;)Mo=wi[--Si],wi[Si]=null,Io=wi[--Si],wi[Si]=null;for(;b===Kn;)Kn=Lr[--Fr],Lr[Fr]=null,yn=Lr[--Fr],Lr[Fr]=null,gn=Lr[--Fr],Lr[Fr]=null}var Rr=null,Cr=null,Dt=!1,Qr=null;function Tl(b,w){var A=Ur(5,null,null,0);A.elementType="DELETED",A.stateNode=w,A.return=b,w=b.deletions,w===null?(b.deletions=[A],b.flags|=16):w.push(A)}function El(b,w){switch(b.tag){case 5:var A=b.type;return w=w.nodeType!==1||A.toLowerCase()!==w.nodeName.toLowerCase()?null:w,w!==null?(b.stateNode=w,Rr=b,Cr=On(w.firstChild),!0):!1;case 6:return w=b.pendingProps===""||w.nodeType!==3?null:w,w!==null?(b.stateNode=w,Rr=b,Cr=null,!0):!1;case 13:return w=w.nodeType!==8?null:w,w!==null?(A=Kn!==null?{id:gn,overflow:yn}:null,b.memoizedState={dehydrated:w,treeContext:A,retryLane:1073741824},A=Ur(18,null,null,0),A.stateNode=w,A.return=b,b.child=A,Rr=b,Cr=null,!0):!1;default:return!1}}function Fs(b){return(b.mode&1)!==0&&(b.flags&128)===0}function Bs(b){if(Dt){var w=Cr;if(w){var A=w;if(!El(b,w)){if(Fs(b))throw Error(n(418));w=On(A.nextSibling);var I=Rr;w&&El(b,w)?Tl(I,A):(b.flags=b.flags&-4097|2,Dt=!1,Rr=b)}}else{if(Fs(b))throw Error(n(418));b.flags=b.flags&-4097|2,Dt=!1,Rr=b}}}function Al(b){for(b=b.return;b!==null&&b.tag!==5&&b.tag!==3&&b.tag!==13;)b=b.return;Rr=b}function jo(b){if(b!==Rr)return!1;if(!Dt)return Al(b),Dt=!0,!1;var w;if((w=b.tag!==3)&&!(w=b.tag!==5)&&(w=b.type,w=w!=="head"&&w!=="body"&&!Cs(b.type,b.memoizedProps)),w&&(w=Cr)){if(Fs(b))throw Pl(),Error(n(418));for(;w;)Tl(b,w),w=On(w.nextSibling)}if(Al(b),b.tag===13){if(b=b.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(n(317));e:{for(b=b.nextSibling,w=0;b;){if(b.nodeType===8){var A=b.data;if(A==="/$"){if(w===0){Cr=On(b.nextSibling);break e}w--}else A!=="$"&&A!=="$!"&&A!=="$?"||w++}b=b.nextSibling}Cr=null}}else Cr=Rr?On(b.stateNode.nextSibling):null;return!0}function Pl(){for(var b=Cr;b;)b=On(b.nextSibling)}function Ti(){Cr=Rr=null,Dt=!1}function qs(b){Qr===null?Qr=[b]:Qr.push(b)}var Wc=M.ReactCurrentBatchConfig;function Ji(b,w,A){if(b=A.ref,b!==null&&typeof b!="function"&&typeof b!="object"){if(A._owner){if(A=A._owner,A){if(A.tag!==1)throw Error(n(309));var I=A.stateNode}if(!I)throw Error(n(147,b));var D=I,F=""+b;return w!==null&&w.ref!==null&&typeof w.ref=="function"&&w.ref._stringRef===F?w.ref:(w=function(W){var se=D.refs;W===null?delete se[F]:se[F]=W},w._stringRef=F,w)}if(typeof b!="string")throw Error(n(284));if(!A._owner)throw Error(n(290,b))}return b}function $o(b,w){throw b=Object.prototype.toString.call(w),Error(n(31,b==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":b))}function Ol(b){var w=b._init;return w(b._payload)}function kl(b){function w(pe,de){if(b){var me=pe.deletions;me===null?(pe.deletions=[de],pe.flags|=16):me.push(de)}}function A(pe,de){if(!b)return null;for(;de!==null;)w(pe,de),de=de.sibling;return null}function I(pe,de){for(pe=new Map;de!==null;)de.key!==null?pe.set(de.key,de):pe.set(de.index,de),de=de.sibling;return pe}function D(pe,de){return pe=Fn(pe,de),pe.index=0,pe.sibling=null,pe}function F(pe,de,me){return pe.index=me,b?(me=pe.alternate,me!==null?(me=me.index,me<de?(pe.flags|=2,de):me):(pe.flags|=2,de)):(pe.flags|=1048576,de)}function W(pe){return b&&pe.alternate===null&&(pe.flags|=2),pe}function se(pe,de,me,$e){return de===null||de.tag!==6?(de=Ia(me,pe.mode,$e),de.return=pe,de):(de=D(de,me),de.return=pe,de)}function ue(pe,de,me,$e){var He=me.type;return He===$?Oe(pe,de,me.props.children,$e,me.key):de!==null&&(de.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===V&&Ol(He)===de.type)?($e=D(de,me.props),$e.ref=Ji(pe,de,me),$e.return=pe,$e):($e=os(me.type,me.key,me.props,null,pe.mode,$e),$e.ref=Ji(pe,de,me),$e.return=pe,$e)}function _e(pe,de,me,$e){return de===null||de.tag!==4||de.stateNode.containerInfo!==me.containerInfo||de.stateNode.implementation!==me.implementation?(de=ja(me,pe.mode,$e),de.return=pe,de):(de=D(de,me.children||[]),de.return=pe,de)}function Oe(pe,de,me,$e,He){return de===null||de.tag!==7?(de=ni(me,pe.mode,$e,He),de.return=pe,de):(de=D(de,me),de.return=pe,de)}function ke(pe,de,me){if(typeof de=="string"&&de!==""||typeof de=="number")return de=Ia(""+de,pe.mode,me),de.return=pe,de;if(typeof de=="object"&&de!==null){switch(de.$$typeof){case C:return me=os(de.type,de.key,de.props,null,pe.mode,me),me.ref=Ji(pe,null,de),me.return=pe,me;case j:return de=ja(de,pe.mode,me),de.return=pe,de;case V:var $e=de._init;return ke(pe,$e(de._payload),me)}if(Ct(de)||Z(de))return de=ni(de,pe.mode,me,null),de.return=pe,de;$o(pe,de)}return null}function Pe(pe,de,me,$e){var He=de!==null?de.key:null;if(typeof me=="string"&&me!==""||typeof me=="number")return He!==null?null:se(pe,de,""+me,$e);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case C:return me.key===He?ue(pe,de,me,$e):null;case j:return me.key===He?_e(pe,de,me,$e):null;case V:return He=me._init,Pe(pe,de,He(me._payload),$e)}if(Ct(me)||Z(me))return He!==null?null:Oe(pe,de,me,$e,null);$o(pe,me)}return null}function qe(pe,de,me,$e,He){if(typeof $e=="string"&&$e!==""||typeof $e=="number")return pe=pe.get(me)||null,se(de,pe,""+$e,He);if(typeof $e=="object"&&$e!==null){switch($e.$$typeof){case C:return pe=pe.get($e.key===null?me:$e.key)||null,ue(de,pe,$e,He);case j:return pe=pe.get($e.key===null?me:$e.key)||null,_e(de,pe,$e,He);case V:var Je=$e._init;return qe(pe,de,me,Je($e._payload),He)}if(Ct($e)||Z($e))return pe=pe.get(me)||null,Oe(de,pe,$e,He,null);$o(de,$e)}return null}function ze(pe,de,me,$e){for(var He=null,Je=null,Qe=de,tt=de=0,Zt=null;Qe!==null&&tt<me.length;tt++){Qe.index>tt?(Zt=Qe,Qe=null):Zt=Qe.sibling;var _t=Pe(pe,Qe,me[tt],$e);if(_t===null){Qe===null&&(Qe=Zt);break}b&&Qe&&_t.alternate===null&&w(pe,Qe),de=F(_t,de,tt),Je===null?He=_t:Je.sibling=_t,Je=_t,Qe=Zt}if(tt===me.length)return A(pe,Qe),Dt&&Yn(pe,tt),He;if(Qe===null){for(;tt<me.length;tt++)Qe=ke(pe,me[tt],$e),Qe!==null&&(de=F(Qe,de,tt),Je===null?He=Qe:Je.sibling=Qe,Je=Qe);return Dt&&Yn(pe,tt),He}for(Qe=I(pe,Qe);tt<me.length;tt++)Zt=qe(Qe,pe,tt,me[tt],$e),Zt!==null&&(b&&Zt.alternate!==null&&Qe.delete(Zt.key===null?tt:Zt.key),de=F(Zt,de,tt),Je===null?He=Zt:Je.sibling=Zt,Je=Zt);return b&&Qe.forEach(function(Bn){return w(pe,Bn)}),Dt&&Yn(pe,tt),He}function Ge(pe,de,me,$e){var He=Z(me);if(typeof He!="function")throw Error(n(150));if(me=He.call(me),me==null)throw Error(n(151));for(var Je=He=null,Qe=de,tt=de=0,Zt=null,_t=me.next();Qe!==null&&!_t.done;tt++,_t=me.next()){Qe.index>tt?(Zt=Qe,Qe=null):Zt=Qe.sibling;var Bn=Pe(pe,Qe,_t.value,$e);if(Bn===null){Qe===null&&(Qe=Zt);break}b&&Qe&&Bn.alternate===null&&w(pe,Qe),de=F(Bn,de,tt),Je===null?He=Bn:Je.sibling=Bn,Je=Bn,Qe=Zt}if(_t.done)return A(pe,Qe),Dt&&Yn(pe,tt),He;if(Qe===null){for(;!_t.done;tt++,_t=me.next())_t=ke(pe,_t.value,$e),_t!==null&&(de=F(_t,de,tt),Je===null?He=_t:Je.sibling=_t,Je=_t);return Dt&&Yn(pe,tt),He}for(Qe=I(pe,Qe);!_t.done;tt++,_t=me.next())_t=qe(Qe,pe,tt,_t.value,$e),_t!==null&&(b&&_t.alternate!==null&&Qe.delete(_t.key===null?tt:_t.key),de=F(_t,de,tt),Je===null?He=_t:Je.sibling=_t,Je=_t);return b&&Qe.forEach(function(Ad){return w(pe,Ad)}),Dt&&Yn(pe,tt),He}function Ut(pe,de,me,$e){if(typeof me=="object"&&me!==null&&me.type===$&&me.key===null&&(me=me.props.children),typeof me=="object"&&me!==null){switch(me.$$typeof){case C:e:{for(var He=me.key,Je=de;Je!==null;){if(Je.key===He){if(He=me.type,He===$){if(Je.tag===7){A(pe,Je.sibling),de=D(Je,me.props.children),de.return=pe,pe=de;break e}}else if(Je.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===V&&Ol(He)===Je.type){A(pe,Je.sibling),de=D(Je,me.props),de.ref=Ji(pe,Je,me),de.return=pe,pe=de;break e}A(pe,Je);break}else w(pe,Je);Je=Je.sibling}me.type===$?(de=ni(me.props.children,pe.mode,$e,me.key),de.return=pe,pe=de):($e=os(me.type,me.key,me.props,null,pe.mode,$e),$e.ref=Ji(pe,de,me),$e.return=pe,pe=$e)}return W(pe);case j:e:{for(Je=me.key;de!==null;){if(de.key===Je)if(de.tag===4&&de.stateNode.containerInfo===me.containerInfo&&de.stateNode.implementation===me.implementation){A(pe,de.sibling),de=D(de,me.children||[]),de.return=pe,pe=de;break e}else{A(pe,de);break}else w(pe,de);de=de.sibling}de=ja(me,pe.mode,$e),de.return=pe,pe=de}return W(pe);case V:return Je=me._init,Ut(pe,de,Je(me._payload),$e)}if(Ct(me))return ze(pe,de,me,$e);if(Z(me))return Ge(pe,de,me,$e);$o(pe,me)}return typeof me=="string"&&me!==""||typeof me=="number"?(me=""+me,de!==null&&de.tag===6?(A(pe,de.sibling),de=D(de,me),de.return=pe,pe=de):(A(pe,de),de=Ia(me,pe.mode,$e),de.return=pe,pe=de),W(pe)):A(pe,de)}return Ut}var Ei=kl(!0),Rl=kl(!1),No=kn(null),Do=null,Ai=null,Vs=null;function Us(){Vs=Ai=Do=null}function zs(b){var w=No.current;jt(No),b._currentValue=w}function Gs(b,w,A){for(;b!==null;){var I=b.alternate;if((b.childLanes&w)!==w?(b.childLanes|=w,I!==null&&(I.childLanes|=w)):I!==null&&(I.childLanes&w)!==w&&(I.childLanes|=w),b===A)break;b=b.return}}function Pi(b,w){Do=b,Vs=Ai=null,b=b.dependencies,b!==null&&b.firstContext!==null&&((b.lanes&w)!==0&&(wr=!0),b.firstContext=null)}function Br(b){var w=b._currentValue;if(Vs!==b)if(b={context:b,memoizedValue:w,next:null},Ai===null){if(Do===null)throw Error(n(308));Ai=b,Do.dependencies={lanes:0,firstContext:b}}else Ai=Ai.next=b;return w}var Xn=null;function Ws(b){Xn===null?Xn=[b]:Xn.push(b)}function Cl(b,w,A,I){var D=w.interleaved;return D===null?(A.next=A,Ws(w)):(A.next=D.next,D.next=A),w.interleaved=A,_n(b,I)}function _n(b,w){b.lanes|=w;var A=b.alternate;for(A!==null&&(A.lanes|=w),A=b,b=b.return;b!==null;)b.childLanes|=w,A=b.alternate,A!==null&&(A.childLanes|=w),A=b,b=b.return;return A.tag===3?A.stateNode:null}var Mn=!1;function Hs(b){b.updateQueue={baseState:b.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ml(b,w){b=b.updateQueue,w.updateQueue===b&&(w.updateQueue={baseState:b.baseState,firstBaseUpdate:b.firstBaseUpdate,lastBaseUpdate:b.lastBaseUpdate,shared:b.shared,effects:b.effects})}function bn(b,w){return{eventTime:b,lane:w,tag:0,payload:null,callback:null,next:null}}function In(b,w,A){var I=b.updateQueue;if(I===null)return null;if(I=I.shared,(yt&2)!==0){var D=I.pending;return D===null?w.next=w:(w.next=D.next,D.next=w),I.pending=w,_n(b,A)}return D=I.interleaved,D===null?(w.next=w,Ws(I)):(w.next=D.next,D.next=w),I.interleaved=w,_n(b,A)}function Lo(b,w,A){if(w=w.updateQueue,w!==null&&(w=w.shared,(A&4194240)!==0)){var I=w.lanes;I&=b.pendingLanes,A|=I,w.lanes=A,ui(b,A)}}function Il(b,w){var A=b.updateQueue,I=b.alternate;if(I!==null&&(I=I.updateQueue,A===I)){var D=null,F=null;if(A=A.firstBaseUpdate,A!==null){do{var W={eventTime:A.eventTime,lane:A.lane,tag:A.tag,payload:A.payload,callback:A.callback,next:null};F===null?D=F=W:F=F.next=W,A=A.next}while(A!==null);F===null?D=F=w:F=F.next=w}else D=F=w;A={baseState:I.baseState,firstBaseUpdate:D,lastBaseUpdate:F,shared:I.shared,effects:I.effects},b.updateQueue=A;return}b=A.lastBaseUpdate,b===null?A.firstBaseUpdate=w:b.next=w,A.lastBaseUpdate=w}function Fo(b,w,A,I){var D=b.updateQueue;Mn=!1;var F=D.firstBaseUpdate,W=D.lastBaseUpdate,se=D.shared.pending;if(se!==null){D.shared.pending=null;var ue=se,_e=ue.next;ue.next=null,W===null?F=_e:W.next=_e,W=ue;var Oe=b.alternate;Oe!==null&&(Oe=Oe.updateQueue,se=Oe.lastBaseUpdate,se!==W&&(se===null?Oe.firstBaseUpdate=_e:se.next=_e,Oe.lastBaseUpdate=ue))}if(F!==null){var ke=D.baseState;W=0,Oe=_e=ue=null,se=F;do{var Pe=se.lane,qe=se.eventTime;if((I&Pe)===Pe){Oe!==null&&(Oe=Oe.next={eventTime:qe,lane:0,tag:se.tag,payload:se.payload,callback:se.callback,next:null});e:{var ze=b,Ge=se;switch(Pe=w,qe=A,Ge.tag){case 1:if(ze=Ge.payload,typeof ze=="function"){ke=ze.call(qe,ke,Pe);break e}ke=ze;break e;case 3:ze.flags=ze.flags&-65537|128;case 0:if(ze=Ge.payload,Pe=typeof ze=="function"?ze.call(qe,ke,Pe):ze,Pe==null)break e;ke=te({},ke,Pe);break e;case 2:Mn=!0}}se.callback!==null&&se.lane!==0&&(b.flags|=64,Pe=D.effects,Pe===null?D.effects=[se]:Pe.push(se))}else qe={eventTime:qe,lane:Pe,tag:se.tag,payload:se.payload,callback:se.callback,next:null},Oe===null?(_e=Oe=qe,ue=ke):Oe=Oe.next=qe,W|=Pe;if(se=se.next,se===null){if(se=D.shared.pending,se===null)break;Pe=se,se=Pe.next,Pe.next=null,D.lastBaseUpdate=Pe,D.shared.pending=null}}while(!0);if(Oe===null&&(ue=ke),D.baseState=ue,D.firstBaseUpdate=_e,D.lastBaseUpdate=Oe,w=D.shared.interleaved,w!==null){D=w;do W|=D.lane,D=D.next;while(D!==w)}else F===null&&(D.shared.lanes=0);Zn|=W,b.lanes=W,b.memoizedState=ke}}function jl(b,w,A){if(b=w.effects,w.effects=null,b!==null)for(w=0;w<b.length;w++){var I=b[w],D=I.callback;if(D!==null){if(I.callback=null,I=A,typeof D!="function")throw Error(n(191,D));D.call(I)}}}var Qi={},an=kn(Qi),Zi=kn(Qi),eo=kn(Qi);function Jn(b){if(b===Qi)throw Error(n(174));return b}function Ks(b,w){switch(kt(eo,w),kt(Zi,b),kt(an,Qi),b=w.nodeType,b){case 9:case 11:w=(w=w.documentElement)?w.namespaceURI:Ir(null,"");break;default:b=b===8?w.parentNode:w,w=b.namespaceURI||null,b=b.tagName,w=Ir(w,b)}jt(an),kt(an,w)}function Oi(){jt(an),jt(Zi),jt(eo)}function $l(b){Jn(eo.current);var w=Jn(an.current),A=Ir(w,b.type);w!==A&&(kt(Zi,b),kt(an,A))}function Ys(b){Zi.current===b&&(jt(an),jt(Zi))}var Ft=kn(0);function Bo(b){for(var w=b;w!==null;){if(w.tag===13){var A=w.memoizedState;if(A!==null&&(A=A.dehydrated,A===null||A.data==="$?"||A.data==="$!"))return w}else if(w.tag===19&&w.memoizedProps.revealOrder!==void 0){if((w.flags&128)!==0)return w}else if(w.child!==null){w.child.return=w,w=w.child;continue}if(w===b)break;for(;w.sibling===null;){if(w.return===null||w.return===b)return null;w=w.return}w.sibling.return=w.return,w=w.sibling}return null}var Xs=[];function Js(){for(var b=0;b<Xs.length;b++)Xs[b]._workInProgressVersionPrimary=null;Xs.length=0}var qo=M.ReactCurrentDispatcher,Qs=M.ReactCurrentBatchConfig,Qn=0,Bt=null,Ht=null,Jt=null,Vo=!1,to=!1,ro=0,Hc=0;function sr(){throw Error(n(321))}function Zs(b,w){if(w===null)return!1;for(var A=0;A<w.length&&A<b.length;A++)if(!Jr(b[A],w[A]))return!1;return!0}function ea(b,w,A,I,D,F){if(Qn=F,Bt=w,w.memoizedState=null,w.updateQueue=null,w.lanes=0,qo.current=b===null||b.memoizedState===null?Jc:Qc,b=A(I,D),to){F=0;do{if(to=!1,ro=0,25<=F)throw Error(n(301));F+=1,Jt=Ht=null,w.updateQueue=null,qo.current=Zc,b=A(I,D)}while(to)}if(qo.current=Go,w=Ht!==null&&Ht.next!==null,Qn=0,Jt=Ht=Bt=null,Vo=!1,w)throw Error(n(300));return b}function ta(){var b=ro!==0;return ro=0,b}function un(){var b={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jt===null?Bt.memoizedState=Jt=b:Jt=Jt.next=b,Jt}function qr(){if(Ht===null){var b=Bt.alternate;b=b!==null?b.memoizedState:null}else b=Ht.next;var w=Jt===null?Bt.memoizedState:Jt.next;if(w!==null)Jt=w,Ht=b;else{if(b===null)throw Error(n(310));Ht=b,b={memoizedState:Ht.memoizedState,baseState:Ht.baseState,baseQueue:Ht.baseQueue,queue:Ht.queue,next:null},Jt===null?Bt.memoizedState=Jt=b:Jt=Jt.next=b}return Jt}function no(b,w){return typeof w=="function"?w(b):w}function ra(b){var w=qr(),A=w.queue;if(A===null)throw Error(n(311));A.lastRenderedReducer=b;var I=Ht,D=I.baseQueue,F=A.pending;if(F!==null){if(D!==null){var W=D.next;D.next=F.next,F.next=W}I.baseQueue=D=F,A.pending=null}if(D!==null){F=D.next,I=I.baseState;var se=W=null,ue=null,_e=F;do{var Oe=_e.lane;if((Qn&Oe)===Oe)ue!==null&&(ue=ue.next={lane:0,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null}),I=_e.hasEagerState?_e.eagerState:b(I,_e.action);else{var ke={lane:Oe,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null};ue===null?(se=ue=ke,W=I):ue=ue.next=ke,Bt.lanes|=Oe,Zn|=Oe}_e=_e.next}while(_e!==null&&_e!==F);ue===null?W=I:ue.next=se,Jr(I,w.memoizedState)||(wr=!0),w.memoizedState=I,w.baseState=W,w.baseQueue=ue,A.lastRenderedState=I}if(b=A.interleaved,b!==null){D=b;do F=D.lane,Bt.lanes|=F,Zn|=F,D=D.next;while(D!==b)}else D===null&&(A.lanes=0);return[w.memoizedState,A.dispatch]}function na(b){var w=qr(),A=w.queue;if(A===null)throw Error(n(311));A.lastRenderedReducer=b;var I=A.dispatch,D=A.pending,F=w.memoizedState;if(D!==null){A.pending=null;var W=D=D.next;do F=b(F,W.action),W=W.next;while(W!==D);Jr(F,w.memoizedState)||(wr=!0),w.memoizedState=F,w.baseQueue===null&&(w.baseState=F),A.lastRenderedState=F}return[F,I]}function Nl(){}function Dl(b,w){var A=Bt,I=qr(),D=w(),F=!Jr(I.memoizedState,D);if(F&&(I.memoizedState=D,wr=!0),I=I.queue,ia(Bl.bind(null,A,I,b),[b]),I.getSnapshot!==w||F||Jt!==null&&Jt.memoizedState.tag&1){if(A.flags|=2048,io(9,Fl.bind(null,A,I,D,w),void 0,null),Qt===null)throw Error(n(349));(Qn&30)!==0||Ll(A,w,D)}return D}function Ll(b,w,A){b.flags|=16384,b={getSnapshot:w,value:A},w=Bt.updateQueue,w===null?(w={lastEffect:null,stores:null},Bt.updateQueue=w,w.stores=[b]):(A=w.stores,A===null?w.stores=[b]:A.push(b))}function Fl(b,w,A,I){w.value=A,w.getSnapshot=I,ql(w)&&Vl(b)}function Bl(b,w,A){return A(function(){ql(w)&&Vl(b)})}function ql(b){var w=b.getSnapshot;b=b.value;try{var A=w();return!Jr(b,A)}catch{return!0}}function Vl(b){var w=_n(b,1);w!==null&&rn(w,b,1,-1)}function Ul(b){var w=un();return typeof b=="function"&&(b=b()),w.memoizedState=w.baseState=b,b={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:no,lastRenderedState:b},w.queue=b,b=b.dispatch=Xc.bind(null,Bt,b),[w.memoizedState,b]}function io(b,w,A,I){return b={tag:b,create:w,destroy:A,deps:I,next:null},w=Bt.updateQueue,w===null?(w={lastEffect:null,stores:null},Bt.updateQueue=w,w.lastEffect=b.next=b):(A=w.lastEffect,A===null?w.lastEffect=b.next=b:(I=A.next,A.next=b,b.next=I,w.lastEffect=b)),b}function zl(){return qr().memoizedState}function Uo(b,w,A,I){var D=un();Bt.flags|=b,D.memoizedState=io(1|w,A,void 0,I===void 0?null:I)}function zo(b,w,A,I){var D=qr();I=I===void 0?null:I;var F=void 0;if(Ht!==null){var W=Ht.memoizedState;if(F=W.destroy,I!==null&&Zs(I,W.deps)){D.memoizedState=io(w,A,F,I);return}}Bt.flags|=b,D.memoizedState=io(1|w,A,F,I)}function Gl(b,w){return Uo(8390656,8,b,w)}function ia(b,w){return zo(2048,8,b,w)}function Wl(b,w){return zo(4,2,b,w)}function Hl(b,w){return zo(4,4,b,w)}function Kl(b,w){if(typeof w=="function")return b=b(),w(b),function(){w(null)};if(w!=null)return b=b(),w.current=b,function(){w.current=null}}function Yl(b,w,A){return A=A!=null?A.concat([b]):null,zo(4,4,Kl.bind(null,w,b),A)}function oa(){}function Xl(b,w){var A=qr();w=w===void 0?null:w;var I=A.memoizedState;return I!==null&&w!==null&&Zs(w,I[1])?I[0]:(A.memoizedState=[b,w],b)}function Jl(b,w){var A=qr();w=w===void 0?null:w;var I=A.memoizedState;return I!==null&&w!==null&&Zs(w,I[1])?I[0]:(b=b(),A.memoizedState=[b,w],b)}function Ql(b,w,A){return(Qn&21)===0?(b.baseState&&(b.baseState=!1,wr=!0),b.memoizedState=A):(Jr(A,w)||(A=$i(),Bt.lanes|=A,Zn|=A,b.baseState=!0),w)}function Kc(b,w){var A=gt;gt=A!==0&&4>A?A:4,b(!0);var I=Qs.transition;Qs.transition={};try{b(!1),w()}finally{gt=A,Qs.transition=I}}function Zl(){return qr().memoizedState}function Yc(b,w,A){var I=Dn(b);if(A={lane:I,action:A,hasEagerState:!1,eagerState:null,next:null},eu(b))tu(w,A);else if(A=Cl(b,w,A,I),A!==null){var D=fr();rn(A,b,I,D),ru(A,w,I)}}function Xc(b,w,A){var I=Dn(b),D={lane:I,action:A,hasEagerState:!1,eagerState:null,next:null};if(eu(b))tu(w,D);else{var F=b.alternate;if(b.lanes===0&&(F===null||F.lanes===0)&&(F=w.lastRenderedReducer,F!==null))try{var W=w.lastRenderedState,se=F(W,A);if(D.hasEagerState=!0,D.eagerState=se,Jr(se,W)){var ue=w.interleaved;ue===null?(D.next=D,Ws(w)):(D.next=ue.next,ue.next=D),w.interleaved=D;return}}catch{}finally{}A=Cl(b,w,D,I),A!==null&&(D=fr(),rn(A,b,I,D),ru(A,w,I))}}function eu(b){var w=b.alternate;return b===Bt||w!==null&&w===Bt}function tu(b,w){to=Vo=!0;var A=b.pending;A===null?w.next=w:(w.next=A.next,A.next=w),b.pending=w}function ru(b,w,A){if((A&4194240)!==0){var I=w.lanes;I&=b.pendingLanes,A|=I,w.lanes=A,ui(b,A)}}var Go={readContext:Br,useCallback:sr,useContext:sr,useEffect:sr,useImperativeHandle:sr,useInsertionEffect:sr,useLayoutEffect:sr,useMemo:sr,useReducer:sr,useRef:sr,useState:sr,useDebugValue:sr,useDeferredValue:sr,useTransition:sr,useMutableSource:sr,useSyncExternalStore:sr,useId:sr,unstable_isNewReconciler:!1},Jc={readContext:Br,useCallback:function(b,w){return un().memoizedState=[b,w===void 0?null:w],b},useContext:Br,useEffect:Gl,useImperativeHandle:function(b,w,A){return A=A!=null?A.concat([b]):null,Uo(4194308,4,Kl.bind(null,w,b),A)},useLayoutEffect:function(b,w){return Uo(4194308,4,b,w)},useInsertionEffect:function(b,w){return Uo(4,2,b,w)},useMemo:function(b,w){var A=un();return w=w===void 0?null:w,b=b(),A.memoizedState=[b,w],b},useReducer:function(b,w,A){var I=un();return w=A!==void 0?A(w):w,I.memoizedState=I.baseState=w,b={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:b,lastRenderedState:w},I.queue=b,b=b.dispatch=Yc.bind(null,Bt,b),[I.memoizedState,b]},useRef:function(b){var w=un();return b={current:b},w.memoizedState=b},useState:Ul,useDebugValue:oa,useDeferredValue:function(b){return un().memoizedState=b},useTransition:function(){var b=Ul(!1),w=b[0];return b=Kc.bind(null,b[1]),un().memoizedState=b,[w,b]},useMutableSource:function(){},useSyncExternalStore:function(b,w,A){var I=Bt,D=un();if(Dt){if(A===void 0)throw Error(n(407));A=A()}else{if(A=w(),Qt===null)throw Error(n(349));(Qn&30)!==0||Ll(I,w,A)}D.memoizedState=A;var F={value:A,getSnapshot:w};return D.queue=F,Gl(Bl.bind(null,I,F,b),[b]),I.flags|=2048,io(9,Fl.bind(null,I,F,A,w),void 0,null),A},useId:function(){var b=un(),w=Qt.identifierPrefix;if(Dt){var A=yn,I=gn;A=(I&~(1<<32-Ot(I)-1)).toString(32)+A,w=":"+w+"R"+A,A=ro++,0<A&&(w+="H"+A.toString(32)),w+=":"}else A=Hc++,w=":"+w+"r"+A.toString(32)+":";return b.memoizedState=w},unstable_isNewReconciler:!1},Qc={readContext:Br,useCallback:Xl,useContext:Br,useEffect:ia,useImperativeHandle:Yl,useInsertionEffect:Wl,useLayoutEffect:Hl,useMemo:Jl,useReducer:ra,useRef:zl,useState:function(){return ra(no)},useDebugValue:oa,useDeferredValue:function(b){var w=qr();return Ql(w,Ht.memoizedState,b)},useTransition:function(){var b=ra(no)[0],w=qr().memoizedState;return[b,w]},useMutableSource:Nl,useSyncExternalStore:Dl,useId:Zl,unstable_isNewReconciler:!1},Zc={readContext:Br,useCallback:Xl,useContext:Br,useEffect:ia,useImperativeHandle:Yl,useInsertionEffect:Wl,useLayoutEffect:Hl,useMemo:Jl,useReducer:na,useRef:zl,useState:function(){return na(no)},useDebugValue:oa,useDeferredValue:function(b){var w=qr();return Ht===null?w.memoizedState=b:Ql(w,Ht.memoizedState,b)},useTransition:function(){var b=na(no)[0],w=qr().memoizedState;return[b,w]},useMutableSource:Nl,useSyncExternalStore:Dl,useId:Zl,unstable_isNewReconciler:!1};function Zr(b,w){if(b&&b.defaultProps){w=te({},w),b=b.defaultProps;for(var A in b)w[A]===void 0&&(w[A]=b[A]);return w}return w}function sa(b,w,A,I){w=b.memoizedState,A=A(I,w),A=A==null?w:te({},w,A),b.memoizedState=A,b.lanes===0&&(b.updateQueue.baseState=A)}var Wo={isMounted:function(b){return(b=b._reactInternals)?oe(b)===b:!1},enqueueSetState:function(b,w,A){b=b._reactInternals;var I=fr(),D=Dn(b),F=bn(I,D);F.payload=w,A!=null&&(F.callback=A),w=In(b,F,D),w!==null&&(rn(w,b,D,I),Lo(w,b,D))},enqueueReplaceState:function(b,w,A){b=b._reactInternals;var I=fr(),D=Dn(b),F=bn(I,D);F.tag=1,F.payload=w,A!=null&&(F.callback=A),w=In(b,F,D),w!==null&&(rn(w,b,D,I),Lo(w,b,D))},enqueueForceUpdate:function(b,w){b=b._reactInternals;var A=fr(),I=Dn(b),D=bn(A,I);D.tag=2,w!=null&&(D.callback=w),w=In(b,D,I),w!==null&&(rn(w,b,I,A),Lo(w,b,I))}};function nu(b,w,A,I,D,F,W){return b=b.stateNode,typeof b.shouldComponentUpdate=="function"?b.shouldComponentUpdate(I,F,W):w.prototype&&w.prototype.isPureReactComponent?!zi(A,I)||!zi(D,F):!0}function iu(b,w,A){var I=!1,D=Rn,F=w.contextType;return typeof F=="object"&&F!==null?F=Br(F):(D=xr(w)?Hn:or.current,I=w.contextTypes,F=(I=I!=null)?xi(b,D):Rn),w=new w(A,F),b.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=Wo,b.stateNode=w,w._reactInternals=b,I&&(b=b.stateNode,b.__reactInternalMemoizedUnmaskedChildContext=D,b.__reactInternalMemoizedMaskedChildContext=F),w}function ou(b,w,A,I){b=w.state,typeof w.componentWillReceiveProps=="function"&&w.componentWillReceiveProps(A,I),typeof w.UNSAFE_componentWillReceiveProps=="function"&&w.UNSAFE_componentWillReceiveProps(A,I),w.state!==b&&Wo.enqueueReplaceState(w,w.state,null)}function aa(b,w,A,I){var D=b.stateNode;D.props=A,D.state=b.memoizedState,D.refs={},Hs(b);var F=w.contextType;typeof F=="object"&&F!==null?D.context=Br(F):(F=xr(w)?Hn:or.current,D.context=xi(b,F)),D.state=b.memoizedState,F=w.getDerivedStateFromProps,typeof F=="function"&&(sa(b,w,F,A),D.state=b.memoizedState),typeof w.getDerivedStateFromProps=="function"||typeof D.getSnapshotBeforeUpdate=="function"||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(w=D.state,typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount(),w!==D.state&&Wo.enqueueReplaceState(D,D.state,null),Fo(b,A,D,I),D.state=b.memoizedState),typeof D.componentDidMount=="function"&&(b.flags|=4194308)}function ki(b,w){try{var A="",I=w;do A+=Te(I),I=I.return;while(I);var D=A}catch(F){D=`
Error generating stack: `+F.message+`
`+F.stack}return{value:b,source:w,stack:D,digest:null}}function la(b,w,A){return{value:b,source:null,stack:A??null,digest:w??null}}function ua(b,w){try{console.error(w.value)}catch(A){setTimeout(function(){throw A})}}var ed=typeof WeakMap=="function"?WeakMap:Map;function su(b,w,A){A=bn(-1,A),A.tag=3,A.payload={element:null};var I=w.value;return A.callback=function(){Zo||(Zo=!0,Ta=I),ua(b,w)},A}function au(b,w,A){A=bn(-1,A),A.tag=3;var I=b.type.getDerivedStateFromError;if(typeof I=="function"){var D=w.value;A.payload=function(){return I(D)},A.callback=function(){ua(b,w)}}var F=b.stateNode;return F!==null&&typeof F.componentDidCatch=="function"&&(A.callback=function(){ua(b,w),typeof I!="function"&&($n===null?$n=new Set([this]):$n.add(this));var W=w.stack;this.componentDidCatch(w.value,{componentStack:W!==null?W:""})}),A}function lu(b,w,A){var I=b.pingCache;if(I===null){I=b.pingCache=new ed;var D=new Set;I.set(w,D)}else D=I.get(w),D===void 0&&(D=new Set,I.set(w,D));D.has(A)||(D.add(A),b=md.bind(null,b,w,A),w.then(b,b))}function uu(b){do{var w;if((w=b.tag===13)&&(w=b.memoizedState,w=w!==null?w.dehydrated!==null:!0),w)return b;b=b.return}while(b!==null);return null}function cu(b,w,A,I,D){return(b.mode&1)===0?(b===w?b.flags|=65536:(b.flags|=128,A.flags|=131072,A.flags&=-52805,A.tag===1&&(A.alternate===null?A.tag=17:(w=bn(-1,1),w.tag=2,In(A,w,1))),A.lanes|=1),b):(b.flags|=65536,b.lanes=D,b)}var td=M.ReactCurrentOwner,wr=!1;function dr(b,w,A,I){w.child=b===null?Rl(w,null,A,I):Ei(w,b.child,A,I)}function du(b,w,A,I,D){A=A.render;var F=w.ref;return Pi(w,D),I=ea(b,w,A,I,F,D),A=ta(),b!==null&&!wr?(w.updateQueue=b.updateQueue,w.flags&=-2053,b.lanes&=~D,vn(b,w,D)):(Dt&&A&&Ds(w),w.flags|=1,dr(b,w,I,D),w.child)}function fu(b,w,A,I,D){if(b===null){var F=A.type;return typeof F=="function"&&!Ma(F)&&F.defaultProps===void 0&&A.compare===null&&A.defaultProps===void 0?(w.tag=15,w.type=F,hu(b,w,F,I,D)):(b=os(A.type,null,I,w,w.mode,D),b.ref=w.ref,b.return=w,w.child=b)}if(F=b.child,(b.lanes&D)===0){var W=F.memoizedProps;if(A=A.compare,A=A!==null?A:zi,A(W,I)&&b.ref===w.ref)return vn(b,w,D)}return w.flags|=1,b=Fn(F,I),b.ref=w.ref,b.return=w,w.child=b}function hu(b,w,A,I,D){if(b!==null){var F=b.memoizedProps;if(zi(F,I)&&b.ref===w.ref)if(wr=!1,w.pendingProps=I=F,(b.lanes&D)!==0)(b.flags&131072)!==0&&(wr=!0);else return w.lanes=b.lanes,vn(b,w,D)}return ca(b,w,A,I,D)}function pu(b,w,A){var I=w.pendingProps,D=I.children,F=b!==null?b.memoizedState:null;if(I.mode==="hidden")if((w.mode&1)===0)w.memoizedState={baseLanes:0,cachePool:null,transitions:null},kt(Ci,Mr),Mr|=A;else{if((A&1073741824)===0)return b=F!==null?F.baseLanes|A:A,w.lanes=w.childLanes=1073741824,w.memoizedState={baseLanes:b,cachePool:null,transitions:null},w.updateQueue=null,kt(Ci,Mr),Mr|=b,null;w.memoizedState={baseLanes:0,cachePool:null,transitions:null},I=F!==null?F.baseLanes:A,kt(Ci,Mr),Mr|=I}else F!==null?(I=F.baseLanes|A,w.memoizedState=null):I=A,kt(Ci,Mr),Mr|=I;return dr(b,w,D,A),w.child}function mu(b,w){var A=w.ref;(b===null&&A!==null||b!==null&&b.ref!==A)&&(w.flags|=512,w.flags|=2097152)}function ca(b,w,A,I,D){var F=xr(A)?Hn:or.current;return F=xi(w,F),Pi(w,D),A=ea(b,w,A,I,F,D),I=ta(),b!==null&&!wr?(w.updateQueue=b.updateQueue,w.flags&=-2053,b.lanes&=~D,vn(b,w,D)):(Dt&&I&&Ds(w),w.flags|=1,dr(b,w,A,D),w.child)}function gu(b,w,A,I,D){if(xr(A)){var F=!0;Ro(w)}else F=!1;if(Pi(w,D),w.stateNode===null)Ko(b,w),iu(w,A,I),aa(w,A,I,D),I=!0;else if(b===null){var W=w.stateNode,se=w.memoizedProps;W.props=se;var ue=W.context,_e=A.contextType;typeof _e=="object"&&_e!==null?_e=Br(_e):(_e=xr(A)?Hn:or.current,_e=xi(w,_e));var Oe=A.getDerivedStateFromProps,ke=typeof Oe=="function"||typeof W.getSnapshotBeforeUpdate=="function";ke||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(se!==I||ue!==_e)&&ou(w,W,I,_e),Mn=!1;var Pe=w.memoizedState;W.state=Pe,Fo(w,I,W,D),ue=w.memoizedState,se!==I||Pe!==ue||vr.current||Mn?(typeof Oe=="function"&&(sa(w,A,Oe,I),ue=w.memoizedState),(se=Mn||nu(w,A,se,I,Pe,ue,_e))?(ke||typeof W.UNSAFE_componentWillMount!="function"&&typeof W.componentWillMount!="function"||(typeof W.componentWillMount=="function"&&W.componentWillMount(),typeof W.UNSAFE_componentWillMount=="function"&&W.UNSAFE_componentWillMount()),typeof W.componentDidMount=="function"&&(w.flags|=4194308)):(typeof W.componentDidMount=="function"&&(w.flags|=4194308),w.memoizedProps=I,w.memoizedState=ue),W.props=I,W.state=ue,W.context=_e,I=se):(typeof W.componentDidMount=="function"&&(w.flags|=4194308),I=!1)}else{W=w.stateNode,Ml(b,w),se=w.memoizedProps,_e=w.type===w.elementType?se:Zr(w.type,se),W.props=_e,ke=w.pendingProps,Pe=W.context,ue=A.contextType,typeof ue=="object"&&ue!==null?ue=Br(ue):(ue=xr(A)?Hn:or.current,ue=xi(w,ue));var qe=A.getDerivedStateFromProps;(Oe=typeof qe=="function"||typeof W.getSnapshotBeforeUpdate=="function")||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(se!==ke||Pe!==ue)&&ou(w,W,I,ue),Mn=!1,Pe=w.memoizedState,W.state=Pe,Fo(w,I,W,D);var ze=w.memoizedState;se!==ke||Pe!==ze||vr.current||Mn?(typeof qe=="function"&&(sa(w,A,qe,I),ze=w.memoizedState),(_e=Mn||nu(w,A,_e,I,Pe,ze,ue)||!1)?(Oe||typeof W.UNSAFE_componentWillUpdate!="function"&&typeof W.componentWillUpdate!="function"||(typeof W.componentWillUpdate=="function"&&W.componentWillUpdate(I,ze,ue),typeof W.UNSAFE_componentWillUpdate=="function"&&W.UNSAFE_componentWillUpdate(I,ze,ue)),typeof W.componentDidUpdate=="function"&&(w.flags|=4),typeof W.getSnapshotBeforeUpdate=="function"&&(w.flags|=1024)):(typeof W.componentDidUpdate!="function"||se===b.memoizedProps&&Pe===b.memoizedState||(w.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||se===b.memoizedProps&&Pe===b.memoizedState||(w.flags|=1024),w.memoizedProps=I,w.memoizedState=ze),W.props=I,W.state=ze,W.context=ue,I=_e):(typeof W.componentDidUpdate!="function"||se===b.memoizedProps&&Pe===b.memoizedState||(w.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||se===b.memoizedProps&&Pe===b.memoizedState||(w.flags|=1024),I=!1)}return da(b,w,A,I,F,D)}function da(b,w,A,I,D,F){mu(b,w);var W=(w.flags&128)!==0;if(!I&&!W)return D&&xl(w,A,!1),vn(b,w,F);I=w.stateNode,td.current=w;var se=W&&typeof A.getDerivedStateFromError!="function"?null:I.render();return w.flags|=1,b!==null&&W?(w.child=Ei(w,b.child,null,F),w.child=Ei(w,null,se,F)):dr(b,w,se,F),w.memoizedState=I.state,D&&xl(w,A,!0),w.child}function yu(b){var w=b.stateNode;w.pendingContext?bl(b,w.pendingContext,w.pendingContext!==w.context):w.context&&bl(b,w.context,!1),Ks(b,w.containerInfo)}function _u(b,w,A,I,D){return Ti(),qs(D),w.flags|=256,dr(b,w,A,I),w.child}var fa={dehydrated:null,treeContext:null,retryLane:0};function ha(b){return{baseLanes:b,cachePool:null,transitions:null}}function bu(b,w,A){var I=w.pendingProps,D=Ft.current,F=!1,W=(w.flags&128)!==0,se;if((se=W)||(se=b!==null&&b.memoizedState===null?!1:(D&2)!==0),se?(F=!0,w.flags&=-129):(b===null||b.memoizedState!==null)&&(D|=1),kt(Ft,D&1),b===null)return Bs(w),b=w.memoizedState,b!==null&&(b=b.dehydrated,b!==null)?((w.mode&1)===0?w.lanes=1:b.data==="$!"?w.lanes=8:w.lanes=1073741824,null):(W=I.children,b=I.fallback,F?(I=w.mode,F=w.child,W={mode:"hidden",children:W},(I&1)===0&&F!==null?(F.childLanes=0,F.pendingProps=W):F=ss(W,I,0,null),b=ni(b,I,A,null),F.return=w,b.return=w,F.sibling=b,w.child=F,w.child.memoizedState=ha(A),w.memoizedState=fa,b):pa(w,W));if(D=b.memoizedState,D!==null&&(se=D.dehydrated,se!==null))return rd(b,w,W,I,se,D,A);if(F){F=I.fallback,W=w.mode,D=b.child,se=D.sibling;var ue={mode:"hidden",children:I.children};return(W&1)===0&&w.child!==D?(I=w.child,I.childLanes=0,I.pendingProps=ue,w.deletions=null):(I=Fn(D,ue),I.subtreeFlags=D.subtreeFlags&14680064),se!==null?F=Fn(se,F):(F=ni(F,W,A,null),F.flags|=2),F.return=w,I.return=w,I.sibling=F,w.child=I,I=F,F=w.child,W=b.child.memoizedState,W=W===null?ha(A):{baseLanes:W.baseLanes|A,cachePool:null,transitions:W.transitions},F.memoizedState=W,F.childLanes=b.childLanes&~A,w.memoizedState=fa,I}return F=b.child,b=F.sibling,I=Fn(F,{mode:"visible",children:I.children}),(w.mode&1)===0&&(I.lanes=A),I.return=w,I.sibling=null,b!==null&&(A=w.deletions,A===null?(w.deletions=[b],w.flags|=16):A.push(b)),w.child=I,w.memoizedState=null,I}function pa(b,w){return w=ss({mode:"visible",children:w},b.mode,0,null),w.return=b,b.child=w}function Ho(b,w,A,I){return I!==null&&qs(I),Ei(w,b.child,null,A),b=pa(w,w.pendingProps.children),b.flags|=2,w.memoizedState=null,b}function rd(b,w,A,I,D,F,W){if(A)return w.flags&256?(w.flags&=-257,I=la(Error(n(422))),Ho(b,w,W,I)):w.memoizedState!==null?(w.child=b.child,w.flags|=128,null):(F=I.fallback,D=w.mode,I=ss({mode:"visible",children:I.children},D,0,null),F=ni(F,D,W,null),F.flags|=2,I.return=w,F.return=w,I.sibling=F,w.child=I,(w.mode&1)!==0&&Ei(w,b.child,null,W),w.child.memoizedState=ha(W),w.memoizedState=fa,F);if((w.mode&1)===0)return Ho(b,w,W,null);if(D.data==="$!"){if(I=D.nextSibling&&D.nextSibling.dataset,I)var se=I.dgst;return I=se,F=Error(n(419)),I=la(F,I,void 0),Ho(b,w,W,I)}if(se=(W&b.childLanes)!==0,wr||se){if(I=Qt,I!==null){switch(W&-W){case 4:D=2;break;case 16:D=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:D=32;break;case 536870912:D=268435456;break;default:D=0}D=(D&(I.suspendedLanes|W))!==0?0:D,D!==0&&D!==F.retryLane&&(F.retryLane=D,_n(b,D),rn(I,b,D,-1))}return Ca(),I=la(Error(n(421))),Ho(b,w,W,I)}return D.data==="$?"?(w.flags|=128,w.child=b.child,w=gd.bind(null,b),D._reactRetry=w,null):(b=F.treeContext,Cr=On(D.nextSibling),Rr=w,Dt=!0,Qr=null,b!==null&&(Lr[Fr++]=gn,Lr[Fr++]=yn,Lr[Fr++]=Kn,gn=b.id,yn=b.overflow,Kn=w),w=pa(w,I.children),w.flags|=4096,w)}function vu(b,w,A){b.lanes|=w;var I=b.alternate;I!==null&&(I.lanes|=w),Gs(b.return,w,A)}function ma(b,w,A,I,D){var F=b.memoizedState;F===null?b.memoizedState={isBackwards:w,rendering:null,renderingStartTime:0,last:I,tail:A,tailMode:D}:(F.isBackwards=w,F.rendering=null,F.renderingStartTime=0,F.last=I,F.tail=A,F.tailMode=D)}function xu(b,w,A){var I=w.pendingProps,D=I.revealOrder,F=I.tail;if(dr(b,w,I.children,A),I=Ft.current,(I&2)!==0)I=I&1|2,w.flags|=128;else{if(b!==null&&(b.flags&128)!==0)e:for(b=w.child;b!==null;){if(b.tag===13)b.memoizedState!==null&&vu(b,A,w);else if(b.tag===19)vu(b,A,w);else if(b.child!==null){b.child.return=b,b=b.child;continue}if(b===w)break e;for(;b.sibling===null;){if(b.return===null||b.return===w)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}I&=1}if(kt(Ft,I),(w.mode&1)===0)w.memoizedState=null;else switch(D){case"forwards":for(A=w.child,D=null;A!==null;)b=A.alternate,b!==null&&Bo(b)===null&&(D=A),A=A.sibling;A=D,A===null?(D=w.child,w.child=null):(D=A.sibling,A.sibling=null),ma(w,!1,D,A,F);break;case"backwards":for(A=null,D=w.child,w.child=null;D!==null;){if(b=D.alternate,b!==null&&Bo(b)===null){w.child=D;break}b=D.sibling,D.sibling=A,A=D,D=b}ma(w,!0,A,null,F);break;case"together":ma(w,!1,null,null,void 0);break;default:w.memoizedState=null}return w.child}function Ko(b,w){(w.mode&1)===0&&b!==null&&(b.alternate=null,w.alternate=null,w.flags|=2)}function vn(b,w,A){if(b!==null&&(w.dependencies=b.dependencies),Zn|=w.lanes,(A&w.childLanes)===0)return null;if(b!==null&&w.child!==b.child)throw Error(n(153));if(w.child!==null){for(b=w.child,A=Fn(b,b.pendingProps),w.child=A,A.return=w;b.sibling!==null;)b=b.sibling,A=A.sibling=Fn(b,b.pendingProps),A.return=w;A.sibling=null}return w.child}function nd(b,w,A){switch(w.tag){case 3:yu(w),Ti();break;case 5:$l(w);break;case 1:xr(w.type)&&Ro(w);break;case 4:Ks(w,w.stateNode.containerInfo);break;case 10:var I=w.type._context,D=w.memoizedProps.value;kt(No,I._currentValue),I._currentValue=D;break;case 13:if(I=w.memoizedState,I!==null)return I.dehydrated!==null?(kt(Ft,Ft.current&1),w.flags|=128,null):(A&w.child.childLanes)!==0?bu(b,w,A):(kt(Ft,Ft.current&1),b=vn(b,w,A),b!==null?b.sibling:null);kt(Ft,Ft.current&1);break;case 19:if(I=(A&w.childLanes)!==0,(b.flags&128)!==0){if(I)return xu(b,w,A);w.flags|=128}if(D=w.memoizedState,D!==null&&(D.rendering=null,D.tail=null,D.lastEffect=null),kt(Ft,Ft.current),I)break;return null;case 22:case 23:return w.lanes=0,pu(b,w,A)}return vn(b,w,A)}var wu,ga,Su,Tu;wu=function(b,w){for(var A=w.child;A!==null;){if(A.tag===5||A.tag===6)b.appendChild(A.stateNode);else if(A.tag!==4&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===w)break;for(;A.sibling===null;){if(A.return===null||A.return===w)return;A=A.return}A.sibling.return=A.return,A=A.sibling}},ga=function(){},Su=function(b,w,A,I){var D=b.memoizedProps;if(D!==I){b=w.stateNode,Jn(an.current);var F=null;switch(A){case"input":D=Fe(b,D),I=Fe(b,I),F=[];break;case"select":D=te({},D,{value:void 0}),I=te({},I,{value:void 0}),F=[];break;case"textarea":D=Ze(b,D),I=Ze(b,I),F=[];break;default:typeof D.onClick!="function"&&typeof I.onClick=="function"&&(b.onclick=Po)}zr(A,I);var W;A=null;for(_e in D)if(!I.hasOwnProperty(_e)&&D.hasOwnProperty(_e)&&D[_e]!=null)if(_e==="style"){var se=D[_e];for(W in se)se.hasOwnProperty(W)&&(A||(A={}),A[W]="")}else _e!=="dangerouslySetInnerHTML"&&_e!=="children"&&_e!=="suppressContentEditableWarning"&&_e!=="suppressHydrationWarning"&&_e!=="autoFocus"&&(o.hasOwnProperty(_e)?F||(F=[]):(F=F||[]).push(_e,null));for(_e in I){var ue=I[_e];if(se=D?.[_e],I.hasOwnProperty(_e)&&ue!==se&&(ue!=null||se!=null))if(_e==="style")if(se){for(W in se)!se.hasOwnProperty(W)||ue&&ue.hasOwnProperty(W)||(A||(A={}),A[W]="");for(W in ue)ue.hasOwnProperty(W)&&se[W]!==ue[W]&&(A||(A={}),A[W]=ue[W])}else A||(F||(F=[]),F.push(_e,A)),A=ue;else _e==="dangerouslySetInnerHTML"?(ue=ue?ue.__html:void 0,se=se?se.__html:void 0,ue!=null&&se!==ue&&(F=F||[]).push(_e,ue)):_e==="children"?typeof ue!="string"&&typeof ue!="number"||(F=F||[]).push(_e,""+ue):_e!=="suppressContentEditableWarning"&&_e!=="suppressHydrationWarning"&&(o.hasOwnProperty(_e)?(ue!=null&&_e==="onScroll"&&It("scroll",b),F||se===ue||(F=[])):(F=F||[]).push(_e,ue))}A&&(F=F||[]).push("style",A);var _e=F;(w.updateQueue=_e)&&(w.flags|=4)}},Tu=function(b,w,A,I){A!==I&&(w.flags|=4)};function oo(b,w){if(!Dt)switch(b.tailMode){case"hidden":w=b.tail;for(var A=null;w!==null;)w.alternate!==null&&(A=w),w=w.sibling;A===null?b.tail=null:A.sibling=null;break;case"collapsed":A=b.tail;for(var I=null;A!==null;)A.alternate!==null&&(I=A),A=A.sibling;I===null?w||b.tail===null?b.tail=null:b.tail.sibling=null:I.sibling=null}}function ar(b){var w=b.alternate!==null&&b.alternate.child===b.child,A=0,I=0;if(w)for(var D=b.child;D!==null;)A|=D.lanes|D.childLanes,I|=D.subtreeFlags&14680064,I|=D.flags&14680064,D.return=b,D=D.sibling;else for(D=b.child;D!==null;)A|=D.lanes|D.childLanes,I|=D.subtreeFlags,I|=D.flags,D.return=b,D=D.sibling;return b.subtreeFlags|=I,b.childLanes=A,w}function od(b,w,A){var I=w.pendingProps;switch(Ls(w),w.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ar(w),null;case 1:return xr(w.type)&&ko(),ar(w),null;case 3:return I=w.stateNode,Oi(),jt(vr),jt(or),Js(),I.pendingContext&&(I.context=I.pendingContext,I.pendingContext=null),(b===null||b.child===null)&&(jo(w)?w.flags|=4:b===null||b.memoizedState.isDehydrated&&(w.flags&256)===0||(w.flags|=1024,Qr!==null&&(Pa(Qr),Qr=null))),ga(b,w),ar(w),null;case 5:Ys(w);var D=Jn(eo.current);if(A=w.type,b!==null&&w.stateNode!=null)Su(b,w,A,I,D),b.ref!==w.ref&&(w.flags|=512,w.flags|=2097152);else{if(!I){if(w.stateNode===null)throw Error(n(166));return ar(w),null}if(b=Jn(an.current),jo(w)){I=w.stateNode,A=w.type;var F=w.memoizedProps;switch(I[sn]=w,I[Yi]=F,b=(w.mode&1)!==0,A){case"dialog":It("cancel",I),It("close",I);break;case"iframe":case"object":case"embed":It("load",I);break;case"video":case"audio":for(D=0;D<Wi.length;D++)It(Wi[D],I);break;case"source":It("error",I);break;case"img":case"image":case"link":It("error",I),It("load",I);break;case"details":It("toggle",I);break;case"input":at(I,F),It("invalid",I);break;case"select":I._wrapperState={wasMultiple:!!F.multiple},It("invalid",I);break;case"textarea":St(I,F),It("invalid",I)}zr(A,F),D=null;for(var W in F)if(F.hasOwnProperty(W)){var se=F[W];W==="children"?typeof se=="string"?I.textContent!==se&&(F.suppressHydrationWarning!==!0&&Ao(I.textContent,se,b),D=["children",se]):typeof se=="number"&&I.textContent!==""+se&&(F.suppressHydrationWarning!==!0&&Ao(I.textContent,se,b),D=["children",""+se]):o.hasOwnProperty(W)&&se!=null&&W==="onScroll"&&It("scroll",I)}switch(A){case"input":Le(I),Rt(I,F,!0);break;case"textarea":Le(I),rt(I);break;case"select":case"option":break;default:typeof F.onClick=="function"&&(I.onclick=Po)}I=D,w.updateQueue=I,I!==null&&(w.flags|=4)}else{W=D.nodeType===9?D:D.ownerDocument,b==="http://www.w3.org/1999/xhtml"&&(b=Er(A)),b==="http://www.w3.org/1999/xhtml"?A==="script"?(b=W.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild)):typeof I.is=="string"?b=W.createElement(A,{is:I.is}):(b=W.createElement(A),A==="select"&&(W=b,I.multiple?W.multiple=!0:I.size&&(W.size=I.size))):b=W.createElementNS(b,A),b[sn]=w,b[Yi]=I,wu(b,w,!1,!1),w.stateNode=b;e:{switch(W=nn(A,I),A){case"dialog":It("cancel",b),It("close",b),D=I;break;case"iframe":case"object":case"embed":It("load",b),D=I;break;case"video":case"audio":for(D=0;D<Wi.length;D++)It(Wi[D],b);D=I;break;case"source":It("error",b),D=I;break;case"img":case"image":case"link":It("error",b),It("load",b),D=I;break;case"details":It("toggle",b),D=I;break;case"input":at(b,I),D=Fe(b,I),It("invalid",b);break;case"option":D=I;break;case"select":b._wrapperState={wasMultiple:!!I.multiple},D=te({},I,{value:void 0}),It("invalid",b);break;case"textarea":St(b,I),D=Ze(b,I),It("invalid",b);break;default:D=I}zr(A,D),se=D;for(F in se)if(se.hasOwnProperty(F)){var ue=se[F];F==="style"?Xe(b,ue):F==="dangerouslySetInnerHTML"?(ue=ue?ue.__html:void 0,ue!=null&&ir(b,ue)):F==="children"?typeof ue=="string"?(A!=="textarea"||ue!=="")&&Gt(b,ue):typeof ue=="number"&&Gt(b,""+ue):F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&F!=="autoFocus"&&(o.hasOwnProperty(F)?ue!=null&&F==="onScroll"&&It("scroll",b):ue!=null&&R(b,F,ue,W))}switch(A){case"input":Le(b),Rt(b,I,!1);break;case"textarea":Le(b),rt(b);break;case"option":I.value!=null&&b.setAttribute("value",""+Re(I.value));break;case"select":b.multiple=!!I.multiple,F=I.value,F!=null?wt(b,!!I.multiple,F,!1):I.defaultValue!=null&&wt(b,!!I.multiple,I.defaultValue,!0);break;default:typeof D.onClick=="function"&&(b.onclick=Po)}switch(A){case"button":case"input":case"select":case"textarea":I=!!I.autoFocus;break e;case"img":I=!0;break e;default:I=!1}}I&&(w.flags|=4)}w.ref!==null&&(w.flags|=512,w.flags|=2097152)}return ar(w),null;case 6:if(b&&w.stateNode!=null)Tu(b,w,b.memoizedProps,I);else{if(typeof I!="string"&&w.stateNode===null)throw Error(n(166));if(A=Jn(eo.current),Jn(an.current),jo(w)){if(I=w.stateNode,A=w.memoizedProps,I[sn]=w,(F=I.nodeValue!==A)&&(b=Rr,b!==null))switch(b.tag){case 3:Ao(I.nodeValue,A,(b.mode&1)!==0);break;case 5:b.memoizedProps.suppressHydrationWarning!==!0&&Ao(I.nodeValue,A,(b.mode&1)!==0)}F&&(w.flags|=4)}else I=(A.nodeType===9?A:A.ownerDocument).createTextNode(I),I[sn]=w,w.stateNode=I}return ar(w),null;case 13:if(jt(Ft),I=w.memoizedState,b===null||b.memoizedState!==null&&b.memoizedState.dehydrated!==null){if(Dt&&Cr!==null&&(w.mode&1)!==0&&(w.flags&128)===0)Pl(),Ti(),w.flags|=98560,F=!1;else if(F=jo(w),I!==null&&I.dehydrated!==null){if(b===null){if(!F)throw Error(n(318));if(F=w.memoizedState,F=F!==null?F.dehydrated:null,!F)throw Error(n(317));F[sn]=w}else Ti(),(w.flags&128)===0&&(w.memoizedState=null),w.flags|=4;ar(w),F=!1}else Qr!==null&&(Pa(Qr),Qr=null),F=!0;if(!F)return w.flags&65536?w:null}return(w.flags&128)!==0?(w.lanes=A,w):(I=I!==null,I!==(b!==null&&b.memoizedState!==null)&&I&&(w.child.flags|=8192,(w.mode&1)!==0&&(b===null||(Ft.current&1)!==0?Kt===0&&(Kt=3):Ca())),w.updateQueue!==null&&(w.flags|=4),ar(w),null);case 4:return Oi(),ga(b,w),b===null&&Hi(w.stateNode.containerInfo),ar(w),null;case 10:return zs(w.type._context),ar(w),null;case 17:return xr(w.type)&&ko(),ar(w),null;case 19:if(jt(Ft),F=w.memoizedState,F===null)return ar(w),null;if(I=(w.flags&128)!==0,W=F.rendering,W===null)if(I)oo(F,!1);else{if(Kt!==0||b!==null&&(b.flags&128)!==0)for(b=w.child;b!==null;){if(W=Bo(b),W!==null){for(w.flags|=128,oo(F,!1),I=W.updateQueue,I!==null&&(w.updateQueue=I,w.flags|=4),w.subtreeFlags=0,I=A,A=w.child;A!==null;)F=A,b=I,F.flags&=14680066,W=F.alternate,W===null?(F.childLanes=0,F.lanes=b,F.child=null,F.subtreeFlags=0,F.memoizedProps=null,F.memoizedState=null,F.updateQueue=null,F.dependencies=null,F.stateNode=null):(F.childLanes=W.childLanes,F.lanes=W.lanes,F.child=W.child,F.subtreeFlags=0,F.deletions=null,F.memoizedProps=W.memoizedProps,F.memoizedState=W.memoizedState,F.updateQueue=W.updateQueue,F.type=W.type,b=W.dependencies,F.dependencies=b===null?null:{lanes:b.lanes,firstContext:b.firstContext}),A=A.sibling;return kt(Ft,Ft.current&1|2),w.child}b=b.sibling}F.tail!==null&&ft()>Mi&&(w.flags|=128,I=!0,oo(F,!1),w.lanes=4194304)}else{if(!I)if(b=Bo(W),b!==null){if(w.flags|=128,I=!0,A=b.updateQueue,A!==null&&(w.updateQueue=A,w.flags|=4),oo(F,!0),F.tail===null&&F.tailMode==="hidden"&&!W.alternate&&!Dt)return ar(w),null}else 2*ft()-F.renderingStartTime>Mi&&A!==1073741824&&(w.flags|=128,I=!0,oo(F,!1),w.lanes=4194304);F.isBackwards?(W.sibling=w.child,w.child=W):(A=F.last,A!==null?A.sibling=W:w.child=W,F.last=W)}return F.tail!==null?(w=F.tail,F.rendering=w,F.tail=w.sibling,F.renderingStartTime=ft(),w.sibling=null,A=Ft.current,kt(Ft,I?A&1|2:A&1),w):(ar(w),null);case 22:case 23:return Ra(),I=w.memoizedState!==null,b!==null&&b.memoizedState!==null!==I&&(w.flags|=8192),I&&(w.mode&1)!==0?(Mr&1073741824)!==0&&(ar(w),w.subtreeFlags&6&&(w.flags|=8192)):ar(w),null;case 24:return null;case 25:return null}throw Error(n(156,w.tag))}function sd(b,w){switch(Ls(w),w.tag){case 1:return xr(w.type)&&ko(),b=w.flags,b&65536?(w.flags=b&-65537|128,w):null;case 3:return Oi(),jt(vr),jt(or),Js(),b=w.flags,(b&65536)!==0&&(b&128)===0?(w.flags=b&-65537|128,w):null;case 5:return Ys(w),null;case 13:if(jt(Ft),b=w.memoizedState,b!==null&&b.dehydrated!==null){if(w.alternate===null)throw Error(n(340));Ti()}return b=w.flags,b&65536?(w.flags=b&-65537|128,w):null;case 19:return jt(Ft),null;case 4:return Oi(),null;case 10:return zs(w.type._context),null;case 22:case 23:return Ra(),null;case 24:return null;default:return null}}var Yo=!1,lr=!1,ad=typeof WeakSet=="function"?WeakSet:Set,Ue=null;function Ri(b,w){var A=b.ref;if(A!==null)if(typeof A=="function")try{A(null)}catch(I){qt(b,w,I)}else A.current=null}function ya(b,w,A){try{A()}catch(I){qt(b,w,I)}}var Eu=!1;function ld(b,w){if(ks=je,b=nl(),xs(b)){if("selectionStart"in b)var A={start:b.selectionStart,end:b.selectionEnd};else e:{A=(A=b.ownerDocument)&&A.defaultView||window;var I=A.getSelection&&A.getSelection();if(I&&I.rangeCount!==0){A=I.anchorNode;var D=I.anchorOffset,F=I.focusNode;I=I.focusOffset;try{A.nodeType,F.nodeType}catch{A=null;break e}var W=0,se=-1,ue=-1,_e=0,Oe=0,ke=b,Pe=null;t:for(;;){for(var qe;ke!==A||D!==0&&ke.nodeType!==3||(se=W+D),ke!==F||I!==0&&ke.nodeType!==3||(ue=W+I),ke.nodeType===3&&(W+=ke.nodeValue.length),(qe=ke.firstChild)!==null;)Pe=ke,ke=qe;for(;;){if(ke===b)break t;if(Pe===A&&++_e===D&&(se=W),Pe===F&&++Oe===I&&(ue=W),(qe=ke.nextSibling)!==null)break;ke=Pe,Pe=ke.parentNode}ke=qe}A=se===-1||ue===-1?null:{start:se,end:ue}}else A=null}A=A||{start:0,end:0}}else A=null;for(Rs={focusedElem:b,selectionRange:A},je=!1,Ue=w;Ue!==null;)if(w=Ue,b=w.child,(w.subtreeFlags&1028)!==0&&b!==null)b.return=w,Ue=b;else for(;Ue!==null;){w=Ue;try{var ze=w.alternate;if((w.flags&1024)!==0)switch(w.tag){case 0:case 11:case 15:break;case 1:if(ze!==null){var Ge=ze.memoizedProps,Ut=ze.memoizedState,pe=w.stateNode,de=pe.getSnapshotBeforeUpdate(w.elementType===w.type?Ge:Zr(w.type,Ge),Ut);pe.__reactInternalSnapshotBeforeUpdate=de}break;case 3:var me=w.stateNode.containerInfo;me.nodeType===1?me.textContent="":me.nodeType===9&&me.documentElement&&me.removeChild(me.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch($e){qt(w,w.return,$e)}if(b=w.sibling,b!==null){b.return=w.return,Ue=b;break}Ue=w.return}return ze=Eu,Eu=!1,ze}function so(b,w,A){var I=w.updateQueue;if(I=I!==null?I.lastEffect:null,I!==null){var D=I=I.next;do{if((D.tag&b)===b){var F=D.destroy;D.destroy=void 0,F!==void 0&&ya(w,A,F)}D=D.next}while(D!==I)}}function Xo(b,w){if(w=w.updateQueue,w=w!==null?w.lastEffect:null,w!==null){var A=w=w.next;do{if((A.tag&b)===b){var I=A.create;A.destroy=I()}A=A.next}while(A!==w)}}function _a(b){var w=b.ref;if(w!==null){var A=b.stateNode;switch(b.tag){case 5:b=A;break;default:b=A}typeof w=="function"?w(b):w.current=b}}function Au(b){var w=b.alternate;w!==null&&(b.alternate=null,Au(w)),b.child=null,b.deletions=null,b.sibling=null,b.tag===5&&(w=b.stateNode,w!==null&&(delete w[sn],delete w[Yi],delete w[js],delete w[Uc],delete w[zc])),b.stateNode=null,b.return=null,b.dependencies=null,b.memoizedProps=null,b.memoizedState=null,b.pendingProps=null,b.stateNode=null,b.updateQueue=null}function Pu(b){return b.tag===5||b.tag===3||b.tag===4}function Ou(b){e:for(;;){for(;b.sibling===null;){if(b.return===null||Pu(b.return))return null;b=b.return}for(b.sibling.return=b.return,b=b.sibling;b.tag!==5&&b.tag!==6&&b.tag!==18;){if(b.flags&2||b.child===null||b.tag===4)continue e;b.child.return=b,b=b.child}if(!(b.flags&2))return b.stateNode}}function ba(b,w,A){var I=b.tag;if(I===5||I===6)b=b.stateNode,w?A.nodeType===8?A.parentNode.insertBefore(b,w):A.insertBefore(b,w):(A.nodeType===8?(w=A.parentNode,w.insertBefore(b,A)):(w=A,w.appendChild(b)),A=A._reactRootContainer,A!=null||w.onclick!==null||(w.onclick=Po));else if(I!==4&&(b=b.child,b!==null))for(ba(b,w,A),b=b.sibling;b!==null;)ba(b,w,A),b=b.sibling}function va(b,w,A){var I=b.tag;if(I===5||I===6)b=b.stateNode,w?A.insertBefore(b,w):A.appendChild(b);else if(I!==4&&(b=b.child,b!==null))for(va(b,w,A),b=b.sibling;b!==null;)va(b,w,A),b=b.sibling}var rr=null,en=!1;function jn(b,w,A){for(A=A.child;A!==null;)ku(b,w,A),A=A.sibling}function ku(b,w,A){if(_r&&typeof _r.onCommitFiberUnmount=="function")try{_r.onCommitFiberUnmount(wn,A)}catch{}switch(A.tag){case 5:lr||Ri(A,w);case 6:var I=rr,D=en;rr=null,jn(b,w,A),rr=I,en=D,rr!==null&&(en?(b=rr,A=A.stateNode,b.nodeType===8?b.parentNode.removeChild(A):b.removeChild(A)):rr.removeChild(A.stateNode));break;case 18:rr!==null&&(en?(b=rr,A=A.stateNode,b.nodeType===8?Is(b.parentNode,A):b.nodeType===1&&Is(b,A),he(b)):Is(rr,A.stateNode));break;case 4:I=rr,D=en,rr=A.stateNode.containerInfo,en=!0,jn(b,w,A),rr=I,en=D;break;case 0:case 11:case 14:case 15:if(!lr&&(I=A.updateQueue,I!==null&&(I=I.lastEffect,I!==null))){D=I=I.next;do{var F=D,W=F.destroy;F=F.tag,W!==void 0&&((F&2)!==0||(F&4)!==0)&&ya(A,w,W),D=D.next}while(D!==I)}jn(b,w,A);break;case 1:if(!lr&&(Ri(A,w),I=A.stateNode,typeof I.componentWillUnmount=="function"))try{I.props=A.memoizedProps,I.state=A.memoizedState,I.componentWillUnmount()}catch(se){qt(A,w,se)}jn(b,w,A);break;case 21:jn(b,w,A);break;case 22:A.mode&1?(lr=(I=lr)||A.memoizedState!==null,jn(b,w,A),lr=I):jn(b,w,A);break;default:jn(b,w,A)}}function Ru(b){var w=b.updateQueue;if(w!==null){b.updateQueue=null;var A=b.stateNode;A===null&&(A=b.stateNode=new ad),w.forEach(function(I){var D=yd.bind(null,b,I);A.has(I)||(A.add(I),I.then(D,D))})}}function tn(b,w){var A=w.deletions;if(A!==null)for(var I=0;I<A.length;I++){var D=A[I];try{var F=b,W=w,se=W;e:for(;se!==null;){switch(se.tag){case 5:rr=se.stateNode,en=!1;break e;case 3:rr=se.stateNode.containerInfo,en=!0;break e;case 4:rr=se.stateNode.containerInfo,en=!0;break e}se=se.return}if(rr===null)throw Error(n(160));ku(F,W,D),rr=null,en=!1;var ue=D.alternate;ue!==null&&(ue.return=null),D.return=null}catch(_e){qt(D,w,_e)}}if(w.subtreeFlags&12854)for(w=w.child;w!==null;)Cu(w,b),w=w.sibling}function Cu(b,w){var A=b.alternate,I=b.flags;switch(b.tag){case 0:case 11:case 14:case 15:if(tn(w,b),dn(b),I&4){try{so(3,b,b.return),Xo(3,b)}catch(Ge){qt(b,b.return,Ge)}try{so(5,b,b.return)}catch(Ge){qt(b,b.return,Ge)}}break;case 1:tn(w,b),dn(b),I&512&&A!==null&&Ri(A,A.return);break;case 5:if(tn(w,b),dn(b),I&512&&A!==null&&Ri(A,A.return),b.flags&32){var D=b.stateNode;try{Gt(D,"")}catch(Ge){qt(b,b.return,Ge)}}if(I&4&&(D=b.stateNode,D!=null)){var F=b.memoizedProps,W=A!==null?A.memoizedProps:F,se=b.type,ue=b.updateQueue;if(b.updateQueue=null,ue!==null)try{se==="input"&&F.type==="radio"&&F.name!=null&&lt(D,F),nn(se,W);var _e=nn(se,F);for(W=0;W<ue.length;W+=2){var Oe=ue[W],ke=ue[W+1];Oe==="style"?Xe(D,ke):Oe==="dangerouslySetInnerHTML"?ir(D,ke):Oe==="children"?Gt(D,ke):R(D,Oe,ke,_e)}switch(se){case"input":dt(D,F);break;case"textarea":Yt(D,F);break;case"select":var Pe=D._wrapperState.wasMultiple;D._wrapperState.wasMultiple=!!F.multiple;var qe=F.value;qe!=null?wt(D,!!F.multiple,qe,!1):Pe!==!!F.multiple&&(F.defaultValue!=null?wt(D,!!F.multiple,F.defaultValue,!0):wt(D,!!F.multiple,F.multiple?[]:"",!1))}D[Yi]=F}catch(Ge){qt(b,b.return,Ge)}}break;case 6:if(tn(w,b),dn(b),I&4){if(b.stateNode===null)throw Error(n(162));D=b.stateNode,F=b.memoizedProps;try{D.nodeValue=F}catch(Ge){qt(b,b.return,Ge)}}break;case 3:if(tn(w,b),dn(b),I&4&&A!==null&&A.memoizedState.isDehydrated)try{he(w.containerInfo)}catch(Ge){qt(b,b.return,Ge)}break;case 4:tn(w,b),dn(b);break;case 13:tn(w,b),dn(b),D=b.child,D.flags&8192&&(F=D.memoizedState!==null,D.stateNode.isHidden=F,!F||D.alternate!==null&&D.alternate.memoizedState!==null||(Sa=ft())),I&4&&Ru(b);break;case 22:if(Oe=A!==null&&A.memoizedState!==null,b.mode&1?(lr=(_e=lr)||Oe,tn(w,b),lr=_e):tn(w,b),dn(b),I&8192){if(_e=b.memoizedState!==null,(b.stateNode.isHidden=_e)&&!Oe&&(b.mode&1)!==0)for(Ue=b,Oe=b.child;Oe!==null;){for(ke=Ue=Oe;Ue!==null;){switch(Pe=Ue,qe=Pe.child,Pe.tag){case 0:case 11:case 14:case 15:so(4,Pe,Pe.return);break;case 1:Ri(Pe,Pe.return);var ze=Pe.stateNode;if(typeof ze.componentWillUnmount=="function"){I=Pe,A=Pe.return;try{w=I,ze.props=w.memoizedProps,ze.state=w.memoizedState,ze.componentWillUnmount()}catch(Ge){qt(I,A,Ge)}}break;case 5:Ri(Pe,Pe.return);break;case 22:if(Pe.memoizedState!==null){ju(ke);continue}}qe!==null?(qe.return=Pe,Ue=qe):ju(ke)}Oe=Oe.sibling}e:for(Oe=null,ke=b;;){if(ke.tag===5){if(Oe===null){Oe=ke;try{D=ke.stateNode,_e?(F=D.style,typeof F.setProperty=="function"?F.setProperty("display","none","important"):F.display="none"):(se=ke.stateNode,ue=ke.memoizedProps.style,W=ue!=null&&ue.hasOwnProperty("display")?ue.display:null,se.style.display=$r("display",W))}catch(Ge){qt(b,b.return,Ge)}}}else if(ke.tag===6){if(Oe===null)try{ke.stateNode.nodeValue=_e?"":ke.memoizedProps}catch(Ge){qt(b,b.return,Ge)}}else if((ke.tag!==22&&ke.tag!==23||ke.memoizedState===null||ke===b)&&ke.child!==null){ke.child.return=ke,ke=ke.child;continue}if(ke===b)break e;for(;ke.sibling===null;){if(ke.return===null||ke.return===b)break e;Oe===ke&&(Oe=null),ke=ke.return}Oe===ke&&(Oe=null),ke.sibling.return=ke.return,ke=ke.sibling}}break;case 19:tn(w,b),dn(b),I&4&&Ru(b);break;case 21:break;default:tn(w,b),dn(b)}}function dn(b){var w=b.flags;if(w&2){try{e:{for(var A=b.return;A!==null;){if(Pu(A)){var I=A;break e}A=A.return}throw Error(n(160))}switch(I.tag){case 5:var D=I.stateNode;I.flags&32&&(Gt(D,""),I.flags&=-33);var F=Ou(b);va(b,F,D);break;case 3:case 4:var W=I.stateNode.containerInfo,se=Ou(b);ba(b,se,W);break;default:throw Error(n(161))}}catch(ue){qt(b,b.return,ue)}b.flags&=-3}w&4096&&(b.flags&=-4097)}function ud(b,w,A){Ue=b,Mu(b)}function Mu(b,w,A){for(var I=(b.mode&1)!==0;Ue!==null;){var D=Ue,F=D.child;if(D.tag===22&&I){var W=D.memoizedState!==null||Yo;if(!W){var se=D.alternate,ue=se!==null&&se.memoizedState!==null||lr;se=Yo;var _e=lr;if(Yo=W,(lr=ue)&&!_e)for(Ue=D;Ue!==null;)W=Ue,ue=W.child,W.tag===22&&W.memoizedState!==null?$u(D):ue!==null?(ue.return=W,Ue=ue):$u(D);for(;F!==null;)Ue=F,Mu(F),F=F.sibling;Ue=D,Yo=se,lr=_e}Iu(b)}else(D.subtreeFlags&8772)!==0&&F!==null?(F.return=D,Ue=F):Iu(b)}}function Iu(b){for(;Ue!==null;){var w=Ue;if((w.flags&8772)!==0){var A=w.alternate;try{if((w.flags&8772)!==0)switch(w.tag){case 0:case 11:case 15:lr||Xo(5,w);break;case 1:var I=w.stateNode;if(w.flags&4&&!lr)if(A===null)I.componentDidMount();else{var D=w.elementType===w.type?A.memoizedProps:Zr(w.type,A.memoizedProps);I.componentDidUpdate(D,A.memoizedState,I.__reactInternalSnapshotBeforeUpdate)}var F=w.updateQueue;F!==null&&jl(w,F,I);break;case 3:var W=w.updateQueue;if(W!==null){if(A=null,w.child!==null)switch(w.child.tag){case 5:A=w.child.stateNode;break;case 1:A=w.child.stateNode}jl(w,W,A)}break;case 5:var se=w.stateNode;if(A===null&&w.flags&4){A=se;var ue=w.memoizedProps;switch(w.type){case"button":case"input":case"select":case"textarea":ue.autoFocus&&A.focus();break;case"img":ue.src&&(A.src=ue.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(w.memoizedState===null){var _e=w.alternate;if(_e!==null){var Oe=_e.memoizedState;if(Oe!==null){var ke=Oe.dehydrated;ke!==null&&he(ke)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}lr||w.flags&512&&_a(w)}catch(Pe){qt(w,w.return,Pe)}}if(w===b){Ue=null;break}if(A=w.sibling,A!==null){A.return=w.return,Ue=A;break}Ue=w.return}}function ju(b){for(;Ue!==null;){var w=Ue;if(w===b){Ue=null;break}var A=w.sibling;if(A!==null){A.return=w.return,Ue=A;break}Ue=w.return}}function $u(b){for(;Ue!==null;){var w=Ue;try{switch(w.tag){case 0:case 11:case 15:var A=w.return;try{Xo(4,w)}catch(ue){qt(w,A,ue)}break;case 1:var I=w.stateNode;if(typeof I.componentDidMount=="function"){var D=w.return;try{I.componentDidMount()}catch(ue){qt(w,D,ue)}}var F=w.return;try{_a(w)}catch(ue){qt(w,F,ue)}break;case 5:var W=w.return;try{_a(w)}catch(ue){qt(w,W,ue)}}}catch(ue){qt(w,w.return,ue)}if(w===b){Ue=null;break}var se=w.sibling;if(se!==null){se.return=w.return,Ue=se;break}Ue=w.return}}var cd=Math.ceil,Jo=M.ReactCurrentDispatcher,xa=M.ReactCurrentOwner,Vr=M.ReactCurrentBatchConfig,yt=0,Qt=null,zt=null,nr=0,Mr=0,Ci=kn(0),Kt=0,ao=null,Zn=0,Qo=0,wa=0,lo=null,Sr=null,Sa=0,Mi=1/0,xn=null,Zo=!1,Ta=null,$n=null,es=!1,Nn=null,ts=0,uo=0,Ea=null,rs=-1,ns=0;function fr(){return(yt&6)!==0?ft():rs!==-1?rs:rs=ft()}function Dn(b){return(b.mode&1)===0?1:(yt&2)!==0&&nr!==0?nr&-nr:Wc.transition!==null?(ns===0&&(ns=$i()),ns):(b=gt,b!==0||(b=window.event,b=b===void 0?16:cr(b.type)),b)}function rn(b,w,A,I){if(50<uo)throw uo=0,Ea=null,Error(n(185));on(b,A,I),((yt&2)===0||b!==Qt)&&(b===Qt&&((yt&2)===0&&(Qo|=A),Kt===4&&Ln(b,nr)),Tr(b,I),A===1&&yt===0&&(w.mode&1)===0&&(Mi=ft()+500,Co&&Cn()))}function Tr(b,w){var A=b.callbackNode;mo(b,w);var I=hn(b,b===Qt?nr:0);if(I===0)A!==null&&Be(A),b.callbackNode=null,b.callbackPriority=0;else if(w=I&-I,b.callbackPriority!==w){if(A!=null&&Be(A),w===1)b.tag===0?Gc(Du.bind(null,b)):wl(Du.bind(null,b)),qc(function(){(yt&6)===0&&Cn()}),A=null;else{switch(Ni(I)){case 1:A=xe;break;case 4:A=pt;break;case 16:A=vt;break;case 536870912:A=Nr;break;default:A=vt}A=Gu(A,Nu.bind(null,b))}b.callbackPriority=w,b.callbackNode=A}}function Nu(b,w){if(rs=-1,ns=0,(yt&6)!==0)throw Error(n(327));var A=b.callbackNode;if(Ii()&&b.callbackNode!==A)return null;var I=hn(b,b===Qt?nr:0);if(I===0)return null;if((I&30)!==0||(I&b.expiredLanes)!==0||w)w=is(b,I);else{w=I;var D=yt;yt|=2;var F=Fu();(Qt!==b||nr!==w)&&(xn=null,Mi=ft()+500,ti(b,w));do try{hd();break}catch(se){Lu(b,se)}while(!0);Us(),Jo.current=F,yt=D,zt!==null?w=0:(Qt=null,nr=0,w=Kt)}if(w!==0){if(w===2&&(D=ai(b),D!==0&&(I=D,w=Aa(b,D))),w===1)throw A=ao,ti(b,0),Ln(b,I),Tr(b,ft()),A;if(w===6)Ln(b,I);else{if(D=b.current.alternate,(I&30)===0&&!dd(D)&&(w=is(b,I),w===2&&(F=ai(b),F!==0&&(I=F,w=Aa(b,F))),w===1))throw A=ao,ti(b,0),Ln(b,I),Tr(b,ft()),A;switch(b.finishedWork=D,b.finishedLanes=I,w){case 0:case 1:throw Error(n(345));case 2:ri(b,Sr,xn);break;case 3:if(Ln(b,I),(I&130023424)===I&&(w=Sa+500-ft(),10<w)){if(hn(b,0)!==0)break;if(D=b.suspendedLanes,(D&I)!==I){fr(),b.pingedLanes|=b.suspendedLanes&D;break}b.timeoutHandle=Ms(ri.bind(null,b,Sr,xn),w);break}ri(b,Sr,xn);break;case 4:if(Ln(b,I),(I&4194240)===I)break;for(w=b.eventTimes,D=-1;0<I;){var W=31-Ot(I);F=1<<W,W=w[W],W>D&&(D=W),I&=~F}if(I=D,I=ft()-I,I=(120>I?120:480>I?480:1080>I?1080:1920>I?1920:3e3>I?3e3:4320>I?4320:1960*cd(I/1960))-I,10<I){b.timeoutHandle=Ms(ri.bind(null,b,Sr,xn),I);break}ri(b,Sr,xn);break;case 5:ri(b,Sr,xn);break;default:throw Error(n(329))}}}return Tr(b,ft()),b.callbackNode===A?Nu.bind(null,b):null}function Aa(b,w){var A=lo;return b.current.memoizedState.isDehydrated&&(ti(b,w).flags|=256),b=is(b,w),b!==2&&(w=Sr,Sr=A,w!==null&&Pa(w)),b}function Pa(b){Sr===null?Sr=b:Sr.push.apply(Sr,b)}function dd(b){for(var w=b;;){if(w.flags&16384){var A=w.updateQueue;if(A!==null&&(A=A.stores,A!==null))for(var I=0;I<A.length;I++){var D=A[I],F=D.getSnapshot;D=D.value;try{if(!Jr(F(),D))return!1}catch{return!1}}}if(A=w.child,w.subtreeFlags&16384&&A!==null)A.return=w,w=A;else{if(w===b)break;for(;w.sibling===null;){if(w.return===null||w.return===b)return!0;w=w.return}w.sibling.return=w.return,w=w.sibling}}return!0}function Ln(b,w){for(w&=~wa,w&=~Qo,b.suspendedLanes|=w,b.pingedLanes&=~w,b=b.expirationTimes;0<w;){var A=31-Ot(w),I=1<<A;b[A]=-1,w&=~I}}function Du(b){if((yt&6)!==0)throw Error(n(327));Ii();var w=hn(b,0);if((w&1)===0)return Tr(b,ft()),null;var A=is(b,w);if(b.tag!==0&&A===2){var I=ai(b);I!==0&&(w=I,A=Aa(b,I))}if(A===1)throw A=ao,ti(b,0),Ln(b,w),Tr(b,ft()),A;if(A===6)throw Error(n(345));return b.finishedWork=b.current.alternate,b.finishedLanes=w,ri(b,Sr,xn),Tr(b,ft()),null}function Oa(b,w){var A=yt;yt|=1;try{return b(w)}finally{yt=A,yt===0&&(Mi=ft()+500,Co&&Cn())}}function ei(b){Nn!==null&&Nn.tag===0&&(yt&6)===0&&Ii();var w=yt;yt|=1;var A=Vr.transition,I=gt;try{if(Vr.transition=null,gt=1,b)return b()}finally{gt=I,Vr.transition=A,yt=w,(yt&6)===0&&Cn()}}function Ra(){Mr=Ci.current,jt(Ci)}function ti(b,w){b.finishedWork=null,b.finishedLanes=0;var A=b.timeoutHandle;if(A!==-1&&(b.timeoutHandle=-1,Bc(A)),zt!==null)for(A=zt.return;A!==null;){var I=A;switch(Ls(I),I.tag){case 1:I=I.type.childContextTypes,I!=null&&ko();break;case 3:Oi(),jt(vr),jt(or),Js();break;case 5:Ys(I);break;case 4:Oi();break;case 13:jt(Ft);break;case 19:jt(Ft);break;case 10:zs(I.type._context);break;case 22:case 23:Ra()}A=A.return}if(Qt=b,zt=b=Fn(b.current,null),nr=Mr=w,Kt=0,ao=null,wa=Qo=Zn=0,Sr=lo=null,Xn!==null){for(w=0;w<Xn.length;w++)if(A=Xn[w],I=A.interleaved,I!==null){A.interleaved=null;var D=I.next,F=A.pending;if(F!==null){var W=F.next;F.next=D,I.next=W}A.pending=I}Xn=null}return b}function Lu(b,w){do{var A=zt;try{if(Us(),qo.current=Go,Vo){for(var I=Bt.memoizedState;I!==null;){var D=I.queue;D!==null&&(D.pending=null),I=I.next}Vo=!1}if(Qn=0,Jt=Ht=Bt=null,to=!1,ro=0,xa.current=null,A===null||A.return===null){Kt=1,ao=w,zt=null;break}e:{var F=b,W=A.return,se=A,ue=w;if(w=nr,se.flags|=32768,ue!==null&&typeof ue=="object"&&typeof ue.then=="function"){var _e=ue,Oe=se,ke=Oe.tag;if((Oe.mode&1)===0&&(ke===0||ke===11||ke===15)){var Pe=Oe.alternate;Pe?(Oe.updateQueue=Pe.updateQueue,Oe.memoizedState=Pe.memoizedState,Oe.lanes=Pe.lanes):(Oe.updateQueue=null,Oe.memoizedState=null)}var qe=uu(W);if(qe!==null){qe.flags&=-257,cu(qe,W,se,F,w),qe.mode&1&&lu(F,_e,w),w=qe,ue=_e;var ze=w.updateQueue;if(ze===null){var Ge=new Set;Ge.add(ue),w.updateQueue=Ge}else ze.add(ue);break e}else{if((w&1)===0){lu(F,_e,w),Ca();break e}ue=Error(n(426))}}else if(Dt&&se.mode&1){var Ut=uu(W);if(Ut!==null){(Ut.flags&65536)===0&&(Ut.flags|=256),cu(Ut,W,se,F,w),qs(ki(ue,se));break e}}F=ue=ki(ue,se),Kt!==4&&(Kt=2),lo===null?lo=[F]:lo.push(F),F=W;do{switch(F.tag){case 3:F.flags|=65536,w&=-w,F.lanes|=w;var pe=su(F,ue,w);Il(F,pe);break e;case 1:se=ue;var de=F.type,me=F.stateNode;if((F.flags&128)===0&&(typeof de.getDerivedStateFromError=="function"||me!==null&&typeof me.componentDidCatch=="function"&&($n===null||!$n.has(me)))){F.flags|=65536,w&=-w,F.lanes|=w;var $e=au(F,se,w);Il(F,$e);break e}}F=F.return}while(F!==null)}qu(A)}catch(He){w=He,zt===A&&A!==null&&(zt=A=A.return);continue}break}while(!0)}function Fu(){var b=Jo.current;return Jo.current=Go,b===null?Go:b}function Ca(){(Kt===0||Kt===3||Kt===2)&&(Kt=4),Qt===null||(Zn&268435455)===0&&(Qo&268435455)===0||Ln(Qt,nr)}function is(b,w){var A=yt;yt|=2;var I=Fu();(Qt!==b||nr!==w)&&(xn=null,ti(b,w));do try{fd();break}catch(D){Lu(b,D)}while(!0);if(Us(),yt=A,Jo.current=I,zt!==null)throw Error(n(261));return Qt=null,nr=0,Kt}function fd(){for(;zt!==null;)Bu(zt)}function hd(){for(;zt!==null&&!ot();)Bu(zt)}function Bu(b){var w=zu(b.alternate,b,Mr);b.memoizedProps=b.pendingProps,w===null?qu(b):zt=w,xa.current=null}function qu(b){var w=b;do{var A=w.alternate;if(b=w.return,(w.flags&32768)===0){if(A=od(A,w,Mr),A!==null){zt=A;return}}else{if(A=sd(A,w),A!==null){A.flags&=32767,zt=A;return}if(b!==null)b.flags|=32768,b.subtreeFlags=0,b.deletions=null;else{Kt=6,zt=null;return}}if(w=w.sibling,w!==null){zt=w;return}zt=w=b}while(w!==null);Kt===0&&(Kt=5)}function ri(b,w,A){var I=gt,D=Vr.transition;try{Vr.transition=null,gt=1,pd(b,w,A,I)}finally{Vr.transition=D,gt=I}return null}function pd(b,w,A,I){do Ii();while(Nn!==null);if((yt&6)!==0)throw Error(n(327));A=b.finishedWork;var D=b.finishedLanes;if(A===null)return null;if(b.finishedWork=null,b.finishedLanes=0,A===b.current)throw Error(n(177));b.callbackNode=null,b.callbackPriority=0;var F=A.lanes|A.childLanes;if(go(b,F),b===Qt&&(zt=Qt=null,nr=0),(A.subtreeFlags&2064)===0&&(A.flags&2064)===0||es||(es=!0,Gu(vt,function(){return Ii(),null})),F=(A.flags&15990)!==0,(A.subtreeFlags&15990)!==0||F){F=Vr.transition,Vr.transition=null;var W=gt;gt=1;var se=yt;yt|=4,xa.current=null,ld(b,A),Cu(A,b),Ic(Rs),je=!!ks,Rs=ks=null,b.current=A,ud(A),bt(),yt=se,gt=W,Vr.transition=F}else b.current=A;if(es&&(es=!1,Nn=b,ts=D),F=b.pendingLanes,F===0&&($n=null),fo(A.stateNode),Tr(b,ft()),w!==null)for(I=b.onRecoverableError,A=0;A<w.length;A++)D=w[A],I(D.value,{componentStack:D.stack,digest:D.digest});if(Zo)throw Zo=!1,b=Ta,Ta=null,b;return(ts&1)!==0&&b.tag!==0&&Ii(),F=b.pendingLanes,(F&1)!==0?b===Ea?uo++:(uo=0,Ea=b):uo=0,Cn(),null}function Ii(){if(Nn!==null){var b=Ni(ts),w=Vr.transition,A=gt;try{if(Vr.transition=null,gt=16>b?16:b,Nn===null)var I=!1;else{if(b=Nn,Nn=null,ts=0,(yt&6)!==0)throw Error(n(331));var D=yt;for(yt|=4,Ue=b.current;Ue!==null;){var F=Ue,W=F.child;if((Ue.flags&16)!==0){var se=F.deletions;if(se!==null){for(var ue=0;ue<se.length;ue++){var _e=se[ue];for(Ue=_e;Ue!==null;){var Oe=Ue;switch(Oe.tag){case 0:case 11:case 15:so(8,Oe,F)}var ke=Oe.child;if(ke!==null)ke.return=Oe,Ue=ke;else for(;Ue!==null;){Oe=Ue;var Pe=Oe.sibling,qe=Oe.return;if(Au(Oe),Oe===_e){Ue=null;break}if(Pe!==null){Pe.return=qe,Ue=Pe;break}Ue=qe}}}var ze=F.alternate;if(ze!==null){var Ge=ze.child;if(Ge!==null){ze.child=null;do{var Ut=Ge.sibling;Ge.sibling=null,Ge=Ut}while(Ge!==null)}}Ue=F}}if((F.subtreeFlags&2064)!==0&&W!==null)W.return=F,Ue=W;else e:for(;Ue!==null;){if(F=Ue,(F.flags&2048)!==0)switch(F.tag){case 0:case 11:case 15:so(9,F,F.return)}var pe=F.sibling;if(pe!==null){pe.return=F.return,Ue=pe;break e}Ue=F.return}}var de=b.current;for(Ue=de;Ue!==null;){W=Ue;var me=W.child;if((W.subtreeFlags&2064)!==0&&me!==null)me.return=W,Ue=me;else e:for(W=de;Ue!==null;){if(se=Ue,(se.flags&2048)!==0)try{switch(se.tag){case 0:case 11:case 15:Xo(9,se)}}catch(He){qt(se,se.return,He)}if(se===W){Ue=null;break e}var $e=se.sibling;if($e!==null){$e.return=se.return,Ue=$e;break e}Ue=se.return}}if(yt=D,Cn(),_r&&typeof _r.onPostCommitFiberRoot=="function")try{_r.onPostCommitFiberRoot(wn,b)}catch{}I=!0}return I}finally{gt=A,Vr.transition=w}}return!1}function Vu(b,w,A){w=ki(A,w),w=su(b,w,1),b=In(b,w,1),w=fr(),b!==null&&(on(b,1,w),Tr(b,w))}function qt(b,w,A){if(b.tag===3)Vu(b,b,A);else for(;w!==null;){if(w.tag===3){Vu(w,b,A);break}else if(w.tag===1){var I=w.stateNode;if(typeof w.type.getDerivedStateFromError=="function"||typeof I.componentDidCatch=="function"&&($n===null||!$n.has(I))){b=ki(A,b),b=au(w,b,1),w=In(w,b,1),b=fr(),w!==null&&(on(w,1,b),Tr(w,b));break}}w=w.return}}function md(b,w,A){var I=b.pingCache;I!==null&&I.delete(w),w=fr(),b.pingedLanes|=b.suspendedLanes&A,Qt===b&&(nr&A)===A&&(Kt===4||Kt===3&&(nr&130023424)===nr&&500>ft()-Sa?ti(b,0):wa|=A),Tr(b,w)}function Uu(b,w){w===0&&((b.mode&1)===0?w=1:(w=si,si<<=1,(si&130023424)===0&&(si=4194304)));var A=fr();b=_n(b,w),b!==null&&(on(b,w,A),Tr(b,A))}function gd(b){var w=b.memoizedState,A=0;w!==null&&(A=w.retryLane),Uu(b,A)}function yd(b,w){var A=0;switch(b.tag){case 13:var I=b.stateNode,D=b.memoizedState;D!==null&&(A=D.retryLane);break;case 19:I=b.stateNode;break;default:throw Error(n(314))}I!==null&&I.delete(w),Uu(b,A)}var zu;zu=function(b,w,A){if(b!==null)if(b.memoizedProps!==w.pendingProps||vr.current)wr=!0;else{if((b.lanes&A)===0&&(w.flags&128)===0)return wr=!1,nd(b,w,A);wr=(b.flags&131072)!==0}else wr=!1,Dt&&(w.flags&1048576)!==0&&Sl(w,Io,w.index);switch(w.lanes=0,w.tag){case 2:var I=w.type;Ko(b,w),b=w.pendingProps;var D=xi(w,or.current);Pi(w,A),D=ea(null,w,I,b,D,A);var F=ta();return w.flags|=1,typeof D=="object"&&D!==null&&typeof D.render=="function"&&D.$$typeof===void 0?(w.tag=1,w.memoizedState=null,w.updateQueue=null,xr(I)?(F=!0,Ro(w)):F=!1,w.memoizedState=D.state!==null&&D.state!==void 0?D.state:null,Hs(w),D.updater=Wo,w.stateNode=D,D._reactInternals=w,aa(w,I,b,A),w=da(null,w,I,!0,F,A)):(w.tag=0,Dt&&F&&Ds(w),dr(null,w,D,A),w=w.child),w;case 16:I=w.elementType;e:{switch(Ko(b,w),b=w.pendingProps,D=I._init,I=D(I._payload),w.type=I,D=w.tag=bd(I),b=Zr(I,b),D){case 0:w=ca(null,w,I,b,A);break e;case 1:w=gu(null,w,I,b,A);break e;case 11:w=du(null,w,I,b,A);break e;case 14:w=fu(null,w,I,Zr(I.type,b),A);break e}throw Error(n(306,I,""))}return w;case 0:return I=w.type,D=w.pendingProps,D=w.elementType===I?D:Zr(I,D),ca(b,w,I,D,A);case 1:return I=w.type,D=w.pendingProps,D=w.elementType===I?D:Zr(I,D),gu(b,w,I,D,A);case 3:e:{if(yu(w),b===null)throw Error(n(387));I=w.pendingProps,F=w.memoizedState,D=F.element,Ml(b,w),Fo(w,I,null,A);var W=w.memoizedState;if(I=W.element,F.isDehydrated)if(F={element:I,isDehydrated:!1,cache:W.cache,pendingSuspenseBoundaries:W.pendingSuspenseBoundaries,transitions:W.transitions},w.updateQueue.baseState=F,w.memoizedState=F,w.flags&256){D=ki(Error(n(423)),w),w=_u(b,w,I,A,D);break e}else if(I!==D){D=ki(Error(n(424)),w),w=_u(b,w,I,A,D);break e}else for(Cr=On(w.stateNode.containerInfo.firstChild),Rr=w,Dt=!0,Qr=null,A=Rl(w,null,I,A),w.child=A;A;)A.flags=A.flags&-3|4096,A=A.sibling;else{if(Ti(),I===D){w=vn(b,w,A);break e}dr(b,w,I,A)}w=w.child}return w;case 5:return $l(w),b===null&&Bs(w),I=w.type,D=w.pendingProps,F=b!==null?b.memoizedProps:null,W=D.children,Cs(I,D)?W=null:F!==null&&Cs(I,F)&&(w.flags|=32),mu(b,w),dr(b,w,W,A),w.child;case 6:return b===null&&Bs(w),null;case 13:return bu(b,w,A);case 4:return Ks(w,w.stateNode.containerInfo),I=w.pendingProps,b===null?w.child=Ei(w,null,I,A):dr(b,w,I,A),w.child;case 11:return I=w.type,D=w.pendingProps,D=w.elementType===I?D:Zr(I,D),du(b,w,I,D,A);case 7:return dr(b,w,w.pendingProps,A),w.child;case 8:return dr(b,w,w.pendingProps.children,A),w.child;case 12:return dr(b,w,w.pendingProps.children,A),w.child;case 10:e:{if(I=w.type._context,D=w.pendingProps,F=w.memoizedProps,W=D.value,kt(No,I._currentValue),I._currentValue=W,F!==null)if(Jr(F.value,W)){if(F.children===D.children&&!vr.current){w=vn(b,w,A);break e}}else for(F=w.child,F!==null&&(F.return=w);F!==null;){var se=F.dependencies;if(se!==null){W=F.child;for(var ue=se.firstContext;ue!==null;){if(ue.context===I){if(F.tag===1){ue=bn(-1,A&-A),ue.tag=2;var _e=F.updateQueue;if(_e!==null){_e=_e.shared;var Oe=_e.pending;Oe===null?ue.next=ue:(ue.next=Oe.next,Oe.next=ue),_e.pending=ue}}F.lanes|=A,ue=F.alternate,ue!==null&&(ue.lanes|=A),Gs(F.return,A,w),se.lanes|=A;break}ue=ue.next}}else if(F.tag===10)W=F.type===w.type?null:F.child;else if(F.tag===18){if(W=F.return,W===null)throw Error(n(341));W.lanes|=A,se=W.alternate,se!==null&&(se.lanes|=A),Gs(W,A,w),W=F.sibling}else W=F.child;if(W!==null)W.return=F;else for(W=F;W!==null;){if(W===w){W=null;break}if(F=W.sibling,F!==null){F.return=W.return,W=F;break}W=W.return}F=W}dr(b,w,D.children,A),w=w.child}return w;case 9:return D=w.type,I=w.pendingProps.children,Pi(w,A),D=Br(D),I=I(D),w.flags|=1,dr(b,w,I,A),w.child;case 14:return I=w.type,D=Zr(I,w.pendingProps),D=Zr(I.type,D),fu(b,w,I,D,A);case 15:return hu(b,w,w.type,w.pendingProps,A);case 17:return I=w.type,D=w.pendingProps,D=w.elementType===I?D:Zr(I,D),Ko(b,w),w.tag=1,xr(I)?(b=!0,Ro(w)):b=!1,Pi(w,A),iu(w,I,D),aa(w,I,D,A),da(null,w,I,!0,b,A);case 19:return xu(b,w,A);case 22:return pu(b,w,A)}throw Error(n(156,w.tag))};function Gu(b,w){return We(b,w)}function _d(b,w,A,I){this.tag=b,this.key=A,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=w,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=I,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ur(b,w,A,I){return new _d(b,w,A,I)}function Ma(b){return b=b.prototype,!(!b||!b.isReactComponent)}function bd(b){if(typeof b=="function")return Ma(b)?1:0;if(b!=null){if(b=b.$$typeof,b===H)return 11;if(b===z)return 14}return 2}function Fn(b,w){var A=b.alternate;return A===null?(A=Ur(b.tag,w,b.key,b.mode),A.elementType=b.elementType,A.type=b.type,A.stateNode=b.stateNode,A.alternate=b,b.alternate=A):(A.pendingProps=w,A.type=b.type,A.flags=0,A.subtreeFlags=0,A.deletions=null),A.flags=b.flags&14680064,A.childLanes=b.childLanes,A.lanes=b.lanes,A.child=b.child,A.memoizedProps=b.memoizedProps,A.memoizedState=b.memoizedState,A.updateQueue=b.updateQueue,w=b.dependencies,A.dependencies=w===null?null:{lanes:w.lanes,firstContext:w.firstContext},A.sibling=b.sibling,A.index=b.index,A.ref=b.ref,A}function os(b,w,A,I,D,F){var W=2;if(I=b,typeof b=="function")Ma(b)&&(W=1);else if(typeof b=="string")W=5;else e:switch(b){case $:return ni(A.children,D,F,w);case L:W=8,D|=8;break;case N:return b=Ur(12,A,w,D|2),b.elementType=N,b.lanes=F,b;case Y:return b=Ur(13,A,w,D),b.elementType=Y,b.lanes=F,b;case K:return b=Ur(19,A,w,D),b.elementType=K,b.lanes=F,b;case G:return ss(A,D,F,w);default:if(typeof b=="object"&&b!==null)switch(b.$$typeof){case B:W=10;break e;case U:W=9;break e;case H:W=11;break e;case z:W=14;break e;case V:W=16,I=null;break e}throw Error(n(130,b==null?b:typeof b,""))}return w=Ur(W,A,w,D),w.elementType=b,w.type=I,w.lanes=F,w}function ni(b,w,A,I){return b=Ur(7,b,I,w),b.lanes=A,b}function ss(b,w,A,I){return b=Ur(22,b,I,w),b.elementType=G,b.lanes=A,b.stateNode={isHidden:!1},b}function Ia(b,w,A){return b=Ur(6,b,null,w),b.lanes=A,b}function ja(b,w,A){return w=Ur(4,b.children!==null?b.children:[],b.key,w),w.lanes=A,w.stateNode={containerInfo:b.containerInfo,pendingChildren:null,implementation:b.implementation},w}function vd(b,w,A,I,D){this.tag=w,this.containerInfo=b,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=li(0),this.expirationTimes=li(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=li(0),this.identifierPrefix=I,this.onRecoverableError=D,this.mutableSourceEagerHydrationData=null}function $a(b,w,A,I,D,F,W,se,ue){return b=new vd(b,w,A,se,ue),w===1?(w=1,F===!0&&(w|=8)):w=0,F=Ur(3,null,null,w),b.current=F,F.stateNode=b,F.memoizedState={element:I,isDehydrated:A,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hs(F),b}function xd(b,w,A){var I=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:j,key:I==null?null:""+I,children:b,containerInfo:w,implementation:A}}function Wu(b){if(!b)return Rn;b=b._reactInternals;e:{if(oe(b)!==b||b.tag!==1)throw Error(n(170));var w=b;do{switch(w.tag){case 3:w=w.stateNode.context;break e;case 1:if(xr(w.type)){w=w.stateNode.__reactInternalMemoizedMergedChildContext;break e}}w=w.return}while(w!==null);throw Error(n(171))}if(b.tag===1){var A=b.type;if(xr(A))return vl(b,A,w)}return w}function Hu(b,w,A,I,D,F,W,se,ue){return b=$a(A,I,!0,b,D,F,W,se,ue),b.context=Wu(null),A=b.current,I=fr(),D=Dn(A),F=bn(I,D),F.callback=w??null,In(A,F,D),b.current.lanes=D,on(b,D,I),Tr(b,I),b}function as(b,w,A,I){var D=w.current,F=fr(),W=Dn(D);return A=Wu(A),w.context===null?w.context=A:w.pendingContext=A,w=bn(F,W),w.payload={element:b},I=I===void 0?null:I,I!==null&&(w.callback=I),b=In(D,w,W),b!==null&&(rn(b,D,W,F),Lo(b,D,W)),W}function ls(b){if(b=b.current,!b.child)return null;switch(b.child.tag){case 5:return b.child.stateNode;default:return b.child.stateNode}}function Ku(b,w){if(b=b.memoizedState,b!==null&&b.dehydrated!==null){var A=b.retryLane;b.retryLane=A!==0&&A<w?A:w}}function Na(b,w){Ku(b,w),(b=b.alternate)&&Ku(b,w)}function wd(){return null}var Yu=typeof reportError=="function"?reportError:function(b){console.error(b)};function Da(b){this._internalRoot=b}us.prototype.render=Da.prototype.render=function(b){var w=this._internalRoot;if(w===null)throw Error(n(409));as(b,w,null,null)},us.prototype.unmount=Da.prototype.unmount=function(){var b=this._internalRoot;if(b!==null){this._internalRoot=null;var w=b.containerInfo;ei(function(){as(null,b,null,null)}),w[pn]=null}};function us(b){this._internalRoot=b}us.prototype.unstable_scheduleHydration=function(b){if(b){var w=it();b={blockedOn:null,target:b,priority:w};for(var A=0;A<Yr.length&&w!==0&&w<Yr[A].priority;A++);Yr.splice(A,0,b),A===0&&Li(b)}};function La(b){return!(!b||b.nodeType!==1&&b.nodeType!==9&&b.nodeType!==11)}function cs(b){return!(!b||b.nodeType!==1&&b.nodeType!==9&&b.nodeType!==11&&(b.nodeType!==8||b.nodeValue!==" react-mount-point-unstable "))}function Xu(){}function Sd(b,w,A,I,D){if(D){if(typeof I=="function"){var F=I;I=function(){var _e=ls(W);F.call(_e)}}var W=Hu(w,I,b,0,null,!1,!1,"",Xu);return b._reactRootContainer=W,b[pn]=W.current,Hi(b.nodeType===8?b.parentNode:b),ei(),W}for(;D=b.lastChild;)b.removeChild(D);if(typeof I=="function"){var se=I;I=function(){var _e=ls(ue);se.call(_e)}}var ue=$a(b,0,!1,null,null,!1,!1,"",Xu);return b._reactRootContainer=ue,b[pn]=ue.current,Hi(b.nodeType===8?b.parentNode:b),ei(function(){as(w,ue,A,I)}),ue}function ds(b,w,A,I,D){var F=A._reactRootContainer;if(F){var W=F;if(typeof D=="function"){var se=D;D=function(){var ue=ls(W);se.call(ue)}}as(w,W,b,D)}else W=Sd(A,w,b,D,I);return ls(W)}ut=function(b){switch(b.tag){case 3:var w=b.stateNode;if(w.current.memoizedState.isDehydrated){var A=zn(w.pendingLanes);A!==0&&(ui(w,A|1),Tr(w,ft()),(yt&6)===0&&(Mi=ft()+500,Cn()))}break;case 13:ei(function(){var I=_n(b,1);if(I!==null){var D=fr();rn(I,b,1,D)}}),Na(b,1)}},ci=function(b){if(b.tag===13){var w=_n(b,134217728);if(w!==null){var A=fr();rn(w,b,134217728,A)}Na(b,134217728)}},st=function(b){if(b.tag===13){var w=Dn(b),A=_n(b,w);if(A!==null){var I=fr();rn(A,b,w,I)}Na(b,w)}},it=function(){return gt},di=function(b,w){var A=gt;try{return gt=b,w()}finally{gt=A}},Pr=function(b,w,A){switch(w){case"input":if(dt(b,A),w=A.name,A.type==="radio"&&w!=null){for(A=b;A.parentNode;)A=A.parentNode;for(A=A.querySelectorAll("input[name="+JSON.stringify(""+w)+'][type="radio"]'),w=0;w<A.length;w++){var I=A[w];if(I!==b&&I.form===b.form){var D=Oo(I);if(!D)throw Error(n(90));Se(I),dt(I,D)}}}break;case"textarea":Yt(b,A);break;case"select":w=A.value,w!=null&&wt(b,!!A.multiple,w,!1)}},Mt=Oa,$t=ei;var Td={usingClientEntryPoint:!1,Events:[Xi,bi,Oo,Me,Ve,Oa]},co={findFiberByHostInstance:Wn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ed={bundleType:co.bundleType,version:co.version,rendererPackageName:co.rendererPackageName,rendererConfig:co.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:M.ReactCurrentDispatcher,findHostInstanceByFiber:function(b){return b=we(b),b===null?null:b.stateNode},findFiberByHostInstance:co.findFiberByHostInstance||wd,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fs.isDisabled&&fs.supportsFiber)try{wn=fs.inject(Ed),_r=fs}catch{}}return reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Td,reactDom_production_min.createPortal=function(b,w){var A=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!La(w))throw Error(n(200));return xd(b,w,null,A)},reactDom_production_min.createRoot=function(b,w){if(!La(b))throw Error(n(299));var A=!1,I="",D=Yu;return w!=null&&(w.unstable_strictMode===!0&&(A=!0),w.identifierPrefix!==void 0&&(I=w.identifierPrefix),w.onRecoverableError!==void 0&&(D=w.onRecoverableError)),w=$a(b,1,!1,null,null,A,!1,I,D),b[pn]=w.current,Hi(b.nodeType===8?b.parentNode:b),new Da(w)},reactDom_production_min.findDOMNode=function(b){if(b==null)return null;if(b.nodeType===1)return b;var w=b._reactInternals;if(w===void 0)throw typeof b.render=="function"?Error(n(188)):(b=Object.keys(b).join(","),Error(n(268,b)));return b=we(w),b=b===null?null:b.stateNode,b},reactDom_production_min.flushSync=function(b){return ei(b)},reactDom_production_min.hydrate=function(b,w,A){if(!cs(w))throw Error(n(200));return ds(null,b,w,!0,A)},reactDom_production_min.hydrateRoot=function(b,w,A){if(!La(b))throw Error(n(405));var I=A!=null&&A.hydratedSources||null,D=!1,F="",W=Yu;if(A!=null&&(A.unstable_strictMode===!0&&(D=!0),A.identifierPrefix!==void 0&&(F=A.identifierPrefix),A.onRecoverableError!==void 0&&(W=A.onRecoverableError)),w=Hu(w,null,b,1,A??null,D,!1,F,W),b[pn]=w.current,Hi(b),I)for(b=0;b<I.length;b++)A=I[b],D=A._getVersion,D=D(A._source),w.mutableSourceEagerHydrationData==null?w.mutableSourceEagerHydrationData=[A,D]:w.mutableSourceEagerHydrationData.push(A,D);return new us(w)},reactDom_production_min.render=function(b,w,A){if(!cs(w))throw Error(n(200));return ds(null,b,w,!1,A)},reactDom_production_min.unmountComponentAtNode=function(b){if(!cs(b))throw Error(n(40));return b._reactRootContainer?(ei(function(){ds(null,null,b,!1,function(){b._reactRootContainer=null,b[pn]=null})}),!0):!1},reactDom_production_min.unstable_batchedUpdates=Oa,reactDom_production_min.unstable_renderSubtreeIntoContainer=function(b,w,A,I){if(!cs(A))throw Error(n(200));if(b==null||b._reactInternals===void 0)throw Error(n(38));return ds(b,w,A,!1,I)},reactDom_production_min.version="18.3.1-next-f1338f8080-20240426",reactDom_production_min}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),reactDom.exports=requireReactDom_production_min(),reactDom.exports}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client;hasRequiredClient=1;var t=requireReactDom();return client.createRoot=t.createRoot,client.hydrateRoot=t.hydrateRoot,client}var clientExports=requireClient(),reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toKebabCase=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),toCamelCase=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,i)=>i?i.toUpperCase():n.toLowerCase()),toPascalCase=t=>{const e=toCamelCase(t);return e.charAt(0).toUpperCase()+e.slice(1)},mergeClasses=(...t)=>t.filter((e,n,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Icon=reactExports.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:o="",children:u,iconNode:d,...h},m)=>reactExports.createElement("svg",{ref:m,...defaultAttributes,width:e,height:e,stroke:t,strokeWidth:i?Number(n)*24/Number(e):n,className:mergeClasses("lucide",o),...h},[...d.map(([p,_])=>reactExports.createElement(p,_)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const createLucideIcon=(t,e)=>{const n=reactExports.forwardRef(({className:i,...o},u)=>reactExports.createElement(Icon,{ref:u,iconNode:e,className:mergeClasses(`lucide-${toKebabCase(toPascalCase(t))}`,`lucide-${t}`,i),...o}));return n.displayName=toPascalCase(t),n};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$z=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Bell=createLucideIcon("bell",__iconNode$z);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$y=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],Bookmark=createLucideIcon("bookmark",__iconNode$y);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$x=[["path",{d:"M2 8V6a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-6",key:"3zrzxg"}],["path",{d:"M2 12a9 9 0 0 1 8 8",key:"g6cvee"}],["path",{d:"M2 16a5 5 0 0 1 4 4",key:"1y1dii"}],["line",{x1:"2",x2:"2.01",y1:"20",y2:"20",key:"xu2jvo"}]],Cast=createLucideIcon("cast",__iconNode$x);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$w=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],ChartNoAxesColumn=createLucideIcon("chart-no-axes-column",__iconNode$w);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$v=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],CircleAlert=createLucideIcon("circle-alert",__iconNode$v);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$u=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],CircleCheck=createLucideIcon("circle-check",__iconNode$u);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$t=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]],CircleStop=createLucideIcon("circle-stop",__iconNode$t);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$s=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],CircleUser=createLucideIcon("circle-user",__iconNode$s);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$r=[["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}],["path",{d:"M15.947 12.65a4 4 0 0 0-5.925-4.128",key:"dpwdj0"}],["path",{d:"M13 22H7a5 5 0 1 1 4.9-6H13a3 3 0 0 1 0 6Z",key:"s09mg5"}]],CloudSun=createLucideIcon("cloud-sun",__iconNode$r);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$q=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Database=createLucideIcon("database",__iconNode$q);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$p=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],EllipsisVertical=createLucideIcon("ellipsis-vertical",__iconNode$p);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$o=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],ExternalLink=createLucideIcon("external-link",__iconNode$o);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$n=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Eye=createLucideIcon("eye",__iconNode$n);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$m=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],FileCheck=createLucideIcon("file-check",__iconNode$m);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$l=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]],Film=createLucideIcon("film",__iconNode$l);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$k=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Funnel=createLucideIcon("funnel",__iconNode$k);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$j=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Globe=createLucideIcon("globe",__iconNode$j);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$i=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],Heart=createLucideIcon("heart",__iconNode$i);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$h=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Image$1=createLucideIcon("image",__iconNode$h);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$g=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],LayoutDashboard=createLucideIcon("layout-dashboard",__iconNode$g);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$f=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],LayoutGrid=createLucideIcon("layout-grid",__iconNode$f);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$e=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]],LayoutList=createLucideIcon("layout-list",__iconNode$e);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$d=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],Menu=createLucideIcon("menu",__iconNode$d);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$c=[["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-4 0v-9a2 2 0 0 1 2-2h2",key:"39pd36"}],["rect",{width:"8",height:"4",x:"10",y:"6",rx:"1",key:"aywv1n"}]],Newspaper=createLucideIcon("newspaper",__iconNode$c);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$b=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Plus=createLucideIcon("plus",__iconNode$b);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$a=[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]],Radio=createLucideIcon("radio",__iconNode$a);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$9=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Search=createLucideIcon("search",__iconNode$9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$8=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Settings=createLucideIcon("settings",__iconNode$8);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$7=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Share2=createLucideIcon("share-2",__iconNode$7);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$6=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],Smartphone=createLucideIcon("smartphone",__iconNode$6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$5=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],Sparkles=createLucideIcon("sparkles",__iconNode$5);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$4=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],SquarePen=createLucideIcon("square-pen",__iconNode$4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$3=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Trash2=createLucideIcon("trash-2",__iconNode$3);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$2=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],Video=createLucideIcon("video",__iconNode$2);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],Volume2=createLucideIcon("volume-2",__iconNode$1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],X=createLucideIcon("x",__iconNode);function r(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(n=r(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function clsx(){for(var t,e,n=0,i="",o=arguments.length;n<o;n++)(t=arguments[n])&&(e=r(t))&&(i&&(i+=" "),i+=e);return i}var isArray_1,hasRequiredIsArray;function requireIsArray(){if(hasRequiredIsArray)return isArray_1;hasRequiredIsArray=1;var t=Array.isArray;return isArray_1=t,isArray_1}var _freeGlobal,hasRequired_freeGlobal;function require_freeGlobal(){if(hasRequired_freeGlobal)return _freeGlobal;hasRequired_freeGlobal=1;var t=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal;return _freeGlobal=t,_freeGlobal}var _root,hasRequired_root;function require_root(){if(hasRequired_root)return _root;hasRequired_root=1;var t=require_freeGlobal(),e=typeof self=="object"&&self&&self.Object===Object&&self,n=t||e||Function("return this")();return _root=n,_root}var _Symbol,hasRequired_Symbol;function require_Symbol(){if(hasRequired_Symbol)return _Symbol;hasRequired_Symbol=1;var t=require_root(),e=t.Symbol;return _Symbol=e,_Symbol}var _getRawTag,hasRequired_getRawTag;function require_getRawTag(){if(hasRequired_getRawTag)return _getRawTag;hasRequired_getRawTag=1;var t=require_Symbol(),e=Object.prototype,n=e.hasOwnProperty,i=e.toString,o=t?t.toStringTag:void 0;function u(d){var h=n.call(d,o),m=d[o];try{d[o]=void 0;var p=!0}catch{}var _=i.call(d);return p&&(h?d[o]=m:delete d[o]),_}return _getRawTag=u,_getRawTag}var _objectToString,hasRequired_objectToString;function require_objectToString(){if(hasRequired_objectToString)return _objectToString;hasRequired_objectToString=1;var t=Object.prototype,e=t.toString;function n(i){return e.call(i)}return _objectToString=n,_objectToString}var _baseGetTag,hasRequired_baseGetTag;function require_baseGetTag(){if(hasRequired_baseGetTag)return _baseGetTag;hasRequired_baseGetTag=1;var t=require_Symbol(),e=require_getRawTag(),n=require_objectToString(),i="[object Null]",o="[object Undefined]",u=t?t.toStringTag:void 0;function d(h){return h==null?h===void 0?o:i:u&&u in Object(h)?e(h):n(h)}return _baseGetTag=d,_baseGetTag}var isObjectLike_1,hasRequiredIsObjectLike;function requireIsObjectLike(){if(hasRequiredIsObjectLike)return isObjectLike_1;hasRequiredIsObjectLike=1;function t(e){return e!=null&&typeof e=="object"}return isObjectLike_1=t,isObjectLike_1}var isSymbol_1,hasRequiredIsSymbol;function requireIsSymbol(){if(hasRequiredIsSymbol)return isSymbol_1;hasRequiredIsSymbol=1;var t=require_baseGetTag(),e=requireIsObjectLike(),n="[object Symbol]";function i(o){return typeof o=="symbol"||e(o)&&t(o)==n}return isSymbol_1=i,isSymbol_1}var _isKey,hasRequired_isKey;function require_isKey(){if(hasRequired_isKey)return _isKey;hasRequired_isKey=1;var t=requireIsArray(),e=requireIsSymbol(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;function o(u,d){if(t(u))return!1;var h=typeof u;return h=="number"||h=="symbol"||h=="boolean"||u==null||e(u)?!0:i.test(u)||!n.test(u)||d!=null&&u in Object(d)}return _isKey=o,_isKey}var isObject_1,hasRequiredIsObject;function requireIsObject(){if(hasRequiredIsObject)return isObject_1;hasRequiredIsObject=1;function t(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}return isObject_1=t,isObject_1}var isFunction_1,hasRequiredIsFunction;function requireIsFunction(){if(hasRequiredIsFunction)return isFunction_1;hasRequiredIsFunction=1;var t=require_baseGetTag(),e=requireIsObject(),n="[object AsyncFunction]",i="[object Function]",o="[object GeneratorFunction]",u="[object Proxy]";function d(h){if(!e(h))return!1;var m=t(h);return m==i||m==o||m==n||m==u}return isFunction_1=d,isFunction_1}var _coreJsData,hasRequired_coreJsData;function require_coreJsData(){if(hasRequired_coreJsData)return _coreJsData;hasRequired_coreJsData=1;var t=require_root(),e=t["__core-js_shared__"];return _coreJsData=e,_coreJsData}var _isMasked,hasRequired_isMasked;function require_isMasked(){if(hasRequired_isMasked)return _isMasked;hasRequired_isMasked=1;var t=require_coreJsData(),e=(function(){var i=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""})();function n(i){return!!e&&e in i}return _isMasked=n,_isMasked}var _toSource,hasRequired_toSource;function require_toSource(){if(hasRequired_toSource)return _toSource;hasRequired_toSource=1;var t=Function.prototype,e=t.toString;function n(i){if(i!=null){try{return e.call(i)}catch{}try{return i+""}catch{}}return""}return _toSource=n,_toSource}var _baseIsNative,hasRequired_baseIsNative;function require_baseIsNative(){if(hasRequired_baseIsNative)return _baseIsNative;hasRequired_baseIsNative=1;var t=requireIsFunction(),e=require_isMasked(),n=requireIsObject(),i=require_toSource(),o=/[\\^$.*+?()[\]{}|]/g,u=/^\[object .+?Constructor\]$/,d=Function.prototype,h=Object.prototype,m=d.toString,p=h.hasOwnProperty,_=RegExp("^"+m.call(p).replace(o,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(l){if(!n(l)||e(l))return!1;var g=t(l)?_:u;return g.test(i(l))}return _baseIsNative=f,_baseIsNative}var _getValue,hasRequired_getValue;function require_getValue(){if(hasRequired_getValue)return _getValue;hasRequired_getValue=1;function t(e,n){return e?.[n]}return _getValue=t,_getValue}var _getNative,hasRequired_getNative;function require_getNative(){if(hasRequired_getNative)return _getNative;hasRequired_getNative=1;var t=require_baseIsNative(),e=require_getValue();function n(i,o){var u=e(i,o);return t(u)?u:void 0}return _getNative=n,_getNative}var _nativeCreate,hasRequired_nativeCreate;function require_nativeCreate(){if(hasRequired_nativeCreate)return _nativeCreate;hasRequired_nativeCreate=1;var t=require_getNative(),e=t(Object,"create");return _nativeCreate=e,_nativeCreate}var _hashClear,hasRequired_hashClear;function require_hashClear(){if(hasRequired_hashClear)return _hashClear;hasRequired_hashClear=1;var t=require_nativeCreate();function e(){this.__data__=t?t(null):{},this.size=0}return _hashClear=e,_hashClear}var _hashDelete,hasRequired_hashDelete;function require_hashDelete(){if(hasRequired_hashDelete)return _hashDelete;hasRequired_hashDelete=1;function t(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}return _hashDelete=t,_hashDelete}var _hashGet,hasRequired_hashGet;function require_hashGet(){if(hasRequired_hashGet)return _hashGet;hasRequired_hashGet=1;var t=require_nativeCreate(),e="__lodash_hash_undefined__",n=Object.prototype,i=n.hasOwnProperty;function o(u){var d=this.__data__;if(t){var h=d[u];return h===e?void 0:h}return i.call(d,u)?d[u]:void 0}return _hashGet=o,_hashGet}var _hashHas,hasRequired_hashHas;function require_hashHas(){if(hasRequired_hashHas)return _hashHas;hasRequired_hashHas=1;var t=require_nativeCreate(),e=Object.prototype,n=e.hasOwnProperty;function i(o){var u=this.__data__;return t?u[o]!==void 0:n.call(u,o)}return _hashHas=i,_hashHas}var _hashSet,hasRequired_hashSet;function require_hashSet(){if(hasRequired_hashSet)return _hashSet;hasRequired_hashSet=1;var t=require_nativeCreate(),e="__lodash_hash_undefined__";function n(i,o){var u=this.__data__;return this.size+=this.has(i)?0:1,u[i]=t&&o===void 0?e:o,this}return _hashSet=n,_hashSet}var _Hash,hasRequired_Hash;function require_Hash(){if(hasRequired_Hash)return _Hash;hasRequired_Hash=1;var t=require_hashClear(),e=require_hashDelete(),n=require_hashGet(),i=require_hashHas(),o=require_hashSet();function u(d){var h=-1,m=d==null?0:d.length;for(this.clear();++h<m;){var p=d[h];this.set(p[0],p[1])}}return u.prototype.clear=t,u.prototype.delete=e,u.prototype.get=n,u.prototype.has=i,u.prototype.set=o,_Hash=u,_Hash}var _listCacheClear,hasRequired_listCacheClear;function require_listCacheClear(){if(hasRequired_listCacheClear)return _listCacheClear;hasRequired_listCacheClear=1;function t(){this.__data__=[],this.size=0}return _listCacheClear=t,_listCacheClear}var eq_1,hasRequiredEq;function requireEq(){if(hasRequiredEq)return eq_1;hasRequiredEq=1;function t(e,n){return e===n||e!==e&&n!==n}return eq_1=t,eq_1}var _assocIndexOf,hasRequired_assocIndexOf;function require_assocIndexOf(){if(hasRequired_assocIndexOf)return _assocIndexOf;hasRequired_assocIndexOf=1;var t=requireEq();function e(n,i){for(var o=n.length;o--;)if(t(n[o][0],i))return o;return-1}return _assocIndexOf=e,_assocIndexOf}var _listCacheDelete,hasRequired_listCacheDelete;function require_listCacheDelete(){if(hasRequired_listCacheDelete)return _listCacheDelete;hasRequired_listCacheDelete=1;var t=require_assocIndexOf(),e=Array.prototype,n=e.splice;function i(o){var u=this.__data__,d=t(u,o);if(d<0)return!1;var h=u.length-1;return d==h?u.pop():n.call(u,d,1),--this.size,!0}return _listCacheDelete=i,_listCacheDelete}var _listCacheGet,hasRequired_listCacheGet;function require_listCacheGet(){if(hasRequired_listCacheGet)return _listCacheGet;hasRequired_listCacheGet=1;var t=require_assocIndexOf();function e(n){var i=this.__data__,o=t(i,n);return o<0?void 0:i[o][1]}return _listCacheGet=e,_listCacheGet}var _listCacheHas,hasRequired_listCacheHas;function require_listCacheHas(){if(hasRequired_listCacheHas)return _listCacheHas;hasRequired_listCacheHas=1;var t=require_assocIndexOf();function e(n){return t(this.__data__,n)>-1}return _listCacheHas=e,_listCacheHas}var _listCacheSet,hasRequired_listCacheSet;function require_listCacheSet(){if(hasRequired_listCacheSet)return _listCacheSet;hasRequired_listCacheSet=1;var t=require_assocIndexOf();function e(n,i){var o=this.__data__,u=t(o,n);return u<0?(++this.size,o.push([n,i])):o[u][1]=i,this}return _listCacheSet=e,_listCacheSet}var _ListCache,hasRequired_ListCache;function require_ListCache(){if(hasRequired_ListCache)return _ListCache;hasRequired_ListCache=1;var t=require_listCacheClear(),e=require_listCacheDelete(),n=require_listCacheGet(),i=require_listCacheHas(),o=require_listCacheSet();function u(d){var h=-1,m=d==null?0:d.length;for(this.clear();++h<m;){var p=d[h];this.set(p[0],p[1])}}return u.prototype.clear=t,u.prototype.delete=e,u.prototype.get=n,u.prototype.has=i,u.prototype.set=o,_ListCache=u,_ListCache}var _Map,hasRequired_Map;function require_Map(){if(hasRequired_Map)return _Map;hasRequired_Map=1;var t=require_getNative(),e=require_root(),n=t(e,"Map");return _Map=n,_Map}var _mapCacheClear,hasRequired_mapCacheClear;function require_mapCacheClear(){if(hasRequired_mapCacheClear)return _mapCacheClear;hasRequired_mapCacheClear=1;var t=require_Hash(),e=require_ListCache(),n=require_Map();function i(){this.size=0,this.__data__={hash:new t,map:new(n||e),string:new t}}return _mapCacheClear=i,_mapCacheClear}var _isKeyable,hasRequired_isKeyable;function require_isKeyable(){if(hasRequired_isKeyable)return _isKeyable;hasRequired_isKeyable=1;function t(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}return _isKeyable=t,_isKeyable}var _getMapData,hasRequired_getMapData;function require_getMapData(){if(hasRequired_getMapData)return _getMapData;hasRequired_getMapData=1;var t=require_isKeyable();function e(n,i){var o=n.__data__;return t(i)?o[typeof i=="string"?"string":"hash"]:o.map}return _getMapData=e,_getMapData}var _mapCacheDelete,hasRequired_mapCacheDelete;function require_mapCacheDelete(){if(hasRequired_mapCacheDelete)return _mapCacheDelete;hasRequired_mapCacheDelete=1;var t=require_getMapData();function e(n){var i=t(this,n).delete(n);return this.size-=i?1:0,i}return _mapCacheDelete=e,_mapCacheDelete}var _mapCacheGet,hasRequired_mapCacheGet;function require_mapCacheGet(){if(hasRequired_mapCacheGet)return _mapCacheGet;hasRequired_mapCacheGet=1;var t=require_getMapData();function e(n){return t(this,n).get(n)}return _mapCacheGet=e,_mapCacheGet}var _mapCacheHas,hasRequired_mapCacheHas;function require_mapCacheHas(){if(hasRequired_mapCacheHas)return _mapCacheHas;hasRequired_mapCacheHas=1;var t=require_getMapData();function e(n){return t(this,n).has(n)}return _mapCacheHas=e,_mapCacheHas}var _mapCacheSet,hasRequired_mapCacheSet;function require_mapCacheSet(){if(hasRequired_mapCacheSet)return _mapCacheSet;hasRequired_mapCacheSet=1;var t=require_getMapData();function e(n,i){var o=t(this,n),u=o.size;return o.set(n,i),this.size+=o.size==u?0:1,this}return _mapCacheSet=e,_mapCacheSet}var _MapCache,hasRequired_MapCache;function require_MapCache(){if(hasRequired_MapCache)return _MapCache;hasRequired_MapCache=1;var t=require_mapCacheClear(),e=require_mapCacheDelete(),n=require_mapCacheGet(),i=require_mapCacheHas(),o=require_mapCacheSet();function u(d){var h=-1,m=d==null?0:d.length;for(this.clear();++h<m;){var p=d[h];this.set(p[0],p[1])}}return u.prototype.clear=t,u.prototype.delete=e,u.prototype.get=n,u.prototype.has=i,u.prototype.set=o,_MapCache=u,_MapCache}var memoize_1,hasRequiredMemoize;function requireMemoize(){if(hasRequiredMemoize)return memoize_1;hasRequiredMemoize=1;var t=require_MapCache(),e="Expected a function";function n(i,o){if(typeof i!="function"||o!=null&&typeof o!="function")throw new TypeError(e);var u=function(){var d=arguments,h=o?o.apply(this,d):d[0],m=u.cache;if(m.has(h))return m.get(h);var p=i.apply(this,d);return u.cache=m.set(h,p)||m,p};return u.cache=new(n.Cache||t),u}return n.Cache=t,memoize_1=n,memoize_1}var _memoizeCapped,hasRequired_memoizeCapped;function require_memoizeCapped(){if(hasRequired_memoizeCapped)return _memoizeCapped;hasRequired_memoizeCapped=1;var t=requireMemoize(),e=500;function n(i){var o=t(i,function(d){return u.size===e&&u.clear(),d}),u=o.cache;return o}return _memoizeCapped=n,_memoizeCapped}var _stringToPath,hasRequired_stringToPath;function require_stringToPath(){if(hasRequired_stringToPath)return _stringToPath;hasRequired_stringToPath=1;var t=require_memoizeCapped(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,i=t(function(o){var u=[];return o.charCodeAt(0)===46&&u.push(""),o.replace(e,function(d,h,m,p){u.push(m?p.replace(n,"$1"):h||d)}),u});return _stringToPath=i,_stringToPath}var _arrayMap,hasRequired_arrayMap;function require_arrayMap(){if(hasRequired_arrayMap)return _arrayMap;hasRequired_arrayMap=1;function t(e,n){for(var i=-1,o=e==null?0:e.length,u=Array(o);++i<o;)u[i]=n(e[i],i,e);return u}return _arrayMap=t,_arrayMap}var _baseToString,hasRequired_baseToString;function require_baseToString(){if(hasRequired_baseToString)return _baseToString;hasRequired_baseToString=1;var t=require_Symbol(),e=require_arrayMap(),n=requireIsArray(),i=requireIsSymbol(),o=t?t.prototype:void 0,u=o?o.toString:void 0;function d(h){if(typeof h=="string")return h;if(n(h))return e(h,d)+"";if(i(h))return u?u.call(h):"";var m=h+"";return m=="0"&&1/h==-1/0?"-0":m}return _baseToString=d,_baseToString}var toString_1,hasRequiredToString;function requireToString(){if(hasRequiredToString)return toString_1;hasRequiredToString=1;var t=require_baseToString();function e(n){return n==null?"":t(n)}return toString_1=e,toString_1}var _castPath,hasRequired_castPath;function require_castPath(){if(hasRequired_castPath)return _castPath;hasRequired_castPath=1;var t=requireIsArray(),e=require_isKey(),n=require_stringToPath(),i=requireToString();function o(u,d){return t(u)?u:e(u,d)?[u]:n(i(u))}return _castPath=o,_castPath}var _toKey,hasRequired_toKey;function require_toKey(){if(hasRequired_toKey)return _toKey;hasRequired_toKey=1;var t=requireIsSymbol();function e(n){if(typeof n=="string"||t(n))return n;var i=n+"";return i=="0"&&1/n==-1/0?"-0":i}return _toKey=e,_toKey}var _baseGet,hasRequired_baseGet;function require_baseGet(){if(hasRequired_baseGet)return _baseGet;hasRequired_baseGet=1;var t=require_castPath(),e=require_toKey();function n(i,o){o=t(o,i);for(var u=0,d=o.length;i!=null&&u<d;)i=i[e(o[u++])];return u&&u==d?i:void 0}return _baseGet=n,_baseGet}var get_1,hasRequiredGet;function requireGet(){if(hasRequiredGet)return get_1;hasRequiredGet=1;var t=require_baseGet();function e(n,i,o){var u=n==null?void 0:t(n,i);return u===void 0?o:u}return get_1=e,get_1}var getExports=requireGet();const get$1=getDefaultExportFromCjs(getExports);var isNil_1,hasRequiredIsNil;function requireIsNil(){if(hasRequiredIsNil)return isNil_1;hasRequiredIsNil=1;function t(e){return e==null}return isNil_1=t,isNil_1}var isNilExports=requireIsNil();const isNil=getDefaultExportFromCjs(isNilExports);var isString_1,hasRequiredIsString;function requireIsString(){if(hasRequiredIsString)return isString_1;hasRequiredIsString=1;var t=require_baseGetTag(),e=requireIsArray(),n=requireIsObjectLike(),i="[object String]";function o(u){return typeof u=="string"||!e(u)&&n(u)&&t(u)==i}return isString_1=o,isString_1}var isStringExports=requireIsString();const isString=getDefaultExportFromCjs(isStringExports);var isFunctionExports=requireIsFunction();const isFunction=getDefaultExportFromCjs(isFunctionExports);var isObjectExports=requireIsObject();const isObject$1=getDefaultExportFromCjs(isObjectExports);var reactIs={exports:{}},reactIs_production_min={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactIs_production_min;function requireReactIs_production_min(){if(hasRequiredReactIs_production_min)return reactIs_production_min;hasRequiredReactIs_production_min=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),d=Symbol.for("react.context"),h=Symbol.for("react.server_context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),l=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen"),v;v=Symbol.for("react.module.reference");function S(T){if(typeof T=="object"&&T!==null){var E=T.$$typeof;switch(E){case t:switch(T=T.type,T){case n:case o:case i:case p:case _:return T;default:switch(T=T&&T.$$typeof,T){case h:case d:case m:case l:case f:case u:return T;default:return E}}case e:return E}}}return reactIs_production_min.ContextConsumer=d,reactIs_production_min.ContextProvider=u,reactIs_production_min.Element=t,reactIs_production_min.ForwardRef=m,reactIs_production_min.Fragment=n,reactIs_production_min.Lazy=l,reactIs_production_min.Memo=f,reactIs_production_min.Portal=e,reactIs_production_min.Profiler=o,reactIs_production_min.StrictMode=i,reactIs_production_min.Suspense=p,reactIs_production_min.SuspenseList=_,reactIs_production_min.isAsyncMode=function(){return!1},reactIs_production_min.isConcurrentMode=function(){return!1},reactIs_production_min.isContextConsumer=function(T){return S(T)===d},reactIs_production_min.isContextProvider=function(T){return S(T)===u},reactIs_production_min.isElement=function(T){return typeof T=="object"&&T!==null&&T.$$typeof===t},reactIs_production_min.isForwardRef=function(T){return S(T)===m},reactIs_production_min.isFragment=function(T){return S(T)===n},reactIs_production_min.isLazy=function(T){return S(T)===l},reactIs_production_min.isMemo=function(T){return S(T)===f},reactIs_production_min.isPortal=function(T){return S(T)===e},reactIs_production_min.isProfiler=function(T){return S(T)===o},reactIs_production_min.isStrictMode=function(T){return S(T)===i},reactIs_production_min.isSuspense=function(T){return S(T)===p},reactIs_production_min.isSuspenseList=function(T){return S(T)===_},reactIs_production_min.isValidElementType=function(T){return typeof T=="string"||typeof T=="function"||T===n||T===o||T===i||T===p||T===_||T===g||typeof T=="object"&&T!==null&&(T.$$typeof===l||T.$$typeof===f||T.$$typeof===u||T.$$typeof===d||T.$$typeof===m||T.$$typeof===v||T.getModuleId!==void 0)},reactIs_production_min.typeOf=S,reactIs_production_min}var hasRequiredReactIs;function requireReactIs(){return hasRequiredReactIs||(hasRequiredReactIs=1,reactIs.exports=requireReactIs_production_min()),reactIs.exports}var reactIsExports=requireReactIs(),isNumber_1,hasRequiredIsNumber;function requireIsNumber(){if(hasRequiredIsNumber)return isNumber_1;hasRequiredIsNumber=1;var t=require_baseGetTag(),e=requireIsObjectLike(),n="[object Number]";function i(o){return typeof o=="number"||e(o)&&t(o)==n}return isNumber_1=i,isNumber_1}var _isNaN,hasRequired_isNaN;function require_isNaN(){if(hasRequired_isNaN)return _isNaN;hasRequired_isNaN=1;var t=requireIsNumber();function e(n){return t(n)&&n!=+n}return _isNaN=e,_isNaN}var _isNaNExports=require_isNaN();const isNan=getDefaultExportFromCjs(_isNaNExports);var isNumberExports=requireIsNumber();const isNumber$1=getDefaultExportFromCjs(isNumberExports);var mathSign=function(e){return e===0?0:e>0?1:-1},isPercent=function(e){return isString(e)&&e.indexOf("%")===e.length-1},isNumber=function(e){return isNumber$1(e)&&!isNan(e)},isNullish$1=function(e){return isNil(e)},isNumOrStr=function(e){return isNumber(e)||isString(e)},idCounter=0,uniqueId=function(e){var n=++idCounter;return"".concat(e||"").concat(n)},getPercentValue=function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!isNumber(e)&&!isString(e))return i;var u;if(isPercent(e)){var d=e.indexOf("%");u=n*parseFloat(e.slice(0,d))/100}else u=+e;return isNan(u)&&(u=i),o&&u>n&&(u=n),u},getAnyElementOfObject=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},hasDuplicate=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,i={},o=0;o<n;o++)if(!i[e[o]])i[e[o]]=!0;else return!0;return!1},interpolateNumber$2=function(e,n){return isNumber(e)&&isNumber(n)?function(i){return e+i*(n-e)}:function(){return n}};function findEntryInArray(t,e,n){return!t||!t.length?null:t.find(function(i){return i&&(typeof e=="function"?e(i):get$1(i,e))===n})}var compareValues=function(e,n){return isNumber(e)&&isNumber(n)?e-n:isString(e)&&isString(n)?e.localeCompare(n):e instanceof Date&&n instanceof Date?e.getTime()-n.getTime():String(e).localeCompare(String(n))};function shallowEqual(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var i in e)if({}.hasOwnProperty.call(e,i)&&!{}.hasOwnProperty.call(t,i))return!1;return!0}function _typeof$K(t){"@babel/helpers - typeof";return _typeof$K=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$K(t)}var SVGContainerPropKeys=["viewBox","children"],SVGElementPropKeys=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],PolyElementKeys=["points","pathLength"],FilteredElementKeyMap={svg:SVGContainerPropKeys,polygon:PolyElementKeys,polyline:PolyElementKeys},EventKeys=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],adaptEventHandlers=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(reactExports.isValidElement(e)&&(i=e.props),!isObject$1(i))return null;var o={};return Object.keys(i).forEach(function(u){EventKeys.includes(u)&&(o[u]=n||function(d){return i[u](i,d)})}),o},getEventHandlerOfChild=function(e,n,i){return function(o){return e(n,i,o),null}},adaptEventsOfChild=function(e,n,i){if(!isObject$1(e)||_typeof$K(e)!=="object")return null;var o=null;return Object.keys(e).forEach(function(u){var d=e[u];EventKeys.includes(u)&&typeof d=="function"&&(o||(o={}),o[u]=getEventHandlerOfChild(d,n,i))}),o},_excluded$h=["children"],_excluded2$6=["children"];function _objectWithoutProperties$h(t,e){if(t==null)return{};var n=_objectWithoutPropertiesLoose$h(t,e),i,o;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(o=0;o<u.length;o++)i=u[o],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function _objectWithoutPropertiesLoose$h(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function _typeof$J(t){"@babel/helpers - typeof";return _typeof$J=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$J(t)}var REACT_BROWSER_EVENT_MAP={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},getDisplayName=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},lastChildren=null,lastResult=null,toArray$1=function t(e){if(e===lastChildren&&Array.isArray(lastResult))return lastResult;var n=[];return reactExports.Children.forEach(e,function(i){isNil(i)||(reactIsExports.isFragment(i)?n=n.concat(t(i.props.children)):n.push(i))}),lastResult=n,lastChildren=e,n};function findAllByType(t,e){var n=[],i=[];return Array.isArray(e)?i=e.map(function(o){return getDisplayName(o)}):i=[getDisplayName(e)],toArray$1(t).forEach(function(o){var u=get$1(o,"type.displayName")||get$1(o,"type.name");i.indexOf(u)!==-1&&n.push(o)}),n}function findChildByType(t,e){var n=findAllByType(t,e);return n&&n[0]}var validateWidthHeight=function(e){if(!e||!e.props)return!1;var n=e.props,i=n.width,o=n.height;return!(!isNumber(i)||i<=0||!isNumber(o)||o<=0)},SVG_TAGS=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],isSvgElement=function(e){return e&&e.type&&isString(e.type)&&SVG_TAGS.indexOf(e.type)>=0},hasClipDot=function(e){return e&&_typeof$J(e)==="object"&&"clipDot"in e},isValidSpreadableProp=function(e,n,i,o){var u,d=(u=FilteredElementKeyMap?.[o])!==null&&u!==void 0?u:[];return n.startsWith("data-")||!isFunction(e)&&(o&&d.includes(n)||SVGElementPropKeys.includes(n))||i&&EventKeys.includes(n)},filterProps$1=function(e,n,i){if(!e||typeof e=="function"||typeof e=="boolean")return null;var o=e;if(reactExports.isValidElement(e)&&(o=e.props),!isObject$1(o))return null;var u={};return Object.keys(o).forEach(function(d){var h;isValidSpreadableProp((h=o)===null||h===void 0?void 0:h[d],d,n,i)&&(u[d]=o[d])}),u},isChildrenEqual=function t(e,n){if(e===n)return!0;var i=reactExports.Children.count(e);if(i!==reactExports.Children.count(n))return!1;if(i===0)return!0;if(i===1)return isSingleChildEqual(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var o=0;o<i;o++){var u=e[o],d=n[o];if(Array.isArray(u)||Array.isArray(d)){if(!t(u,d))return!1}else if(!isSingleChildEqual(u,d))return!1}return!0},isSingleChildEqual=function(e,n){if(isNil(e)&&isNil(n))return!0;if(!isNil(e)&&!isNil(n)){var i=e.props||{},o=i.children,u=_objectWithoutProperties$h(i,_excluded$h),d=n.props||{},h=d.children,m=_objectWithoutProperties$h(d,_excluded2$6);return o&&h?shallowEqual(u,m)&&isChildrenEqual(o,h):!o&&!h?shallowEqual(u,m):!1}return!1},renderByOrder=function(e,n){var i=[],o={};return toArray$1(e).forEach(function(u,d){if(isSvgElement(u))i.push(u);else if(u){var h=getDisplayName(u.type),m=n[h]||{},p=m.handler,_=m.once;if(p&&(!_||!o[h])){var f=p(u,h,d);i.push(f),o[h]=!0}}}),i},getReactEventByType=function(e){var n=e&&e.type;return n&&REACT_BROWSER_EVENT_MAP[n]?REACT_BROWSER_EVENT_MAP[n]:null},parseChildIndex=function(e,n){return toArray$1(n).indexOf(e)},_excluded$g=["children","width","height","viewBox","className","style","title","desc"];function _extends$q(){return _extends$q=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_extends$q.apply(this,arguments)}function _objectWithoutProperties$g(t,e){if(t==null)return{};var n=_objectWithoutPropertiesLoose$g(t,e),i,o;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(o=0;o<u.length;o++)i=u[o],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function _objectWithoutPropertiesLoose$g(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function Surface(t){var e=t.children,n=t.width,i=t.height,o=t.viewBox,u=t.className,d=t.style,h=t.title,m=t.desc,p=_objectWithoutProperties$g(t,_excluded$g),_=o||{width:n,height:i,x:0,y:0},f=clsx("recharts-surface",u);return React.createElement("svg",_extends$q({},filterProps$1(p,!0,"svg"),{className:f,width:n,height:i,style:d,viewBox:"".concat(_.x," ").concat(_.y," ").concat(_.width," ").concat(_.height)}),React.createElement("title",null,h),React.createElement("desc",null,m),e)}var _excluded$f=["children","className"];function _extends$p(){return _extends$p=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_extends$p.apply(this,arguments)}function _objectWithoutProperties$f(t,e){if(t==null)return{};var n=_objectWithoutPropertiesLoose$f(t,e),i,o;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(o=0;o<u.length;o++)i=u[o],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function _objectWithoutPropertiesLoose$f(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}var Layer=React.forwardRef(function(t,e){var n=t.children,i=t.className,o=_objectWithoutProperties$f(t,_excluded$f),u=clsx("recharts-layer",i);return React.createElement("g",_extends$p({className:u},filterProps$1(o,!0),{ref:e}),n)}),warn=function(e,n){for(var i=arguments.length,o=new Array(i>2?i-2:0),u=2;u<i;u++)o[u-2]=arguments[u]},_baseSlice,hasRequired_baseSlice;function require_baseSlice(){if(hasRequired_baseSlice)return _baseSlice;hasRequired_baseSlice=1;function t(e,n,i){var o=-1,u=e.length;n<0&&(n=-n>u?0:u+n),i=i>u?u:i,i<0&&(i+=u),u=n>i?0:i-n>>>0,n>>>=0;for(var d=Array(u);++o<u;)d[o]=e[o+n];return d}return _baseSlice=t,_baseSlice}var _castSlice,hasRequired_castSlice;function require_castSlice(){if(hasRequired_castSlice)return _castSlice;hasRequired_castSlice=1;var t=require_baseSlice();function e(n,i,o){var u=n.length;return o=o===void 0?u:o,!i&&o>=u?n:t(n,i,o)}return _castSlice=e,_castSlice}var _hasUnicode,hasRequired_hasUnicode;function require_hasUnicode(){if(hasRequired_hasUnicode)return _hasUnicode;hasRequired_hasUnicode=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",i="\\u20d0-\\u20ff",o=e+n+i,u="\\ufe0e\\ufe0f",d="\\u200d",h=RegExp("["+d+t+o+u+"]");function m(p){return h.test(p)}return _hasUnicode=m,_hasUnicode}var _asciiToArray,hasRequired_asciiToArray;function require_asciiToArray(){if(hasRequired_asciiToArray)return _asciiToArray;hasRequired_asciiToArray=1;function t(e){return e.split("")}return _asciiToArray=t,_asciiToArray}var _unicodeToArray,hasRequired_unicodeToArray;function require_unicodeToArray(){if(hasRequired_unicodeToArray)return _unicodeToArray;hasRequired_unicodeToArray=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",i="\\u20d0-\\u20ff",o=e+n+i,u="\\ufe0e\\ufe0f",d="["+t+"]",h="["+o+"]",m="\\ud83c[\\udffb-\\udfff]",p="(?:"+h+"|"+m+")",_="[^"+t+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",l="[\\ud800-\\udbff][\\udc00-\\udfff]",g="\\u200d",v=p+"?",S="["+u+"]?",T="(?:"+g+"(?:"+[_,f,l].join("|")+")"+S+v+")*",E=S+v+T,O="(?:"+[_+h+"?",h,f,l,d].join("|")+")",R=RegExp(m+"(?="+m+")|"+O+E,"g");function M(C){return C.match(R)||[]}return _unicodeToArray=M,_unicodeToArray}var _stringToArray,hasRequired_stringToArray;function require_stringToArray(){if(hasRequired_stringToArray)return _stringToArray;hasRequired_stringToArray=1;var t=require_asciiToArray(),e=require_hasUnicode(),n=require_unicodeToArray();function i(o){return e(o)?n(o):t(o)}return _stringToArray=i,_stringToArray}var _createCaseFirst,hasRequired_createCaseFirst;function require_createCaseFirst(){if(hasRequired_createCaseFirst)return _createCaseFirst;hasRequired_createCaseFirst=1;var t=require_castSlice(),e=require_hasUnicode(),n=require_stringToArray(),i=requireToString();function o(u){return function(d){d=i(d);var h=e(d)?n(d):void 0,m=h?h[0]:d.charAt(0),p=h?t(h,1).join(""):d.slice(1);return m[u]()+p}}return _createCaseFirst=o,_createCaseFirst}var upperFirst_1,hasRequiredUpperFirst;function requireUpperFirst(){if(hasRequiredUpperFirst)return upperFirst_1;hasRequiredUpperFirst=1;var t=require_createCaseFirst(),e=t("toUpperCase");return upperFirst_1=e,upperFirst_1}var upperFirstExports=requireUpperFirst();const upperFirst=getDefaultExportFromCjs(upperFirstExports);function constant$1(t){return function(){return t}}const cos=Math.cos,sin=Math.sin,sqrt$1=Math.sqrt,pi$1=Math.PI,tau$1=2*pi$1,pi=Math.PI,tau=2*pi,epsilon=1e-6,tauEpsilon=tau-epsilon;function append(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function appendRound(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return append;const n=10**e;return function(i){this._+=i[0];for(let o=1,u=i.length;o<u;++o)this._+=Math.round(arguments[o]*n)/n+i[o]}}class Path{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?append:appendRound(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,i,o){this._append`Q${+e},${+n},${this._x1=+i},${this._y1=+o}`}bezierCurveTo(e,n,i,o,u,d){this._append`C${+e},${+n},${+i},${+o},${this._x1=+u},${this._y1=+d}`}arcTo(e,n,i,o,u){if(e=+e,n=+n,i=+i,o=+o,u=+u,u<0)throw new Error(`negative radius: ${u}`);let d=this._x1,h=this._y1,m=i-e,p=o-n,_=d-e,f=h-n,l=_*_+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(l>epsilon)if(!(Math.abs(f*m-p*_)>epsilon)||!u)this._append`L${this._x1=e},${this._y1=n}`;else{let g=i-d,v=o-h,S=m*m+p*p,T=g*g+v*v,E=Math.sqrt(S),O=Math.sqrt(l),R=u*Math.tan((pi-Math.acos((S+l-T)/(2*E*O)))/2),M=R/O,C=R/E;Math.abs(M-1)>epsilon&&this._append`L${e+M*_},${n+M*f}`,this._append`A${u},${u},0,0,${+(f*g>_*v)},${this._x1=e+C*m},${this._y1=n+C*p}`}}arc(e,n,i,o,u,d){if(e=+e,n=+n,i=+i,d=!!d,i<0)throw new Error(`negative radius: ${i}`);let h=i*Math.cos(o),m=i*Math.sin(o),p=e+h,_=n+m,f=1^d,l=d?o-u:u-o;this._x1===null?this._append`M${p},${_}`:(Math.abs(this._x1-p)>epsilon||Math.abs(this._y1-_)>epsilon)&&this._append`L${p},${_}`,i&&(l<0&&(l=l%tau+tau),l>tauEpsilon?this._append`A${i},${i},0,1,${f},${e-h},${n-m}A${i},${i},0,1,${f},${this._x1=p},${this._y1=_}`:l>epsilon&&this._append`A${i},${i},0,${+(l>=pi)},${f},${this._x1=e+i*Math.cos(u)},${this._y1=n+i*Math.sin(u)}`)}rect(e,n,i,o){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${i=+i}v${+o}h${-i}Z`}toString(){return this._}}function withPath(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);e=i}return t},()=>new Path(e)}function array(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Linear(t){this._context=t}Linear.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function curveLinear(t){return new Linear(t)}function x(t){return t[0]}function y(t){return t[1]}function shapeLine(t,e){var n=constant$1(!0),i=null,o=curveLinear,u=null,d=withPath(h);t=typeof t=="function"?t:t===void 0?x:constant$1(t),e=typeof e=="function"?e:e===void 0?y:constant$1(e);function h(m){var p,_=(m=array(m)).length,f,l=!1,g;for(i==null&&(u=o(g=d())),p=0;p<=_;++p)!(p<_&&n(f=m[p],p,m))===l&&((l=!l)?u.lineStart():u.lineEnd()),l&&u.point(+t(f,p,m),+e(f,p,m));if(g)return u=null,g+""||null}return h.x=function(m){return arguments.length?(t=typeof m=="function"?m:constant$1(+m),h):t},h.y=function(m){return arguments.length?(e=typeof m=="function"?m:constant$1(+m),h):e},h.defined=function(m){return arguments.length?(n=typeof m=="function"?m:constant$1(!!m),h):n},h.curve=function(m){return arguments.length?(o=m,i!=null&&(u=o(i)),h):o},h.context=function(m){return arguments.length?(m==null?i=u=null:u=o(i=m),h):i},h}function shapeArea(t,e,n){var i=null,o=constant$1(!0),u=null,d=curveLinear,h=null,m=withPath(p);t=typeof t=="function"?t:t===void 0?x:constant$1(+t),e=typeof e=="function"?e:constant$1(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?y:constant$1(+n);function p(f){var l,g,v,S=(f=array(f)).length,T,E=!1,O,R=new Array(S),M=new Array(S);for(u==null&&(h=d(O=m())),l=0;l<=S;++l){if(!(l<S&&o(T=f[l],l,f))===E)if(E=!E)g=l,h.areaStart(),h.lineStart();else{for(h.lineEnd(),h.lineStart(),v=l-1;v>=g;--v)h.point(R[v],M[v]);h.lineEnd(),h.areaEnd()}E&&(R[l]=+t(T,l,f),M[l]=+e(T,l,f),h.point(i?+i(T,l,f):R[l],n?+n(T,l,f):M[l]))}if(O)return h=null,O+""||null}function _(){return shapeLine().defined(o).curve(d).context(u)}return p.x=function(f){return arguments.length?(t=typeof f=="function"?f:constant$1(+f),i=null,p):t},p.x0=function(f){return arguments.length?(t=typeof f=="function"?f:constant$1(+f),p):t},p.x1=function(f){return arguments.length?(i=f==null?null:typeof f=="function"?f:constant$1(+f),p):i},p.y=function(f){return arguments.length?(e=typeof f=="function"?f:constant$1(+f),n=null,p):e},p.y0=function(f){return arguments.length?(e=typeof f=="function"?f:constant$1(+f),p):e},p.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:constant$1(+f),p):n},p.lineX0=p.lineY0=function(){return _().x(t).y(e)},p.lineY1=function(){return _().x(t).y(n)},p.lineX1=function(){return _().x(i).y(e)},p.defined=function(f){return arguments.length?(o=typeof f=="function"?f:constant$1(!!f),p):o},p.curve=function(f){return arguments.length?(d=f,u!=null&&(h=d(u)),p):d},p.context=function(f){return arguments.length?(f==null?u=h=null:h=d(u=f),p):u},p}class Bump{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function bumpX(t){return new Bump(t,!0)}function bumpY(t){return new Bump(t,!1)}const symbolCircle={draw(t,e){const n=sqrt$1(e/pi$1);t.moveTo(n,0),t.arc(0,0,n,0,tau$1)}},symbolCross={draw(t,e){const n=sqrt$1(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},tan30=sqrt$1(1/3),tan30_2=tan30*2,symbolDiamond={draw(t,e){const n=sqrt$1(e/tan30_2),i=n*tan30;t.moveTo(0,-n),t.lineTo(i,0),t.lineTo(0,n),t.lineTo(-i,0),t.closePath()}},symbolSquare={draw(t,e){const n=sqrt$1(e),i=-n/2;t.rect(i,i,n,n)}},ka=.8908130915292852,kr=sin(pi$1/10)/sin(7*pi$1/10),kx=sin(tau$1/10)*kr,ky=-cos(tau$1/10)*kr,symbolStar={draw(t,e){const n=sqrt$1(e*ka),i=kx*n,o=ky*n;t.moveTo(0,-n),t.lineTo(i,o);for(let u=1;u<5;++u){const d=tau$1*u/5,h=cos(d),m=sin(d);t.lineTo(m*n,-h*n),t.lineTo(h*i-m*o,m*i+h*o)}t.closePath()}},sqrt3=sqrt$1(3),symbolTriangle={draw(t,e){const n=-sqrt$1(e/(sqrt3*3));t.moveTo(0,n*2),t.lineTo(-sqrt3*n,-n),t.lineTo(sqrt3*n,-n),t.closePath()}},c=-.5,s=sqrt$1(3)/2,k=1/sqrt$1(12),a=(k/2+1)*3,symbolWye={draw(t,e){const n=sqrt$1(e/a),i=n/2,o=n*k,u=i,d=n*k+n,h=-u,m=d;t.moveTo(i,o),t.lineTo(u,d),t.lineTo(h,m),t.lineTo(c*i-s*o,s*i+c*o),t.lineTo(c*u-s*d,s*u+c*d),t.lineTo(c*h-s*m,s*h+c*m),t.lineTo(c*i+s*o,c*o-s*i),t.lineTo(c*u+s*d,c*d-s*u),t.lineTo(c*h+s*m,c*m-s*h),t.closePath()}};function Symbol$1(t,e){let n=null,i=withPath(o);t=typeof t=="function"?t:constant$1(t||symbolCircle),e=typeof e=="function"?e:constant$1(e===void 0?64:+e);function o(){let u;if(n||(n=u=i()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),u)return n=null,u+""||null}return o.type=function(u){return arguments.length?(t=typeof u=="function"?u:constant$1(u),o):t},o.size=function(u){return arguments.length?(e=typeof u=="function"?u:constant$1(+u),o):e},o.context=function(u){return arguments.length?(n=u??null,o):n},o}function noop$3(){}function point$2(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Basis(t){this._context=t}Basis.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:point$2(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:point$2(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function curveBasis(t){return new Basis(t)}function BasisClosed(t){this._context=t}BasisClosed.prototype={areaStart:noop$3,areaEnd:noop$3,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:point$2(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function curveBasisClosed(t){return new BasisClosed(t)}function BasisOpen(t){this._context=t}BasisOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:point$2(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function curveBasisOpen(t){return new BasisOpen(t)}function LinearClosed(t){this._context=t}LinearClosed.prototype={areaStart:noop$3,areaEnd:noop$3,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function curveLinearClosed(t){return new LinearClosed(t)}function sign(t){return t<0?-1:1}function slope3(t,e,n){var i=t._x1-t._x0,o=e-t._x1,u=(t._y1-t._y0)/(i||o<0&&-0),d=(n-t._y1)/(o||i<0&&-0),h=(u*o+d*i)/(i+o);return(sign(u)+sign(d))*Math.min(Math.abs(u),Math.abs(d),.5*Math.abs(h))||0}function slope2(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function point$1(t,e,n){var i=t._x0,o=t._y0,u=t._x1,d=t._y1,h=(u-i)/3;t._context.bezierCurveTo(i+h,o+h*e,u-h,d-h*n,u,d)}function MonotoneX(t){this._context=t}MonotoneX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:point$1(this,this._t0,slope2(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,point$1(this,slope2(this,n=slope3(this,t,e)),n);break;default:point$1(this,this._t0,n=slope3(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function MonotoneY(t){this._context=new ReflectContext(t)}(MonotoneY.prototype=Object.create(MonotoneX.prototype)).point=function(t,e){MonotoneX.prototype.point.call(this,e,t)};function ReflectContext(t){this._context=t}ReflectContext.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,o,u){this._context.bezierCurveTo(e,t,i,n,u,o)}};function monotoneX(t){return new MonotoneX(t)}function monotoneY(t){return new MonotoneY(t)}function Natural(t){this._context=t}Natural.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var i=controlPoints(t),o=controlPoints(e),u=0,d=1;d<n;++u,++d)this._context.bezierCurveTo(i[0][u],o[0][u],i[1][u],o[1][u],t[d],e[d]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function controlPoints(t){var e,n=t.length-1,i,o=new Array(n),u=new Array(n),d=new Array(n);for(o[0]=0,u[0]=2,d[0]=t[0]+2*t[1],e=1;e<n-1;++e)o[e]=1,u[e]=4,d[e]=4*t[e]+2*t[e+1];for(o[n-1]=2,u[n-1]=7,d[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)i=o[e]/u[e-1],u[e]-=i,d[e]-=i*d[e-1];for(o[n-1]=d[n-1]/u[n-1],e=n-2;e>=0;--e)o[e]=(d[e]-o[e+1])/u[e];for(u[n-1]=(t[n]+o[n-1])/2,e=0;e<n-1;++e)u[e]=2*t[e+1]-o[e+1];return[o,u]}function curveNatural(t){return new Natural(t)}function Step(t,e){this._context=t,this._t=e}Step.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function curveStep(t){return new Step(t,.5)}function stepBefore(t){return new Step(t,0)}function stepAfter(t){return new Step(t,1)}function stackOffsetNone(t,e){if((d=t.length)>1)for(var n=1,i,o,u=t[e[0]],d,h=u.length;n<d;++n)for(o=u,u=t[e[n]],i=0;i<h;++i)u[i][1]+=u[i][0]=isNaN(o[i][1])?o[i][0]:o[i][1]}function stackOrderNone(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function stackValue(t,e){return t[e]}function stackSeries(t){const e=[];return e.key=t,e}function shapeStack(){var t=constant$1([]),e=stackOrderNone,n=stackOffsetNone,i=stackValue;function o(u){var d=Array.from(t.apply(this,arguments),stackSeries),h,m=d.length,p=-1,_;for(const f of u)for(h=0,++p;h<m;++h)(d[h][p]=[0,+i(f,d[h].key,p,u)]).data=f;for(h=0,_=array(e(d));h<m;++h)d[_[h]].index=h;return n(d,_),d}return o.keys=function(u){return arguments.length?(t=typeof u=="function"?u:constant$1(Array.from(u)),o):t},o.value=function(u){return arguments.length?(i=typeof u=="function"?u:constant$1(+u),o):i},o.order=function(u){return arguments.length?(e=u==null?stackOrderNone:typeof u=="function"?u:constant$1(Array.from(u)),o):e},o.offset=function(u){return arguments.length?(n=u??stackOffsetNone,o):n},o}function stackOffsetExpand(t,e){if((i=t.length)>0){for(var n,i,o=0,u=t[0].length,d;o<u;++o){for(d=n=0;n<i;++n)d+=t[n][o][1]||0;if(d)for(n=0;n<i;++n)t[n][o][1]/=d}stackOffsetNone(t,e)}}function stackOffsetSilhouette(t,e){if((o=t.length)>0){for(var n=0,i=t[e[0]],o,u=i.length;n<u;++n){for(var d=0,h=0;d<o;++d)h+=t[d][n][1]||0;i[n][1]+=i[n][0]=-h/2}stackOffsetNone(t,e)}}function stackOffsetWiggle(t,e){if(!(!((d=t.length)>0)||!((u=(o=t[e[0]]).length)>0))){for(var n=0,i=1,o,u,d;i<u;++i){for(var h=0,m=0,p=0;h<d;++h){for(var _=t[e[h]],f=_[i][1]||0,l=_[i-1][1]||0,g=(f-l)/2,v=0;v<h;++v){var S=t[e[v]],T=S[i][1]||0,E=S[i-1][1]||0;g+=T-E}m+=f,p+=g*f}o[i-1][1]+=o[i-1][0]=n,m&&(n-=p/m)}o[i-1][1]+=o[i-1][0]=n,stackOffsetNone(t,e)}}function _typeof$I(t){"@babel/helpers - typeof";return _typeof$I=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$I(t)}var _excluded$e=["type","size","sizeType"];function _extends$o(){return _extends$o=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_extends$o.apply(this,arguments)}function ownKeys$B(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$z(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$B(Object(n),!0).forEach(function(i){_defineProperty$H(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$B(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$H(t,e,n){return e=_toPropertyKey$F(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$F(t){var e=_toPrimitive$F(t,"string");return _typeof$I(e)=="symbol"?e:e+""}function _toPrimitive$F(t,e){if(_typeof$I(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(_typeof$I(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _objectWithoutProperties$e(t,e){if(t==null)return{};var n=_objectWithoutPropertiesLoose$e(t,e),i,o;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(o=0;o<u.length;o++)i=u[o],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function _objectWithoutPropertiesLoose$e(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}var symbolFactories={symbolCircle,symbolCross,symbolDiamond,symbolSquare,symbolStar,symbolTriangle,symbolWye},RADIAN$1=Math.PI/180,getSymbolFactory=function(e){var n="symbol".concat(upperFirst(e));return symbolFactories[n]||symbolCircle},calculateAreaSize=function(e,n,i){if(n==="area")return e;switch(i){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var o=18*RADIAN$1;return 1.25*e*e*(Math.tan(o)-Math.tan(o*2)*Math.pow(Math.tan(o),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},registerSymbol=function(e,n){symbolFactories["symbol".concat(upperFirst(e))]=n},Symbols=function(e){var n=e.type,i=n===void 0?"circle":n,o=e.size,u=o===void 0?64:o,d=e.sizeType,h=d===void 0?"area":d,m=_objectWithoutProperties$e(e,_excluded$e),p=_objectSpread$z(_objectSpread$z({},m),{},{type:i,size:u,sizeType:h}),_=function(){var T=getSymbolFactory(i),E=Symbol$1().type(T).size(calculateAreaSize(u,h,i));return E()},f=p.className,l=p.cx,g=p.cy,v=filterProps$1(p,!0);return l===+l&&g===+g&&u===+u?React.createElement("path",_extends$o({},v,{className:clsx("recharts-symbols",f),transform:"translate(".concat(l,", ").concat(g,")"),d:_()})):null};Symbols.registerSymbol=registerSymbol;function _typeof$H(t){"@babel/helpers - typeof";return _typeof$H=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$H(t)}function _extends$n(){return _extends$n=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_extends$n.apply(this,arguments)}function ownKeys$A(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$y(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$A(Object(n),!0).forEach(function(i){_defineProperty$G(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$A(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _classCallCheck$i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties$i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,_toPropertyKey$E(i.key),i)}}function _createClass$i(t,e,n){return e&&_defineProperties$i(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function _callSuper$e(t,e,n){return e=_getPrototypeOf$f(e),_possibleConstructorReturn$f(t,_isNativeReflectConstruct$f()?Reflect.construct(e,n||[],_getPrototypeOf$f(t).constructor):e.apply(t,n))}function _possibleConstructorReturn$f(t,e){if(e&&(_typeof$H(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$f(t)}function _assertThisInitialized$f(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct$f(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$f=function(){return!!t})()}function _getPrototypeOf$f(t){return _getPrototypeOf$f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_getPrototypeOf$f(t)}function _inherits$f(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf$f(t,e)}function _setPrototypeOf$f(t,e){return _setPrototypeOf$f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,o){return i.__proto__=o,i},_setPrototypeOf$f(t,e)}function _defineProperty$G(t,e,n){return e=_toPropertyKey$E(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$E(t){var e=_toPrimitive$E(t,"string");return _typeof$H(e)=="symbol"?e:e+""}function _toPrimitive$E(t,e){if(_typeof$H(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(_typeof$H(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var SIZE=32,DefaultLegendContent=(function(t){function e(){return _classCallCheck$i(this,e),_callSuper$e(this,e,arguments)}return _inherits$f(e,t),_createClass$i(e,[{key:"renderIcon",value:function(i){var o=this.props.inactiveColor,u=SIZE/2,d=SIZE/6,h=SIZE/3,m=i.inactive?o:i.color;if(i.type==="plainline")return React.createElement("line",{strokeWidth:4,fill:"none",stroke:m,strokeDasharray:i.payload.strokeDasharray,x1:0,y1:u,x2:SIZE,y2:u,className:"recharts-legend-icon"});if(i.type==="line")return React.createElement("path",{strokeWidth:4,fill:"none",stroke:m,d:"M0,".concat(u,"h").concat(h,`
            A`).concat(d,",").concat(d,",0,1,1,").concat(2*h,",").concat(u,`
            H`).concat(SIZE,"M").concat(2*h,",").concat(u,`
            A`).concat(d,",").concat(d,",0,1,1,").concat(h,",").concat(u),className:"recharts-legend-icon"});if(i.type==="rect")return React.createElement("path",{stroke:"none",fill:m,d:"M0,".concat(SIZE/8,"h").concat(SIZE,"v").concat(SIZE*3/4,"h").concat(-SIZE,"z"),className:"recharts-legend-icon"});if(React.isValidElement(i.legendIcon)){var p=_objectSpread$y({},i);return delete p.legendIcon,React.cloneElement(i.legendIcon,p)}return React.createElement(Symbols,{fill:m,cx:u,cy:u,size:SIZE,sizeType:"diameter",type:i.type})}},{key:"renderItems",value:function(){var i=this,o=this.props,u=o.payload,d=o.iconSize,h=o.layout,m=o.formatter,p=o.inactiveColor,_={x:0,y:0,width:SIZE,height:SIZE},f={display:h==="horizontal"?"inline-block":"block",marginRight:10},l={display:"inline-block",verticalAlign:"middle",marginRight:4};return u.map(function(g,v){var S=g.formatter||m,T=clsx(_defineProperty$G(_defineProperty$G({"recharts-legend-item":!0},"legend-item-".concat(v),!0),"inactive",g.inactive));if(g.type==="none")return null;var E=isFunction(g.value)?null:g.value;warn(!isFunction(g.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var O=g.inactive?p:g.color;return React.createElement("li",_extends$n({className:T,style:f,key:"legend-item-".concat(v)},adaptEventsOfChild(i.props,g,v)),React.createElement(Surface,{width:d,height:d,viewBox:_,style:l},i.renderIcon(g)),React.createElement("span",{className:"recharts-legend-item-text",style:{color:O}},S?S(E,g,v):E))})}},{key:"render",value:function(){var i=this.props,o=i.payload,u=i.layout,d=i.align;if(!o||!o.length)return null;var h={padding:0,margin:0,textAlign:u==="horizontal"?d:"left"};return React.createElement("ul",{className:"recharts-default-legend",style:h},this.renderItems())}}])})(reactExports.PureComponent);_defineProperty$G(DefaultLegendContent,"displayName","Legend");_defineProperty$G(DefaultLegendContent,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var _stackClear,hasRequired_stackClear;function require_stackClear(){if(hasRequired_stackClear)return _stackClear;hasRequired_stackClear=1;var t=require_ListCache();function e(){this.__data__=new t,this.size=0}return _stackClear=e,_stackClear}var _stackDelete,hasRequired_stackDelete;function require_stackDelete(){if(hasRequired_stackDelete)return _stackDelete;hasRequired_stackDelete=1;function t(e){var n=this.__data__,i=n.delete(e);return this.size=n.size,i}return _stackDelete=t,_stackDelete}var _stackGet,hasRequired_stackGet;function require_stackGet(){if(hasRequired_stackGet)return _stackGet;hasRequired_stackGet=1;function t(e){return this.__data__.get(e)}return _stackGet=t,_stackGet}var _stackHas,hasRequired_stackHas;function require_stackHas(){if(hasRequired_stackHas)return _stackHas;hasRequired_stackHas=1;function t(e){return this.__data__.has(e)}return _stackHas=t,_stackHas}var _stackSet,hasRequired_stackSet;function require_stackSet(){if(hasRequired_stackSet)return _stackSet;hasRequired_stackSet=1;var t=require_ListCache(),e=require_Map(),n=require_MapCache(),i=200;function o(u,d){var h=this.__data__;if(h instanceof t){var m=h.__data__;if(!e||m.length<i-1)return m.push([u,d]),this.size=++h.size,this;h=this.__data__=new n(m)}return h.set(u,d),this.size=h.size,this}return _stackSet=o,_stackSet}var _Stack,hasRequired_Stack;function require_Stack(){if(hasRequired_Stack)return _Stack;hasRequired_Stack=1;var t=require_ListCache(),e=require_stackClear(),n=require_stackDelete(),i=require_stackGet(),o=require_stackHas(),u=require_stackSet();function d(h){var m=this.__data__=new t(h);this.size=m.size}return d.prototype.clear=e,d.prototype.delete=n,d.prototype.get=i,d.prototype.has=o,d.prototype.set=u,_Stack=d,_Stack}var _setCacheAdd,hasRequired_setCacheAdd;function require_setCacheAdd(){if(hasRequired_setCacheAdd)return _setCacheAdd;hasRequired_setCacheAdd=1;var t="__lodash_hash_undefined__";function e(n){return this.__data__.set(n,t),this}return _setCacheAdd=e,_setCacheAdd}var _setCacheHas,hasRequired_setCacheHas;function require_setCacheHas(){if(hasRequired_setCacheHas)return _setCacheHas;hasRequired_setCacheHas=1;function t(e){return this.__data__.has(e)}return _setCacheHas=t,_setCacheHas}var _SetCache,hasRequired_SetCache;function require_SetCache(){if(hasRequired_SetCache)return _SetCache;hasRequired_SetCache=1;var t=require_MapCache(),e=require_setCacheAdd(),n=require_setCacheHas();function i(o){var u=-1,d=o==null?0:o.length;for(this.__data__=new t;++u<d;)this.add(o[u])}return i.prototype.add=i.prototype.push=e,i.prototype.has=n,_SetCache=i,_SetCache}var _arraySome,hasRequired_arraySome;function require_arraySome(){if(hasRequired_arraySome)return _arraySome;hasRequired_arraySome=1;function t(e,n){for(var i=-1,o=e==null?0:e.length;++i<o;)if(n(e[i],i,e))return!0;return!1}return _arraySome=t,_arraySome}var _cacheHas,hasRequired_cacheHas;function require_cacheHas(){if(hasRequired_cacheHas)return _cacheHas;hasRequired_cacheHas=1;function t(e,n){return e.has(n)}return _cacheHas=t,_cacheHas}var _equalArrays,hasRequired_equalArrays;function require_equalArrays(){if(hasRequired_equalArrays)return _equalArrays;hasRequired_equalArrays=1;var t=require_SetCache(),e=require_arraySome(),n=require_cacheHas(),i=1,o=2;function u(d,h,m,p,_,f){var l=m&i,g=d.length,v=h.length;if(g!=v&&!(l&&v>g))return!1;var S=f.get(d),T=f.get(h);if(S&&T)return S==h&&T==d;var E=-1,O=!0,R=m&o?new t:void 0;for(f.set(d,h),f.set(h,d);++E<g;){var M=d[E],C=h[E];if(p)var j=l?p(C,M,E,h,d,f):p(M,C,E,d,h,f);if(j!==void 0){if(j)continue;O=!1;break}if(R){if(!e(h,function($,L){if(!n(R,L)&&(M===$||_(M,$,m,p,f)))return R.push(L)})){O=!1;break}}else if(!(M===C||_(M,C,m,p,f))){O=!1;break}}return f.delete(d),f.delete(h),O}return _equalArrays=u,_equalArrays}var _Uint8Array,hasRequired_Uint8Array;function require_Uint8Array(){if(hasRequired_Uint8Array)return _Uint8Array;hasRequired_Uint8Array=1;var t=require_root(),e=t.Uint8Array;return _Uint8Array=e,_Uint8Array}var _mapToArray,hasRequired_mapToArray;function require_mapToArray(){if(hasRequired_mapToArray)return _mapToArray;hasRequired_mapToArray=1;function t(e){var n=-1,i=Array(e.size);return e.forEach(function(o,u){i[++n]=[u,o]}),i}return _mapToArray=t,_mapToArray}var _setToArray,hasRequired_setToArray;function require_setToArray(){if(hasRequired_setToArray)return _setToArray;hasRequired_setToArray=1;function t(e){var n=-1,i=Array(e.size);return e.forEach(function(o){i[++n]=o}),i}return _setToArray=t,_setToArray}var _equalByTag,hasRequired_equalByTag;function require_equalByTag(){if(hasRequired_equalByTag)return _equalByTag;hasRequired_equalByTag=1;var t=require_Symbol(),e=require_Uint8Array(),n=requireEq(),i=require_equalArrays(),o=require_mapToArray(),u=require_setToArray(),d=1,h=2,m="[object Boolean]",p="[object Date]",_="[object Error]",f="[object Map]",l="[object Number]",g="[object RegExp]",v="[object Set]",S="[object String]",T="[object Symbol]",E="[object ArrayBuffer]",O="[object DataView]",R=t?t.prototype:void 0,M=R?R.valueOf:void 0;function C(j,$,L,N,B,U,H){switch(L){case O:if(j.byteLength!=$.byteLength||j.byteOffset!=$.byteOffset)return!1;j=j.buffer,$=$.buffer;case E:return!(j.byteLength!=$.byteLength||!U(new e(j),new e($)));case m:case p:case l:return n(+j,+$);case _:return j.name==$.name&&j.message==$.message;case g:case S:return j==$+"";case f:var Y=o;case v:var K=N&d;if(Y||(Y=u),j.size!=$.size&&!K)return!1;var z=H.get(j);if(z)return z==$;N|=h,H.set(j,$);var V=i(Y(j),Y($),N,B,U,H);return H.delete(j),V;case T:if(M)return M.call(j)==M.call($)}return!1}return _equalByTag=C,_equalByTag}var _arrayPush,hasRequired_arrayPush;function require_arrayPush(){if(hasRequired_arrayPush)return _arrayPush;hasRequired_arrayPush=1;function t(e,n){for(var i=-1,o=n.length,u=e.length;++i<o;)e[u+i]=n[i];return e}return _arrayPush=t,_arrayPush}var _baseGetAllKeys,hasRequired_baseGetAllKeys;function require_baseGetAllKeys(){if(hasRequired_baseGetAllKeys)return _baseGetAllKeys;hasRequired_baseGetAllKeys=1;var t=require_arrayPush(),e=requireIsArray();function n(i,o,u){var d=o(i);return e(i)?d:t(d,u(i))}return _baseGetAllKeys=n,_baseGetAllKeys}var _arrayFilter,hasRequired_arrayFilter;function require_arrayFilter(){if(hasRequired_arrayFilter)return _arrayFilter;hasRequired_arrayFilter=1;function t(e,n){for(var i=-1,o=e==null?0:e.length,u=0,d=[];++i<o;){var h=e[i];n(h,i,e)&&(d[u++]=h)}return d}return _arrayFilter=t,_arrayFilter}var stubArray_1,hasRequiredStubArray;function requireStubArray(){if(hasRequiredStubArray)return stubArray_1;hasRequiredStubArray=1;function t(){return[]}return stubArray_1=t,stubArray_1}var _getSymbols,hasRequired_getSymbols;function require_getSymbols(){if(hasRequired_getSymbols)return _getSymbols;hasRequired_getSymbols=1;var t=require_arrayFilter(),e=requireStubArray(),n=Object.prototype,i=n.propertyIsEnumerable,o=Object.getOwnPropertySymbols,u=o?function(d){return d==null?[]:(d=Object(d),t(o(d),function(h){return i.call(d,h)}))}:e;return _getSymbols=u,_getSymbols}var _baseTimes,hasRequired_baseTimes;function require_baseTimes(){if(hasRequired_baseTimes)return _baseTimes;hasRequired_baseTimes=1;function t(e,n){for(var i=-1,o=Array(e);++i<e;)o[i]=n(i);return o}return _baseTimes=t,_baseTimes}var _baseIsArguments,hasRequired_baseIsArguments;function require_baseIsArguments(){if(hasRequired_baseIsArguments)return _baseIsArguments;hasRequired_baseIsArguments=1;var t=require_baseGetTag(),e=requireIsObjectLike(),n="[object Arguments]";function i(o){return e(o)&&t(o)==n}return _baseIsArguments=i,_baseIsArguments}var isArguments_1,hasRequiredIsArguments;function requireIsArguments(){if(hasRequiredIsArguments)return isArguments_1;hasRequiredIsArguments=1;var t=require_baseIsArguments(),e=requireIsObjectLike(),n=Object.prototype,i=n.hasOwnProperty,o=n.propertyIsEnumerable,u=t((function(){return arguments})())?t:function(d){return e(d)&&i.call(d,"callee")&&!o.call(d,"callee")};return isArguments_1=u,isArguments_1}var isBuffer={exports:{}},stubFalse_1,hasRequiredStubFalse;function requireStubFalse(){if(hasRequiredStubFalse)return stubFalse_1;hasRequiredStubFalse=1;function t(){return!1}return stubFalse_1=t,stubFalse_1}isBuffer.exports;var hasRequiredIsBuffer;function requireIsBuffer(){return hasRequiredIsBuffer||(hasRequiredIsBuffer=1,(function(t,e){var n=require_root(),i=requireStubFalse(),o=e&&!e.nodeType&&e,u=o&&!0&&t&&!t.nodeType&&t,d=u&&u.exports===o,h=d?n.Buffer:void 0,m=h?h.isBuffer:void 0,p=m||i;t.exports=p})(isBuffer,isBuffer.exports)),isBuffer.exports}var _isIndex,hasRequired_isIndex;function require_isIndex(){if(hasRequired_isIndex)return _isIndex;hasRequired_isIndex=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function n(i,o){var u=typeof i;return o=o??t,!!o&&(u=="number"||u!="symbol"&&e.test(i))&&i>-1&&i%1==0&&i<o}return _isIndex=n,_isIndex}var isLength_1,hasRequiredIsLength;function requireIsLength(){if(hasRequiredIsLength)return isLength_1;hasRequiredIsLength=1;var t=9007199254740991;function e(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=t}return isLength_1=e,isLength_1}var _baseIsTypedArray,hasRequired_baseIsTypedArray;function require_baseIsTypedArray(){if(hasRequired_baseIsTypedArray)return _baseIsTypedArray;hasRequired_baseIsTypedArray=1;var t=require_baseGetTag(),e=requireIsLength(),n=requireIsObjectLike(),i="[object Arguments]",o="[object Array]",u="[object Boolean]",d="[object Date]",h="[object Error]",m="[object Function]",p="[object Map]",_="[object Number]",f="[object Object]",l="[object RegExp]",g="[object Set]",v="[object String]",S="[object WeakMap]",T="[object ArrayBuffer]",E="[object DataView]",O="[object Float32Array]",R="[object Float64Array]",M="[object Int8Array]",C="[object Int16Array]",j="[object Int32Array]",$="[object Uint8Array]",L="[object Uint8ClampedArray]",N="[object Uint16Array]",B="[object Uint32Array]",U={};U[O]=U[R]=U[M]=U[C]=U[j]=U[$]=U[L]=U[N]=U[B]=!0,U[i]=U[o]=U[T]=U[u]=U[E]=U[d]=U[h]=U[m]=U[p]=U[_]=U[f]=U[l]=U[g]=U[v]=U[S]=!1;function H(Y){return n(Y)&&e(Y.length)&&!!U[t(Y)]}return _baseIsTypedArray=H,_baseIsTypedArray}var _baseUnary,hasRequired_baseUnary;function require_baseUnary(){if(hasRequired_baseUnary)return _baseUnary;hasRequired_baseUnary=1;function t(e){return function(n){return e(n)}}return _baseUnary=t,_baseUnary}var _nodeUtil={exports:{}};_nodeUtil.exports;var hasRequired_nodeUtil;function require_nodeUtil(){return hasRequired_nodeUtil||(hasRequired_nodeUtil=1,(function(t,e){var n=require_freeGlobal(),i=e&&!e.nodeType&&e,o=i&&!0&&t&&!t.nodeType&&t,u=o&&o.exports===i,d=u&&n.process,h=(function(){try{var m=o&&o.require&&o.require("util").types;return m||d&&d.binding&&d.binding("util")}catch{}})();t.exports=h})(_nodeUtil,_nodeUtil.exports)),_nodeUtil.exports}var isTypedArray_1,hasRequiredIsTypedArray;function requireIsTypedArray(){if(hasRequiredIsTypedArray)return isTypedArray_1;hasRequiredIsTypedArray=1;var t=require_baseIsTypedArray(),e=require_baseUnary(),n=require_nodeUtil(),i=n&&n.isTypedArray,o=i?e(i):t;return isTypedArray_1=o,isTypedArray_1}var _arrayLikeKeys,hasRequired_arrayLikeKeys;function require_arrayLikeKeys(){if(hasRequired_arrayLikeKeys)return _arrayLikeKeys;hasRequired_arrayLikeKeys=1;var t=require_baseTimes(),e=requireIsArguments(),n=requireIsArray(),i=requireIsBuffer(),o=require_isIndex(),u=requireIsTypedArray(),d=Object.prototype,h=d.hasOwnProperty;function m(p,_){var f=n(p),l=!f&&e(p),g=!f&&!l&&i(p),v=!f&&!l&&!g&&u(p),S=f||l||g||v,T=S?t(p.length,String):[],E=T.length;for(var O in p)(_||h.call(p,O))&&!(S&&(O=="length"||g&&(O=="offset"||O=="parent")||v&&(O=="buffer"||O=="byteLength"||O=="byteOffset")||o(O,E)))&&T.push(O);return T}return _arrayLikeKeys=m,_arrayLikeKeys}var _isPrototype,hasRequired_isPrototype;function require_isPrototype(){if(hasRequired_isPrototype)return _isPrototype;hasRequired_isPrototype=1;var t=Object.prototype;function e(n){var i=n&&n.constructor,o=typeof i=="function"&&i.prototype||t;return n===o}return _isPrototype=e,_isPrototype}var _overArg,hasRequired_overArg;function require_overArg(){if(hasRequired_overArg)return _overArg;hasRequired_overArg=1;function t(e,n){return function(i){return e(n(i))}}return _overArg=t,_overArg}var _nativeKeys,hasRequired_nativeKeys;function require_nativeKeys(){if(hasRequired_nativeKeys)return _nativeKeys;hasRequired_nativeKeys=1;var t=require_overArg(),e=t(Object.keys,Object);return _nativeKeys=e,_nativeKeys}var _baseKeys,hasRequired_baseKeys;function require_baseKeys(){if(hasRequired_baseKeys)return _baseKeys;hasRequired_baseKeys=1;var t=require_isPrototype(),e=require_nativeKeys(),n=Object.prototype,i=n.hasOwnProperty;function o(u){if(!t(u))return e(u);var d=[];for(var h in Object(u))i.call(u,h)&&h!="constructor"&&d.push(h);return d}return _baseKeys=o,_baseKeys}var isArrayLike_1,hasRequiredIsArrayLike;function requireIsArrayLike(){if(hasRequiredIsArrayLike)return isArrayLike_1;hasRequiredIsArrayLike=1;var t=requireIsFunction(),e=requireIsLength();function n(i){return i!=null&&e(i.length)&&!t(i)}return isArrayLike_1=n,isArrayLike_1}var keys_1,hasRequiredKeys;function requireKeys(){if(hasRequiredKeys)return keys_1;hasRequiredKeys=1;var t=require_arrayLikeKeys(),e=require_baseKeys(),n=requireIsArrayLike();function i(o){return n(o)?t(o):e(o)}return keys_1=i,keys_1}var _getAllKeys,hasRequired_getAllKeys;function require_getAllKeys(){if(hasRequired_getAllKeys)return _getAllKeys;hasRequired_getAllKeys=1;var t=require_baseGetAllKeys(),e=require_getSymbols(),n=requireKeys();function i(o){return t(o,n,e)}return _getAllKeys=i,_getAllKeys}var _equalObjects,hasRequired_equalObjects;function require_equalObjects(){if(hasRequired_equalObjects)return _equalObjects;hasRequired_equalObjects=1;var t=require_getAllKeys(),e=1,n=Object.prototype,i=n.hasOwnProperty;function o(u,d,h,m,p,_){var f=h&e,l=t(u),g=l.length,v=t(d),S=v.length;if(g!=S&&!f)return!1;for(var T=g;T--;){var E=l[T];if(!(f?E in d:i.call(d,E)))return!1}var O=_.get(u),R=_.get(d);if(O&&R)return O==d&&R==u;var M=!0;_.set(u,d),_.set(d,u);for(var C=f;++T<g;){E=l[T];var j=u[E],$=d[E];if(m)var L=f?m($,j,E,d,u,_):m(j,$,E,u,d,_);if(!(L===void 0?j===$||p(j,$,h,m,_):L)){M=!1;break}C||(C=E=="constructor")}if(M&&!C){var N=u.constructor,B=d.constructor;N!=B&&"constructor"in u&&"constructor"in d&&!(typeof N=="function"&&N instanceof N&&typeof B=="function"&&B instanceof B)&&(M=!1)}return _.delete(u),_.delete(d),M}return _equalObjects=o,_equalObjects}var _DataView,hasRequired_DataView;function require_DataView(){if(hasRequired_DataView)return _DataView;hasRequired_DataView=1;var t=require_getNative(),e=require_root(),n=t(e,"DataView");return _DataView=n,_DataView}var _Promise,hasRequired_Promise;function require_Promise(){if(hasRequired_Promise)return _Promise;hasRequired_Promise=1;var t=require_getNative(),e=require_root(),n=t(e,"Promise");return _Promise=n,_Promise}var _Set,hasRequired_Set;function require_Set(){if(hasRequired_Set)return _Set;hasRequired_Set=1;var t=require_getNative(),e=require_root(),n=t(e,"Set");return _Set=n,_Set}var _WeakMap,hasRequired_WeakMap;function require_WeakMap(){if(hasRequired_WeakMap)return _WeakMap;hasRequired_WeakMap=1;var t=require_getNative(),e=require_root(),n=t(e,"WeakMap");return _WeakMap=n,_WeakMap}var _getTag,hasRequired_getTag;function require_getTag(){if(hasRequired_getTag)return _getTag;hasRequired_getTag=1;var t=require_DataView(),e=require_Map(),n=require_Promise(),i=require_Set(),o=require_WeakMap(),u=require_baseGetTag(),d=require_toSource(),h="[object Map]",m="[object Object]",p="[object Promise]",_="[object Set]",f="[object WeakMap]",l="[object DataView]",g=d(t),v=d(e),S=d(n),T=d(i),E=d(o),O=u;return(t&&O(new t(new ArrayBuffer(1)))!=l||e&&O(new e)!=h||n&&O(n.resolve())!=p||i&&O(new i)!=_||o&&O(new o)!=f)&&(O=function(R){var M=u(R),C=M==m?R.constructor:void 0,j=C?d(C):"";if(j)switch(j){case g:return l;case v:return h;case S:return p;case T:return _;case E:return f}return M}),_getTag=O,_getTag}var _baseIsEqualDeep,hasRequired_baseIsEqualDeep;function require_baseIsEqualDeep(){if(hasRequired_baseIsEqualDeep)return _baseIsEqualDeep;hasRequired_baseIsEqualDeep=1;var t=require_Stack(),e=require_equalArrays(),n=require_equalByTag(),i=require_equalObjects(),o=require_getTag(),u=requireIsArray(),d=requireIsBuffer(),h=requireIsTypedArray(),m=1,p="[object Arguments]",_="[object Array]",f="[object Object]",l=Object.prototype,g=l.hasOwnProperty;function v(S,T,E,O,R,M){var C=u(S),j=u(T),$=C?_:o(S),L=j?_:o(T);$=$==p?f:$,L=L==p?f:L;var N=$==f,B=L==f,U=$==L;if(U&&d(S)){if(!d(T))return!1;C=!0,N=!1}if(U&&!N)return M||(M=new t),C||h(S)?e(S,T,E,O,R,M):n(S,T,$,E,O,R,M);if(!(E&m)){var H=N&&g.call(S,"__wrapped__"),Y=B&&g.call(T,"__wrapped__");if(H||Y){var K=H?S.value():S,z=Y?T.value():T;return M||(M=new t),R(K,z,E,O,M)}}return U?(M||(M=new t),i(S,T,E,O,R,M)):!1}return _baseIsEqualDeep=v,_baseIsEqualDeep}var _baseIsEqual,hasRequired_baseIsEqual;function require_baseIsEqual(){if(hasRequired_baseIsEqual)return _baseIsEqual;hasRequired_baseIsEqual=1;var t=require_baseIsEqualDeep(),e=requireIsObjectLike();function n(i,o,u,d,h){return i===o?!0:i==null||o==null||!e(i)&&!e(o)?i!==i&&o!==o:t(i,o,u,d,n,h)}return _baseIsEqual=n,_baseIsEqual}var _baseIsMatch,hasRequired_baseIsMatch;function require_baseIsMatch(){if(hasRequired_baseIsMatch)return _baseIsMatch;hasRequired_baseIsMatch=1;var t=require_Stack(),e=require_baseIsEqual(),n=1,i=2;function o(u,d,h,m){var p=h.length,_=p,f=!m;if(u==null)return!_;for(u=Object(u);p--;){var l=h[p];if(f&&l[2]?l[1]!==u[l[0]]:!(l[0]in u))return!1}for(;++p<_;){l=h[p];var g=l[0],v=u[g],S=l[1];if(f&&l[2]){if(v===void 0&&!(g in u))return!1}else{var T=new t;if(m)var E=m(v,S,g,u,d,T);if(!(E===void 0?e(S,v,n|i,m,T):E))return!1}}return!0}return _baseIsMatch=o,_baseIsMatch}var _isStrictComparable,hasRequired_isStrictComparable;function require_isStrictComparable(){if(hasRequired_isStrictComparable)return _isStrictComparable;hasRequired_isStrictComparable=1;var t=requireIsObject();function e(n){return n===n&&!t(n)}return _isStrictComparable=e,_isStrictComparable}var _getMatchData,hasRequired_getMatchData;function require_getMatchData(){if(hasRequired_getMatchData)return _getMatchData;hasRequired_getMatchData=1;var t=require_isStrictComparable(),e=requireKeys();function n(i){for(var o=e(i),u=o.length;u--;){var d=o[u],h=i[d];o[u]=[d,h,t(h)]}return o}return _getMatchData=n,_getMatchData}var _matchesStrictComparable,hasRequired_matchesStrictComparable;function require_matchesStrictComparable(){if(hasRequired_matchesStrictComparable)return _matchesStrictComparable;hasRequired_matchesStrictComparable=1;function t(e,n){return function(i){return i==null?!1:i[e]===n&&(n!==void 0||e in Object(i))}}return _matchesStrictComparable=t,_matchesStrictComparable}var _baseMatches,hasRequired_baseMatches;function require_baseMatches(){if(hasRequired_baseMatches)return _baseMatches;hasRequired_baseMatches=1;var t=require_baseIsMatch(),e=require_getMatchData(),n=require_matchesStrictComparable();function i(o){var u=e(o);return u.length==1&&u[0][2]?n(u[0][0],u[0][1]):function(d){return d===o||t(d,o,u)}}return _baseMatches=i,_baseMatches}var _baseHasIn,hasRequired_baseHasIn;function require_baseHasIn(){if(hasRequired_baseHasIn)return _baseHasIn;hasRequired_baseHasIn=1;function t(e,n){return e!=null&&n in Object(e)}return _baseHasIn=t,_baseHasIn}var _hasPath,hasRequired_hasPath;function require_hasPath(){if(hasRequired_hasPath)return _hasPath;hasRequired_hasPath=1;var t=require_castPath(),e=requireIsArguments(),n=requireIsArray(),i=require_isIndex(),o=requireIsLength(),u=require_toKey();function d(h,m,p){m=t(m,h);for(var _=-1,f=m.length,l=!1;++_<f;){var g=u(m[_]);if(!(l=h!=null&&p(h,g)))break;h=h[g]}return l||++_!=f?l:(f=h==null?0:h.length,!!f&&o(f)&&i(g,f)&&(n(h)||e(h)))}return _hasPath=d,_hasPath}var hasIn_1,hasRequiredHasIn;function requireHasIn(){if(hasRequiredHasIn)return hasIn_1;hasRequiredHasIn=1;var t=require_baseHasIn(),e=require_hasPath();function n(i,o){return i!=null&&e(i,o,t)}return hasIn_1=n,hasIn_1}var _baseMatchesProperty,hasRequired_baseMatchesProperty;function require_baseMatchesProperty(){if(hasRequired_baseMatchesProperty)return _baseMatchesProperty;hasRequired_baseMatchesProperty=1;var t=require_baseIsEqual(),e=requireGet(),n=requireHasIn(),i=require_isKey(),o=require_isStrictComparable(),u=require_matchesStrictComparable(),d=require_toKey(),h=1,m=2;function p(_,f){return i(_)&&o(f)?u(d(_),f):function(l){var g=e(l,_);return g===void 0&&g===f?n(l,_):t(f,g,h|m)}}return _baseMatchesProperty=p,_baseMatchesProperty}var identity_1,hasRequiredIdentity;function requireIdentity(){if(hasRequiredIdentity)return identity_1;hasRequiredIdentity=1;function t(e){return e}return identity_1=t,identity_1}var _baseProperty,hasRequired_baseProperty;function require_baseProperty(){if(hasRequired_baseProperty)return _baseProperty;hasRequired_baseProperty=1;function t(e){return function(n){return n?.[e]}}return _baseProperty=t,_baseProperty}var _basePropertyDeep,hasRequired_basePropertyDeep;function require_basePropertyDeep(){if(hasRequired_basePropertyDeep)return _basePropertyDeep;hasRequired_basePropertyDeep=1;var t=require_baseGet();function e(n){return function(i){return t(i,n)}}return _basePropertyDeep=e,_basePropertyDeep}var property_1,hasRequiredProperty;function requireProperty(){if(hasRequiredProperty)return property_1;hasRequiredProperty=1;var t=require_baseProperty(),e=require_basePropertyDeep(),n=require_isKey(),i=require_toKey();function o(u){return n(u)?t(i(u)):e(u)}return property_1=o,property_1}var _baseIteratee,hasRequired_baseIteratee;function require_baseIteratee(){if(hasRequired_baseIteratee)return _baseIteratee;hasRequired_baseIteratee=1;var t=require_baseMatches(),e=require_baseMatchesProperty(),n=requireIdentity(),i=requireIsArray(),o=requireProperty();function u(d){return typeof d=="function"?d:d==null?n:typeof d=="object"?i(d)?e(d[0],d[1]):t(d):o(d)}return _baseIteratee=u,_baseIteratee}var _baseFindIndex,hasRequired_baseFindIndex;function require_baseFindIndex(){if(hasRequired_baseFindIndex)return _baseFindIndex;hasRequired_baseFindIndex=1;function t(e,n,i,o){for(var u=e.length,d=i+(o?1:-1);o?d--:++d<u;)if(n(e[d],d,e))return d;return-1}return _baseFindIndex=t,_baseFindIndex}var _baseIsNaN,hasRequired_baseIsNaN;function require_baseIsNaN(){if(hasRequired_baseIsNaN)return _baseIsNaN;hasRequired_baseIsNaN=1;function t(e){return e!==e}return _baseIsNaN=t,_baseIsNaN}var _strictIndexOf,hasRequired_strictIndexOf;function require_strictIndexOf(){if(hasRequired_strictIndexOf)return _strictIndexOf;hasRequired_strictIndexOf=1;function t(e,n,i){for(var o=i-1,u=e.length;++o<u;)if(e[o]===n)return o;return-1}return _strictIndexOf=t,_strictIndexOf}var _baseIndexOf,hasRequired_baseIndexOf;function require_baseIndexOf(){if(hasRequired_baseIndexOf)return _baseIndexOf;hasRequired_baseIndexOf=1;var t=require_baseFindIndex(),e=require_baseIsNaN(),n=require_strictIndexOf();function i(o,u,d){return u===u?n(o,u,d):t(o,e,d)}return _baseIndexOf=i,_baseIndexOf}var _arrayIncludes,hasRequired_arrayIncludes;function require_arrayIncludes(){if(hasRequired_arrayIncludes)return _arrayIncludes;hasRequired_arrayIncludes=1;var t=require_baseIndexOf();function e(n,i){var o=n==null?0:n.length;return!!o&&t(n,i,0)>-1}return _arrayIncludes=e,_arrayIncludes}var _arrayIncludesWith,hasRequired_arrayIncludesWith;function require_arrayIncludesWith(){if(hasRequired_arrayIncludesWith)return _arrayIncludesWith;hasRequired_arrayIncludesWith=1;function t(e,n,i){for(var o=-1,u=e==null?0:e.length;++o<u;)if(i(n,e[o]))return!0;return!1}return _arrayIncludesWith=t,_arrayIncludesWith}var noop_1,hasRequiredNoop;function requireNoop(){if(hasRequiredNoop)return noop_1;hasRequiredNoop=1;function t(){}return noop_1=t,noop_1}var _createSet,hasRequired_createSet;function require_createSet(){if(hasRequired_createSet)return _createSet;hasRequired_createSet=1;var t=require_Set(),e=requireNoop(),n=require_setToArray(),i=1/0,o=t&&1/n(new t([,-0]))[1]==i?function(u){return new t(u)}:e;return _createSet=o,_createSet}var _baseUniq,hasRequired_baseUniq;function require_baseUniq(){if(hasRequired_baseUniq)return _baseUniq;hasRequired_baseUniq=1;var t=require_SetCache(),e=require_arrayIncludes(),n=require_arrayIncludesWith(),i=require_cacheHas(),o=require_createSet(),u=require_setToArray(),d=200;function h(m,p,_){var f=-1,l=e,g=m.length,v=!0,S=[],T=S;if(_)v=!1,l=n;else if(g>=d){var E=p?null:o(m);if(E)return u(E);v=!1,l=i,T=new t}else T=p?[]:S;e:for(;++f<g;){var O=m[f],R=p?p(O):O;if(O=_||O!==0?O:0,v&&R===R){for(var M=T.length;M--;)if(T[M]===R)continue e;p&&T.push(R),S.push(O)}else l(T,R,_)||(T!==S&&T.push(R),S.push(O))}return S}return _baseUniq=h,_baseUniq}var uniqBy_1,hasRequiredUniqBy;function requireUniqBy(){if(hasRequiredUniqBy)return uniqBy_1;hasRequiredUniqBy=1;var t=require_baseIteratee(),e=require_baseUniq();function n(i,o){return i&&i.length?e(i,t(o,2)):[]}return uniqBy_1=n,uniqBy_1}var uniqByExports=requireUniqBy();const uniqBy=getDefaultExportFromCjs(uniqByExports);function getUniqPayload(t,e,n){return e===!0?uniqBy(t,n):isFunction(e)?uniqBy(t,e):t}function _typeof$G(t){"@babel/helpers - typeof";return _typeof$G=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$G(t)}var _excluded$d=["ref"];function ownKeys$z(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$x(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$z(Object(n),!0).forEach(function(i){_defineProperty$F(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$z(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _classCallCheck$h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties$h(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,_toPropertyKey$D(i.key),i)}}function _createClass$h(t,e,n){return e&&_defineProperties$h(t.prototype,e),n&&_defineProperties$h(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function _callSuper$d(t,e,n){return e=_getPrototypeOf$e(e),_possibleConstructorReturn$e(t,_isNativeReflectConstruct$e()?Reflect.construct(e,n||[],_getPrototypeOf$e(t).constructor):e.apply(t,n))}function _possibleConstructorReturn$e(t,e){if(e&&(_typeof$G(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$e(t)}function _assertThisInitialized$e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct$e(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$e=function(){return!!t})()}function _getPrototypeOf$e(t){return _getPrototypeOf$e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_getPrototypeOf$e(t)}function _inherits$e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf$e(t,e)}function _setPrototypeOf$e(t,e){return _setPrototypeOf$e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,o){return i.__proto__=o,i},_setPrototypeOf$e(t,e)}function _defineProperty$F(t,e,n){return e=_toPropertyKey$D(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$D(t){var e=_toPrimitive$D(t,"string");return _typeof$G(e)=="symbol"?e:e+""}function _toPrimitive$D(t,e){if(_typeof$G(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(_typeof$G(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function _objectWithoutProperties$d(t,e){if(t==null)return{};var n=_objectWithoutPropertiesLoose$d(t,e),i,o;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(o=0;o<u.length;o++)i=u[o],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function _objectWithoutPropertiesLoose$d(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function defaultUniqBy$1(t){return t.value}function renderContent$1(t,e){if(React.isValidElement(t))return React.cloneElement(t,e);if(typeof t=="function")return React.createElement(t,e);e.ref;var n=_objectWithoutProperties$d(e,_excluded$d);return React.createElement(DefaultLegendContent,n)}var EPS$1=1,Legend=(function(t){function e(){var n;_classCallCheck$h(this,e);for(var i=arguments.length,o=new Array(i),u=0;u<i;u++)o[u]=arguments[u];return n=_callSuper$d(this,e,[].concat(o)),_defineProperty$F(n,"lastBoundingBox",{width:-1,height:-1}),n}return _inherits$e(e,t),_createClass$h(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var i=this.wrapperNode.getBoundingClientRect();return i.height=this.wrapperNode.offsetHeight,i.width=this.wrapperNode.offsetWidth,i}return null}},{key:"updateBBox",value:function(){var i=this.props.onBBoxUpdate,o=this.getBBox();o?(Math.abs(o.width-this.lastBoundingBox.width)>EPS$1||Math.abs(o.height-this.lastBoundingBox.height)>EPS$1)&&(this.lastBoundingBox.width=o.width,this.lastBoundingBox.height=o.height,i&&i(o)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,i&&i(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?_objectSpread$x({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(i){var o=this.props,u=o.layout,d=o.align,h=o.verticalAlign,m=o.margin,p=o.chartWidth,_=o.chartHeight,f,l;if(!i||(i.left===void 0||i.left===null)&&(i.right===void 0||i.right===null))if(d==="center"&&u==="vertical"){var g=this.getBBoxSnapshot();f={left:((p||0)-g.width)/2}}else f=d==="right"?{right:m&&m.right||0}:{left:m&&m.left||0};if(!i||(i.top===void 0||i.top===null)&&(i.bottom===void 0||i.bottom===null))if(h==="middle"){var v=this.getBBoxSnapshot();l={top:((_||0)-v.height)/2}}else l=h==="bottom"?{bottom:m&&m.bottom||0}:{top:m&&m.top||0};return _objectSpread$x(_objectSpread$x({},f),l)}},{key:"render",value:function(){var i=this,o=this.props,u=o.content,d=o.width,h=o.height,m=o.wrapperStyle,p=o.payloadUniqBy,_=o.payload,f=_objectSpread$x(_objectSpread$x({position:"absolute",width:d||"auto",height:h||"auto"},this.getDefaultPosition(m)),m);return React.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(g){i.wrapperNode=g}},renderContent$1(u,_objectSpread$x(_objectSpread$x({},this.props),{},{payload:getUniqPayload(_,p,defaultUniqBy$1)})))}}],[{key:"getWithHeight",value:function(i,o){var u=_objectSpread$x(_objectSpread$x({},this.defaultProps),i.props),d=u.layout;return d==="vertical"&&isNumber(i.props.height)?{height:i.props.height}:d==="horizontal"?{width:i.props.width||o}:null}}])})(reactExports.PureComponent);_defineProperty$F(Legend,"displayName","Legend");_defineProperty$F(Legend,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var _isFlattenable,hasRequired_isFlattenable;function require_isFlattenable(){if(hasRequired_isFlattenable)return _isFlattenable;hasRequired_isFlattenable=1;var t=require_Symbol(),e=requireIsArguments(),n=requireIsArray(),i=t?t.isConcatSpreadable:void 0;function o(u){return n(u)||e(u)||!!(i&&u&&u[i])}return _isFlattenable=o,_isFlattenable}var _baseFlatten,hasRequired_baseFlatten;function require_baseFlatten(){if(hasRequired_baseFlatten)return _baseFlatten;hasRequired_baseFlatten=1;var t=require_arrayPush(),e=require_isFlattenable();function n(i,o,u,d,h){var m=-1,p=i.length;for(u||(u=e),h||(h=[]);++m<p;){var _=i[m];o>0&&u(_)?o>1?n(_,o-1,u,d,h):t(h,_):d||(h[h.length]=_)}return h}return _baseFlatten=n,_baseFlatten}var _createBaseFor,hasRequired_createBaseFor;function require_createBaseFor(){if(hasRequired_createBaseFor)return _createBaseFor;hasRequired_createBaseFor=1;function t(e){return function(n,i,o){for(var u=-1,d=Object(n),h=o(n),m=h.length;m--;){var p=h[e?m:++u];if(i(d[p],p,d)===!1)break}return n}}return _createBaseFor=t,_createBaseFor}var _baseFor,hasRequired_baseFor;function require_baseFor(){if(hasRequired_baseFor)return _baseFor;hasRequired_baseFor=1;var t=require_createBaseFor(),e=t();return _baseFor=e,_baseFor}var _baseForOwn,hasRequired_baseForOwn;function require_baseForOwn(){if(hasRequired_baseForOwn)return _baseForOwn;hasRequired_baseForOwn=1;var t=require_baseFor(),e=requireKeys();function n(i,o){return i&&t(i,o,e)}return _baseForOwn=n,_baseForOwn}var _createBaseEach,hasRequired_createBaseEach;function require_createBaseEach(){if(hasRequired_createBaseEach)return _createBaseEach;hasRequired_createBaseEach=1;var t=requireIsArrayLike();function e(n,i){return function(o,u){if(o==null)return o;if(!t(o))return n(o,u);for(var d=o.length,h=i?d:-1,m=Object(o);(i?h--:++h<d)&&u(m[h],h,m)!==!1;);return o}}return _createBaseEach=e,_createBaseEach}var _baseEach,hasRequired_baseEach;function require_baseEach(){if(hasRequired_baseEach)return _baseEach;hasRequired_baseEach=1;var t=require_baseForOwn(),e=require_createBaseEach(),n=e(t);return _baseEach=n,_baseEach}var _baseMap,hasRequired_baseMap;function require_baseMap(){if(hasRequired_baseMap)return _baseMap;hasRequired_baseMap=1;var t=require_baseEach(),e=requireIsArrayLike();function n(i,o){var u=-1,d=e(i)?Array(i.length):[];return t(i,function(h,m,p){d[++u]=o(h,m,p)}),d}return _baseMap=n,_baseMap}var _baseSortBy,hasRequired_baseSortBy;function require_baseSortBy(){if(hasRequired_baseSortBy)return _baseSortBy;hasRequired_baseSortBy=1;function t(e,n){var i=e.length;for(e.sort(n);i--;)e[i]=e[i].value;return e}return _baseSortBy=t,_baseSortBy}var _compareAscending,hasRequired_compareAscending;function require_compareAscending(){if(hasRequired_compareAscending)return _compareAscending;hasRequired_compareAscending=1;var t=requireIsSymbol();function e(n,i){if(n!==i){var o=n!==void 0,u=n===null,d=n===n,h=t(n),m=i!==void 0,p=i===null,_=i===i,f=t(i);if(!p&&!f&&!h&&n>i||h&&m&&_&&!p&&!f||u&&m&&_||!o&&_||!d)return 1;if(!u&&!h&&!f&&n<i||f&&o&&d&&!u&&!h||p&&o&&d||!m&&d||!_)return-1}return 0}return _compareAscending=e,_compareAscending}var _compareMultiple,hasRequired_compareMultiple;function require_compareMultiple(){if(hasRequired_compareMultiple)return _compareMultiple;hasRequired_compareMultiple=1;var t=require_compareAscending();function e(n,i,o){for(var u=-1,d=n.criteria,h=i.criteria,m=d.length,p=o.length;++u<m;){var _=t(d[u],h[u]);if(_){if(u>=p)return _;var f=o[u];return _*(f=="desc"?-1:1)}}return n.index-i.index}return _compareMultiple=e,_compareMultiple}var _baseOrderBy,hasRequired_baseOrderBy;function require_baseOrderBy(){if(hasRequired_baseOrderBy)return _baseOrderBy;hasRequired_baseOrderBy=1;var t=require_arrayMap(),e=require_baseGet(),n=require_baseIteratee(),i=require_baseMap(),o=require_baseSortBy(),u=require_baseUnary(),d=require_compareMultiple(),h=requireIdentity(),m=requireIsArray();function p(_,f,l){f.length?f=t(f,function(S){return m(S)?function(T){return e(T,S.length===1?S[0]:S)}:S}):f=[h];var g=-1;f=t(f,u(n));var v=i(_,function(S,T,E){var O=t(f,function(R){return R(S)});return{criteria:O,index:++g,value:S}});return o(v,function(S,T){return d(S,T,l)})}return _baseOrderBy=p,_baseOrderBy}var _apply,hasRequired_apply;function require_apply(){if(hasRequired_apply)return _apply;hasRequired_apply=1;function t(e,n,i){switch(i.length){case 0:return e.call(n);case 1:return e.call(n,i[0]);case 2:return e.call(n,i[0],i[1]);case 3:return e.call(n,i[0],i[1],i[2])}return e.apply(n,i)}return _apply=t,_apply}var _overRest,hasRequired_overRest;function require_overRest(){if(hasRequired_overRest)return _overRest;hasRequired_overRest=1;var t=require_apply(),e=Math.max;function n(i,o,u){return o=e(o===void 0?i.length-1:o,0),function(){for(var d=arguments,h=-1,m=e(d.length-o,0),p=Array(m);++h<m;)p[h]=d[o+h];h=-1;for(var _=Array(o+1);++h<o;)_[h]=d[h];return _[o]=u(p),t(i,this,_)}}return _overRest=n,_overRest}var constant_1,hasRequiredConstant;function requireConstant(){if(hasRequiredConstant)return constant_1;hasRequiredConstant=1;function t(e){return function(){return e}}return constant_1=t,constant_1}var _defineProperty$E,hasRequired_defineProperty;function require_defineProperty(){if(hasRequired_defineProperty)return _defineProperty$E;hasRequired_defineProperty=1;var t=require_getNative(),e=(function(){try{var n=t(Object,"defineProperty");return n({},"",{}),n}catch{}})();return _defineProperty$E=e,_defineProperty$E}var _baseSetToString,hasRequired_baseSetToString;function require_baseSetToString(){if(hasRequired_baseSetToString)return _baseSetToString;hasRequired_baseSetToString=1;var t=requireConstant(),e=require_defineProperty(),n=requireIdentity(),i=e?function(o,u){return e(o,"toString",{configurable:!0,enumerable:!1,value:t(u),writable:!0})}:n;return _baseSetToString=i,_baseSetToString}var _shortOut,hasRequired_shortOut;function require_shortOut(){if(hasRequired_shortOut)return _shortOut;hasRequired_shortOut=1;var t=800,e=16,n=Date.now;function i(o){var u=0,d=0;return function(){var h=n(),m=e-(h-d);if(d=h,m>0){if(++u>=t)return arguments[0]}else u=0;return o.apply(void 0,arguments)}}return _shortOut=i,_shortOut}var _setToString,hasRequired_setToString;function require_setToString(){if(hasRequired_setToString)return _setToString;hasRequired_setToString=1;var t=require_baseSetToString(),e=require_shortOut(),n=e(t);return _setToString=n,_setToString}var _baseRest,hasRequired_baseRest;function require_baseRest(){if(hasRequired_baseRest)return _baseRest;hasRequired_baseRest=1;var t=requireIdentity(),e=require_overRest(),n=require_setToString();function i(o,u){return n(e(o,u,t),o+"")}return _baseRest=i,_baseRest}var _isIterateeCall,hasRequired_isIterateeCall;function require_isIterateeCall(){if(hasRequired_isIterateeCall)return _isIterateeCall;hasRequired_isIterateeCall=1;var t=requireEq(),e=requireIsArrayLike(),n=require_isIndex(),i=requireIsObject();function o(u,d,h){if(!i(h))return!1;var m=typeof d;return(m=="number"?e(h)&&n(d,h.length):m=="string"&&d in h)?t(h[d],u):!1}return _isIterateeCall=o,_isIterateeCall}var sortBy_1,hasRequiredSortBy;function requireSortBy(){if(hasRequiredSortBy)return sortBy_1;hasRequiredSortBy=1;var t=require_baseFlatten(),e=require_baseOrderBy(),n=require_baseRest(),i=require_isIterateeCall(),o=n(function(u,d){if(u==null)return[];var h=d.length;return h>1&&i(u,d[0],d[1])?d=[]:h>2&&i(d[0],d[1],d[2])&&(d=[d[0]]),e(u,t(d,1),[])});return sortBy_1=o,sortBy_1}var sortByExports=requireSortBy();const sortBy=getDefaultExportFromCjs(sortByExports);function _typeof$F(t){"@babel/helpers - typeof";return _typeof$F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$F(t)}function _extends$m(){return _extends$m=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_extends$m.apply(this,arguments)}function _slicedToArray$b(t,e){return _arrayWithHoles$c(t)||_iterableToArrayLimit$b(t,e)||_unsupportedIterableToArray$i(t,e)||_nonIterableRest$c()}function _nonIterableRest$c(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$i(t,e){if(t){if(typeof t=="string")return _arrayLikeToArray$i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray$i(t,e)}}function _arrayLikeToArray$i(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function _iterableToArrayLimit$b(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i,o,u,d,h=[],m=!0,p=!1;try{if(u=(n=n.call(t)).next,e!==0)for(;!(m=(i=u.call(n)).done)&&(h.push(i.value),h.length!==e);m=!0);}catch(_){p=!0,o=_}finally{try{if(!m&&n.return!=null&&(d=n.return(),Object(d)!==d))return}finally{if(p)throw o}}return h}}function _arrayWithHoles$c(t){if(Array.isArray(t))return t}function ownKeys$y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$w(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$y(Object(n),!0).forEach(function(i){_defineProperty$D(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$y(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$D(t,e,n){return e=_toPropertyKey$C(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$C(t){var e=_toPrimitive$C(t,"string");return _typeof$F(e)=="symbol"?e:e+""}function _toPrimitive$C(t,e){if(_typeof$F(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(_typeof$F(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function defaultFormatter(t){return Array.isArray(t)&&isNumOrStr(t[0])&&isNumOrStr(t[1])?t.join(" ~ "):t}var DefaultTooltipContent=function(e){var n=e.separator,i=n===void 0?" : ":n,o=e.contentStyle,u=o===void 0?{}:o,d=e.itemStyle,h=d===void 0?{}:d,m=e.labelStyle,p=m===void 0?{}:m,_=e.payload,f=e.formatter,l=e.itemSorter,g=e.wrapperClassName,v=e.labelClassName,S=e.label,T=e.labelFormatter,E=e.accessibilityLayer,O=E===void 0?!1:E,R=function(){if(_&&_.length){var H={padding:0,margin:0},Y=(l?sortBy(_,l):_).map(function(K,z){if(K.type==="none")return null;var V=_objectSpread$w({display:"block",paddingTop:4,paddingBottom:4,color:K.color||"#000"},h),G=K.formatter||f||defaultFormatter,ie=K.value,Z=K.name,te=ie,ee=Z;if(G&&te!=null&&ee!=null){var le=G(ie,Z,K,z,_);if(Array.isArray(le)){var ge=_slicedToArray$b(le,2);te=ge[0],ee=ge[1]}else te=le}return React.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(z),style:V},isNumOrStr(ee)?React.createElement("span",{className:"recharts-tooltip-item-name"},ee):null,isNumOrStr(ee)?React.createElement("span",{className:"recharts-tooltip-item-separator"},i):null,React.createElement("span",{className:"recharts-tooltip-item-value"},te),React.createElement("span",{className:"recharts-tooltip-item-unit"},K.unit||""))});return React.createElement("ul",{className:"recharts-tooltip-item-list",style:H},Y)}return null},M=_objectSpread$w({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},u),C=_objectSpread$w({margin:0},p),j=!isNil(S),$=j?S:"",L=clsx("recharts-default-tooltip",g),N=clsx("recharts-tooltip-label",v);j&&T&&_!==void 0&&_!==null&&($=T(S,_));var B=O?{role:"status","aria-live":"assertive"}:{};return React.createElement("div",_extends$m({className:L,style:M},B),React.createElement("p",{className:N,style:C},React.isValidElement($)?$:"".concat($)),R())};function _typeof$E(t){"@babel/helpers - typeof";return _typeof$E=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$E(t)}function _defineProperty$C(t,e,n){return e=_toPropertyKey$B(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$B(t){var e=_toPrimitive$B(t,"string");return _typeof$E(e)=="symbol"?e:e+""}function _toPrimitive$B(t,e){if(_typeof$E(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(_typeof$E(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var CSS_CLASS_PREFIX="recharts-tooltip-wrapper",TOOLTIP_HIDDEN={visibility:"hidden"};function getTooltipCSSClassName(t){var e=t.coordinate,n=t.translateX,i=t.translateY;return clsx(CSS_CLASS_PREFIX,_defineProperty$C(_defineProperty$C(_defineProperty$C(_defineProperty$C({},"".concat(CSS_CLASS_PREFIX,"-right"),isNumber(n)&&e&&isNumber(e.x)&&n>=e.x),"".concat(CSS_CLASS_PREFIX,"-left"),isNumber(n)&&e&&isNumber(e.x)&&n<e.x),"".concat(CSS_CLASS_PREFIX,"-bottom"),isNumber(i)&&e&&isNumber(e.y)&&i>=e.y),"".concat(CSS_CLASS_PREFIX,"-top"),isNumber(i)&&e&&isNumber(e.y)&&i<e.y))}function getTooltipTranslateXY(t){var e=t.allowEscapeViewBox,n=t.coordinate,i=t.key,o=t.offsetTopLeft,u=t.position,d=t.reverseDirection,h=t.tooltipDimension,m=t.viewBox,p=t.viewBoxDimension;if(u&&isNumber(u[i]))return u[i];var _=n[i]-h-o,f=n[i]+o;if(e[i])return d[i]?_:f;if(d[i]){var l=_,g=m[i];return l<g?Math.max(f,m[i]):Math.max(_,m[i])}var v=f+h,S=m[i]+p;return v>S?Math.max(_,m[i]):Math.max(f,m[i])}function getTransformStyle(t){var e=t.translateX,n=t.translateY,i=t.useTranslate3d;return{transform:i?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function getTooltipTranslate(t){var e=t.allowEscapeViewBox,n=t.coordinate,i=t.offsetTopLeft,o=t.position,u=t.reverseDirection,d=t.tooltipBox,h=t.useTranslate3d,m=t.viewBox,p,_,f;return d.height>0&&d.width>0&&n?(_=getTooltipTranslateXY({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:i,position:o,reverseDirection:u,tooltipDimension:d.width,viewBox:m,viewBoxDimension:m.width}),f=getTooltipTranslateXY({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:i,position:o,reverseDirection:u,tooltipDimension:d.height,viewBox:m,viewBoxDimension:m.height}),p=getTransformStyle({translateX:_,translateY:f,useTranslate3d:h})):p=TOOLTIP_HIDDEN,{cssProperties:p,cssClasses:getTooltipCSSClassName({translateX:_,translateY:f,coordinate:n})}}function _typeof$D(t){"@babel/helpers - typeof";return _typeof$D=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$D(t)}function ownKeys$x(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$v(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$x(Object(n),!0).forEach(function(i){_defineProperty$B(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$x(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _classCallCheck$g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties$g(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,_toPropertyKey$A(i.key),i)}}function _createClass$g(t,e,n){return e&&_defineProperties$g(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function _callSuper$c(t,e,n){return e=_getPrototypeOf$d(e),_possibleConstructorReturn$d(t,_isNativeReflectConstruct$d()?Reflect.construct(e,n||[],_getPrototypeOf$d(t).constructor):e.apply(t,n))}function _possibleConstructorReturn$d(t,e){if(e&&(_typeof$D(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$d(t)}function _assertThisInitialized$d(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct$d(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$d=function(){return!!t})()}function _getPrototypeOf$d(t){return _getPrototypeOf$d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_getPrototypeOf$d(t)}function _inherits$d(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf$d(t,e)}function _setPrototypeOf$d(t,e){return _setPrototypeOf$d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,o){return i.__proto__=o,i},_setPrototypeOf$d(t,e)}function _defineProperty$B(t,e,n){return e=_toPropertyKey$A(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$A(t){var e=_toPrimitive$A(t,"string");return _typeof$D(e)=="symbol"?e:e+""}function _toPrimitive$A(t,e){if(_typeof$D(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(_typeof$D(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var EPSILON=1,TooltipBoundingBox=(function(t){function e(){var n;_classCallCheck$g(this,e);for(var i=arguments.length,o=new Array(i),u=0;u<i;u++)o[u]=arguments[u];return n=_callSuper$c(this,e,[].concat(o)),_defineProperty$B(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),_defineProperty$B(n,"handleKeyDown",function(d){if(d.key==="Escape"){var h,m,p,_;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(h=(m=n.props.coordinate)===null||m===void 0?void 0:m.x)!==null&&h!==void 0?h:0,y:(p=(_=n.props.coordinate)===null||_===void 0?void 0:_.y)!==null&&p!==void 0?p:0}})}}),n}return _inherits$d(e,t),_createClass$g(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var i=this.wrapperNode.getBoundingClientRect();(Math.abs(i.width-this.state.lastBoundingBox.width)>EPSILON||Math.abs(i.height-this.state.lastBoundingBox.height)>EPSILON)&&this.setState({lastBoundingBox:{width:i.width,height:i.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var i,o;this.props.active&&this.updateBBox(),this.state.dismissed&&(((i=this.props.coordinate)===null||i===void 0?void 0:i.x)!==this.state.dismissedAtCoordinate.x||((o=this.props.coordinate)===null||o===void 0?void 0:o.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var i=this,o=this.props,u=o.active,d=o.allowEscapeViewBox,h=o.animationDuration,m=o.animationEasing,p=o.children,_=o.coordinate,f=o.hasPayload,l=o.isAnimationActive,g=o.offset,v=o.position,S=o.reverseDirection,T=o.useTranslate3d,E=o.viewBox,O=o.wrapperStyle,R=getTooltipTranslate({allowEscapeViewBox:d,coordinate:_,offsetTopLeft:g,position:v,reverseDirection:S,tooltipBox:this.state.lastBoundingBox,useTranslate3d:T,viewBox:E}),M=R.cssClasses,C=R.cssProperties,j=_objectSpread$v(_objectSpread$v({transition:l&&u?"transform ".concat(h,"ms ").concat(m):void 0},C),{},{pointerEvents:"none",visibility:!this.state.dismissed&&u&&f?"visible":"hidden",position:"absolute",top:0,left:0},O);return React.createElement("div",{tabIndex:-1,className:M,style:j,ref:function(L){i.wrapperNode=L}},p)}}])})(reactExports.PureComponent),parseIsSsrByDefault=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Global={isSsr:parseIsSsrByDefault()};function _typeof$C(t){"@babel/helpers - typeof";return _typeof$C=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$C(t)}function ownKeys$w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$u(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$w(Object(n),!0).forEach(function(i){_defineProperty$A(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$w(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _classCallCheck$f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties$f(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,_toPropertyKey$z(i.key),i)}}function _createClass$f(t,e,n){return e&&_defineProperties$f(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function _callSuper$b(t,e,n){return e=_getPrototypeOf$c(e),_possibleConstructorReturn$c(t,_isNativeReflectConstruct$c()?Reflect.construct(e,n||[],_getPrototypeOf$c(t).constructor):e.apply(t,n))}function _possibleConstructorReturn$c(t,e){if(e&&(_typeof$C(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$c(t)}function _assertThisInitialized$c(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct$c(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$c=function(){return!!t})()}function _getPrototypeOf$c(t){return _getPrototypeOf$c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_getPrototypeOf$c(t)}function _inherits$c(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf$c(t,e)}function _setPrototypeOf$c(t,e){return _setPrototypeOf$c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,o){return i.__proto__=o,i},_setPrototypeOf$c(t,e)}function _defineProperty$A(t,e,n){return e=_toPropertyKey$z(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$z(t){var e=_toPrimitive$z(t,"string");return _typeof$C(e)=="symbol"?e:e+""}function _toPrimitive$z(t,e){if(_typeof$C(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(_typeof$C(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function defaultUniqBy(t){return t.dataKey}function renderContent(t,e){return React.isValidElement(t)?React.cloneElement(t,e):typeof t=="function"?React.createElement(t,e):React.createElement(DefaultTooltipContent,e)}var Tooltip=(function(t){function e(){return _classCallCheck$f(this,e),_callSuper$b(this,e,arguments)}return _inherits$c(e,t),_createClass$f(e,[{key:"render",value:function(){var i=this,o=this.props,u=o.active,d=o.allowEscapeViewBox,h=o.animationDuration,m=o.animationEasing,p=o.content,_=o.coordinate,f=o.filterNull,l=o.isAnimationActive,g=o.offset,v=o.payload,S=o.payloadUniqBy,T=o.position,E=o.reverseDirection,O=o.useTranslate3d,R=o.viewBox,M=o.wrapperStyle,C=v??[];f&&C.length&&(C=getUniqPayload(v.filter(function($){return $.value!=null&&($.hide!==!0||i.props.includeHidden)}),S,defaultUniqBy));var j=C.length>0;return React.createElement(TooltipBoundingBox,{allowEscapeViewBox:d,animationDuration:h,animationEasing:m,isAnimationActive:l,active:u,coordinate:_,hasPayload:j,offset:g,position:T,reverseDirection:E,useTranslate3d:O,viewBox:R,wrapperStyle:M},renderContent(p,_objectSpread$u(_objectSpread$u({},this.props),{},{payload:C})))}}])})(reactExports.PureComponent);_defineProperty$A(Tooltip,"displayName","Tooltip");_defineProperty$A(Tooltip,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Global.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var now_1,hasRequiredNow;function requireNow(){if(hasRequiredNow)return now_1;hasRequiredNow=1;var t=require_root(),e=function(){return t.Date.now()};return now_1=e,now_1}var _trimmedEndIndex,hasRequired_trimmedEndIndex;function require_trimmedEndIndex(){if(hasRequired_trimmedEndIndex)return _trimmedEndIndex;hasRequired_trimmedEndIndex=1;var t=/\s/;function e(n){for(var i=n.length;i--&&t.test(n.charAt(i)););return i}return _trimmedEndIndex=e,_trimmedEndIndex}var _baseTrim,hasRequired_baseTrim;function require_baseTrim(){if(hasRequired_baseTrim)return _baseTrim;hasRequired_baseTrim=1;var t=require_trimmedEndIndex(),e=/^\s+/;function n(i){return i&&i.slice(0,t(i)+1).replace(e,"")}return _baseTrim=n,_baseTrim}var toNumber_1,hasRequiredToNumber;function requireToNumber(){if(hasRequiredToNumber)return toNumber_1;hasRequiredToNumber=1;var t=require_baseTrim(),e=requireIsObject(),n=requireIsSymbol(),i=NaN,o=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,d=/^0o[0-7]+$/i,h=parseInt;function m(p){if(typeof p=="number")return p;if(n(p))return i;if(e(p)){var _=typeof p.valueOf=="function"?p.valueOf():p;p=e(_)?_+"":_}if(typeof p!="string")return p===0?p:+p;p=t(p);var f=u.test(p);return f||d.test(p)?h(p.slice(2),f?2:8):o.test(p)?i:+p}return toNumber_1=m,toNumber_1}var debounce_1,hasRequiredDebounce;function requireDebounce(){if(hasRequiredDebounce)return debounce_1;hasRequiredDebounce=1;var t=requireIsObject(),e=requireNow(),n=requireToNumber(),i="Expected a function",o=Math.max,u=Math.min;function d(h,m,p){var _,f,l,g,v,S,T=0,E=!1,O=!1,R=!0;if(typeof h!="function")throw new TypeError(i);m=n(m)||0,t(p)&&(E=!!p.leading,O="maxWait"in p,l=O?o(n(p.maxWait)||0,m):l,R="trailing"in p?!!p.trailing:R);function M(Y){var K=_,z=f;return _=f=void 0,T=Y,g=h.apply(z,K),g}function C(Y){return T=Y,v=setTimeout(L,m),E?M(Y):g}function j(Y){var K=Y-S,z=Y-T,V=m-K;return O?u(V,l-z):V}function $(Y){var K=Y-S,z=Y-T;return S===void 0||K>=m||K<0||O&&z>=l}function L(){var Y=e();if($(Y))return N(Y);v=setTimeout(L,j(Y))}function N(Y){return v=void 0,R&&_?M(Y):(_=f=void 0,g)}function B(){v!==void 0&&clearTimeout(v),T=0,_=S=f=v=void 0}function U(){return v===void 0?g:N(e())}function H(){var Y=e(),K=$(Y);if(_=arguments,f=this,S=Y,K){if(v===void 0)return C(S);if(O)return clearTimeout(v),v=setTimeout(L,m),M(S)}return v===void 0&&(v=setTimeout(L,m)),g}return H.cancel=B,H.flush=U,H}return debounce_1=d,debounce_1}var throttle_1,hasRequiredThrottle;function requireThrottle(){if(hasRequiredThrottle)return throttle_1;hasRequiredThrottle=1;var t=requireDebounce(),e=requireIsObject(),n="Expected a function";function i(o,u,d){var h=!0,m=!0;if(typeof o!="function")throw new TypeError(n);return e(d)&&(h="leading"in d?!!d.leading:h,m="trailing"in d?!!d.trailing:m),t(o,u,{leading:h,maxWait:u,trailing:m})}return throttle_1=i,throttle_1}var throttleExports=requireThrottle();const throttle=getDefaultExportFromCjs(throttleExports);function _typeof$B(t){"@babel/helpers - typeof";return _typeof$B=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$B(t)}function ownKeys$v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$t(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$v(Object(n),!0).forEach(function(i){_defineProperty$z(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$v(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$z(t,e,n){return e=_toPropertyKey$y(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$y(t){var e=_toPrimitive$y(t,"string");return _typeof$B(e)=="symbol"?e:e+""}function _toPrimitive$y(t,e){if(_typeof$B(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(_typeof$B(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _slicedToArray$a(t,e){return _arrayWithHoles$b(t)||_iterableToArrayLimit$a(t,e)||_unsupportedIterableToArray$h(t,e)||_nonIterableRest$b()}function _nonIterableRest$b(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$h(t,e){if(t){if(typeof t=="string")return _arrayLikeToArray$h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray$h(t,e)}}function _arrayLikeToArray$h(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function _iterableToArrayLimit$a(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i,o,u,d,h=[],m=!0,p=!1;try{if(u=(n=n.call(t)).next,e!==0)for(;!(m=(i=u.call(n)).done)&&(h.push(i.value),h.length!==e);m=!0);}catch(_){p=!0,o=_}finally{try{if(!m&&n.return!=null&&(d=n.return(),Object(d)!==d))return}finally{if(p)throw o}}return h}}function _arrayWithHoles$b(t){if(Array.isArray(t))return t}var ResponsiveContainer=reactExports.forwardRef(function(t,e){var n=t.aspect,i=t.initialDimension,o=i===void 0?{width:-1,height:-1}:i,u=t.width,d=u===void 0?"100%":u,h=t.height,m=h===void 0?"100%":h,p=t.minWidth,_=p===void 0?0:p,f=t.minHeight,l=t.maxHeight,g=t.children,v=t.debounce,S=v===void 0?0:v,T=t.id,E=t.className,O=t.onResize,R=t.style,M=R===void 0?{}:R,C=reactExports.useRef(null),j=reactExports.useRef();j.current=O,reactExports.useImperativeHandle(e,function(){return Object.defineProperty(C.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),C.current},configurable:!0})});var $=reactExports.useState({containerWidth:o.width,containerHeight:o.height}),L=_slicedToArray$a($,2),N=L[0],B=L[1],U=reactExports.useCallback(function(Y,K){B(function(z){var V=Math.round(Y),G=Math.round(K);return z.containerWidth===V&&z.containerHeight===G?z:{containerWidth:V,containerHeight:G}})},[]);reactExports.useEffect(function(){var Y=function(Z){var te,ee=Z[0].contentRect,le=ee.width,ge=ee.height;U(le,ge),(te=j.current)===null||te===void 0||te.call(j,le,ge)};S>0&&(Y=throttle(Y,S,{trailing:!0,leading:!1}));var K=new ResizeObserver(Y),z=C.current.getBoundingClientRect(),V=z.width,G=z.height;return U(V,G),K.observe(C.current),function(){K.disconnect()}},[U,S]);var H=reactExports.useMemo(function(){var Y=N.containerWidth,K=N.containerHeight;if(Y<0||K<0)return null;warn(isPercent(d)||isPercent(m),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,d,m),warn(!n||n>0,"The aspect(%s) must be greater than zero.",n);var z=isPercent(d)?Y:d,V=isPercent(m)?K:m;n&&n>0&&(z?V=z/n:V&&(z=V*n),l&&V>l&&(V=l)),warn(z>0||V>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,z,V,d,m,_,f,n);var G=!Array.isArray(g)&&getDisplayName(g.type).endsWith("Chart");return React.Children.map(g,function(ie){return React.isValidElement(ie)?reactExports.cloneElement(ie,_objectSpread$t({width:z,height:V},G?{style:_objectSpread$t({height:"100%",width:"100%",maxHeight:V,maxWidth:z},ie.props.style)}:{})):ie})},[n,g,m,l,f,_,N,d]);return React.createElement("div",{id:T?"".concat(T):void 0,className:clsx("recharts-responsive-container",E),style:_objectSpread$t(_objectSpread$t({},M),{},{width:d,height:m,minWidth:_,minHeight:f,maxHeight:l}),ref:C},H)}),Cell=function(e){return null};Cell.displayName="Cell";function _typeof$A(t){"@babel/helpers - typeof";return _typeof$A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$A(t)}function ownKeys$u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$s(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$u(Object(n),!0).forEach(function(i){_defineProperty$y(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$u(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$y(t,e,n){return e=_toPropertyKey$x(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$x(t){var e=_toPrimitive$x(t,"string");return _typeof$A(e)=="symbol"?e:e+""}function _toPrimitive$x(t,e){if(_typeof$A(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(_typeof$A(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var stringCache={widthCache:{},cacheCount:0},MAX_CACHE_NUM=2e3,SPAN_STYLE={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},MEASUREMENT_SPAN_ID="recharts_measurement_span";function removeInvalidKeys(t){var e=_objectSpread$s({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var getStringSize=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Global.isSsr)return{width:0,height:0};var i=removeInvalidKeys(n),o=JSON.stringify({text:e,copyStyle:i});if(stringCache.widthCache[o])return stringCache.widthCache[o];try{var u=document.getElementById(MEASUREMENT_SPAN_ID);u||(u=document.createElement("span"),u.setAttribute("id",MEASUREMENT_SPAN_ID),u.setAttribute("aria-hidden","true"),document.body.appendChild(u));var d=_objectSpread$s(_objectSpread$s({},SPAN_STYLE),i);Object.assign(u.style,d),u.textContent="".concat(e);var h=u.getBoundingClientRect(),m={width:h.width,height:h.height};return stringCache.widthCache[o]=m,++stringCache.cacheCount>MAX_CACHE_NUM&&(stringCache.cacheCount=0,stringCache.widthCache={}),m}catch{return{width:0,height:0}}},getOffset=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function _typeof$z(t){"@babel/helpers - typeof";return _typeof$z=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$z(t)}function _slicedToArray$9(t,e){return _arrayWithHoles$a(t)||_iterableToArrayLimit$9(t,e)||_unsupportedIterableToArray$g(t,e)||_nonIterableRest$a()}function _nonIterableRest$a(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$g(t,e){if(t){if(typeof t=="string")return _arrayLikeToArray$g(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray$g(t,e)}}function _arrayLikeToArray$g(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function _iterableToArrayLimit$9(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i,o,u,d,h=[],m=!0,p=!1;try{if(u=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;m=!1}else for(;!(m=(i=u.call(n)).done)&&(h.push(i.value),h.length!==e);m=!0);}catch(_){p=!0,o=_}finally{try{if(!m&&n.return!=null&&(d=n.return(),Object(d)!==d))return}finally{if(p)throw o}}return h}}function _arrayWithHoles$a(t){if(Array.isArray(t))return t}function _classCallCheck$e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties$e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,_toPropertyKey$w(i.key),i)}}function _createClass$e(t,e,n){return e&&_defineProperties$e(t.prototype,e),n&&_defineProperties$e(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey$w(t){var e=_toPrimitive$w(t,"string");return _typeof$z(e)=="symbol"?e:e+""}function _toPrimitive$w(t,e){if(_typeof$z(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(_typeof$z(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var MULTIPLY_OR_DIVIDE_REGEX=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,ADD_OR_SUBTRACT_REGEX=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,CSS_LENGTH_UNIT_REGEX=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,NUM_SPLIT_REGEX=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,CONVERSION_RATES={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},FIXED_CSS_LENGTH_UNITS=Object.keys(CONVERSION_RATES),STR_NAN="NaN";function convertToPx(t,e){return t*CONVERSION_RATES[e]}var DecimalCSS=(function(){function t(e,n){_classCallCheck$e(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!CSS_LENGTH_UNIT_REGEX.test(n)&&(this.num=NaN,this.unit=""),FIXED_CSS_LENGTH_UNITS.includes(n)&&(this.num=convertToPx(e,n),this.unit="px")}return _createClass$e(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var i,o=(i=NUM_SPLIT_REGEX.exec(n))!==null&&i!==void 0?i:[],u=_slicedToArray$9(o,3),d=u[1],h=u[2];return new t(parseFloat(d),h??"")}}])})();function calculateArithmetic(t){if(t.includes(STR_NAN))return STR_NAN;for(var e=t;e.includes("*")||e.includes("/");){var n,i=(n=MULTIPLY_OR_DIVIDE_REGEX.exec(e))!==null&&n!==void 0?n:[],o=_slicedToArray$9(i,4),u=o[1],d=o[2],h=o[3],m=DecimalCSS.parse(u??""),p=DecimalCSS.parse(h??""),_=d==="*"?m.multiply(p):m.divide(p);if(_.isNaN())return STR_NAN;e=e.replace(MULTIPLY_OR_DIVIDE_REGEX,_.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var f,l=(f=ADD_OR_SUBTRACT_REGEX.exec(e))!==null&&f!==void 0?f:[],g=_slicedToArray$9(l,4),v=g[1],S=g[2],T=g[3],E=DecimalCSS.parse(v??""),O=DecimalCSS.parse(T??""),R=S==="+"?E.add(O):E.subtract(O);if(R.isNaN())return STR_NAN;e=e.replace(ADD_OR_SUBTRACT_REGEX,R.toString())}return e}var PARENTHESES_REGEX=/\(([^()]*)\)/;function calculateParentheses(t){for(var e=t;e.includes("(");){var n=PARENTHESES_REGEX.exec(e),i=_slicedToArray$9(n,2),o=i[1];e=e.replace(PARENTHESES_REGEX,calculateArithmetic(o))}return e}function evaluateExpression(t){var e=t.replace(/\s+/g,"");return e=calculateParentheses(e),e=calculateArithmetic(e),e}function safeEvaluateExpression(t){try{return evaluateExpression(t)}catch{return STR_NAN}}function reduceCSSCalc(t){var e=safeEvaluateExpression(t.slice(5,-1));return e===STR_NAN?"":e}var _excluded$c=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],_excluded2$5=["dx","dy","angle","className","breakAll"];function _extends$l(){return _extends$l=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_extends$l.apply(this,arguments)}function _objectWithoutProperties$c(t,e){if(t==null)return{};var n=_objectWithoutPropertiesLoose$c(t,e),i,o;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(o=0;o<u.length;o++)i=u[o],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function _objectWithoutPropertiesLoose$c(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function _slicedToArray$8(t,e){return _arrayWithHoles$9(t)||_iterableToArrayLimit$8(t,e)||_unsupportedIterableToArray$f(t,e)||_nonIterableRest$9()}function _nonIterableRest$9(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$f(t,e){if(t){if(typeof t=="string")return _arrayLikeToArray$f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray$f(t,e)}}function _arrayLikeToArray$f(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function _iterableToArrayLimit$8(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i,o,u,d,h=[],m=!0,p=!1;try{if(u=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;m=!1}else for(;!(m=(i=u.call(n)).done)&&(h.push(i.value),h.length!==e);m=!0);}catch(_){p=!0,o=_}finally{try{if(!m&&n.return!=null&&(d=n.return(),Object(d)!==d))return}finally{if(p)throw o}}return h}}function _arrayWithHoles$9(t){if(Array.isArray(t))return t}var BREAKING_SPACES=/[ \f\n\r\t\v\u2028\u2029]+/,calculateWordWidths=function(e){var n=e.children,i=e.breakAll,o=e.style;try{var u=[];isNil(n)||(i?u=n.toString().split(""):u=n.toString().split(BREAKING_SPACES));var d=u.map(function(m){return{word:m,width:getStringSize(m,o).width}}),h=i?0:getStringSize("",o).width;return{wordsWithComputedWidth:d,spaceWidth:h}}catch{return null}},calculateWordsByLines=function(e,n,i,o,u){var d=e.maxLines,h=e.children,m=e.style,p=e.breakAll,_=isNumber(d),f=h,l=function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return z.reduce(function(V,G){var ie=G.word,Z=G.width,te=V[V.length-1];if(te&&(o==null||u||te.width+Z+i<Number(o)))te.words.push(ie),te.width+=Z+i;else{var ee={words:[ie],width:Z};V.push(ee)}return V},[])},g=l(n),v=function(z){return z.reduce(function(V,G){return V.width>G.width?V:G})};if(!_)return g;for(var S="",T=function(z){var V=f.slice(0,z),G=calculateWordWidths({breakAll:p,style:m,children:V+S}).wordsWithComputedWidth,ie=l(G),Z=ie.length>d||v(ie).width>Number(o);return[Z,ie]},E=0,O=f.length-1,R=0,M;E<=O&&R<=f.length-1;){var C=Math.floor((E+O)/2),j=C-1,$=T(j),L=_slicedToArray$8($,2),N=L[0],B=L[1],U=T(C),H=_slicedToArray$8(U,1),Y=H[0];if(!N&&!Y&&(E=C+1),N&&Y&&(O=C-1),!N&&Y){M=B;break}R++}return M||g},getWordsWithoutCalculate=function(e){var n=isNil(e)?[]:e.toString().split(BREAKING_SPACES);return[{words:n}]},getWordsByLines=function(e){var n=e.width,i=e.scaleToFit,o=e.children,u=e.style,d=e.breakAll,h=e.maxLines;if((n||i)&&!Global.isSsr){var m,p,_=calculateWordWidths({breakAll:d,children:o,style:u});if(_){var f=_.wordsWithComputedWidth,l=_.spaceWidth;m=f,p=l}else return getWordsWithoutCalculate(o);return calculateWordsByLines({breakAll:d,children:o,maxLines:h,style:u},m,p,n,i)}return getWordsWithoutCalculate(o)},DEFAULT_FILL="#808080",Text=function(e){var n=e.x,i=n===void 0?0:n,o=e.y,u=o===void 0?0:o,d=e.lineHeight,h=d===void 0?"1em":d,m=e.capHeight,p=m===void 0?"0.71em":m,_=e.scaleToFit,f=_===void 0?!1:_,l=e.textAnchor,g=l===void 0?"start":l,v=e.verticalAnchor,S=v===void 0?"end":v,T=e.fill,E=T===void 0?DEFAULT_FILL:T,O=_objectWithoutProperties$c(e,_excluded$c),R=reactExports.useMemo(function(){return getWordsByLines({breakAll:O.breakAll,children:O.children,maxLines:O.maxLines,scaleToFit:f,style:O.style,width:O.width})},[O.breakAll,O.children,O.maxLines,f,O.style,O.width]),M=O.dx,C=O.dy,j=O.angle,$=O.className,L=O.breakAll,N=_objectWithoutProperties$c(O,_excluded2$5);if(!isNumOrStr(i)||!isNumOrStr(u))return null;var B=i+(isNumber(M)?M:0),U=u+(isNumber(C)?C:0),H;switch(S){case"start":H=reduceCSSCalc("calc(".concat(p,")"));break;case"middle":H=reduceCSSCalc("calc(".concat((R.length-1)/2," * -").concat(h," + (").concat(p," / 2))"));break;default:H=reduceCSSCalc("calc(".concat(R.length-1," * -").concat(h,")"));break}var Y=[];if(f){var K=R[0].width,z=O.width;Y.push("scale(".concat((isNumber(z)?z/K:1)/K,")"))}return j&&Y.push("rotate(".concat(j,", ").concat(B,", ").concat(U,")")),Y.length&&(N.transform=Y.join(" ")),React.createElement("text",_extends$l({},filterProps$1(N,!0),{x:B,y:U,className:clsx("recharts-text",$),textAnchor:g,fill:E.includes("url")?DEFAULT_FILL:E}),R.map(function(V,G){var ie=V.words.join(L?"":" ");return React.createElement("tspan",{x:B,dy:G===0?H:h,key:"".concat(ie,"-").concat(G)},ie)}))};function ascending(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function descending(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function bisector(t){let e,n,i;t.length!==2?(e=ascending,n=(h,m)=>ascending(t(h),m),i=(h,m)=>t(h)-m):(e=t===ascending||t===descending?t:zero$1,n=t,i=t);function o(h,m,p=0,_=h.length){if(p<_){if(e(m,m)!==0)return _;do{const f=p+_>>>1;n(h[f],m)<0?p=f+1:_=f}while(p<_)}return p}function u(h,m,p=0,_=h.length){if(p<_){if(e(m,m)!==0)return _;do{const f=p+_>>>1;n(h[f],m)<=0?p=f+1:_=f}while(p<_)}return p}function d(h,m,p=0,_=h.length){const f=o(h,m,p,_-1);return f>p&&i(h[f-1],m)>-i(h[f],m)?f-1:f}return{left:o,center:d,right:u}}function zero$1(){return 0}function number$3(t){return t===null?NaN:+t}function*numbers(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const ascendingBisect=bisector(ascending),bisectRight=ascendingBisect.right;bisector(number$3).center;class InternMap extends Map{constructor(e,n=keyof){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[i,o]of e)this.set(i,o)}get(e){return super.get(intern_get(this,e))}has(e){return super.has(intern_get(this,e))}set(e,n){return super.set(intern_set(this,e),n)}delete(e){return super.delete(intern_delete(this,e))}}function intern_get({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):n}function intern_set({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):(t.set(i,n),n)}function intern_delete({_intern:t,_key:e},n){const i=e(n);return t.has(i)&&(n=t.get(i),t.delete(i)),n}function keyof(t){return t!==null&&typeof t=="object"?t.valueOf():t}function compareDefined(t=ascending){if(t===ascending)return ascendingDefined;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const i=t(e,n);return i||i===0?i:(t(n,n)===0)-(t(e,e)===0)}}function ascendingDefined(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function tickSpec(t,e,n){const i=(e-t)/Math.max(0,n),o=Math.floor(Math.log10(i)),u=i/Math.pow(10,o),d=u>=e10?10:u>=e5?5:u>=e2?2:1;let h,m,p;return o<0?(p=Math.pow(10,-o)/d,h=Math.round(t*p),m=Math.round(e*p),h/p<t&&++h,m/p>e&&--m,p=-p):(p=Math.pow(10,o)*d,h=Math.round(t/p),m=Math.round(e/p),h*p<t&&++h,m*p>e&&--m),m<h&&.5<=n&&n<2?tickSpec(t,e,n*2):[h,m,p]}function ticks(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const i=e<t,[o,u,d]=i?tickSpec(e,t,n):tickSpec(t,e,n);if(!(u>=o))return[];const h=u-o+1,m=new Array(h);if(i)if(d<0)for(let p=0;p<h;++p)m[p]=(u-p)/-d;else for(let p=0;p<h;++p)m[p]=(u-p)*d;else if(d<0)for(let p=0;p<h;++p)m[p]=(o+p)/-d;else for(let p=0;p<h;++p)m[p]=(o+p)*d;return m}function tickIncrement(t,e,n){return e=+e,t=+t,n=+n,tickSpec(t,e,n)[2]}function tickStep(t,e,n){e=+e,t=+t,n=+n;const i=e<t,o=i?tickIncrement(e,t,n):tickIncrement(t,e,n);return(i?-1:1)*(o<0?1/-o:o)}function max$2(t,e){let n;for(const i of t)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);return n}function min$2(t,e){let n;for(const i of t)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);return n}function quickselect(t,e,n=0,i=1/0,o){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(t.length-1,i)),!(n<=e&&e<=i))return t;for(o=o===void 0?ascendingDefined:compareDefined(o);i>n;){if(i-n>600){const m=i-n+1,p=e-n+1,_=Math.log(m),f=.5*Math.exp(2*_/3),l=.5*Math.sqrt(_*f*(m-f)/m)*(p-m/2<0?-1:1),g=Math.max(n,Math.floor(e-p*f/m+l)),v=Math.min(i,Math.floor(e+(m-p)*f/m+l));quickselect(t,e,g,v,o)}const u=t[e];let d=n,h=i;for(swap(t,n,e),o(t[i],u)>0&&swap(t,n,i);d<h;){for(swap(t,d,h),++d,--h;o(t[d],u)<0;)++d;for(;o(t[h],u)>0;)--h}o(t[n],u)===0?swap(t,n,h):(++h,swap(t,h,i)),h<=e&&(n=h+1),e<=h&&(i=h-1)}return t}function swap(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function quantile$1(t,e,n){if(t=Float64Array.from(numbers(t)),!(!(i=t.length)||isNaN(e=+e))){if(e<=0||i<2)return min$2(t);if(e>=1)return max$2(t);var i,o=(i-1)*e,u=Math.floor(o),d=max$2(quickselect(t,u).subarray(0,u+1)),h=min$2(t.subarray(u+1));return d+(h-d)*(o-u)}}function quantileSorted(t,e,n=number$3){if(!(!(i=t.length)||isNaN(e=+e))){if(e<=0||i<2)return+n(t[0],0,t);if(e>=1)return+n(t[i-1],i-1,t);var i,o=(i-1)*e,u=Math.floor(o),d=+n(t[u],u,t),h=+n(t[u+1],u+1,t);return d+(h-d)*(o-u)}}function range$3(t,e,n){t=+t,e=+e,n=(o=arguments.length)<2?(e=t,t=0,1):o<3?1:+n;for(var i=-1,o=Math.max(0,Math.ceil((e-t)/n))|0,u=new Array(o);++i<o;)u[i]=t+i*n;return u}function initRange(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function initInterpolator(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const implicit=Symbol("implicit");function ordinal(){var t=new InternMap,e=[],n=[],i=implicit;function o(u){let d=t.get(u);if(d===void 0){if(i!==implicit)return i;t.set(u,d=e.push(u)-1)}return n[d%n.length]}return o.domain=function(u){if(!arguments.length)return e.slice();e=[],t=new InternMap;for(const d of u)t.has(d)||t.set(d,e.push(d)-1);return o},o.range=function(u){return arguments.length?(n=Array.from(u),o):n.slice()},o.unknown=function(u){return arguments.length?(i=u,o):i},o.copy=function(){return ordinal(e,n).unknown(i)},initRange.apply(o,arguments),o}function band(){var t=ordinal().unknown(void 0),e=t.domain,n=t.range,i=0,o=1,u,d,h=!1,m=0,p=0,_=.5;delete t.unknown;function f(){var l=e().length,g=o<i,v=g?o:i,S=g?i:o;u=(S-v)/Math.max(1,l-m+p*2),h&&(u=Math.floor(u)),v+=(S-v-u*(l-m))*_,d=u*(1-m),h&&(v=Math.round(v),d=Math.round(d));var T=range$3(l).map(function(E){return v+u*E});return n(g?T.reverse():T)}return t.domain=function(l){return arguments.length?(e(l),f()):e()},t.range=function(l){return arguments.length?([i,o]=l,i=+i,o=+o,f()):[i,o]},t.rangeRound=function(l){return[i,o]=l,i=+i,o=+o,h=!0,f()},t.bandwidth=function(){return d},t.step=function(){return u},t.round=function(l){return arguments.length?(h=!!l,f()):h},t.padding=function(l){return arguments.length?(m=Math.min(1,p=+l),f()):m},t.paddingInner=function(l){return arguments.length?(m=Math.min(1,l),f()):m},t.paddingOuter=function(l){return arguments.length?(p=+l,f()):p},t.align=function(l){return arguments.length?(_=Math.max(0,Math.min(1,l)),f()):_},t.copy=function(){return band(e(),[i,o]).round(h).paddingInner(m).paddingOuter(p).align(_)},initRange.apply(f(),arguments)}function pointish(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return pointish(e())},t}function point(){return pointish(band.apply(null,arguments).paddingInner(1))}function define(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function extend(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Color(){}var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define(Color,color$1,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:color_formatHex8,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb});function color_formatHex(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color$1(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=reHex.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?rgbn(e):n===3?new Rgb(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?rgba$1(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?rgba$1(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=reRgbInteger.exec(t))?new Rgb(e[1],e[2],e[3],1):(e=reRgbPercent.exec(t))?new Rgb(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=reRgbaInteger.exec(t))?rgba$1(e[1],e[2],e[3],e[4]):(e=reRgbaPercent.exec(t))?rgba$1(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=reHslPercent.exec(t))?hsla$1(e[1],e[2]/100,e[3]/100,1):(e=reHslaPercent.exec(t))?hsla$1(e[1],e[2]/100,e[3]/100,e[4]):named.hasOwnProperty(t)?rgbn(named[t]):t==="transparent"?new Rgb(NaN,NaN,NaN,0):null}function rgbn(t){return new Rgb(t>>16&255,t>>8&255,t&255,1)}function rgba$1(t,e,n,i){return i<=0&&(t=e=n=NaN),new Rgb(t,e,n,i)}function rgbConvert(t){return t instanceof Color||(t=color$1(t)),t?(t=t.rgb(),new Rgb(t.r,t.g,t.b,t.opacity)):new Rgb}function rgb$1(t,e,n,i){return arguments.length===1?rgbConvert(t):new Rgb(t,e,n,i??1)}function Rgb(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}define(Rgb,rgb$1,extend(Color,{brighter(t){return t=t==null?brighter:Math.pow(brighter,t),new Rgb(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?darker:Math.pow(darker,t),new Rgb(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));function rgb_formatHex(){return`#${hex$1(this.r)}${hex$1(this.g)}${hex$1(this.b)}`}function rgb_formatHex8(){return`#${hex$1(this.r)}${hex$1(this.g)}${hex$1(this.b)}${hex$1((isNaN(this.opacity)?1:this.opacity)*255)}`}function rgb_formatRgb(){const t=clampa(this.opacity);return`${t===1?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${t===1?")":`, ${t})`}`}function clampa(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function clampi(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function hex$1(t){return t=clampi(t),(t<16?"0":"")+t.toString(16)}function hsla$1(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Hsl(t,e,n,i)}function hslConvert(t){if(t instanceof Hsl)return new Hsl(t.h,t.s,t.l,t.opacity);if(t instanceof Color||(t=color$1(t)),!t)return new Hsl;if(t instanceof Hsl)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,o=Math.min(e,n,i),u=Math.max(e,n,i),d=NaN,h=u-o,m=(u+o)/2;return h?(e===u?d=(n-i)/h+(n<i)*6:n===u?d=(i-e)/h+2:d=(e-n)/h+4,h/=m<.5?u+o:2-u-o,d*=60):h=m>0&&m<1?0:d,new Hsl(d,h,m,t.opacity)}function hsl(t,e,n,i){return arguments.length===1?hslConvert(t):new Hsl(t,e,n,i??1)}function Hsl(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}define(Hsl,hsl,extend(Color,{brighter(t){return t=t==null?brighter:Math.pow(brighter,t),new Hsl(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?darker:Math.pow(darker,t),new Hsl(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,o=2*n-i;return new Rgb(hsl2rgb(t>=240?t-240:t+120,o,i),hsl2rgb(t,o,i),hsl2rgb(t<120?t+240:t-120,o,i),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=clampa(this.opacity);return`${t===1?"hsl(":"hsla("}${clamph(this.h)}, ${clampt(this.s)*100}%, ${clampt(this.l)*100}%${t===1?")":`, ${t})`}`}}));function clamph(t){return t=(t||0)%360,t<0?t+360:t}function clampt(t){return Math.max(0,Math.min(1,t||0))}function hsl2rgb(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const constant=t=>()=>t;function linear$1(t,e){return function(n){return t+n*e}}function exponential(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function gamma(t){return(t=+t)==1?nogamma:function(e,n){return n-e?exponential(e,n,t):constant(isNaN(e)?n:e)}}function nogamma(t,e){var n=e-t;return n?linear$1(t,n):constant(isNaN(t)?e:t)}const rgb=(function t(e){var n=gamma(e);function i(o,u){var d=n((o=rgb$1(o)).r,(u=rgb$1(u)).r),h=n(o.g,u.g),m=n(o.b,u.b),p=nogamma(o.opacity,u.opacity);return function(_){return o.r=d(_),o.g=h(_),o.b=m(_),o.opacity=p(_),o+""}}return i.gamma=t,i})(1);function numberArray(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,i=e.slice(),o;return function(u){for(o=0;o<n;++o)i[o]=t[o]*(1-u)+e[o]*u;return i}}function isNumberArray(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function genericArray(t,e){var n=e?e.length:0,i=t?Math.min(n,t.length):0,o=new Array(i),u=new Array(n),d;for(d=0;d<i;++d)o[d]=interpolate$2(t[d],e[d]);for(;d<n;++d)u[d]=e[d];return function(h){for(d=0;d<i;++d)u[d]=o[d](h);return u}}function date$1(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function interpolateNumber$1(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function object(t,e){var n={},i={},o;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(o in e)o in t?n[o]=interpolate$2(t[o],e[o]):i[o]=e[o];return function(u){for(o in n)i[o]=n[o](u);return i}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(t){return function(){return t}}function one(t){return function(e){return t(e)+""}}function string(t,e){var n=reA.lastIndex=reB.lastIndex=0,i,o,u,d=-1,h=[],m=[];for(t=t+"",e=e+"";(i=reA.exec(t))&&(o=reB.exec(e));)(u=o.index)>n&&(u=e.slice(n,u),h[d]?h[d]+=u:h[++d]=u),(i=i[0])===(o=o[0])?h[d]?h[d]+=o:h[++d]=o:(h[++d]=null,m.push({i:d,x:interpolateNumber$1(i,o)})),n=reB.lastIndex;return n<e.length&&(u=e.slice(n),h[d]?h[d]+=u:h[++d]=u),h.length<2?m[0]?one(m[0].x):zero(e):(e=m.length,function(p){for(var _=0,f;_<e;++_)h[(f=m[_]).i]=f.x(p);return h.join("")})}function interpolate$2(t,e){var n=typeof e,i;return e==null||n==="boolean"?constant(e):(n==="number"?interpolateNumber$1:n==="string"?(i=color$1(e))?(e=i,rgb):string:e instanceof color$1?rgb:e instanceof Date?date$1:isNumberArray(e)?numberArray:Array.isArray(e)?genericArray:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?object:interpolateNumber$1)(t,e)}function interpolateRound(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function piecewise(t,e){e===void 0&&(e=t,t=interpolate$2);for(var n=0,i=e.length-1,o=e[0],u=new Array(i<0?0:i);n<i;)u[n]=t(o,o=e[++n]);return function(d){var h=Math.max(0,Math.min(i-1,Math.floor(d*=i)));return u[h](d-h)}}function constants(t){return function(){return t}}function number$2(t){return+t}var unit=[0,1];function identity$4(t){return t}function normalize(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:constants(isNaN(e)?NaN:.5)}function clamper(t,e){var n;return t>e&&(n=t,t=e,e=n),function(i){return Math.max(t,Math.min(e,i))}}function bimap(t,e,n){var i=t[0],o=t[1],u=e[0],d=e[1];return o<i?(i=normalize(o,i),u=n(d,u)):(i=normalize(i,o),u=n(u,d)),function(h){return u(i(h))}}function polymap(t,e,n){var i=Math.min(t.length,e.length)-1,o=new Array(i),u=new Array(i),d=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++d<i;)o[d]=normalize(t[d],t[d+1]),u[d]=n(e[d],e[d+1]);return function(h){var m=bisectRight(t,h,1,i)-1;return u[m](o[m](h))}}function copy$1(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function transformer$2(){var t=unit,e=unit,n=interpolate$2,i,o,u,d=identity$4,h,m,p;function _(){var l=Math.min(t.length,e.length);return d!==identity$4&&(d=clamper(t[0],t[l-1])),h=l>2?polymap:bimap,m=p=null,f}function f(l){return l==null||isNaN(l=+l)?u:(m||(m=h(t.map(i),e,n)))(i(d(l)))}return f.invert=function(l){return d(o((p||(p=h(e,t.map(i),interpolateNumber$1)))(l)))},f.domain=function(l){return arguments.length?(t=Array.from(l,number$2),_()):t.slice()},f.range=function(l){return arguments.length?(e=Array.from(l),_()):e.slice()},f.rangeRound=function(l){return e=Array.from(l),n=interpolateRound,_()},f.clamp=function(l){return arguments.length?(d=l?!0:identity$4,_()):d!==identity$4},f.interpolate=function(l){return arguments.length?(n=l,_()):n},f.unknown=function(l){return arguments.length?(u=l,f):u},function(l,g){return i=l,o=g,_()}}function continuous(){return transformer$2()(identity$4,identity$4)}function formatDecimal(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function formatDecimalParts(t,e){if(!isFinite(t)||t===0)return null;var n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function exponent(t){return t=formatDecimalParts(Math.abs(t)),t?t[1]:NaN}function formatGroup(t,e){return function(n,i){for(var o=n.length,u=[],d=0,h=t[0],m=0;o>0&&h>0&&(m+h+1>i&&(h=Math.max(1,i-m)),u.push(n.substring(o-=h,o+h)),!((m+=h+1)>i));)h=t[d=(d+1)%t.length];return u.reverse().join(e)}}function formatNumerals(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var re=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(t){if(!(e=re.exec(t)))throw new Error("invalid format: "+t);var e;return new FormatSpecifier({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}formatSpecifier.prototype=FormatSpecifier.prototype;function FormatSpecifier(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function formatTrim(t){e:for(var e=t.length,n=1,i=-1,o;n<e;++n)switch(t[n]){case".":i=o=n;break;case"0":i===0&&(i=n),o=n;break;default:if(!+t[n])break e;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(o+1):t}var prefixExponent;function formatPrefixAuto(t,e){var n=formatDecimalParts(t,e);if(!n)return prefixExponent=void 0,t.toPrecision(e);var i=n[0],o=n[1],u=o-(prefixExponent=Math.max(-8,Math.min(8,Math.floor(o/3)))*3)+1,d=i.length;return u===d?i:u>d?i+new Array(u-d+1).join("0"):u>0?i.slice(0,u)+"."+i.slice(u):"0."+new Array(1-u).join("0")+formatDecimalParts(t,Math.max(0,e+u-1))[0]}function formatRounded(t,e){var n=formatDecimalParts(t,e);if(!n)return t+"";var i=n[0],o=n[1];return o<0?"0."+new Array(-o).join("0")+i:i.length>o+1?i.slice(0,o+1)+"."+i.slice(o+1):i+new Array(o-i.length+2).join("0")}const formatTypes={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:formatDecimal,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>formatRounded(t*100,e),r:formatRounded,s:formatPrefixAuto,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function identity$3(t){return t}var map$1=Array.prototype.map,prefixes=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function formatLocale$1(t){var e=t.grouping===void 0||t.thousands===void 0?identity$3:formatGroup(map$1.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",i=t.currency===void 0?"":t.currency[1]+"",o=t.decimal===void 0?".":t.decimal+"",u=t.numerals===void 0?identity$3:formatNumerals(map$1.call(t.numerals,String)),d=t.percent===void 0?"%":t.percent+"",h=t.minus===void 0?"":t.minus+"",m=t.nan===void 0?"NaN":t.nan+"";function p(f,l){f=formatSpecifier(f);var g=f.fill,v=f.align,S=f.sign,T=f.symbol,E=f.zero,O=f.width,R=f.comma,M=f.precision,C=f.trim,j=f.type;j==="n"?(R=!0,j="g"):formatTypes[j]||(M===void 0&&(M=12),C=!0,j="g"),(E||g==="0"&&v==="=")&&(E=!0,g="0",v="=");var $=(l&&l.prefix!==void 0?l.prefix:"")+(T==="$"?n:T==="#"&&/[boxX]/.test(j)?"0"+j.toLowerCase():""),L=(T==="$"?i:/[%p]/.test(j)?d:"")+(l&&l.suffix!==void 0?l.suffix:""),N=formatTypes[j],B=/[defgprs%]/.test(j);M=M===void 0?6:/[gprs]/.test(j)?Math.max(1,Math.min(21,M)):Math.max(0,Math.min(20,M));function U(H){var Y=$,K=L,z,V,G;if(j==="c")K=N(H)+K,H="";else{H=+H;var ie=H<0||1/H<0;if(H=isNaN(H)?m:N(Math.abs(H),M),C&&(H=formatTrim(H)),ie&&+H==0&&S!=="+"&&(ie=!1),Y=(ie?S==="("?S:h:S==="-"||S==="("?"":S)+Y,K=(j==="s"&&!isNaN(H)&&prefixExponent!==void 0?prefixes[8+prefixExponent/3]:"")+K+(ie&&S==="("?")":""),B){for(z=-1,V=H.length;++z<V;)if(G=H.charCodeAt(z),48>G||G>57){K=(G===46?o+H.slice(z+1):H.slice(z))+K,H=H.slice(0,z);break}}}R&&!E&&(H=e(H,1/0));var Z=Y.length+H.length+K.length,te=Z<O?new Array(O-Z+1).join(g):"";switch(R&&E&&(H=e(te+H,te.length?O-K.length:1/0),te=""),v){case"<":H=Y+H+K+te;break;case"=":H=Y+te+H+K;break;case"^":H=te.slice(0,Z=te.length>>1)+Y+H+K+te.slice(Z);break;default:H=te+Y+H+K;break}return u(H)}return U.toString=function(){return f+""},U}function _(f,l){var g=Math.max(-8,Math.min(8,Math.floor(exponent(l)/3)))*3,v=Math.pow(10,-g),S=p((f=formatSpecifier(f),f.type="f",f),{suffix:prefixes[8+g/3]});return function(T){return S(v*T)}}return{format:p,formatPrefix:_}}var locale$1,format,formatPrefix;defaultLocale$1({thousands:",",grouping:[3],currency:["$",""]});function defaultLocale$1(t){return locale$1=formatLocale$1(t),format=locale$1.format,formatPrefix=locale$1.formatPrefix,locale$1}function precisionFixed(t){return Math.max(0,-exponent(Math.abs(t)))}function precisionPrefix(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(exponent(e)/3)))*3-exponent(Math.abs(t)))}function precisionRound(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,exponent(e)-exponent(t))+1}function tickFormat(t,e,n,i){var o=tickStep(t,e,n),u;switch(i=formatSpecifier(i??",f"),i.type){case"s":{var d=Math.max(Math.abs(t),Math.abs(e));return i.precision==null&&!isNaN(u=precisionPrefix(o,d))&&(i.precision=u),formatPrefix(i,d)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(u=precisionRound(o,Math.max(Math.abs(t),Math.abs(e))))&&(i.precision=u-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(u=precisionFixed(o))&&(i.precision=u-(i.type==="%")*2);break}}return format(i)}function linearish(t){var e=t.domain;return t.ticks=function(n){var i=e();return ticks(i[0],i[i.length-1],n??10)},t.tickFormat=function(n,i){var o=e();return tickFormat(o[0],o[o.length-1],n??10,i)},t.nice=function(n){n==null&&(n=10);var i=e(),o=0,u=i.length-1,d=i[o],h=i[u],m,p,_=10;for(h<d&&(p=d,d=h,h=p,p=o,o=u,u=p);_-- >0;){if(p=tickIncrement(d,h,n),p===m)return i[o]=d,i[u]=h,e(i);if(p>0)d=Math.floor(d/p)*p,h=Math.ceil(h/p)*p;else if(p<0)d=Math.ceil(d*p)/p,h=Math.floor(h*p)/p;else break;m=p}return t},t}function linear(){var t=continuous();return t.copy=function(){return copy$1(t,linear())},initRange.apply(t,arguments),linearish(t)}function identity$2(t){var e;function n(i){return i==null||isNaN(i=+i)?e:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(t=Array.from(i,number$2),n):t.slice()},n.unknown=function(i){return arguments.length?(e=i,n):e},n.copy=function(){return identity$2(t).unknown(e)},t=arguments.length?Array.from(t,number$2):[0,1],linearish(n)}function nice(t,e){t=t.slice();var n=0,i=t.length-1,o=t[n],u=t[i],d;return u<o&&(d=n,n=i,i=d,d=o,o=u,u=d),t[n]=e.floor(o),t[i]=e.ceil(u),t}function transformLog(t){return Math.log(t)}function transformExp(t){return Math.exp(t)}function transformLogn(t){return-Math.log(-t)}function transformExpn(t){return-Math.exp(-t)}function pow10(t){return isFinite(t)?+("1e"+t):t<0?0:t}function powp(t){return t===10?pow10:t===Math.E?Math.exp:e=>Math.pow(t,e)}function logp(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function reflect(t){return(e,n)=>-t(-e,n)}function loggish(t){const e=t(transformLog,transformExp),n=e.domain;let i=10,o,u;function d(){return o=logp(i),u=powp(i),n()[0]<0?(o=reflect(o),u=reflect(u),t(transformLogn,transformExpn)):t(transformLog,transformExp),e}return e.base=function(h){return arguments.length?(i=+h,d()):i},e.domain=function(h){return arguments.length?(n(h),d()):n()},e.ticks=h=>{const m=n();let p=m[0],_=m[m.length-1];const f=_<p;f&&([p,_]=[_,p]);let l=o(p),g=o(_),v,S;const T=h==null?10:+h;let E=[];if(!(i%1)&&g-l<T){if(l=Math.floor(l),g=Math.ceil(g),p>0){for(;l<=g;++l)for(v=1;v<i;++v)if(S=l<0?v/u(-l):v*u(l),!(S<p)){if(S>_)break;E.push(S)}}else for(;l<=g;++l)for(v=i-1;v>=1;--v)if(S=l>0?v/u(-l):v*u(l),!(S<p)){if(S>_)break;E.push(S)}E.length*2<T&&(E=ticks(p,_,T))}else E=ticks(l,g,Math.min(g-l,T)).map(u);return f?E.reverse():E},e.tickFormat=(h,m)=>{if(h==null&&(h=10),m==null&&(m=i===10?"s":","),typeof m!="function"&&(!(i%1)&&(m=formatSpecifier(m)).precision==null&&(m.trim=!0),m=format(m)),h===1/0)return m;const p=Math.max(1,i*h/e.ticks().length);return _=>{let f=_/u(Math.round(o(_)));return f*i<i-.5&&(f*=i),f<=p?m(_):""}},e.nice=()=>n(nice(n(),{floor:h=>u(Math.floor(o(h))),ceil:h=>u(Math.ceil(o(h)))})),e}function log(){const t=loggish(transformer$2()).domain([1,10]);return t.copy=()=>copy$1(t,log()).base(t.base()),initRange.apply(t,arguments),t}function transformSymlog(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function transformSymexp(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function symlogish(t){var e=1,n=t(transformSymlog(e),transformSymexp(e));return n.constant=function(i){return arguments.length?t(transformSymlog(e=+i),transformSymexp(e)):e},linearish(n)}function symlog(){var t=symlogish(transformer$2());return t.copy=function(){return copy$1(t,symlog()).constant(t.constant())},initRange.apply(t,arguments)}function transformPow(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function transformSqrt(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function transformSquare(t){return t<0?-t*t:t*t}function powish(t){var e=t(identity$4,identity$4),n=1;function i(){return n===1?t(identity$4,identity$4):n===.5?t(transformSqrt,transformSquare):t(transformPow(n),transformPow(1/n))}return e.exponent=function(o){return arguments.length?(n=+o,i()):n},linearish(e)}function pow(){var t=powish(transformer$2());return t.copy=function(){return copy$1(t,pow()).exponent(t.exponent())},initRange.apply(t,arguments),t}function sqrt(){return pow.apply(null,arguments).exponent(.5)}function square(t){return Math.sign(t)*t*t}function unsquare(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function radial(){var t=continuous(),e=[0,1],n=!1,i;function o(u){var d=unsquare(t(u));return isNaN(d)?i:n?Math.round(d):d}return o.invert=function(u){return t.invert(square(u))},o.domain=function(u){return arguments.length?(t.domain(u),o):t.domain()},o.range=function(u){return arguments.length?(t.range((e=Array.from(u,number$2)).map(square)),o):e.slice()},o.rangeRound=function(u){return o.range(u).round(!0)},o.round=function(u){return arguments.length?(n=!!u,o):n},o.clamp=function(u){return arguments.length?(t.clamp(u),o):t.clamp()},o.unknown=function(u){return arguments.length?(i=u,o):i},o.copy=function(){return radial(t.domain(),e).round(n).clamp(t.clamp()).unknown(i)},initRange.apply(o,arguments),linearish(o)}function quantile(){var t=[],e=[],n=[],i;function o(){var d=0,h=Math.max(1,e.length);for(n=new Array(h-1);++d<h;)n[d-1]=quantileSorted(t,d/h);return u}function u(d){return d==null||isNaN(d=+d)?i:e[bisectRight(n,d)]}return u.invertExtent=function(d){var h=e.indexOf(d);return h<0?[NaN,NaN]:[h>0?n[h-1]:t[0],h<n.length?n[h]:t[t.length-1]]},u.domain=function(d){if(!arguments.length)return t.slice();t=[];for(let h of d)h!=null&&!isNaN(h=+h)&&t.push(h);return t.sort(ascending),o()},u.range=function(d){return arguments.length?(e=Array.from(d),o()):e.slice()},u.unknown=function(d){return arguments.length?(i=d,u):i},u.quantiles=function(){return n.slice()},u.copy=function(){return quantile().domain(t).range(e).unknown(i)},initRange.apply(u,arguments)}function quantize(){var t=0,e=1,n=1,i=[.5],o=[0,1],u;function d(m){return m!=null&&m<=m?o[bisectRight(i,m,0,n)]:u}function h(){var m=-1;for(i=new Array(n);++m<n;)i[m]=((m+1)*e-(m-n)*t)/(n+1);return d}return d.domain=function(m){return arguments.length?([t,e]=m,t=+t,e=+e,h()):[t,e]},d.range=function(m){return arguments.length?(n=(o=Array.from(m)).length-1,h()):o.slice()},d.invertExtent=function(m){var p=o.indexOf(m);return p<0?[NaN,NaN]:p<1?[t,i[0]]:p>=n?[i[n-1],e]:[i[p-1],i[p]]},d.unknown=function(m){return arguments.length&&(u=m),d},d.thresholds=function(){return i.slice()},d.copy=function(){return quantize().domain([t,e]).range(o).unknown(u)},initRange.apply(linearish(d),arguments)}function threshold(){var t=[.5],e=[0,1],n,i=1;function o(u){return u!=null&&u<=u?e[bisectRight(t,u,0,i)]:n}return o.domain=function(u){return arguments.length?(t=Array.from(u),i=Math.min(t.length,e.length-1),o):t.slice()},o.range=function(u){return arguments.length?(e=Array.from(u),i=Math.min(t.length,e.length-1),o):e.slice()},o.invertExtent=function(u){var d=e.indexOf(u);return[t[d-1],t[d]]},o.unknown=function(u){return arguments.length?(n=u,o):n},o.copy=function(){return threshold().domain(t).range(e).unknown(n)},initRange.apply(o,arguments)}const t0=new Date,t1=new Date;function timeInterval(t,e,n,i){function o(u){return t(u=arguments.length===0?new Date:new Date(+u)),u}return o.floor=u=>(t(u=new Date(+u)),u),o.ceil=u=>(t(u=new Date(u-1)),e(u,1),t(u),u),o.round=u=>{const d=o(u),h=o.ceil(u);return u-d<h-u?d:h},o.offset=(u,d)=>(e(u=new Date(+u),d==null?1:Math.floor(d)),u),o.range=(u,d,h)=>{const m=[];if(u=o.ceil(u),h=h==null?1:Math.floor(h),!(u<d)||!(h>0))return m;let p;do m.push(p=new Date(+u)),e(u,h),t(u);while(p<u&&u<d);return m},o.filter=u=>timeInterval(d=>{if(d>=d)for(;t(d),!u(d);)d.setTime(d-1)},(d,h)=>{if(d>=d)if(h<0)for(;++h<=0;)for(;e(d,-1),!u(d););else for(;--h>=0;)for(;e(d,1),!u(d););}),n&&(o.count=(u,d)=>(t0.setTime(+u),t1.setTime(+d),t(t0),t(t1),Math.floor(n(t0,t1))),o.every=u=>(u=Math.floor(u),!isFinite(u)||!(u>0)?null:u>1?o.filter(i?d=>i(d)%u===0:d=>o.count(0,d)%u===0):o)),o}const millisecond=timeInterval(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);millisecond.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?timeInterval(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):millisecond);millisecond.range;const durationSecond=1e3,durationMinute=durationSecond*60,durationHour=durationMinute*60,durationDay=durationHour*24,durationWeek=durationDay*7,durationMonth=durationDay*30,durationYear=durationDay*365,second=timeInterval(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*durationSecond)},(t,e)=>(e-t)/durationSecond,t=>t.getUTCSeconds());second.range;const timeMinute=timeInterval(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*durationSecond)},(t,e)=>{t.setTime(+t+e*durationMinute)},(t,e)=>(e-t)/durationMinute,t=>t.getMinutes());timeMinute.range;const utcMinute=timeInterval(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*durationMinute)},(t,e)=>(e-t)/durationMinute,t=>t.getUTCMinutes());utcMinute.range;const timeHour=timeInterval(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*durationSecond-t.getMinutes()*durationMinute)},(t,e)=>{t.setTime(+t+e*durationHour)},(t,e)=>(e-t)/durationHour,t=>t.getHours());timeHour.range;const utcHour=timeInterval(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*durationHour)},(t,e)=>(e-t)/durationHour,t=>t.getUTCHours());utcHour.range;const timeDay=timeInterval(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*durationMinute)/durationDay,t=>t.getDate()-1);timeDay.range;const utcDay=timeInterval(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/durationDay,t=>t.getUTCDate()-1);utcDay.range;const unixDay=timeInterval(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/durationDay,t=>Math.floor(t/durationDay));unixDay.range;function timeWeekday(t){return timeInterval(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*durationMinute)/durationWeek)}const timeSunday=timeWeekday(0),timeMonday=timeWeekday(1),timeTuesday=timeWeekday(2),timeWednesday=timeWeekday(3),timeThursday=timeWeekday(4),timeFriday=timeWeekday(5),timeSaturday=timeWeekday(6);timeSunday.range;timeMonday.range;timeTuesday.range;timeWednesday.range;timeThursday.range;timeFriday.range;timeSaturday.range;function utcWeekday(t){return timeInterval(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/durationWeek)}const utcSunday=utcWeekday(0),utcMonday=utcWeekday(1),utcTuesday=utcWeekday(2),utcWednesday=utcWeekday(3),utcThursday=utcWeekday(4),utcFriday=utcWeekday(5),utcSaturday=utcWeekday(6);utcSunday.range;utcMonday.range;utcTuesday.range;utcWednesday.range;utcThursday.range;utcFriday.range;utcSaturday.range;const timeMonth=timeInterval(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());timeMonth.range;const utcMonth=timeInterval(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());utcMonth.range;const timeYear=timeInterval(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());timeYear.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:timeInterval(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});timeYear.range;const utcYear=timeInterval(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());utcYear.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:timeInterval(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});utcYear.range;function ticker(t,e,n,i,o,u){const d=[[second,1,durationSecond],[second,5,5*durationSecond],[second,15,15*durationSecond],[second,30,30*durationSecond],[u,1,durationMinute],[u,5,5*durationMinute],[u,15,15*durationMinute],[u,30,30*durationMinute],[o,1,durationHour],[o,3,3*durationHour],[o,6,6*durationHour],[o,12,12*durationHour],[i,1,durationDay],[i,2,2*durationDay],[n,1,durationWeek],[e,1,durationMonth],[e,3,3*durationMonth],[t,1,durationYear]];function h(p,_,f){const l=_<p;l&&([p,_]=[_,p]);const g=f&&typeof f.range=="function"?f:m(p,_,f),v=g?g.range(p,+_+1):[];return l?v.reverse():v}function m(p,_,f){const l=Math.abs(_-p)/f,g=bisector(([,,T])=>T).right(d,l);if(g===d.length)return t.every(tickStep(p/durationYear,_/durationYear,f));if(g===0)return millisecond.every(Math.max(tickStep(p,_,f),1));const[v,S]=d[l/d[g-1][2]<d[g][2]/l?g-1:g];return v.every(S)}return[h,m]}const[utcTicks,utcTickInterval]=ticker(utcYear,utcMonth,utcSunday,unixDay,utcHour,utcMinute),[timeTicks,timeTickInterval]=ticker(timeYear,timeMonth,timeSunday,timeDay,timeHour,timeMinute);function localDate(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function utcDate(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function newDate(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function formatLocale(t){var e=t.dateTime,n=t.date,i=t.time,o=t.periods,u=t.days,d=t.shortDays,h=t.months,m=t.shortMonths,p=formatRe(o),_=formatLookup(o),f=formatRe(u),l=formatLookup(u),g=formatRe(d),v=formatLookup(d),S=formatRe(h),T=formatLookup(h),E=formatRe(m),O=formatLookup(m),R={a:G,A:ie,b:Z,B:te,c:null,d:formatDayOfMonth,e:formatDayOfMonth,f:formatMicroseconds,g:formatYearISO,G:formatFullYearISO,H:formatHour24,I:formatHour12,j:formatDayOfYear,L:formatMilliseconds,m:formatMonthNumber,M:formatMinutes,p:ee,q:le,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatSeconds,u:formatWeekdayNumberMonday,U:formatWeekNumberSunday,V:formatWeekNumberISO,w:formatWeekdayNumberSunday,W:formatWeekNumberMonday,x:null,X:null,y:formatYear,Y:formatFullYear,Z:formatZone,"%":formatLiteralPercent},M={a:ge,A:Ae,b:Te,B:Ce,c:null,d:formatUTCDayOfMonth,e:formatUTCDayOfMonth,f:formatUTCMicroseconds,g:formatUTCYearISO,G:formatUTCFullYearISO,H:formatUTCHour24,I:formatUTCHour12,j:formatUTCDayOfYear,L:formatUTCMilliseconds,m:formatUTCMonthNumber,M:formatUTCMinutes,p:De,q:Re,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatUTCSeconds,u:formatUTCWeekdayNumberMonday,U:formatUTCWeekNumberSunday,V:formatUTCWeekNumberISO,w:formatUTCWeekdayNumberSunday,W:formatUTCWeekNumberMonday,x:null,X:null,y:formatUTCYear,Y:formatUTCFullYear,Z:formatUTCZone,"%":formatLiteralPercent},C={a:B,A:U,b:H,B:Y,c:K,d:parseDayOfMonth,e:parseDayOfMonth,f:parseMicroseconds,g:parseYear,G:parseFullYear,H:parseHour24,I:parseHour24,j:parseDayOfYear,L:parseMilliseconds,m:parseMonthNumber,M:parseMinutes,p:N,q:parseQuarter,Q:parseUnixTimestamp,s:parseUnixTimestampSeconds,S:parseSeconds,u:parseWeekdayNumberMonday,U:parseWeekNumberSunday,V:parseWeekNumberISO,w:parseWeekdayNumberSunday,W:parseWeekNumberMonday,x:z,X:V,y:parseYear,Y:parseFullYear,Z:parseZone,"%":parseLiteralPercent};R.x=j(n,R),R.X=j(i,R),R.c=j(e,R),M.x=j(n,M),M.X=j(i,M),M.c=j(e,M);function j(Ee,Ie){return function(Le){var Se=[],Ye=-1,Fe=0,at=Ee.length,lt,dt,Rt;for(Le instanceof Date||(Le=new Date(+Le));++Ye<at;)Ee.charCodeAt(Ye)===37&&(Se.push(Ee.slice(Fe,Ye)),(dt=pads[lt=Ee.charAt(++Ye)])!=null?lt=Ee.charAt(++Ye):dt=lt==="e"?" ":"0",(Rt=Ie[lt])&&(lt=Rt(Le,dt)),Se.push(lt),Fe=Ye+1);return Se.push(Ee.slice(Fe,Ye)),Se.join("")}}function $(Ee,Ie){return function(Le){var Se=newDate(1900,void 0,1),Ye=L(Se,Ee,Le+="",0),Fe,at;if(Ye!=Le.length)return null;if("Q"in Se)return new Date(Se.Q);if("s"in Se)return new Date(Se.s*1e3+("L"in Se?Se.L:0));if(Ie&&!("Z"in Se)&&(Se.Z=0),"p"in Se&&(Se.H=Se.H%12+Se.p*12),Se.m===void 0&&(Se.m="q"in Se?Se.q:0),"V"in Se){if(Se.V<1||Se.V>53)return null;"w"in Se||(Se.w=1),"Z"in Se?(Fe=utcDate(newDate(Se.y,0,1)),at=Fe.getUTCDay(),Fe=at>4||at===0?utcMonday.ceil(Fe):utcMonday(Fe),Fe=utcDay.offset(Fe,(Se.V-1)*7),Se.y=Fe.getUTCFullYear(),Se.m=Fe.getUTCMonth(),Se.d=Fe.getUTCDate()+(Se.w+6)%7):(Fe=localDate(newDate(Se.y,0,1)),at=Fe.getDay(),Fe=at>4||at===0?timeMonday.ceil(Fe):timeMonday(Fe),Fe=timeDay.offset(Fe,(Se.V-1)*7),Se.y=Fe.getFullYear(),Se.m=Fe.getMonth(),Se.d=Fe.getDate()+(Se.w+6)%7)}else("W"in Se||"U"in Se)&&("w"in Se||(Se.w="u"in Se?Se.u%7:"W"in Se?1:0),at="Z"in Se?utcDate(newDate(Se.y,0,1)).getUTCDay():localDate(newDate(Se.y,0,1)).getDay(),Se.m=0,Se.d="W"in Se?(Se.w+6)%7+Se.W*7-(at+5)%7:Se.w+Se.U*7-(at+6)%7);return"Z"in Se?(Se.H+=Se.Z/100|0,Se.M+=Se.Z%100,utcDate(Se)):localDate(Se)}}function L(Ee,Ie,Le,Se){for(var Ye=0,Fe=Ie.length,at=Le.length,lt,dt;Ye<Fe;){if(Se>=at)return-1;if(lt=Ie.charCodeAt(Ye++),lt===37){if(lt=Ie.charAt(Ye++),dt=C[lt in pads?Ie.charAt(Ye++):lt],!dt||(Se=dt(Ee,Le,Se))<0)return-1}else if(lt!=Le.charCodeAt(Se++))return-1}return Se}function N(Ee,Ie,Le){var Se=p.exec(Ie.slice(Le));return Se?(Ee.p=_.get(Se[0].toLowerCase()),Le+Se[0].length):-1}function B(Ee,Ie,Le){var Se=g.exec(Ie.slice(Le));return Se?(Ee.w=v.get(Se[0].toLowerCase()),Le+Se[0].length):-1}function U(Ee,Ie,Le){var Se=f.exec(Ie.slice(Le));return Se?(Ee.w=l.get(Se[0].toLowerCase()),Le+Se[0].length):-1}function H(Ee,Ie,Le){var Se=E.exec(Ie.slice(Le));return Se?(Ee.m=O.get(Se[0].toLowerCase()),Le+Se[0].length):-1}function Y(Ee,Ie,Le){var Se=S.exec(Ie.slice(Le));return Se?(Ee.m=T.get(Se[0].toLowerCase()),Le+Se[0].length):-1}function K(Ee,Ie,Le){return L(Ee,e,Ie,Le)}function z(Ee,Ie,Le){return L(Ee,n,Ie,Le)}function V(Ee,Ie,Le){return L(Ee,i,Ie,Le)}function G(Ee){return d[Ee.getDay()]}function ie(Ee){return u[Ee.getDay()]}function Z(Ee){return m[Ee.getMonth()]}function te(Ee){return h[Ee.getMonth()]}function ee(Ee){return o[+(Ee.getHours()>=12)]}function le(Ee){return 1+~~(Ee.getMonth()/3)}function ge(Ee){return d[Ee.getUTCDay()]}function Ae(Ee){return u[Ee.getUTCDay()]}function Te(Ee){return m[Ee.getUTCMonth()]}function Ce(Ee){return h[Ee.getUTCMonth()]}function De(Ee){return o[+(Ee.getUTCHours()>=12)]}function Re(Ee){return 1+~~(Ee.getUTCMonth()/3)}return{format:function(Ee){var Ie=j(Ee+="",R);return Ie.toString=function(){return Ee},Ie},parse:function(Ee){var Ie=$(Ee+="",!1);return Ie.toString=function(){return Ee},Ie},utcFormat:function(Ee){var Ie=j(Ee+="",M);return Ie.toString=function(){return Ee},Ie},utcParse:function(Ee){var Ie=$(Ee+="",!0);return Ie.toString=function(){return Ee},Ie}}}var pads={"-":"",_:" ",0:"0"},numberRe=/^\s*\d+/,percentRe=/^%/,requoteRe=/[\\^$*+?|[\]().{}]/g;function pad(t,e,n){var i=t<0?"-":"",o=(i?-t:t)+"",u=o.length;return i+(u<n?new Array(n-u+1).join(e)+o:o)}function requote(t){return t.replace(requoteRe,"\\$&")}function formatRe(t){return new RegExp("^(?:"+t.map(requote).join("|")+")","i")}function formatLookup(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function parseWeekdayNumberSunday(t,e,n){var i=numberRe.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function parseWeekdayNumberMonday(t,e,n){var i=numberRe.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function parseWeekNumberSunday(t,e,n){var i=numberRe.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function parseWeekNumberISO(t,e,n){var i=numberRe.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function parseWeekNumberMonday(t,e,n){var i=numberRe.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function parseFullYear(t,e,n){var i=numberRe.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function parseYear(t,e,n){var i=numberRe.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function parseZone(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function parseQuarter(t,e,n){var i=numberRe.exec(e.slice(n,n+1));return i?(t.q=i[0]*3-3,n+i[0].length):-1}function parseMonthNumber(t,e,n){var i=numberRe.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function parseDayOfMonth(t,e,n){var i=numberRe.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function parseDayOfYear(t,e,n){var i=numberRe.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function parseHour24(t,e,n){var i=numberRe.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function parseMinutes(t,e,n){var i=numberRe.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function parseSeconds(t,e,n){var i=numberRe.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function parseMilliseconds(t,e,n){var i=numberRe.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function parseMicroseconds(t,e,n){var i=numberRe.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function parseLiteralPercent(t,e,n){var i=percentRe.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function parseUnixTimestamp(t,e,n){var i=numberRe.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function parseUnixTimestampSeconds(t,e,n){var i=numberRe.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function formatDayOfMonth(t,e){return pad(t.getDate(),e,2)}function formatHour24(t,e){return pad(t.getHours(),e,2)}function formatHour12(t,e){return pad(t.getHours()%12||12,e,2)}function formatDayOfYear(t,e){return pad(1+timeDay.count(timeYear(t),t),e,3)}function formatMilliseconds(t,e){return pad(t.getMilliseconds(),e,3)}function formatMicroseconds(t,e){return formatMilliseconds(t,e)+"000"}function formatMonthNumber(t,e){return pad(t.getMonth()+1,e,2)}function formatMinutes(t,e){return pad(t.getMinutes(),e,2)}function formatSeconds(t,e){return pad(t.getSeconds(),e,2)}function formatWeekdayNumberMonday(t){var e=t.getDay();return e===0?7:e}function formatWeekNumberSunday(t,e){return pad(timeSunday.count(timeYear(t)-1,t),e,2)}function dISO(t){var e=t.getDay();return e>=4||e===0?timeThursday(t):timeThursday.ceil(t)}function formatWeekNumberISO(t,e){return t=dISO(t),pad(timeThursday.count(timeYear(t),t)+(timeYear(t).getDay()===4),e,2)}function formatWeekdayNumberSunday(t){return t.getDay()}function formatWeekNumberMonday(t,e){return pad(timeMonday.count(timeYear(t)-1,t),e,2)}function formatYear(t,e){return pad(t.getFullYear()%100,e,2)}function formatYearISO(t,e){return t=dISO(t),pad(t.getFullYear()%100,e,2)}function formatFullYear(t,e){return pad(t.getFullYear()%1e4,e,4)}function formatFullYearISO(t,e){var n=t.getDay();return t=n>=4||n===0?timeThursday(t):timeThursday.ceil(t),pad(t.getFullYear()%1e4,e,4)}function formatZone(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+pad(e/60|0,"0",2)+pad(e%60,"0",2)}function formatUTCDayOfMonth(t,e){return pad(t.getUTCDate(),e,2)}function formatUTCHour24(t,e){return pad(t.getUTCHours(),e,2)}function formatUTCHour12(t,e){return pad(t.getUTCHours()%12||12,e,2)}function formatUTCDayOfYear(t,e){return pad(1+utcDay.count(utcYear(t),t),e,3)}function formatUTCMilliseconds(t,e){return pad(t.getUTCMilliseconds(),e,3)}function formatUTCMicroseconds(t,e){return formatUTCMilliseconds(t,e)+"000"}function formatUTCMonthNumber(t,e){return pad(t.getUTCMonth()+1,e,2)}function formatUTCMinutes(t,e){return pad(t.getUTCMinutes(),e,2)}function formatUTCSeconds(t,e){return pad(t.getUTCSeconds(),e,2)}function formatUTCWeekdayNumberMonday(t){var e=t.getUTCDay();return e===0?7:e}function formatUTCWeekNumberSunday(t,e){return pad(utcSunday.count(utcYear(t)-1,t),e,2)}function UTCdISO(t){var e=t.getUTCDay();return e>=4||e===0?utcThursday(t):utcThursday.ceil(t)}function formatUTCWeekNumberISO(t,e){return t=UTCdISO(t),pad(utcThursday.count(utcYear(t),t)+(utcYear(t).getUTCDay()===4),e,2)}function formatUTCWeekdayNumberSunday(t){return t.getUTCDay()}function formatUTCWeekNumberMonday(t,e){return pad(utcMonday.count(utcYear(t)-1,t),e,2)}function formatUTCYear(t,e){return pad(t.getUTCFullYear()%100,e,2)}function formatUTCYearISO(t,e){return t=UTCdISO(t),pad(t.getUTCFullYear()%100,e,2)}function formatUTCFullYear(t,e){return pad(t.getUTCFullYear()%1e4,e,4)}function formatUTCFullYearISO(t,e){var n=t.getUTCDay();return t=n>=4||n===0?utcThursday(t):utcThursday.ceil(t),pad(t.getUTCFullYear()%1e4,e,4)}function formatUTCZone(){return"+0000"}function formatLiteralPercent(){return"%"}function formatUnixTimestamp(t){return+t}function formatUnixTimestampSeconds(t){return Math.floor(+t/1e3)}var locale,timeFormat,utcFormat;defaultLocale({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function defaultLocale(t){return locale=formatLocale(t),timeFormat=locale.format,locale.parse,utcFormat=locale.utcFormat,locale.utcParse,locale}function date(t){return new Date(t)}function number$1(t){return t instanceof Date?+t:+new Date(+t)}function calendar(t,e,n,i,o,u,d,h,m,p){var _=continuous(),f=_.invert,l=_.domain,g=p(".%L"),v=p(":%S"),S=p("%I:%M"),T=p("%I %p"),E=p("%a %d"),O=p("%b %d"),R=p("%B"),M=p("%Y");function C(j){return(m(j)<j?g:h(j)<j?v:d(j)<j?S:u(j)<j?T:i(j)<j?o(j)<j?E:O:n(j)<j?R:M)(j)}return _.invert=function(j){return new Date(f(j))},_.domain=function(j){return arguments.length?l(Array.from(j,number$1)):l().map(date)},_.ticks=function(j){var $=l();return t($[0],$[$.length-1],j??10)},_.tickFormat=function(j,$){return $==null?C:p($)},_.nice=function(j){var $=l();return(!j||typeof j.range!="function")&&(j=e($[0],$[$.length-1],j??10)),j?l(nice($,j)):_},_.copy=function(){return copy$1(_,calendar(t,e,n,i,o,u,d,h,m,p))},_}function time$1(){return initRange.apply(calendar(timeTicks,timeTickInterval,timeYear,timeMonth,timeSunday,timeDay,timeHour,timeMinute,second,timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function utcTime(){return initRange.apply(calendar(utcTicks,utcTickInterval,utcYear,utcMonth,utcSunday,utcDay,utcHour,utcMinute,second,utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function transformer$1(){var t=0,e=1,n,i,o,u,d=identity$4,h=!1,m;function p(f){return f==null||isNaN(f=+f)?m:d(o===0?.5:(f=(u(f)-n)*o,h?Math.max(0,Math.min(1,f)):f))}p.domain=function(f){return arguments.length?([t,e]=f,n=u(t=+t),i=u(e=+e),o=n===i?0:1/(i-n),p):[t,e]},p.clamp=function(f){return arguments.length?(h=!!f,p):h},p.interpolator=function(f){return arguments.length?(d=f,p):d};function _(f){return function(l){var g,v;return arguments.length?([g,v]=l,d=f(g,v),p):[d(0),d(1)]}}return p.range=_(interpolate$2),p.rangeRound=_(interpolateRound),p.unknown=function(f){return arguments.length?(m=f,p):m},function(f){return u=f,n=f(t),i=f(e),o=n===i?0:1/(i-n),p}}function copy(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function sequential(){var t=linearish(transformer$1()(identity$4));return t.copy=function(){return copy(t,sequential())},initInterpolator.apply(t,arguments)}function sequentialLog(){var t=loggish(transformer$1()).domain([1,10]);return t.copy=function(){return copy(t,sequentialLog()).base(t.base())},initInterpolator.apply(t,arguments)}function sequentialSymlog(){var t=symlogish(transformer$1());return t.copy=function(){return copy(t,sequentialSymlog()).constant(t.constant())},initInterpolator.apply(t,arguments)}function sequentialPow(){var t=powish(transformer$1());return t.copy=function(){return copy(t,sequentialPow()).exponent(t.exponent())},initInterpolator.apply(t,arguments)}function sequentialSqrt(){return sequentialPow.apply(null,arguments).exponent(.5)}function sequentialQuantile(){var t=[],e=identity$4;function n(i){if(i!=null&&!isNaN(i=+i))return e((bisectRight(t,i,1)-1)/(t.length-1))}return n.domain=function(i){if(!arguments.length)return t.slice();t=[];for(let o of i)o!=null&&!isNaN(o=+o)&&t.push(o);return t.sort(ascending),n},n.interpolator=function(i){return arguments.length?(e=i,n):e},n.range=function(){return t.map((i,o)=>e(o/(t.length-1)))},n.quantiles=function(i){return Array.from({length:i+1},(o,u)=>quantile$1(t,u/i))},n.copy=function(){return sequentialQuantile(e).domain(t)},initInterpolator.apply(n,arguments)}function transformer(){var t=0,e=.5,n=1,i=1,o,u,d,h,m,p=identity$4,_,f=!1,l;function g(S){return isNaN(S=+S)?l:(S=.5+((S=+_(S))-u)*(i*S<i*u?h:m),p(f?Math.max(0,Math.min(1,S)):S))}g.domain=function(S){return arguments.length?([t,e,n]=S,o=_(t=+t),u=_(e=+e),d=_(n=+n),h=o===u?0:.5/(u-o),m=u===d?0:.5/(d-u),i=u<o?-1:1,g):[t,e,n]},g.clamp=function(S){return arguments.length?(f=!!S,g):f},g.interpolator=function(S){return arguments.length?(p=S,g):p};function v(S){return function(T){var E,O,R;return arguments.length?([E,O,R]=T,p=piecewise(S,[E,O,R]),g):[p(0),p(.5),p(1)]}}return g.range=v(interpolate$2),g.rangeRound=v(interpolateRound),g.unknown=function(S){return arguments.length?(l=S,g):l},function(S){return _=S,o=S(t),u=S(e),d=S(n),h=o===u?0:.5/(u-o),m=u===d?0:.5/(d-u),i=u<o?-1:1,g}}function diverging(){var t=linearish(transformer()(identity$4));return t.copy=function(){return copy(t,diverging())},initInterpolator.apply(t,arguments)}function divergingLog(){var t=loggish(transformer()).domain([.1,1,10]);return t.copy=function(){return copy(t,divergingLog()).base(t.base())},initInterpolator.apply(t,arguments)}function divergingSymlog(){var t=symlogish(transformer());return t.copy=function(){return copy(t,divergingSymlog()).constant(t.constant())},initInterpolator.apply(t,arguments)}function divergingPow(){var t=powish(transformer());return t.copy=function(){return copy(t,divergingPow()).exponent(t.exponent())},initInterpolator.apply(t,arguments)}function divergingSqrt(){return divergingPow.apply(null,arguments).exponent(.5)}const d3Scales=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:band,scaleDiverging:diverging,scaleDivergingLog:divergingLog,scaleDivergingPow:divergingPow,scaleDivergingSqrt:divergingSqrt,scaleDivergingSymlog:divergingSymlog,scaleIdentity:identity$2,scaleImplicit:implicit,scaleLinear:linear,scaleLog:log,scaleOrdinal:ordinal,scalePoint:point,scalePow:pow,scaleQuantile:quantile,scaleQuantize:quantize,scaleRadial:radial,scaleSequential:sequential,scaleSequentialLog:sequentialLog,scaleSequentialPow:sequentialPow,scaleSequentialQuantile:sequentialQuantile,scaleSequentialSqrt:sequentialSqrt,scaleSequentialSymlog:sequentialSymlog,scaleSqrt:sqrt,scaleSymlog:symlog,scaleThreshold:threshold,scaleTime:time$1,scaleUtc:utcTime,tickFormat},Symbol.toStringTag,{value:"Module"}));var _baseExtremum,hasRequired_baseExtremum;function require_baseExtremum(){if(hasRequired_baseExtremum)return _baseExtremum;hasRequired_baseExtremum=1;var t=requireIsSymbol();function e(n,i,o){for(var u=-1,d=n.length;++u<d;){var h=n[u],m=i(h);if(m!=null&&(p===void 0?m===m&&!t(m):o(m,p)))var p=m,_=h}return _}return _baseExtremum=e,_baseExtremum}var _baseGt,hasRequired_baseGt;function require_baseGt(){if(hasRequired_baseGt)return _baseGt;hasRequired_baseGt=1;function t(e,n){return e>n}return _baseGt=t,_baseGt}var max_1,hasRequiredMax;function requireMax(){if(hasRequiredMax)return max_1;hasRequiredMax=1;var t=require_baseExtremum(),e=require_baseGt(),n=requireIdentity();function i(o){return o&&o.length?t(o,n,e):void 0}return max_1=i,max_1}var maxExports=requireMax();const max$1=getDefaultExportFromCjs(maxExports);var _baseLt,hasRequired_baseLt;function require_baseLt(){if(hasRequired_baseLt)return _baseLt;hasRequired_baseLt=1;function t(e,n){return e<n}return _baseLt=t,_baseLt}var min_1,hasRequiredMin;function requireMin(){if(hasRequiredMin)return min_1;hasRequiredMin=1;var t=require_baseExtremum(),e=require_baseLt(),n=requireIdentity();function i(o){return o&&o.length?t(o,n,e):void 0}return min_1=i,min_1}var minExports=requireMin();const min$1=getDefaultExportFromCjs(minExports);var map_1,hasRequiredMap;function requireMap(){if(hasRequiredMap)return map_1;hasRequiredMap=1;var t=require_arrayMap(),e=require_baseIteratee(),n=require_baseMap(),i=requireIsArray();function o(u,d){var h=i(u)?t:n;return h(u,e(d,3))}return map_1=o,map_1}var flatMap_1,hasRequiredFlatMap;function requireFlatMap(){if(hasRequiredFlatMap)return flatMap_1;hasRequiredFlatMap=1;var t=require_baseFlatten(),e=requireMap();function n(i,o){return t(e(i,o),1)}return flatMap_1=n,flatMap_1}var flatMapExports=requireFlatMap();const flatMap=getDefaultExportFromCjs(flatMapExports);var isEqual_1,hasRequiredIsEqual;function requireIsEqual(){if(hasRequiredIsEqual)return isEqual_1;hasRequiredIsEqual=1;var t=require_baseIsEqual();function e(n,i){return t(n,i)}return isEqual_1=e,isEqual_1}var isEqualExports=requireIsEqual();const isEqual=getDefaultExportFromCjs(isEqualExports);var MAX_DIGITS=1e9,defaults={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Decimal,external=!0,decimalError="[DecimalError] ",invalidArgument=decimalError+"Invalid argument: ",exponentOutOfRange=decimalError+"Exponent out of range: ",mathfloor=Math.floor,mathpow=Math.pow,isDecimal=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ONE,BASE=1e7,LOG_BASE=7,MAX_SAFE_INTEGER=9007199254740991,MAX_E=mathfloor(MAX_SAFE_INTEGER/LOG_BASE),P={};P.absoluteValue=P.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};P.comparedTo=P.cmp=function(t){var e,n,i,o,u=this;if(t=new u.constructor(t),u.s!==t.s)return u.s||-t.s;if(u.e!==t.e)return u.e>t.e^u.s<0?1:-1;for(i=u.d.length,o=t.d.length,e=0,n=i<o?i:o;e<n;++e)if(u.d[e]!==t.d[e])return u.d[e]>t.d[e]^u.s<0?1:-1;return i===o?0:i>o^u.s<0?1:-1};P.decimalPlaces=P.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*LOG_BASE;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};P.dividedBy=P.div=function(t){return divide(this,new this.constructor(t))};P.dividedToIntegerBy=P.idiv=function(t){var e=this,n=e.constructor;return round$1(divide(e,new n(t),0,1),n.precision)};P.equals=P.eq=function(t){return!this.cmp(t)};P.exponent=function(){return getBase10Exponent(this)};P.greaterThan=P.gt=function(t){return this.cmp(t)>0};P.greaterThanOrEqualTo=P.gte=function(t){return this.cmp(t)>=0};P.isInteger=P.isint=function(){return this.e>this.d.length-2};P.isNegative=P.isneg=function(){return this.s<0};P.isPositive=P.ispos=function(){return this.s>0};P.isZero=function(){return this.s===0};P.lessThan=P.lt=function(t){return this.cmp(t)<0};P.lessThanOrEqualTo=P.lte=function(t){return this.cmp(t)<1};P.logarithm=P.log=function(t){var e,n=this,i=n.constructor,o=i.precision,u=o+5;if(t===void 0)t=new i(10);else if(t=new i(t),t.s<1||t.eq(ONE))throw Error(decimalError+"NaN");if(n.s<1)throw Error(decimalError+(n.s?"NaN":"-Infinity"));return n.eq(ONE)?new i(0):(external=!1,e=divide(ln(n,u),ln(t,u),u),external=!0,round$1(e,o))};P.minus=P.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?subtract(e,t):add(e,(t.s=-t.s,t))};P.modulo=P.mod=function(t){var e,n=this,i=n.constructor,o=i.precision;if(t=new i(t),!t.s)throw Error(decimalError+"NaN");return n.s?(external=!1,e=divide(n,t,0,1).times(t),external=!0,n.minus(e)):round$1(new i(n),o)};P.naturalExponential=P.exp=function(){return exp(this)};P.naturalLogarithm=P.ln=function(){return ln(this)};P.negated=P.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};P.plus=P.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?add(e,t):subtract(e,(t.s=-t.s,t))};P.precision=P.sd=function(t){var e,n,i,o=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(invalidArgument+t);if(e=getBase10Exponent(o)+1,i=o.d.length-1,n=i*LOG_BASE+1,i=o.d[i],i){for(;i%10==0;i/=10)n--;for(i=o.d[0];i>=10;i/=10)n++}return t&&e>n?e:n};P.squareRoot=P.sqrt=function(){var t,e,n,i,o,u,d,h=this,m=h.constructor;if(h.s<1){if(!h.s)return new m(0);throw Error(decimalError+"NaN")}for(t=getBase10Exponent(h),external=!1,o=Math.sqrt(+h),o==0||o==1/0?(e=digitsToString(h.d),(e.length+t)%2==0&&(e+="0"),o=Math.sqrt(e),t=mathfloor((t+1)/2)-(t<0||t%2),o==1/0?e="5e"+t:(e=o.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),i=new m(e)):i=new m(o.toString()),n=m.precision,o=d=n+3;;)if(u=i,i=u.plus(divide(h,u,d+2)).times(.5),digitsToString(u.d).slice(0,d)===(e=digitsToString(i.d)).slice(0,d)){if(e=e.slice(d-3,d+1),o==d&&e=="4999"){if(round$1(u,n+1,0),u.times(u).eq(h)){i=u;break}}else if(e!="9999")break;d+=4}return external=!0,round$1(i,n)};P.times=P.mul=function(t){var e,n,i,o,u,d,h,m,p,_=this,f=_.constructor,l=_.d,g=(t=new f(t)).d;if(!_.s||!t.s)return new f(0);for(t.s*=_.s,n=_.e+t.e,m=l.length,p=g.length,m<p&&(u=l,l=g,g=u,d=m,m=p,p=d),u=[],d=m+p,i=d;i--;)u.push(0);for(i=p;--i>=0;){for(e=0,o=m+i;o>i;)h=u[o]+g[i]*l[o-i-1]+e,u[o--]=h%BASE|0,e=h/BASE|0;u[o]=(u[o]+e)%BASE|0}for(;!u[--d];)u.pop();return e?++n:u.shift(),t.d=u,t.e=n,external?round$1(t,f.precision):t};P.toDecimalPlaces=P.todp=function(t,e){var n=this,i=n.constructor;return n=new i(n),t===void 0?n:(checkInt32(t,0,MAX_DIGITS),e===void 0?e=i.rounding:checkInt32(e,0,8),round$1(n,t+getBase10Exponent(n)+1,e))};P.toExponential=function(t,e){var n,i=this,o=i.constructor;return t===void 0?n=toString$1(i,!0):(checkInt32(t,0,MAX_DIGITS),e===void 0?e=o.rounding:checkInt32(e,0,8),i=round$1(new o(i),t+1,e),n=toString$1(i,!0,t+1)),n};P.toFixed=function(t,e){var n,i,o=this,u=o.constructor;return t===void 0?toString$1(o):(checkInt32(t,0,MAX_DIGITS),e===void 0?e=u.rounding:checkInt32(e,0,8),i=round$1(new u(o),t+getBase10Exponent(o)+1,e),n=toString$1(i.abs(),!1,t+getBase10Exponent(i)+1),o.isneg()&&!o.isZero()?"-"+n:n)};P.toInteger=P.toint=function(){var t=this,e=t.constructor;return round$1(new e(t),getBase10Exponent(t)+1,e.rounding)};P.toNumber=function(){return+this};P.toPower=P.pow=function(t){var e,n,i,o,u,d,h=this,m=h.constructor,p=12,_=+(t=new m(t));if(!t.s)return new m(ONE);if(h=new m(h),!h.s){if(t.s<1)throw Error(decimalError+"Infinity");return h}if(h.eq(ONE))return h;if(i=m.precision,t.eq(ONE))return round$1(h,i);if(e=t.e,n=t.d.length-1,d=e>=n,u=h.s,d){if((n=_<0?-_:_)<=MAX_SAFE_INTEGER){for(o=new m(ONE),e=Math.ceil(i/LOG_BASE+4),external=!1;n%2&&(o=o.times(h),truncate(o.d,e)),n=mathfloor(n/2),n!==0;)h=h.times(h),truncate(h.d,e);return external=!0,t.s<0?new m(ONE).div(o):round$1(o,i)}}else if(u<0)throw Error(decimalError+"NaN");return u=u<0&&t.d[Math.max(e,n)]&1?-1:1,h.s=1,external=!1,o=t.times(ln(h,i+p)),external=!0,o=exp(o),o.s=u,o};P.toPrecision=function(t,e){var n,i,o=this,u=o.constructor;return t===void 0?(n=getBase10Exponent(o),i=toString$1(o,n<=u.toExpNeg||n>=u.toExpPos)):(checkInt32(t,1,MAX_DIGITS),e===void 0?e=u.rounding:checkInt32(e,0,8),o=round$1(new u(o),t,e),n=getBase10Exponent(o),i=toString$1(o,t<=n||n<=u.toExpNeg,t)),i};P.toSignificantDigits=P.tosd=function(t,e){var n=this,i=n.constructor;return t===void 0?(t=i.precision,e=i.rounding):(checkInt32(t,1,MAX_DIGITS),e===void 0?e=i.rounding:checkInt32(e,0,8)),round$1(new i(n),t,e)};P.toString=P.valueOf=P.val=P.toJSON=P[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=getBase10Exponent(t),n=t.constructor;return toString$1(t,e<=n.toExpNeg||e>=n.toExpPos)};function add(t,e){var n,i,o,u,d,h,m,p,_=t.constructor,f=_.precision;if(!t.s||!e.s)return e.s||(e=new _(t)),external?round$1(e,f):e;if(m=t.d,p=e.d,d=t.e,o=e.e,m=m.slice(),u=d-o,u){for(u<0?(i=m,u=-u,h=p.length):(i=p,o=d,h=m.length),d=Math.ceil(f/LOG_BASE),h=d>h?d+1:h+1,u>h&&(u=h,i.length=1),i.reverse();u--;)i.push(0);i.reverse()}for(h=m.length,u=p.length,h-u<0&&(u=h,i=p,p=m,m=i),n=0;u;)n=(m[--u]=m[u]+p[u]+n)/BASE|0,m[u]%=BASE;for(n&&(m.unshift(n),++o),h=m.length;m[--h]==0;)m.pop();return e.d=m,e.e=o,external?round$1(e,f):e}function checkInt32(t,e,n){if(t!==~~t||t<e||t>n)throw Error(invalidArgument+t)}function digitsToString(t){var e,n,i,o=t.length-1,u="",d=t[0];if(o>0){for(u+=d,e=1;e<o;e++)i=t[e]+"",n=LOG_BASE-i.length,n&&(u+=getZeroString(n)),u+=i;d=t[e],i=d+"",n=LOG_BASE-i.length,n&&(u+=getZeroString(n))}else if(d===0)return"0";for(;d%10===0;)d/=10;return u+d}var divide=(function(){function t(i,o){var u,d=0,h=i.length;for(i=i.slice();h--;)u=i[h]*o+d,i[h]=u%BASE|0,d=u/BASE|0;return d&&i.unshift(d),i}function e(i,o,u,d){var h,m;if(u!=d)m=u>d?1:-1;else for(h=m=0;h<u;h++)if(i[h]!=o[h]){m=i[h]>o[h]?1:-1;break}return m}function n(i,o,u){for(var d=0;u--;)i[u]-=d,d=i[u]<o[u]?1:0,i[u]=d*BASE+i[u]-o[u];for(;!i[0]&&i.length>1;)i.shift()}return function(i,o,u,d){var h,m,p,_,f,l,g,v,S,T,E,O,R,M,C,j,$,L,N=i.constructor,B=i.s==o.s?1:-1,U=i.d,H=o.d;if(!i.s)return new N(i);if(!o.s)throw Error(decimalError+"Division by zero");for(m=i.e-o.e,$=H.length,C=U.length,g=new N(B),v=g.d=[],p=0;H[p]==(U[p]||0);)++p;if(H[p]>(U[p]||0)&&--m,u==null?O=u=N.precision:d?O=u+(getBase10Exponent(i)-getBase10Exponent(o))+1:O=u,O<0)return new N(0);if(O=O/LOG_BASE+2|0,p=0,$==1)for(_=0,H=H[0],O++;(p<C||_)&&O--;p++)R=_*BASE+(U[p]||0),v[p]=R/H|0,_=R%H|0;else{for(_=BASE/(H[0]+1)|0,_>1&&(H=t(H,_),U=t(U,_),$=H.length,C=U.length),M=$,S=U.slice(0,$),T=S.length;T<$;)S[T++]=0;L=H.slice(),L.unshift(0),j=H[0],H[1]>=BASE/2&&++j;do _=0,h=e(H,S,$,T),h<0?(E=S[0],$!=T&&(E=E*BASE+(S[1]||0)),_=E/j|0,_>1?(_>=BASE&&(_=BASE-1),f=t(H,_),l=f.length,T=S.length,h=e(f,S,l,T),h==1&&(_--,n(f,$<l?L:H,l))):(_==0&&(h=_=1),f=H.slice()),l=f.length,l<T&&f.unshift(0),n(S,f,T),h==-1&&(T=S.length,h=e(H,S,$,T),h<1&&(_++,n(S,$<T?L:H,T))),T=S.length):h===0&&(_++,S=[0]),v[p++]=_,h&&S[0]?S[T++]=U[M]||0:(S=[U[M]],T=1);while((M++<C||S[0]!==void 0)&&O--)}return v[0]||v.shift(),g.e=m,round$1(g,d?u+getBase10Exponent(g)+1:u)}})();function exp(t,e){var n,i,o,u,d,h,m=0,p=0,_=t.constructor,f=_.precision;if(getBase10Exponent(t)>16)throw Error(exponentOutOfRange+getBase10Exponent(t));if(!t.s)return new _(ONE);for(external=!1,h=f,d=new _(.03125);t.abs().gte(.1);)t=t.times(d),p+=5;for(i=Math.log(mathpow(2,p))/Math.LN10*2+5|0,h+=i,n=o=u=new _(ONE),_.precision=h;;){if(o=round$1(o.times(t),h),n=n.times(++m),d=u.plus(divide(o,n,h)),digitsToString(d.d).slice(0,h)===digitsToString(u.d).slice(0,h)){for(;p--;)u=round$1(u.times(u),h);return _.precision=f,e==null?(external=!0,round$1(u,f)):u}u=d}}function getBase10Exponent(t){for(var e=t.e*LOG_BASE,n=t.d[0];n>=10;n/=10)e++;return e}function getLn10(t,e,n){if(e>t.LN10.sd())throw external=!0,n&&(t.precision=n),Error(decimalError+"LN10 precision limit exceeded");return round$1(new t(t.LN10),e)}function getZeroString(t){for(var e="";t--;)e+="0";return e}function ln(t,e){var n,i,o,u,d,h,m,p,_,f=1,l=10,g=t,v=g.d,S=g.constructor,T=S.precision;if(g.s<1)throw Error(decimalError+(g.s?"NaN":"-Infinity"));if(g.eq(ONE))return new S(0);if(e==null?(external=!1,p=T):p=e,g.eq(10))return e==null&&(external=!0),getLn10(S,p);if(p+=l,S.precision=p,n=digitsToString(v),i=n.charAt(0),u=getBase10Exponent(g),Math.abs(u)<15e14){for(;i<7&&i!=1||i==1&&n.charAt(1)>3;)g=g.times(t),n=digitsToString(g.d),i=n.charAt(0),f++;u=getBase10Exponent(g),i>1?(g=new S("0."+n),u++):g=new S(i+"."+n.slice(1))}else return m=getLn10(S,p+2,T).times(u+""),g=ln(new S(i+"."+n.slice(1)),p-l).plus(m),S.precision=T,e==null?(external=!0,round$1(g,T)):g;for(h=d=g=divide(g.minus(ONE),g.plus(ONE),p),_=round$1(g.times(g),p),o=3;;){if(d=round$1(d.times(_),p),m=h.plus(divide(d,new S(o),p)),digitsToString(m.d).slice(0,p)===digitsToString(h.d).slice(0,p))return h=h.times(2),u!==0&&(h=h.plus(getLn10(S,p+2,T).times(u+""))),h=divide(h,new S(f),p),S.precision=T,e==null?(external=!0,round$1(h,T)):h;h=m,o+=2}}function parseDecimal(t,e){var n,i,o;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(i=e.search(/e/i))>0?(n<0&&(n=i),n+=+e.slice(i+1),e=e.substring(0,i)):n<0&&(n=e.length),i=0;e.charCodeAt(i)===48;)++i;for(o=e.length;e.charCodeAt(o-1)===48;)--o;if(e=e.slice(i,o),e){if(o-=i,n=n-i-1,t.e=mathfloor(n/LOG_BASE),t.d=[],i=(n+1)%LOG_BASE,n<0&&(i+=LOG_BASE),i<o){for(i&&t.d.push(+e.slice(0,i)),o-=LOG_BASE;i<o;)t.d.push(+e.slice(i,i+=LOG_BASE));e=e.slice(i),i=LOG_BASE-e.length}else i-=o;for(;i--;)e+="0";if(t.d.push(+e),external&&(t.e>MAX_E||t.e<-MAX_E))throw Error(exponentOutOfRange+n)}else t.s=0,t.e=0,t.d=[0];return t}function round$1(t,e,n){var i,o,u,d,h,m,p,_,f=t.d;for(d=1,u=f[0];u>=10;u/=10)d++;if(i=e-d,i<0)i+=LOG_BASE,o=e,p=f[_=0];else{if(_=Math.ceil((i+1)/LOG_BASE),u=f.length,_>=u)return t;for(p=u=f[_],d=1;u>=10;u/=10)d++;i%=LOG_BASE,o=i-LOG_BASE+d}if(n!==void 0&&(u=mathpow(10,d-o-1),h=p/u%10|0,m=e<0||f[_+1]!==void 0||p%u,m=n<4?(h||m)&&(n==0||n==(t.s<0?3:2)):h>5||h==5&&(n==4||m||n==6&&(i>0?o>0?p/mathpow(10,d-o):0:f[_-1])%10&1||n==(t.s<0?8:7))),e<1||!f[0])return m?(u=getBase10Exponent(t),f.length=1,e=e-u-1,f[0]=mathpow(10,(LOG_BASE-e%LOG_BASE)%LOG_BASE),t.e=mathfloor(-e/LOG_BASE)||0):(f.length=1,f[0]=t.e=t.s=0),t;if(i==0?(f.length=_,u=1,_--):(f.length=_+1,u=mathpow(10,LOG_BASE-i),f[_]=o>0?(p/mathpow(10,d-o)%mathpow(10,o)|0)*u:0),m)for(;;)if(_==0){(f[0]+=u)==BASE&&(f[0]=1,++t.e);break}else{if(f[_]+=u,f[_]!=BASE)break;f[_--]=0,u=1}for(i=f.length;f[--i]===0;)f.pop();if(external&&(t.e>MAX_E||t.e<-MAX_E))throw Error(exponentOutOfRange+getBase10Exponent(t));return t}function subtract(t,e){var n,i,o,u,d,h,m,p,_,f,l=t.constructor,g=l.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new l(t),external?round$1(e,g):e;if(m=t.d,f=e.d,i=e.e,p=t.e,m=m.slice(),d=p-i,d){for(_=d<0,_?(n=m,d=-d,h=f.length):(n=f,i=p,h=m.length),o=Math.max(Math.ceil(g/LOG_BASE),h)+2,d>o&&(d=o,n.length=1),n.reverse(),o=d;o--;)n.push(0);n.reverse()}else{for(o=m.length,h=f.length,_=o<h,_&&(h=o),o=0;o<h;o++)if(m[o]!=f[o]){_=m[o]<f[o];break}d=0}for(_&&(n=m,m=f,f=n,e.s=-e.s),h=m.length,o=f.length-h;o>0;--o)m[h++]=0;for(o=f.length;o>d;){if(m[--o]<f[o]){for(u=o;u&&m[--u]===0;)m[u]=BASE-1;--m[u],m[o]+=BASE}m[o]-=f[o]}for(;m[--h]===0;)m.pop();for(;m[0]===0;m.shift())--i;return m[0]?(e.d=m,e.e=i,external?round$1(e,g):e):new l(0)}function toString$1(t,e,n){var i,o=getBase10Exponent(t),u=digitsToString(t.d),d=u.length;return e?(n&&(i=n-d)>0?u=u.charAt(0)+"."+u.slice(1)+getZeroString(i):d>1&&(u=u.charAt(0)+"."+u.slice(1)),u=u+(o<0?"e":"e+")+o):o<0?(u="0."+getZeroString(-o-1)+u,n&&(i=n-d)>0&&(u+=getZeroString(i))):o>=d?(u+=getZeroString(o+1-d),n&&(i=n-o-1)>0&&(u=u+"."+getZeroString(i))):((i=o+1)<d&&(u=u.slice(0,i)+"."+u.slice(i)),n&&(i=n-d)>0&&(o+1===d&&(u+="."),u+=getZeroString(i))),t.s<0?"-"+u:u}function truncate(t,e){if(t.length>e)return t.length=e,!0}function clone(t){var e,n,i;function o(u){var d=this;if(!(d instanceof o))return new o(u);if(d.constructor=o,u instanceof o){d.s=u.s,d.e=u.e,d.d=(u=u.d)?u.slice():u;return}if(typeof u=="number"){if(u*0!==0)throw Error(invalidArgument+u);if(u>0)d.s=1;else if(u<0)u=-u,d.s=-1;else{d.s=0,d.e=0,d.d=[0];return}if(u===~~u&&u<1e7){d.e=0,d.d=[u];return}return parseDecimal(d,u.toString())}else if(typeof u!="string")throw Error(invalidArgument+u);if(u.charCodeAt(0)===45?(u=u.slice(1),d.s=-1):d.s=1,isDecimal.test(u))parseDecimal(d,u);else throw Error(invalidArgument+u)}if(o.prototype=P,o.ROUND_UP=0,o.ROUND_DOWN=1,o.ROUND_CEIL=2,o.ROUND_FLOOR=3,o.ROUND_HALF_UP=4,o.ROUND_HALF_DOWN=5,o.ROUND_HALF_EVEN=6,o.ROUND_HALF_CEIL=7,o.ROUND_HALF_FLOOR=8,o.clone=clone,o.config=o.set=config,t===void 0&&(t={}),t)for(i=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<i.length;)t.hasOwnProperty(n=i[e++])||(t[n]=this[n]);return o.config(t),o}function config(t){if(!t||typeof t!="object")throw Error(decimalError+"Object expected");var e,n,i,o=["precision",1,MAX_DIGITS,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<o.length;e+=3)if((i=t[n=o[e]])!==void 0)if(mathfloor(i)===i&&i>=o[e+1]&&i<=o[e+2])this[n]=i;else throw Error(invalidArgument+n+": "+i);if((i=t[n="LN10"])!==void 0)if(i==Math.LN10)this[n]=new this(i);else throw Error(invalidArgument+n+": "+i);return this}var Decimal=clone(defaults);ONE=new Decimal(1);const Decimal$1=Decimal;function _toConsumableArray$9(t){return _arrayWithoutHoles$9(t)||_iterableToArray$a(t)||_unsupportedIterableToArray$e(t)||_nonIterableSpread$9()}function _nonIterableSpread$9(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$e(t,e){if(t){if(typeof t=="string")return _arrayLikeToArray$e(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray$e(t,e)}}function _iterableToArray$a(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles$9(t){if(Array.isArray(t))return _arrayLikeToArray$e(t)}function _arrayLikeToArray$e(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var identity$1=function(e){return e},PLACE_HOLDER={},isPlaceHolder=function(e){return e===PLACE_HOLDER},curry0=function(e){return function n(){return arguments.length===0||arguments.length===1&&isPlaceHolder(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},curryN=function t(e,n){return e===1?n:curry0(function(){for(var i=arguments.length,o=new Array(i),u=0;u<i;u++)o[u]=arguments[u];var d=o.filter(function(h){return h!==PLACE_HOLDER}).length;return d>=e?n.apply(void 0,o):t(e-d,curry0(function(){for(var h=arguments.length,m=new Array(h),p=0;p<h;p++)m[p]=arguments[p];var _=o.map(function(f){return isPlaceHolder(f)?m.shift():f});return n.apply(void 0,_toConsumableArray$9(_).concat(m))}))})},curry=function(e){return curryN(e.length,e)},range$2=function(e,n){for(var i=[],o=e;o<n;++o)i[o-e]=o;return i},map=curry(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),compose=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];if(!n.length)return identity$1;var o=n.reverse(),u=o[0],d=o.slice(1);return function(){return d.reduce(function(h,m){return m(h)},u.apply(void 0,arguments))}},reverse=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},memoize$1=function(e){var n=null,i=null;return function(){for(var o=arguments.length,u=new Array(o),d=0;d<o;d++)u[d]=arguments[d];return n&&u.every(function(h,m){return h===n[m]})||(n=u,i=e.apply(void 0,u)),i}};function getDigitCount(t){var e;return t===0?e=1:e=Math.floor(new Decimal$1(t).abs().log(10).toNumber())+1,e}function rangeStep(t,e,n){for(var i=new Decimal$1(t),o=0,u=[];i.lt(e)&&o<1e5;)u.push(i.toNumber()),i=i.add(n),o++;return u}var interpolateNumber=curry(function(t,e,n){var i=+t,o=+e;return i+n*(o-i)}),uninterpolateNumber=curry(function(t,e,n){var i=e-+t;return i=i||1/0,(n-t)/i}),uninterpolateTruncation=curry(function(t,e,n){var i=e-+t;return i=i||1/0,Math.max(0,Math.min(1,(n-t)/i))});const Arithmetic={rangeStep,getDigitCount,interpolateNumber,uninterpolateNumber,uninterpolateTruncation};function _toConsumableArray$8(t){return _arrayWithoutHoles$8(t)||_iterableToArray$9(t)||_unsupportedIterableToArray$d(t)||_nonIterableSpread$8()}function _nonIterableSpread$8(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArray$9(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles$8(t){if(Array.isArray(t))return _arrayLikeToArray$d(t)}function _slicedToArray$7(t,e){return _arrayWithHoles$8(t)||_iterableToArrayLimit$7(t,e)||_unsupportedIterableToArray$d(t,e)||_nonIterableRest$8()}function _nonIterableRest$8(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$d(t,e){if(t){if(typeof t=="string")return _arrayLikeToArray$d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray$d(t,e)}}function _arrayLikeToArray$d(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function _iterableToArrayLimit$7(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],i=!0,o=!1,u=void 0;try{for(var d=t[Symbol.iterator](),h;!(i=(h=d.next()).done)&&(n.push(h.value),!(e&&n.length===e));i=!0);}catch(m){o=!0,u=m}finally{try{!i&&d.return!=null&&d.return()}finally{if(o)throw u}}return n}}function _arrayWithHoles$8(t){if(Array.isArray(t))return t}function getValidInterval(t){var e=_slicedToArray$7(t,2),n=e[0],i=e[1],o=n,u=i;return n>i&&(o=i,u=n),[o,u]}function getFormatStep(t,e,n){if(t.lte(0))return new Decimal$1(0);var i=Arithmetic.getDigitCount(t.toNumber()),o=new Decimal$1(10).pow(i),u=t.div(o),d=i!==1?.05:.1,h=new Decimal$1(Math.ceil(u.div(d).toNumber())).add(n).mul(d),m=h.mul(o);return e?m:new Decimal$1(Math.ceil(m))}function getTickOfSingleValue(t,e,n){var i=1,o=new Decimal$1(t);if(!o.isint()&&n){var u=Math.abs(t);u<1?(i=new Decimal$1(10).pow(Arithmetic.getDigitCount(t)-1),o=new Decimal$1(Math.floor(o.div(i).toNumber())).mul(i)):u>1&&(o=new Decimal$1(Math.floor(t)))}else t===0?o=new Decimal$1(Math.floor((e-1)/2)):n||(o=new Decimal$1(Math.floor(t)));var d=Math.floor((e-1)/2),h=compose(map(function(m){return o.add(new Decimal$1(m-d).mul(i)).toNumber()}),range$2);return h(0,e)}function calculateStep(t,e,n,i){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new Decimal$1(0),tickMin:new Decimal$1(0),tickMax:new Decimal$1(0)};var u=getFormatStep(new Decimal$1(e).sub(t).div(n-1),i,o),d;t<=0&&e>=0?d=new Decimal$1(0):(d=new Decimal$1(t).add(e).div(2),d=d.sub(new Decimal$1(d).mod(u)));var h=Math.ceil(d.sub(t).div(u).toNumber()),m=Math.ceil(new Decimal$1(e).sub(d).div(u).toNumber()),p=h+m+1;return p>n?calculateStep(t,e,n,i,o+1):(p<n&&(m=e>0?m+(n-p):m,h=e>0?h:h+(n-p)),{step:u,tickMin:d.sub(new Decimal$1(h).mul(u)),tickMax:d.add(new Decimal$1(m).mul(u))})}function getNiceTickValuesFn(t){var e=_slicedToArray$7(t,2),n=e[0],i=e[1],o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,d=Math.max(o,2),h=getValidInterval([n,i]),m=_slicedToArray$7(h,2),p=m[0],_=m[1];if(p===-1/0||_===1/0){var f=_===1/0?[p].concat(_toConsumableArray$8(range$2(0,o-1).map(function(){return 1/0}))):[].concat(_toConsumableArray$8(range$2(0,o-1).map(function(){return-1/0})),[_]);return n>i?reverse(f):f}if(p===_)return getTickOfSingleValue(p,o,u);var l=calculateStep(p,_,d,u),g=l.step,v=l.tickMin,S=l.tickMax,T=Arithmetic.rangeStep(v,S.add(new Decimal$1(.1).mul(g)),g);return n>i?reverse(T):T}function getTickValuesFixedDomainFn(t,e){var n=_slicedToArray$7(t,2),i=n[0],o=n[1],u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,d=getValidInterval([i,o]),h=_slicedToArray$7(d,2),m=h[0],p=h[1];if(m===-1/0||p===1/0)return[i,o];if(m===p)return[m];var _=Math.max(e,2),f=getFormatStep(new Decimal$1(p).sub(m).div(_-1),u,0),l=[].concat(_toConsumableArray$8(Arithmetic.rangeStep(new Decimal$1(m),new Decimal$1(p).sub(new Decimal$1(.99).mul(f)),f)),[p]);return i>o?reverse(l):l}var getNiceTickValues=memoize$1(getNiceTickValuesFn),getTickValuesFixedDomain=memoize$1(getTickValuesFixedDomainFn),prefix="Invariant failed";function invariant$1(t,e){throw new Error(prefix)}var _excluded$b=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function _typeof$y(t){"@babel/helpers - typeof";return _typeof$y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$y(t)}function _extends$k(){return _extends$k=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_extends$k.apply(this,arguments)}function _slicedToArray$6(t,e){return _arrayWithHoles$7(t)||_iterableToArrayLimit$6(t,e)||_unsupportedIterableToArray$c(t,e)||_nonIterableRest$7()}function _nonIterableRest$7(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$c(t,e){if(t){if(typeof t=="string")return _arrayLikeToArray$c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray$c(t,e)}}function _arrayLikeToArray$c(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function _iterableToArrayLimit$6(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i,o,u,d,h=[],m=!0,p=!1;try{if(u=(n=n.call(t)).next,e!==0)for(;!(m=(i=u.call(n)).done)&&(h.push(i.value),h.length!==e);m=!0);}catch(_){p=!0,o=_}finally{try{if(!m&&n.return!=null&&(d=n.return(),Object(d)!==d))return}finally{if(p)throw o}}return h}}function _arrayWithHoles$7(t){if(Array.isArray(t))return t}function _objectWithoutProperties$b(t,e){if(t==null)return{};var n=_objectWithoutPropertiesLoose$b(t,e),i,o;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(o=0;o<u.length;o++)i=u[o],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function _objectWithoutPropertiesLoose$b(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function _classCallCheck$d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties$d(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,_toPropertyKey$v(i.key),i)}}function _createClass$d(t,e,n){return e&&_defineProperties$d(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function _callSuper$a(t,e,n){return e=_getPrototypeOf$b(e),_possibleConstructorReturn$b(t,_isNativeReflectConstruct$b()?Reflect.construct(e,n||[],_getPrototypeOf$b(t).constructor):e.apply(t,n))}function _possibleConstructorReturn$b(t,e){if(e&&(_typeof$y(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$b(t)}function _assertThisInitialized$b(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct$b(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$b=function(){return!!t})()}function _getPrototypeOf$b(t){return _getPrototypeOf$b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_getPrototypeOf$b(t)}function _inherits$b(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf$b(t,e)}function _setPrototypeOf$b(t,e){return _setPrototypeOf$b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,o){return i.__proto__=o,i},_setPrototypeOf$b(t,e)}function _defineProperty$x(t,e,n){return e=_toPropertyKey$v(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$v(t){var e=_toPrimitive$v(t,"string");return _typeof$y(e)=="symbol"?e:e+""}function _toPrimitive$v(t,e){if(_typeof$y(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(_typeof$y(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var ErrorBar=(function(t){function e(){return _classCallCheck$d(this,e),_callSuper$a(this,e,arguments)}return _inherits$b(e,t),_createClass$d(e,[{key:"render",value:function(){var i=this.props,o=i.offset,u=i.layout,d=i.width,h=i.dataKey,m=i.data,p=i.dataPointFormatter,_=i.xAxis,f=i.yAxis,l=_objectWithoutProperties$b(i,_excluded$b),g=filterProps$1(l,!1);this.props.direction==="x"&&_.type!=="number"&&invariant$1();var v=m.map(function(S){var T=p(S,h),E=T.x,O=T.y,R=T.value,M=T.errorVal;if(!M)return null;var C=[],j,$;if(Array.isArray(M)){var L=_slicedToArray$6(M,2);j=L[0],$=L[1]}else j=$=M;if(u==="vertical"){var N=_.scale,B=O+o,U=B+d,H=B-d,Y=N(R-j),K=N(R+$);C.push({x1:K,y1:U,x2:K,y2:H}),C.push({x1:Y,y1:B,x2:K,y2:B}),C.push({x1:Y,y1:U,x2:Y,y2:H})}else if(u==="horizontal"){var z=f.scale,V=E+o,G=V-d,ie=V+d,Z=z(R-j),te=z(R+$);C.push({x1:G,y1:te,x2:ie,y2:te}),C.push({x1:V,y1:Z,x2:V,y2:te}),C.push({x1:G,y1:Z,x2:ie,y2:Z})}return React.createElement(Layer,_extends$k({className:"recharts-errorBar",key:"bar-".concat(C.map(function(ee){return"".concat(ee.x1,"-").concat(ee.x2,"-").concat(ee.y1,"-").concat(ee.y2)}))},g),C.map(function(ee){return React.createElement("line",_extends$k({},ee,{key:"line-".concat(ee.x1,"-").concat(ee.x2,"-").concat(ee.y1,"-").concat(ee.y2)}))}))});return React.createElement(Layer,{className:"recharts-errorBars"},v)}}])})(React.Component);_defineProperty$x(ErrorBar,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});_defineProperty$x(ErrorBar,"displayName","ErrorBar");function _typeof$x(t){"@babel/helpers - typeof";return _typeof$x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$x(t)}function ownKeys$t(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$r(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$t(Object(n),!0).forEach(function(i){_defineProperty$w(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$t(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$w(t,e,n){return e=_toPropertyKey$u(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$u(t){var e=_toPrimitive$u(t,"string");return _typeof$x(e)=="symbol"?e:e+""}function _toPrimitive$u(t,e){if(_typeof$x(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(_typeof$x(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var getLegendProps=function(e){var n=e.children,i=e.formattedGraphicalItems,o=e.legendWidth,u=e.legendContent,d=findChildByType(n,Legend);if(!d)return null;var h=Legend.defaultProps,m=h!==void 0?_objectSpread$r(_objectSpread$r({},h),d.props):{},p;return d.props&&d.props.payload?p=d.props&&d.props.payload:u==="children"?p=(i||[]).reduce(function(_,f){var l=f.item,g=f.props,v=g.sectors||g.data||[];return _.concat(v.map(function(S){return{type:d.props.iconType||l.props.legendType,value:S.name,color:S.fill,payload:S}}))},[]):p=(i||[]).map(function(_){var f=_.item,l=f.type.defaultProps,g=l!==void 0?_objectSpread$r(_objectSpread$r({},l),f.props):{},v=g.dataKey,S=g.name,T=g.legendType,E=g.hide;return{inactive:E,dataKey:v,type:m.iconType||T||"square",color:getMainColorOfGraphicItem(f),value:S||v,payload:g}}),_objectSpread$r(_objectSpread$r(_objectSpread$r({},m),Legend.getWithHeight(d,o)),{},{payload:p,item:d})};function _typeof$w(t){"@babel/helpers - typeof";return _typeof$w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$w(t)}function _toConsumableArray$7(t){return _arrayWithoutHoles$7(t)||_iterableToArray$8(t)||_unsupportedIterableToArray$b(t)||_nonIterableSpread$7()}function _nonIterableSpread$7(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$b(t,e){if(t){if(typeof t=="string")return _arrayLikeToArray$b(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray$b(t,e)}}function _iterableToArray$8(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function _arrayWithoutHoles$7(t){if(Array.isArray(t))return _arrayLikeToArray$b(t)}function _arrayLikeToArray$b(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function ownKeys$s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$q(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$s(Object(n),!0).forEach(function(i){_defineProperty$v(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$s(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$v(t,e,n){return e=_toPropertyKey$t(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$t(t){var e=_toPrimitive$t(t,"string");return _typeof$w(e)=="symbol"?e:e+""}function _toPrimitive$t(t,e){if(_typeof$w(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(_typeof$w(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function getValueByDataKey(t,e,n){return isNil(t)||isNil(e)?n:isNumOrStr(e)?get$1(t,e,n):isFunction(e)?e(t):n}function getDomainOfDataByKey(t,e,n,i){var o=flatMap(t,function(h){return getValueByDataKey(h,e)});if(n==="number"){var u=o.filter(function(h){return isNumber(h)||parseFloat(h)});return u.length?[min$1(u),max$1(u)]:[1/0,-1/0]}var d=i?o.filter(function(h){return!isNil(h)}):o;return d.map(function(h){return isNumOrStr(h)||h instanceof Date?h:""})}var calculateActiveTickIndex=function(e){var n,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],o=arguments.length>2?arguments[2]:void 0,u=arguments.length>3?arguments[3]:void 0,d=-1,h=(n=i?.length)!==null&&n!==void 0?n:0;if(h<=1)return 0;if(u&&u.axisType==="angleAxis"&&Math.abs(Math.abs(u.range[1]-u.range[0])-360)<=1e-6)for(var m=u.range,p=0;p<h;p++){var _=p>0?o[p-1].coordinate:o[h-1].coordinate,f=o[p].coordinate,l=p>=h-1?o[0].coordinate:o[p+1].coordinate,g=void 0;if(mathSign(f-_)!==mathSign(l-f)){var v=[];if(mathSign(l-f)===mathSign(m[1]-m[0])){g=l;var S=f+m[1]-m[0];v[0]=Math.min(S,(S+_)/2),v[1]=Math.max(S,(S+_)/2)}else{g=_;var T=l+m[1]-m[0];v[0]=Math.min(f,(T+f)/2),v[1]=Math.max(f,(T+f)/2)}var E=[Math.min(f,(g+f)/2),Math.max(f,(g+f)/2)];if(e>E[0]&&e<=E[1]||e>=v[0]&&e<=v[1]){d=o[p].index;break}}else{var O=Math.min(_,l),R=Math.max(_,l);if(e>(O+f)/2&&e<=(R+f)/2){d=o[p].index;break}}}else for(var M=0;M<h;M++)if(M===0&&e<=(i[M].coordinate+i[M+1].coordinate)/2||M>0&&M<h-1&&e>(i[M].coordinate+i[M-1].coordinate)/2&&e<=(i[M].coordinate+i[M+1].coordinate)/2||M===h-1&&e>(i[M].coordinate+i[M-1].coordinate)/2){d=i[M].index;break}return d},getMainColorOfGraphicItem=function(e){var n,i=e,o=i.type.displayName,u=(n=e.type)!==null&&n!==void 0&&n.defaultProps?_objectSpread$q(_objectSpread$q({},e.type.defaultProps),e.props):e.props,d=u.stroke,h=u.fill,m;switch(o){case"Line":m=d;break;case"Area":case"Radar":m=d&&d!=="none"?d:h;break;default:m=h;break}return m},getBarSizeList=function(e){var n=e.barSize,i=e.totalSize,o=e.stackGroups,u=o===void 0?{}:o;if(!u)return{};for(var d={},h=Object.keys(u),m=0,p=h.length;m<p;m++)for(var _=u[h[m]].stackGroups,f=Object.keys(_),l=0,g=f.length;l<g;l++){var v=_[f[l]],S=v.items,T=v.cateAxisId,E=S.filter(function($){return getDisplayName($.type).indexOf("Bar")>=0});if(E&&E.length){var O=E[0].type.defaultProps,R=O!==void 0?_objectSpread$q(_objectSpread$q({},O),E[0].props):E[0].props,M=R.barSize,C=R[T];d[C]||(d[C]=[]);var j=isNil(M)?n:M;d[C].push({item:E[0],stackList:E.slice(1),barSize:isNil(j)?void 0:getPercentValue(j,i,0)})}}return d},getBarPosition=function(e){var n=e.barGap,i=e.barCategoryGap,o=e.bandSize,u=e.sizeList,d=u===void 0?[]:u,h=e.maxBarSize,m=d.length;if(m<1)return null;var p=getPercentValue(n,o,0,!0),_,f=[];if(d[0].barSize===+d[0].barSize){var l=!1,g=o/m,v=d.reduce(function(M,C){return M+C.barSize||0},0);v+=(m-1)*p,v>=o&&(v-=(m-1)*p,p=0),v>=o&&g>0&&(l=!0,g*=.9,v=m*g);var S=(o-v)/2>>0,T={offset:S-p,size:0};_=d.reduce(function(M,C){var j={item:C.item,position:{offset:T.offset+T.size+p,size:l?g:C.barSize}},$=[].concat(_toConsumableArray$7(M),[j]);return T=$[$.length-1].position,C.stackList&&C.stackList.length&&C.stackList.forEach(function(L){$.push({item:L,position:T})}),$},f)}else{var E=getPercentValue(i,o,0,!0);o-2*E-(m-1)*p<=0&&(p=0);var O=(o-2*E-(m-1)*p)/m;O>1&&(O>>=0);var R=h===+h?Math.min(O,h):O;_=d.reduce(function(M,C,j){var $=[].concat(_toConsumableArray$7(M),[{item:C.item,position:{offset:E+(O+p)*j+(O-R)/2,size:R}}]);return C.stackList&&C.stackList.length&&C.stackList.forEach(function(L){$.push({item:L,position:$[$.length-1].position})}),$},f)}return _},appendOffsetOfLegend=function(e,n,i,o){var u=i.children,d=i.width,h=i.margin,m=d-(h.left||0)-(h.right||0),p=getLegendProps({children:u,legendWidth:m});if(p){var _=o||{},f=_.width,l=_.height,g=p.align,v=p.verticalAlign,S=p.layout;if((S==="vertical"||S==="horizontal"&&v==="middle")&&g!=="center"&&isNumber(e[g]))return _objectSpread$q(_objectSpread$q({},e),{},_defineProperty$v({},g,e[g]+(f||0)));if((S==="horizontal"||S==="vertical"&&g==="center")&&v!=="middle"&&isNumber(e[v]))return _objectSpread$q(_objectSpread$q({},e),{},_defineProperty$v({},v,e[v]+(l||0)))}return e},isErrorBarRelevantForAxis=function(e,n,i){return isNil(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||i==="x"?n==="xAxis":i==="y"?n==="yAxis":!0},getDomainOfErrorBars=function(e,n,i,o,u){var d=n.props.children,h=findAllByType(d,ErrorBar).filter(function(p){return isErrorBarRelevantForAxis(o,u,p.props.direction)});if(h&&h.length){var m=h.map(function(p){return p.props.dataKey});return e.reduce(function(p,_){var f=getValueByDataKey(_,i);if(isNil(f))return p;var l=Array.isArray(f)?[min$1(f),max$1(f)]:[f,f],g=m.reduce(function(v,S){var T=getValueByDataKey(_,S,0),E=l[0]-Math.abs(Array.isArray(T)?T[0]:T),O=l[1]+Math.abs(Array.isArray(T)?T[1]:T);return[Math.min(E,v[0]),Math.max(O,v[1])]},[1/0,-1/0]);return[Math.min(g[0],p[0]),Math.max(g[1],p[1])]},[1/0,-1/0])}return null},parseErrorBarsOfAxis=function(e,n,i,o,u){var d=n.map(function(h){return getDomainOfErrorBars(e,h,i,u,o)}).filter(function(h){return!isNil(h)});return d&&d.length?d.reduce(function(h,m){return[Math.min(h[0],m[0]),Math.max(h[1],m[1])]},[1/0,-1/0]):null},getDomainOfItemsWithSameAxis=function(e,n,i,o,u){var d=n.map(function(m){var p=m.props.dataKey;return i==="number"&&p&&getDomainOfErrorBars(e,m,p,o)||getDomainOfDataByKey(e,p,i,u)});if(i==="number")return d.reduce(function(m,p){return[Math.min(m[0],p[0]),Math.max(m[1],p[1])]},[1/0,-1/0]);var h={};return d.reduce(function(m,p){for(var _=0,f=p.length;_<f;_++)h[p[_]]||(h[p[_]]=!0,m.push(p[_]));return m},[])},isCategoricalAxis=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},getCoordinatesOfGrid=function(e,n,i,o){if(o)return e.map(function(m){return m.coordinate});var u,d,h=e.map(function(m){return m.coordinate===n&&(u=!0),m.coordinate===i&&(d=!0),m.coordinate});return u||h.push(n),d||h.push(i),h},getTicksOfAxis=function(e,n,i){if(!e)return null;var o=e.scale,u=e.duplicateDomain,d=e.type,h=e.range,m=e.realScaleType==="scaleBand"?o.bandwidth()/2:2,p=(n||i)&&d==="category"&&o.bandwidth?o.bandwidth()/m:0;if(p=e.axisType==="angleAxis"&&h?.length>=2?mathSign(h[0]-h[1])*2*p:p,n&&(e.ticks||e.niceTicks)){var _=(e.ticks||e.niceTicks).map(function(f){var l=u?u.indexOf(f):f;return{coordinate:o(l)+p,value:f,offset:p}});return _.filter(function(f){return!isNan(f.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(f,l){return{coordinate:o(f)+p,value:f,index:l,offset:p}}):o.ticks&&!i?o.ticks(e.tickCount).map(function(f){return{coordinate:o(f)+p,value:f,offset:p}}):o.domain().map(function(f,l){return{coordinate:o(f)+p,value:u?u[f]:f,index:l,offset:p}})},handlerWeakMap=new WeakMap,combineEventHandlers=function(e,n){if(typeof n!="function")return e;handlerWeakMap.has(e)||handlerWeakMap.set(e,new WeakMap);var i=handlerWeakMap.get(e);if(i.has(n))return i.get(n);var o=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return i.set(n,o),o},parseScale=function(e,n,i){var o=e.scale,u=e.type,d=e.layout,h=e.axisType;if(o==="auto")return d==="radial"&&h==="radiusAxis"?{scale:band(),realScaleType:"band"}:d==="radial"&&h==="angleAxis"?{scale:linear(),realScaleType:"linear"}:u==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!i)?{scale:point(),realScaleType:"point"}:u==="category"?{scale:band(),realScaleType:"band"}:{scale:linear(),realScaleType:"linear"};if(isString(o)){var m="scale".concat(upperFirst(o));return{scale:(d3Scales[m]||point)(),realScaleType:d3Scales[m]?m:"point"}}return isFunction(o)?{scale:o}:{scale:point(),realScaleType:"point"}},EPS=1e-4,checkDomainOfScale=function(e){var n=e.domain();if(!(!n||n.length<=2)){var i=n.length,o=e.range(),u=Math.min(o[0],o[1])-EPS,d=Math.max(o[0],o[1])+EPS,h=e(n[0]),m=e(n[i-1]);(h<u||h>d||m<u||m>d)&&e.domain([n[0],n[i-1]])}},findPositionOfBar=function(e,n){if(!e)return null;for(var i=0,o=e.length;i<o;i++)if(e[i].item===n)return e[i].position;return null},truncateByDomain=function(e,n){if(!n||n.length!==2||!isNumber(n[0])||!isNumber(n[1]))return e;var i=Math.min(n[0],n[1]),o=Math.max(n[0],n[1]),u=[e[0],e[1]];return(!isNumber(e[0])||e[0]<i)&&(u[0]=i),(!isNumber(e[1])||e[1]>o)&&(u[1]=o),u[0]>o&&(u[0]=o),u[1]<i&&(u[1]=i),u},offsetSign=function(e){var n=e.length;if(!(n<=0))for(var i=0,o=e[0].length;i<o;++i)for(var u=0,d=0,h=0;h<n;++h){var m=isNan(e[h][i][1])?e[h][i][0]:e[h][i][1];m>=0?(e[h][i][0]=u,e[h][i][1]=u+m,u=e[h][i][1]):(e[h][i][0]=d,e[h][i][1]=d+m,d=e[h][i][1])}},offsetPositive=function(e){var n=e.length;if(!(n<=0))for(var i=0,o=e[0].length;i<o;++i)for(var u=0,d=0;d<n;++d){var h=isNan(e[d][i][1])?e[d][i][0]:e[d][i][1];h>=0?(e[d][i][0]=u,e[d][i][1]=u+h,u=e[d][i][1]):(e[d][i][0]=0,e[d][i][1]=0)}},STACK_OFFSET_MAP={sign:offsetSign,expand:stackOffsetExpand,none:stackOffsetNone,silhouette:stackOffsetSilhouette,wiggle:stackOffsetWiggle,positive:offsetPositive},getStackedData=function(e,n,i){var o=n.map(function(h){return h.props.dataKey}),u=STACK_OFFSET_MAP[i],d=shapeStack().keys(o).value(function(h,m){return+getValueByDataKey(h,m,0)}).order(stackOrderNone).offset(u);return d(e)},getStackGroupsByAxisId=function(e,n,i,o,u,d){if(!e)return null;var h=d?n.reverse():n,m={},p=h.reduce(function(f,l){var g,v=(g=l.type)!==null&&g!==void 0&&g.defaultProps?_objectSpread$q(_objectSpread$q({},l.type.defaultProps),l.props):l.props,S=v.stackId,T=v.hide;if(T)return f;var E=v[i],O=f[E]||{hasStack:!1,stackGroups:{}};if(isNumOrStr(S)){var R=O.stackGroups[S]||{numericAxisId:i,cateAxisId:o,items:[]};R.items.push(l),O.hasStack=!0,O.stackGroups[S]=R}else O.stackGroups[uniqueId("_stackId_")]={numericAxisId:i,cateAxisId:o,items:[l]};return _objectSpread$q(_objectSpread$q({},f),{},_defineProperty$v({},E,O))},m),_={};return Object.keys(p).reduce(function(f,l){var g=p[l];if(g.hasStack){var v={};g.stackGroups=Object.keys(g.stackGroups).reduce(function(S,T){var E=g.stackGroups[T];return _objectSpread$q(_objectSpread$q({},S),{},_defineProperty$v({},T,{numericAxisId:i,cateAxisId:o,items:E.items,stackedData:getStackedData(e,E.items,u)}))},v)}return _objectSpread$q(_objectSpread$q({},f),{},_defineProperty$v({},l,g))},_)},getTicksOfScale=function(e,n){var i=n.realScaleType,o=n.type,u=n.tickCount,d=n.originalDomain,h=n.allowDecimals,m=i||n.scale;if(m!=="auto"&&m!=="linear")return null;if(u&&o==="number"&&d&&(d[0]==="auto"||d[1]==="auto")){var p=e.domain();if(!p.length)return null;var _=getNiceTickValues(p,u,h);return e.domain([min$1(_),max$1(_)]),{niceTicks:_}}if(u&&o==="number"){var f=e.domain(),l=getTickValuesFixedDomain(f,u,h);return{niceTicks:l}}return null};function getCateCoordinateOfLine(t){var e=t.axis,n=t.ticks,i=t.bandSize,o=t.entry,u=t.index,d=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!isNil(o[e.dataKey])){var h=findEntryInArray(n,"value",o[e.dataKey]);if(h)return h.coordinate+i/2}return n[u]?n[u].coordinate+i/2:null}var m=getValueByDataKey(o,isNil(d)?e.dataKey:d);return isNil(m)?null:e.scale(m)}var getCateCoordinateOfBar=function(e){var n=e.axis,i=e.ticks,o=e.offset,u=e.bandSize,d=e.entry,h=e.index;if(n.type==="category")return i[h]?i[h].coordinate+o:null;var m=getValueByDataKey(d,n.dataKey,n.domain[h]);return isNil(m)?null:n.scale(m)-u/2+o},getBaseValueOfBar=function(e){var n=e.numericAxis,i=n.scale.domain();if(n.type==="number"){var o=Math.min(i[0],i[1]),u=Math.max(i[0],i[1]);return o<=0&&u>=0?0:u<0?u:o}return i[0]},getStackedDataOfItem=function(e,n){var i,o=(i=e.type)!==null&&i!==void 0&&i.defaultProps?_objectSpread$q(_objectSpread$q({},e.type.defaultProps),e.props):e.props,u=o.stackId;if(isNumOrStr(u)){var d=n[u];if(d){var h=d.items.indexOf(e);return h>=0?d.stackedData[h]:null}}return null},getDomainOfSingle=function(e){return e.reduce(function(n,i){return[min$1(i.concat([n[0]]).filter(isNumber)),max$1(i.concat([n[1]]).filter(isNumber))]},[1/0,-1/0])},getDomainOfStackGroups=function(e,n,i){return Object.keys(e).reduce(function(o,u){var d=e[u],h=d.stackedData,m=h.reduce(function(p,_){var f=getDomainOfSingle(_.slice(n,i+1));return[Math.min(p[0],f[0]),Math.max(p[1],f[1])]},[1/0,-1/0]);return[Math.min(m[0],o[0]),Math.max(m[1],o[1])]},[1/0,-1/0]).map(function(o){return o===1/0||o===-1/0?0:o})},MIN_VALUE_REG=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,MAX_VALUE_REG=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,parseSpecifiedDomain=function(e,n,i){if(isFunction(e))return e(n,i);if(!Array.isArray(e))return n;var o=[];if(isNumber(e[0]))o[0]=i?e[0]:Math.min(e[0],n[0]);else if(MIN_VALUE_REG.test(e[0])){var u=+MIN_VALUE_REG.exec(e[0])[1];o[0]=n[0]-u}else isFunction(e[0])?o[0]=e[0](n[0]):o[0]=n[0];if(isNumber(e[1]))o[1]=i?e[1]:Math.max(e[1],n[1]);else if(MAX_VALUE_REG.test(e[1])){var d=+MAX_VALUE_REG.exec(e[1])[1];o[1]=n[1]+d}else isFunction(e[1])?o[1]=e[1](n[1]):o[1]=n[1];return o},getBandSizeOfAxis=function(e,n,i){if(e&&e.scale&&e.scale.bandwidth){var o=e.scale.bandwidth();if(!i||o>0)return o}if(e&&n&&n.length>=2){for(var u=sortBy(n,function(f){return f.coordinate}),d=1/0,h=1,m=u.length;h<m;h++){var p=u[h],_=u[h-1];d=Math.min((p.coordinate||0)-(_.coordinate||0),d)}return d===1/0?0:d}return i?void 0:0},parseDomainOfCategoryAxis=function(e,n,i){return!e||!e.length||isEqual(e,get$1(i,"type.defaultProps.domain"))?n:e},getTooltipItem=function(e,n){var i=e.type.defaultProps?_objectSpread$q(_objectSpread$q({},e.type.defaultProps),e.props):e.props,o=i.dataKey,u=i.name,d=i.unit,h=i.formatter,m=i.tooltipType,p=i.chartType,_=i.hide;return _objectSpread$q(_objectSpread$q({},filterProps$1(e,!1)),{},{dataKey:o,unit:d,formatter:h,name:u||o,color:getMainColorOfGraphicItem(e),value:getValueByDataKey(n,o),type:m,payload:n,chartType:p,hide:_})};function _typeof$v(t){"@babel/helpers - typeof";return _typeof$v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$v(t)}function ownKeys$r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$p(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$r(Object(n),!0).forEach(function(i){_defineProperty$u(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$r(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$u(t,e,n){return e=_toPropertyKey$s(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$s(t){var e=_toPrimitive$s(t,"string");return _typeof$v(e)=="symbol"?e:e+""}function _toPrimitive$s(t,e){if(_typeof$v(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(_typeof$v(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var RADIAN=Math.PI/180,radianToDegree=function(e){return e*180/Math.PI},polarToCartesian=function(e,n,i,o){return{x:e+Math.cos(-RADIAN*o)*i,y:n+Math.sin(-RADIAN*o)*i}},distanceBetweenPoints=function(e,n){var i=e.x,o=e.y,u=n.x,d=n.y;return Math.sqrt(Math.pow(i-u,2)+Math.pow(o-d,2))},getAngleOfPoint=function(e,n){var i=e.x,o=e.y,u=n.cx,d=n.cy,h=distanceBetweenPoints({x:i,y:o},{x:u,y:d});if(h<=0)return{radius:h};var m=(i-u)/h,p=Math.acos(m);return o>d&&(p=2*Math.PI-p),{radius:h,angle:radianToDegree(p),angleInRadian:p}},formatAngleOfSector=function(e){var n=e.startAngle,i=e.endAngle,o=Math.floor(n/360),u=Math.floor(i/360),d=Math.min(o,u);return{startAngle:n-d*360,endAngle:i-d*360}},reverseFormatAngleOfSetor=function(e,n){var i=n.startAngle,o=n.endAngle,u=Math.floor(i/360),d=Math.floor(o/360),h=Math.min(u,d);return e+h*360},inRangeOfSector=function(e,n){var i=e.x,o=e.y,u=getAngleOfPoint({x:i,y:o},n),d=u.radius,h=u.angle,m=n.innerRadius,p=n.outerRadius;if(d<m||d>p)return!1;if(d===0)return!0;var _=formatAngleOfSector(n),f=_.startAngle,l=_.endAngle,g=h,v;if(f<=l){for(;g>l;)g-=360;for(;g<f;)g+=360;v=g>=f&&g<=l}else{for(;g>f;)g-=360;for(;g<l;)g+=360;v=g>=l&&g<=f}return v?_objectSpread$p(_objectSpread$p({},n),{},{radius:d,angle:reverseFormatAngleOfSetor(g,n)}):null};function _typeof$u(t){"@babel/helpers - typeof";return _typeof$u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$u(t)}var _excluded$a=["offset"];function _toConsumableArray$6(t){return _arrayWithoutHoles$6(t)||_iterableToArray$7(t)||_unsupportedIterableToArray$a(t)||_nonIterableSpread$6()}function _nonIterableSpread$6(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$a(t,e){if(t){if(typeof t=="string")return _arrayLikeToArray$a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray$a(t,e)}}function _iterableToArray$7(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function _arrayWithoutHoles$6(t){if(Array.isArray(t))return _arrayLikeToArray$a(t)}function _arrayLikeToArray$a(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function _objectWithoutProperties$a(t,e){if(t==null)return{};var n=_objectWithoutPropertiesLoose$a(t,e),i,o;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(o=0;o<u.length;o++)i=u[o],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function _objectWithoutPropertiesLoose$a(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function ownKeys$q(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$o(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$q(Object(n),!0).forEach(function(i){_defineProperty$t(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$q(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$t(t,e,n){return e=_toPropertyKey$r(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$r(t){var e=_toPrimitive$r(t,"string");return _typeof$u(e)=="symbol"?e:e+""}function _toPrimitive$r(t,e){if(_typeof$u(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(_typeof$u(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _extends$j(){return _extends$j=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_extends$j.apply(this,arguments)}var getLabel=function(e){var n=e.value,i=e.formatter,o=isNil(e.children)?n:e.children;return isFunction(i)?i(o):o},getDeltaAngle$1=function(e,n){var i=mathSign(n-e),o=Math.min(Math.abs(n-e),360);return i*o},renderRadialLabel=function(e,n,i){var o=e.position,u=e.viewBox,d=e.offset,h=e.className,m=u,p=m.cx,_=m.cy,f=m.innerRadius,l=m.outerRadius,g=m.startAngle,v=m.endAngle,S=m.clockWise,T=(f+l)/2,E=getDeltaAngle$1(g,v),O=E>=0?1:-1,R,M;o==="insideStart"?(R=g+O*d,M=S):o==="insideEnd"?(R=v-O*d,M=!S):o==="end"&&(R=v+O*d,M=S),M=E<=0?M:!M;var C=polarToCartesian(p,_,T,R),j=polarToCartesian(p,_,T,R+(M?1:-1)*359),$="M".concat(C.x,",").concat(C.y,`
    A`).concat(T,",").concat(T,",0,1,").concat(M?0:1,`,
    `).concat(j.x,",").concat(j.y),L=isNil(e.id)?uniqueId("recharts-radial-line-"):e.id;return React.createElement("text",_extends$j({},i,{dominantBaseline:"central",className:clsx("recharts-radial-bar-label",h)}),React.createElement("defs",null,React.createElement("path",{id:L,d:$})),React.createElement("textPath",{xlinkHref:"#".concat(L)},n))},getAttrsOfPolarLabel=function(e){var n=e.viewBox,i=e.offset,o=e.position,u=n,d=u.cx,h=u.cy,m=u.innerRadius,p=u.outerRadius,_=u.startAngle,f=u.endAngle,l=(_+f)/2;if(o==="outside"){var g=polarToCartesian(d,h,p+i,l),v=g.x,S=g.y;return{x:v,y:S,textAnchor:v>=d?"start":"end",verticalAnchor:"middle"}}if(o==="center")return{x:d,y:h,textAnchor:"middle",verticalAnchor:"middle"};if(o==="centerTop")return{x:d,y:h,textAnchor:"middle",verticalAnchor:"start"};if(o==="centerBottom")return{x:d,y:h,textAnchor:"middle",verticalAnchor:"end"};var T=(m+p)/2,E=polarToCartesian(d,h,T,l),O=E.x,R=E.y;return{x:O,y:R,textAnchor:"middle",verticalAnchor:"middle"}},getAttrsOfCartesianLabel=function(e){var n=e.viewBox,i=e.parentViewBox,o=e.offset,u=e.position,d=n,h=d.x,m=d.y,p=d.width,_=d.height,f=_>=0?1:-1,l=f*o,g=f>0?"end":"start",v=f>0?"start":"end",S=p>=0?1:-1,T=S*o,E=S>0?"end":"start",O=S>0?"start":"end";if(u==="top"){var R={x:h+p/2,y:m-f*o,textAnchor:"middle",verticalAnchor:g};return _objectSpread$o(_objectSpread$o({},R),i?{height:Math.max(m-i.y,0),width:p}:{})}if(u==="bottom"){var M={x:h+p/2,y:m+_+l,textAnchor:"middle",verticalAnchor:v};return _objectSpread$o(_objectSpread$o({},M),i?{height:Math.max(i.y+i.height-(m+_),0),width:p}:{})}if(u==="left"){var C={x:h-T,y:m+_/2,textAnchor:E,verticalAnchor:"middle"};return _objectSpread$o(_objectSpread$o({},C),i?{width:Math.max(C.x-i.x,0),height:_}:{})}if(u==="right"){var j={x:h+p+T,y:m+_/2,textAnchor:O,verticalAnchor:"middle"};return _objectSpread$o(_objectSpread$o({},j),i?{width:Math.max(i.x+i.width-j.x,0),height:_}:{})}var $=i?{width:p,height:_}:{};return u==="insideLeft"?_objectSpread$o({x:h+T,y:m+_/2,textAnchor:O,verticalAnchor:"middle"},$):u==="insideRight"?_objectSpread$o({x:h+p-T,y:m+_/2,textAnchor:E,verticalAnchor:"middle"},$):u==="insideTop"?_objectSpread$o({x:h+p/2,y:m+l,textAnchor:"middle",verticalAnchor:v},$):u==="insideBottom"?_objectSpread$o({x:h+p/2,y:m+_-l,textAnchor:"middle",verticalAnchor:g},$):u==="insideTopLeft"?_objectSpread$o({x:h+T,y:m+l,textAnchor:O,verticalAnchor:v},$):u==="insideTopRight"?_objectSpread$o({x:h+p-T,y:m+l,textAnchor:E,verticalAnchor:v},$):u==="insideBottomLeft"?_objectSpread$o({x:h+T,y:m+_-l,textAnchor:O,verticalAnchor:g},$):u==="insideBottomRight"?_objectSpread$o({x:h+p-T,y:m+_-l,textAnchor:E,verticalAnchor:g},$):isObject$1(u)&&(isNumber(u.x)||isPercent(u.x))&&(isNumber(u.y)||isPercent(u.y))?_objectSpread$o({x:h+getPercentValue(u.x,p),y:m+getPercentValue(u.y,_),textAnchor:"end",verticalAnchor:"end"},$):_objectSpread$o({x:h+p/2,y:m+_/2,textAnchor:"middle",verticalAnchor:"middle"},$)},isPolar=function(e){return"cx"in e&&isNumber(e.cx)};function Label(t){var e=t.offset,n=e===void 0?5:e,i=_objectWithoutProperties$a(t,_excluded$a),o=_objectSpread$o({offset:n},i),u=o.viewBox,d=o.position,h=o.value,m=o.children,p=o.content,_=o.className,f=_===void 0?"":_,l=o.textBreakAll;if(!u||isNil(h)&&isNil(m)&&!reactExports.isValidElement(p)&&!isFunction(p))return null;if(reactExports.isValidElement(p))return reactExports.cloneElement(p,o);var g;if(isFunction(p)){if(g=reactExports.createElement(p,o),reactExports.isValidElement(g))return g}else g=getLabel(o);var v=isPolar(u),S=filterProps$1(o,!0);if(v&&(d==="insideStart"||d==="insideEnd"||d==="end"))return renderRadialLabel(o,g,S);var T=v?getAttrsOfPolarLabel(o):getAttrsOfCartesianLabel(o);return React.createElement(Text,_extends$j({className:clsx("recharts-label",f)},S,T,{breakAll:l}),g)}Label.displayName="Label";var parseViewBox=function(e){var n=e.cx,i=e.cy,o=e.angle,u=e.startAngle,d=e.endAngle,h=e.r,m=e.radius,p=e.innerRadius,_=e.outerRadius,f=e.x,l=e.y,g=e.top,v=e.left,S=e.width,T=e.height,E=e.clockWise,O=e.labelViewBox;if(O)return O;if(isNumber(S)&&isNumber(T)){if(isNumber(f)&&isNumber(l))return{x:f,y:l,width:S,height:T};if(isNumber(g)&&isNumber(v))return{x:g,y:v,width:S,height:T}}return isNumber(f)&&isNumber(l)?{x:f,y:l,width:0,height:0}:isNumber(n)&&isNumber(i)?{cx:n,cy:i,startAngle:u||o||0,endAngle:d||o||0,innerRadius:p||0,outerRadius:_||m||h||0,clockWise:E}:e.viewBox?e.viewBox:{}},parseLabel=function(e,n){return e?e===!0?React.createElement(Label,{key:"label-implicit",viewBox:n}):isNumOrStr(e)?React.createElement(Label,{key:"label-implicit",viewBox:n,value:e}):reactExports.isValidElement(e)?e.type===Label?reactExports.cloneElement(e,{key:"label-implicit",viewBox:n}):React.createElement(Label,{key:"label-implicit",content:e,viewBox:n}):isFunction(e)?React.createElement(Label,{key:"label-implicit",content:e,viewBox:n}):isObject$1(e)?React.createElement(Label,_extends$j({viewBox:n},e,{key:"label-implicit"})):null:null},renderCallByParent$1=function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&i&&!e.label)return null;var o=e.children,u=parseViewBox(e),d=findAllByType(o,Label).map(function(m,p){return reactExports.cloneElement(m,{viewBox:n||u,key:"label-".concat(p)})});if(!i)return d;var h=parseLabel(e.label,n||u);return[h].concat(_toConsumableArray$6(d))};Label.parseViewBox=parseViewBox;Label.renderCallByParent=renderCallByParent$1;var last_1,hasRequiredLast;function requireLast(){if(hasRequiredLast)return last_1;hasRequiredLast=1;function t(e){var n=e==null?0:e.length;return n?e[n-1]:void 0}return last_1=t,last_1}var lastExports=requireLast();const last=getDefaultExportFromCjs(lastExports);function _typeof$t(t){"@babel/helpers - typeof";return _typeof$t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$t(t)}var _excluded$9=["valueAccessor"],_excluded2$4=["data","dataKey","clockWise","id","textBreakAll"];function _toConsumableArray$5(t){return _arrayWithoutHoles$5(t)||_iterableToArray$6(t)||_unsupportedIterableToArray$9(t)||_nonIterableSpread$5()}function _nonIterableSpread$5(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$9(t,e){if(t){if(typeof t=="string")return _arrayLikeToArray$9(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray$9(t,e)}}function _iterableToArray$6(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function _arrayWithoutHoles$5(t){if(Array.isArray(t))return _arrayLikeToArray$9(t)}function _arrayLikeToArray$9(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function _extends$i(){return _extends$i=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_extends$i.apply(this,arguments)}function ownKeys$p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$n(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$p(Object(n),!0).forEach(function(i){_defineProperty$s(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$p(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$s(t,e,n){return e=_toPropertyKey$q(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$q(t){var e=_toPrimitive$q(t,"string");return _typeof$t(e)=="symbol"?e:e+""}function _toPrimitive$q(t,e){if(_typeof$t(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(_typeof$t(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _objectWithoutProperties$9(t,e){if(t==null)return{};var n=_objectWithoutPropertiesLoose$9(t,e),i,o;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(o=0;o<u.length;o++)i=u[o],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function _objectWithoutPropertiesLoose$9(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}var defaultAccessor=function(e){return Array.isArray(e.value)?last(e.value):e.value};function LabelList(t){var e=t.valueAccessor,n=e===void 0?defaultAccessor:e,i=_objectWithoutProperties$9(t,_excluded$9),o=i.data,u=i.dataKey,d=i.clockWise,h=i.id,m=i.textBreakAll,p=_objectWithoutProperties$9(i,_excluded2$4);return!o||!o.length?null:React.createElement(Layer,{className:"recharts-label-list"},o.map(function(_,f){var l=isNil(u)?n(_,f):getValueByDataKey(_&&_.payload,u),g=isNil(h)?{}:{id:"".concat(h,"-").concat(f)};return React.createElement(Label,_extends$i({},filterProps$1(_,!0),p,g,{parentViewBox:_.parentViewBox,value:l,textBreakAll:m,viewBox:Label.parseViewBox(isNil(d)?_:_objectSpread$n(_objectSpread$n({},_),{},{clockWise:d})),key:"label-".concat(f),index:f}))}))}LabelList.displayName="LabelList";function parseLabelList(t,e){return t?t===!0?React.createElement(LabelList,{key:"labelList-implicit",data:e}):React.isValidElement(t)||isFunction(t)?React.createElement(LabelList,{key:"labelList-implicit",data:e,content:t}):isObject$1(t)?React.createElement(LabelList,_extends$i({data:e},t,{key:"labelList-implicit"})):null:null}function renderCallByParent(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var i=t.children,o=findAllByType(i,LabelList).map(function(d,h){return reactExports.cloneElement(d,{data:e,key:"labelList-".concat(h)})});if(!n)return o;var u=parseLabelList(t.label,e);return[u].concat(_toConsumableArray$5(o))}LabelList.renderCallByParent=renderCallByParent;function _typeof$s(t){"@babel/helpers - typeof";return _typeof$s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$s(t)}function _extends$h(){return _extends$h=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_extends$h.apply(this,arguments)}function ownKeys$o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$m(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$o(Object(n),!0).forEach(function(i){_defineProperty$r(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$o(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$r(t,e,n){return e=_toPropertyKey$p(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$p(t){var e=_toPrimitive$p(t,"string");return _typeof$s(e)=="symbol"?e:e+""}function _toPrimitive$p(t,e){if(_typeof$s(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(_typeof$s(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var getDeltaAngle=function(e,n){var i=mathSign(n-e),o=Math.min(Math.abs(n-e),359.999);return i*o},getTangentCircle=function(e){var n=e.cx,i=e.cy,o=e.radius,u=e.angle,d=e.sign,h=e.isExternal,m=e.cornerRadius,p=e.cornerIsExternal,_=m*(h?1:-1)+o,f=Math.asin(m/_)/RADIAN,l=p?u:u+d*f,g=polarToCartesian(n,i,_,l),v=polarToCartesian(n,i,o,l),S=p?u-d*f:u,T=polarToCartesian(n,i,_*Math.cos(f*RADIAN),S);return{center:g,circleTangency:v,lineTangency:T,theta:f}},getSectorPath=function(e){var n=e.cx,i=e.cy,o=e.innerRadius,u=e.outerRadius,d=e.startAngle,h=e.endAngle,m=getDeltaAngle(d,h),p=d+m,_=polarToCartesian(n,i,u,d),f=polarToCartesian(n,i,u,p),l="M ".concat(_.x,",").concat(_.y,`
    A `).concat(u,",").concat(u,`,0,
    `).concat(+(Math.abs(m)>180),",").concat(+(d>p),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(o>0){var g=polarToCartesian(n,i,o,d),v=polarToCartesian(n,i,o,p);l+="L ".concat(v.x,",").concat(v.y,`
            A `).concat(o,",").concat(o,`,0,
            `).concat(+(Math.abs(m)>180),",").concat(+(d<=p),`,
            `).concat(g.x,",").concat(g.y," Z")}else l+="L ".concat(n,",").concat(i," Z");return l},getSectorWithCorner=function(e){var n=e.cx,i=e.cy,o=e.innerRadius,u=e.outerRadius,d=e.cornerRadius,h=e.forceCornerRadius,m=e.cornerIsExternal,p=e.startAngle,_=e.endAngle,f=mathSign(_-p),l=getTangentCircle({cx:n,cy:i,radius:u,angle:p,sign:f,cornerRadius:d,cornerIsExternal:m}),g=l.circleTangency,v=l.lineTangency,S=l.theta,T=getTangentCircle({cx:n,cy:i,radius:u,angle:_,sign:-f,cornerRadius:d,cornerIsExternal:m}),E=T.circleTangency,O=T.lineTangency,R=T.theta,M=m?Math.abs(p-_):Math.abs(p-_)-S-R;if(M<0)return h?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(d,",").concat(d,",0,0,1,").concat(d*2,`,0
        a`).concat(d,",").concat(d,",0,0,1,").concat(-d*2,`,0
      `):getSectorPath({cx:n,cy:i,innerRadius:o,outerRadius:u,startAngle:p,endAngle:_});var C="M ".concat(v.x,",").concat(v.y,`
    A`).concat(d,",").concat(d,",0,0,").concat(+(f<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(u,",").concat(u,",0,").concat(+(M>180),",").concat(+(f<0),",").concat(E.x,",").concat(E.y,`
    A`).concat(d,",").concat(d,",0,0,").concat(+(f<0),",").concat(O.x,",").concat(O.y,`
  `);if(o>0){var j=getTangentCircle({cx:n,cy:i,radius:o,angle:p,sign:f,isExternal:!0,cornerRadius:d,cornerIsExternal:m}),$=j.circleTangency,L=j.lineTangency,N=j.theta,B=getTangentCircle({cx:n,cy:i,radius:o,angle:_,sign:-f,isExternal:!0,cornerRadius:d,cornerIsExternal:m}),U=B.circleTangency,H=B.lineTangency,Y=B.theta,K=m?Math.abs(p-_):Math.abs(p-_)-N-Y;if(K<0&&d===0)return"".concat(C,"L").concat(n,",").concat(i,"Z");C+="L".concat(H.x,",").concat(H.y,`
      A`).concat(d,",").concat(d,",0,0,").concat(+(f<0),",").concat(U.x,",").concat(U.y,`
      A`).concat(o,",").concat(o,",0,").concat(+(K>180),",").concat(+(f>0),",").concat($.x,",").concat($.y,`
      A`).concat(d,",").concat(d,",0,0,").concat(+(f<0),",").concat(L.x,",").concat(L.y,"Z")}else C+="L".concat(n,",").concat(i,"Z");return C},defaultProps$3={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Sector=function(e){var n=_objectSpread$m(_objectSpread$m({},defaultProps$3),e),i=n.cx,o=n.cy,u=n.innerRadius,d=n.outerRadius,h=n.cornerRadius,m=n.forceCornerRadius,p=n.cornerIsExternal,_=n.startAngle,f=n.endAngle,l=n.className;if(d<u||_===f)return null;var g=clsx("recharts-sector",l),v=d-u,S=getPercentValue(h,v,0,!0),T;return S>0&&Math.abs(_-f)<360?T=getSectorWithCorner({cx:i,cy:o,innerRadius:u,outerRadius:d,cornerRadius:Math.min(S,v/2),forceCornerRadius:m,cornerIsExternal:p,startAngle:_,endAngle:f}):T=getSectorPath({cx:i,cy:o,innerRadius:u,outerRadius:d,startAngle:_,endAngle:f}),React.createElement("path",_extends$h({},filterProps$1(n,!0),{className:g,d:T,role:"img"}))};function _typeof$r(t){"@babel/helpers - typeof";return _typeof$r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$r(t)}function _extends$g(){return _extends$g=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_extends$g.apply(this,arguments)}function ownKeys$n(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$l(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$n(Object(n),!0).forEach(function(i){_defineProperty$q(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$n(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$q(t,e,n){return e=_toPropertyKey$o(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$o(t){var e=_toPrimitive$o(t,"string");return _typeof$r(e)=="symbol"?e:e+""}function _toPrimitive$o(t,e){if(_typeof$r(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(_typeof$r(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var CURVE_FACTORIES={curveBasisClosed,curveBasisOpen,curveBasis,curveBumpX:bumpX,curveBumpY:bumpY,curveLinearClosed,curveLinear,curveMonotoneX:monotoneX,curveMonotoneY:monotoneY,curveNatural,curveStep,curveStepAfter:stepAfter,curveStepBefore:stepBefore},defined=function(e){return e.x===+e.x&&e.y===+e.y},getX=function(e){return e.x},getY=function(e){return e.y},getCurveFactory=function(e,n){if(isFunction(e))return e;var i="curve".concat(upperFirst(e));return(i==="curveMonotone"||i==="curveBump")&&n?CURVE_FACTORIES["".concat(i).concat(n==="vertical"?"Y":"X")]:CURVE_FACTORIES[i]||curveLinear},getPath$1=function(e){var n=e.type,i=n===void 0?"linear":n,o=e.points,u=o===void 0?[]:o,d=e.baseLine,h=e.layout,m=e.connectNulls,p=m===void 0?!1:m,_=getCurveFactory(i,h),f=p?u.filter(function(S){return defined(S)}):u,l;if(Array.isArray(d)){var g=p?d.filter(function(S){return defined(S)}):d,v=f.map(function(S,T){return _objectSpread$l(_objectSpread$l({},S),{},{base:g[T]})});return h==="vertical"?l=shapeArea().y(getY).x1(getX).x0(function(S){return S.base.x}):l=shapeArea().x(getX).y1(getY).y0(function(S){return S.base.y}),l.defined(defined).curve(_),l(v)}return h==="vertical"&&isNumber(d)?l=shapeArea().y(getY).x1(getX).x0(d):isNumber(d)?l=shapeArea().x(getX).y1(getY).y0(d):l=shapeLine().x(getX).y(getY),l.defined(defined).curve(_),l(f)},Curve=function(e){var n=e.className,i=e.points,o=e.path,u=e.pathRef;if((!i||!i.length)&&!o)return null;var d=i&&i.length?getPath$1(e):o;return reactExports.createElement("path",_extends$g({},filterProps$1(e,!1),adaptEventHandlers(e),{className:clsx("recharts-curve",n),d,ref:u}))},propTypes={exports:{}},ReactPropTypesSecret_1,hasRequiredReactPropTypesSecret;function requireReactPropTypesSecret(){if(hasRequiredReactPropTypesSecret)return ReactPropTypesSecret_1;hasRequiredReactPropTypesSecret=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return ReactPropTypesSecret_1=t,ReactPropTypesSecret_1}var factoryWithThrowingShims,hasRequiredFactoryWithThrowingShims;function requireFactoryWithThrowingShims(){if(hasRequiredFactoryWithThrowingShims)return factoryWithThrowingShims;hasRequiredFactoryWithThrowingShims=1;var t=requireReactPropTypesSecret();function e(){}function n(){}return n.resetWarningCache=e,factoryWithThrowingShims=function(){function i(d,h,m,p,_,f){if(f!==t){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}i.isRequired=i;function o(){return i}var u={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:o,element:i,elementType:i,instanceOf:o,node:i,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:n,resetWarningCache:e};return u.PropTypes=u,u},factoryWithThrowingShims}var hasRequiredPropTypes;function requirePropTypes(){return hasRequiredPropTypes||(hasRequiredPropTypes=1,propTypes.exports=requireFactoryWithThrowingShims()()),propTypes.exports}var propTypesExports=requirePropTypes();const PropTypes=getDefaultExportFromCjs(propTypesExports),{getOwnPropertyNames,getOwnPropertySymbols}=Object,{hasOwnProperty}=Object.prototype;function combineComparators(t,e){return function(i,o,u){return t(i,o,u)&&e(i,o,u)}}function createIsCircular(t){return function(n,i,o){if(!n||!i||typeof n!="object"||typeof i!="object")return t(n,i,o);const{cache:u}=o,d=u.get(n),h=u.get(i);if(d&&h)return d===i&&h===n;u.set(n,i),u.set(i,n);const m=t(n,i,o);return u.delete(n),u.delete(i),m}}function getShortTag(t){return t?.[Symbol.toStringTag]}function getStrictProperties(t){return getOwnPropertyNames(t).concat(getOwnPropertySymbols(t))}const hasOwn=Object.hasOwn||((t,e)=>hasOwnProperty.call(t,e));function sameValueZeroEqual(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const PREACT_VNODE="__v",PREACT_OWNER="__o",REACT_OWNER="_owner",{getOwnPropertyDescriptor,keys}=Object;function areArrayBuffersEqual(t,e){return t.byteLength===e.byteLength&&areTypedArraysEqual(new Uint8Array(t),new Uint8Array(e))}function areArraysEqual(t,e,n){let i=t.length;if(e.length!==i)return!1;for(;i-- >0;)if(!n.equals(t[i],e[i],i,i,t,e,n))return!1;return!0}function areDataViewsEqual(t,e){return t.byteLength===e.byteLength&&areTypedArraysEqual(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function areDatesEqual(t,e){return sameValueZeroEqual(t.getTime(),e.getTime())}function areErrorsEqual(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function areFunctionsEqual(t,e){return t===e}function areMapsEqual(t,e,n){const i=t.size;if(i!==e.size)return!1;if(!i)return!0;const o=new Array(i),u=t.entries();let d,h,m=0;for(;(d=u.next())&&!d.done;){const p=e.entries();let _=!1,f=0;for(;(h=p.next())&&!h.done;){if(o[f]){f++;continue}const l=d.value,g=h.value;if(n.equals(l[0],g[0],m,f,t,e,n)&&n.equals(l[1],g[1],l[0],g[0],t,e,n)){_=o[f]=!0;break}f++}if(!_)return!1;m++}return!0}const areNumbersEqual=sameValueZeroEqual;function areObjectsEqual(t,e,n){const i=keys(t);let o=i.length;if(keys(e).length!==o)return!1;for(;o-- >0;)if(!isPropertyEqual(t,e,n,i[o]))return!1;return!0}function areObjectsEqualStrict(t,e,n){const i=getStrictProperties(t);let o=i.length;if(getStrictProperties(e).length!==o)return!1;let u,d,h;for(;o-- >0;)if(u=i[o],!isPropertyEqual(t,e,n,u)||(d=getOwnPropertyDescriptor(t,u),h=getOwnPropertyDescriptor(e,u),(d||h)&&(!d||!h||d.configurable!==h.configurable||d.enumerable!==h.enumerable||d.writable!==h.writable)))return!1;return!0}function arePrimitiveWrappersEqual(t,e){return sameValueZeroEqual(t.valueOf(),e.valueOf())}function areRegExpsEqual(t,e){return t.source===e.source&&t.flags===e.flags}function areSetsEqual(t,e,n){const i=t.size;if(i!==e.size)return!1;if(!i)return!0;const o=new Array(i),u=t.values();let d,h;for(;(d=u.next())&&!d.done;){const m=e.values();let p=!1,_=0;for(;(h=m.next())&&!h.done;){if(!o[_]&&n.equals(d.value,h.value,d.value,h.value,t,e,n)){p=o[_]=!0;break}_++}if(!p)return!1}return!0}function areTypedArraysEqual(t,e){let n=t.byteLength;if(e.byteLength!==n||t.byteOffset!==e.byteOffset)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function areUrlsEqual(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function isPropertyEqual(t,e,n,i){return(i===REACT_OWNER||i===PREACT_OWNER||i===PREACT_VNODE)&&(t.$$typeof||e.$$typeof)?!0:hasOwn(e,i)&&n.equals(t[i],e[i],i,i,t,e,n)}const ARRAY_BUFFER_TAG="[object ArrayBuffer]",ARGUMENTS_TAG="[object Arguments]",BOOLEAN_TAG="[object Boolean]",DATA_VIEW_TAG="[object DataView]",DATE_TAG="[object Date]",ERROR_TAG="[object Error]",MAP_TAG="[object Map]",NUMBER_TAG="[object Number]",OBJECT_TAG="[object Object]",REG_EXP_TAG="[object RegExp]",SET_TAG="[object Set]",STRING_TAG="[object String]",TYPED_ARRAY_TAGS={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},URL_TAG="[object URL]",toString=Object.prototype.toString;function createEqualityComparator({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:n,areDatesEqual:i,areErrorsEqual:o,areFunctionsEqual:u,areMapsEqual:d,areNumbersEqual:h,areObjectsEqual:m,arePrimitiveWrappersEqual:p,areRegExpsEqual:_,areSetsEqual:f,areTypedArraysEqual:l,areUrlsEqual:g,unknownTagComparators:v}){return function(T,E,O){if(T===E)return!0;if(T==null||E==null)return!1;const R=typeof T;if(R!==typeof E)return!1;if(R!=="object")return R==="number"?h(T,E,O):R==="function"?u(T,E,O):!1;const M=T.constructor;if(M!==E.constructor)return!1;if(M===Object)return m(T,E,O);if(Array.isArray(T))return e(T,E,O);if(M===Date)return i(T,E,O);if(M===RegExp)return _(T,E,O);if(M===Map)return d(T,E,O);if(M===Set)return f(T,E,O);const C=toString.call(T);if(C===DATE_TAG)return i(T,E,O);if(C===REG_EXP_TAG)return _(T,E,O);if(C===MAP_TAG)return d(T,E,O);if(C===SET_TAG)return f(T,E,O);if(C===OBJECT_TAG)return typeof T.then!="function"&&typeof E.then!="function"&&m(T,E,O);if(C===URL_TAG)return g(T,E,O);if(C===ERROR_TAG)return o(T,E,O);if(C===ARGUMENTS_TAG)return m(T,E,O);if(TYPED_ARRAY_TAGS[C])return l(T,E,O);if(C===ARRAY_BUFFER_TAG)return t(T,E,O);if(C===DATA_VIEW_TAG)return n(T,E,O);if(C===BOOLEAN_TAG||C===NUMBER_TAG||C===STRING_TAG)return p(T,E,O);if(v){let j=v[C];if(!j){const $=getShortTag(T);$&&(j=v[$])}if(j)return j(T,E,O)}return!1}}function createEqualityComparatorConfig({circular:t,createCustomConfig:e,strict:n}){let i={areArrayBuffersEqual,areArraysEqual:n?areObjectsEqualStrict:areArraysEqual,areDataViewsEqual,areDatesEqual,areErrorsEqual,areFunctionsEqual,areMapsEqual:n?combineComparators(areMapsEqual,areObjectsEqualStrict):areMapsEqual,areNumbersEqual,areObjectsEqual:n?areObjectsEqualStrict:areObjectsEqual,arePrimitiveWrappersEqual,areRegExpsEqual,areSetsEqual:n?combineComparators(areSetsEqual,areObjectsEqualStrict):areSetsEqual,areTypedArraysEqual:n?combineComparators(areTypedArraysEqual,areObjectsEqualStrict):areTypedArraysEqual,areUrlsEqual,unknownTagComparators:void 0};if(e&&(i=Object.assign({},i,e(i))),t){const o=createIsCircular(i.areArraysEqual),u=createIsCircular(i.areMapsEqual),d=createIsCircular(i.areObjectsEqual),h=createIsCircular(i.areSetsEqual);i=Object.assign({},i,{areArraysEqual:o,areMapsEqual:u,areObjectsEqual:d,areSetsEqual:h})}return i}function createInternalEqualityComparator(t){return function(e,n,i,o,u,d,h){return t(e,n,h)}}function createIsEqual({circular:t,comparator:e,createState:n,equals:i,strict:o}){if(n)return function(h,m){const{cache:p=t?new WeakMap:void 0,meta:_}=n();return e(h,m,{cache:p,equals:i,meta:_,strict:o})};if(t)return function(h,m){return e(h,m,{cache:new WeakMap,equals:i,meta:void 0,strict:o})};const u={cache:void 0,equals:i,meta:void 0,strict:o};return function(h,m){return e(h,m,u)}}const deepEqual=createCustomEqual();createCustomEqual({strict:!0});createCustomEqual({circular:!0});createCustomEqual({circular:!0,strict:!0});createCustomEqual({createInternalComparator:()=>sameValueZeroEqual});createCustomEqual({strict:!0,createInternalComparator:()=>sameValueZeroEqual});createCustomEqual({circular:!0,createInternalComparator:()=>sameValueZeroEqual});createCustomEqual({circular:!0,createInternalComparator:()=>sameValueZeroEqual,strict:!0});function createCustomEqual(t={}){const{circular:e=!1,createInternalComparator:n,createState:i,strict:o=!1}=t,u=createEqualityComparatorConfig(t),d=createEqualityComparator(u),h=n?n(d):createInternalEqualityComparator(d);return createIsEqual({circular:e,comparator:d,createState:i,equals:h,strict:o})}function safeRequestAnimationFrame(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function setRafTimeout(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,i=function o(u){n<0&&(n=u),u-n>e?(t(u),n=-1):safeRequestAnimationFrame(o)};requestAnimationFrame(i)}function _typeof$q(t){"@babel/helpers - typeof";return _typeof$q=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$q(t)}function _toArray(t){return _arrayWithHoles$6(t)||_iterableToArray$5(t)||_unsupportedIterableToArray$8(t)||_nonIterableRest$6()}function _nonIterableRest$6(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$8(t,e){if(t){if(typeof t=="string")return _arrayLikeToArray$8(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray$8(t,e)}}function _arrayLikeToArray$8(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function _iterableToArray$5(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function _arrayWithHoles$6(t){if(Array.isArray(t))return t}function createAnimateManager(){var t={},e=function(){return null},n=!1,i=function o(u){if(!n){if(Array.isArray(u)){if(!u.length)return;var d=u,h=_toArray(d),m=h[0],p=h.slice(1);if(typeof m=="number"){setRafTimeout(o.bind(null,p),m);return}o(m),setRafTimeout(o.bind(null,p));return}_typeof$q(u)==="object"&&(t=u,e(t)),typeof u=="function"&&u()}};return{stop:function(){n=!0},start:function(u){n=!1,i(u)},subscribe:function(u){return e=u,function(){e=function(){return null}}}}}function _typeof$p(t){"@babel/helpers - typeof";return _typeof$p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$p(t)}function ownKeys$m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$k(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$m(Object(n),!0).forEach(function(i){_defineProperty$p(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$m(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$p(t,e,n){return e=_toPropertyKey$n(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$n(t){var e=_toPrimitive$n(t,"string");return _typeof$p(e)==="symbol"?e:String(e)}function _toPrimitive$n(t,e){if(_typeof$p(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(_typeof$p(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var getIntersectionKeys=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(i,o){return i.filter(function(u){return o.includes(u)})})},identity=function(e){return e},getDashCase=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},mapObject=function(e,n){return Object.keys(n).reduce(function(i,o){return _objectSpread$k(_objectSpread$k({},i),{},_defineProperty$p({},o,e(o,n[o])))},{})},getTransitionVal=function(e,n,i){return e.map(function(o){return"".concat(getDashCase(o)," ").concat(n,"ms ").concat(i)}).join(",")};function _slicedToArray$5(t,e){return _arrayWithHoles$5(t)||_iterableToArrayLimit$5(t,e)||_unsupportedIterableToArray$7(t,e)||_nonIterableRest$5()}function _nonIterableRest$5(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArrayLimit$5(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i,o,u,d,h=[],m=!0,p=!1;try{if(u=(n=n.call(t)).next,e!==0)for(;!(m=(i=u.call(n)).done)&&(h.push(i.value),h.length!==e);m=!0);}catch(_){p=!0,o=_}finally{try{if(!m&&n.return!=null&&(d=n.return(),Object(d)!==d))return}finally{if(p)throw o}}return h}}function _arrayWithHoles$5(t){if(Array.isArray(t))return t}function _toConsumableArray$4(t){return _arrayWithoutHoles$4(t)||_iterableToArray$4(t)||_unsupportedIterableToArray$7(t)||_nonIterableSpread$4()}function _nonIterableSpread$4(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$7(t,e){if(t){if(typeof t=="string")return _arrayLikeToArray$7(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray$7(t,e)}}function _iterableToArray$4(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function _arrayWithoutHoles$4(t){if(Array.isArray(t))return _arrayLikeToArray$7(t)}function _arrayLikeToArray$7(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var ACCURACY=1e-4,cubicBezierFactor=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},multyTime=function(e,n){return e.map(function(i,o){return i*Math.pow(n,o)}).reduce(function(i,o){return i+o})},cubicBezier$1=function(e,n){return function(i){var o=cubicBezierFactor(e,n);return multyTime(o,i)}},derivativeCubicBezier=function(e,n){return function(i){var o=cubicBezierFactor(e,n),u=[].concat(_toConsumableArray$4(o.map(function(d,h){return d*h}).slice(1)),[0]);return multyTime(u,i)}},configBezier=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];var o=n[0],u=n[1],d=n[2],h=n[3];if(n.length===1)switch(n[0]){case"linear":o=0,u=0,d=1,h=1;break;case"ease":o=.25,u=.1,d=.25,h=1;break;case"ease-in":o=.42,u=0,d=1,h=1;break;case"ease-out":o=.42,u=0,d=.58,h=1;break;case"ease-in-out":o=0,u=0,d=.58,h=1;break;default:{var m=n[0].split("(");if(m[0]==="cubic-bezier"&&m[1].split(")")[0].split(",").length===4){var p=m[1].split(")")[0].split(",").map(function(T){return parseFloat(T)}),_=_slicedToArray$5(p,4);o=_[0],u=_[1],d=_[2],h=_[3]}}}var f=cubicBezier$1(o,d),l=cubicBezier$1(u,h),g=derivativeCubicBezier(o,d),v=function(E){return E>1?1:E<0?0:E},S=function(E){for(var O=E>1?1:E,R=O,M=0;M<8;++M){var C=f(R)-O,j=g(R);if(Math.abs(C-O)<ACCURACY||j<ACCURACY)return l(R);R=v(R-C/j)}return l(R)};return S.isStepper=!1,S},configSpring=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,i=n===void 0?100:n,o=e.damping,u=o===void 0?8:o,d=e.dt,h=d===void 0?17:d,m=function(_,f,l){var g=-(_-f)*i,v=l*u,S=l+(g-v)*h/1e3,T=l*h/1e3+_;return Math.abs(T-f)<ACCURACY&&Math.abs(S)<ACCURACY?[f,0]:[T,S]};return m.isStepper=!0,m.dt=h,m},configEasing=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];var o=n[0];if(typeof o=="string")switch(o){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return configBezier(o);case"spring":return configSpring();default:if(o.split("(")[0]==="cubic-bezier")return configBezier(o)}return typeof o=="function"?o:null};function _typeof$o(t){"@babel/helpers - typeof";return _typeof$o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$o(t)}function _toConsumableArray$3(t){return _arrayWithoutHoles$3(t)||_iterableToArray$3(t)||_unsupportedIterableToArray$6(t)||_nonIterableSpread$3()}function _nonIterableSpread$3(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArray$3(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function _arrayWithoutHoles$3(t){if(Array.isArray(t))return _arrayLikeToArray$6(t)}function ownKeys$l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$j(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$l(Object(n),!0).forEach(function(i){_defineProperty$o(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$l(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$o(t,e,n){return e=_toPropertyKey$m(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$m(t){var e=_toPrimitive$m(t,"string");return _typeof$o(e)==="symbol"?e:String(e)}function _toPrimitive$m(t,e){if(_typeof$o(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(_typeof$o(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _slicedToArray$4(t,e){return _arrayWithHoles$4(t)||_iterableToArrayLimit$4(t,e)||_unsupportedIterableToArray$6(t,e)||_nonIterableRest$4()}function _nonIterableRest$4(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$6(t,e){if(t){if(typeof t=="string")return _arrayLikeToArray$6(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray$6(t,e)}}function _arrayLikeToArray$6(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function _iterableToArrayLimit$4(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i,o,u,d,h=[],m=!0,p=!1;try{if(u=(n=n.call(t)).next,e!==0)for(;!(m=(i=u.call(n)).done)&&(h.push(i.value),h.length!==e);m=!0);}catch(_){p=!0,o=_}finally{try{if(!m&&n.return!=null&&(d=n.return(),Object(d)!==d))return}finally{if(p)throw o}}return h}}function _arrayWithHoles$4(t){if(Array.isArray(t))return t}var alpha$1=function(e,n,i){return e+(n-e)*i},needContinue=function(e){var n=e.from,i=e.to;return n!==i},calStepperVals=function t(e,n,i){var o=mapObject(function(u,d){if(needContinue(d)){var h=e(d.from,d.to,d.velocity),m=_slicedToArray$4(h,2),p=m[0],_=m[1];return _objectSpread$j(_objectSpread$j({},d),{},{from:p,velocity:_})}return d},n);return i<1?mapObject(function(u,d){return needContinue(d)?_objectSpread$j(_objectSpread$j({},d),{},{velocity:alpha$1(d.velocity,o[u].velocity,i),from:alpha$1(d.from,o[u].from,i)}):d},n):t(e,o,i-1)};const configUpdate=(function(t,e,n,i,o){var u=getIntersectionKeys(t,e),d=u.reduce(function(T,E){return _objectSpread$j(_objectSpread$j({},T),{},_defineProperty$o({},E,[t[E],e[E]]))},{}),h=u.reduce(function(T,E){return _objectSpread$j(_objectSpread$j({},T),{},_defineProperty$o({},E,{from:t[E],velocity:0,to:e[E]}))},{}),m=-1,p,_,f=function(){return null},l=function(){return mapObject(function(E,O){return O.from},h)},g=function(){return!Object.values(h).filter(needContinue).length},v=function(E){p||(p=E);var O=E-p,R=O/n.dt;h=calStepperVals(n,h,R),o(_objectSpread$j(_objectSpread$j(_objectSpread$j({},t),e),l())),p=E,g()||(m=requestAnimationFrame(f))},S=function(E){_||(_=E);var O=(E-_)/i,R=mapObject(function(C,j){return alpha$1.apply(void 0,_toConsumableArray$3(j).concat([n(O)]))},d);if(o(_objectSpread$j(_objectSpread$j(_objectSpread$j({},t),e),R)),O<1)m=requestAnimationFrame(f);else{var M=mapObject(function(C,j){return alpha$1.apply(void 0,_toConsumableArray$3(j).concat([n(1)]))},d);o(_objectSpread$j(_objectSpread$j(_objectSpread$j({},t),e),M))}};return f=n.isStepper?v:S,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(m)}}});function _typeof$n(t){"@babel/helpers - typeof";return _typeof$n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$n(t)}var _excluded$8=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function _objectWithoutProperties$8(t,e){if(t==null)return{};var n=_objectWithoutPropertiesLoose$8(t,e),i,o;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(o=0;o<u.length;o++)i=u[o],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function _objectWithoutPropertiesLoose$8(t,e){if(t==null)return{};var n={},i=Object.keys(t),o,u;for(u=0;u<i.length;u++)o=i[u],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}function _toConsumableArray$2(t){return _arrayWithoutHoles$2(t)||_iterableToArray$2(t)||_unsupportedIterableToArray$5(t)||_nonIterableSpread$2()}function _nonIterableSpread$2(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$5(t,e){if(t){if(typeof t=="string")return _arrayLikeToArray$5(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray$5(t,e)}}function _iterableToArray$2(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function _arrayWithoutHoles$2(t){if(Array.isArray(t))return _arrayLikeToArray$5(t)}function _arrayLikeToArray$5(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function ownKeys$k(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$i(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$k(Object(n),!0).forEach(function(i){_defineProperty$n(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$k(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$n(t,e,n){return e=_toPropertyKey$l(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _classCallCheck$c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties$c(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,_toPropertyKey$l(i.key),i)}}function _createClass$c(t,e,n){return e&&_defineProperties$c(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey$l(t){var e=_toPrimitive$l(t,"string");return _typeof$n(e)==="symbol"?e:String(e)}function _toPrimitive$l(t,e){if(_typeof$n(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(_typeof$n(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _inherits$a(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf$a(t,e)}function _setPrototypeOf$a(t,e){return _setPrototypeOf$a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,o){return i.__proto__=o,i},_setPrototypeOf$a(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct$a();return function(){var i=_getPrototypeOf$a(t),o;if(e){var u=_getPrototypeOf$a(this).constructor;o=Reflect.construct(i,arguments,u)}else o=i.apply(this,arguments);return _possibleConstructorReturn$a(this,o)}}function _possibleConstructorReturn$a(t,e){if(e&&(_typeof$n(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$a(t)}function _assertThisInitialized$a(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct$a(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$a(t){return _getPrototypeOf$a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_getPrototypeOf$a(t)}var Animate=(function(t){_inherits$a(n,t);var e=_createSuper(n);function n(i,o){var u;_classCallCheck$c(this,n),u=e.call(this,i,o);var d=u.props,h=d.isActive,m=d.attributeName,p=d.from,_=d.to,f=d.steps,l=d.children,g=d.duration;if(u.handleStyleChange=u.handleStyleChange.bind(_assertThisInitialized$a(u)),u.changeStyle=u.changeStyle.bind(_assertThisInitialized$a(u)),!h||g<=0)return u.state={style:{}},typeof l=="function"&&(u.state={style:_}),_possibleConstructorReturn$a(u);if(f&&f.length)u.state={style:f[0].style};else if(p){if(typeof l=="function")return u.state={style:p},_possibleConstructorReturn$a(u);u.state={style:m?_defineProperty$n({},m,p):p}}else u.state={style:{}};return u}return _createClass$c(n,[{key:"componentDidMount",value:function(){var o=this.props,u=o.isActive,d=o.canBegin;this.mounted=!0,!(!u||!d)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(o){var u=this.props,d=u.isActive,h=u.canBegin,m=u.attributeName,p=u.shouldReAnimate,_=u.to,f=u.from,l=this.state.style;if(h){if(!d){var g={style:m?_defineProperty$n({},m,_):_};this.state&&l&&(m&&l[m]!==_||!m&&l!==_)&&this.setState(g);return}if(!(deepEqual(o.to,_)&&o.canBegin&&o.isActive)){var v=!o.canBegin||!o.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var S=v||p?f:o.to;if(this.state&&l){var T={style:m?_defineProperty$n({},m,S):S};(m&&l[m]!==S||!m&&l!==S)&&this.setState(T)}this.runAnimation(_objectSpread$i(_objectSpread$i({},this.props),{},{from:S,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var o=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),o&&o()}},{key:"handleStyleChange",value:function(o){this.changeStyle(o)}},{key:"changeStyle",value:function(o){this.mounted&&this.setState({style:o})}},{key:"runJSAnimation",value:function(o){var u=this,d=o.from,h=o.to,m=o.duration,p=o.easing,_=o.begin,f=o.onAnimationEnd,l=o.onAnimationStart,g=configUpdate(d,h,configEasing(p),m,this.changeStyle),v=function(){u.stopJSAnimation=g()};this.manager.start([l,_,v,m,f])}},{key:"runStepAnimation",value:function(o){var u=this,d=o.steps,h=o.begin,m=o.onAnimationStart,p=d[0],_=p.style,f=p.duration,l=f===void 0?0:f,g=function(S,T,E){if(E===0)return S;var O=T.duration,R=T.easing,M=R===void 0?"ease":R,C=T.style,j=T.properties,$=T.onAnimationEnd,L=E>0?d[E-1]:T,N=j||Object.keys(C);if(typeof M=="function"||M==="spring")return[].concat(_toConsumableArray$2(S),[u.runJSAnimation.bind(u,{from:L.style,to:C,duration:O,easing:M}),O]);var B=getTransitionVal(N,O,M),U=_objectSpread$i(_objectSpread$i(_objectSpread$i({},L.style),C),{},{transition:B});return[].concat(_toConsumableArray$2(S),[U,O,$]).filter(identity)};return this.manager.start([m].concat(_toConsumableArray$2(d.reduce(g,[_,Math.max(l,h)])),[o.onAnimationEnd]))}},{key:"runAnimation",value:function(o){this.manager||(this.manager=createAnimateManager());var u=o.begin,d=o.duration,h=o.attributeName,m=o.to,p=o.easing,_=o.onAnimationStart,f=o.onAnimationEnd,l=o.steps,g=o.children,v=this.manager;if(this.unSubscribe=v.subscribe(this.handleStyleChange),typeof p=="function"||typeof g=="function"||p==="spring"){this.runJSAnimation(o);return}if(l.length>1){this.runStepAnimation(o);return}var S=h?_defineProperty$n({},h,m):m,T=getTransitionVal(Object.keys(S),d,p);v.start([_,u,_objectSpread$i(_objectSpread$i({},S),{},{transition:T}),d,f])}},{key:"render",value:function(){var o=this.props,u=o.children;o.begin;var d=o.duration;o.attributeName,o.easing;var h=o.isActive;o.steps,o.from,o.to,o.canBegin,o.onAnimationEnd,o.shouldReAnimate,o.onAnimationReStart;var m=_objectWithoutProperties$8(o,_excluded$8),p=reactExports.Children.count(u),_=this.state.style;if(typeof u=="function")return u(_);if(!h||p===0||d<=0)return u;var f=function(g){var v=g.props,S=v.style,T=S===void 0?{}:S,E=v.className,O=reactExports.cloneElement(g,_objectSpread$i(_objectSpread$i({},m),{},{style:_objectSpread$i(_objectSpread$i({},T),_),className:E}));return O};return p===1?f(reactExports.Children.only(u)):React.createElement("div",null,reactExports.Children.map(u,function(l){return f(l)}))}}]),n})(reactExports.PureComponent);Animate.displayName="Animate";Animate.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Animate.propTypes={from:PropTypes.oneOfType([PropTypes.object,PropTypes.string]),to:PropTypes.oneOfType([PropTypes.object,PropTypes.string]),attributeName:PropTypes.string,duration:PropTypes.number,begin:PropTypes.number,easing:PropTypes.oneOfType([PropTypes.string,PropTypes.func]),steps:PropTypes.arrayOf(PropTypes.shape({duration:PropTypes.number.isRequired,style:PropTypes.object.isRequired,easing:PropTypes.oneOfType([PropTypes.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),PropTypes.func]),properties:PropTypes.arrayOf("string"),onAnimationEnd:PropTypes.func})),children:PropTypes.oneOfType([PropTypes.node,PropTypes.func]),isActive:PropTypes.bool,canBegin:PropTypes.bool,onAnimationEnd:PropTypes.func,shouldReAnimate:PropTypes.bool,onAnimationStart:PropTypes.func,onAnimationReStart:PropTypes.func};var reactDomExports=requireReactDom();const ReactDOM=getDefaultExportFromCjs(reactDomExports);function _typeof$m(t){"@babel/helpers - typeof";return _typeof$m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$m(t)}function _extends$f(){return _extends$f=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_extends$f.apply(this,arguments)}function _slicedToArray$3(t,e){return _arrayWithHoles$3(t)||_iterableToArrayLimit$3(t,e)||_unsupportedIterableToArray$4(t,e)||_nonIterableRest$3()}function _nonIterableRest$3(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$4(t,e){if(t){if(typeof t=="string")return _arrayLikeToArray$4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray$4(t,e)}}function _arrayLikeToArray$4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function _iterableToArrayLimit$3(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i,o,u,d,h=[],m=!0,p=!1;try{if(u=(n=n.call(t)).next,e!==0)for(;!(m=(i=u.call(n)).done)&&(h.push(i.value),h.length!==e);m=!0);}catch(_){p=!0,o=_}finally{try{if(!m&&n.return!=null&&(d=n.return(),Object(d)!==d))return}finally{if(p)throw o}}return h}}function _arrayWithHoles$3(t){if(Array.isArray(t))return t}function ownKeys$j(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$h(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$j(Object(n),!0).forEach(function(i){_defineProperty$m(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$j(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$m(t,e,n){return e=_toPropertyKey$k(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$k(t){var e=_toPrimitive$k(t,"string");return _typeof$m(e)=="symbol"?e:e+""}function _toPrimitive$k(t,e){if(_typeof$m(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(_typeof$m(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var getRectanglePath=function(e,n,i,o,u){var d=Math.min(Math.abs(i)/2,Math.abs(o)/2),h=o>=0?1:-1,m=i>=0?1:-1,p=o>=0&&i>=0||o<0&&i<0?1:0,_;if(d>0&&u instanceof Array){for(var f=[0,0,0,0],l=0,g=4;l<g;l++)f[l]=u[l]>d?d:u[l];_="M".concat(e,",").concat(n+h*f[0]),f[0]>0&&(_+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(p,",").concat(e+m*f[0],",").concat(n)),_+="L ".concat(e+i-m*f[1],",").concat(n),f[1]>0&&(_+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(p,`,
        `).concat(e+i,",").concat(n+h*f[1])),_+="L ".concat(e+i,",").concat(n+o-h*f[2]),f[2]>0&&(_+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(p,`,
        `).concat(e+i-m*f[2],",").concat(n+o)),_+="L ".concat(e+m*f[3],",").concat(n+o),f[3]>0&&(_+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(p,`,
        `).concat(e,",").concat(n+o-h*f[3])),_+="Z"}else if(d>0&&u===+u&&u>0){var v=Math.min(d,u);_="M ".concat(e,",").concat(n+h*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(p,",").concat(e+m*v,",").concat(n,`
            L `).concat(e+i-m*v,",").concat(n,`
            A `).concat(v,",").concat(v,",0,0,").concat(p,",").concat(e+i,",").concat(n+h*v,`
            L `).concat(e+i,",").concat(n+o-h*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(p,",").concat(e+i-m*v,",").concat(n+o,`
            L `).concat(e+m*v,",").concat(n+o,`
            A `).concat(v,",").concat(v,",0,0,").concat(p,",").concat(e,",").concat(n+o-h*v," Z")}else _="M ".concat(e,",").concat(n," h ").concat(i," v ").concat(o," h ").concat(-i," Z");return _},isInRectangle=function(e,n){if(!e||!n)return!1;var i=e.x,o=e.y,u=n.x,d=n.y,h=n.width,m=n.height;if(Math.abs(h)>0&&Math.abs(m)>0){var p=Math.min(u,u+h),_=Math.max(u,u+h),f=Math.min(d,d+m),l=Math.max(d,d+m);return i>=p&&i<=_&&o>=f&&o<=l}return!1},defaultProps$2={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Rectangle=function(e){var n=_objectSpread$h(_objectSpread$h({},defaultProps$2),e),i=reactExports.useRef(),o=reactExports.useState(-1),u=_slicedToArray$3(o,2),d=u[0],h=u[1];reactExports.useEffect(function(){if(i.current&&i.current.getTotalLength)try{var M=i.current.getTotalLength();M&&h(M)}catch{}},[]);var m=n.x,p=n.y,_=n.width,f=n.height,l=n.radius,g=n.className,v=n.animationEasing,S=n.animationDuration,T=n.animationBegin,E=n.isAnimationActive,O=n.isUpdateAnimationActive;if(m!==+m||p!==+p||_!==+_||f!==+f||_===0||f===0)return null;var R=clsx("recharts-rectangle",g);return O?React.createElement(Animate,{canBegin:d>0,from:{width:_,height:f,x:m,y:p},to:{width:_,height:f,x:m,y:p},duration:S,animationEasing:v,isActive:O},function(M){var C=M.width,j=M.height,$=M.x,L=M.y;return React.createElement(Animate,{canBegin:d>0,from:"0px ".concat(d===-1?1:d,"px"),to:"".concat(d,"px 0px"),attributeName:"strokeDasharray",begin:T,duration:S,isActive:E,easing:v},React.createElement("path",_extends$f({},filterProps$1(n,!0),{className:R,d:getRectanglePath($,L,C,j,l),ref:i})))}):React.createElement("path",_extends$f({},filterProps$1(n,!0),{className:R,d:getRectanglePath(m,p,_,f,l)}))};function _extends$e(){return _extends$e=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_extends$e.apply(this,arguments)}var Dot=function(e){var n=e.cx,i=e.cy,o=e.r,u=e.className,d=clsx("recharts-dot",u);return n===+n&&i===+i&&o===+o?reactExports.createElement("circle",_extends$e({},filterProps$1(e,!1),adaptEventHandlers(e),{className:d,cx:n,cy:i,r:o})):null};function _typeof$l(t){"@babel/helpers - typeof";return _typeof$l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$l(t)}var _excluded$7=["x","y","top","left","width","height","className"];function _extends$d(){return _extends$d=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_extends$d.apply(this,arguments)}function ownKeys$i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$g(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$i(Object(n),!0).forEach(function(i){_defineProperty$l(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$i(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$l(t,e,n){return e=_toPropertyKey$j(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$j(t){var e=_toPrimitive$j(t,"string");return _typeof$l(e)=="symbol"?e:e+""}function _toPrimitive$j(t,e){if(_typeof$l(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(_typeof$l(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _objectWithoutProperties$7(t,e){if(t==null)return{};var n=_objectWithoutPropertiesLoose$7(t,e),i,o;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(o=0;o<u.length;o++)i=u[o],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function _objectWithoutPropertiesLoose$7(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}var getPath=function(e,n,i,o,u,d){return"M".concat(e,",").concat(u,"v").concat(o,"M").concat(d,",").concat(n,"h").concat(i)},Cross=function(e){var n=e.x,i=n===void 0?0:n,o=e.y,u=o===void 0?0:o,d=e.top,h=d===void 0?0:d,m=e.left,p=m===void 0?0:m,_=e.width,f=_===void 0?0:_,l=e.height,g=l===void 0?0:l,v=e.className,S=_objectWithoutProperties$7(e,_excluded$7),T=_objectSpread$g({x:i,y:u,top:h,left:p,width:f,height:g},S);return!isNumber(i)||!isNumber(u)||!isNumber(f)||!isNumber(g)||!isNumber(h)||!isNumber(p)?null:React.createElement("path",_extends$d({},filterProps$1(T,!0),{className:clsx("recharts-cross",v),d:getPath(i,u,f,g,h,p)}))},_getPrototype,hasRequired_getPrototype;function require_getPrototype(){if(hasRequired_getPrototype)return _getPrototype;hasRequired_getPrototype=1;var t=require_overArg(),e=t(Object.getPrototypeOf,Object);return _getPrototype=e,_getPrototype}var isPlainObject_1,hasRequiredIsPlainObject;function requireIsPlainObject(){if(hasRequiredIsPlainObject)return isPlainObject_1;hasRequiredIsPlainObject=1;var t=require_baseGetTag(),e=require_getPrototype(),n=requireIsObjectLike(),i="[object Object]",o=Function.prototype,u=Object.prototype,d=o.toString,h=u.hasOwnProperty,m=d.call(Object);function p(_){if(!n(_)||t(_)!=i)return!1;var f=e(_);if(f===null)return!0;var l=h.call(f,"constructor")&&f.constructor;return typeof l=="function"&&l instanceof l&&d.call(l)==m}return isPlainObject_1=p,isPlainObject_1}var isPlainObjectExports=requireIsPlainObject();const isPlainObject$1=getDefaultExportFromCjs(isPlainObjectExports);var isBoolean_1,hasRequiredIsBoolean;function requireIsBoolean(){if(hasRequiredIsBoolean)return isBoolean_1;hasRequiredIsBoolean=1;var t=require_baseGetTag(),e=requireIsObjectLike(),n="[object Boolean]";function i(o){return o===!0||o===!1||e(o)&&t(o)==n}return isBoolean_1=i,isBoolean_1}var isBooleanExports=requireIsBoolean();const isBoolean=getDefaultExportFromCjs(isBooleanExports);function _typeof$k(t){"@babel/helpers - typeof";return _typeof$k=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$k(t)}function _extends$c(){return _extends$c=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_extends$c.apply(this,arguments)}function _slicedToArray$2(t,e){return _arrayWithHoles$2(t)||_iterableToArrayLimit$2(t,e)||_unsupportedIterableToArray$3(t,e)||_nonIterableRest$2()}function _nonIterableRest$2(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$3(t,e){if(t){if(typeof t=="string")return _arrayLikeToArray$3(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray$3(t,e)}}function _arrayLikeToArray$3(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function _iterableToArrayLimit$2(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i,o,u,d,h=[],m=!0,p=!1;try{if(u=(n=n.call(t)).next,e!==0)for(;!(m=(i=u.call(n)).done)&&(h.push(i.value),h.length!==e);m=!0);}catch(_){p=!0,o=_}finally{try{if(!m&&n.return!=null&&(d=n.return(),Object(d)!==d))return}finally{if(p)throw o}}return h}}function _arrayWithHoles$2(t){if(Array.isArray(t))return t}function ownKeys$h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$f(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$h(Object(n),!0).forEach(function(i){_defineProperty$k(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$h(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$k(t,e,n){return e=_toPropertyKey$i(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$i(t){var e=_toPrimitive$i(t,"string");return _typeof$k(e)=="symbol"?e:e+""}function _toPrimitive$i(t,e){if(_typeof$k(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(_typeof$k(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var getTrapezoidPath=function(e,n,i,o,u){var d=i-o,h;return h="M ".concat(e,",").concat(n),h+="L ".concat(e+i,",").concat(n),h+="L ".concat(e+i-d/2,",").concat(n+u),h+="L ".concat(e+i-d/2-o,",").concat(n+u),h+="L ".concat(e,",").concat(n," Z"),h},defaultProps$1={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Trapezoid=function(e){var n=_objectSpread$f(_objectSpread$f({},defaultProps$1),e),i=reactExports.useRef(),o=reactExports.useState(-1),u=_slicedToArray$2(o,2),d=u[0],h=u[1];reactExports.useEffect(function(){if(i.current&&i.current.getTotalLength)try{var R=i.current.getTotalLength();R&&h(R)}catch{}},[]);var m=n.x,p=n.y,_=n.upperWidth,f=n.lowerWidth,l=n.height,g=n.className,v=n.animationEasing,S=n.animationDuration,T=n.animationBegin,E=n.isUpdateAnimationActive;if(m!==+m||p!==+p||_!==+_||f!==+f||l!==+l||_===0&&f===0||l===0)return null;var O=clsx("recharts-trapezoid",g);return E?React.createElement(Animate,{canBegin:d>0,from:{upperWidth:0,lowerWidth:0,height:l,x:m,y:p},to:{upperWidth:_,lowerWidth:f,height:l,x:m,y:p},duration:S,animationEasing:v,isActive:E},function(R){var M=R.upperWidth,C=R.lowerWidth,j=R.height,$=R.x,L=R.y;return React.createElement(Animate,{canBegin:d>0,from:"0px ".concat(d===-1?1:d,"px"),to:"".concat(d,"px 0px"),attributeName:"strokeDasharray",begin:T,duration:S,easing:v},React.createElement("path",_extends$c({},filterProps$1(n,!0),{className:O,d:getTrapezoidPath($,L,M,C,j),ref:i})))}):React.createElement("g",null,React.createElement("path",_extends$c({},filterProps$1(n,!0),{className:O,d:getTrapezoidPath(m,p,_,f,l)})))},_excluded$6=["option","shapeType","propTransformer","activeClassName","isActive"];function _typeof$j(t){"@babel/helpers - typeof";return _typeof$j=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$j(t)}function _objectWithoutProperties$6(t,e){if(t==null)return{};var n=_objectWithoutPropertiesLoose$6(t,e),i,o;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(o=0;o<u.length;o++)i=u[o],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function _objectWithoutPropertiesLoose$6(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function ownKeys$g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$g(Object(n),!0).forEach(function(i){_defineProperty$j(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$g(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$j(t,e,n){return e=_toPropertyKey$h(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$h(t){var e=_toPrimitive$h(t,"string");return _typeof$j(e)=="symbol"?e:e+""}function _toPrimitive$h(t,e){if(_typeof$j(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(_typeof$j(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function defaultPropTransformer(t,e){return _objectSpread$e(_objectSpread$e({},e),t)}function isSymbolsProps(t,e){return t==="symbols"}function ShapeSelector(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return React.createElement(Rectangle,n);case"trapezoid":return React.createElement(Trapezoid,n);case"sector":return React.createElement(Sector,n);case"symbols":if(isSymbolsProps(e))return React.createElement(Symbols,n);break;default:return null}}function getPropsFromShapeOption(t){return reactExports.isValidElement(t)?t.props:t}function Shape(t){var e=t.option,n=t.shapeType,i=t.propTransformer,o=i===void 0?defaultPropTransformer:i,u=t.activeClassName,d=u===void 0?"recharts-active-shape":u,h=t.isActive,m=_objectWithoutProperties$6(t,_excluded$6),p;if(reactExports.isValidElement(e))p=reactExports.cloneElement(e,_objectSpread$e(_objectSpread$e({},m),getPropsFromShapeOption(e)));else if(isFunction(e))p=e(m);else if(isPlainObject$1(e)&&!isBoolean(e)){var _=o(e,m);p=React.createElement(ShapeSelector,{shapeType:n,elementProps:_})}else{var f=m;p=React.createElement(ShapeSelector,{shapeType:n,elementProps:f})}return h?React.createElement(Layer,{className:d},p):p}function isFunnel(t,e){return e!=null&&"trapezoids"in t.props}function isPie(t,e){return e!=null&&"sectors"in t.props}function isScatter(t,e){return e!=null&&"points"in t.props}function compareFunnel(t,e){var n,i,o=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,u=t.y===(e==null||(i=e.labelViewBox)===null||i===void 0?void 0:i.y)||t.y===e.y;return o&&u}function comparePie(t,e){var n=t.endAngle===e.endAngle,i=t.startAngle===e.startAngle;return n&&i}function compareScatter(t,e){var n=t.x===e.x,i=t.y===e.y,o=t.z===e.z;return n&&i&&o}function getComparisonFn(t,e){var n;return isFunnel(t,e)?n=compareFunnel:isPie(t,e)?n=comparePie:isScatter(t,e)&&(n=compareScatter),n}function getShapeDataKey(t,e){var n;return isFunnel(t,e)?n="trapezoids":isPie(t,e)?n="sectors":isScatter(t,e)&&(n="points"),n}function getActiveShapeTooltipPayload(t,e){if(isFunnel(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(isPie(t,e)){var i;return(i=e.tooltipPayload)===null||i===void 0||(i=i[0])===null||i===void 0||(i=i.payload)===null||i===void 0?void 0:i.payload}return isScatter(t,e)?e.payload:{}}function getActiveShapeIndexForTooltip(t){var e=t.activeTooltipItem,n=t.graphicalItem,i=t.itemData,o=getShapeDataKey(n,e),u=getActiveShapeTooltipPayload(n,e),d=i.filter(function(m,p){var _=isEqual(u,m),f=n.props[o].filter(function(v){var S=getComparisonFn(n,e);return S(v,e)}),l=n.props[o].indexOf(f[f.length-1]),g=p===l;return _&&g}),h=i.indexOf(d[d.length-1]);return h}var _baseRange,hasRequired_baseRange;function require_baseRange(){if(hasRequired_baseRange)return _baseRange;hasRequired_baseRange=1;var t=Math.ceil,e=Math.max;function n(i,o,u,d){for(var h=-1,m=e(t((o-i)/(u||1)),0),p=Array(m);m--;)p[d?m:++h]=i,i+=u;return p}return _baseRange=n,_baseRange}var toFinite_1,hasRequiredToFinite;function requireToFinite(){if(hasRequiredToFinite)return toFinite_1;hasRequiredToFinite=1;var t=requireToNumber(),e=1/0,n=17976931348623157e292;function i(o){if(!o)return o===0?o:0;if(o=t(o),o===e||o===-e){var u=o<0?-1:1;return u*n}return o===o?o:0}return toFinite_1=i,toFinite_1}var _createRange,hasRequired_createRange;function require_createRange(){if(hasRequired_createRange)return _createRange;hasRequired_createRange=1;var t=require_baseRange(),e=require_isIterateeCall(),n=requireToFinite();function i(o){return function(u,d,h){return h&&typeof h!="number"&&e(u,d,h)&&(d=h=void 0),u=n(u),d===void 0?(d=u,u=0):d=n(d),h=h===void 0?u<d?1:-1:n(h),t(u,d,h,o)}}return _createRange=i,_createRange}var range_1,hasRequiredRange;function requireRange(){if(hasRequiredRange)return range_1;hasRequiredRange=1;var t=require_createRange(),e=t();return range_1=e,range_1}var rangeExports=requireRange();const range$1=getDefaultExportFromCjs(rangeExports);function _typeof$i(t){"@babel/helpers - typeof";return _typeof$i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$i(t)}function ownKeys$f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$d(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$f(Object(n),!0).forEach(function(i){_defineProperty$i(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$f(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$i(t,e,n){return e=_toPropertyKey$g(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$g(t){var e=_toPrimitive$g(t,"string");return _typeof$i(e)=="symbol"?e:e+""}function _toPrimitive$g(t,e){if(_typeof$i(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(_typeof$i(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var PREFIX_LIST=["Webkit","Moz","O","ms"],generatePrefixStyle=function(e,n){var i=e.replace(/(\w)/,function(u){return u.toUpperCase()}),o=PREFIX_LIST.reduce(function(u,d){return _objectSpread$d(_objectSpread$d({},u),{},_defineProperty$i({},d+i,n))},{});return o[e]=n,o};function _typeof$h(t){"@babel/helpers - typeof";return _typeof$h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$h(t)}function _extends$b(){return _extends$b=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_extends$b.apply(this,arguments)}function ownKeys$e(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$c(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$e(Object(n),!0).forEach(function(i){_defineProperty$h(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$e(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _classCallCheck$b(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties$b(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,_toPropertyKey$f(i.key),i)}}function _createClass$b(t,e,n){return e&&_defineProperties$b(t.prototype,e),n&&_defineProperties$b(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function _callSuper$9(t,e,n){return e=_getPrototypeOf$9(e),_possibleConstructorReturn$9(t,_isNativeReflectConstruct$9()?Reflect.construct(e,n||[],_getPrototypeOf$9(t).constructor):e.apply(t,n))}function _possibleConstructorReturn$9(t,e){if(e&&(_typeof$h(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$9(t)}function _assertThisInitialized$9(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct$9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$9=function(){return!!t})()}function _getPrototypeOf$9(t){return _getPrototypeOf$9=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_getPrototypeOf$9(t)}function _inherits$9(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf$9(t,e)}function _setPrototypeOf$9(t,e){return _setPrototypeOf$9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,o){return i.__proto__=o,i},_setPrototypeOf$9(t,e)}function _defineProperty$h(t,e,n){return e=_toPropertyKey$f(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$f(t){var e=_toPrimitive$f(t,"string");return _typeof$h(e)=="symbol"?e:e+""}function _toPrimitive$f(t,e){if(_typeof$h(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(_typeof$h(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var createScale=function(e){var n=e.data,i=e.startIndex,o=e.endIndex,u=e.x,d=e.width,h=e.travellerWidth;if(!n||!n.length)return{};var m=n.length,p=point().domain(range$1(0,m)).range([u,u+d-h]),_=p.domain().map(function(f){return p(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:p(i),endX:p(o),scale:p,scaleValues:_}},isTouch=function(e){return e.changedTouches&&!!e.changedTouches.length},Brush=(function(t){function e(n){var i;return _classCallCheck$b(this,e),i=_callSuper$9(this,e,[n]),_defineProperty$h(i,"handleDrag",function(o){i.leaveTimer&&(clearTimeout(i.leaveTimer),i.leaveTimer=null),i.state.isTravellerMoving?i.handleTravellerMove(o):i.state.isSlideMoving&&i.handleSlideDrag(o)}),_defineProperty$h(i,"handleTouchMove",function(o){o.changedTouches!=null&&o.changedTouches.length>0&&i.handleDrag(o.changedTouches[0])}),_defineProperty$h(i,"handleDragEnd",function(){i.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var o=i.props,u=o.endIndex,d=o.onDragEnd,h=o.startIndex;d?.({endIndex:u,startIndex:h})}),i.detachDragEndListener()}),_defineProperty$h(i,"handleLeaveWrapper",function(){(i.state.isTravellerMoving||i.state.isSlideMoving)&&(i.leaveTimer=window.setTimeout(i.handleDragEnd,i.props.leaveTimeOut))}),_defineProperty$h(i,"handleEnterSlideOrTraveller",function(){i.setState({isTextActive:!0})}),_defineProperty$h(i,"handleLeaveSlideOrTraveller",function(){i.setState({isTextActive:!1})}),_defineProperty$h(i,"handleSlideDragStart",function(o){var u=isTouch(o)?o.changedTouches[0]:o;i.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:u.pageX}),i.attachDragEndListener()}),i.travellerDragStartHandlers={startX:i.handleTravellerDragStart.bind(i,"startX"),endX:i.handleTravellerDragStart.bind(i,"endX")},i.state={},i}return _inherits$9(e,t),_createClass$b(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(i){var o=i.startX,u=i.endX,d=this.state.scaleValues,h=this.props,m=h.gap,p=h.data,_=p.length-1,f=Math.min(o,u),l=Math.max(o,u),g=e.getIndexInRange(d,f),v=e.getIndexInRange(d,l);return{startIndex:g-g%m,endIndex:v===_?_:v-v%m}}},{key:"getTextOfTick",value:function(i){var o=this.props,u=o.data,d=o.tickFormatter,h=o.dataKey,m=getValueByDataKey(u[i],h,i);return isFunction(d)?d(m,i):m}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(i){var o=this.state,u=o.slideMoveStartX,d=o.startX,h=o.endX,m=this.props,p=m.x,_=m.width,f=m.travellerWidth,l=m.startIndex,g=m.endIndex,v=m.onChange,S=i.pageX-u;S>0?S=Math.min(S,p+_-f-h,p+_-f-d):S<0&&(S=Math.max(S,p-d,p-h));var T=this.getIndex({startX:d+S,endX:h+S});(T.startIndex!==l||T.endIndex!==g)&&v&&v(T),this.setState({startX:d+S,endX:h+S,slideMoveStartX:i.pageX})}},{key:"handleTravellerDragStart",value:function(i,o){var u=isTouch(o)?o.changedTouches[0]:o;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:i,brushMoveStartX:u.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(i){var o=this.state,u=o.brushMoveStartX,d=o.movingTravellerId,h=o.endX,m=o.startX,p=this.state[d],_=this.props,f=_.x,l=_.width,g=_.travellerWidth,v=_.onChange,S=_.gap,T=_.data,E={startX:this.state.startX,endX:this.state.endX},O=i.pageX-u;O>0?O=Math.min(O,f+l-g-p):O<0&&(O=Math.max(O,f-p)),E[d]=p+O;var R=this.getIndex(E),M=R.startIndex,C=R.endIndex,j=function(){var L=T.length-1;return d==="startX"&&(h>m?M%S===0:C%S===0)||h<m&&C===L||d==="endX"&&(h>m?C%S===0:M%S===0)||h>m&&C===L};this.setState(_defineProperty$h(_defineProperty$h({},d,p+O),"brushMoveStartX",i.pageX),function(){v&&j()&&v(R)})}},{key:"handleTravellerMoveKeyboard",value:function(i,o){var u=this,d=this.state,h=d.scaleValues,m=d.startX,p=d.endX,_=this.state[o],f=h.indexOf(_);if(f!==-1){var l=f+i;if(!(l===-1||l>=h.length)){var g=h[l];o==="startX"&&g>=p||o==="endX"&&g<=m||this.setState(_defineProperty$h({},o,g),function(){u.props.onChange(u.getIndex({startX:u.state.startX,endX:u.state.endX}))})}}}},{key:"renderBackground",value:function(){var i=this.props,o=i.x,u=i.y,d=i.width,h=i.height,m=i.fill,p=i.stroke;return React.createElement("rect",{stroke:p,fill:m,x:o,y:u,width:d,height:h})}},{key:"renderPanorama",value:function(){var i=this.props,o=i.x,u=i.y,d=i.width,h=i.height,m=i.data,p=i.children,_=i.padding,f=reactExports.Children.only(p);return f?React.cloneElement(f,{x:o,y:u,width:d,height:h,margin:_,compact:!0,data:m}):null}},{key:"renderTravellerLayer",value:function(i,o){var u,d,h=this,m=this.props,p=m.y,_=m.travellerWidth,f=m.height,l=m.traveller,g=m.ariaLabel,v=m.data,S=m.startIndex,T=m.endIndex,E=Math.max(i,this.props.x),O=_objectSpread$c(_objectSpread$c({},filterProps$1(this.props,!1)),{},{x:E,y:p,width:_,height:f}),R=g||"Min value: ".concat((u=v[S])===null||u===void 0?void 0:u.name,", Max value: ").concat((d=v[T])===null||d===void 0?void 0:d.name);return React.createElement(Layer,{tabIndex:0,role:"slider","aria-label":R,"aria-valuenow":i,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[o],onTouchStart:this.travellerDragStartHandlers[o],onKeyDown:function(C){["ArrowLeft","ArrowRight"].includes(C.key)&&(C.preventDefault(),C.stopPropagation(),h.handleTravellerMoveKeyboard(C.key==="ArrowRight"?1:-1,o))},onFocus:function(){h.setState({isTravellerFocused:!0})},onBlur:function(){h.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(l,O))}},{key:"renderSlide",value:function(i,o){var u=this.props,d=u.y,h=u.height,m=u.stroke,p=u.travellerWidth,_=Math.min(i,o)+p,f=Math.max(Math.abs(o-i)-p,0);return React.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:m,fillOpacity:.2,x:_,y:d,width:f,height:h})}},{key:"renderText",value:function(){var i=this.props,o=i.startIndex,u=i.endIndex,d=i.y,h=i.height,m=i.travellerWidth,p=i.stroke,_=this.state,f=_.startX,l=_.endX,g=5,v={pointerEvents:"none",fill:p};return React.createElement(Layer,{className:"recharts-brush-texts"},React.createElement(Text,_extends$b({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,l)-g,y:d+h/2},v),this.getTextOfTick(o)),React.createElement(Text,_extends$b({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,l)+m+g,y:d+h/2},v),this.getTextOfTick(u)))}},{key:"render",value:function(){var i=this.props,o=i.data,u=i.className,d=i.children,h=i.x,m=i.y,p=i.width,_=i.height,f=i.alwaysShowText,l=this.state,g=l.startX,v=l.endX,S=l.isTextActive,T=l.isSlideMoving,E=l.isTravellerMoving,O=l.isTravellerFocused;if(!o||!o.length||!isNumber(h)||!isNumber(m)||!isNumber(p)||!isNumber(_)||p<=0||_<=0)return null;var R=clsx("recharts-brush",u),M=React.Children.count(d)===1,C=generatePrefixStyle("userSelect","none");return React.createElement(Layer,{className:R,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:C},this.renderBackground(),M&&this.renderPanorama(),this.renderSlide(g,v),this.renderTravellerLayer(g,"startX"),this.renderTravellerLayer(v,"endX"),(S||T||E||O||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(i){var o=i.x,u=i.y,d=i.width,h=i.height,m=i.stroke,p=Math.floor(u+h/2)-1;return React.createElement(React.Fragment,null,React.createElement("rect",{x:o,y:u,width:d,height:h,fill:m,stroke:"none"}),React.createElement("line",{x1:o+1,y1:p,x2:o+d-1,y2:p,fill:"none",stroke:"#fff"}),React.createElement("line",{x1:o+1,y1:p+2,x2:o+d-1,y2:p+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(i,o){var u;return React.isValidElement(i)?u=React.cloneElement(i,o):isFunction(i)?u=i(o):u=e.renderDefaultTraveller(o),u}},{key:"getDerivedStateFromProps",value:function(i,o){var u=i.data,d=i.width,h=i.x,m=i.travellerWidth,p=i.updateId,_=i.startIndex,f=i.endIndex;if(u!==o.prevData||p!==o.prevUpdateId)return _objectSpread$c({prevData:u,prevTravellerWidth:m,prevUpdateId:p,prevX:h,prevWidth:d},u&&u.length?createScale({data:u,width:d,x:h,travellerWidth:m,startIndex:_,endIndex:f}):{scale:null,scaleValues:null});if(o.scale&&(d!==o.prevWidth||h!==o.prevX||m!==o.prevTravellerWidth)){o.scale.range([h,h+d-m]);var l=o.scale.domain().map(function(g){return o.scale(g)});return{prevData:u,prevTravellerWidth:m,prevUpdateId:p,prevX:h,prevWidth:d,startX:o.scale(i.startIndex),endX:o.scale(i.endIndex),scaleValues:l}}return null}},{key:"getIndexInRange",value:function(i,o){for(var u=i.length,d=0,h=u-1;h-d>1;){var m=Math.floor((d+h)/2);i[m]>o?h=m:d=m}return o>=i[h]?h:d}}])})(reactExports.PureComponent);_defineProperty$h(Brush,"displayName","Brush");_defineProperty$h(Brush,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var _baseSome,hasRequired_baseSome;function require_baseSome(){if(hasRequired_baseSome)return _baseSome;hasRequired_baseSome=1;var t=require_baseEach();function e(n,i){var o;return t(n,function(u,d,h){return o=i(u,d,h),!o}),!!o}return _baseSome=e,_baseSome}var some_1,hasRequiredSome;function requireSome(){if(hasRequiredSome)return some_1;hasRequiredSome=1;var t=require_arraySome(),e=require_baseIteratee(),n=require_baseSome(),i=requireIsArray(),o=require_isIterateeCall();function u(d,h,m){var p=i(d)?t:n;return m&&o(d,h,m)&&(h=void 0),p(d,e(h,3))}return some_1=u,some_1}var someExports=requireSome();const some=getDefaultExportFromCjs(someExports);var ifOverflowMatches=function(e,n){var i=e.alwaysShow,o=e.ifOverflow;return i&&(o="extendDomain"),o===n},_baseAssignValue,hasRequired_baseAssignValue;function require_baseAssignValue(){if(hasRequired_baseAssignValue)return _baseAssignValue;hasRequired_baseAssignValue=1;var t=require_defineProperty();function e(n,i,o){i=="__proto__"&&t?t(n,i,{configurable:!0,enumerable:!0,value:o,writable:!0}):n[i]=o}return _baseAssignValue=e,_baseAssignValue}var mapValues_1,hasRequiredMapValues;function requireMapValues(){if(hasRequiredMapValues)return mapValues_1;hasRequiredMapValues=1;var t=require_baseAssignValue(),e=require_baseForOwn(),n=require_baseIteratee();function i(o,u){var d={};return u=n(u,3),e(o,function(h,m,p){t(d,m,u(h,m,p))}),d}return mapValues_1=i,mapValues_1}var mapValuesExports=requireMapValues();const mapValues=getDefaultExportFromCjs(mapValuesExports);var _arrayEvery,hasRequired_arrayEvery;function require_arrayEvery(){if(hasRequired_arrayEvery)return _arrayEvery;hasRequired_arrayEvery=1;function t(e,n){for(var i=-1,o=e==null?0:e.length;++i<o;)if(!n(e[i],i,e))return!1;return!0}return _arrayEvery=t,_arrayEvery}var _baseEvery,hasRequired_baseEvery;function require_baseEvery(){if(hasRequired_baseEvery)return _baseEvery;hasRequired_baseEvery=1;var t=require_baseEach();function e(n,i){var o=!0;return t(n,function(u,d,h){return o=!!i(u,d,h),o}),o}return _baseEvery=e,_baseEvery}var every_1,hasRequiredEvery;function requireEvery(){if(hasRequiredEvery)return every_1;hasRequiredEvery=1;var t=require_arrayEvery(),e=require_baseEvery(),n=require_baseIteratee(),i=requireIsArray(),o=require_isIterateeCall();function u(d,h,m){var p=i(d)?t:e;return m&&o(d,h,m)&&(h=void 0),p(d,n(h,3))}return every_1=u,every_1}var everyExports=requireEvery();const every=getDefaultExportFromCjs(everyExports);var _excluded$5=["x","y"];function _typeof$g(t){"@babel/helpers - typeof";return _typeof$g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$g(t)}function _extends$a(){return _extends$a=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_extends$a.apply(this,arguments)}function ownKeys$d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$b(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$d(Object(n),!0).forEach(function(i){_defineProperty$g(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$d(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$g(t,e,n){return e=_toPropertyKey$e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$e(t){var e=_toPrimitive$e(t,"string");return _typeof$g(e)=="symbol"?e:e+""}function _toPrimitive$e(t,e){if(_typeof$g(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(_typeof$g(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _objectWithoutProperties$5(t,e){if(t==null)return{};var n=_objectWithoutPropertiesLoose$5(t,e),i,o;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(o=0;o<u.length;o++)i=u[o],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function _objectWithoutPropertiesLoose$5(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function typeguardBarRectangleProps(t,e){var n=t.x,i=t.y,o=_objectWithoutProperties$5(t,_excluded$5),u="".concat(n),d=parseInt(u,10),h="".concat(i),m=parseInt(h,10),p="".concat(e.height||o.height),_=parseInt(p,10),f="".concat(e.width||o.width),l=parseInt(f,10);return _objectSpread$b(_objectSpread$b(_objectSpread$b(_objectSpread$b(_objectSpread$b({},e),o),d?{x:d}:{}),m?{y:m}:{}),{},{height:_,width:l,name:e.name,radius:e.radius})}function BarRectangle(t){return React.createElement(Shape,_extends$a({shapeType:"rectangle",propTransformer:typeguardBarRectangleProps,activeClassName:"recharts-active-bar"},t))}var minPointSizeCallback=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(i,o){if(typeof e=="number")return e;var u=isNumber(i)||isNullish$1(i);return u?e(i,o):(u||invariant$1(),n)}},_excluded$4=["value","background"],_Bar;function _typeof$f(t){"@babel/helpers - typeof";return _typeof$f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$f(t)}function _objectWithoutProperties$4(t,e){if(t==null)return{};var n=_objectWithoutPropertiesLoose$4(t,e),i,o;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(o=0;o<u.length;o++)i=u[o],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function _objectWithoutPropertiesLoose$4(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function _extends$9(){return _extends$9=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_extends$9.apply(this,arguments)}function ownKeys$c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$a(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$c(Object(n),!0).forEach(function(i){_defineProperty$f(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$c(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _classCallCheck$a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties$a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,_toPropertyKey$d(i.key),i)}}function _createClass$a(t,e,n){return e&&_defineProperties$a(t.prototype,e),n&&_defineProperties$a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function _callSuper$8(t,e,n){return e=_getPrototypeOf$8(e),_possibleConstructorReturn$8(t,_isNativeReflectConstruct$8()?Reflect.construct(e,n||[],_getPrototypeOf$8(t).constructor):e.apply(t,n))}function _possibleConstructorReturn$8(t,e){if(e&&(_typeof$f(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$8(t)}function _assertThisInitialized$8(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct$8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$8=function(){return!!t})()}function _getPrototypeOf$8(t){return _getPrototypeOf$8=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_getPrototypeOf$8(t)}function _inherits$8(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf$8(t,e)}function _setPrototypeOf$8(t,e){return _setPrototypeOf$8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,o){return i.__proto__=o,i},_setPrototypeOf$8(t,e)}function _defineProperty$f(t,e,n){return e=_toPropertyKey$d(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$d(t){var e=_toPrimitive$d(t,"string");return _typeof$f(e)=="symbol"?e:e+""}function _toPrimitive$d(t,e){if(_typeof$f(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(_typeof$f(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Bar=(function(t){function e(){var n;_classCallCheck$a(this,e);for(var i=arguments.length,o=new Array(i),u=0;u<i;u++)o[u]=arguments[u];return n=_callSuper$8(this,e,[].concat(o)),_defineProperty$f(n,"state",{isAnimationFinished:!1}),_defineProperty$f(n,"id",uniqueId("recharts-bar-")),_defineProperty$f(n,"handleAnimationEnd",function(){var d=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),d&&d()}),_defineProperty$f(n,"handleAnimationStart",function(){var d=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),d&&d()}),n}return _inherits$8(e,t),_createClass$a(e,[{key:"renderRectanglesStatically",value:function(i){var o=this,u=this.props,d=u.shape,h=u.dataKey,m=u.activeIndex,p=u.activeBar,_=filterProps$1(this.props,!1);return i&&i.map(function(f,l){var g=l===m,v=g?p:d,S=_objectSpread$a(_objectSpread$a(_objectSpread$a({},_),f),{},{isActive:g,option:v,index:l,dataKey:h,onAnimationStart:o.handleAnimationStart,onAnimationEnd:o.handleAnimationEnd});return React.createElement(Layer,_extends$9({className:"recharts-bar-rectangle"},adaptEventsOfChild(o.props,f,l),{key:"rectangle-".concat(f?.x,"-").concat(f?.y,"-").concat(f?.value,"-").concat(l)}),React.createElement(BarRectangle,S))})}},{key:"renderRectanglesWithAnimation",value:function(){var i=this,o=this.props,u=o.data,d=o.layout,h=o.isAnimationActive,m=o.animationBegin,p=o.animationDuration,_=o.animationEasing,f=o.animationId,l=this.state.prevData;return React.createElement(Animate,{begin:m,duration:p,isActive:h,easing:_,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(g){var v=g.t,S=u.map(function(T,E){var O=l&&l[E];if(O){var R=interpolateNumber$2(O.x,T.x),M=interpolateNumber$2(O.y,T.y),C=interpolateNumber$2(O.width,T.width),j=interpolateNumber$2(O.height,T.height);return _objectSpread$a(_objectSpread$a({},T),{},{x:R(v),y:M(v),width:C(v),height:j(v)})}if(d==="horizontal"){var $=interpolateNumber$2(0,T.height),L=$(v);return _objectSpread$a(_objectSpread$a({},T),{},{y:T.y+T.height-L,height:L})}var N=interpolateNumber$2(0,T.width),B=N(v);return _objectSpread$a(_objectSpread$a({},T),{},{width:B})});return React.createElement(Layer,null,i.renderRectanglesStatically(S))})}},{key:"renderRectangles",value:function(){var i=this.props,o=i.data,u=i.isAnimationActive,d=this.state.prevData;return u&&o&&o.length&&(!d||!isEqual(d,o))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(o)}},{key:"renderBackground",value:function(){var i=this,o=this.props,u=o.data,d=o.dataKey,h=o.activeIndex,m=filterProps$1(this.props.background,!1);return u.map(function(p,_){p.value;var f=p.background,l=_objectWithoutProperties$4(p,_excluded$4);if(!f)return null;var g=_objectSpread$a(_objectSpread$a(_objectSpread$a(_objectSpread$a(_objectSpread$a({},l),{},{fill:"#eee"},f),m),adaptEventsOfChild(i.props,p,_)),{},{onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd,dataKey:d,index:_,className:"recharts-bar-background-rectangle"});return React.createElement(BarRectangle,_extends$9({key:"background-bar-".concat(_),option:i.props.background,isActive:_===h},g))})}},{key:"renderErrorBar",value:function(i,o){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var u=this.props,d=u.data,h=u.xAxis,m=u.yAxis,p=u.layout,_=u.children,f=findAllByType(_,ErrorBar);if(!f)return null;var l=p==="vertical"?d[0].height/2:d[0].width/2,g=function(T,E){var O=Array.isArray(T.value)?T.value[1]:T.value;return{x:T.x,y:T.y,value:O,errorVal:getValueByDataKey(T,E)}},v={clipPath:i?"url(#clipPath-".concat(o,")"):null};return React.createElement(Layer,v,f.map(function(S){return React.cloneElement(S,{key:"error-bar-".concat(o,"-").concat(S.props.dataKey),data:d,xAxis:h,yAxis:m,layout:p,offset:l,dataPointFormatter:g})}))}},{key:"render",value:function(){var i=this.props,o=i.hide,u=i.data,d=i.className,h=i.xAxis,m=i.yAxis,p=i.left,_=i.top,f=i.width,l=i.height,g=i.isAnimationActive,v=i.background,S=i.id;if(o||!u||!u.length)return null;var T=this.state.isAnimationFinished,E=clsx("recharts-bar",d),O=h&&h.allowDataOverflow,R=m&&m.allowDataOverflow,M=O||R,C=isNil(S)?this.id:S;return React.createElement(Layer,{className:E},O||R?React.createElement("defs",null,React.createElement("clipPath",{id:"clipPath-".concat(C)},React.createElement("rect",{x:O?p:p-f/2,y:R?_:_-l/2,width:O?f:f*2,height:R?l:l*2}))):null,React.createElement(Layer,{className:"recharts-bar-rectangles",clipPath:M?"url(#clipPath-".concat(C,")"):null},v?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(M,C),(!g||T)&&LabelList.renderCallByParent(this.props,u))}}],[{key:"getDerivedStateFromProps",value:function(i,o){return i.animationId!==o.prevAnimationId?{prevAnimationId:i.animationId,curData:i.data,prevData:o.curData}:i.data!==o.curData?{curData:i.data}:null}}])})(reactExports.PureComponent);_Bar=Bar;_defineProperty$f(Bar,"displayName","Bar");_defineProperty$f(Bar,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Global.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});_defineProperty$f(Bar,"getComposedData",function(t){var e=t.props,n=t.item,i=t.barPosition,o=t.bandSize,u=t.xAxis,d=t.yAxis,h=t.xAxisTicks,m=t.yAxisTicks,p=t.stackedData,_=t.dataStartIndex,f=t.displayedData,l=t.offset,g=findPositionOfBar(i,n);if(!g)return null;var v=e.layout,S=n.type.defaultProps,T=S!==void 0?_objectSpread$a(_objectSpread$a({},S),n.props):n.props,E=T.dataKey,O=T.children,R=T.minPointSize,M=v==="horizontal"?d:u,C=p?M.scale.domain():null,j=getBaseValueOfBar({numericAxis:M}),$=findAllByType(O,Cell),L=f.map(function(N,B){var U,H,Y,K,z,V;p?U=truncateByDomain(p[_+B],C):(U=getValueByDataKey(N,E),Array.isArray(U)||(U=[j,U]));var G=minPointSizeCallback(R,_Bar.defaultProps.minPointSize)(U[1],B);if(v==="horizontal"){var ie,Z=[d.scale(U[0]),d.scale(U[1])],te=Z[0],ee=Z[1];H=getCateCoordinateOfBar({axis:u,ticks:h,bandSize:o,offset:g.offset,entry:N,index:B}),Y=(ie=ee??te)!==null&&ie!==void 0?ie:void 0,K=g.size;var le=te-ee;if(z=Number.isNaN(le)?0:le,V={x:H,y:d.y,width:K,height:d.height},Math.abs(G)>0&&Math.abs(z)<Math.abs(G)){var ge=mathSign(z||G)*(Math.abs(G)-Math.abs(z));Y-=ge,z+=ge}}else{var Ae=[u.scale(U[0]),u.scale(U[1])],Te=Ae[0],Ce=Ae[1];if(H=Te,Y=getCateCoordinateOfBar({axis:d,ticks:m,bandSize:o,offset:g.offset,entry:N,index:B}),K=Ce-Te,z=g.size,V={x:u.x,y:Y,width:u.width,height:z},Math.abs(G)>0&&Math.abs(K)<Math.abs(G)){var De=mathSign(K||G)*(Math.abs(G)-Math.abs(K));K+=De}}return _objectSpread$a(_objectSpread$a(_objectSpread$a({},N),{},{x:H,y:Y,width:K,height:z,value:p?U:U[1],payload:N,background:V},$&&$[B]&&$[B].props),{},{tooltipPayload:[getTooltipItem(n,N)],tooltipPosition:{x:H+K/2,y:Y+z/2}})});return _objectSpread$a({data:L,layout:v},l)});function _typeof$e(t){"@babel/helpers - typeof";return _typeof$e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$e(t)}function _classCallCheck$9(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties$9(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,_toPropertyKey$c(i.key),i)}}function _createClass$9(t,e,n){return e&&_defineProperties$9(t.prototype,e),n&&_defineProperties$9(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function ownKeys$b(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$b(Object(n),!0).forEach(function(i){_defineProperty$e(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$b(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$e(t,e,n){return e=_toPropertyKey$c(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$c(t){var e=_toPrimitive$c(t,"string");return _typeof$e(e)=="symbol"?e:e+""}function _toPrimitive$c(t,e){if(_typeof$e(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(_typeof$e(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var formatAxisMap=function(e,n,i,o,u){var d=e.width,h=e.height,m=e.layout,p=e.children,_=Object.keys(n),f={left:i.left,leftMirror:i.left,right:d-i.right,rightMirror:d-i.right,top:i.top,topMirror:i.top,bottom:h-i.bottom,bottomMirror:h-i.bottom},l=!!findChildByType(p,Bar);return _.reduce(function(g,v){var S=n[v],T=S.orientation,E=S.domain,O=S.padding,R=O===void 0?{}:O,M=S.mirror,C=S.reversed,j="".concat(T).concat(M?"Mirror":""),$,L,N,B,U;if(S.type==="number"&&(S.padding==="gap"||S.padding==="no-gap")){var H=E[1]-E[0],Y=1/0,K=S.categoricalDomain.sort(compareValues);if(K.forEach(function(Ae,Te){Te>0&&(Y=Math.min((Ae||0)-(K[Te-1]||0),Y))}),Number.isFinite(Y)){var z=Y/H,V=S.layout==="vertical"?i.height:i.width;if(S.padding==="gap"&&($=z*V/2),S.padding==="no-gap"){var G=getPercentValue(e.barCategoryGap,z*V),ie=z*V/2;$=ie-G-(ie-G)/V*G}}}o==="xAxis"?L=[i.left+(R.left||0)+($||0),i.left+i.width-(R.right||0)-($||0)]:o==="yAxis"?L=m==="horizontal"?[i.top+i.height-(R.bottom||0),i.top+(R.top||0)]:[i.top+(R.top||0)+($||0),i.top+i.height-(R.bottom||0)-($||0)]:L=S.range,C&&(L=[L[1],L[0]]);var Z=parseScale(S,u,l),te=Z.scale,ee=Z.realScaleType;te.domain(E).range(L),checkDomainOfScale(te);var le=getTicksOfScale(te,_objectSpread$9(_objectSpread$9({},S),{},{realScaleType:ee}));o==="xAxis"?(U=T==="top"&&!M||T==="bottom"&&M,N=i.left,B=f[j]-U*S.height):o==="yAxis"&&(U=T==="left"&&!M||T==="right"&&M,N=f[j]-U*S.width,B=i.top);var ge=_objectSpread$9(_objectSpread$9(_objectSpread$9({},S),le),{},{realScaleType:ee,x:N,y:B,scale:te,width:o==="xAxis"?i.width:S.width,height:o==="yAxis"?i.height:S.height});return ge.bandSize=getBandSizeOfAxis(ge,le),!S.hide&&o==="xAxis"?f[j]+=(U?-1:1)*ge.height:S.hide||(f[j]+=(U?-1:1)*ge.width),_objectSpread$9(_objectSpread$9({},g),{},_defineProperty$e({},v,ge))},{})},rectWithPoints=function(e,n){var i=e.x,o=e.y,u=n.x,d=n.y;return{x:Math.min(i,u),y:Math.min(o,d),width:Math.abs(u-i),height:Math.abs(d-o)}},rectWithCoords=function(e){var n=e.x1,i=e.y1,o=e.x2,u=e.y2;return rectWithPoints({x:n,y:i},{x:o,y:u})},ScaleHelper=(function(){function t(e){_classCallCheck$9(this,t),this.scale=e}return _createClass$9(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,u=i.position;if(n!==void 0){if(u)switch(u){case"start":return this.scale(n);case"middle":{var d=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+d}case"end":{var h=this.bandwidth?this.bandwidth():0;return this.scale(n)+h}default:return this.scale(n)}if(o){var m=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+m}return this.scale(n)}}},{key:"isInRange",value:function(n){var i=this.range(),o=i[0],u=i[i.length-1];return o<=u?n>=o&&n<=u:n>=u&&n<=o}}],[{key:"create",value:function(n){return new t(n)}}])})();_defineProperty$e(ScaleHelper,"EPS",1e-4);var createLabeledScales=function(e){var n=Object.keys(e).reduce(function(i,o){return _objectSpread$9(_objectSpread$9({},i),{},_defineProperty$e({},o,ScaleHelper.create(e[o])))},{});return _objectSpread$9(_objectSpread$9({},n),{},{apply:function(o){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=u.bandAware,h=u.position;return mapValues(o,function(m,p){return n[p].apply(m,{bandAware:d,position:h})})},isInRange:function(o){return every(o,function(u,d){return n[d].isInRange(u)})}})};function normalizeAngle(t){return(t%180+180)%180}var getAngledRectangleWidth=function(e){var n=e.width,i=e.height,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,u=normalizeAngle(o),d=u*Math.PI/180,h=Math.atan(i/n),m=d>h&&d<Math.PI-h?i/Math.sin(d):n/Math.cos(d);return Math.abs(m)},_createFind,hasRequired_createFind;function require_createFind(){if(hasRequired_createFind)return _createFind;hasRequired_createFind=1;var t=require_baseIteratee(),e=requireIsArrayLike(),n=requireKeys();function i(o){return function(u,d,h){var m=Object(u);if(!e(u)){var p=t(d,3);u=n(u),d=function(f){return p(m[f],f,m)}}var _=o(u,d,h);return _>-1?m[p?u[_]:_]:void 0}}return _createFind=i,_createFind}var toInteger_1,hasRequiredToInteger;function requireToInteger(){if(hasRequiredToInteger)return toInteger_1;hasRequiredToInteger=1;var t=requireToFinite();function e(n){var i=t(n),o=i%1;return i===i?o?i-o:i:0}return toInteger_1=e,toInteger_1}var findIndex_1,hasRequiredFindIndex;function requireFindIndex(){if(hasRequiredFindIndex)return findIndex_1;hasRequiredFindIndex=1;var t=require_baseFindIndex(),e=require_baseIteratee(),n=requireToInteger(),i=Math.max;function o(u,d,h){var m=u==null?0:u.length;if(!m)return-1;var p=h==null?0:n(h);return p<0&&(p=i(m+p,0)),t(u,e(d,3),p)}return findIndex_1=o,findIndex_1}var find_1,hasRequiredFind;function requireFind(){if(hasRequiredFind)return find_1;hasRequiredFind=1;var t=require_createFind(),e=requireFindIndex(),n=t(e);return find_1=n,find_1}var findExports=requireFind();const find=getDefaultExportFromCjs(findExports);var memoizeExports=requireMemoize();const memoize=getDefaultExportFromCjs(memoizeExports);var calculateViewBox=memoize(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),XAxisContext=reactExports.createContext(void 0),YAxisContext=reactExports.createContext(void 0),ViewBoxContext=reactExports.createContext(void 0),OffsetContext=reactExports.createContext({}),ClipPathIdContext=reactExports.createContext(void 0),ChartHeightContext=reactExports.createContext(0),ChartWidthContext=reactExports.createContext(0),ChartLayoutContextProvider=function(e){var n=e.state,i=n.xAxisMap,o=n.yAxisMap,u=n.offset,d=e.clipPathId,h=e.children,m=e.width,p=e.height,_=calculateViewBox(u);return React.createElement(XAxisContext.Provider,{value:i},React.createElement(YAxisContext.Provider,{value:o},React.createElement(OffsetContext.Provider,{value:u},React.createElement(ViewBoxContext.Provider,{value:_},React.createElement(ClipPathIdContext.Provider,{value:d},React.createElement(ChartHeightContext.Provider,{value:p},React.createElement(ChartWidthContext.Provider,{value:m},h)))))))},useClipPathId=function(){return reactExports.useContext(ClipPathIdContext)},useXAxisOrThrow=function(e){var n=reactExports.useContext(XAxisContext);n==null&&invariant$1();var i=n[e];return i==null&&invariant$1(),i},useArbitraryXAxis=function(){var e=reactExports.useContext(XAxisContext);return getAnyElementOfObject(e)},useYAxisWithFiniteDomainOrRandom=function(){var e=reactExports.useContext(YAxisContext),n=find(e,function(i){return every(i.domain,Number.isFinite)});return n||getAnyElementOfObject(e)},useYAxisOrThrow=function(e){var n=reactExports.useContext(YAxisContext);n==null&&invariant$1();var i=n[e];return i==null&&invariant$1(),i},useViewBox=function(){var e=reactExports.useContext(ViewBoxContext);return e},useOffset=function(){return reactExports.useContext(OffsetContext)},useChartWidth=function(){return reactExports.useContext(ChartWidthContext)},useChartHeight=function(){return reactExports.useContext(ChartHeightContext)};function _typeof$d(t){"@babel/helpers - typeof";return _typeof$d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$d(t)}function _classCallCheck$8(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties$8(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,_toPropertyKey$b(i.key),i)}}function _createClass$8(t,e,n){return e&&_defineProperties$8(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function _callSuper$7(t,e,n){return e=_getPrototypeOf$7(e),_possibleConstructorReturn$7(t,_isNativeReflectConstruct$7()?Reflect.construct(e,n||[],_getPrototypeOf$7(t).constructor):e.apply(t,n))}function _possibleConstructorReturn$7(t,e){if(e&&(_typeof$d(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$7(t)}function _assertThisInitialized$7(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct$7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$7=function(){return!!t})()}function _getPrototypeOf$7(t){return _getPrototypeOf$7=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_getPrototypeOf$7(t)}function _inherits$7(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf$7(t,e)}function _setPrototypeOf$7(t,e){return _setPrototypeOf$7=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,o){return i.__proto__=o,i},_setPrototypeOf$7(t,e)}function ownKeys$a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$8(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$a(Object(n),!0).forEach(function(i){_defineProperty$d(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$a(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$d(t,e,n){return e=_toPropertyKey$b(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$b(t){var e=_toPrimitive$b(t,"string");return _typeof$d(e)=="symbol"?e:e+""}function _toPrimitive$b(t,e){if(_typeof$d(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(_typeof$d(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function _slicedToArray$1(t,e){return _arrayWithHoles$1(t)||_iterableToArrayLimit$1(t,e)||_unsupportedIterableToArray$2(t,e)||_nonIterableRest$1()}function _nonIterableRest$1(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$2(t,e){if(t){if(typeof t=="string")return _arrayLikeToArray$2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray$2(t,e)}}function _arrayLikeToArray$2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function _iterableToArrayLimit$1(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i,o,u,d,h=[],m=!0,p=!1;try{if(u=(n=n.call(t)).next,e!==0)for(;!(m=(i=u.call(n)).done)&&(h.push(i.value),h.length!==e);m=!0);}catch(_){p=!0,o=_}finally{try{if(!m&&n.return!=null&&(d=n.return(),Object(d)!==d))return}finally{if(p)throw o}}return h}}function _arrayWithHoles$1(t){if(Array.isArray(t))return t}function _extends$8(){return _extends$8=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_extends$8.apply(this,arguments)}var renderLine=function(e,n){var i;return React.isValidElement(e)?i=React.cloneElement(e,n):isFunction(e)?i=e(n):i=React.createElement("line",_extends$8({},n,{className:"recharts-reference-line-line"})),i},getEndPoints=function(e,n,i,o,u,d,h,m,p){var _=u.x,f=u.y,l=u.width,g=u.height;if(i){var v=p.y,S=e.y.apply(v,{position:d});if(ifOverflowMatches(p,"discard")&&!e.y.isInRange(S))return null;var T=[{x:_+l,y:S},{x:_,y:S}];return m==="left"?T.reverse():T}if(n){var E=p.x,O=e.x.apply(E,{position:d});if(ifOverflowMatches(p,"discard")&&!e.x.isInRange(O))return null;var R=[{x:O,y:f+g},{x:O,y:f}];return h==="top"?R.reverse():R}if(o){var M=p.segment,C=M.map(function(j){return e.apply(j,{position:d})});return ifOverflowMatches(p,"discard")&&some(C,function(j){return!e.isInRange(j)})?null:C}return null};function ReferenceLineImpl(t){var e=t.x,n=t.y,i=t.segment,o=t.xAxisId,u=t.yAxisId,d=t.shape,h=t.className,m=t.alwaysShow,p=useClipPathId(),_=useXAxisOrThrow(o),f=useYAxisOrThrow(u),l=useViewBox();if(!p||!l)return null;warn(m===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var g=createLabeledScales({x:_.scale,y:f.scale}),v=isNumOrStr(e),S=isNumOrStr(n),T=i&&i.length===2,E=getEndPoints(g,v,S,T,l,t.position,_.orientation,f.orientation,t);if(!E)return null;var O=_slicedToArray$1(E,2),R=O[0],M=R.x,C=R.y,j=O[1],$=j.x,L=j.y,N=ifOverflowMatches(t,"hidden")?"url(#".concat(p,")"):void 0,B=_objectSpread$8(_objectSpread$8({clipPath:N},filterProps$1(t,!0)),{},{x1:M,y1:C,x2:$,y2:L});return React.createElement(Layer,{className:clsx("recharts-reference-line",h)},renderLine(d,B),Label.renderCallByParent(t,rectWithCoords({x1:M,y1:C,x2:$,y2:L})))}var ReferenceLine=(function(t){function e(){return _classCallCheck$8(this,e),_callSuper$7(this,e,arguments)}return _inherits$7(e,t),_createClass$8(e,[{key:"render",value:function(){return React.createElement(ReferenceLineImpl,this.props)}}])})(React.Component);_defineProperty$d(ReferenceLine,"displayName","ReferenceLine");_defineProperty$d(ReferenceLine,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function _extends$7(){return _extends$7=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_extends$7.apply(this,arguments)}function _typeof$c(t){"@babel/helpers - typeof";return _typeof$c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$c(t)}function ownKeys$9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$7(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$9(Object(n),!0).forEach(function(i){_defineProperty$c(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$9(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _classCallCheck$7(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties$7(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,_toPropertyKey$a(i.key),i)}}function _createClass$7(t,e,n){return e&&_defineProperties$7(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function _callSuper$6(t,e,n){return e=_getPrototypeOf$6(e),_possibleConstructorReturn$6(t,_isNativeReflectConstruct$6()?Reflect.construct(e,n||[],_getPrototypeOf$6(t).constructor):e.apply(t,n))}function _possibleConstructorReturn$6(t,e){if(e&&(_typeof$c(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$6(t)}function _assertThisInitialized$6(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct$6(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$6=function(){return!!t})()}function _getPrototypeOf$6(t){return _getPrototypeOf$6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_getPrototypeOf$6(t)}function _inherits$6(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf$6(t,e)}function _setPrototypeOf$6(t,e){return _setPrototypeOf$6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,o){return i.__proto__=o,i},_setPrototypeOf$6(t,e)}function _defineProperty$c(t,e,n){return e=_toPropertyKey$a(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$a(t){var e=_toPrimitive$a(t,"string");return _typeof$c(e)=="symbol"?e:e+""}function _toPrimitive$a(t,e){if(_typeof$c(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(_typeof$c(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var getCoordinate=function(e){var n=e.x,i=e.y,o=e.xAxis,u=e.yAxis,d=createLabeledScales({x:o.scale,y:u.scale}),h=d.apply({x:n,y:i},{bandAware:!0});return ifOverflowMatches(e,"discard")&&!d.isInRange(h)?null:h},ReferenceDot=(function(t){function e(){return _classCallCheck$7(this,e),_callSuper$6(this,e,arguments)}return _inherits$6(e,t),_createClass$7(e,[{key:"render",value:function(){var i=this.props,o=i.x,u=i.y,d=i.r,h=i.alwaysShow,m=i.clipPathId,p=isNumOrStr(o),_=isNumOrStr(u);if(warn(h===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!p||!_)return null;var f=getCoordinate(this.props);if(!f)return null;var l=f.x,g=f.y,v=this.props,S=v.shape,T=v.className,E=ifOverflowMatches(this.props,"hidden")?"url(#".concat(m,")"):void 0,O=_objectSpread$7(_objectSpread$7({clipPath:E},filterProps$1(this.props,!0)),{},{cx:l,cy:g});return React.createElement(Layer,{className:clsx("recharts-reference-dot",T)},e.renderDot(S,O),Label.renderCallByParent(this.props,{x:l-d,y:g-d,width:2*d,height:2*d}))}}])})(React.Component);_defineProperty$c(ReferenceDot,"displayName","ReferenceDot");_defineProperty$c(ReferenceDot,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});_defineProperty$c(ReferenceDot,"renderDot",function(t,e){var n;return React.isValidElement(t)?n=React.cloneElement(t,e):isFunction(t)?n=t(e):n=React.createElement(Dot,_extends$7({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function _extends$6(){return _extends$6=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_extends$6.apply(this,arguments)}function _typeof$b(t){"@babel/helpers - typeof";return _typeof$b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$b(t)}function ownKeys$8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$8(Object(n),!0).forEach(function(i){_defineProperty$b(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$8(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _classCallCheck$6(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties$6(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,_toPropertyKey$9(i.key),i)}}function _createClass$6(t,e,n){return e&&_defineProperties$6(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function _callSuper$5(t,e,n){return e=_getPrototypeOf$5(e),_possibleConstructorReturn$5(t,_isNativeReflectConstruct$5()?Reflect.construct(e,n||[],_getPrototypeOf$5(t).constructor):e.apply(t,n))}function _possibleConstructorReturn$5(t,e){if(e&&(_typeof$b(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$5(t)}function _assertThisInitialized$5(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct$5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$5=function(){return!!t})()}function _getPrototypeOf$5(t){return _getPrototypeOf$5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_getPrototypeOf$5(t)}function _inherits$5(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf$5(t,e)}function _setPrototypeOf$5(t,e){return _setPrototypeOf$5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,o){return i.__proto__=o,i},_setPrototypeOf$5(t,e)}function _defineProperty$b(t,e,n){return e=_toPropertyKey$9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$9(t){var e=_toPrimitive$9(t,"string");return _typeof$b(e)=="symbol"?e:e+""}function _toPrimitive$9(t,e){if(_typeof$b(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(_typeof$b(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var getRect=function(e,n,i,o,u){var d=u.x1,h=u.x2,m=u.y1,p=u.y2,_=u.xAxis,f=u.yAxis;if(!_||!f)return null;var l=createLabeledScales({x:_.scale,y:f.scale}),g={x:e?l.x.apply(d,{position:"start"}):l.x.rangeMin,y:i?l.y.apply(m,{position:"start"}):l.y.rangeMin},v={x:n?l.x.apply(h,{position:"end"}):l.x.rangeMax,y:o?l.y.apply(p,{position:"end"}):l.y.rangeMax};return ifOverflowMatches(u,"discard")&&(!l.isInRange(g)||!l.isInRange(v))?null:rectWithPoints(g,v)},ReferenceArea=(function(t){function e(){return _classCallCheck$6(this,e),_callSuper$5(this,e,arguments)}return _inherits$5(e,t),_createClass$6(e,[{key:"render",value:function(){var i=this.props,o=i.x1,u=i.x2,d=i.y1,h=i.y2,m=i.className,p=i.alwaysShow,_=i.clipPathId;warn(p===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=isNumOrStr(o),l=isNumOrStr(u),g=isNumOrStr(d),v=isNumOrStr(h),S=this.props.shape;if(!f&&!l&&!g&&!v&&!S)return null;var T=getRect(f,l,g,v,this.props);if(!T&&!S)return null;var E=ifOverflowMatches(this.props,"hidden")?"url(#".concat(_,")"):void 0;return React.createElement(Layer,{className:clsx("recharts-reference-area",m)},e.renderRect(S,_objectSpread$6(_objectSpread$6({clipPath:E},filterProps$1(this.props,!0)),T)),Label.renderCallByParent(this.props,T))}}])})(React.Component);_defineProperty$b(ReferenceArea,"displayName","ReferenceArea");_defineProperty$b(ReferenceArea,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});_defineProperty$b(ReferenceArea,"renderRect",function(t,e){var n;return React.isValidElement(t)?n=React.cloneElement(t,e):isFunction(t)?n=t(e):n=React.createElement(Rectangle,_extends$6({},e,{className:"recharts-reference-area-rect"})),n});function getEveryNthWithCondition(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var i=[],o=0;o<t.length;o+=e)i.push(t[o]);return i}function getAngledTickWidth(t,e,n){var i={width:t.width+e.width,height:t.height+e.height};return getAngledRectangleWidth(i,n)}function getTickBoundaries(t,e,n){var i=n==="width",o=t.x,u=t.y,d=t.width,h=t.height;return e===1?{start:i?o:u,end:i?o+d:u+h}:{start:i?o+d:u+h,end:i?o:u}}function isVisible(t,e,n,i,o){if(t*e<t*i||t*e>t*o)return!1;var u=n();return t*(e-t*u/2-i)>=0&&t*(e+t*u/2-o)<=0}function getNumberIntervalTicks(t,e){return getEveryNthWithCondition(t,e+1)}function getEquidistantTicks(t,e,n,i,o){for(var u=(i||[]).slice(),d=e.start,h=e.end,m=0,p=1,_=d,f=function(){var v=i?.[m];if(v===void 0)return{v:getEveryNthWithCondition(i,p)};var S=m,T,E=function(){return T===void 0&&(T=n(v,S)),T},O=v.coordinate,R=m===0||isVisible(t,O,E,_,h);R||(m=0,_=d,p+=1),R&&(_=O+t*(E()/2+o),m+=p)},l;p<=u.length;)if(l=f(),l)return l.v;return[]}function _typeof$a(t){"@babel/helpers - typeof";return _typeof$a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$a(t)}function ownKeys$7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$7(Object(n),!0).forEach(function(i){_defineProperty$a(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$7(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$a(t,e,n){return e=_toPropertyKey$8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$8(t){var e=_toPrimitive$8(t,"string");return _typeof$a(e)=="symbol"?e:e+""}function _toPrimitive$8(t,e){if(_typeof$a(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(_typeof$a(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function getTicksEnd(t,e,n,i,o){for(var u=(i||[]).slice(),d=u.length,h=e.start,m=e.end,p=function(l){var g=u[l],v,S=function(){return v===void 0&&(v=n(g,l)),v};if(l===d-1){var T=t*(g.coordinate+t*S()/2-m);u[l]=g=_objectSpread$5(_objectSpread$5({},g),{},{tickCoord:T>0?g.coordinate-T*t:g.coordinate})}else u[l]=g=_objectSpread$5(_objectSpread$5({},g),{},{tickCoord:g.coordinate});var E=isVisible(t,g.tickCoord,S,h,m);E&&(m=g.tickCoord-t*(S()/2+o),u[l]=_objectSpread$5(_objectSpread$5({},g),{},{isShow:!0}))},_=d-1;_>=0;_--)p(_);return u}function getTicksStart(t,e,n,i,o,u){var d=(i||[]).slice(),h=d.length,m=e.start,p=e.end;if(u){var _=i[h-1],f=n(_,h-1),l=t*(_.coordinate+t*f/2-p);d[h-1]=_=_objectSpread$5(_objectSpread$5({},_),{},{tickCoord:l>0?_.coordinate-l*t:_.coordinate});var g=isVisible(t,_.tickCoord,function(){return f},m,p);g&&(p=_.tickCoord-t*(f/2+o),d[h-1]=_objectSpread$5(_objectSpread$5({},_),{},{isShow:!0}))}for(var v=u?h-1:h,S=function(O){var R=d[O],M,C=function(){return M===void 0&&(M=n(R,O)),M};if(O===0){var j=t*(R.coordinate-t*C()/2-m);d[O]=R=_objectSpread$5(_objectSpread$5({},R),{},{tickCoord:j<0?R.coordinate-j*t:R.coordinate})}else d[O]=R=_objectSpread$5(_objectSpread$5({},R),{},{tickCoord:R.coordinate});var $=isVisible(t,R.tickCoord,C,m,p);$&&(m=R.tickCoord+t*(C()/2+o),d[O]=_objectSpread$5(_objectSpread$5({},R),{},{isShow:!0}))},T=0;T<v;T++)S(T);return d}function getTicks(t,e,n){var i=t.tick,o=t.ticks,u=t.viewBox,d=t.minTickGap,h=t.orientation,m=t.interval,p=t.tickFormatter,_=t.unit,f=t.angle;if(!o||!o.length||!i)return[];if(isNumber(m)||Global.isSsr)return getNumberIntervalTicks(o,typeof m=="number"&&isNumber(m)?m:0);var l=[],g=h==="top"||h==="bottom"?"width":"height",v=_&&g==="width"?getStringSize(_,{fontSize:e,letterSpacing:n}):{width:0,height:0},S=function(R,M){var C=isFunction(p)?p(R.value,M):R.value;return g==="width"?getAngledTickWidth(getStringSize(C,{fontSize:e,letterSpacing:n}),v,f):getStringSize(C,{fontSize:e,letterSpacing:n})[g]},T=o.length>=2?mathSign(o[1].coordinate-o[0].coordinate):1,E=getTickBoundaries(u,T,g);return m==="equidistantPreserveStart"?getEquidistantTicks(T,E,S,o,d):(m==="preserveStart"||m==="preserveStartEnd"?l=getTicksStart(T,E,S,o,d,m==="preserveStartEnd"):l=getTicksEnd(T,E,S,o,d),l.filter(function(O){return O.isShow}))}var _excluded$3=["viewBox"],_excluded2$3=["viewBox"],_excluded3=["ticks"];function _typeof$9(t){"@babel/helpers - typeof";return _typeof$9=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$9(t)}function _extends$5(){return _extends$5=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_extends$5.apply(this,arguments)}function ownKeys$6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$6(Object(n),!0).forEach(function(i){_defineProperty$9(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$6(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _objectWithoutProperties$3(t,e){if(t==null)return{};var n=_objectWithoutPropertiesLoose$3(t,e),i,o;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(o=0;o<u.length;o++)i=u[o],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function _objectWithoutPropertiesLoose$3(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function _classCallCheck$5(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties$5(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,_toPropertyKey$7(i.key),i)}}function _createClass$5(t,e,n){return e&&_defineProperties$5(t.prototype,e),n&&_defineProperties$5(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function _callSuper$4(t,e,n){return e=_getPrototypeOf$4(e),_possibleConstructorReturn$4(t,_isNativeReflectConstruct$4()?Reflect.construct(e,n||[],_getPrototypeOf$4(t).constructor):e.apply(t,n))}function _possibleConstructorReturn$4(t,e){if(e&&(_typeof$9(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$4(t)}function _assertThisInitialized$4(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct$4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$4=function(){return!!t})()}function _getPrototypeOf$4(t){return _getPrototypeOf$4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_getPrototypeOf$4(t)}function _inherits$4(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf$4(t,e)}function _setPrototypeOf$4(t,e){return _setPrototypeOf$4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,o){return i.__proto__=o,i},_setPrototypeOf$4(t,e)}function _defineProperty$9(t,e,n){return e=_toPropertyKey$7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$7(t){var e=_toPrimitive$7(t,"string");return _typeof$9(e)=="symbol"?e:e+""}function _toPrimitive$7(t,e){if(_typeof$9(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(_typeof$9(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var CartesianAxis=(function(t){function e(n){var i;return _classCallCheck$5(this,e),i=_callSuper$4(this,e,[n]),i.state={fontSize:"",letterSpacing:""},i}return _inherits$4(e,t),_createClass$5(e,[{key:"shouldComponentUpdate",value:function(i,o){var u=i.viewBox,d=_objectWithoutProperties$3(i,_excluded$3),h=this.props,m=h.viewBox,p=_objectWithoutProperties$3(h,_excluded2$3);return!shallowEqual(u,m)||!shallowEqual(d,p)||!shallowEqual(o,this.state)}},{key:"componentDidMount",value:function(){var i=this.layerReference;if(i){var o=i.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];o&&this.setState({fontSize:window.getComputedStyle(o).fontSize,letterSpacing:window.getComputedStyle(o).letterSpacing})}}},{key:"getTickLineCoord",value:function(i){var o=this.props,u=o.x,d=o.y,h=o.width,m=o.height,p=o.orientation,_=o.tickSize,f=o.mirror,l=o.tickMargin,g,v,S,T,E,O,R=f?-1:1,M=i.tickSize||_,C=isNumber(i.tickCoord)?i.tickCoord:i.coordinate;switch(p){case"top":g=v=i.coordinate,T=d+ +!f*m,S=T-R*M,O=S-R*l,E=C;break;case"left":S=T=i.coordinate,v=u+ +!f*h,g=v-R*M,E=g-R*l,O=C;break;case"right":S=T=i.coordinate,v=u+ +f*h,g=v+R*M,E=g+R*l,O=C;break;default:g=v=i.coordinate,T=d+ +f*m,S=T+R*M,O=S+R*l,E=C;break}return{line:{x1:g,y1:S,x2:v,y2:T},tick:{x:E,y:O}}}},{key:"getTickTextAnchor",value:function(){var i=this.props,o=i.orientation,u=i.mirror,d;switch(o){case"left":d=u?"start":"end";break;case"right":d=u?"end":"start";break;default:d="middle";break}return d}},{key:"getTickVerticalAnchor",value:function(){var i=this.props,o=i.orientation,u=i.mirror,d="end";switch(o){case"left":case"right":d="middle";break;case"top":d=u?"start":"end";break;default:d=u?"end":"start";break}return d}},{key:"renderAxisLine",value:function(){var i=this.props,o=i.x,u=i.y,d=i.width,h=i.height,m=i.orientation,p=i.mirror,_=i.axisLine,f=_objectSpread$4(_objectSpread$4(_objectSpread$4({},filterProps$1(this.props,!1)),filterProps$1(_,!1)),{},{fill:"none"});if(m==="top"||m==="bottom"){var l=+(m==="top"&&!p||m==="bottom"&&p);f=_objectSpread$4(_objectSpread$4({},f),{},{x1:o,y1:u+l*h,x2:o+d,y2:u+l*h})}else{var g=+(m==="left"&&!p||m==="right"&&p);f=_objectSpread$4(_objectSpread$4({},f),{},{x1:o+g*d,y1:u,x2:o+g*d,y2:u+h})}return React.createElement("line",_extends$5({},f,{className:clsx("recharts-cartesian-axis-line",get$1(_,"className"))}))}},{key:"renderTicks",value:function(i,o,u){var d=this,h=this.props,m=h.tickLine,p=h.stroke,_=h.tick,f=h.tickFormatter,l=h.unit,g=getTicks(_objectSpread$4(_objectSpread$4({},this.props),{},{ticks:i}),o,u),v=this.getTickTextAnchor(),S=this.getTickVerticalAnchor(),T=filterProps$1(this.props,!1),E=filterProps$1(_,!1),O=_objectSpread$4(_objectSpread$4({},T),{},{fill:"none"},filterProps$1(m,!1)),R=g.map(function(M,C){var j=d.getTickLineCoord(M),$=j.line,L=j.tick,N=_objectSpread$4(_objectSpread$4(_objectSpread$4(_objectSpread$4({textAnchor:v,verticalAnchor:S},T),{},{stroke:"none",fill:p},E),L),{},{index:C,payload:M,visibleTicksCount:g.length,tickFormatter:f});return React.createElement(Layer,_extends$5({className:"recharts-cartesian-axis-tick",key:"tick-".concat(M.value,"-").concat(M.coordinate,"-").concat(M.tickCoord)},adaptEventsOfChild(d.props,M,C)),m&&React.createElement("line",_extends$5({},O,$,{className:clsx("recharts-cartesian-axis-tick-line",get$1(m,"className"))})),_&&e.renderTickItem(_,N,"".concat(isFunction(f)?f(M.value,C):M.value).concat(l||"")))});return React.createElement("g",{className:"recharts-cartesian-axis-ticks"},R)}},{key:"render",value:function(){var i=this,o=this.props,u=o.axisLine,d=o.width,h=o.height,m=o.ticksGenerator,p=o.className,_=o.hide;if(_)return null;var f=this.props,l=f.ticks,g=_objectWithoutProperties$3(f,_excluded3),v=l;return isFunction(m)&&(v=l&&l.length>0?m(this.props):m(g)),d<=0||h<=0||!v||!v.length?null:React.createElement(Layer,{className:clsx("recharts-cartesian-axis",p),ref:function(T){i.layerReference=T}},u&&this.renderAxisLine(),this.renderTicks(v,this.state.fontSize,this.state.letterSpacing),Label.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(i,o,u){var d,h=clsx(o.className,"recharts-cartesian-axis-tick-value");return React.isValidElement(i)?d=React.cloneElement(i,_objectSpread$4(_objectSpread$4({},o),{},{className:h})):isFunction(i)?d=i(_objectSpread$4(_objectSpread$4({},o),{},{className:h})):d=React.createElement(Text,_extends$5({},o,{className:"recharts-cartesian-axis-tick-value"}),u),d}}])})(reactExports.Component);_defineProperty$9(CartesianAxis,"displayName","CartesianAxis");_defineProperty$9(CartesianAxis,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var _excluded$2=["x1","y1","x2","y2","key"],_excluded2$2=["offset"];function _typeof$8(t){"@babel/helpers - typeof";return _typeof$8=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$8(t)}function ownKeys$5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$5(Object(n),!0).forEach(function(i){_defineProperty$8(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$5(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$8(t,e,n){return e=_toPropertyKey$6(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$6(t){var e=_toPrimitive$6(t,"string");return _typeof$8(e)=="symbol"?e:e+""}function _toPrimitive$6(t,e){if(_typeof$8(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(_typeof$8(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _extends$4(){return _extends$4=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_extends$4.apply(this,arguments)}function _objectWithoutProperties$2(t,e){if(t==null)return{};var n=_objectWithoutPropertiesLoose$2(t,e),i,o;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(o=0;o<u.length;o++)i=u[o],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function _objectWithoutPropertiesLoose$2(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}var Background=function(e){var n=e.fill;if(!n||n==="none")return null;var i=e.fillOpacity,o=e.x,u=e.y,d=e.width,h=e.height,m=e.ry;return React.createElement("rect",{x:o,y:u,ry:m,width:d,height:h,stroke:"none",fill:n,fillOpacity:i,className:"recharts-cartesian-grid-bg"})};function renderLineItem(t,e){var n;if(React.isValidElement(t))n=React.cloneElement(t,e);else if(isFunction(t))n=t(e);else{var i=e.x1,o=e.y1,u=e.x2,d=e.y2,h=e.key,m=_objectWithoutProperties$2(e,_excluded$2),p=filterProps$1(m,!1);p.offset;var _=_objectWithoutProperties$2(p,_excluded2$2);n=React.createElement("line",_extends$4({},_,{x1:i,y1:o,x2:u,y2:d,fill:"none",key:h}))}return n}function HorizontalGridLines(t){var e=t.x,n=t.width,i=t.horizontal,o=i===void 0?!0:i,u=t.horizontalPoints;if(!o||!u||!u.length)return null;var d=u.map(function(h,m){var p=_objectSpread$3(_objectSpread$3({},t),{},{x1:e,y1:h,x2:e+n,y2:h,key:"line-".concat(m),index:m});return renderLineItem(o,p)});return React.createElement("g",{className:"recharts-cartesian-grid-horizontal"},d)}function VerticalGridLines(t){var e=t.y,n=t.height,i=t.vertical,o=i===void 0?!0:i,u=t.verticalPoints;if(!o||!u||!u.length)return null;var d=u.map(function(h,m){var p=_objectSpread$3(_objectSpread$3({},t),{},{x1:h,y1:e,x2:h,y2:e+n,key:"line-".concat(m),index:m});return renderLineItem(o,p)});return React.createElement("g",{className:"recharts-cartesian-grid-vertical"},d)}function HorizontalStripes(t){var e=t.horizontalFill,n=t.fillOpacity,i=t.x,o=t.y,u=t.width,d=t.height,h=t.horizontalPoints,m=t.horizontal,p=m===void 0?!0:m;if(!p||!e||!e.length)return null;var _=h.map(function(l){return Math.round(l+o-o)}).sort(function(l,g){return l-g});o!==_[0]&&_.unshift(0);var f=_.map(function(l,g){var v=!_[g+1],S=v?o+d-l:_[g+1]-l;if(S<=0)return null;var T=g%e.length;return React.createElement("rect",{key:"react-".concat(g),y:l,x:i,height:S,width:u,stroke:"none",fill:e[T],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return React.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function VerticalStripes(t){var e=t.vertical,n=e===void 0?!0:e,i=t.verticalFill,o=t.fillOpacity,u=t.x,d=t.y,h=t.width,m=t.height,p=t.verticalPoints;if(!n||!i||!i.length)return null;var _=p.map(function(l){return Math.round(l+u-u)}).sort(function(l,g){return l-g});u!==_[0]&&_.unshift(0);var f=_.map(function(l,g){var v=!_[g+1],S=v?u+h-l:_[g+1]-l;if(S<=0)return null;var T=g%i.length;return React.createElement("rect",{key:"react-".concat(g),x:l,y:d,width:S,height:m,stroke:"none",fill:i[T],fillOpacity:o,className:"recharts-cartesian-grid-bg"})});return React.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var defaultVerticalCoordinatesGenerator=function(e,n){var i=e.xAxis,o=e.width,u=e.height,d=e.offset;return getCoordinatesOfGrid(getTicks(_objectSpread$3(_objectSpread$3(_objectSpread$3({},CartesianAxis.defaultProps),i),{},{ticks:getTicksOfAxis(i,!0),viewBox:{x:0,y:0,width:o,height:u}})),d.left,d.left+d.width,n)},defaultHorizontalCoordinatesGenerator=function(e,n){var i=e.yAxis,o=e.width,u=e.height,d=e.offset;return getCoordinatesOfGrid(getTicks(_objectSpread$3(_objectSpread$3(_objectSpread$3({},CartesianAxis.defaultProps),i),{},{ticks:getTicksOfAxis(i,!0),viewBox:{x:0,y:0,width:o,height:u}})),d.top,d.top+d.height,n)},defaultProps={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function CartesianGrid(t){var e,n,i,o,u,d,h=useChartWidth(),m=useChartHeight(),p=useOffset(),_=_objectSpread$3(_objectSpread$3({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:defaultProps.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:defaultProps.fill,horizontal:(i=t.horizontal)!==null&&i!==void 0?i:defaultProps.horizontal,horizontalFill:(o=t.horizontalFill)!==null&&o!==void 0?o:defaultProps.horizontalFill,vertical:(u=t.vertical)!==null&&u!==void 0?u:defaultProps.vertical,verticalFill:(d=t.verticalFill)!==null&&d!==void 0?d:defaultProps.verticalFill,x:isNumber(t.x)?t.x:p.left,y:isNumber(t.y)?t.y:p.top,width:isNumber(t.width)?t.width:p.width,height:isNumber(t.height)?t.height:p.height}),f=_.x,l=_.y,g=_.width,v=_.height,S=_.syncWithTicks,T=_.horizontalValues,E=_.verticalValues,O=useArbitraryXAxis(),R=useYAxisWithFiniteDomainOrRandom();if(!isNumber(g)||g<=0||!isNumber(v)||v<=0||!isNumber(f)||f!==+f||!isNumber(l)||l!==+l)return null;var M=_.verticalCoordinatesGenerator||defaultVerticalCoordinatesGenerator,C=_.horizontalCoordinatesGenerator||defaultHorizontalCoordinatesGenerator,j=_.horizontalPoints,$=_.verticalPoints;if((!j||!j.length)&&isFunction(C)){var L=T&&T.length,N=C({yAxis:R?_objectSpread$3(_objectSpread$3({},R),{},{ticks:L?T:R.ticks}):void 0,width:h,height:m,offset:p},L?!0:S);warn(Array.isArray(N),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(_typeof$8(N),"]")),Array.isArray(N)&&(j=N)}if((!$||!$.length)&&isFunction(M)){var B=E&&E.length,U=M({xAxis:O?_objectSpread$3(_objectSpread$3({},O),{},{ticks:B?E:O.ticks}):void 0,width:h,height:m,offset:p},B?!0:S);warn(Array.isArray(U),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(_typeof$8(U),"]")),Array.isArray(U)&&($=U)}return React.createElement("g",{className:"recharts-cartesian-grid"},React.createElement(Background,{fill:_.fill,fillOpacity:_.fillOpacity,x:_.x,y:_.y,width:_.width,height:_.height,ry:_.ry}),React.createElement(HorizontalGridLines,_extends$4({},_,{offset:p,horizontalPoints:j,xAxis:O,yAxis:R})),React.createElement(VerticalGridLines,_extends$4({},_,{offset:p,verticalPoints:$,xAxis:O,yAxis:R})),React.createElement(HorizontalStripes,_extends$4({},_,{horizontalPoints:j})),React.createElement(VerticalStripes,_extends$4({},_,{verticalPoints:$})))}CartesianGrid.displayName="CartesianGrid";var _excluded$1=["layout","type","stroke","connectNulls","isRange","ref"],_excluded2$1=["key"],_Area;function _typeof$7(t){"@babel/helpers - typeof";return _typeof$7=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$7(t)}function _objectWithoutProperties$1(t,e){if(t==null)return{};var n=_objectWithoutPropertiesLoose$1(t,e),i,o;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(o=0;o<u.length;o++)i=u[o],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function _objectWithoutPropertiesLoose$1(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_extends$3.apply(this,arguments)}function ownKeys$4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$4(Object(n),!0).forEach(function(i){_defineProperty$7(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$4(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _classCallCheck$4(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties$4(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,_toPropertyKey$5(i.key),i)}}function _createClass$4(t,e,n){return e&&_defineProperties$4(t.prototype,e),n&&_defineProperties$4(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function _callSuper$3(t,e,n){return e=_getPrototypeOf$3(e),_possibleConstructorReturn$3(t,_isNativeReflectConstruct$3()?Reflect.construct(e,n||[],_getPrototypeOf$3(t).constructor):e.apply(t,n))}function _possibleConstructorReturn$3(t,e){if(e&&(_typeof$7(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$3(t)}function _assertThisInitialized$3(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct$3(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$3=function(){return!!t})()}function _getPrototypeOf$3(t){return _getPrototypeOf$3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_getPrototypeOf$3(t)}function _inherits$3(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf$3(t,e)}function _setPrototypeOf$3(t,e){return _setPrototypeOf$3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,o){return i.__proto__=o,i},_setPrototypeOf$3(t,e)}function _defineProperty$7(t,e,n){return e=_toPropertyKey$5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$5(t){var e=_toPrimitive$5(t,"string");return _typeof$7(e)=="symbol"?e:e+""}function _toPrimitive$5(t,e){if(_typeof$7(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(_typeof$7(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Area=(function(t){function e(){var n;_classCallCheck$4(this,e);for(var i=arguments.length,o=new Array(i),u=0;u<i;u++)o[u]=arguments[u];return n=_callSuper$3(this,e,[].concat(o)),_defineProperty$7(n,"state",{isAnimationFinished:!0}),_defineProperty$7(n,"id",uniqueId("recharts-area-")),_defineProperty$7(n,"handleAnimationEnd",function(){var d=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),isFunction(d)&&d()}),_defineProperty$7(n,"handleAnimationStart",function(){var d=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),isFunction(d)&&d()}),n}return _inherits$3(e,t),_createClass$4(e,[{key:"renderDots",value:function(i,o,u){var d=this.props.isAnimationActive,h=this.state.isAnimationFinished;if(d&&!h)return null;var m=this.props,p=m.dot,_=m.points,f=m.dataKey,l=filterProps$1(this.props,!1),g=filterProps$1(p,!0),v=_.map(function(T,E){var O=_objectSpread$2(_objectSpread$2(_objectSpread$2({key:"dot-".concat(E),r:3},l),g),{},{index:E,cx:T.x,cy:T.y,dataKey:f,value:T.value,payload:T.payload,points:_});return e.renderDotItem(p,O)}),S={clipPath:i?"url(#clipPath-".concat(o?"":"dots-").concat(u,")"):null};return React.createElement(Layer,_extends$3({className:"recharts-area-dots"},S),v)}},{key:"renderHorizontalRect",value:function(i){var o=this.props,u=o.baseLine,d=o.points,h=o.strokeWidth,m=d[0].x,p=d[d.length-1].x,_=i*Math.abs(m-p),f=max$1(d.map(function(l){return l.y||0}));return isNumber(u)&&typeof u=="number"?f=Math.max(u,f):u&&Array.isArray(u)&&u.length&&(f=Math.max(max$1(u.map(function(l){return l.y||0})),f)),isNumber(f)?React.createElement("rect",{x:m<p?m:m-_,y:0,width:_,height:Math.floor(f+(h?parseInt("".concat(h),10):1))}):null}},{key:"renderVerticalRect",value:function(i){var o=this.props,u=o.baseLine,d=o.points,h=o.strokeWidth,m=d[0].y,p=d[d.length-1].y,_=i*Math.abs(m-p),f=max$1(d.map(function(l){return l.x||0}));return isNumber(u)&&typeof u=="number"?f=Math.max(u,f):u&&Array.isArray(u)&&u.length&&(f=Math.max(max$1(u.map(function(l){return l.x||0})),f)),isNumber(f)?React.createElement("rect",{x:0,y:m<p?m:m-_,width:f+(h?parseInt("".concat(h),10):1),height:Math.floor(_)}):null}},{key:"renderClipRect",value:function(i){var o=this.props.layout;return o==="vertical"?this.renderVerticalRect(i):this.renderHorizontalRect(i)}},{key:"renderAreaStatically",value:function(i,o,u,d){var h=this.props,m=h.layout,p=h.type,_=h.stroke,f=h.connectNulls,l=h.isRange;h.ref;var g=_objectWithoutProperties$1(h,_excluded$1);return React.createElement(Layer,{clipPath:u?"url(#clipPath-".concat(d,")"):null},React.createElement(Curve,_extends$3({},filterProps$1(g,!0),{points:i,connectNulls:f,type:p,baseLine:o,layout:m,stroke:"none",className:"recharts-area-area"})),_!=="none"&&React.createElement(Curve,_extends$3({},filterProps$1(this.props,!1),{className:"recharts-area-curve",layout:m,type:p,connectNulls:f,fill:"none",points:i})),_!=="none"&&l&&React.createElement(Curve,_extends$3({},filterProps$1(this.props,!1),{className:"recharts-area-curve",layout:m,type:p,connectNulls:f,fill:"none",points:o})))}},{key:"renderAreaWithAnimation",value:function(i,o){var u=this,d=this.props,h=d.points,m=d.baseLine,p=d.isAnimationActive,_=d.animationBegin,f=d.animationDuration,l=d.animationEasing,g=d.animationId,v=this.state,S=v.prevPoints,T=v.prevBaseLine;return React.createElement(Animate,{begin:_,duration:f,isActive:p,easing:l,from:{t:0},to:{t:1},key:"area-".concat(g),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(E){var O=E.t;if(S){var R=S.length/h.length,M=h.map(function(L,N){var B=Math.floor(N*R);if(S[B]){var U=S[B],H=interpolateNumber$2(U.x,L.x),Y=interpolateNumber$2(U.y,L.y);return _objectSpread$2(_objectSpread$2({},L),{},{x:H(O),y:Y(O)})}return L}),C;if(isNumber(m)&&typeof m=="number"){var j=interpolateNumber$2(T,m);C=j(O)}else if(isNil(m)||isNan(m)){var $=interpolateNumber$2(T,0);C=$(O)}else C=m.map(function(L,N){var B=Math.floor(N*R);if(T[B]){var U=T[B],H=interpolateNumber$2(U.x,L.x),Y=interpolateNumber$2(U.y,L.y);return _objectSpread$2(_objectSpread$2({},L),{},{x:H(O),y:Y(O)})}return L});return u.renderAreaStatically(M,C,i,o)}return React.createElement(Layer,null,React.createElement("defs",null,React.createElement("clipPath",{id:"animationClipPath-".concat(o)},u.renderClipRect(O))),React.createElement(Layer,{clipPath:"url(#animationClipPath-".concat(o,")")},u.renderAreaStatically(h,m,i,o)))})}},{key:"renderArea",value:function(i,o){var u=this.props,d=u.points,h=u.baseLine,m=u.isAnimationActive,p=this.state,_=p.prevPoints,f=p.prevBaseLine,l=p.totalLength;return m&&d&&d.length&&(!_&&l>0||!isEqual(_,d)||!isEqual(f,h))?this.renderAreaWithAnimation(i,o):this.renderAreaStatically(d,h,i,o)}},{key:"render",value:function(){var i,o=this.props,u=o.hide,d=o.dot,h=o.points,m=o.className,p=o.top,_=o.left,f=o.xAxis,l=o.yAxis,g=o.width,v=o.height,S=o.isAnimationActive,T=o.id;if(u||!h||!h.length)return null;var E=this.state.isAnimationFinished,O=h.length===1,R=clsx("recharts-area",m),M=f&&f.allowDataOverflow,C=l&&l.allowDataOverflow,j=M||C,$=isNil(T)?this.id:T,L=(i=filterProps$1(d,!1))!==null&&i!==void 0?i:{r:3,strokeWidth:2},N=L.r,B=N===void 0?3:N,U=L.strokeWidth,H=U===void 0?2:U,Y=hasClipDot(d)?d:{},K=Y.clipDot,z=K===void 0?!0:K,V=B*2+H;return React.createElement(Layer,{className:R},M||C?React.createElement("defs",null,React.createElement("clipPath",{id:"clipPath-".concat($)},React.createElement("rect",{x:M?_:_-g/2,y:C?p:p-v/2,width:M?g:g*2,height:C?v:v*2})),!z&&React.createElement("clipPath",{id:"clipPath-dots-".concat($)},React.createElement("rect",{x:_-V/2,y:p-V/2,width:g+V,height:v+V}))):null,O?null:this.renderArea(j,$),(d||O)&&this.renderDots(j,z,$),(!S||E)&&LabelList.renderCallByParent(this.props,h))}}],[{key:"getDerivedStateFromProps",value:function(i,o){return i.animationId!==o.prevAnimationId?{prevAnimationId:i.animationId,curPoints:i.points,curBaseLine:i.baseLine,prevPoints:o.curPoints,prevBaseLine:o.curBaseLine}:i.points!==o.curPoints||i.baseLine!==o.curBaseLine?{curPoints:i.points,curBaseLine:i.baseLine}:null}}])})(reactExports.PureComponent);_Area=Area;_defineProperty$7(Area,"displayName","Area");_defineProperty$7(Area,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Global.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});_defineProperty$7(Area,"getBaseValue",function(t,e,n,i){var o=t.layout,u=t.baseValue,d=e.props.baseValue,h=d??u;if(isNumber(h)&&typeof h=="number")return h;var m=o==="horizontal"?i:n,p=m.scale.domain();if(m.type==="number"){var _=Math.max(p[0],p[1]),f=Math.min(p[0],p[1]);return h==="dataMin"?f:h==="dataMax"||_<0?_:Math.max(Math.min(p[0],p[1]),0)}return h==="dataMin"?p[0]:h==="dataMax"?p[1]:p[0]});_defineProperty$7(Area,"getComposedData",function(t){var e=t.props,n=t.item,i=t.xAxis,o=t.yAxis,u=t.xAxisTicks,d=t.yAxisTicks,h=t.bandSize,m=t.dataKey,p=t.stackedData,_=t.dataStartIndex,f=t.displayedData,l=t.offset,g=e.layout,v=p&&p.length,S=_Area.getBaseValue(e,n,i,o),T=g==="horizontal",E=!1,O=f.map(function(M,C){var j;v?j=p[_+C]:(j=getValueByDataKey(M,m),Array.isArray(j)?E=!0:j=[S,j]);var $=j[1]==null||v&&getValueByDataKey(M,m)==null;return T?{x:getCateCoordinateOfLine({axis:i,ticks:u,bandSize:h,entry:M,index:C}),y:$?null:o.scale(j[1]),value:j,payload:M}:{x:$?null:i.scale(j[1]),y:getCateCoordinateOfLine({axis:o,ticks:d,bandSize:h,entry:M,index:C}),value:j,payload:M}}),R;return v||E?R=O.map(function(M){var C=Array.isArray(M.value)?M.value[0]:null;return T?{x:M.x,y:C!=null&&M.y!=null?o.scale(C):null}:{x:C!=null?i.scale(C):null,y:M.y}}):R=T?o.scale(S):i.scale(S),_objectSpread$2({points:O,baseLine:R,layout:g,isRange:E},l)});_defineProperty$7(Area,"renderDotItem",function(t,e){var n;if(React.isValidElement(t))n=React.cloneElement(t,e);else if(isFunction(t))n=t(e);else{var i=clsx("recharts-area-dot",typeof t!="boolean"?t.className:""),o=e.key,u=_objectWithoutProperties$1(e,_excluded2$1);n=React.createElement(Dot,_extends$3({},u,{key:o,className:i}))}return n});function _typeof$6(t){"@babel/helpers - typeof";return _typeof$6=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$6(t)}function _classCallCheck$3(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties$3(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,_toPropertyKey$4(i.key),i)}}function _createClass$3(t,e,n){return e&&_defineProperties$3(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function _callSuper$2(t,e,n){return e=_getPrototypeOf$2(e),_possibleConstructorReturn$2(t,_isNativeReflectConstruct$2()?Reflect.construct(e,n||[],_getPrototypeOf$2(t).constructor):e.apply(t,n))}function _possibleConstructorReturn$2(t,e){if(e&&(_typeof$6(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$2(t)}function _assertThisInitialized$2(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct$2(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$2=function(){return!!t})()}function _getPrototypeOf$2(t){return _getPrototypeOf$2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_getPrototypeOf$2(t)}function _inherits$2(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf$2(t,e)}function _setPrototypeOf$2(t,e){return _setPrototypeOf$2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,o){return i.__proto__=o,i},_setPrototypeOf$2(t,e)}function _defineProperty$6(t,e,n){return e=_toPropertyKey$4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$4(t){var e=_toPrimitive$4(t,"string");return _typeof$6(e)=="symbol"?e:e+""}function _toPrimitive$4(t,e){if(_typeof$6(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(_typeof$6(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_extends$2.apply(this,arguments)}function XAxisImpl(t){var e=t.xAxisId,n=useChartWidth(),i=useChartHeight(),o=useXAxisOrThrow(e);return o==null?null:reactExports.createElement(CartesianAxis,_extends$2({},o,{className:clsx("recharts-".concat(o.axisType," ").concat(o.axisType),o.className),viewBox:{x:0,y:0,width:n,height:i},ticksGenerator:function(d){return getTicksOfAxis(d,!0)}}))}var XAxis=(function(t){function e(){return _classCallCheck$3(this,e),_callSuper$2(this,e,arguments)}return _inherits$2(e,t),_createClass$3(e,[{key:"render",value:function(){return reactExports.createElement(XAxisImpl,this.props)}}])})(reactExports.Component);_defineProperty$6(XAxis,"displayName","XAxis");_defineProperty$6(XAxis,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function _typeof$5(t){"@babel/helpers - typeof";return _typeof$5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$5(t)}function _classCallCheck$2(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties$2(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,_toPropertyKey$3(i.key),i)}}function _createClass$2(t,e,n){return e&&_defineProperties$2(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function _callSuper$1(t,e,n){return e=_getPrototypeOf$1(e),_possibleConstructorReturn$1(t,_isNativeReflectConstruct$1()?Reflect.construct(e,n||[],_getPrototypeOf$1(t).constructor):e.apply(t,n))}function _possibleConstructorReturn$1(t,e){if(e&&(_typeof$5(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$1(t)}function _assertThisInitialized$1(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct$1(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$1=function(){return!!t})()}function _getPrototypeOf$1(t){return _getPrototypeOf$1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_getPrototypeOf$1(t)}function _inherits$1(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf$1(t,e)}function _setPrototypeOf$1(t,e){return _setPrototypeOf$1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,o){return i.__proto__=o,i},_setPrototypeOf$1(t,e)}function _defineProperty$5(t,e,n){return e=_toPropertyKey$3(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$3(t){var e=_toPrimitive$3(t,"string");return _typeof$5(e)=="symbol"?e:e+""}function _toPrimitive$3(t,e){if(_typeof$5(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(_typeof$5(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_extends$1.apply(this,arguments)}var YAxisImpl=function(e){var n=e.yAxisId,i=useChartWidth(),o=useChartHeight(),u=useYAxisOrThrow(n);return u==null?null:reactExports.createElement(CartesianAxis,_extends$1({},u,{className:clsx("recharts-".concat(u.axisType," ").concat(u.axisType),u.className),viewBox:{x:0,y:0,width:i,height:o},ticksGenerator:function(h){return getTicksOfAxis(h,!0)}}))},YAxis=(function(t){function e(){return _classCallCheck$2(this,e),_callSuper$1(this,e,arguments)}return _inherits$1(e,t),_createClass$2(e,[{key:"render",value:function(){return reactExports.createElement(YAxisImpl,this.props)}}])})(reactExports.Component);_defineProperty$5(YAxis,"displayName","YAxis");_defineProperty$5(YAxis,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function _toConsumableArray$1(t){return _arrayWithoutHoles$1(t)||_iterableToArray$1(t)||_unsupportedIterableToArray$1(t)||_nonIterableSpread$1()}function _nonIterableSpread$1(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$1(t,e){if(t){if(typeof t=="string")return _arrayLikeToArray$1(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray$1(t,e)}}function _iterableToArray$1(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function _arrayWithoutHoles$1(t){if(Array.isArray(t))return _arrayLikeToArray$1(t)}function _arrayLikeToArray$1(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var detectReferenceElementsDomain=function(e,n,i,o,u){var d=findAllByType(e,ReferenceLine),h=findAllByType(e,ReferenceDot),m=[].concat(_toConsumableArray$1(d),_toConsumableArray$1(h)),p=findAllByType(e,ReferenceArea),_="".concat(o,"Id"),f=o[0],l=n;if(m.length&&(l=m.reduce(function(S,T){if(T.props[_]===i&&ifOverflowMatches(T.props,"extendDomain")&&isNumber(T.props[f])){var E=T.props[f];return[Math.min(S[0],E),Math.max(S[1],E)]}return S},l)),p.length){var g="".concat(f,"1"),v="".concat(f,"2");l=p.reduce(function(S,T){if(T.props[_]===i&&ifOverflowMatches(T.props,"extendDomain")&&isNumber(T.props[g])&&isNumber(T.props[v])){var E=T.props[g],O=T.props[v];return[Math.min(S[0],E,O),Math.max(S[1],E,O)]}return S},l)}return u&&u.length&&(l=u.reduce(function(S,T){return isNumber(T)?[Math.min(S[0],T),Math.max(S[1],T)]:S},l)),l},eventemitter3={exports:{}},hasRequiredEventemitter3;function requireEventemitter3(){return hasRequiredEventemitter3||(hasRequiredEventemitter3=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(n=!1));function o(m,p,_){this.fn=m,this.context=p,this.once=_||!1}function u(m,p,_,f,l){if(typeof _!="function")throw new TypeError("The listener must be a function");var g=new o(_,f||m,l),v=n?n+p:p;return m._events[v]?m._events[v].fn?m._events[v]=[m._events[v],g]:m._events[v].push(g):(m._events[v]=g,m._eventsCount++),m}function d(m,p){--m._eventsCount===0?m._events=new i:delete m._events[p]}function h(){this._events=new i,this._eventsCount=0}h.prototype.eventNames=function(){var p=[],_,f;if(this._eventsCount===0)return p;for(f in _=this._events)e.call(_,f)&&p.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(_)):p},h.prototype.listeners=function(p){var _=n?n+p:p,f=this._events[_];if(!f)return[];if(f.fn)return[f.fn];for(var l=0,g=f.length,v=new Array(g);l<g;l++)v[l]=f[l].fn;return v},h.prototype.listenerCount=function(p){var _=n?n+p:p,f=this._events[_];return f?f.fn?1:f.length:0},h.prototype.emit=function(p,_,f,l,g,v){var S=n?n+p:p;if(!this._events[S])return!1;var T=this._events[S],E=arguments.length,O,R;if(T.fn){switch(T.once&&this.removeListener(p,T.fn,void 0,!0),E){case 1:return T.fn.call(T.context),!0;case 2:return T.fn.call(T.context,_),!0;case 3:return T.fn.call(T.context,_,f),!0;case 4:return T.fn.call(T.context,_,f,l),!0;case 5:return T.fn.call(T.context,_,f,l,g),!0;case 6:return T.fn.call(T.context,_,f,l,g,v),!0}for(R=1,O=new Array(E-1);R<E;R++)O[R-1]=arguments[R];T.fn.apply(T.context,O)}else{var M=T.length,C;for(R=0;R<M;R++)switch(T[R].once&&this.removeListener(p,T[R].fn,void 0,!0),E){case 1:T[R].fn.call(T[R].context);break;case 2:T[R].fn.call(T[R].context,_);break;case 3:T[R].fn.call(T[R].context,_,f);break;case 4:T[R].fn.call(T[R].context,_,f,l);break;default:if(!O)for(C=1,O=new Array(E-1);C<E;C++)O[C-1]=arguments[C];T[R].fn.apply(T[R].context,O)}}return!0},h.prototype.on=function(p,_,f){return u(this,p,_,f,!1)},h.prototype.once=function(p,_,f){return u(this,p,_,f,!0)},h.prototype.removeListener=function(p,_,f,l){var g=n?n+p:p;if(!this._events[g])return this;if(!_)return d(this,g),this;var v=this._events[g];if(v.fn)v.fn===_&&(!l||v.once)&&(!f||v.context===f)&&d(this,g);else{for(var S=0,T=[],E=v.length;S<E;S++)(v[S].fn!==_||l&&!v[S].once||f&&v[S].context!==f)&&T.push(v[S]);T.length?this._events[g]=T.length===1?T[0]:T:d(this,g)}return this},h.prototype.removeAllListeners=function(p){var _;return p?(_=n?n+p:p,this._events[_]&&d(this,_)):(this._events=new i,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=n,h.EventEmitter=h,t.exports=h})(eventemitter3)),eventemitter3.exports}var eventemitter3Exports=requireEventemitter3();const EventEmitter=getDefaultExportFromCjs(eventemitter3Exports);var eventCenter=new EventEmitter,SYNC_EVENT="recharts.syncMouseEvents";function _typeof$4(t){"@babel/helpers - typeof";return _typeof$4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$4(t)}function _classCallCheck$1(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties$1(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,_toPropertyKey$2(i.key),i)}}function _createClass$1(t,e,n){return e&&_defineProperties$1(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function _defineProperty$4(t,e,n){return e=_toPropertyKey$2(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$2(t){var e=_toPrimitive$2(t,"string");return _typeof$4(e)=="symbol"?e:e+""}function _toPrimitive$2(t,e){if(_typeof$4(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(_typeof$4(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var AccessibilityManager=(function(){function t(){_classCallCheck$1(this,t),_defineProperty$4(this,"activeIndex",0),_defineProperty$4(this,"coordinateList",[]),_defineProperty$4(this,"layout","horizontal")}return _createClass$1(t,[{key:"setDetails",value:function(n){var i,o=n.coordinateList,u=o===void 0?null:o,d=n.container,h=d===void 0?null:d,m=n.layout,p=m===void 0?null:m,_=n.offset,f=_===void 0?null:_,l=n.mouseHandlerCallback,g=l===void 0?null:l;this.coordinateList=(i=u??this.coordinateList)!==null&&i!==void 0?i:[],this.container=h??this.container,this.layout=p??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=g??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,i;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var o=this.container.getBoundingClientRect(),u=o.x,d=o.y,h=o.height,m=this.coordinateList[this.activeIndex].coordinate,p=((n=window)===null||n===void 0?void 0:n.scrollX)||0,_=((i=window)===null||i===void 0?void 0:i.scrollY)||0,f=u+m+p,l=d+this.offset.top+h/2+_;this.mouseHandlerCallback({pageX:f,pageY:l})}}}])})();function isDomainSpecifiedByUser(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var i=t?.[0],o=t?.[1];if(i&&o&&isNumber(i)&&isNumber(o))return!0}return!1}function getCursorRectangle(t,e,n,i){var o=i/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-o:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-o,width:t==="horizontal"?i:n.width-1,height:t==="horizontal"?n.height-1:i}}function getRadialCursorPoints(t){var e=t.cx,n=t.cy,i=t.radius,o=t.startAngle,u=t.endAngle,d=polarToCartesian(e,n,i,o),h=polarToCartesian(e,n,i,u);return{points:[d,h],cx:e,cy:n,radius:i,startAngle:o,endAngle:u}}function getCursorPoints(t,e,n){var i,o,u,d;if(t==="horizontal")i=e.x,u=i,o=n.top,d=n.top+n.height;else if(t==="vertical")o=e.y,d=o,i=n.left,u=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var h=e.cx,m=e.cy,p=e.innerRadius,_=e.outerRadius,f=e.angle,l=polarToCartesian(h,m,p,f),g=polarToCartesian(h,m,_,f);i=l.x,o=l.y,u=g.x,d=g.y}else return getRadialCursorPoints(e);return[{x:i,y:o},{x:u,y:d}]}function _typeof$3(t){"@babel/helpers - typeof";return _typeof$3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$3(t)}function ownKeys$3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$3(Object(n),!0).forEach(function(i){_defineProperty$3(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$3(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$3(t,e,n){return e=_toPropertyKey$1(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey$1(t){var e=_toPrimitive$1(t,"string");return _typeof$3(e)=="symbol"?e:e+""}function _toPrimitive$1(t,e){if(_typeof$3(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(_typeof$3(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Cursor(t){var e,n,i=t.element,o=t.tooltipEventType,u=t.isActive,d=t.activeCoordinate,h=t.activePayload,m=t.offset,p=t.activeTooltipIndex,_=t.tooltipAxisBandSize,f=t.layout,l=t.chartName,g=(e=i.props.cursor)!==null&&e!==void 0?e:(n=i.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!i||!g||!u||!d||l!=="ScatterChart"&&o!=="axis")return null;var v,S=Curve;if(l==="ScatterChart")v=d,S=Cross;else if(l==="BarChart")v=getCursorRectangle(f,d,m,_),S=Rectangle;else if(f==="radial"){var T=getRadialCursorPoints(d),E=T.cx,O=T.cy,R=T.radius,M=T.startAngle,C=T.endAngle;v={cx:E,cy:O,startAngle:M,endAngle:C,innerRadius:R,outerRadius:R},S=Sector}else v={points:getCursorPoints(f,d,m)},S=Curve;var j=_objectSpread$1(_objectSpread$1(_objectSpread$1(_objectSpread$1({stroke:"#ccc",pointerEvents:"none"},m),v),filterProps$1(g,!1)),{},{payload:h,payloadIndex:p,className:clsx("recharts-tooltip-cursor",g.className)});return reactExports.isValidElement(g)?reactExports.cloneElement(g,j):reactExports.createElement(S,j)}var _excluded=["item"],_excluded2=["children","className","width","height","style","compact","title","desc"];function _typeof$2(t){"@babel/helpers - typeof";return _typeof$2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$2(t)}function _extends(){return _extends=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_extends.apply(this,arguments)}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArrayLimit(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i,o,u,d,h=[],m=!0,p=!1;try{if(u=(n=n.call(t)).next,e!==0)for(;!(m=(i=u.call(n)).done)&&(h.push(i.value),h.length!==e);m=!0);}catch(_){p=!0,o=_}finally{try{if(!m&&n.return!=null&&(d=n.return(),Object(d)!==d))return}finally{if(p)throw o}}return h}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _objectWithoutProperties(t,e){if(t==null)return{};var n=_objectWithoutPropertiesLoose(t,e),i,o;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(o=0;o<u.length;o++)i=u[o],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function _objectWithoutPropertiesLoose(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,_toPropertyKey(i.key),i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function _callSuper(t,e,n){return e=_getPrototypeOf(e),_possibleConstructorReturn(t,_isNativeReflectConstruct()?Reflect.construct(e,n||[],_getPrototypeOf(t).constructor):e.apply(t,n))}function _possibleConstructorReturn(t,e){if(e&&(_typeof$2(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct=function(){return!!t})()}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_getPrototypeOf(t)}function _inherits(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,o){return i.__proto__=o,i},_setPrototypeOf(t,e)}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray(t,e){if(t){if(typeof t=="string")return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(t,e)}}function _iterableToArray(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function ownKeys$2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$2(Object(n),!0).forEach(function(i){_defineProperty$2(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$2(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty$2(t,e,n){return e=_toPropertyKey(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return _typeof$2(e)=="symbol"?e:e+""}function _toPrimitive(t,e){if(_typeof$2(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(_typeof$2(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ORIENT_MAP={xAxis:["bottom","top"],yAxis:["left","right"]},FULL_WIDTH_AND_HEIGHT={width:"100%",height:"100%"},originCoordinate={x:0,y:0};function renderAsIs(t){return t}var calculateTooltipPos=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},getActiveCoordinate=function(e,n,i,o){var u=n.find(function(_){return _&&_.index===i});if(u){if(e==="horizontal")return{x:u.coordinate,y:o.y};if(e==="vertical")return{x:o.x,y:u.coordinate};if(e==="centric"){var d=u.coordinate,h=o.radius;return _objectSpread(_objectSpread(_objectSpread({},o),polarToCartesian(o.cx,o.cy,h,d)),{},{angle:d,radius:h})}var m=u.coordinate,p=o.angle;return _objectSpread(_objectSpread(_objectSpread({},o),polarToCartesian(o.cx,o.cy,m,p)),{},{angle:p,radius:m})}return originCoordinate},getDisplayedData=function(e,n){var i=n.graphicalItems,o=n.dataStartIndex,u=n.dataEndIndex,d=(i??[]).reduce(function(h,m){var p=m.props.data;return p&&p.length?[].concat(_toConsumableArray(h),_toConsumableArray(p)):h},[]);return d.length>0?d:e&&e.length&&isNumber(o)&&isNumber(u)?e.slice(o,u+1):[]};function getDefaultDomainByAxisType(t){return t==="number"?[0,"auto"]:void 0}var getTooltipContent=function(e,n,i,o){var u=e.graphicalItems,d=e.tooltipAxis,h=getDisplayedData(n,e);return i<0||!u||!u.length||i>=h.length?null:u.reduce(function(m,p){var _,f=(_=p.props.data)!==null&&_!==void 0?_:n;f&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=i&&(f=f.slice(e.dataStartIndex,e.dataEndIndex+1));var l;if(d.dataKey&&!d.allowDuplicatedCategory){var g=f===void 0?h:f;l=findEntryInArray(g,d.dataKey,o)}else l=f&&f[i]||h[i];return l?[].concat(_toConsumableArray(m),[getTooltipItem(p,l)]):m},[])},getTooltipData=function(e,n,i,o){var u=o||{x:e.chartX,y:e.chartY},d=calculateTooltipPos(u,i),h=e.orderedTooltipTicks,m=e.tooltipAxis,p=e.tooltipTicks,_=calculateActiveTickIndex(d,h,p,m);if(_>=0&&p){var f=p[_]&&p[_].value,l=getTooltipContent(e,n,_,f),g=getActiveCoordinate(i,h,_,u);return{activeTooltipIndex:_,activeLabel:f,activePayload:l,activeCoordinate:g}}return null},getAxisMapByAxes=function(e,n){var i=n.axes,o=n.graphicalItems,u=n.axisType,d=n.axisIdKey,h=n.stackGroups,m=n.dataStartIndex,p=n.dataEndIndex,_=e.layout,f=e.children,l=e.stackOffset,g=isCategoricalAxis(_,u);return i.reduce(function(v,S){var T,E=S.type.defaultProps!==void 0?_objectSpread(_objectSpread({},S.type.defaultProps),S.props):S.props,O=E.type,R=E.dataKey,M=E.allowDataOverflow,C=E.allowDuplicatedCategory,j=E.scale,$=E.ticks,L=E.includeHidden,N=E[d];if(v[N])return v;var B=getDisplayedData(e.data,{graphicalItems:o.filter(function(le){var ge,Ae=d in le.props?le.props[d]:(ge=le.type.defaultProps)===null||ge===void 0?void 0:ge[d];return Ae===N}),dataStartIndex:m,dataEndIndex:p}),U=B.length,H,Y,K;isDomainSpecifiedByUser(E.domain,M,O)&&(H=parseSpecifiedDomain(E.domain,null,M),g&&(O==="number"||j!=="auto")&&(K=getDomainOfDataByKey(B,R,"category")));var z=getDefaultDomainByAxisType(O);if(!H||H.length===0){var V,G=(V=E.domain)!==null&&V!==void 0?V:z;if(R){if(H=getDomainOfDataByKey(B,R,O),O==="category"&&g){var ie=hasDuplicate(H);C&&ie?(Y=H,H=range$1(0,U)):C||(H=parseDomainOfCategoryAxis(G,H,S).reduce(function(le,ge){return le.indexOf(ge)>=0?le:[].concat(_toConsumableArray(le),[ge])},[]))}else if(O==="category")C?H=H.filter(function(le){return le!==""&&!isNil(le)}):H=parseDomainOfCategoryAxis(G,H,S).reduce(function(le,ge){return le.indexOf(ge)>=0||ge===""||isNil(ge)?le:[].concat(_toConsumableArray(le),[ge])},[]);else if(O==="number"){var Z=parseErrorBarsOfAxis(B,o.filter(function(le){var ge,Ae,Te=d in le.props?le.props[d]:(ge=le.type.defaultProps)===null||ge===void 0?void 0:ge[d],Ce="hide"in le.props?le.props.hide:(Ae=le.type.defaultProps)===null||Ae===void 0?void 0:Ae.hide;return Te===N&&(L||!Ce)}),R,u,_);Z&&(H=Z)}g&&(O==="number"||j!=="auto")&&(K=getDomainOfDataByKey(B,R,"category"))}else g?H=range$1(0,U):h&&h[N]&&h[N].hasStack&&O==="number"?H=l==="expand"?[0,1]:getDomainOfStackGroups(h[N].stackGroups,m,p):H=getDomainOfItemsWithSameAxis(B,o.filter(function(le){var ge=d in le.props?le.props[d]:le.type.defaultProps[d],Ae="hide"in le.props?le.props.hide:le.type.defaultProps.hide;return ge===N&&(L||!Ae)}),O,_,!0);if(O==="number")H=detectReferenceElementsDomain(f,H,N,u,$),G&&(H=parseSpecifiedDomain(G,H,M));else if(O==="category"&&G){var te=G,ee=H.every(function(le){return te.indexOf(le)>=0});ee&&(H=te)}}return _objectSpread(_objectSpread({},v),{},_defineProperty$2({},N,_objectSpread(_objectSpread({},E),{},{axisType:u,domain:H,categoricalDomain:K,duplicateDomain:Y,originalDomain:(T=E.domain)!==null&&T!==void 0?T:z,isCategorical:g,layout:_})))},{})},getAxisMapByItems=function(e,n){var i=n.graphicalItems,o=n.Axis,u=n.axisType,d=n.axisIdKey,h=n.stackGroups,m=n.dataStartIndex,p=n.dataEndIndex,_=e.layout,f=e.children,l=getDisplayedData(e.data,{graphicalItems:i,dataStartIndex:m,dataEndIndex:p}),g=l.length,v=isCategoricalAxis(_,u),S=-1;return i.reduce(function(T,E){var O=E.type.defaultProps!==void 0?_objectSpread(_objectSpread({},E.type.defaultProps),E.props):E.props,R=O[d],M=getDefaultDomainByAxisType("number");if(!T[R]){S++;var C;return v?C=range$1(0,g):h&&h[R]&&h[R].hasStack?(C=getDomainOfStackGroups(h[R].stackGroups,m,p),C=detectReferenceElementsDomain(f,C,R,u)):(C=parseSpecifiedDomain(M,getDomainOfItemsWithSameAxis(l,i.filter(function(j){var $,L,N=d in j.props?j.props[d]:($=j.type.defaultProps)===null||$===void 0?void 0:$[d],B="hide"in j.props?j.props.hide:(L=j.type.defaultProps)===null||L===void 0?void 0:L.hide;return N===R&&!B}),"number",_),o.defaultProps.allowDataOverflow),C=detectReferenceElementsDomain(f,C,R,u)),_objectSpread(_objectSpread({},T),{},_defineProperty$2({},R,_objectSpread(_objectSpread({axisType:u},o.defaultProps),{},{hide:!0,orientation:get$1(ORIENT_MAP,"".concat(u,".").concat(S%2),null),domain:C,originalDomain:M,isCategorical:v,layout:_})))}return T},{})},getAxisMap=function(e,n){var i=n.axisType,o=i===void 0?"xAxis":i,u=n.AxisComp,d=n.graphicalItems,h=n.stackGroups,m=n.dataStartIndex,p=n.dataEndIndex,_=e.children,f="".concat(o,"Id"),l=findAllByType(_,u),g={};return l&&l.length?g=getAxisMapByAxes(e,{axes:l,graphicalItems:d,axisType:o,axisIdKey:f,stackGroups:h,dataStartIndex:m,dataEndIndex:p}):d&&d.length&&(g=getAxisMapByItems(e,{Axis:u,graphicalItems:d,axisType:o,axisIdKey:f,stackGroups:h,dataStartIndex:m,dataEndIndex:p})),g},tooltipTicksGenerator=function(e){var n=getAnyElementOfObject(e),i=getTicksOfAxis(n,!1,!0);return{tooltipTicks:i,orderedTooltipTicks:sortBy(i,function(o){return o.coordinate}),tooltipAxis:n,tooltipAxisBandSize:getBandSizeOfAxis(n,i)}},createDefaultState=function(e){var n=e.children,i=e.defaultShowTooltip,o=findChildByType(n,Brush),u=0,d=0;return e.data&&e.data.length!==0&&(d=e.data.length-1),o&&o.props&&(o.props.startIndex>=0&&(u=o.props.startIndex),o.props.endIndex>=0&&(d=o.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:u,dataEndIndex:d,activeTooltipIndex:-1,isTooltipActive:!!i}},hasGraphicalBarItem=function(e){return!e||!e.length?!1:e.some(function(n){var i=getDisplayName(n&&n.type);return i&&i.indexOf("Bar")>=0})},getAxisNameByLayout=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},calculateOffset=function(e,n){var i=e.props,o=e.graphicalItems,u=e.xAxisMap,d=u===void 0?{}:u,h=e.yAxisMap,m=h===void 0?{}:h,p=i.width,_=i.height,f=i.children,l=i.margin||{},g=findChildByType(f,Brush),v=findChildByType(f,Legend),S=Object.keys(m).reduce(function(C,j){var $=m[j],L=$.orientation;return!$.mirror&&!$.hide?_objectSpread(_objectSpread({},C),{},_defineProperty$2({},L,C[L]+$.width)):C},{left:l.left||0,right:l.right||0}),T=Object.keys(d).reduce(function(C,j){var $=d[j],L=$.orientation;return!$.mirror&&!$.hide?_objectSpread(_objectSpread({},C),{},_defineProperty$2({},L,get$1(C,"".concat(L))+$.height)):C},{top:l.top||0,bottom:l.bottom||0}),E=_objectSpread(_objectSpread({},T),S),O=E.bottom;g&&(E.bottom+=g.props.height||Brush.defaultProps.height),v&&n&&(E=appendOffsetOfLegend(E,o,i,n));var R=p-E.left-E.right,M=_-E.top-E.bottom;return _objectSpread(_objectSpread({brushBottom:O},E),{},{width:Math.max(R,0),height:Math.max(M,0)})},getCartesianAxisSize=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},generateCategoricalChart=function(e){var n=e.chartName,i=e.GraphicalChild,o=e.defaultTooltipEventType,u=o===void 0?"axis":o,d=e.validateTooltipEventTypes,h=d===void 0?["axis"]:d,m=e.axisComponents,p=e.legendContent,_=e.formatAxisMap,f=e.defaultProps,l=function(E,O){var R=O.graphicalItems,M=O.stackGroups,C=O.offset,j=O.updateId,$=O.dataStartIndex,L=O.dataEndIndex,N=E.barSize,B=E.layout,U=E.barGap,H=E.barCategoryGap,Y=E.maxBarSize,K=getAxisNameByLayout(B),z=K.numericAxisName,V=K.cateAxisName,G=hasGraphicalBarItem(R),ie=[];return R.forEach(function(Z,te){var ee=getDisplayedData(E.data,{graphicalItems:[Z],dataStartIndex:$,dataEndIndex:L}),le=Z.type.defaultProps!==void 0?_objectSpread(_objectSpread({},Z.type.defaultProps),Z.props):Z.props,ge=le.dataKey,Ae=le.maxBarSize,Te=le["".concat(z,"Id")],Ce=le["".concat(V,"Id")],De={},Re=m.reduce(function(wt,Ze){var St=O["".concat(Ze.axisType,"Map")],Yt=le["".concat(Ze.axisType,"Id")];St&&St[Yt]||Ze.axisType==="zAxis"||invariant$1();var rt=St[Yt];return _objectSpread(_objectSpread({},wt),{},_defineProperty$2(_defineProperty$2({},Ze.axisType,rt),"".concat(Ze.axisType,"Ticks"),getTicksOfAxis(rt)))},De),Ee=Re[V],Ie=Re["".concat(V,"Ticks")],Le=M&&M[Te]&&M[Te].hasStack&&getStackedDataOfItem(Z,M[Te].stackGroups),Se=getDisplayName(Z.type).indexOf("Bar")>=0,Ye=getBandSizeOfAxis(Ee,Ie),Fe=[],at=G&&getBarSizeList({barSize:N,stackGroups:M,totalSize:getCartesianAxisSize(Re,V)});if(Se){var lt,dt,Rt=isNil(Ae)?Y:Ae,xt=(lt=(dt=getBandSizeOfAxis(Ee,Ie,!0))!==null&&dt!==void 0?dt:Rt)!==null&&lt!==void 0?lt:0;Fe=getBarPosition({barGap:U,barCategoryGap:H,bandSize:xt!==Ye?xt:Ye,sizeList:at[Ce],maxBarSize:Rt}),xt!==Ye&&(Fe=Fe.map(function(wt){return _objectSpread(_objectSpread({},wt),{},{position:_objectSpread(_objectSpread({},wt.position),{},{offset:wt.position.offset-xt/2})})}))}var Ct=Z&&Z.type&&Z.type.getComposedData;Ct&&ie.push({props:_objectSpread(_objectSpread({},Ct(_objectSpread(_objectSpread({},Re),{},{displayedData:ee,props:E,dataKey:ge,item:Z,bandSize:Ye,barPosition:Fe,offset:C,stackedData:Le,layout:B,dataStartIndex:$,dataEndIndex:L}))),{},_defineProperty$2(_defineProperty$2(_defineProperty$2({key:Z.key||"item-".concat(te)},z,Re[z]),V,Re[V]),"animationId",j)),childIndex:parseChildIndex(Z,E.children),item:Z})}),ie},g=function(E,O){var R=E.props,M=E.dataStartIndex,C=E.dataEndIndex,j=E.updateId;if(!validateWidthHeight({props:R}))return null;var $=R.children,L=R.layout,N=R.stackOffset,B=R.data,U=R.reverseStackOrder,H=getAxisNameByLayout(L),Y=H.numericAxisName,K=H.cateAxisName,z=findAllByType($,i),V=getStackGroupsByAxisId(B,z,"".concat(Y,"Id"),"".concat(K,"Id"),N,U),G=m.reduce(function(le,ge){var Ae="".concat(ge.axisType,"Map");return _objectSpread(_objectSpread({},le),{},_defineProperty$2({},Ae,getAxisMap(R,_objectSpread(_objectSpread({},ge),{},{graphicalItems:z,stackGroups:ge.axisType===Y&&V,dataStartIndex:M,dataEndIndex:C}))))},{}),ie=calculateOffset(_objectSpread(_objectSpread({},G),{},{props:R,graphicalItems:z}),O?.legendBBox);Object.keys(G).forEach(function(le){G[le]=_(R,G[le],ie,le.replace("Map",""),n)});var Z=G["".concat(K,"Map")],te=tooltipTicksGenerator(Z),ee=l(R,_objectSpread(_objectSpread({},G),{},{dataStartIndex:M,dataEndIndex:C,updateId:j,graphicalItems:z,stackGroups:V,offset:ie}));return _objectSpread(_objectSpread({formattedGraphicalItems:ee,graphicalItems:z,offset:ie,stackGroups:V},te),G)},v=(function(T){function E(O){var R,M,C;return _classCallCheck(this,E),C=_callSuper(this,E,[O]),_defineProperty$2(C,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),_defineProperty$2(C,"accessibilityManager",new AccessibilityManager),_defineProperty$2(C,"handleLegendBBoxUpdate",function(j){if(j){var $=C.state,L=$.dataStartIndex,N=$.dataEndIndex,B=$.updateId;C.setState(_objectSpread({legendBBox:j},g({props:C.props,dataStartIndex:L,dataEndIndex:N,updateId:B},_objectSpread(_objectSpread({},C.state),{},{legendBBox:j}))))}}),_defineProperty$2(C,"handleReceiveSyncEvent",function(j,$,L){if(C.props.syncId===j){if(L===C.eventEmitterSymbol&&typeof C.props.syncMethod!="function")return;C.applySyncEvent($)}}),_defineProperty$2(C,"handleBrushChange",function(j){var $=j.startIndex,L=j.endIndex;if($!==C.state.dataStartIndex||L!==C.state.dataEndIndex){var N=C.state.updateId;C.setState(function(){return _objectSpread({dataStartIndex:$,dataEndIndex:L},g({props:C.props,dataStartIndex:$,dataEndIndex:L,updateId:N},C.state))}),C.triggerSyncEvent({dataStartIndex:$,dataEndIndex:L})}}),_defineProperty$2(C,"handleMouseEnter",function(j){var $=C.getMouseInfo(j);if($){var L=_objectSpread(_objectSpread({},$),{},{isTooltipActive:!0});C.setState(L),C.triggerSyncEvent(L);var N=C.props.onMouseEnter;isFunction(N)&&N(L,j)}}),_defineProperty$2(C,"triggeredAfterMouseMove",function(j){var $=C.getMouseInfo(j),L=$?_objectSpread(_objectSpread({},$),{},{isTooltipActive:!0}):{isTooltipActive:!1};C.setState(L),C.triggerSyncEvent(L);var N=C.props.onMouseMove;isFunction(N)&&N(L,j)}),_defineProperty$2(C,"handleItemMouseEnter",function(j){C.setState(function(){return{isTooltipActive:!0,activeItem:j,activePayload:j.tooltipPayload,activeCoordinate:j.tooltipPosition||{x:j.cx,y:j.cy}}})}),_defineProperty$2(C,"handleItemMouseLeave",function(){C.setState(function(){return{isTooltipActive:!1}})}),_defineProperty$2(C,"handleMouseMove",function(j){j.persist(),C.throttleTriggeredAfterMouseMove(j)}),_defineProperty$2(C,"handleMouseLeave",function(j){C.throttleTriggeredAfterMouseMove.cancel();var $={isTooltipActive:!1};C.setState($),C.triggerSyncEvent($);var L=C.props.onMouseLeave;isFunction(L)&&L($,j)}),_defineProperty$2(C,"handleOuterEvent",function(j){var $=getReactEventByType(j),L=get$1(C.props,"".concat($));if($&&isFunction(L)){var N,B;/.*touch.*/i.test($)?B=C.getMouseInfo(j.changedTouches[0]):B=C.getMouseInfo(j),L((N=B)!==null&&N!==void 0?N:{},j)}}),_defineProperty$2(C,"handleClick",function(j){var $=C.getMouseInfo(j);if($){var L=_objectSpread(_objectSpread({},$),{},{isTooltipActive:!0});C.setState(L),C.triggerSyncEvent(L);var N=C.props.onClick;isFunction(N)&&N(L,j)}}),_defineProperty$2(C,"handleMouseDown",function(j){var $=C.props.onMouseDown;if(isFunction($)){var L=C.getMouseInfo(j);$(L,j)}}),_defineProperty$2(C,"handleMouseUp",function(j){var $=C.props.onMouseUp;if(isFunction($)){var L=C.getMouseInfo(j);$(L,j)}}),_defineProperty$2(C,"handleTouchMove",function(j){j.changedTouches!=null&&j.changedTouches.length>0&&C.throttleTriggeredAfterMouseMove(j.changedTouches[0])}),_defineProperty$2(C,"handleTouchStart",function(j){j.changedTouches!=null&&j.changedTouches.length>0&&C.handleMouseDown(j.changedTouches[0])}),_defineProperty$2(C,"handleTouchEnd",function(j){j.changedTouches!=null&&j.changedTouches.length>0&&C.handleMouseUp(j.changedTouches[0])}),_defineProperty$2(C,"handleDoubleClick",function(j){var $=C.props.onDoubleClick;if(isFunction($)){var L=C.getMouseInfo(j);$(L,j)}}),_defineProperty$2(C,"handleContextMenu",function(j){var $=C.props.onContextMenu;if(isFunction($)){var L=C.getMouseInfo(j);$(L,j)}}),_defineProperty$2(C,"triggerSyncEvent",function(j){C.props.syncId!==void 0&&eventCenter.emit(SYNC_EVENT,C.props.syncId,j,C.eventEmitterSymbol)}),_defineProperty$2(C,"applySyncEvent",function(j){var $=C.props,L=$.layout,N=$.syncMethod,B=C.state.updateId,U=j.dataStartIndex,H=j.dataEndIndex;if(j.dataStartIndex!==void 0||j.dataEndIndex!==void 0)C.setState(_objectSpread({dataStartIndex:U,dataEndIndex:H},g({props:C.props,dataStartIndex:U,dataEndIndex:H,updateId:B},C.state)));else if(j.activeTooltipIndex!==void 0){var Y=j.chartX,K=j.chartY,z=j.activeTooltipIndex,V=C.state,G=V.offset,ie=V.tooltipTicks;if(!G)return;if(typeof N=="function")z=N(ie,j);else if(N==="value"){z=-1;for(var Z=0;Z<ie.length;Z++)if(ie[Z].value===j.activeLabel){z=Z;break}}var te=_objectSpread(_objectSpread({},G),{},{x:G.left,y:G.top}),ee=Math.min(Y,te.x+te.width),le=Math.min(K,te.y+te.height),ge=ie[z]&&ie[z].value,Ae=getTooltipContent(C.state,C.props.data,z),Te=ie[z]?{x:L==="horizontal"?ie[z].coordinate:ee,y:L==="horizontal"?le:ie[z].coordinate}:originCoordinate;C.setState(_objectSpread(_objectSpread({},j),{},{activeLabel:ge,activeCoordinate:Te,activePayload:Ae,activeTooltipIndex:z}))}else C.setState(j)}),_defineProperty$2(C,"renderCursor",function(j){var $,L=C.state,N=L.isTooltipActive,B=L.activeCoordinate,U=L.activePayload,H=L.offset,Y=L.activeTooltipIndex,K=L.tooltipAxisBandSize,z=C.getTooltipEventType(),V=($=j.props.active)!==null&&$!==void 0?$:N,G=C.props.layout,ie=j.key||"_recharts-cursor";return React.createElement(Cursor,{key:ie,activeCoordinate:B,activePayload:U,activeTooltipIndex:Y,chartName:n,element:j,isActive:V,layout:G,offset:H,tooltipAxisBandSize:K,tooltipEventType:z})}),_defineProperty$2(C,"renderPolarAxis",function(j,$,L){var N=get$1(j,"type.axisType"),B=get$1(C.state,"".concat(N,"Map")),U=j.type.defaultProps,H=U!==void 0?_objectSpread(_objectSpread({},U),j.props):j.props,Y=B&&B[H["".concat(N,"Id")]];return reactExports.cloneElement(j,_objectSpread(_objectSpread({},Y),{},{className:clsx(N,Y.className),key:j.key||"".concat($,"-").concat(L),ticks:getTicksOfAxis(Y,!0)}))}),_defineProperty$2(C,"renderPolarGrid",function(j){var $=j.props,L=$.radialLines,N=$.polarAngles,B=$.polarRadius,U=C.state,H=U.radiusAxisMap,Y=U.angleAxisMap,K=getAnyElementOfObject(H),z=getAnyElementOfObject(Y),V=z.cx,G=z.cy,ie=z.innerRadius,Z=z.outerRadius;return reactExports.cloneElement(j,{polarAngles:Array.isArray(N)?N:getTicksOfAxis(z,!0).map(function(te){return te.coordinate}),polarRadius:Array.isArray(B)?B:getTicksOfAxis(K,!0).map(function(te){return te.coordinate}),cx:V,cy:G,innerRadius:ie,outerRadius:Z,key:j.key||"polar-grid",radialLines:L})}),_defineProperty$2(C,"renderLegend",function(){var j=C.state.formattedGraphicalItems,$=C.props,L=$.children,N=$.width,B=$.height,U=C.props.margin||{},H=N-(U.left||0)-(U.right||0),Y=getLegendProps({children:L,formattedGraphicalItems:j,legendWidth:H,legendContent:p});if(!Y)return null;var K=Y.item,z=_objectWithoutProperties(Y,_excluded);return reactExports.cloneElement(K,_objectSpread(_objectSpread({},z),{},{chartWidth:N,chartHeight:B,margin:U,onBBoxUpdate:C.handleLegendBBoxUpdate}))}),_defineProperty$2(C,"renderTooltip",function(){var j,$=C.props,L=$.children,N=$.accessibilityLayer,B=findChildByType(L,Tooltip);if(!B)return null;var U=C.state,H=U.isTooltipActive,Y=U.activeCoordinate,K=U.activePayload,z=U.activeLabel,V=U.offset,G=(j=B.props.active)!==null&&j!==void 0?j:H;return reactExports.cloneElement(B,{viewBox:_objectSpread(_objectSpread({},V),{},{x:V.left,y:V.top}),active:G,label:z,payload:G?K:[],coordinate:Y,accessibilityLayer:N})}),_defineProperty$2(C,"renderBrush",function(j){var $=C.props,L=$.margin,N=$.data,B=C.state,U=B.offset,H=B.dataStartIndex,Y=B.dataEndIndex,K=B.updateId;return reactExports.cloneElement(j,{key:j.key||"_recharts-brush",onChange:combineEventHandlers(C.handleBrushChange,j.props.onChange),data:N,x:isNumber(j.props.x)?j.props.x:U.left,y:isNumber(j.props.y)?j.props.y:U.top+U.height+U.brushBottom-(L.bottom||0),width:isNumber(j.props.width)?j.props.width:U.width,startIndex:H,endIndex:Y,updateId:"brush-".concat(K)})}),_defineProperty$2(C,"renderReferenceElement",function(j,$,L){if(!j)return null;var N=C,B=N.clipPathId,U=C.state,H=U.xAxisMap,Y=U.yAxisMap,K=U.offset,z=j.type.defaultProps||{},V=j.props,G=V.xAxisId,ie=G===void 0?z.xAxisId:G,Z=V.yAxisId,te=Z===void 0?z.yAxisId:Z;return reactExports.cloneElement(j,{key:j.key||"".concat($,"-").concat(L),xAxis:H[ie],yAxis:Y[te],viewBox:{x:K.left,y:K.top,width:K.width,height:K.height},clipPathId:B})}),_defineProperty$2(C,"renderActivePoints",function(j){var $=j.item,L=j.activePoint,N=j.basePoint,B=j.childIndex,U=j.isRange,H=[],Y=$.props.key,K=$.item.type.defaultProps!==void 0?_objectSpread(_objectSpread({},$.item.type.defaultProps),$.item.props):$.item.props,z=K.activeDot,V=K.dataKey,G=_objectSpread(_objectSpread({index:B,dataKey:V,cx:L.x,cy:L.y,r:4,fill:getMainColorOfGraphicItem($.item),strokeWidth:2,stroke:"#fff",payload:L.payload,value:L.value},filterProps$1(z,!1)),adaptEventHandlers(z));return H.push(E.renderActiveDot(z,G,"".concat(Y,"-activePoint-").concat(B))),N?H.push(E.renderActiveDot(z,_objectSpread(_objectSpread({},G),{},{cx:N.x,cy:N.y}),"".concat(Y,"-basePoint-").concat(B))):U&&H.push(null),H}),_defineProperty$2(C,"renderGraphicChild",function(j,$,L){var N=C.filterFormatItem(j,$,L);if(!N)return null;var B=C.getTooltipEventType(),U=C.state,H=U.isTooltipActive,Y=U.tooltipAxis,K=U.activeTooltipIndex,z=U.activeLabel,V=C.props.children,G=findChildByType(V,Tooltip),ie=N.props,Z=ie.points,te=ie.isRange,ee=ie.baseLine,le=N.item.type.defaultProps!==void 0?_objectSpread(_objectSpread({},N.item.type.defaultProps),N.item.props):N.item.props,ge=le.activeDot,Ae=le.hide,Te=le.activeBar,Ce=le.activeShape,De=!!(!Ae&&H&&G&&(ge||Te||Ce)),Re={};B!=="axis"&&G&&G.props.trigger==="click"?Re={onClick:combineEventHandlers(C.handleItemMouseEnter,j.props.onClick)}:B!=="axis"&&(Re={onMouseLeave:combineEventHandlers(C.handleItemMouseLeave,j.props.onMouseLeave),onMouseEnter:combineEventHandlers(C.handleItemMouseEnter,j.props.onMouseEnter)});var Ee=reactExports.cloneElement(j,_objectSpread(_objectSpread({},N.props),Re));function Ie(Ze){return typeof Y.dataKey=="function"?Y.dataKey(Ze.payload):null}if(De)if(K>=0){var Le,Se;if(Y.dataKey&&!Y.allowDuplicatedCategory){var Ye=typeof Y.dataKey=="function"?Ie:"payload.".concat(Y.dataKey.toString());Le=findEntryInArray(Z,Ye,z),Se=te&&ee&&findEntryInArray(ee,Ye,z)}else Le=Z?.[K],Se=te&&ee&&ee[K];if(Ce||Te){var Fe=j.props.activeIndex!==void 0?j.props.activeIndex:K;return[reactExports.cloneElement(j,_objectSpread(_objectSpread(_objectSpread({},N.props),Re),{},{activeIndex:Fe})),null,null]}if(!isNil(Le))return[Ee].concat(_toConsumableArray(C.renderActivePoints({item:N,activePoint:Le,basePoint:Se,childIndex:K,isRange:te})))}else{var at,lt=(at=C.getItemByXY(C.state.activeCoordinate))!==null&&at!==void 0?at:{graphicalItem:Ee},dt=lt.graphicalItem,Rt=dt.item,xt=Rt===void 0?j:Rt,Ct=dt.childIndex,wt=_objectSpread(_objectSpread(_objectSpread({},N.props),Re),{},{activeIndex:Ct});return[reactExports.cloneElement(xt,wt),null,null]}return te?[Ee,null,null]:[Ee,null]}),_defineProperty$2(C,"renderCustomized",function(j,$,L){return reactExports.cloneElement(j,_objectSpread(_objectSpread({key:"recharts-customized-".concat(L)},C.props),C.state))}),_defineProperty$2(C,"renderMap",{CartesianGrid:{handler:renderAsIs,once:!0},ReferenceArea:{handler:C.renderReferenceElement},ReferenceLine:{handler:renderAsIs},ReferenceDot:{handler:C.renderReferenceElement},XAxis:{handler:renderAsIs},YAxis:{handler:renderAsIs},Brush:{handler:C.renderBrush,once:!0},Bar:{handler:C.renderGraphicChild},Line:{handler:C.renderGraphicChild},Area:{handler:C.renderGraphicChild},Radar:{handler:C.renderGraphicChild},RadialBar:{handler:C.renderGraphicChild},Scatter:{handler:C.renderGraphicChild},Pie:{handler:C.renderGraphicChild},Funnel:{handler:C.renderGraphicChild},Tooltip:{handler:C.renderCursor,once:!0},PolarGrid:{handler:C.renderPolarGrid,once:!0},PolarAngleAxis:{handler:C.renderPolarAxis},PolarRadiusAxis:{handler:C.renderPolarAxis},Customized:{handler:C.renderCustomized}}),C.clipPathId="".concat((R=O.id)!==null&&R!==void 0?R:uniqueId("recharts"),"-clip"),C.throttleTriggeredAfterMouseMove=throttle(C.triggeredAfterMouseMove,(M=O.throttleDelay)!==null&&M!==void 0?M:1e3/60),C.state={},C}return _inherits(E,T),_createClass(E,[{key:"componentDidMount",value:function(){var R,M;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(R=this.props.margin.left)!==null&&R!==void 0?R:0,top:(M=this.props.margin.top)!==null&&M!==void 0?M:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var R=this.props,M=R.children,C=R.data,j=R.height,$=R.layout,L=findChildByType(M,Tooltip);if(L){var N=L.props.defaultIndex;if(!(typeof N!="number"||N<0||N>this.state.tooltipTicks.length-1)){var B=this.state.tooltipTicks[N]&&this.state.tooltipTicks[N].value,U=getTooltipContent(this.state,C,N,B),H=this.state.tooltipTicks[N].coordinate,Y=(this.state.offset.top+j)/2,K=$==="horizontal",z=K?{x:H,y:Y}:{y:H,x:Y},V=this.state.formattedGraphicalItems.find(function(ie){var Z=ie.item;return Z.type.name==="Scatter"});V&&(z=_objectSpread(_objectSpread({},z),V.props.points[N].tooltipPosition),U=V.props.points[N].tooltipPayload);var G={activeTooltipIndex:N,isTooltipActive:!0,activeLabel:B,activePayload:U,activeCoordinate:z};this.setState(G),this.renderCursor(L),this.accessibilityManager.setIndex(N)}}}},{key:"getSnapshotBeforeUpdate",value:function(R,M){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==M.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==R.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==R.margin){var C,j;this.accessibilityManager.setDetails({offset:{left:(C=this.props.margin.left)!==null&&C!==void 0?C:0,top:(j=this.props.margin.top)!==null&&j!==void 0?j:0}})}return null}},{key:"componentDidUpdate",value:function(R){isChildrenEqual([findChildByType(R.children,Tooltip)],[findChildByType(this.props.children,Tooltip)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var R=findChildByType(this.props.children,Tooltip);if(R&&typeof R.props.shared=="boolean"){var M=R.props.shared?"axis":"item";return h.indexOf(M)>=0?M:u}return u}},{key:"getMouseInfo",value:function(R){if(!this.container)return null;var M=this.container,C=M.getBoundingClientRect(),j=getOffset(C),$={chartX:Math.round(R.pageX-j.left),chartY:Math.round(R.pageY-j.top)},L=C.width/M.offsetWidth||1,N=this.inRange($.chartX,$.chartY,L);if(!N)return null;var B=this.state,U=B.xAxisMap,H=B.yAxisMap,Y=this.getTooltipEventType(),K=getTooltipData(this.state,this.props.data,this.props.layout,N);if(Y!=="axis"&&U&&H){var z=getAnyElementOfObject(U).scale,V=getAnyElementOfObject(H).scale,G=z&&z.invert?z.invert($.chartX):null,ie=V&&V.invert?V.invert($.chartY):null;return _objectSpread(_objectSpread({},$),{},{xValue:G,yValue:ie},K)}return K?_objectSpread(_objectSpread({},$),K):null}},{key:"inRange",value:function(R,M){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,j=this.props.layout,$=R/C,L=M/C;if(j==="horizontal"||j==="vertical"){var N=this.state.offset,B=$>=N.left&&$<=N.left+N.width&&L>=N.top&&L<=N.top+N.height;return B?{x:$,y:L}:null}var U=this.state,H=U.angleAxisMap,Y=U.radiusAxisMap;if(H&&Y){var K=getAnyElementOfObject(H);return inRangeOfSector({x:$,y:L},K)}return null}},{key:"parseEventsOfWrapper",value:function(){var R=this.props.children,M=this.getTooltipEventType(),C=findChildByType(R,Tooltip),j={};C&&M==="axis"&&(C.props.trigger==="click"?j={onClick:this.handleClick}:j={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var $=adaptEventHandlers(this.props,this.handleOuterEvent);return _objectSpread(_objectSpread({},$),j)}},{key:"addListener",value:function(){eventCenter.on(SYNC_EVENT,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){eventCenter.removeListener(SYNC_EVENT,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(R,M,C){for(var j=this.state.formattedGraphicalItems,$=0,L=j.length;$<L;$++){var N=j[$];if(N.item===R||N.props.key===R.key||M===getDisplayName(N.item.type)&&C===N.childIndex)return N}return null}},{key:"renderClipPath",value:function(){var R=this.clipPathId,M=this.state.offset,C=M.left,j=M.top,$=M.height,L=M.width;return React.createElement("defs",null,React.createElement("clipPath",{id:R},React.createElement("rect",{x:C,y:j,height:$,width:L})))}},{key:"getXScales",value:function(){var R=this.state.xAxisMap;return R?Object.entries(R).reduce(function(M,C){var j=_slicedToArray(C,2),$=j[0],L=j[1];return _objectSpread(_objectSpread({},M),{},_defineProperty$2({},$,L.scale))},{}):null}},{key:"getYScales",value:function(){var R=this.state.yAxisMap;return R?Object.entries(R).reduce(function(M,C){var j=_slicedToArray(C,2),$=j[0],L=j[1];return _objectSpread(_objectSpread({},M),{},_defineProperty$2({},$,L.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(R){var M;return(M=this.state.xAxisMap)===null||M===void 0||(M=M[R])===null||M===void 0?void 0:M.scale}},{key:"getYScaleByAxisId",value:function(R){var M;return(M=this.state.yAxisMap)===null||M===void 0||(M=M[R])===null||M===void 0?void 0:M.scale}},{key:"getItemByXY",value:function(R){var M=this.state,C=M.formattedGraphicalItems,j=M.activeItem;if(C&&C.length)for(var $=0,L=C.length;$<L;$++){var N=C[$],B=N.props,U=N.item,H=U.type.defaultProps!==void 0?_objectSpread(_objectSpread({},U.type.defaultProps),U.props):U.props,Y=getDisplayName(U.type);if(Y==="Bar"){var K=(B.data||[]).find(function(ie){return isInRectangle(R,ie)});if(K)return{graphicalItem:N,payload:K}}else if(Y==="RadialBar"){var z=(B.data||[]).find(function(ie){return inRangeOfSector(R,ie)});if(z)return{graphicalItem:N,payload:z}}else if(isFunnel(N,j)||isPie(N,j)||isScatter(N,j)){var V=getActiveShapeIndexForTooltip({graphicalItem:N,activeTooltipItem:j,itemData:H.data}),G=H.activeIndex===void 0?V:H.activeIndex;return{graphicalItem:_objectSpread(_objectSpread({},N),{},{childIndex:G}),payload:isScatter(N,j)?H.data[V]:N.props.data[V]}}}return null}},{key:"render",value:function(){var R=this;if(!validateWidthHeight(this))return null;var M=this.props,C=M.children,j=M.className,$=M.width,L=M.height,N=M.style,B=M.compact,U=M.title,H=M.desc,Y=_objectWithoutProperties(M,_excluded2),K=filterProps$1(Y,!1);if(B)return React.createElement(ChartLayoutContextProvider,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},React.createElement(Surface,_extends({},K,{width:$,height:L,title:U,desc:H}),this.renderClipPath(),renderByOrder(C,this.renderMap)));if(this.props.accessibilityLayer){var z,V;K.tabIndex=(z=this.props.tabIndex)!==null&&z!==void 0?z:0,K.role=(V=this.props.role)!==null&&V!==void 0?V:"application",K.onKeyDown=function(ie){R.accessibilityManager.keyboardEvent(ie)},K.onFocus=function(){R.accessibilityManager.focus()}}var G=this.parseEventsOfWrapper();return React.createElement(ChartLayoutContextProvider,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},React.createElement("div",_extends({className:clsx("recharts-wrapper",j),style:_objectSpread({position:"relative",cursor:"default",width:$,height:L},N)},G,{ref:function(Z){R.container=Z}}),React.createElement(Surface,_extends({},K,{width:$,height:L,title:U,desc:H,style:FULL_WIDTH_AND_HEIGHT}),this.renderClipPath(),renderByOrder(C,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(reactExports.Component);_defineProperty$2(v,"displayName",n),_defineProperty$2(v,"defaultProps",_objectSpread({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),_defineProperty$2(v,"getDerivedStateFromProps",function(T,E){var O=T.dataKey,R=T.data,M=T.children,C=T.width,j=T.height,$=T.layout,L=T.stackOffset,N=T.margin,B=E.dataStartIndex,U=E.dataEndIndex;if(E.updateId===void 0){var H=createDefaultState(T);return _objectSpread(_objectSpread(_objectSpread({},H),{},{updateId:0},g(_objectSpread(_objectSpread({props:T},H),{},{updateId:0}),E)),{},{prevDataKey:O,prevData:R,prevWidth:C,prevHeight:j,prevLayout:$,prevStackOffset:L,prevMargin:N,prevChildren:M})}if(O!==E.prevDataKey||R!==E.prevData||C!==E.prevWidth||j!==E.prevHeight||$!==E.prevLayout||L!==E.prevStackOffset||!shallowEqual(N,E.prevMargin)){var Y=createDefaultState(T),K={chartX:E.chartX,chartY:E.chartY,isTooltipActive:E.isTooltipActive},z=_objectSpread(_objectSpread({},getTooltipData(E,R,$)),{},{updateId:E.updateId+1}),V=_objectSpread(_objectSpread(_objectSpread({},Y),K),z);return _objectSpread(_objectSpread(_objectSpread({},V),g(_objectSpread({props:T},V),E)),{},{prevDataKey:O,prevData:R,prevWidth:C,prevHeight:j,prevLayout:$,prevStackOffset:L,prevMargin:N,prevChildren:M})}if(!isChildrenEqual(M,E.prevChildren)){var G,ie,Z,te,ee=findChildByType(M,Brush),le=ee&&(G=(ie=ee.props)===null||ie===void 0?void 0:ie.startIndex)!==null&&G!==void 0?G:B,ge=ee&&(Z=(te=ee.props)===null||te===void 0?void 0:te.endIndex)!==null&&Z!==void 0?Z:U,Ae=le!==B||ge!==U,Te=!isNil(R),Ce=Te&&!Ae?E.updateId:E.updateId+1;return _objectSpread(_objectSpread({updateId:Ce},g(_objectSpread(_objectSpread({props:T},E),{},{updateId:Ce,dataStartIndex:le,dataEndIndex:ge}),E)),{},{prevChildren:M,dataStartIndex:le,dataEndIndex:ge})}return null}),_defineProperty$2(v,"renderActiveDot",function(T,E,O){var R;return reactExports.isValidElement(T)?R=reactExports.cloneElement(T,E):isFunction(T)?R=T(E):R=React.createElement(Dot,E),React.createElement(Layer,{className:"recharts-active-dot",key:O},R)});var S=reactExports.forwardRef(function(E,O){return React.createElement(v,_extends({},E,{ref:O}))});return S.displayName=v.displayName,S},BarChart=generateCategoricalChart({chartName:"BarChart",GraphicalChild:Bar,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:XAxis},{axisType:"yAxis",AxisComp:YAxis}],formatAxisMap}),AreaChart=generateCategoricalChart({chartName:"AreaChart",GraphicalChild:Area,axisComponents:[{axisType:"xAxis",AxisComp:XAxis},{axisType:"yAxis",AxisComp:YAxis}],formatAxisMap});const LayoutGroupContext=reactExports.createContext({});function useConstant(t){const e=reactExports.useRef(null);return e.current===null&&(e.current=t()),e.current}const isBrowser$2=typeof window<"u",useIsomorphicLayoutEffect=isBrowser$2?reactExports.useLayoutEffect:reactExports.useEffect,PresenceContext=reactExports.createContext(null);function addUniqueItem(t,e){t.indexOf(e)===-1&&t.push(e)}function removeItem(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const clamp=(t,e,n)=>n>e?e:n<t?t:n;let invariant=()=>{};const MotionGlobalConfig={},isNumericalString=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function isObject(t){return typeof t=="object"&&t!==null}const isZeroValueString=t=>/^0[^.\s]+$/u.test(t);function memo(t){let e;return()=>(e===void 0&&(e=t()),e)}const noop$2=t=>t,combineFunctions=(t,e)=>n=>e(t(n)),pipe=(...t)=>t.reduce(combineFunctions),progress=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i};class SubscriptionManager{constructor(){this.subscriptions=[]}add(e){return addUniqueItem(this.subscriptions,e),()=>removeItem(this.subscriptions,e)}notify(e,n,i){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](e,n,i);else for(let u=0;u<o;u++){const d=this.subscriptions[u];d&&d(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const secondsToMilliseconds=t=>t*1e3,millisecondsToSeconds=t=>t/1e3;function velocityPerSecond(t,e){return e?t*(1e3/e):0}const calcBezier=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,subdivisionPrecision=1e-7,subdivisionMaxIterations=12;function binarySubdivide(t,e,n,i,o){let u,d,h=0;do d=e+(n-e)/2,u=calcBezier(d,i,o)-t,u>0?n=d:e=d;while(Math.abs(u)>subdivisionPrecision&&++h<subdivisionMaxIterations);return d}function cubicBezier(t,e,n,i){if(t===e&&n===i)return noop$2;const o=u=>binarySubdivide(u,0,1,t,n);return u=>u===0||u===1?u:calcBezier(o(u),e,i)}const mirrorEasing=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,reverseEasing=t=>e=>1-t(1-e),backOut=cubicBezier(.33,1.53,.69,.99),backIn=reverseEasing(backOut),backInOut=mirrorEasing(backIn),anticipate=t=>(t*=2)<1?.5*backIn(t):.5*(2-Math.pow(2,-10*(t-1))),circIn=t=>1-Math.sin(Math.acos(t)),circOut=reverseEasing(circIn),circInOut=mirrorEasing(circIn),easeIn=cubicBezier(.42,0,1,1),easeOut=cubicBezier(0,0,.58,1),easeInOut=cubicBezier(.42,0,.58,1),isEasingArray=t=>Array.isArray(t)&&typeof t[0]!="number",isBezierDefinition=t=>Array.isArray(t)&&typeof t[0]=="number",easingLookup={linear:noop$2,easeIn,easeInOut,easeOut,circIn,circInOut,circOut,backIn,backInOut,backOut,anticipate},isValidEasing=t=>typeof t=="string",easingDefinitionToFunction=t=>{if(isBezierDefinition(t)){invariant(t.length===4);const[e,n,i,o]=t;return cubicBezier(e,n,i,o)}else if(isValidEasing(t))return easingLookup[t];return t},stepsOrder=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function createRenderStep(t,e){let n=new Set,i=new Set,o=!1,u=!1;const d=new WeakSet;let h={delta:0,timestamp:0,isProcessing:!1};function m(_){d.has(_)&&(p.schedule(_),t()),_(h)}const p={schedule:(_,f=!1,l=!1)=>{const v=l&&o?n:i;return f&&d.add(_),v.has(_)||v.add(_),_},cancel:_=>{i.delete(_),d.delete(_)},process:_=>{if(h=_,o){u=!0;return}o=!0,[n,i]=[i,n],n.forEach(m),n.clear(),o=!1,u&&(u=!1,p.process(_))}};return p}const maxElapsed=40;function createRenderBatcher(t,e){let n=!1,i=!0;const o={delta:0,timestamp:0,isProcessing:!1},u=()=>n=!0,d=stepsOrder.reduce((R,M)=>(R[M]=createRenderStep(u),R),{}),{setup:h,read:m,resolveKeyframes:p,preUpdate:_,update:f,preRender:l,render:g,postRender:v}=d,S=()=>{const R=MotionGlobalConfig.useManualTiming?o.timestamp:performance.now();n=!1,MotionGlobalConfig.useManualTiming||(o.delta=i?1e3/60:Math.max(Math.min(R-o.timestamp,maxElapsed),1)),o.timestamp=R,o.isProcessing=!0,h.process(o),m.process(o),p.process(o),_.process(o),f.process(o),l.process(o),g.process(o),v.process(o),o.isProcessing=!1,n&&e&&(i=!1,t(S))},T=()=>{n=!0,i=!0,o.isProcessing||t(S)};return{schedule:stepsOrder.reduce((R,M)=>{const C=d[M];return R[M]=(j,$=!1,L=!1)=>(n||T(),C.schedule(j,$,L)),R},{}),cancel:R=>{for(let M=0;M<stepsOrder.length;M++)d[stepsOrder[M]].cancel(R)},state:o,steps:d}}const{schedule:frame,cancel:cancelFrame,state:frameData,steps:frameSteps}=createRenderBatcher(typeof requestAnimationFrame<"u"?requestAnimationFrame:noop$2,!0);let now;function clearTime(){now=void 0}const time={now:()=>(now===void 0&&time.set(frameData.isProcessing||MotionGlobalConfig.useManualTiming?frameData.timestamp:performance.now()),now),set:t=>{now=t,queueMicrotask(clearTime)}},checkStringStartsWith=t=>e=>typeof e=="string"&&e.startsWith(t),isCSSVariableName=checkStringStartsWith("--"),startsAsVariableToken=checkStringStartsWith("var(--"),isCSSVariableToken=t=>startsAsVariableToken(t)?singleCssVariableRegex.test(t.split("/*")[0].trim()):!1,singleCssVariableRegex=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function containsCSSVariable(t){return typeof t!="string"?!1:t.split("/*")[0].includes("var(--")}const number={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},alpha={...number,transform:t=>clamp(0,1,t)},scale={...number,default:1},sanitize=t=>Math.round(t*1e5)/1e5,floatRegex=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function isNullish(t){return t==null}const singleColorRegex=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,isColorString=(t,e)=>n=>!!(typeof n=="string"&&singleColorRegex.test(n)&&n.startsWith(t)||e&&!isNullish(n)&&Object.prototype.hasOwnProperty.call(n,e)),splitColor=(t,e,n)=>i=>{if(typeof i!="string")return i;const[o,u,d,h]=i.match(floatRegex);return{[t]:parseFloat(o),[e]:parseFloat(u),[n]:parseFloat(d),alpha:h!==void 0?parseFloat(h):1}},clampRgbUnit=t=>clamp(0,255,t),rgbUnit={...number,transform:t=>Math.round(clampRgbUnit(t))},rgba={test:isColorString("rgb","red"),parse:splitColor("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+rgbUnit.transform(t)+", "+rgbUnit.transform(e)+", "+rgbUnit.transform(n)+", "+sanitize(alpha.transform(i))+")"};function parseHex(t){let e="",n="",i="",o="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),o=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),o=t.substring(4,5),e+=e,n+=n,i+=i,o+=o),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:o?parseInt(o,16)/255:1}}const hex={test:isColorString("#"),parse:parseHex,transform:rgba.transform},createUnitType=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),degrees=createUnitType("deg"),percent=createUnitType("%"),px=createUnitType("px"),vh=createUnitType("vh"),vw=createUnitType("vw"),progressPercentage={...percent,parse:t=>percent.parse(t)/100,transform:t=>percent.transform(t*100)},hsla={test:isColorString("hsl","hue"),parse:splitColor("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+percent.transform(sanitize(e))+", "+percent.transform(sanitize(n))+", "+sanitize(alpha.transform(i))+")"},color={test:t=>rgba.test(t)||hex.test(t)||hsla.test(t),parse:t=>rgba.test(t)?rgba.parse(t):hsla.test(t)?hsla.parse(t):hex.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?rgba.transform(t):hsla.transform(t),getAnimatableNone:t=>{const e=color.parse(t);return e.alpha=0,color.transform(e)}},colorRegex=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function test(t){return isNaN(t)&&typeof t=="string"&&(t.match(floatRegex)?.length||0)+(t.match(colorRegex)?.length||0)>0}const NUMBER_TOKEN="number",COLOR_TOKEN="color",VAR_TOKEN="var",VAR_FUNCTION_TOKEN="var(",SPLIT_TOKEN="${}",complexRegex=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function analyseComplexValue(t){const e=t.toString(),n=[],i={color:[],number:[],var:[]},o=[];let u=0;const h=e.replace(complexRegex,m=>(color.test(m)?(i.color.push(u),o.push(COLOR_TOKEN),n.push(color.parse(m))):m.startsWith(VAR_FUNCTION_TOKEN)?(i.var.push(u),o.push(VAR_TOKEN),n.push(m)):(i.number.push(u),o.push(NUMBER_TOKEN),n.push(parseFloat(m))),++u,SPLIT_TOKEN)).split(SPLIT_TOKEN);return{values:n,split:h,indexes:i,types:o}}function parseComplexValue(t){return analyseComplexValue(t).values}function createTransformer(t){const{split:e,types:n}=analyseComplexValue(t),i=e.length;return o=>{let u="";for(let d=0;d<i;d++)if(u+=e[d],o[d]!==void 0){const h=n[d];h===NUMBER_TOKEN?u+=sanitize(o[d]):h===COLOR_TOKEN?u+=color.transform(o[d]):u+=o[d]}return u}}const convertNumbersToZero=t=>typeof t=="number"?0:color.test(t)?color.getAnimatableNone(t):t;function getAnimatableNone$1(t){const e=parseComplexValue(t);return createTransformer(t)(e.map(convertNumbersToZero))}const complex={test,parse:parseComplexValue,createTransformer,getAnimatableNone:getAnimatableNone$1};function hueToRgb(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function hslaToRgba({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let o=0,u=0,d=0;if(!e)o=u=d=n;else{const h=n<.5?n*(1+e):n+e-n*e,m=2*n-h;o=hueToRgb(m,h,t+1/3),u=hueToRgb(m,h,t),d=hueToRgb(m,h,t-1/3)}return{red:Math.round(o*255),green:Math.round(u*255),blue:Math.round(d*255),alpha:i}}function mixImmediate(t,e){return n=>n>0?e:t}const mixNumber$1=(t,e,n)=>t+(e-t)*n,mixLinearColor=(t,e,n)=>{const i=t*t,o=n*(e*e-i)+i;return o<0?0:Math.sqrt(o)},colorTypes=[hex,rgba,hsla],getColorType=t=>colorTypes.find(e=>e.test(t));function asRGBA(t){const e=getColorType(t);if(!e)return!1;let n=e.parse(t);return e===hsla&&(n=hslaToRgba(n)),n}const mixColor=(t,e)=>{const n=asRGBA(t),i=asRGBA(e);if(!n||!i)return mixImmediate(t,e);const o={...n};return u=>(o.red=mixLinearColor(n.red,i.red,u),o.green=mixLinearColor(n.green,i.green,u),o.blue=mixLinearColor(n.blue,i.blue,u),o.alpha=mixNumber$1(n.alpha,i.alpha,u),rgba.transform(o))},invisibleValues=new Set(["none","hidden"]);function mixVisibility(t,e){return invisibleValues.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function mixNumber(t,e){return n=>mixNumber$1(t,e,n)}function getMixer(t){return typeof t=="number"?mixNumber:typeof t=="string"?isCSSVariableToken(t)?mixImmediate:color.test(t)?mixColor:mixComplex:Array.isArray(t)?mixArray:typeof t=="object"?color.test(t)?mixColor:mixObject:mixImmediate}function mixArray(t,e){const n=[...t],i=n.length,o=t.map((u,d)=>getMixer(u)(u,e[d]));return u=>{for(let d=0;d<i;d++)n[d]=o[d](u);return n}}function mixObject(t,e){const n={...t,...e},i={};for(const o in n)t[o]!==void 0&&e[o]!==void 0&&(i[o]=getMixer(t[o])(t[o],e[o]));return o=>{for(const u in i)n[u]=i[u](o);return n}}function matchOrder(t,e){const n=[],i={color:0,var:0,number:0};for(let o=0;o<e.values.length;o++){const u=e.types[o],d=t.indexes[u][i[u]],h=t.values[d]??0;n[o]=h,i[u]++}return n}const mixComplex=(t,e)=>{const n=complex.createTransformer(e),i=analyseComplexValue(t),o=analyseComplexValue(e);return i.indexes.var.length===o.indexes.var.length&&i.indexes.color.length===o.indexes.color.length&&i.indexes.number.length>=o.indexes.number.length?invisibleValues.has(t)&&!o.values.length||invisibleValues.has(e)&&!i.values.length?mixVisibility(t,e):pipe(mixArray(matchOrder(i,o),o.values),n):mixImmediate(t,e)};function mix(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?mixNumber$1(t,e,n):getMixer(t)(t,e)}const frameloopDriver=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>frame.update(e,n),stop:()=>cancelFrame(e),now:()=>frameData.isProcessing?frameData.timestamp:time.now()}},generateLinearEasing=(t,e,n=10)=>{let i="";const o=Math.max(Math.round(e/n),2);for(let u=0;u<o;u++)i+=Math.round(t(u/(o-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},maxGeneratorDuration=2e4;function calcGeneratorDuration(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<maxGeneratorDuration;)e+=n,i=t.next(e);return e>=maxGeneratorDuration?1/0:e}function createGeneratorEasing(t,e=100,n){const i=n({...t,keyframes:[0,e]}),o=Math.min(calcGeneratorDuration(i),maxGeneratorDuration);return{type:"keyframes",ease:u=>i.next(o*u).value/e,duration:millisecondsToSeconds(o)}}const velocitySampleDuration=5;function calcGeneratorVelocity(t,e,n){const i=Math.max(e-velocitySampleDuration,0);return velocityPerSecond(n-t(i),e-i)}const springDefaults={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},safeMin=.001;function findSpring({duration:t=springDefaults.duration,bounce:e=springDefaults.bounce,velocity:n=springDefaults.velocity,mass:i=springDefaults.mass}){let o,u,d=1-e;d=clamp(springDefaults.minDamping,springDefaults.maxDamping,d),t=clamp(springDefaults.minDuration,springDefaults.maxDuration,millisecondsToSeconds(t)),d<1?(o=p=>{const _=p*d,f=_*t,l=_-n,g=calcAngularFreq(p,d),v=Math.exp(-f);return safeMin-l/g*v},u=p=>{const f=p*d*t,l=f*n+n,g=Math.pow(d,2)*Math.pow(p,2)*t,v=Math.exp(-f),S=calcAngularFreq(Math.pow(p,2),d);return(-o(p)+safeMin>0?-1:1)*((l-g)*v)/S}):(o=p=>{const _=Math.exp(-p*t),f=(p-n)*t+1;return-safeMin+_*f},u=p=>{const _=Math.exp(-p*t),f=(n-p)*(t*t);return _*f});const h=5/t,m=approximateRoot(o,u,h);if(t=secondsToMilliseconds(t),isNaN(m))return{stiffness:springDefaults.stiffness,damping:springDefaults.damping,duration:t};{const p=Math.pow(m,2)*i;return{stiffness:p,damping:d*2*Math.sqrt(i*p),duration:t}}}const rootIterations=12;function approximateRoot(t,e,n){let i=n;for(let o=1;o<rootIterations;o++)i=i-t(i)/e(i);return i}function calcAngularFreq(t,e){return t*Math.sqrt(1-e*e)}const durationKeys=["duration","bounce"],physicsKeys=["stiffness","damping","mass"];function isSpringType(t,e){return e.some(n=>t[n]!==void 0)}function getSpringOptions(t){let e={velocity:springDefaults.velocity,stiffness:springDefaults.stiffness,damping:springDefaults.damping,mass:springDefaults.mass,isResolvedFromDuration:!1,...t};if(!isSpringType(t,physicsKeys)&&isSpringType(t,durationKeys))if(t.visualDuration){const n=t.visualDuration,i=2*Math.PI/(n*1.2),o=i*i,u=2*clamp(.05,1,1-(t.bounce||0))*Math.sqrt(o);e={...e,mass:springDefaults.mass,stiffness:o,damping:u}}else{const n=findSpring(t);e={...e,...n,mass:springDefaults.mass},e.isResolvedFromDuration=!0}return e}function spring(t=springDefaults.visualDuration,e=springDefaults.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:i,restDelta:o}=n;const u=n.keyframes[0],d=n.keyframes[n.keyframes.length-1],h={done:!1,value:u},{stiffness:m,damping:p,mass:_,duration:f,velocity:l,isResolvedFromDuration:g}=getSpringOptions({...n,velocity:-millisecondsToSeconds(n.velocity||0)}),v=l||0,S=p/(2*Math.sqrt(m*_)),T=d-u,E=millisecondsToSeconds(Math.sqrt(m/_)),O=Math.abs(T)<5;i||(i=O?springDefaults.restSpeed.granular:springDefaults.restSpeed.default),o||(o=O?springDefaults.restDelta.granular:springDefaults.restDelta.default);let R;if(S<1){const C=calcAngularFreq(E,S);R=j=>{const $=Math.exp(-S*E*j);return d-$*((v+S*E*T)/C*Math.sin(C*j)+T*Math.cos(C*j))}}else if(S===1)R=C=>d-Math.exp(-E*C)*(T+(v+E*T)*C);else{const C=E*Math.sqrt(S*S-1);R=j=>{const $=Math.exp(-S*E*j),L=Math.min(C*j,300);return d-$*((v+S*E*T)*Math.sinh(L)+C*T*Math.cosh(L))/C}}const M={calculatedDuration:g&&f||null,next:C=>{const j=R(C);if(g)h.done=C>=f;else{let $=C===0?v:0;S<1&&($=C===0?secondsToMilliseconds(v):calcGeneratorVelocity(R,C,j));const L=Math.abs($)<=i,N=Math.abs(d-j)<=o;h.done=L&&N}return h.value=h.done?d:j,h},toString:()=>{const C=Math.min(calcGeneratorDuration(M),maxGeneratorDuration),j=generateLinearEasing($=>M.next(C*$).value,C,30);return C+"ms "+j},toTransition:()=>{}};return M}spring.applyToOptions=t=>{const e=createGeneratorEasing(t,100,spring);return t.ease=e.ease,t.duration=secondsToMilliseconds(e.duration),t.type="keyframes",t};function inertia({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:o=10,bounceStiffness:u=500,modifyTarget:d,min:h,max:m,restDelta:p=.5,restSpeed:_}){const f=t[0],l={done:!1,value:f},g=L=>h!==void 0&&L<h||m!==void 0&&L>m,v=L=>h===void 0?m:m===void 0||Math.abs(h-L)<Math.abs(m-L)?h:m;let S=n*e;const T=f+S,E=d===void 0?T:d(T);E!==T&&(S=E-f);const O=L=>-S*Math.exp(-L/i),R=L=>E+O(L),M=L=>{const N=O(L),B=R(L);l.done=Math.abs(N)<=p,l.value=l.done?E:B};let C,j;const $=L=>{g(l.value)&&(C=L,j=spring({keyframes:[l.value,v(l.value)],velocity:calcGeneratorVelocity(R,L,l.value),damping:o,stiffness:u,restDelta:p,restSpeed:_}))};return $(0),{calculatedDuration:null,next:L=>{let N=!1;return!j&&C===void 0&&(N=!0,M(L),$(L)),C!==void 0&&L>=C?j.next(L-C):(!N&&M(L),l)}}}function createMixers(t,e,n){const i=[],o=n||MotionGlobalConfig.mix||mix,u=t.length-1;for(let d=0;d<u;d++){let h=o(t[d],t[d+1]);if(e){const m=Array.isArray(e)?e[d]||noop$2:e;h=pipe(m,h)}i.push(h)}return i}function interpolate$1(t,e,{clamp:n=!0,ease:i,mixer:o}={}){const u=t.length;if(invariant(u===e.length),u===1)return()=>e[0];if(u===2&&e[0]===e[1])return()=>e[1];const d=t[0]===t[1];t[0]>t[u-1]&&(t=[...t].reverse(),e=[...e].reverse());const h=createMixers(e,i,o),m=h.length,p=_=>{if(d&&_<t[0])return e[0];let f=0;if(m>1)for(;f<t.length-2&&!(_<t[f+1]);f++);const l=progress(t[f],t[f+1],_);return h[f](l)};return n?_=>p(clamp(t[0],t[u-1],_)):p}function fillOffset(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const o=progress(0,e,i);t.push(mixNumber$1(n,1,o))}}function defaultOffset(t){const e=[0];return fillOffset(e,t.length-1),e}function convertOffsetToTimes(t,e){return t.map(n=>n*e)}function defaultEasing(t,e){return t.map(()=>e||easeInOut).splice(0,t.length-1)}function keyframes({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const o=isEasingArray(i)?i.map(easingDefinitionToFunction):easingDefinitionToFunction(i),u={done:!1,value:e[0]},d=convertOffsetToTimes(n&&n.length===e.length?n:defaultOffset(e),t),h=interpolate$1(d,e,{ease:Array.isArray(o)?o:defaultEasing(e,o)});return{calculatedDuration:t,next:m=>(u.value=h(m),u.done=m>=t,u)}}const isNotNull$1=t=>t!==null;function getFinalKeyframe$1(t,{repeat:e,repeatType:n="loop"},i,o=1){const u=t.filter(isNotNull$1),h=o<0||e&&n!=="loop"&&e%2===1?0:u.length-1;return!h||i===void 0?u[h]:i}const transitionTypeMap={decay:inertia,inertia,tween:keyframes,keyframes,spring};function replaceTransitionType(t){typeof t.type=="string"&&(t.type=transitionTypeMap[t.type])}class WithPromise{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const percentToProgress=t=>t/100;class JSAnimation extends WithPromise{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==time.now()&&this.tick(time.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;replaceTransitionType(e);const{type:n=keyframes,repeat:i=0,repeatDelay:o=0,repeatType:u,velocity:d=0}=e;let{keyframes:h}=e;const m=n||keyframes;m!==keyframes&&typeof h[0]!="number"&&(this.mixKeyframes=pipe(percentToProgress,mix(h[0],h[1])),h=[0,100]);const p=m({...e,keyframes:h});u==="mirror"&&(this.mirroredGenerator=m({...e,keyframes:[...h].reverse(),velocity:-d})),p.calculatedDuration===null&&(p.calculatedDuration=calcGeneratorDuration(p));const{calculatedDuration:_}=p;this.calculatedDuration=_,this.resolvedDuration=_+o,this.totalDuration=this.resolvedDuration*(i+1)-o,this.generator=p}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:i,totalDuration:o,mixKeyframes:u,mirroredGenerator:d,resolvedDuration:h,calculatedDuration:m}=this;if(this.startTime===null)return i.next(0);const{delay:p=0,keyframes:_,repeat:f,repeatType:l,repeatDelay:g,type:v,onUpdate:S,finalKeyframe:T}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-o/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const E=this.currentTime-p*(this.playbackSpeed>=0?1:-1),O=this.playbackSpeed>=0?E<0:E>o;this.currentTime=Math.max(E,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=o);let R=this.currentTime,M=i;if(f){const L=Math.min(this.currentTime,o)/h;let N=Math.floor(L),B=L%1;!B&&L>=1&&(B=1),B===1&&N--,N=Math.min(N,f+1),!!(N%2)&&(l==="reverse"?(B=1-B,g&&(B-=g/h)):l==="mirror"&&(M=d)),R=clamp(0,1,B)*h}const C=O?{done:!1,value:_[0]}:M.next(R);u&&(C.value=u(C.value));let{done:j}=C;!O&&m!==null&&(j=this.playbackSpeed>=0?this.currentTime>=o:this.currentTime<=0);const $=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&j);return $&&v!==inertia&&(C.value=getFinalKeyframe$1(_,this.options,T,this.speed)),S&&S(C.value),$&&this.finish(),C}then(e,n){return this.finished.then(e,n)}get duration(){return millisecondsToSeconds(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+millisecondsToSeconds(e)}get time(){return millisecondsToSeconds(this.currentTime)}set time(e){e=secondsToMilliseconds(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(time.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=millisecondsToSeconds(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=frameloopDriver,startTime:n}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),this.options.onPlay?.();const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=n??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(time.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function fillWildcards(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const radToDeg=t=>t*180/Math.PI,rotate=t=>{const e=radToDeg(Math.atan2(t[1],t[0]));return rebaseAngle(e)},matrix2dParsers={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate,rotateZ:rotate,skewX:t=>radToDeg(Math.atan(t[1])),skewY:t=>radToDeg(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},rebaseAngle=t=>(t=t%360,t<0&&(t+=360),t),rotateZ=rotate,scaleX=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),scaleY=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),matrix3dParsers={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX,scaleY,scale:t=>(scaleX(t)+scaleY(t))/2,rotateX:t=>rebaseAngle(radToDeg(Math.atan2(t[6],t[5]))),rotateY:t=>rebaseAngle(radToDeg(Math.atan2(-t[2],t[0]))),rotateZ,rotate:rotateZ,skewX:t=>radToDeg(Math.atan(t[4])),skewY:t=>radToDeg(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function defaultTransformValue(t){return t.includes("scale")?1:0}function parseValueFromTransform(t,e){if(!t||t==="none")return defaultTransformValue(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,o;if(n)i=matrix3dParsers,o=n;else{const h=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=matrix2dParsers,o=h}if(!o)return defaultTransformValue(e);const u=i[e],d=o[1].split(",").map(convertTransformToNumber);return typeof u=="function"?u(d):d[u]}const readTransformValue=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return parseValueFromTransform(n,e)};function convertTransformToNumber(t){return parseFloat(t.trim())}const transformPropOrder=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],transformProps=new Set(transformPropOrder),isNumOrPxType=t=>t===number||t===px,transformKeys=new Set(["x","y","z"]),nonTranslationalTransformKeys=transformPropOrder.filter(t=>!transformKeys.has(t));function removeNonTranslationalTransform(t){const e=[];return nonTranslationalTransformKeys.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e}const positionalValues={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>parseValueFromTransform(e,"x"),y:(t,{transform:e})=>parseValueFromTransform(e,"y")};positionalValues.translateX=positionalValues.x;positionalValues.translateY=positionalValues.y;const toResolve=new Set;let isScheduled=!1,anyNeedsMeasurement=!1,isForced=!1;function measureAllKeyframes(){if(anyNeedsMeasurement){const t=Array.from(toResolve).filter(i=>i.needsMeasurement),e=new Set(t.map(i=>i.element)),n=new Map;e.forEach(i=>{const o=removeNonTranslationalTransform(i);o.length&&(n.set(i,o),i.render())}),t.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const o=n.get(i);o&&o.forEach(([u,d])=>{i.getValue(u)?.set(d)})}),t.forEach(i=>i.measureEndState()),t.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}anyNeedsMeasurement=!1,isScheduled=!1,toResolve.forEach(t=>t.complete(isForced)),toResolve.clear()}function readAllKeyframes(){toResolve.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(anyNeedsMeasurement=!0)})}function flushKeyframeResolvers(){isForced=!0,readAllKeyframes(),measureAllKeyframes(),isForced=!1}class KeyframeResolver{constructor(e,n,i,o,u,d=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=i,this.motionValue=o,this.element=u,this.isAsync=d}scheduleResolve(){this.state="scheduled",this.isAsync?(toResolve.add(this),isScheduled||(isScheduled=!0,frame.read(readAllKeyframes),frame.resolveKeyframes(measureAllKeyframes))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:i,motionValue:o}=this;if(e[0]===null){const u=o?.get(),d=e[e.length-1];if(u!==void 0)e[0]=u;else if(i&&n){const h=i.readValue(n,d);h!=null&&(e[0]=h)}e[0]===void 0&&(e[0]=d),o&&u===void 0&&o.set(e[0])}fillWildcards(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),toResolve.delete(this)}cancel(){this.state==="scheduled"&&(toResolve.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const isCSSVar=t=>t.startsWith("--");function setStyle(t,e,n){isCSSVar(e)?t.style.setProperty(e,n):t.style[e]=n}const supportsScrollTimeline=memo(()=>window.ScrollTimeline!==void 0),supportsFlags={};function memoSupports(t,e){const n=memo(t);return()=>supportsFlags[e]??n()}const supportsLinearEasing=memoSupports(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),cubicBezierAsString=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,supportedWaapiEasing={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cubicBezierAsString([0,.65,.55,1]),circOut:cubicBezierAsString([.55,0,1,.45]),backIn:cubicBezierAsString([.31,.01,.66,-.59]),backOut:cubicBezierAsString([.33,1.53,.69,.99])};function mapEasingToNativeEasing(t,e){if(t)return typeof t=="function"?supportsLinearEasing()?generateLinearEasing(t,e):"ease-out":isBezierDefinition(t)?cubicBezierAsString(t):Array.isArray(t)?t.map(n=>mapEasingToNativeEasing(n,e)||supportedWaapiEasing.easeOut):supportedWaapiEasing[t]}function startWaapiAnimation(t,e,n,{delay:i=0,duration:o=300,repeat:u=0,repeatType:d="loop",ease:h="easeOut",times:m}={},p=void 0){const _={[e]:n};m&&(_.offset=m);const f=mapEasingToNativeEasing(h,o);Array.isArray(f)&&(_.easing=f);const l={delay:i,duration:o,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:u+1,direction:d==="reverse"?"alternate":"normal"};return p&&(l.pseudoElement=p),t.animate(_,l)}function isGenerator(t){return typeof t=="function"&&"applyToOptions"in t}function applyGeneratorOptions({type:t,...e}){return isGenerator(t)&&supportsLinearEasing()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class NativeAnimation extends WithPromise{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:n,name:i,keyframes:o,pseudoElement:u,allowFlatten:d=!1,finalKeyframe:h,onComplete:m}=e;this.isPseudoElement=!!u,this.allowFlatten=d,this.options=e,invariant(typeof e.type!="string");const p=applyGeneratorOptions(e);this.animation=startWaapiAnimation(n,i,o,p,u),p.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!u){const _=getFinalKeyframe$1(o,this.options,h,this.speed);this.updateMotionValue?this.updateMotionValue(_):setStyle(n,i,_),this.animation.cancel()}m?.(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return millisecondsToSeconds(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+millisecondsToSeconds(e)}get time(){return millisecondsToSeconds(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=secondsToMilliseconds(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&supportsScrollTimeline()?(this.animation.timeline=e,noop$2):n(this)}}const unsupportedEasingFunctions={anticipate,backInOut,circInOut};function isUnsupportedEase(t){return t in unsupportedEasingFunctions}function replaceStringEasing(t){typeof t.ease=="string"&&isUnsupportedEase(t.ease)&&(t.ease=unsupportedEasingFunctions[t.ease])}const sampleDelta=10;class NativeAnimationExtended extends NativeAnimation{constructor(e){replaceStringEasing(e),replaceTransitionType(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:i,onComplete:o,element:u,...d}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const h=new JSAnimation({...d,autoplay:!1}),m=Math.max(sampleDelta,time.now()-this.startTime),p=clamp(0,sampleDelta,m-sampleDelta);n.setWithVelocity(h.sample(Math.max(0,m-p)).value,h.sample(m).value,p),h.stop()}}const isAnimatable=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(complex.test(t)||t==="0")&&!t.startsWith("url("));function hasKeyframesChanged(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function canAnimate(t,e,n,i){const o=t[0];if(o===null)return!1;if(e==="display"||e==="visibility")return!0;const u=t[t.length-1],d=isAnimatable(o,e),h=isAnimatable(u,e);return!d||!h?!1:hasKeyframesChanged(t)||(n==="spring"||isGenerator(n))&&i}function makeAnimationInstant(t){t.duration=0,t.type="keyframes"}const acceleratedValues=new Set(["opacity","clipPath","filter","transform"]),supportsWaapi=memo(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function supportsBrowserAnimation(t){const{motionValue:e,name:n,repeatDelay:i,repeatType:o,damping:u,type:d}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:m,transformTemplate:p}=e.owner.getProps();return supportsWaapi()&&n&&acceleratedValues.has(n)&&(n!=="transform"||!p)&&!m&&!i&&o!=="mirror"&&u!==0&&d!=="inertia"}const MAX_RESOLVE_DELAY=40;class AsyncMotionValueAnimation extends WithPromise{constructor({autoplay:e=!0,delay:n=0,type:i="keyframes",repeat:o=0,repeatDelay:u=0,repeatType:d="loop",keyframes:h,name:m,motionValue:p,element:_,...f}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=time.now();const l={autoplay:e,delay:n,type:i,repeat:o,repeatDelay:u,repeatType:d,name:m,motionValue:p,element:_,...f},g=_?.KeyframeResolver||KeyframeResolver;this.keyframeResolver=new g(h,(v,S,T)=>this.onKeyframesResolved(v,S,l,!T),m,p,_),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,i,o){this.keyframeResolver=void 0;const{name:u,type:d,velocity:h,delay:m,isHandoff:p,onUpdate:_}=i;this.resolvedAt=time.now(),canAnimate(e,u,d,h)||((MotionGlobalConfig.instantAnimations||!m)&&_?.(getFinalKeyframe$1(e,i,n)),e[0]=e[e.length-1],makeAnimationInstant(i),i.repeat=0);const l={startTime:o?this.resolvedAt?this.resolvedAt-this.createdAt>MAX_RESOLVE_DELAY?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...i,keyframes:e},g=!p&&supportsBrowserAnimation(l),v=l.motionValue?.owner?.current,S=g?new NativeAnimationExtended({...l,element:v}):new JSAnimation(l);S.finished.then(()=>{this.notifyFinished()}).catch(noop$2),this.pendingTimeline&&(this.stopTimeline=S.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=S}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),flushKeyframeResolvers()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}function calcChildStagger(t,e,n,i=0,o=1){const u=Array.from(t).sort((p,_)=>p.sortNodePosition(_)).indexOf(e),d=t.size,h=(d-1)*i;return typeof n=="function"?n(u,d):o===1?u*i:h-u*i}const splitCSSVariableRegex=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function parseCSSVariable(t){const e=splitCSSVariableRegex.exec(t);if(!e)return[,];const[,n,i,o]=e;return[`--${n??i}`,o]}function getVariableValue(t,e,n=1){const[i,o]=parseCSSVariable(t);if(!i)return;const u=window.getComputedStyle(e).getPropertyValue(i);if(u){const d=u.trim();return isNumericalString(d)?parseFloat(d):d}return isCSSVariableToken(o)?getVariableValue(o,e,n+1):o}const underDampedSpring={type:"spring",stiffness:500,damping:25,restSpeed:10},criticallyDampedSpring=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),keyframesTransition={type:"keyframes",duration:.8},ease={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},getDefaultTransition=(t,{keyframes:e})=>e.length>2?keyframesTransition:transformProps.has(t)?t.startsWith("scale")?criticallyDampedSpring(e[1]):underDampedSpring:ease,isNotNull=t=>t!==null;function getFinalKeyframe(t,{repeat:e,repeatType:n="loop"},i){const o=t.filter(isNotNull),u=e&&n!=="loop"&&e%2===1?0:o.length-1;return o[u]}function getValueTransition(t,e){return t?.[e]??t?.default??t}function isTransitionDefined({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:o,repeat:u,repeatType:d,repeatDelay:h,from:m,elapsed:p,..._}){return!!Object.keys(_).length}const animateMotionValue=(t,e,n,i={},o,u)=>d=>{const h=getValueTransition(i,t)||{},m=h.delay||i.delay||0;let{elapsed:p=0}=i;p=p-secondsToMilliseconds(m);const _={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...h,delay:-p,onUpdate:l=>{e.set(l),h.onUpdate&&h.onUpdate(l)},onComplete:()=>{d(),h.onComplete&&h.onComplete()},name:t,motionValue:e,element:u?void 0:o};isTransitionDefined(h)||Object.assign(_,getDefaultTransition(t,_)),_.duration&&(_.duration=secondsToMilliseconds(_.duration)),_.repeatDelay&&(_.repeatDelay=secondsToMilliseconds(_.repeatDelay)),_.from!==void 0&&(_.keyframes[0]=_.from);let f=!1;if((_.type===!1||_.duration===0&&!_.repeatDelay)&&(makeAnimationInstant(_),_.delay===0&&(f=!0)),(MotionGlobalConfig.instantAnimations||MotionGlobalConfig.skipAnimations)&&(f=!0,makeAnimationInstant(_),_.delay=0),_.allowFlatten=!h.type&&!h.ease,f&&!u&&e.get()!==void 0){const l=getFinalKeyframe(_.keyframes,h);if(l!==void 0){frame.update(()=>{_.onUpdate(l),_.onComplete()});return}}return h.isSync?new JSAnimation(_):new AsyncMotionValueAnimation(_)};function getValueState(t){const e=[{},{}];return t?.values.forEach((n,i)=>{e[0][i]=n.get(),e[1][i]=n.getVelocity()}),e}function resolveVariantFromProps(t,e,n,i){if(typeof e=="function"){const[o,u]=getValueState(i);e=e(n!==void 0?n:t.custom,o,u)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[o,u]=getValueState(i);e=e(n!==void 0?n:t.custom,o,u)}return e}function resolveVariant(t,e,n){const i=t.getProps();return resolveVariantFromProps(i,e,n!==void 0?n:i.custom,t)}const positionalKeys=new Set(["width","height","top","left","right","bottom",...transformPropOrder]),MAX_VELOCITY_DELTA=30,isFloat=t=>!isNaN(parseFloat(t));class MotionValue{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{const o=time.now();if(this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const u of this.dependents)u.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=time.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=isFloat(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new SubscriptionManager);const i=this.events[e].add(n);return e==="change"?()=>{i(),frame.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=time.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>MAX_VELOCITY_DELTA)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,MAX_VELOCITY_DELTA);return velocityPerSecond(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function motionValue(t,e){return new MotionValue(t,e)}const isKeyframesTarget=t=>Array.isArray(t);function setMotionValue(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,motionValue(n))}function resolveFinalValueInKeyframes(t){return isKeyframesTarget(t)?t[t.length-1]||0:t}function setTarget(t,e){const n=resolveVariant(t,e);let{transitionEnd:i={},transition:o={},...u}=n||{};u={...u,...i};for(const d in u){const h=resolveFinalValueInKeyframes(u[d]);setMotionValue(t,d,h)}}const isMotionValue=t=>!!(t&&t.getVelocity);function isWillChangeMotionValue(t){return!!(isMotionValue(t)&&t.add)}function addValueToWillChange(t,e){const n=t.getValue("willChange");if(isWillChangeMotionValue(n))return n.add(e);if(!n&&MotionGlobalConfig.WillChange){const i=new MotionGlobalConfig.WillChange("auto");t.addValue("willChange",i),i.add(e)}}function camelToDash(t){return t.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const optimizedAppearDataId="framerAppearId",optimizedAppearDataAttribute="data-"+camelToDash(optimizedAppearDataId);function getOptimisedAppearId(t){return t.props[optimizedAppearDataAttribute]}function shouldBlockAnimation({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function animateTarget(t,e,{delay:n=0,transitionOverride:i,type:o}={}){let{transition:u=t.getDefaultTransition(),transitionEnd:d,...h}=e;const m=u?.reduceMotion;i&&(u=i);const p=[],_=o&&t.animationState&&t.animationState.getState()[o];for(const f in h){const l=t.getValue(f,t.latestValues[f]??null),g=h[f];if(g===void 0||_&&shouldBlockAnimation(_,f))continue;const v={delay:n,...getValueTransition(u||{},f)},S=l.get();if(S!==void 0&&!l.isAnimating&&!Array.isArray(g)&&g===S&&!v.velocity)continue;let T=!1;if(window.MotionHandoffAnimation){const R=getOptimisedAppearId(t);if(R){const M=window.MotionHandoffAnimation(R,f,frame);M!==null&&(v.startTime=M,T=!0)}}addValueToWillChange(t,f);const E=m??t.shouldReduceMotion;l.start(animateMotionValue(f,l,g,E&&positionalKeys.has(f)?{type:!1}:v,t,T));const O=l.animation;O&&p.push(O)}return d&&Promise.all(p).then(()=>{frame.update(()=>{d&&setTarget(t,d)})}),p}function animateVariant(t,e,n={}){const i=resolveVariant(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:o=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(o=n.transitionOverride);const u=i?()=>Promise.all(animateTarget(t,i,n)):()=>Promise.resolve(),d=t.variantChildren&&t.variantChildren.size?(m=0)=>{const{delayChildren:p=0,staggerChildren:_,staggerDirection:f}=o;return animateChildren(t,e,m,p,_,f,n)}:()=>Promise.resolve(),{when:h}=o;if(h){const[m,p]=h==="beforeChildren"?[u,d]:[d,u];return m().then(()=>p())}else return Promise.all([u(),d(n.delay)])}function animateChildren(t,e,n=0,i=0,o=0,u=1,d){const h=[];for(const m of t.variantChildren)m.notify("AnimationStart",e),h.push(animateVariant(m,e,{...d,delay:n+(typeof i=="function"?0:i)+calcChildStagger(t.variantChildren,m,i,o,u)}).then(()=>m.notify("AnimationComplete",e)));return Promise.all(h)}function animateVisualElement(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const o=e.map(u=>animateVariant(t,u,n));i=Promise.all(o)}else if(typeof e=="string")i=animateVariant(t,e,n);else{const o=typeof e=="function"?resolveVariant(t,e,n.custom):e;i=Promise.all(animateTarget(t,o,n))}return i.then(()=>{t.notify("AnimationComplete",e)})}const auto={test:t=>t==="auto",parse:t=>t},testValueType=t=>e=>e.test(t),dimensionValueTypes=[number,px,percent,degrees,vw,vh,auto],findDimensionValueType=t=>dimensionValueTypes.find(testValueType(t));function isNone(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||isZeroValueString(t):!0}const maxDefaults=new Set(["brightness","contrast","saturate","opacity"]);function applyDefaultFilter(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(floatRegex)||[];if(!i)return t;const o=n.replace(i,"");let u=maxDefaults.has(e)?1:0;return i!==n&&(u*=100),e+"("+u+o+")"}const functionRegex=/\b([a-z-]*)\(.*?\)/gu,filter={...complex,getAnimatableNone:t=>{const e=t.match(functionRegex);return e?e.map(applyDefaultFilter).join(" "):t}},int={...number,transform:Math.round},transformValueTypes={rotate:degrees,rotateX:degrees,rotateY:degrees,rotateZ:degrees,scale,scaleX:scale,scaleY:scale,scaleZ:scale,skew:degrees,skewX:degrees,skewY:degrees,distance:px,translateX:px,translateY:px,translateZ:px,x:px,y:px,z:px,perspective:px,transformPerspective:px,opacity:alpha,originX:progressPercentage,originY:progressPercentage,originZ:px},numberValueTypes={borderWidth:px,borderTopWidth:px,borderRightWidth:px,borderBottomWidth:px,borderLeftWidth:px,borderRadius:px,borderTopLeftRadius:px,borderTopRightRadius:px,borderBottomRightRadius:px,borderBottomLeftRadius:px,width:px,maxWidth:px,height:px,maxHeight:px,top:px,right:px,bottom:px,left:px,inset:px,insetBlock:px,insetBlockStart:px,insetBlockEnd:px,insetInline:px,insetInlineStart:px,insetInlineEnd:px,padding:px,paddingTop:px,paddingRight:px,paddingBottom:px,paddingLeft:px,paddingBlock:px,paddingBlockStart:px,paddingBlockEnd:px,paddingInline:px,paddingInlineStart:px,paddingInlineEnd:px,margin:px,marginTop:px,marginRight:px,marginBottom:px,marginLeft:px,marginBlock:px,marginBlockStart:px,marginBlockEnd:px,marginInline:px,marginInlineStart:px,marginInlineEnd:px,fontSize:px,backgroundPositionX:px,backgroundPositionY:px,...transformValueTypes,zIndex:int,fillOpacity:alpha,strokeOpacity:alpha,numOctaves:int},defaultValueTypes={...numberValueTypes,color,backgroundColor:color,outlineColor:color,fill:color,stroke:color,borderColor:color,borderTopColor:color,borderRightColor:color,borderBottomColor:color,borderLeftColor:color,filter,WebkitFilter:filter},getDefaultValueType=t=>defaultValueTypes[t];function getAnimatableNone(t,e){let n=getDefaultValueType(t);return n!==filter&&(n=complex),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const invalidTemplates=new Set(["auto","none","0"]);function makeNoneKeyframesAnimatable(t,e,n){let i=0,o;for(;i<t.length&&!o;){const u=t[i];typeof u=="string"&&!invalidTemplates.has(u)&&analyseComplexValue(u).values.length&&(o=t[i]),i++}if(o&&n)for(const u of e)t[u]=getAnimatableNone(n,o)}class DOMKeyframesResolver extends KeyframeResolver{constructor(e,n,i,o,u){super(e,n,i,o,u,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let _=0;_<e.length;_++){let f=e[_];if(typeof f=="string"&&(f=f.trim(),isCSSVariableToken(f))){const l=getVariableValue(f,n.current);l!==void 0&&(e[_]=l),_===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!positionalKeys.has(i)||e.length!==2)return;const[o,u]=e,d=findDimensionValueType(o),h=findDimensionValueType(u),m=containsCSSVariable(o),p=containsCSSVariable(u);if(m!==p&&positionalValues[i]){this.needsMeasurement=!0;return}if(d!==h)if(isNumOrPxType(d)&&isNumOrPxType(h))for(let _=0;_<e.length;_++){const f=e[_];typeof f=="string"&&(e[_]=parseFloat(f))}else positionalValues[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,i=[];for(let o=0;o<e.length;o++)(e[o]===null||isNone(e[o]))&&i.push(o);i.length&&makeNoneKeyframesAnimatable(e,i,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=positionalValues[i](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const o=n[n.length-1];o!==void 0&&e.getValue(i,o).jump(o,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:i}=this;if(!e||!e.current)return;const o=e.getValue(n);o&&o.jump(this.measuredOrigin,!1);const u=i.length-1,d=i[u];i[u]=positionalValues[n](e.measureViewportBox(),window.getComputedStyle(e.current)),d!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=d),this.removedTransforms?.length&&this.removedTransforms.forEach(([h,m])=>{e.getValue(h).set(m)}),this.resolveNoneKeyframes()}}function resolveElements(t,e,n){if(t==null)return[];if(t instanceof EventTarget)return[t];if(typeof t=="string"){let i=document;const o=n?.[t]??i.querySelectorAll(t);return o?Array.from(o):[]}return Array.from(t).filter(i=>i!=null)}const getValueAsType=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function isHTMLElement(t){return isObject(t)&&"offsetHeight"in t}const{schedule:microtask}=createRenderBatcher(queueMicrotask,!1),isDragging={x:!1,y:!1};function isDragActive(){return isDragging.x||isDragging.y}function setDragLock(t){return t==="x"||t==="y"?isDragging[t]?null:(isDragging[t]=!0,()=>{isDragging[t]=!1}):isDragging.x||isDragging.y?null:(isDragging.x=isDragging.y=!0,()=>{isDragging.x=isDragging.y=!1})}function setupGesture(t,e){const n=resolveElements(t),i=new AbortController,o={passive:!0,...e,signal:i.signal};return[n,o,()=>i.abort()]}function isValidHover(t){return!(t.pointerType==="touch"||isDragActive())}function hover(t,e,n={}){const[i,o,u]=setupGesture(t,n),d=h=>{if(!isValidHover(h))return;const{target:m}=h,p=e(m,h);if(typeof p!="function"||!m)return;const _=f=>{isValidHover(f)&&(p(f),m.removeEventListener("pointerleave",_))};m.addEventListener("pointerleave",_,o)};return i.forEach(h=>{h.addEventListener("pointerenter",d,o)}),u}const isNodeOrChild=(t,e)=>e?t===e?!0:isNodeOrChild(t,e.parentElement):!1,isPrimaryPointer=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,interactiveElements=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function isElementKeyboardAccessible(t){return interactiveElements.has(t.tagName)||t.isContentEditable===!0}const isPressing=new WeakSet;function filterEvents(t){return e=>{e.key==="Enter"&&t(e)}}function firePointerEvent(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const enableKeyboardPress=(t,e)=>{const n=t.currentTarget;if(!n)return;const i=filterEvents(()=>{if(isPressing.has(n))return;firePointerEvent(n,"down");const o=filterEvents(()=>{firePointerEvent(n,"up")}),u=()=>firePointerEvent(n,"cancel");n.addEventListener("keyup",o,e),n.addEventListener("blur",u,e)});n.addEventListener("keydown",i,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),e)};function isValidPressEvent(t){return isPrimaryPointer(t)&&!isDragActive()}function press(t,e,n={}){const[i,o,u]=setupGesture(t,n),d=h=>{const m=h.currentTarget;if(!isValidPressEvent(h))return;isPressing.add(m);const p=e(m,h),_=(g,v)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",l),isPressing.has(m)&&isPressing.delete(m),isValidPressEvent(g)&&typeof p=="function"&&p(g,{success:v})},f=g=>{_(g,m===window||m===document||n.useGlobalTarget||isNodeOrChild(m,g.target))},l=g=>{_(g,!1)};window.addEventListener("pointerup",f,o),window.addEventListener("pointercancel",l,o)};return i.forEach(h=>{(n.useGlobalTarget?window:h).addEventListener("pointerdown",d,o),isHTMLElement(h)&&(h.addEventListener("focus",p=>enableKeyboardPress(p,o)),!isElementKeyboardAccessible(h)&&!h.hasAttribute("tabindex")&&(h.tabIndex=0))}),u}function isSVGElement(t){return isObject(t)&&"ownerSVGElement"in t}function isSVGSVGElement(t){return isSVGElement(t)&&t.tagName==="svg"}const valueTypes=[...dimensionValueTypes,color,complex],findValueType=t=>valueTypes.find(testValueType(t)),createAxisDelta=()=>({translate:0,scale:1,origin:0,originPoint:0}),createDelta=()=>({x:createAxisDelta(),y:createAxisDelta()}),createAxis=()=>({min:0,max:0}),createBox=()=>({x:createAxis(),y:createAxis()}),prefersReducedMotion={current:null},hasReducedMotionListener={current:!1},isBrowser$1=typeof window<"u";function initPrefersReducedMotion(){if(hasReducedMotionListener.current=!0,!!isBrowser$1)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>prefersReducedMotion.current=t.matches;t.addEventListener("change",e),e()}else prefersReducedMotion.current=!1}const visualElementStore=new WeakMap;function isAnimationControls(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function isVariantLabel(t){return typeof t=="string"||Array.isArray(t)}const variantPriorityOrder=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],variantProps=["initial",...variantPriorityOrder];function isControllingVariants(t){return isAnimationControls(t.animate)||variantProps.some(e=>isVariantLabel(t[e]))}function isVariantNode(t){return!!(isControllingVariants(t)||t.variants)}function updateMotionValuesFromProps(t,e,n){for(const i in e){const o=e[i],u=n[i];if(isMotionValue(o))t.addValue(i,o);else if(isMotionValue(u))t.addValue(i,motionValue(o,{owner:t}));else if(u!==o)if(t.hasValue(i)){const d=t.getValue(i);d.liveStyle===!0?d.jump(o):d.hasAnimated||d.set(o)}else{const d=t.getStaticValue(i);t.addValue(i,motionValue(d!==void 0?d:o,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const propEventHandlers=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let featureDefinitions={};function setFeatureDefinitions(t){featureDefinitions=t}function getFeatureDefinitions(){return featureDefinitions}class VisualElement{scrapeMotionValuesFromProps(e,n,i){return{}}constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:o,blockInitialAnimation:u,visualState:d},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=KeyframeResolver,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const l=time.now();this.renderScheduledAt<l&&(this.renderScheduledAt=l,frame.render(this.render,!1,!0))};const{latestValues:m,renderState:p}=d;this.latestValues=m,this.baseTarget={...m},this.initialValues=n.initial?{...m}:{},this.renderState=p,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=o,this.options=h,this.blockInitialAnimation=!!u,this.isControllingVariants=isControllingVariants(n),this.isVariantNode=isVariantNode(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:_,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const l in f){const g=f[l];m[l]!==void 0&&isMotionValue(g)&&g.set(m[l])}}mount(e){this.current=e,visualElementStore.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(hasReducedMotionListener.current||initPrefersReducedMotion(),this.shouldReduceMotion=prefersReducedMotion.current),this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),cancelFrame(this.notifyUpdate),cancelFrame(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=transformProps.has(e);i&&this.onBindTransform&&this.onBindTransform();const o=n.on("change",d=>{this.latestValues[e]=d,this.props.onUpdate&&frame.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let u;typeof window<"u"&&window.MotionCheckAppearSync&&(u=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{o(),u&&u(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in featureDefinitions){const n=featureDefinitions[e];if(!n)continue;const{isEnabled:i,Feature:o}=n;if(!this.features[e]&&o&&i(this.props)&&(this.features[e]=new o(this)),this.features[e]){const u=this.features[e];u.isMounted?u.update():(u.mount(),u.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):createBox()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<propEventHandlers.length;i++){const o=propEventHandlers[i];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const u="on"+o,d=e[u];d&&(this.propEventSubscriptions[o]=this.on(o,d))}this.prevMotionValues=updateMotionValuesFromProps(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const i=this.values.get(e);n!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=motionValue(n===null?void 0:n,{owner:this}),this.addValue(e,i)),i}readValue(e,n){let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(isNumericalString(i)||isZeroValueString(i))?i=parseFloat(i):!findValueType(i)&&complex.test(n)&&(i=getAnimatableNone(e,n)),this.setBaseTarget(e,isMotionValue(i)?i.get():i)),isMotionValue(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let i;if(typeof n=="string"||typeof n=="object"){const u=resolveVariantFromProps(this.props,n,this.presenceContext?.custom);u&&(i=u[e])}if(n&&i!==void 0)return i;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!isMotionValue(o)?o:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new SubscriptionManager),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){microtask.render(this.render)}}class DOMVisualElement extends VisualElement{constructor(){super(...arguments),this.KeyframeResolver=DOMKeyframesResolver}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){const i=e.style;return i?i[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;isMotionValue(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class Feature{constructor(e){this.isMounted=!1,this.node=e}update(){}}function convertBoundingBoxToBox({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function convertBoxToBoundingBox({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function transformBoxPoints(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function isIdentityScale(t){return t===void 0||t===1}function hasScale({scale:t,scaleX:e,scaleY:n}){return!isIdentityScale(t)||!isIdentityScale(e)||!isIdentityScale(n)}function hasTransform(t){return hasScale(t)||has2DTranslate(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function has2DTranslate(t){return is2DTranslate(t.x)||is2DTranslate(t.y)}function is2DTranslate(t){return t&&t!=="0%"}function scalePoint(t,e,n){const i=t-n,o=e*i;return n+o}function applyPointDelta(t,e,n,i,o){return o!==void 0&&(t=scalePoint(t,o,i)),scalePoint(t,n,i)+e}function applyAxisDelta(t,e=0,n=1,i,o){t.min=applyPointDelta(t.min,e,n,i,o),t.max=applyPointDelta(t.max,e,n,i,o)}function applyBoxDelta(t,{x:e,y:n}){applyAxisDelta(t.x,e.translate,e.scale,e.originPoint),applyAxisDelta(t.y,n.translate,n.scale,n.originPoint)}const TREE_SCALE_SNAP_MIN=.999999999999,TREE_SCALE_SNAP_MAX=1.0000000000001;function applyTreeDeltas(t,e,n,i=!1){const o=n.length;if(!o)return;e.x=e.y=1;let u,d;for(let h=0;h<o;h++){u=n[h],d=u.projectionDelta;const{visualElement:m}=u.options;m&&m.props.style&&m.props.style.display==="contents"||(i&&u.options.layoutScroll&&u.scroll&&u!==u.root&&transformBox(t,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),d&&(e.x*=d.x.scale,e.y*=d.y.scale,applyBoxDelta(t,d)),i&&hasTransform(u.latestValues)&&transformBox(t,u.latestValues))}e.x<TREE_SCALE_SNAP_MAX&&e.x>TREE_SCALE_SNAP_MIN&&(e.x=1),e.y<TREE_SCALE_SNAP_MAX&&e.y>TREE_SCALE_SNAP_MIN&&(e.y=1)}function translateAxis(t,e){t.min=t.min+e,t.max=t.max+e}function transformAxis(t,e,n,i,o=.5){const u=mixNumber$1(t.min,t.max,o);applyAxisDelta(t,e,n,u,i)}function transformBox(t,e){transformAxis(t.x,e.x,e.scaleX,e.scale,e.originX),transformAxis(t.y,e.y,e.scaleY,e.scale,e.originY)}function measureViewportBox(t,e){return convertBoundingBoxToBox(transformBoxPoints(t.getBoundingClientRect(),e))}function measurePageBox(t,e,n){const i=measureViewportBox(t,n),{scroll:o}=e;return o&&(translateAxis(i.x,o.offset.x),translateAxis(i.y,o.offset.y)),i}const translateAlias={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},numTransforms=transformPropOrder.length;function buildTransform(t,e,n){let i="",o=!0;for(let u=0;u<numTransforms;u++){const d=transformPropOrder[u],h=t[d];if(h===void 0)continue;let m=!0;if(typeof h=="number")m=h===(d.startsWith("scale")?1:0);else{const p=parseFloat(h);m=d.startsWith("scale")?p===1:p===0}if(!m||n){const p=getValueAsType(h,numberValueTypes[d]);if(!m){o=!1;const _=translateAlias[d]||d;i+=`${_}(${p}) `}n&&(e[d]=p)}}return i=i.trim(),n?i=n(e,o?"":i):o&&(i="none"),i}function buildHTMLStyles(t,e,n){const{style:i,vars:o,transformOrigin:u}=t;let d=!1,h=!1;for(const m in e){const p=e[m];if(transformProps.has(m)){d=!0;continue}else if(isCSSVariableName(m)){o[m]=p;continue}else{const _=getValueAsType(p,numberValueTypes[m]);m.startsWith("origin")?(h=!0,u[m]=_):i[m]=_}}if(e.transform||(d||n?i.transform=buildTransform(e,t.transform,n):i.transform&&(i.transform="none")),h){const{originX:m="50%",originY:p="50%",originZ:_=0}=u;i.transformOrigin=`${m} ${p} ${_}`}}function renderHTML(t,{style:e,vars:n},i,o){const u=t.style;let d;for(d in e)u[d]=e[d];o?.applyProjectionStyles(u,i);for(d in n)u.setProperty(d,n[d])}function pixelsToPercent(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const correctBorderRadius={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(px.test(t))t=parseFloat(t);else return t;const n=pixelsToPercent(t,e.target.x),i=pixelsToPercent(t,e.target.y);return`${n}% ${i}%`}},correctBoxShadow={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,o=complex.parse(t);if(o.length>5)return i;const u=complex.createTransformer(t),d=typeof o[0]!="number"?1:0,h=n.x.scale*e.x,m=n.y.scale*e.y;o[0+d]/=h,o[1+d]/=m;const p=mixNumber$1(h,m,.5);return typeof o[2+d]=="number"&&(o[2+d]/=p),typeof o[3+d]=="number"&&(o[3+d]/=p),u(o)}},scaleCorrectors={borderRadius:{...correctBorderRadius,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:correctBorderRadius,borderTopRightRadius:correctBorderRadius,borderBottomLeftRadius:correctBorderRadius,borderBottomRightRadius:correctBorderRadius,boxShadow:correctBoxShadow};function isForcedMotionValue(t,{layout:e,layoutId:n}){return transformProps.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!scaleCorrectors[t]||t==="opacity")}function scrapeMotionValuesFromProps$1(t,e,n){const i=t.style,o=e?.style,u={};if(!i)return u;for(const d in i)(isMotionValue(i[d])||o&&isMotionValue(o[d])||isForcedMotionValue(d,t)||n?.getValue(d)?.liveStyle!==void 0)&&(u[d]=i[d]);return u}function getComputedStyle$1(t){return window.getComputedStyle(t)}class HTMLVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="html",this.renderInstance=renderHTML}readValueFromInstance(e,n){if(transformProps.has(n))return this.projection?.isProjecting?defaultTransformValue(n):readTransformValue(e,n);{const i=getComputedStyle$1(e),o=(isCSSVariableName(n)?i.getPropertyValue(n):i[n])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(e,{transformPagePoint:n}){return measureViewportBox(e,n)}build(e,n,i){buildHTMLStyles(e,n,i.transformTemplate)}scrapeMotionValuesFromProps(e,n,i){return scrapeMotionValuesFromProps$1(e,n,i)}}const dashKeys={offset:"stroke-dashoffset",array:"stroke-dasharray"},camelKeys={offset:"strokeDashoffset",array:"strokeDasharray"};function buildSVGPath(t,e,n=1,i=0,o=!0){t.pathLength=1;const u=o?dashKeys:camelKeys;t[u.offset]=`${-i}`,t[u.array]=`${e} ${n}`}const cssMotionPathProperties=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function buildSVGAttrs(t,{attrX:e,attrY:n,attrScale:i,pathLength:o,pathSpacing:u=1,pathOffset:d=0,...h},m,p,_){if(buildHTMLStyles(t,h,p),m){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:l}=t;f.transform&&(l.transform=f.transform,delete f.transform),(l.transform||f.transformOrigin)&&(l.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),l.transform&&(l.transformBox=_?.transformBox??"fill-box",delete f.transformBox);for(const g of cssMotionPathProperties)f[g]!==void 0&&(l[g]=f[g],delete f[g]);e!==void 0&&(f.x=e),n!==void 0&&(f.y=n),i!==void 0&&(f.scale=i),o!==void 0&&buildSVGPath(f,o,u,d,!1)}const camelCaseAttributes=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),isSVGTag=t=>typeof t=="string"&&t.toLowerCase()==="svg";function renderSVG(t,e,n,i){renderHTML(t,e,void 0,i);for(const o in e.attrs)t.setAttribute(camelCaseAttributes.has(o)?o:camelToDash(o),e.attrs[o])}function scrapeMotionValuesFromProps(t,e,n){const i=scrapeMotionValuesFromProps$1(t,e,n);for(const o in t)if(isMotionValue(t[o])||isMotionValue(e[o])){const u=transformPropOrder.indexOf(o)!==-1?"attr"+o.charAt(0).toUpperCase()+o.substring(1):o;i[u]=t[o]}return i}class SVGVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=createBox}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(transformProps.has(n)){const i=getDefaultValueType(n);return i&&i.default||0}return n=camelCaseAttributes.has(n)?n:camelToDash(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,i){return scrapeMotionValuesFromProps(e,n,i)}build(e,n,i){buildSVGAttrs(e,n,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(e,n,i,o){renderSVG(e,n,i,o)}mount(e){this.isSVGTag=isSVGTag(e.tagName),super.mount(e)}}const numVariantProps=variantProps.length;function getVariantContext(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?getVariantContext(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<numVariantProps;n++){const i=variantProps[n],o=t.props[i];(isVariantLabel(o)||o===!1)&&(e[i]=o)}return e}function shallowCompare(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}const reversePriorityOrder=[...variantPriorityOrder].reverse(),numAnimationTypes=variantPriorityOrder.length;function createAnimateFunction(t){return e=>Promise.all(e.map(({animation:n,options:i})=>animateVisualElement(t,n,i)))}function createAnimationState(t){let e=createAnimateFunction(t),n=createState(),i=!0;const o=m=>(p,_)=>{const f=resolveVariant(t,_,m==="exit"?t.presenceContext?.custom:void 0);if(f){const{transition:l,transitionEnd:g,...v}=f;p={...p,...v,...g}}return p};function u(m){e=m(t)}function d(m){const{props:p}=t,_=getVariantContext(t.parent)||{},f=[],l=new Set;let g={},v=1/0;for(let T=0;T<numAnimationTypes;T++){const E=reversePriorityOrder[T],O=n[E],R=p[E]!==void 0?p[E]:_[E],M=isVariantLabel(R),C=E===m?O.isActive:null;C===!1&&(v=T);let j=R===_[E]&&R!==p[E]&&M;if(j&&i&&t.manuallyAnimateOnMount&&(j=!1),O.protectedKeys={...g},!O.isActive&&C===null||!R&&!O.prevProp||isAnimationControls(R)||typeof R=="boolean")continue;const $=checkVariantsDidChange(O.prevProp,R);let L=$||E===m&&O.isActive&&!j&&M||T>v&&M,N=!1;const B=Array.isArray(R)?R:[R];let U=B.reduce(o(E),{});C===!1&&(U={});const{prevResolvedValues:H={}}=O,Y={...H,...U},K=G=>{L=!0,l.has(G)&&(N=!0,l.delete(G)),O.needsAnimating[G]=!0;const ie=t.getValue(G);ie&&(ie.liveStyle=!1)};for(const G in Y){const ie=U[G],Z=H[G];if(g.hasOwnProperty(G))continue;let te=!1;isKeyframesTarget(ie)&&isKeyframesTarget(Z)?te=!shallowCompare(ie,Z):te=ie!==Z,te?ie!=null?K(G):l.add(G):ie!==void 0&&l.has(G)?K(G):O.protectedKeys[G]=!0}O.prevProp=R,O.prevResolvedValues=U,O.isActive&&(g={...g,...U}),i&&t.blockInitialAnimation&&(L=!1);const z=j&&$;L&&(!z||N)&&f.push(...B.map(G=>{const ie={type:E};if(typeof G=="string"&&i&&!z&&t.manuallyAnimateOnMount&&t.parent){const{parent:Z}=t,te=resolveVariant(Z,G);if(Z.enteringChildren&&te){const{delayChildren:ee}=te.transition||{};ie.delay=calcChildStagger(Z.enteringChildren,t,ee)}}return{animation:G,options:ie}}))}if(l.size){const T={};if(typeof p.initial!="boolean"){const E=resolveVariant(t,Array.isArray(p.initial)?p.initial[0]:p.initial);E&&E.transition&&(T.transition=E.transition)}l.forEach(E=>{const O=t.getBaseTarget(E),R=t.getValue(E);R&&(R.liveStyle=!0),T[E]=O??null}),f.push({animation:T})}let S=!!f.length;return i&&(p.initial===!1||p.initial===p.animate)&&!t.manuallyAnimateOnMount&&(S=!1),i=!1,S?e(f):Promise.resolve()}function h(m,p){if(n[m].isActive===p)return Promise.resolve();t.variantChildren?.forEach(f=>f.animationState?.setActive(m,p)),n[m].isActive=p;const _=d(m);for(const f in n)n[f].protectedKeys={};return _}return{animateChanges:d,setActive:h,setAnimateFunction:u,getState:()=>n,reset:()=>{n=createState()}}}function checkVariantsDidChange(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!shallowCompare(e,t):!1}function createTypeState(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function createState(){return{animate:createTypeState(!0),whileInView:createTypeState(),whileHover:createTypeState(),whileTap:createTypeState(),whileDrag:createTypeState(),whileFocus:createTypeState(),exit:createTypeState()}}function copyAxisInto(t,e){t.min=e.min,t.max=e.max}function copyBoxInto(t,e){copyAxisInto(t.x,e.x),copyAxisInto(t.y,e.y)}function copyAxisDeltaInto(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}const SCALE_PRECISION=1e-4,SCALE_MIN=1-SCALE_PRECISION,SCALE_MAX=1+SCALE_PRECISION,TRANSLATE_PRECISION=.01,TRANSLATE_MIN=0-TRANSLATE_PRECISION,TRANSLATE_MAX=0+TRANSLATE_PRECISION;function calcLength(t){return t.max-t.min}function isNear(t,e,n){return Math.abs(t-e)<=n}function calcAxisDelta(t,e,n,i=.5){t.origin=i,t.originPoint=mixNumber$1(e.min,e.max,t.origin),t.scale=calcLength(n)/calcLength(e),t.translate=mixNumber$1(n.min,n.max,t.origin)-t.originPoint,(t.scale>=SCALE_MIN&&t.scale<=SCALE_MAX||isNaN(t.scale))&&(t.scale=1),(t.translate>=TRANSLATE_MIN&&t.translate<=TRANSLATE_MAX||isNaN(t.translate))&&(t.translate=0)}function calcBoxDelta(t,e,n,i){calcAxisDelta(t.x,e.x,n.x,i?i.originX:void 0),calcAxisDelta(t.y,e.y,n.y,i?i.originY:void 0)}function calcRelativeAxis(t,e,n){t.min=n.min+e.min,t.max=t.min+calcLength(e)}function calcRelativeBox(t,e,n){calcRelativeAxis(t.x,e.x,n.x),calcRelativeAxis(t.y,e.y,n.y)}function calcRelativeAxisPosition(t,e,n){t.min=e.min-n.min,t.max=t.min+calcLength(e)}function calcRelativePosition(t,e,n){calcRelativeAxisPosition(t.x,e.x,n.x),calcRelativeAxisPosition(t.y,e.y,n.y)}function removePointDelta(t,e,n,i,o){return t-=e,t=scalePoint(t,1/n,i),o!==void 0&&(t=scalePoint(t,1/o,i)),t}function removeAxisDelta(t,e=0,n=1,i=.5,o,u=t,d=t){if(percent.test(e)&&(e=parseFloat(e),e=mixNumber$1(d.min,d.max,e/100)-d.min),typeof e!="number")return;let h=mixNumber$1(u.min,u.max,i);t===u&&(h-=e),t.min=removePointDelta(t.min,e,n,h,o),t.max=removePointDelta(t.max,e,n,h,o)}function removeAxisTransforms(t,e,[n,i,o],u,d){removeAxisDelta(t,e[n],e[i],e[o],e.scale,u,d)}const xKeys=["x","scaleX","originX"],yKeys=["y","scaleY","originY"];function removeBoxTransforms(t,e,n,i){removeAxisTransforms(t.x,e,xKeys,n?n.x:void 0,i?i.x:void 0),removeAxisTransforms(t.y,e,yKeys,n?n.y:void 0,i?i.y:void 0)}function isAxisDeltaZero(t){return t.translate===0&&t.scale===1}function isDeltaZero(t){return isAxisDeltaZero(t.x)&&isAxisDeltaZero(t.y)}function axisEquals(t,e){return t.min===e.min&&t.max===e.max}function boxEquals(t,e){return axisEquals(t.x,e.x)&&axisEquals(t.y,e.y)}function axisEqualsRounded(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function boxEqualsRounded(t,e){return axisEqualsRounded(t.x,e.x)&&axisEqualsRounded(t.y,e.y)}function aspectRatio(t){return calcLength(t.x)/calcLength(t.y)}function axisDeltaEquals(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}function eachAxis(t){return[t("x"),t("y")]}function buildProjectionTransform(t,e,n){let i="";const o=t.x.translate/e.x,u=t.y.translate/e.y,d=n?.z||0;if((o||u||d)&&(i=`translate3d(${o}px, ${u}px, ${d}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:p,rotate:_,rotateX:f,rotateY:l,skewX:g,skewY:v}=n;p&&(i=`perspective(${p}px) ${i}`),_&&(i+=`rotate(${_}deg) `),f&&(i+=`rotateX(${f}deg) `),l&&(i+=`rotateY(${l}deg) `),g&&(i+=`skewX(${g}deg) `),v&&(i+=`skewY(${v}deg) `)}const h=t.x.scale*e.x,m=t.y.scale*e.y;return(h!==1||m!==1)&&(i+=`scale(${h}, ${m})`),i||"none"}const borders=["TopLeft","TopRight","BottomLeft","BottomRight"],numBorders=borders.length,asNumber=t=>typeof t=="string"?parseFloat(t):t,isPx=t=>typeof t=="number"||px.test(t);function mixValues(t,e,n,i,o,u){o?(t.opacity=mixNumber$1(0,n.opacity??1,easeCrossfadeIn(i)),t.opacityExit=mixNumber$1(e.opacity??1,0,easeCrossfadeOut(i))):u&&(t.opacity=mixNumber$1(e.opacity??1,n.opacity??1,i));for(let d=0;d<numBorders;d++){const h=`border${borders[d]}Radius`;let m=getRadius(e,h),p=getRadius(n,h);if(m===void 0&&p===void 0)continue;m||(m=0),p||(p=0),m===0||p===0||isPx(m)===isPx(p)?(t[h]=Math.max(mixNumber$1(asNumber(m),asNumber(p),i),0),(percent.test(p)||percent.test(m))&&(t[h]+="%")):t[h]=p}(e.rotate||n.rotate)&&(t.rotate=mixNumber$1(e.rotate||0,n.rotate||0,i))}function getRadius(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const easeCrossfadeIn=compress(0,.5,circOut),easeCrossfadeOut=compress(.5,.95,noop$2);function compress(t,e,n){return i=>i<t?0:i>e?1:n(progress(t,e,i))}function animateSingleValue(t,e,n){const i=isMotionValue(t)?t:motionValue(t);return i.start(animateMotionValue("",i,e,n)),i.animation}function addDomEvent(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}const compareByDepth=(t,e)=>t.depth-e.depth;class FlatTree{constructor(){this.children=[],this.isDirty=!1}add(e){addUniqueItem(this.children,e),this.isDirty=!0}remove(e){removeItem(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(compareByDepth),this.isDirty=!1,this.children.forEach(e)}}function delay(t,e){const n=time.now(),i=({timestamp:o})=>{const u=o-n;u>=e&&(cancelFrame(i),t(u-e))};return frame.setup(i,!0),()=>cancelFrame(i)}function resolveMotionValue(t){return isMotionValue(t)?t.get():t}class NodeStack{constructor(){this.members=[]}add(e){addUniqueItem(this.members,e),e.scheduleRender()}remove(e){if(removeItem(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(o=>e===o);if(n===0)return!1;let i;for(let o=n;o>=0;o--){const u=this.members[o];if(u.isPresent!==!1){i=u;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender();const o=i.options.layoutDependency,u=e.options.layoutDependency;o!==void 0&&u!==void 0&&o===u||(e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0));const{crossfade:h}=e.options;h===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const globalProjectionState={hasAnimatedSinceResize:!0,hasEverUpdated:!1},transformAxes=["","X","Y","Z"],animationTarget=1e3;let id$1=0;function resetDistortingTransform(t,e,n,i){const{latestValues:o}=e;o[t]&&(n[t]=o[t],e.setStaticValue(t,0),i&&(i[t]=0))}function cancelTreeOptimisedTransformAnimations(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=getOptimisedAppearId(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:o,layoutId:u}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",frame,!(o||u))}const{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(i)}function createProjectionNode$1({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:o}){return class{constructor(d={},h=e?.()){this.id=id$1++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(propagateDirtyNodes),this.nodes.forEach(resolveTargetDelta),this.nodes.forEach(calcProjection),this.nodes.forEach(cleanDirtyNodes)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=d,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let m=0;m<this.path.length;m++)this.path[m].shouldResetTransform=!0;this.root===this&&(this.nodes=new FlatTree)}addEventListener(d,h){return this.eventHandlers.has(d)||this.eventHandlers.set(d,new SubscriptionManager),this.eventHandlers.get(d).add(h)}notifyListeners(d,...h){const m=this.eventHandlers.get(d);m&&m.notify(...h)}hasListeners(d){return this.eventHandlers.has(d)}mount(d){if(this.instance)return;this.isSVG=isSVGElement(d)&&!isSVGSVGElement(d),this.instance=d;const{layoutId:h,layout:m,visualElement:p}=this.options;if(p&&!p.current&&p.mount(d),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(m||h)&&(this.isLayoutDirty=!0),t){let _,f=0;const l=()=>this.root.updateBlockedByResize=!1;frame.read(()=>{f=window.innerWidth}),t(d,()=>{const g=window.innerWidth;g!==f&&(f=g,this.root.updateBlockedByResize=!0,_&&_(),_=delay(l,250),globalProjectionState.hasAnimatedSinceResize&&(globalProjectionState.hasAnimatedSinceResize=!1,this.nodes.forEach(finishAnimation)))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&p&&(h||m)&&this.addEventListener("didUpdate",({delta:_,hasLayoutChanged:f,hasRelativeLayoutChanged:l,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||p.getDefaultTransition()||defaultLayoutTransition,{onLayoutAnimationStart:S,onLayoutAnimationComplete:T}=p.getProps(),E=!this.targetLayout||!boxEqualsRounded(this.targetLayout,g),O=!f&&l;if(this.options.layoutRoot||this.resumeFrom||O||f&&(E||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const R={...getValueTransition(v,"layout"),onPlay:S,onComplete:T};(p.shouldReduceMotion||this.options.layoutRoot)&&(R.delay=0,R.type=!1),this.startAnimation(R),this.setAnimationOrigin(_,O)}else f||finishAnimation(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const d=this.getStack();d&&d.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),cancelFrame(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(resetSkewAndRotation),this.animationId++)}getTransformTemplate(){const{visualElement:d}=this.options;return d&&d.getProps().transformTemplate}willUpdate(d=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let _=0;_<this.path.length;_++){const f=this.path[_];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:h,layout:m}=this.options;if(h===void 0&&!m)return;const p=this.getTransformTemplate();this.prevTransformTemplateValue=p?p(this.latestValues,""):void 0,this.updateSnapshot(),d&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(clearMeasurements);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(clearIsLayoutDirty);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(resetTransformStyle),this.nodes.forEach(updateLayout),this.nodes.forEach(notifyLayoutUpdate)):this.nodes.forEach(clearIsLayoutDirty),this.clearAllSnapshots();const h=time.now();frameData.delta=clamp(0,1e3/60,h-frameData.timestamp),frameData.timestamp=h,frameData.isProcessing=!0,frameSteps.update.process(frameData),frameSteps.preRender.process(frameData),frameSteps.render.process(frameData),frameData.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,microtask.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(clearSnapshot),this.sharedNodes.forEach(removeLeadSnapshots)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,frame.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){frame.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!calcLength(this.snapshot.measuredBox.x)&&!calcLength(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let m=0;m<this.path.length;m++)this.path[m].updateScroll();const d=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=createBox(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,d?d.layoutBox:void 0)}updateScroll(d="measure"){let h=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===d&&(h=!1),h&&this.instance){const m=i(this.instance);this.scroll={animationId:this.root.animationId,phase:d,isRoot:m,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:m}}}resetTransform(){if(!o)return;const d=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,h=this.projectionDelta&&!isDeltaZero(this.projectionDelta),m=this.getTransformTemplate(),p=m?m(this.latestValues,""):void 0,_=p!==this.prevTransformTemplateValue;d&&this.instance&&(h||hasTransform(this.latestValues)||_)&&(o(this.instance,p),this.shouldResetTransform=!1,this.scheduleRender())}measure(d=!0){const h=this.measurePageBox();let m=this.removeElementScroll(h);return d&&(m=this.removeTransform(m)),roundBox(m),{animationId:this.root.animationId,measuredBox:h,layoutBox:m,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:d}=this.options;if(!d)return createBox();const h=d.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(checkNodeWasScrollRoot))){const{scroll:p}=this.root;p&&(translateAxis(h.x,p.offset.x),translateAxis(h.y,p.offset.y))}return h}removeElementScroll(d){const h=createBox();if(copyBoxInto(h,d),this.scroll?.wasRoot)return h;for(let m=0;m<this.path.length;m++){const p=this.path[m],{scroll:_,options:f}=p;p!==this.root&&_&&f.layoutScroll&&(_.wasRoot&&copyBoxInto(h,d),translateAxis(h.x,_.offset.x),translateAxis(h.y,_.offset.y))}return h}applyTransform(d,h=!1){const m=createBox();copyBoxInto(m,d);for(let p=0;p<this.path.length;p++){const _=this.path[p];!h&&_.options.layoutScroll&&_.scroll&&_!==_.root&&transformBox(m,{x:-_.scroll.offset.x,y:-_.scroll.offset.y}),hasTransform(_.latestValues)&&transformBox(m,_.latestValues)}return hasTransform(this.latestValues)&&transformBox(m,this.latestValues),m}removeTransform(d){const h=createBox();copyBoxInto(h,d);for(let m=0;m<this.path.length;m++){const p=this.path[m];if(!p.instance||!hasTransform(p.latestValues))continue;hasScale(p.latestValues)&&p.updateSnapshot();const _=createBox(),f=p.measurePageBox();copyBoxInto(_,f),removeBoxTransforms(h,p.latestValues,p.snapshot?p.snapshot.layoutBox:void 0,_)}return hasTransform(this.latestValues)&&removeBoxTransforms(h,this.latestValues),h}setTargetDelta(d){this.targetDelta=d,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(d){this.options={...this.options,...d,crossfade:d.crossfade!==void 0?d.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==frameData.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(d=!1){const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const m=!!this.resumingFrom||this!==h;if(!(d||m&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:_,layoutId:f}=this.options;if(!this.layout||!(_||f))return;this.resolvedRelativeTargetAt=frameData.timestamp;const l=this.getClosestProjectingParent();l&&this.linkedParentVersion!==l.layoutVersion&&!l.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(l&&l.layout?this.createRelativeTarget(l,this.layout.layoutBox,l.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=createBox(),this.targetWithTransforms=createBox()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),calcRelativeBox(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):copyBoxInto(this.target,this.layout.layoutBox),applyBoxDelta(this.target,this.targetDelta)):copyBoxInto(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,l&&!!l.resumingFrom==!!this.resumingFrom&&!l.options.layoutScroll&&l.target&&this.animationProgress!==1?this.createRelativeTarget(l,this.target,l.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||hasScale(this.parent.latestValues)||has2DTranslate(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(d,h,m){this.relativeParent=d,this.linkedParentVersion=d.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,h,m),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const d=this.getLead(),h=!!this.resumingFrom||this!==d;let m=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(m=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(m=!1),this.resolvedRelativeTargetAt===frameData.timestamp&&(m=!1),m)return;const{layout:p,layoutId:_}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||_))return;copyBoxInto(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,l=this.treeScale.y;applyTreeDeltas(this.layoutCorrected,this.treeScale,this.path,h),d.layout&&!d.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(d.target=d.layout.layoutBox,d.targetWithTransforms=createBox());const{target:g}=d;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(copyAxisDeltaInto(this.prevProjectionDelta.x,this.projectionDelta.x),copyAxisDeltaInto(this.prevProjectionDelta.y,this.projectionDelta.y)),calcBoxDelta(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==l||!axisDeltaEquals(this.projectionDelta.x,this.prevProjectionDelta.x)||!axisDeltaEquals(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(d=!0){if(this.options.visualElement?.scheduleRender(),d){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=createDelta(),this.projectionDelta=createDelta(),this.projectionDeltaWithTransform=createDelta()}setAnimationOrigin(d,h=!1){const m=this.snapshot,p=m?m.latestValues:{},_={...this.latestValues},f=createDelta();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const l=createBox(),g=m?m.source:void 0,v=this.layout?this.layout.source:void 0,S=g!==v,T=this.getStack(),E=!T||T.members.length<=1,O=!!(S&&!E&&this.options.crossfade===!0&&!this.path.some(hasOpacityCrossfade));this.animationProgress=0;let R;this.mixTargetDelta=M=>{const C=M/1e3;mixAxisDelta(f.x,d.x,C),mixAxisDelta(f.y,d.y,C),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(calcRelativePosition(l,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mixBox(this.relativeTarget,this.relativeTargetOrigin,l,C),R&&boxEquals(this.relativeTarget,R)&&(this.isProjectionDirty=!1),R||(R=createBox()),copyBoxInto(R,this.relativeTarget)),S&&(this.animationValues=_,mixValues(_,p,this.latestValues,C,O,E)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=C},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(d){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(cancelFrame(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=frame.update(()=>{globalProjectionState.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=motionValue(0)),this.currentAnimation=animateSingleValue(this.motionValue,[0,1e3],{...d,velocity:0,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),d.onUpdate&&d.onUpdate(h)},onStop:()=>{},onComplete:()=>{d.onComplete&&d.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const d=this.getStack();d&&d.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(animationTarget),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const d=this.getLead();let{targetWithTransforms:h,target:m,layout:p,latestValues:_}=d;if(!(!h||!m||!p)){if(this!==d&&this.layout&&p&&shouldAnimatePositionOnly(this.options.animationType,this.layout.layoutBox,p.layoutBox)){m=this.target||createBox();const f=calcLength(this.layout.layoutBox.x);m.x.min=d.target.x.min,m.x.max=m.x.min+f;const l=calcLength(this.layout.layoutBox.y);m.y.min=d.target.y.min,m.y.max=m.y.min+l}copyBoxInto(h,m),transformBox(h,_),calcBoxDelta(this.projectionDeltaWithTransform,this.layoutCorrected,h,_)}}registerSharedNode(d,h){this.sharedNodes.has(d)||this.sharedNodes.set(d,new NodeStack),this.sharedNodes.get(d).add(h);const p=h.options.initialPromotionConfig;h.promote({transition:p?p.transition:void 0,preserveFollowOpacity:p&&p.shouldPreserveFollowOpacity?p.shouldPreserveFollowOpacity(h):void 0})}isLead(){const d=this.getStack();return d?d.lead===this:!0}getLead(){const{layoutId:d}=this.options;return d?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:d}=this.options;return d?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:d}=this.options;if(d)return this.root.sharedNodes.get(d)}promote({needsReset:d,transition:h,preserveFollowOpacity:m}={}){const p=this.getStack();p&&p.promote(this,m),d&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const d=this.getStack();return d?d.relegate(this):!1}resetSkewAndRotation(){const{visualElement:d}=this.options;if(!d)return;let h=!1;const{latestValues:m}=d;if((m.z||m.rotate||m.rotateX||m.rotateY||m.rotateZ||m.skewX||m.skewY)&&(h=!0),!h)return;const p={};m.z&&resetDistortingTransform("z",d,p,this.animationValues);for(let _=0;_<transformAxes.length;_++)resetDistortingTransform(`rotate${transformAxes[_]}`,d,p,this.animationValues),resetDistortingTransform(`skew${transformAxes[_]}`,d,p,this.animationValues);d.render();for(const _ in p)d.setStaticValue(_,p[_]),this.animationValues&&(this.animationValues[_]=p[_]);d.scheduleRender()}applyProjectionStyles(d,h){if(!this.instance||this.isSVG)return;if(!this.isVisible){d.visibility="hidden";return}const m=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,d.visibility="",d.opacity="",d.pointerEvents=resolveMotionValue(h?.pointerEvents)||"",d.transform=m?m(this.latestValues,""):"none";return}const p=this.getLead();if(!this.projectionDelta||!this.layout||!p.target){this.options.layoutId&&(d.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,d.pointerEvents=resolveMotionValue(h?.pointerEvents)||""),this.hasProjected&&!hasTransform(this.latestValues)&&(d.transform=m?m({},""):"none",this.hasProjected=!1);return}d.visibility="";const _=p.animationValues||p.latestValues;this.applyTransformsToTarget();let f=buildProjectionTransform(this.projectionDeltaWithTransform,this.treeScale,_);m&&(f=m(_,f)),d.transform=f;const{x:l,y:g}=this.projectionDelta;d.transformOrigin=`${l.origin*100}% ${g.origin*100}% 0`,p.animationValues?d.opacity=p===this?_.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:_.opacityExit:d.opacity=p===this?_.opacity!==void 0?_.opacity:"":_.opacityExit!==void 0?_.opacityExit:0;for(const v in scaleCorrectors){if(_[v]===void 0)continue;const{correct:S,applyTo:T,isCSSVariable:E}=scaleCorrectors[v],O=f==="none"?_[v]:S(_[v],p);if(T){const R=T.length;for(let M=0;M<R;M++)d[T[M]]=O}else E?this.options.visualElement.renderState.vars[v]=O:d[v]=O}this.options.layoutId&&(d.pointerEvents=p===this?resolveMotionValue(h?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(d=>d.currentAnimation?.stop()),this.root.nodes.forEach(clearMeasurements),this.root.sharedNodes.clear()}}}function updateLayout(t){t.updateLayout()}function notifyLayoutUpdate(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:i}=t.layout,{animationType:o}=t.options,u=e.source!==t.layout.source;o==="size"?eachAxis(_=>{const f=u?e.measuredBox[_]:e.layoutBox[_],l=calcLength(f);f.min=n[_].min,f.max=f.min+l}):shouldAnimatePositionOnly(o,e.layoutBox,n)&&eachAxis(_=>{const f=u?e.measuredBox[_]:e.layoutBox[_],l=calcLength(n[_]);f.max=f.min+l,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[_].max=t.relativeTarget[_].min+l)});const d=createDelta();calcBoxDelta(d,n,e.layoutBox);const h=createDelta();u?calcBoxDelta(h,t.applyTransform(i,!0),e.measuredBox):calcBoxDelta(h,n,e.layoutBox);const m=!isDeltaZero(d);let p=!1;if(!t.resumeFrom){const _=t.getClosestProjectingParent();if(_&&!_.resumeFrom){const{snapshot:f,layout:l}=_;if(f&&l){const g=createBox();calcRelativePosition(g,e.layoutBox,f.layoutBox);const v=createBox();calcRelativePosition(v,n,l.layoutBox),boxEqualsRounded(g,v)||(p=!0),_.options.layoutRoot&&(t.relativeTarget=v,t.relativeTargetOrigin=g,t.relativeParent=_)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:h,layoutDelta:d,hasLayoutChanged:m,hasRelativeLayoutChanged:p})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function propagateDirtyNodes(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function cleanDirtyNodes(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function clearSnapshot(t){t.clearSnapshot()}function clearMeasurements(t){t.clearMeasurements()}function clearIsLayoutDirty(t){t.isLayoutDirty=!1}function resetTransformStyle(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function finishAnimation(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function resolveTargetDelta(t){t.resolveTargetDelta()}function calcProjection(t){t.calcProjection()}function resetSkewAndRotation(t){t.resetSkewAndRotation()}function removeLeadSnapshots(t){t.removeLeadSnapshot()}function mixAxisDelta(t,e,n){t.translate=mixNumber$1(e.translate,0,n),t.scale=mixNumber$1(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function mixAxis(t,e,n,i){t.min=mixNumber$1(e.min,n.min,i),t.max=mixNumber$1(e.max,n.max,i)}function mixBox(t,e,n,i){mixAxis(t.x,e.x,n.x,i),mixAxis(t.y,e.y,n.y,i)}function hasOpacityCrossfade(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const defaultLayoutTransition={duration:.45,ease:[.4,0,.1,1]},userAgentContains=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),roundPoint=userAgentContains("applewebkit/")&&!userAgentContains("chrome/")?Math.round:noop$2;function roundAxis(t){t.min=roundPoint(t.min),t.max=roundPoint(t.max)}function roundBox(t){roundAxis(t.x),roundAxis(t.y)}function shouldAnimatePositionOnly(t,e,n){return t==="position"||t==="preserve-aspect"&&!isNear(aspectRatio(e),aspectRatio(n),.2)}function checkNodeWasScrollRoot(t){return t!==t.root&&t.scroll?.wasRoot}const DocumentProjectionNode=createProjectionNode$1({attachResizeListener:(t,e)=>addDomEvent(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body?.scrollLeft||0,y:document.documentElement.scrollTop||document.body?.scrollTop||0}),checkIsScrollRoot:()=>!0}),rootProjectionNode={current:void 0},HTMLProjectionNode=createProjectionNode$1({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!rootProjectionNode.current){const t=new DocumentProjectionNode({});t.mount(window),t.setOptions({layoutScroll:!0}),rootProjectionNode.current=t}return rootProjectionNode.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),MotionConfigContext=reactExports.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function usePresence(t=!0){const e=reactExports.useContext(PresenceContext);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:o}=e,u=reactExports.useId();reactExports.useEffect(()=>{if(t)return o(u)},[t]);const d=reactExports.useCallback(()=>t&&i&&i(u),[u,i,t]);return!n&&i?[!1,d]:[!0]}const LazyContext=reactExports.createContext({strict:!1}),featureProps={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let isInitialized=!1;function initFeatureDefinitions(){if(isInitialized)return;const t={};for(const e in featureProps)t[e]={isEnabled:n=>featureProps[e].some(i=>!!n[i])};setFeatureDefinitions(t),isInitialized=!0}function getInitializedFeatureDefinitions(){return initFeatureDefinitions(),getFeatureDefinitions()}function loadFeatures(t){const e=getInitializedFeatureDefinitions();for(const n in t)e[n]={...e[n],...t[n]};setFeatureDefinitions(e)}const validMotionProps=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function isValidMotionProp(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||validMotionProps.has(t)}let shouldForward=t=>!isValidMotionProp(t);function loadExternalIsValidProp(t){typeof t=="function"&&(shouldForward=e=>e.startsWith("on")?!isValidMotionProp(e):t(e))}try{loadExternalIsValidProp(require("@emotion/is-prop-valid").default)}catch{}function filterProps(t,e,n){const i={};for(const o in t)o==="values"&&typeof t.values=="object"||(shouldForward(o)||n===!0&&isValidMotionProp(o)||!e&&!isValidMotionProp(o)||t.draggable&&o.startsWith("onDrag"))&&(i[o]=t[o]);return i}const MotionContext=reactExports.createContext({});function getCurrentTreeVariants(t,e){if(isControllingVariants(t)){const{initial:n,animate:i}=t;return{initial:n===!1||isVariantLabel(n)?n:void 0,animate:isVariantLabel(i)?i:void 0}}return t.inherit!==!1?e:{}}function useCreateMotionContext(t){const{initial:e,animate:n}=getCurrentTreeVariants(t,reactExports.useContext(MotionContext));return reactExports.useMemo(()=>({initial:e,animate:n}),[variantLabelsAsDependency(e),variantLabelsAsDependency(n)])}function variantLabelsAsDependency(t){return Array.isArray(t)?t.join(" "):t}const createHtmlRenderState=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function copyRawValuesOnly(t,e,n){for(const i in e)!isMotionValue(e[i])&&!isForcedMotionValue(i,n)&&(t[i]=e[i])}function useInitialMotionValues({transformTemplate:t},e){return reactExports.useMemo(()=>{const n=createHtmlRenderState();return buildHTMLStyles(n,e,t),Object.assign({},n.vars,n.style)},[e])}function useStyle(t,e){const n=t.style||{},i={};return copyRawValuesOnly(i,n,t),Object.assign(i,useInitialMotionValues(t,e)),i}function useHTMLProps(t,e){const n={},i=useStyle(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=i,n}const createSvgRenderState=()=>({...createHtmlRenderState(),attrs:{}});function useSVGProps(t,e,n,i){const o=reactExports.useMemo(()=>{const u=createSvgRenderState();return buildSVGAttrs(u,e,isSVGTag(i),t.transformTemplate,t.style),{...u.attrs,style:{...u.style}}},[e]);if(t.style){const u={};copyRawValuesOnly(u,t.style,t),o.style={...u,...o.style}}return o}const lowercaseSVGElements=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function isSVGComponent(t){return typeof t!="string"||t.includes("-")?!1:!!(lowercaseSVGElements.indexOf(t)>-1||/[A-Z]/u.test(t))}function useRender(t,e,n,{latestValues:i},o,u=!1,d){const m=(d??isSVGComponent(t)?useSVGProps:useHTMLProps)(e,i,o,t),p=filterProps(e,typeof t=="string",u),_=t!==reactExports.Fragment?{...p,...m,ref:n}:{},{children:f}=e,l=reactExports.useMemo(()=>isMotionValue(f)?f.get():f,[f]);return reactExports.createElement(t,{..._,children:l})}function makeState({scrapeMotionValuesFromProps:t,createRenderState:e},n,i,o){return{latestValues:makeLatestValues(n,i,o,t),renderState:e()}}function makeLatestValues(t,e,n,i){const o={},u=i(t,{});for(const l in u)o[l]=resolveMotionValue(u[l]);let{initial:d,animate:h}=t;const m=isControllingVariants(t),p=isVariantNode(t);e&&p&&!m&&t.inherit!==!1&&(d===void 0&&(d=e.initial),h===void 0&&(h=e.animate));let _=n?n.initial===!1:!1;_=_||d===!1;const f=_?h:d;if(f&&typeof f!="boolean"&&!isAnimationControls(f)){const l=Array.isArray(f)?f:[f];for(let g=0;g<l.length;g++){const v=resolveVariantFromProps(t,l[g]);if(v){const{transitionEnd:S,transition:T,...E}=v;for(const O in E){let R=E[O];if(Array.isArray(R)){const M=_?R.length-1:0;R=R[M]}R!==null&&(o[O]=R)}for(const O in S)o[O]=S[O]}}}return o}const makeUseVisualState=t=>(e,n)=>{const i=reactExports.useContext(MotionContext),o=reactExports.useContext(PresenceContext),u=()=>makeState(t,e,i,o);return n?u():useConstant(u)},useHTMLVisualState=makeUseVisualState({scrapeMotionValuesFromProps:scrapeMotionValuesFromProps$1,createRenderState:createHtmlRenderState}),useSVGVisualState=makeUseVisualState({scrapeMotionValuesFromProps,createRenderState:createSvgRenderState}),motionComponentSymbol=Symbol.for("motionComponentSymbol");function useMotionRef(t,e,n){const i=reactExports.useRef(n);reactExports.useInsertionEffect(()=>{i.current=n});const o=reactExports.useRef(null);return reactExports.useCallback(u=>{u&&t.onMount?.(u),e&&(u?e.mount(u):e.unmount());const d=i.current;if(typeof d=="function")if(u){const h=d(u);typeof h=="function"&&(o.current=h)}else o.current?(o.current(),o.current=null):d(u);else d&&(d.current=u)},[e])}const SwitchLayoutGroupContext=reactExports.createContext({});function isRefObject(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function useVisualElement(t,e,n,i,o,u){const{visualElement:d}=reactExports.useContext(MotionContext),h=reactExports.useContext(LazyContext),m=reactExports.useContext(PresenceContext),p=reactExports.useContext(MotionConfigContext).reducedMotion,_=reactExports.useRef(null),f=reactExports.useRef(!1);i=i||h.renderer,!_.current&&i&&(_.current=i(t,{visualState:e,parent:d,props:n,presenceContext:m,blockInitialAnimation:m?m.initial===!1:!1,reducedMotionConfig:p,isSVG:u}),f.current&&_.current&&(_.current.manuallyAnimateOnMount=!0));const l=_.current,g=reactExports.useContext(SwitchLayoutGroupContext);l&&!l.projection&&o&&(l.type==="html"||l.type==="svg")&&createProjectionNode(_.current,n,o,g);const v=reactExports.useRef(!1);reactExports.useInsertionEffect(()=>{l&&v.current&&l.update(n,m)});const S=n[optimizedAppearDataAttribute],T=reactExports.useRef(!!S&&!window.MotionHandoffIsComplete?.(S)&&window.MotionHasOptimisedAnimation?.(S));return useIsomorphicLayoutEffect(()=>{f.current=!0,l&&(v.current=!0,window.MotionIsMounted=!0,l.updateFeatures(),l.scheduleRenderMicrotask(),T.current&&l.animationState&&l.animationState.animateChanges())}),reactExports.useEffect(()=>{l&&(!T.current&&l.animationState&&l.animationState.animateChanges(),T.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(S)}),T.current=!1),l.enteringChildren=void 0)}),l}function createProjectionNode(t,e,n,i){const{layoutId:o,layout:u,drag:d,dragConstraints:h,layoutScroll:m,layoutRoot:p,layoutCrossfade:_}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:getClosestProjectingNode(t.parent)),t.projection.setOptions({layoutId:o,layout:u,alwaysMeasureLayout:!!d||h&&isRefObject(h),visualElement:t,animationType:typeof u=="string"?u:"both",initialPromotionConfig:i,crossfade:_,layoutScroll:m,layoutRoot:p})}function getClosestProjectingNode(t){if(t)return t.options.allowProjection!==!1?t.projection:getClosestProjectingNode(t.parent)}function createMotionComponent(t,{forwardMotionProps:e=!1,type:n}={},i,o){i&&loadFeatures(i);const u=n?n==="svg":isSVGComponent(t),d=u?useSVGVisualState:useHTMLVisualState;function h(p,_){let f;const l={...reactExports.useContext(MotionConfigContext),...p,layoutId:useLayoutId(p)},{isStatic:g}=l,v=useCreateMotionContext(p),S=d(p,g);if(!g&&isBrowser$2){useStrictMode();const T=getProjectionFunctionality(l);f=T.MeasureLayout,v.visualElement=useVisualElement(t,S,l,o,T.ProjectionNode,u)}return jsxRuntimeExports.jsxs(MotionContext.Provider,{value:v,children:[f&&v.visualElement?jsxRuntimeExports.jsx(f,{visualElement:v.visualElement,...l}):null,useRender(t,p,useMotionRef(S,v.visualElement,_),S,g,e,u)]})}h.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const m=reactExports.forwardRef(h);return m[motionComponentSymbol]=t,m}function useLayoutId({layoutId:t}){const e=reactExports.useContext(LayoutGroupContext).id;return e&&t!==void 0?e+"-"+t:t}function useStrictMode(t,e){reactExports.useContext(LazyContext).strict}function getProjectionFunctionality(t){const e=getInitializedFeatureDefinitions(),{drag:n,layout:i}=e;if(!n&&!i)return{};const o={...n,...i};return{MeasureLayout:n?.isEnabled(t)||i?.isEnabled(t)?o.MeasureLayout:void 0,ProjectionNode:o.ProjectionNode}}function createMotionProxy(t,e){if(typeof Proxy>"u")return createMotionComponent;const n=new Map,i=(u,d)=>createMotionComponent(u,d,t,e),o=(u,d)=>i(u,d);return new Proxy(o,{get:(u,d)=>d==="create"?i:(n.has(d)||n.set(d,createMotionComponent(d,void 0,t,e)),n.get(d))})}const createDomVisualElement=(t,e)=>e.isSVG??isSVGComponent(t)?new SVGVisualElement(e):new HTMLVisualElement(e,{allowProjection:t!==reactExports.Fragment});class AnimationFeature extends Feature{constructor(e){super(e),e.animationState||(e.animationState=createAnimationState(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();isAnimationControls(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let id=0;class ExitAnimationFeature extends Feature{constructor(){super(...arguments),this.id=id++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const o=this.node.animationState.setActive("exit",!e);n&&!e&&o.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const animations={animation:{Feature:AnimationFeature},exit:{Feature:ExitAnimationFeature}};function extractEventInfo(t){return{point:{x:t.pageX,y:t.pageY}}}const addPointerInfo=t=>e=>isPrimaryPointer(e)&&t(e,extractEventInfo(e));function addPointerEvent(t,e,n,i){return addDomEvent(t,e,addPointerInfo(n),i)}const getContextWindow=({current:t})=>t?t.ownerDocument.defaultView:null,distance=(t,e)=>Math.abs(t-e);function distance2D(t,e){const n=distance(t.x,e.x),i=distance(t.y,e.y);return Math.sqrt(n**2+i**2)}const overflowStyles=new Set(["auto","scroll"]);class PanSession{constructor(e,n,{transformPagePoint:i,contextWindow:o=window,dragSnapToOrigin:u=!1,distanceThreshold:d=3,element:h}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=g=>{this.handleScroll(g.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=getPanInfo(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,S=distance2D(g.offset,{x:0,y:0})>=this.distanceThreshold;if(!v&&!S)return;const{point:T}=g,{timestamp:E}=frameData;this.history.push({...T,timestamp:E});const{onStart:O,onMove:R}=this.handlers;v||(O&&O(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),R&&R(this.lastMoveEvent,g)},this.handlePointerMove=(g,v)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=transformPoint(v,this.transformPagePoint),frame.update(this.updatePoint,!0)},this.handlePointerUp=(g,v)=>{this.end();const{onEnd:S,onSessionEnd:T,resumeAnimation:E}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&E&&E(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const O=getPanInfo(g.type==="pointercancel"?this.lastMoveEventInfo:transformPoint(v,this.transformPagePoint),this.history);this.startEvent&&S&&S(g,O),T&&T(g,O)},!isPrimaryPointer(e))return;this.dragSnapToOrigin=u,this.handlers=n,this.transformPagePoint=i,this.distanceThreshold=d,this.contextWindow=o||window;const m=extractEventInfo(e),p=transformPoint(m,this.transformPagePoint),{point:_}=p,{timestamp:f}=frameData;this.history=[{..._,timestamp:f}];const{onSessionStart:l}=n;l&&l(e,getPanInfo(p,this.history)),this.removeListeners=pipe(addPointerEvent(this.contextWindow,"pointermove",this.handlePointerMove),addPointerEvent(this.contextWindow,"pointerup",this.handlePointerUp),addPointerEvent(this.contextWindow,"pointercancel",this.handlePointerUp)),h&&this.startScrollTracking(h)}startScrollTracking(e){let n=e.parentElement;for(;n;){const i=getComputedStyle(n);(overflowStyles.has(i.overflowX)||overflowStyles.has(i.overflowY))&&this.scrollPositions.set(n,{x:n.scrollLeft,y:n.scrollTop}),n=n.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const n=this.scrollPositions.get(e);if(!n)return;const i=e===window,o=i?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},u={x:o.x-n.x,y:o.y-n.y};u.x===0&&u.y===0||(i?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=u.x,this.lastMoveEventInfo.point.y+=u.y):this.history.length>0&&(this.history[0].x-=u.x,this.history[0].y-=u.y),this.scrollPositions.set(e,o),frame.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),cancelFrame(this.updatePoint)}}function transformPoint(t,e){return e?{point:e(t.point)}:t}function subtractPoint(t,e){return{x:t.x-e.x,y:t.y-e.y}}function getPanInfo({point:t},e){return{point:t,delta:subtractPoint(t,lastDevicePoint(e)),offset:subtractPoint(t,startDevicePoint(e)),velocity:getVelocity(e,.1)}}function startDevicePoint(t){return t[0]}function lastDevicePoint(t){return t[t.length-1]}function getVelocity(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const o=lastDevicePoint(t);for(;n>=0&&(i=t[n],!(o.timestamp-i.timestamp>secondsToMilliseconds(e)));)n--;if(!i)return{x:0,y:0};const u=millisecondsToSeconds(o.timestamp-i.timestamp);if(u===0)return{x:0,y:0};const d={x:(o.x-i.x)/u,y:(o.y-i.y)/u};return d.x===1/0&&(d.x=0),d.y===1/0&&(d.y=0),d}function applyConstraints(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?mixNumber$1(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?mixNumber$1(n,t,i.max):Math.min(t,n)),t}function calcRelativeAxisConstraints(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function calcRelativeConstraints(t,{top:e,left:n,bottom:i,right:o}){return{x:calcRelativeAxisConstraints(t.x,n,o),y:calcRelativeAxisConstraints(t.y,e,i)}}function calcViewportAxisConstraints(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function calcViewportConstraints(t,e){return{x:calcViewportAxisConstraints(t.x,e.x),y:calcViewportAxisConstraints(t.y,e.y)}}function calcOrigin(t,e){let n=.5;const i=calcLength(t),o=calcLength(e);return o>i?n=progress(e.min,e.max-i,t.min):i>o&&(n=progress(t.min,t.max-o,e.min)),clamp(0,1,n)}function rebaseAxisConstraints(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const defaultElastic=.35;function resolveDragElastic(t=defaultElastic){return t===!1?t=0:t===!0&&(t=defaultElastic),{x:resolveAxisElastic(t,"left","right"),y:resolveAxisElastic(t,"top","bottom")}}function resolveAxisElastic(t,e,n){return{min:resolvePointElastic(t,e),max:resolvePointElastic(t,n)}}function resolvePointElastic(t,e){return typeof t=="number"?t:t[e]||0}const elementDragControls=new WeakMap;class VisualElementDragControls{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=createBox(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:i}={}){const{presenceContext:o}=this.visualElement;if(o&&o.isPresent===!1)return;const u=f=>{n?(this.stopAnimation(),this.snapToCursor(extractEventInfo(f).point)):this.pauseAnimation()},d=(f,l)=>{this.stopAnimation();const{drag:g,dragPropagation:v,onDragStart:S}=this.getProps();if(g&&!v&&(this.openDragLock&&this.openDragLock(),this.openDragLock=setDragLock(g),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=l,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),eachAxis(E=>{let O=this.getAxisMotionValue(E).get()||0;if(percent.test(O)){const{projection:R}=this.visualElement;if(R&&R.layout){const M=R.layout.layoutBox[E];M&&(O=calcLength(M)*(parseFloat(O)/100))}}this.originPoint[E]=O}),S&&frame.postRender(()=>S(f,l)),addValueToWillChange(this.visualElement,"transform");const{animationState:T}=this.visualElement;T&&T.setActive("whileDrag",!0)},h=(f,l)=>{this.latestPointerEvent=f,this.latestPanInfo=l;const{dragPropagation:g,dragDirectionLock:v,onDirectionLock:S,onDrag:T}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:E}=l;if(v&&this.currentDirection===null){this.currentDirection=getCurrentDirection(E),this.currentDirection!==null&&S&&S(this.currentDirection);return}this.updateAxis("x",l.point,E),this.updateAxis("y",l.point,E),this.visualElement.render(),T&&T(f,l)},m=(f,l)=>{this.latestPointerEvent=f,this.latestPanInfo=l,this.stop(f,l),this.latestPointerEvent=null,this.latestPanInfo=null},p=()=>eachAxis(f=>this.getAnimationState(f)==="paused"&&this.getAxisMotionValue(f).animation?.play()),{dragSnapToOrigin:_}=this.getProps();this.panSession=new PanSession(e,{onSessionStart:u,onStart:d,onMove:h,onSessionEnd:m,resumeAnimation:p},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:_,distanceThreshold:i,contextWindow:getContextWindow(this.visualElement),element:this.visualElement.current})}stop(e,n){const i=e||this.latestPointerEvent,o=n||this.latestPanInfo,u=this.isDragging;if(this.cancel(),!u||!o||!i)return;const{velocity:d}=o;this.startAnimation(d);const{onDragEnd:h}=this.getProps();h&&frame.postRender(()=>h(i,o))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(e,n,i){const{drag:o}=this.getProps();if(!i||!shouldDrag(e,o,this.currentDirection))return;const u=this.getAxisMotionValue(e);let d=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(d=applyConstraints(d,this.constraints[e],this.elastic[e])),u.set(d)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,o=this.constraints;e&&isRefObject(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=calcRelativeConstraints(i.layoutBox,e):this.constraints=!1,this.elastic=resolveDragElastic(n),o!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&eachAxis(u=>{this.constraints!==!1&&this.getAxisMotionValue(u)&&(this.constraints[u]=rebaseAxisConstraints(i.layoutBox[u],this.constraints[u]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!isRefObject(e))return!1;const i=e.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const u=measurePageBox(i,o.root,this.visualElement.getTransformPagePoint());let d=calcViewportConstraints(o.layout.layoutBox,u);if(n){const h=n(convertBoxToBoundingBox(d));this.hasMutatedConstraints=!!h,h&&(d=convertBoundingBoxToBox(h))}return d}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:o,dragTransition:u,dragSnapToOrigin:d,onDragTransitionEnd:h}=this.getProps(),m=this.constraints||{},p=eachAxis(_=>{if(!shouldDrag(_,n,this.currentDirection))return;let f=m&&m[_]||{};d&&(f={min:0,max:0});const l=o?200:1e6,g=o?40:1e7,v={type:"inertia",velocity:i?e[_]:0,bounceStiffness:l,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...u,...f};return this.startAxisValueAnimation(_,v)});return Promise.all(p).then(h)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return addValueToWillChange(this.visualElement,e),i.start(animateMotionValue(e,i,0,n,this.visualElement,!1))}stopAnimation(){eachAxis(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){eachAxis(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),o=i[n];return o||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){eachAxis(n=>{const{drag:i}=this.getProps();if(!shouldDrag(n,i,this.currentDirection))return;const{projection:o}=this.visualElement,u=this.getAxisMotionValue(n);if(o&&o.layout){const{min:d,max:h}=o.layout.layoutBox[n],m=u.get()||0;u.set(e[n]-mixNumber$1(d,h,.5)+m)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!isRefObject(n)||!i||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};eachAxis(d=>{const h=this.getAxisMotionValue(d);if(h&&this.constraints!==!1){const m=h.get();o[d]=calcOrigin({min:m,max:m},this.constraints[d])}});const{transformTemplate:u}=this.visualElement.getProps();this.visualElement.current.style.transform=u?u({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),eachAxis(d=>{if(!shouldDrag(d,e,null))return;const h=this.getAxisMotionValue(d),{min:m,max:p}=this.constraints[d];h.set(mixNumber$1(m,p,o[d]))})}addListeners(){if(!this.visualElement.current)return;elementDragControls.set(this.visualElement,this);const e=this.visualElement.current,n=addPointerEvent(e,"pointerdown",m=>{const{drag:p,dragListener:_=!0}=this.getProps(),f=m.target,l=f!==e&&isElementKeyboardAccessible(f);p&&_&&!l&&this.start(m)}),i=()=>{const{dragConstraints:m}=this.getProps();isRefObject(m)&&m.current&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,u=o.addEventListener("measure",i);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),frame.read(i);const d=addDomEvent(window,"resize",()=>this.scalePositionWithinConstraints()),h=o.addEventListener("didUpdate",(({delta:m,hasLayoutChanged:p})=>{this.isDragging&&p&&(eachAxis(_=>{const f=this.getAxisMotionValue(_);f&&(this.originPoint[_]+=m[_].translate,f.set(f.get()+m[_].translate))}),this.visualElement.render())}));return()=>{d(),n(),u(),h&&h()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:o=!1,dragConstraints:u=!1,dragElastic:d=defaultElastic,dragMomentum:h=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:o,dragConstraints:u,dragElastic:d,dragMomentum:h}}}function shouldDrag(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function getCurrentDirection(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class DragGesture extends Feature{constructor(e){super(e),this.removeGroupControls=noop$2,this.removeListeners=noop$2,this.controls=new VisualElementDragControls(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||noop$2}update(){const{dragControls:e}=this.node.getProps(),{dragControls:n}=this.node.prevProps||{};e!==n&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const asyncHandler=t=>(e,n)=>{t&&frame.postRender(()=>t(e,n))};class PanGesture extends Feature{constructor(){super(...arguments),this.removePointerDownListener=noop$2}onPointerDown(e){this.session=new PanSession(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:getContextWindow(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:o}=this.node.getProps();return{onSessionStart:asyncHandler(e),onStart:asyncHandler(n),onMove:i,onEnd:(u,d)=>{delete this.session,o&&frame.postRender(()=>o(u,d))}}}mount(){this.removePointerDownListener=addPointerEvent(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let hasTakenAnySnapshot=!1;class MeasureLayoutWithContext extends reactExports.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:o}=this.props,{projection:u}=e;u&&(n.group&&n.group.add(u),i&&i.register&&o&&i.register(u),hasTakenAnySnapshot&&u.root.didUpdate(),u.addEventListener("animationComplete",()=>{this.safeToRemove()}),u.setOptions({...u.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),globalProjectionState.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:o,isPresent:u}=this.props,{projection:d}=i;return d&&(d.isPresent=u,e.layoutDependency!==n&&d.setOptions({...d.options,layoutDependency:n}),hasTakenAnySnapshot=!0,o||e.layoutDependency!==n||n===void 0||e.isPresent!==u?d.willUpdate():this.safeToRemove(),e.isPresent!==u&&(u?d.promote():d.relegate()||frame.postRender(()=>{const h=d.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),microtask.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:o}=e;hasTakenAnySnapshot=!0,o&&(o.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(o),i&&i.deregister&&i.deregister(o))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function MeasureLayout(t){const[e,n]=usePresence(),i=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(MeasureLayoutWithContext,{...t,layoutGroup:i,switchLayoutGroup:reactExports.useContext(SwitchLayoutGroupContext),isPresent:e,safeToRemove:n})}const drag={pan:{Feature:PanGesture},drag:{Feature:DragGesture,ProjectionNode:HTMLProjectionNode,MeasureLayout}};function handleHoverEvent(t,e,n){const{props:i}=t;t.animationState&&i.whileHover&&t.animationState.setActive("whileHover",n==="Start");const o="onHover"+n,u=i[o];u&&frame.postRender(()=>u(e,extractEventInfo(e)))}class HoverGesture extends Feature{mount(){const{current:e}=this.node;e&&(this.unmount=hover(e,(n,i)=>(handleHoverEvent(this.node,i,"Start"),o=>handleHoverEvent(this.node,o,"End"))))}unmount(){}}class FocusGesture extends Feature{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pipe(addDomEvent(this.node.current,"focus",()=>this.onFocus()),addDomEvent(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function handlePressEvent(t,e,n){const{props:i}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&i.whileTap&&t.animationState.setActive("whileTap",n==="Start");const o="onTap"+(n==="End"?"":n),u=i[o];u&&frame.postRender(()=>u(e,extractEventInfo(e)))}class PressGesture extends Feature{mount(){const{current:e}=this.node;e&&(this.unmount=press(e,(n,i)=>(handlePressEvent(this.node,i,"Start"),(o,{success:u})=>handlePressEvent(this.node,o,u?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const observerCallbacks=new WeakMap,observers=new WeakMap,fireObserverCallback=t=>{const e=observerCallbacks.get(t.target);e&&e(t)},fireAllObserverCallbacks=t=>{t.forEach(fireObserverCallback)};function initIntersectionObserver({root:t,...e}){const n=t||document;observers.has(n)||observers.set(n,{});const i=observers.get(n),o=JSON.stringify(e);return i[o]||(i[o]=new IntersectionObserver(fireAllObserverCallbacks,{root:t,...e})),i[o]}function observeIntersection(t,e,n){const i=initIntersectionObserver(e);return observerCallbacks.set(t,n),i.observe(t),()=>{observerCallbacks.delete(t),i.unobserve(t)}}const thresholdNames={some:0,all:1};class InViewFeature extends Feature{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:o="some",once:u}=e,d={root:n?n.current:void 0,rootMargin:i,threshold:typeof o=="number"?o:thresholdNames[o]},h=m=>{const{isIntersecting:p}=m;if(this.isInView===p||(this.isInView=p,u&&!p&&this.hasEnteredView))return;p&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",p);const{onViewportEnter:_,onViewportLeave:f}=this.node.getProps(),l=p?_:f;l&&l(m)};return observeIntersection(this.node.current,d,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(hasViewportOptionChanged(e,n))&&this.startObserver()}unmount(){}}function hasViewportOptionChanged({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const gestureAnimations={inView:{Feature:InViewFeature},tap:{Feature:PressGesture},focus:{Feature:FocusGesture},hover:{Feature:HoverGesture}},layout={layout:{ProjectionNode:HTMLProjectionNode,MeasureLayout}},featureBundle={...animations,...gestureAnimations,...drag,...layout},motion=createMotionProxy(featureBundle,createDomVisualElement);function __insertCSS(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}const getAsset=t=>{switch(t){case"success":return SuccessIcon;case"info":return InfoIcon;case"warning":return WarningIcon;case"error":return ErrorIcon;default:return null}},bars=Array(12).fill(0),Loader=({visible:t,className:e})=>React.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},React.createElement("div",{className:"sonner-spinner"},bars.map((n,i)=>React.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${i}`})))),SuccessIcon=React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},React.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),WarningIcon=React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},React.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),InfoIcon=React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},React.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),ErrorIcon=React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},React.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),CloseIcon=React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},React.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),React.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),useIsDocumentHidden=()=>{const[t,e]=React.useState(document.hidden);return React.useEffect(()=>{const n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t};let toastsCounter=1;class Observer{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;const{message:i,...o}=e,u=typeof e?.id=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:toastsCounter++,d=this.toasts.find(m=>m.id===u),h=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(u)&&this.dismissedToasts.delete(u),d?this.toasts=this.toasts.map(m=>m.id===u?(this.publish({...m,...e,id:u,title:i}),{...m,...e,id:u,dismissible:h,title:i}):m):this.addToast({title:i,...o,dismissible:h,id:u}),u},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:e,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(i=>i({id:n.id,dismiss:!0}))}),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let i;n.loading!==void 0&&(i=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const o=Promise.resolve(e instanceof Function?e():e);let u=i!==void 0,d;const h=o.then(async p=>{if(d=["resolve",p],React.isValidElement(p))u=!1,this.create({id:i,type:"default",message:p});else if(isHttpResponse(p)&&!p.ok){u=!1;const f=typeof n.error=="function"?await n.error(`HTTP error! status: ${p.status}`):n.error,l=typeof n.description=="function"?await n.description(`HTTP error! status: ${p.status}`):n.description,v=typeof f=="object"&&!React.isValidElement(f)?f:{message:f};this.create({id:i,type:"error",description:l,...v})}else if(p instanceof Error){u=!1;const f=typeof n.error=="function"?await n.error(p):n.error,l=typeof n.description=="function"?await n.description(p):n.description,v=typeof f=="object"&&!React.isValidElement(f)?f:{message:f};this.create({id:i,type:"error",description:l,...v})}else if(n.success!==void 0){u=!1;const f=typeof n.success=="function"?await n.success(p):n.success,l=typeof n.description=="function"?await n.description(p):n.description,v=typeof f=="object"&&!React.isValidElement(f)?f:{message:f};this.create({id:i,type:"success",description:l,...v})}}).catch(async p=>{if(d=["reject",p],n.error!==void 0){u=!1;const _=typeof n.error=="function"?await n.error(p):n.error,f=typeof n.description=="function"?await n.description(p):n.description,g=typeof _=="object"&&!React.isValidElement(_)?_:{message:_};this.create({id:i,type:"error",description:f,...g})}}).finally(()=>{u&&(this.dismiss(i),i=void 0),n.finally==null||n.finally.call(n)}),m=()=>new Promise((p,_)=>h.then(()=>d[0]==="reject"?_(d[1]):p(d[1])).catch(_));return typeof i!="string"&&typeof i!="number"?{unwrap:m}:Object.assign(i,{unwrap:m})},this.custom=(e,n)=>{const i=n?.id||toastsCounter++;return this.create({jsx:e(i),id:i,...n}),i},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const ToastState=new Observer,toastFunction=(t,e)=>{const n=e?.id||toastsCounter++;return ToastState.addToast({title:t,...e,id:n}),n},isHttpResponse=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",basicToast=toastFunction,getHistory=()=>ToastState.toasts,getToasts=()=>ToastState.getActiveToasts(),toast=Object.assign(basicToast,{success:ToastState.success,info:ToastState.info,warning:ToastState.warning,error:ToastState.error,custom:ToastState.custom,message:ToastState.message,promise:ToastState.promise,dismiss:ToastState.dismiss,loading:ToastState.loading},{getHistory,getToasts});__insertCSS("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function isAction(t){return t.label!==void 0}const VISIBLE_TOASTS_AMOUNT=3,VIEWPORT_OFFSET="24px",MOBILE_VIEWPORT_OFFSET="16px",TOAST_LIFETIME=4e3,TOAST_WIDTH=356,GAP=14,SWIPE_THRESHOLD=45,TIME_BEFORE_UNMOUNT=200;function cn(...t){return t.filter(Boolean).join(" ")}function getDefaultSwipeDirections(t){const[e,n]=t.split("-"),i=[];return e&&i.push(e),n&&i.push(n),i}const Toast=t=>{var e,n,i,o,u,d,h,m,p;const{invert:_,toast:f,unstyled:l,interacting:g,setHeights:v,visibleToasts:S,heights:T,index:E,toasts:O,expanded:R,removeToast:M,defaultRichColors:C,closeButton:j,style:$,cancelButtonStyle:L,actionButtonStyle:N,className:B="",descriptionClassName:U="",duration:H,position:Y,gap:K,expandByDefault:z,classNames:V,icons:G,closeButtonAriaLabel:ie="Close toast"}=t,[Z,te]=React.useState(null),[ee,le]=React.useState(null),[ge,Ae]=React.useState(!1),[Te,Ce]=React.useState(!1),[De,Re]=React.useState(!1),[Ee,Ie]=React.useState(!1),[Le,Se]=React.useState(!1),[Ye,Fe]=React.useState(0),[at,lt]=React.useState(0),dt=React.useRef(f.duration||H||TOAST_LIFETIME),Rt=React.useRef(null),xt=React.useRef(null),Ct=E===0,wt=E+1<=S,Ze=f.type,St=f.dismissible!==!1,Yt=f.className||"",rt=f.descriptionClassName||"",Er=React.useMemo(()=>T.findIndex(Me=>Me.toastId===f.id)||0,[T,f.id]),Ir=React.useMemo(()=>{var Me;return(Me=f.closeButton)!=null?Me:j},[f.closeButton,j]),jr=React.useMemo(()=>f.duration||H||TOAST_LIFETIME,[f.duration,H]),ir=React.useRef(0),Gt=React.useRef(0),ur=React.useRef(0),At=React.useRef(null),[$r,Xe]=Y.split("-"),Ar=React.useMemo(()=>T.reduce((Me,Ve,Mt)=>Mt>=Er?Me:Me+Ve.height,0),[T,Er]),zr=useIsDocumentHidden(),nn=f.invert||_,er=Ze==="loading";Gt.current=React.useMemo(()=>Er*K+Ar,[Er,Ar]),React.useEffect(()=>{dt.current=jr},[jr]),React.useEffect(()=>{Ae(!0)},[]),React.useEffect(()=>{const Me=xt.current;if(Me){const Ve=Me.getBoundingClientRect().height;return lt(Ve),v(Mt=>[{toastId:f.id,height:Ve,position:f.position},...Mt]),()=>v(Mt=>Mt.filter($t=>$t.toastId!==f.id))}},[v,f.id]),React.useLayoutEffect(()=>{if(!ge)return;const Me=xt.current,Ve=Me.style.height;Me.style.height="auto";const Mt=Me.getBoundingClientRect().height;Me.style.height=Ve,lt(Mt),v($t=>$t.find(Pt=>Pt.toastId===f.id)?$t.map(Pt=>Pt.toastId===f.id?{...Pt,height:Mt}:Pt):[{toastId:f.id,height:Mt,position:f.position},...$t])},[ge,f.title,f.description,v,f.id,f.jsx,f.action,f.cancel]);const nt=React.useCallback(()=>{Ce(!0),Fe(Gt.current),v(Me=>Me.filter(Ve=>Ve.toastId!==f.id)),setTimeout(()=>{M(f)},TIME_BEFORE_UNMOUNT)},[f,M,v,Gt]);React.useEffect(()=>{if(f.promise&&Ze==="loading"||f.duration===1/0||f.type==="loading")return;let Me;return R||g||zr?(()=>{if(ur.current<ir.current){const $t=new Date().getTime()-ir.current;dt.current=dt.current-$t}ur.current=new Date().getTime()})():(()=>{dt.current!==1/0&&(ir.current=new Date().getTime(),Me=setTimeout(()=>{f.onAutoClose==null||f.onAutoClose.call(f,f),nt()},dt.current))})(),()=>clearTimeout(Me)},[R,g,f,Ze,zr,nt]),React.useEffect(()=>{f.delete&&(nt(),f.onDismiss==null||f.onDismiss.call(f,f))},[nt,f.delete]);function Pr(){var Me;if(G?.loading){var Ve;return React.createElement("div",{className:cn(V?.loader,f==null||(Ve=f.classNames)==null?void 0:Ve.loader,"sonner-loader"),"data-visible":Ze==="loading"},G.loading)}return React.createElement(Loader,{className:cn(V?.loader,f==null||(Me=f.classNames)==null?void 0:Me.loader),visible:Ze==="loading"})}const hr=f.icon||G?.[Ze]||getAsset(Ze);var tr,et;return React.createElement("li",{tabIndex:0,ref:xt,className:cn(B,Yt,V?.toast,f==null||(e=f.classNames)==null?void 0:e.toast,V?.default,V?.[Ze],f==null||(n=f.classNames)==null?void 0:n[Ze]),"data-sonner-toast":"","data-rich-colors":(tr=f.richColors)!=null?tr:C,"data-styled":!(f.jsx||f.unstyled||l),"data-mounted":ge,"data-promise":!!f.promise,"data-swiped":Le,"data-removed":Te,"data-visible":wt,"data-y-position":$r,"data-x-position":Xe,"data-index":E,"data-front":Ct,"data-swiping":De,"data-dismissible":St,"data-type":Ze,"data-invert":nn,"data-swipe-out":Ee,"data-swipe-direction":ee,"data-expanded":!!(R||z&&ge),"data-testid":f.testId,style:{"--index":E,"--toasts-before":E,"--z-index":O.length-E,"--offset":`${Te?Ye:Gt.current}px`,"--initial-height":z?"auto":`${at}px`,...$,...f.style},onDragEnd:()=>{Re(!1),te(null),At.current=null},onPointerDown:Me=>{Me.button!==2&&(er||!St||(Rt.current=new Date,Fe(Gt.current),Me.target.setPointerCapture(Me.pointerId),Me.target.tagName!=="BUTTON"&&(Re(!0),At.current={x:Me.clientX,y:Me.clientY})))},onPointerUp:()=>{var Me,Ve,Mt;if(Ee||!St)return;At.current=null;const $t=Number(((Me=xt.current)==null?void 0:Me.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),pr=Number(((Ve=xt.current)==null?void 0:Ve.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Pt=new Date().getTime()-((Mt=Rt.current)==null?void 0:Mt.getTime()),Nt=Z==="x"?$t:pr,mr=Math.abs(Nt)/Pt;if(Math.abs(Nt)>=SWIPE_THRESHOLD||mr>.11){Fe(Gt.current),f.onDismiss==null||f.onDismiss.call(f,f),le(Z==="x"?$t>0?"right":"left":pr>0?"down":"up"),nt(),Ie(!0);return}else{var Lt,Wt;(Lt=xt.current)==null||Lt.style.setProperty("--swipe-amount-x","0px"),(Wt=xt.current)==null||Wt.style.setProperty("--swipe-amount-y","0px")}Se(!1),Re(!1),te(null)},onPointerMove:Me=>{var Ve,Mt,$t;if(!At.current||!St||((Ve=window.getSelection())==null?void 0:Ve.toString().length)>0)return;const Pt=Me.clientY-At.current.y,Nt=Me.clientX-At.current.x;var mr;const Lt=(mr=t.swipeDirections)!=null?mr:getDefaultSwipeDirections(Y);!Z&&(Math.abs(Nt)>1||Math.abs(Pt)>1)&&te(Math.abs(Nt)>Math.abs(Pt)?"x":"y");let Wt={x:0,y:0};const gr=Xt=>1/(1.5+Math.abs(Xt)/20);if(Z==="y"){if(Lt.includes("top")||Lt.includes("bottom"))if(Lt.includes("top")&&Pt<0||Lt.includes("bottom")&&Pt>0)Wt.y=Pt;else{const Xt=Pt*gr(Pt);Wt.y=Math.abs(Xt)<Math.abs(Pt)?Xt:Pt}}else if(Z==="x"&&(Lt.includes("left")||Lt.includes("right")))if(Lt.includes("left")&&Nt<0||Lt.includes("right")&&Nt>0)Wt.x=Nt;else{const Xt=Nt*gr(Nt);Wt.x=Math.abs(Xt)<Math.abs(Nt)?Xt:Nt}(Math.abs(Wt.x)>0||Math.abs(Wt.y)>0)&&Se(!0),(Mt=xt.current)==null||Mt.style.setProperty("--swipe-amount-x",`${Wt.x}px`),($t=xt.current)==null||$t.style.setProperty("--swipe-amount-y",`${Wt.y}px`)}},Ir&&!f.jsx&&Ze!=="loading"?React.createElement("button",{"aria-label":ie,"data-disabled":er,"data-close-button":!0,onClick:er||!St?()=>{}:()=>{nt(),f.onDismiss==null||f.onDismiss.call(f,f)},className:cn(V?.closeButton,f==null||(i=f.classNames)==null?void 0:i.closeButton)},(et=G?.close)!=null?et:CloseIcon):null,(Ze||f.icon||f.promise)&&f.icon!==null&&(G?.[Ze]!==null||f.icon)?React.createElement("div",{"data-icon":"",className:cn(V?.icon,f==null||(o=f.classNames)==null?void 0:o.icon)},f.promise||f.type==="loading"&&!f.icon?f.icon||Pr():null,f.type!=="loading"?hr:null):null,React.createElement("div",{"data-content":"",className:cn(V?.content,f==null||(u=f.classNames)==null?void 0:u.content)},React.createElement("div",{"data-title":"",className:cn(V?.title,f==null||(d=f.classNames)==null?void 0:d.title)},f.jsx?f.jsx:typeof f.title=="function"?f.title():f.title),f.description?React.createElement("div",{"data-description":"",className:cn(U,rt,V?.description,f==null||(h=f.classNames)==null?void 0:h.description)},typeof f.description=="function"?f.description():f.description):null),React.isValidElement(f.cancel)?f.cancel:f.cancel&&isAction(f.cancel)?React.createElement("button",{"data-button":!0,"data-cancel":!0,style:f.cancelButtonStyle||L,onClick:Me=>{isAction(f.cancel)&&St&&(f.cancel.onClick==null||f.cancel.onClick.call(f.cancel,Me),nt())},className:cn(V?.cancelButton,f==null||(m=f.classNames)==null?void 0:m.cancelButton)},f.cancel.label):null,React.isValidElement(f.action)?f.action:f.action&&isAction(f.action)?React.createElement("button",{"data-button":!0,"data-action":!0,style:f.actionButtonStyle||N,onClick:Me=>{isAction(f.action)&&(f.action.onClick==null||f.action.onClick.call(f.action,Me),!Me.defaultPrevented&&nt())},className:cn(V?.actionButton,f==null||(p=f.classNames)==null?void 0:p.actionButton)},f.action.label):null)};function getDocumentDirection(){if(typeof window>"u"||typeof document>"u")return"ltr";const t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function assignOffset(t,e){const n={};return[t,e].forEach((i,o)=>{const u=o===1,d=u?"--mobile-offset":"--offset",h=u?MOBILE_VIEWPORT_OFFSET:VIEWPORT_OFFSET;function m(p){["top","right","bottom","left"].forEach(_=>{n[`${d}-${_}`]=typeof p=="number"?`${p}px`:p})}typeof i=="number"||typeof i=="string"?m(i):typeof i=="object"?["top","right","bottom","left"].forEach(p=>{i[p]===void 0?n[`${d}-${p}`]=h:n[`${d}-${p}`]=typeof i[p]=="number"?`${i[p]}px`:i[p]}):m(h)}),n}const Toaster=React.forwardRef(function(e,n){const{id:i,invert:o,position:u="bottom-right",hotkey:d=["altKey","KeyT"],expand:h,closeButton:m,className:p,offset:_,mobileOffset:f,theme:l="light",richColors:g,duration:v,style:S,visibleToasts:T=VISIBLE_TOASTS_AMOUNT,toastOptions:E,dir:O=getDocumentDirection(),gap:R=GAP,icons:M,containerAriaLabel:C="Notifications"}=e,[j,$]=React.useState([]),L=React.useMemo(()=>i?j.filter(ge=>ge.toasterId===i):j.filter(ge=>!ge.toasterId),[j,i]),N=React.useMemo(()=>Array.from(new Set([u].concat(L.filter(ge=>ge.position).map(ge=>ge.position)))),[L,u]),[B,U]=React.useState([]),[H,Y]=React.useState(!1),[K,z]=React.useState(!1),[V,G]=React.useState(l!=="system"?l:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),ie=React.useRef(null),Z=d.join("+").replace(/Key/g,"").replace(/Digit/g,""),te=React.useRef(null),ee=React.useRef(!1),le=React.useCallback(ge=>{$(Ae=>{var Te;return(Te=Ae.find(Ce=>Ce.id===ge.id))!=null&&Te.delete||ToastState.dismiss(ge.id),Ae.filter(({id:Ce})=>Ce!==ge.id)})},[]);return React.useEffect(()=>ToastState.subscribe(ge=>{if(ge.dismiss){requestAnimationFrame(()=>{$(Ae=>Ae.map(Te=>Te.id===ge.id?{...Te,delete:!0}:Te))});return}setTimeout(()=>{ReactDOM.flushSync(()=>{$(Ae=>{const Te=Ae.findIndex(Ce=>Ce.id===ge.id);return Te!==-1?[...Ae.slice(0,Te),{...Ae[Te],...ge},...Ae.slice(Te+1)]:[ge,...Ae]})})})}),[j]),React.useEffect(()=>{if(l!=="system"){G(l);return}if(l==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?G("dark"):G("light")),typeof window>"u")return;const ge=window.matchMedia("(prefers-color-scheme: dark)");try{ge.addEventListener("change",({matches:Ae})=>{G(Ae?"dark":"light")})}catch{ge.addListener(({matches:Te})=>{try{G(Te?"dark":"light")}catch(Ce){console.error(Ce)}})}},[l]),React.useEffect(()=>{j.length<=1&&Y(!1)},[j]),React.useEffect(()=>{const ge=Ae=>{var Te;if(d.every(Re=>Ae[Re]||Ae.code===Re)){var De;Y(!0),(De=ie.current)==null||De.focus()}Ae.code==="Escape"&&(document.activeElement===ie.current||(Te=ie.current)!=null&&Te.contains(document.activeElement))&&Y(!1)};return document.addEventListener("keydown",ge),()=>document.removeEventListener("keydown",ge)},[d]),React.useEffect(()=>{if(ie.current)return()=>{te.current&&(te.current.focus({preventScroll:!0}),te.current=null,ee.current=!1)}},[ie.current]),React.createElement("section",{ref:n,"aria-label":`${C} ${Z}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},N.map((ge,Ae)=>{var Te;const[Ce,De]=ge.split("-");return L.length?React.createElement("ol",{key:ge,dir:O==="auto"?getDocumentDirection():O,tabIndex:-1,ref:ie,className:p,"data-sonner-toaster":!0,"data-sonner-theme":V,"data-y-position":Ce,"data-x-position":De,style:{"--front-toast-height":`${((Te=B[0])==null?void 0:Te.height)||0}px`,"--width":`${TOAST_WIDTH}px`,"--gap":`${R}px`,...S,...assignOffset(_,f)},onBlur:Re=>{ee.current&&!Re.currentTarget.contains(Re.relatedTarget)&&(ee.current=!1,te.current&&(te.current.focus({preventScroll:!0}),te.current=null))},onFocus:Re=>{Re.target instanceof HTMLElement&&Re.target.dataset.dismissible==="false"||ee.current||(ee.current=!0,te.current=Re.relatedTarget)},onMouseEnter:()=>Y(!0),onMouseMove:()=>Y(!0),onMouseLeave:()=>{K||Y(!1)},onDragEnd:()=>Y(!1),onPointerDown:Re=>{Re.target instanceof HTMLElement&&Re.target.dataset.dismissible==="false"||z(!0)},onPointerUp:()=>z(!1)},L.filter(Re=>!Re.position&&Ae===0||Re.position===ge).map((Re,Ee)=>{var Ie,Le;return React.createElement(Toast,{key:Re.id,icons:M,index:Ee,toast:Re,defaultRichColors:g,duration:(Ie=E?.duration)!=null?Ie:v,className:E?.className,descriptionClassName:E?.descriptionClassName,invert:o,visibleToasts:T,closeButton:(Le=E?.closeButton)!=null?Le:m,interacting:K,position:ge,style:E?.style,unstyled:E?.unstyled,classNames:E?.classNames,cancelButtonStyle:E?.cancelButtonStyle,actionButtonStyle:E?.actionButtonStyle,closeButtonAriaLabel:E?.closeButtonAriaLabel,removeToast:le,toasts:L.filter(Se=>Se.position==Re.position),heights:B.filter(Se=>Se.position==Re.position),setHeights:U,expandByDefault:h,gap:R,expanded:H,swipeDirections:e.swipeDirections})})):null}))}),logoImage="/assets/logo-CF8QZRv_.png";function __rest(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(n[i[o]]=t[i[o]]);return n}function __awaiter(t,e,n,i){function o(u){return u instanceof n?u:new n(function(d){d(u)})}return new(n||(n=Promise))(function(u,d){function h(_){try{p(i.next(_))}catch(f){d(f)}}function m(_){try{p(i.throw(_))}catch(f){d(f)}}function p(_){_.done?u(_.value):o(_.value).then(h,m)}p((i=i.apply(t,e||[])).next())})}typeof SuppressedError=="function"&&SuppressedError;const resolveFetch$3=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class FunctionsError extends Error{constructor(e,n="FunctionsError",i){super(e),this.name=n,this.context=i}}class FunctionsFetchError extends FunctionsError{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class FunctionsRelayError extends FunctionsError{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class FunctionsHttpError extends FunctionsError{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var FunctionRegion;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(FunctionRegion||(FunctionRegion={}));class FunctionsClient{constructor(e,{headers:n={},customFetch:i,region:o=FunctionRegion.Any}={}){this.url=e,this.headers=n,this.region=o,this.fetch=resolveFetch$3(i)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return __awaiter(this,arguments,void 0,function*(n,i={}){var o;let u,d;try{const{headers:h,method:m,body:p,signal:_,timeout:f}=i;let l={},{region:g}=i;g||(g=this.region);const v=new URL(`${this.url}/${n}`);g&&g!=="any"&&(l["x-region"]=g,v.searchParams.set("forceFunctionRegion",g));let S;p&&(h&&!Object.prototype.hasOwnProperty.call(h,"Content-Type")||!h)?typeof Blob<"u"&&p instanceof Blob||p instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",S=p):typeof p=="string"?(l["Content-Type"]="text/plain",S=p):typeof FormData<"u"&&p instanceof FormData?S=p:(l["Content-Type"]="application/json",S=JSON.stringify(p)):p&&typeof p!="string"&&!(typeof Blob<"u"&&p instanceof Blob)&&!(p instanceof ArrayBuffer)&&!(typeof FormData<"u"&&p instanceof FormData)?S=JSON.stringify(p):S=p;let T=_;f&&(d=new AbortController,u=setTimeout(()=>d.abort(),f),_?(T=d.signal,_.addEventListener("abort",()=>d.abort())):T=d.signal);const E=yield this.fetch(v.toString(),{method:m||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),h),body:S,signal:T}).catch(C=>{throw new FunctionsFetchError(C)}),O=E.headers.get("x-relay-error");if(O&&O==="true")throw new FunctionsRelayError(E);if(!E.ok)throw new FunctionsHttpError(E);let R=((o=E.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),M;return R==="application/json"?M=yield E.json():R==="application/octet-stream"||R==="application/pdf"?M=yield E.blob():R==="text/event-stream"?M=E:R==="multipart/form-data"?M=yield E.formData():M=yield E.text(),{data:M,error:null,response:E}}catch(h){return{data:null,error:h,response:h instanceof FunctionsHttpError||h instanceof FunctionsRelayError?h.context:void 0}}finally{u&&clearTimeout(u)}})}}var PostgrestError=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},PostgrestBuilder=class{constructor(t){var e,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const i=this.fetch;let o=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{let d=null,h=null,m=null,p=u.status,_=u.statusText;if(u.ok){var f,l;if(n.method!=="HEAD"){var g;const E=await u.text();E===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((g=n.headers.get("Accept"))===null||g===void 0)&&g.includes("application/vnd.pgrst.plan+text"))?h=E:h=JSON.parse(E))}const S=(f=n.headers.get("Prefer"))===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),T=(l=u.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");S&&T&&T.length>1&&(m=parseInt(T[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(h)&&(h.length>1?(d={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,m=null,p=406,_="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{var v;const S=await u.text();try{d=JSON.parse(S),Array.isArray(d)&&u.status===404&&(h=[],d=null,p=200,_="OK")}catch{u.status===404&&S===""?(p=204,_="No Content"):d={message:S}}if(d&&n.isMaybeSingle&&(!(d==null||(v=d.details)===null||v===void 0)&&v.includes("0 rows"))&&(d=null,p=200,_="OK"),d&&n.shouldThrowOnError)throw new PostgrestError(d)}return{error:d,data:h,count:m,status:p,statusText:_}});return this.shouldThrowOnError||(o=o.catch(u=>{var d;let h="";const m=u?.cause;if(m){var p,_,f,l;const v=(p=m?.message)!==null&&p!==void 0?p:"",S=(_=m?.code)!==null&&_!==void 0?_:"";h=`${(f=u?.name)!==null&&f!==void 0?f:"FetchError"}: ${u?.message}`,h+=`

Caused by: ${(l=m?.name)!==null&&l!==void 0?l:"Error"}: ${v}`,S&&(h+=` (${S})`),m?.stack&&(h+=`
${m.stack}`)}else{var g;h=(g=u?.stack)!==null&&g!==void 0?g:""}return{error:{message:`${(d=u?.name)!==null&&d!==void 0?d:"FetchError"}: ${u?.message}`,details:h,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),o.then(t,e)}returns(){return this}overrideTypes(){return this}},PostgrestTransformBuilder=class extends PostgrestBuilder{select(t){let e=!1;const n=(t??"*").split("").map(i=>/\s/.test(i)&&!e?"":(i==='"'&&(e=!e),i)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:i,referencedTable:o=i}={}){const u=o?`${o}.order`:"order",d=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${d?`${d},`:""}${t}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){const i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:i=n}={}){const o=typeof i>"u"?"offset":`${i}.offset`,u=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(o,`${t}`),this.url.searchParams.set(u,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:i=!1,wal:o=!1,format:u="text"}={}){var d;const h=[t?"analyze":null,e?"verbose":null,n?"settings":null,i?"buffers":null,o?"wal":null].filter(Boolean).join("|"),m=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${m}"; options=${h};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const PostgrestReservedCharsRegexp=new RegExp("[,()]");var PostgrestFilterBuilder=class extends PostgrestTransformBuilder{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const n=Array.from(new Set(e)).map(i=>typeof i=="string"&&PostgrestReservedCharsRegexp.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}notIn(t,e){const n=Array.from(new Set(e)).map(i=>typeof i=="string"&&PostgrestReservedCharsRegexp.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(t,`not.in.(${n})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:i}={}){let o="";i==="plain"?o="pl":i==="phrase"?o="ph":i==="websearch"&&(o="w");const u=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${o}fts${u}.${e}`),this}match(t){return Object.entries(t).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){const i=n?`${n}.or`:"or";return this.url.searchParams.append(i,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}},PostgrestQueryBuilder=class{constructor(t,{headers:e={},schema:n,fetch:i}){this.url=t,this.headers=new Headers(e),this.schema=n,this.fetch=i}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(t,e){const{head:n=!1,count:i}=e??{},o=n?"HEAD":"GET";let u=!1;const d=(t??"*").split("").map(p=>/\s/.test(p)&&!u?"":(p==='"'&&(u=!u),p)).join(""),{url:h,headers:m}=this.cloneRequestState();return h.searchParams.set("select",d),i&&m.append("Prefer",`count=${i}`),new PostgrestFilterBuilder({method:o,url:h,headers:m,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:n=!0}={}){var i;const o="POST",{url:u,headers:d}=this.cloneRequestState();if(e&&d.append("Prefer",`count=${e}`),n||d.append("Prefer","missing=default"),Array.isArray(t)){const h=t.reduce((m,p)=>m.concat(Object.keys(p)),[]);if(h.length>0){const m=[...new Set(h)].map(p=>`"${p}"`);u.searchParams.set("columns",m.join(","))}}return new PostgrestFilterBuilder({method:o,url:u,headers:d,schema:this.schema,body:t,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:i,defaultToNull:o=!0}={}){var u;const d="POST",{url:h,headers:m}=this.cloneRequestState();if(m.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),e!==void 0&&h.searchParams.set("on_conflict",e),i&&m.append("Prefer",`count=${i}`),o||m.append("Prefer","missing=default"),Array.isArray(t)){const p=t.reduce((_,f)=>_.concat(Object.keys(f)),[]);if(p.length>0){const _=[...new Set(p)].map(f=>`"${f}"`);h.searchParams.set("columns",_.join(","))}}return new PostgrestFilterBuilder({method:d,url:h,headers:m,schema:this.schema,body:t,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(t,{count:e}={}){var n;const i="PATCH",{url:o,headers:u}=this.cloneRequestState();return e&&u.append("Prefer",`count=${e}`),new PostgrestFilterBuilder({method:i,url:o,headers:u,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var e;const n="DELETE",{url:i,headers:o}=this.cloneRequestState();return t&&o.append("Prefer",`count=${t}`),new PostgrestFilterBuilder({method:n,url:i,headers:o,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},PostgrestClient=class Ju{constructor(e,{headers:n={},schema:i,fetch:o}={}){this.url=e,this.headers=new Headers(n),this.schemaName=i,this.fetch=o}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new PostgrestQueryBuilder(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Ju(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:i=!1,get:o=!1,count:u}={}){var d;let h;const m=new URL(`${this.url}/rpc/${e}`);let p;const _=g=>g!==null&&typeof g=="object"&&(!Array.isArray(g)||g.some(_)),f=i&&Object.values(n).some(_);f?(h="POST",p=n):i||o?(h=i?"HEAD":"GET",Object.entries(n).filter(([g,v])=>v!==void 0).map(([g,v])=>[g,Array.isArray(v)?`{${v.join(",")}}`:`${v}`]).forEach(([g,v])=>{m.searchParams.append(g,v)})):(h="POST",p=n);const l=new Headers(this.headers);return f?l.set("Prefer",u?`count=${u},return=minimal`:"return=minimal"):u&&l.set("Prefer",`count=${u}`),new PostgrestFilterBuilder({method:h,url:m,headers:l,schema:this.schemaName,body:p,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}};class WebSocketFactory{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const n=globalThis.process;if(n){const i=n.versions;if(i&&i.node){const o=i.node,u=parseInt(o.replace(/^v/,"").split(".")[0]);return u>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${u} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${u} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const i=this.getWebSocketConstructor();return new i(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const version$3="2.93.3",DEFAULT_VERSION=`realtime-js/${version$3}`,VSN_1_0_0="1.0.0",VSN_2_0_0="2.0.0",DEFAULT_VSN=VSN_2_0_0,DEFAULT_TIMEOUT=1e4,WS_CLOSE_NORMAL=1e3,MAX_PUSH_BUFFER_SIZE=100;var SOCKET_STATES;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(SOCKET_STATES||(SOCKET_STATES={}));var CHANNEL_STATES;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(CHANNEL_STATES||(CHANNEL_STATES={}));var CHANNEL_EVENTS;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(CHANNEL_EVENTS||(CHANNEL_EVENTS={}));var TRANSPORTS;(function(t){t.websocket="websocket"})(TRANSPORTS||(TRANSPORTS={}));var CONNECTION_STATE;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(CONNECTION_STATE||(CONNECTION_STATE={}));class Serializer{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let i=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(i))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,i;const o=(i=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&i!==void 0?i:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,o)}_encodeJsonUserBroadcastPush(e){var n,i;const o=(i=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&i!==void 0?i:{},d=new TextEncoder().encode(JSON.stringify(o)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,d)}_encodeUserBroadcastPush(e,n,i){var o,u;const d=e.topic,h=(o=e.ref)!==null&&o!==void 0?o:"",m=(u=e.join_ref)!==null&&u!==void 0?u:"",p=e.payload.event,_=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},f=Object.keys(_).length===0?"":JSON.stringify(_);if(m.length>255)throw new Error(`joinRef length ${m.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`ref length ${h.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`topic length ${d.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`userEvent length ${p.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`metadata length ${f.length} exceeds maximum of 255`);const l=this.USER_BROADCAST_PUSH_META_LENGTH+m.length+h.length+d.length+p.length+f.length,g=new ArrayBuffer(this.HEADER_LENGTH+l);let v=new DataView(g),S=0;v.setUint8(S++,this.KINDS.userBroadcastPush),v.setUint8(S++,m.length),v.setUint8(S++,h.length),v.setUint8(S++,d.length),v.setUint8(S++,p.length),v.setUint8(S++,f.length),v.setUint8(S++,n),Array.from(m,E=>v.setUint8(S++,E.charCodeAt(0))),Array.from(h,E=>v.setUint8(S++,E.charCodeAt(0))),Array.from(d,E=>v.setUint8(S++,E.charCodeAt(0))),Array.from(p,E=>v.setUint8(S++,E.charCodeAt(0))),Array.from(f,E=>v.setUint8(S++,E.charCodeAt(0)));var T=new Uint8Array(g.byteLength+i.byteLength);return T.set(new Uint8Array(g),0),T.set(new Uint8Array(i),g.byteLength),T.buffer}decode(e,n){if(this._isArrayBuffer(e)){let i=this._binaryDecode(e);return n(i)}if(typeof e=="string"){const i=JSON.parse(e),[o,u,d,h,m]=i;return n({join_ref:o,ref:u,topic:d,event:h,payload:m})}return n({})}_binaryDecode(e){const n=new DataView(e),i=n.getUint8(0),o=new TextDecoder;switch(i){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,o)}}_decodeUserBroadcast(e,n,i){const o=n.getUint8(1),u=n.getUint8(2),d=n.getUint8(3),h=n.getUint8(4);let m=this.HEADER_LENGTH+4;const p=i.decode(e.slice(m,m+o));m=m+o;const _=i.decode(e.slice(m,m+u));m=m+u;const f=i.decode(e.slice(m,m+d));m=m+d;const l=e.slice(m,e.byteLength),g=h===this.JSON_ENCODING?JSON.parse(i.decode(l)):l,v={type:this.BROADCAST_EVENT,event:_,payload:g};return d>0&&(v.meta=JSON.parse(f)),{join_ref:null,ref:null,topic:p,event:this.BROADCAST_EVENT,payload:v}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e?.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([i])=>n.includes(i)))}}class Timer{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var PostgresTypes;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(PostgresTypes||(PostgresTypes={}));const convertChangeData=(t,e,n={})=>{var i;const o=(i=n.skipTypes)!==null&&i!==void 0?i:[];return e?Object.keys(e).reduce((u,d)=>(u[d]=convertColumn(d,t,e,o),u),{}):{}},convertColumn=(t,e,n,i)=>{const o=e.find(h=>h.name===t),u=o?.type,d=n[t];return u&&!i.includes(u)?convertCell(u,d):noop$1(d)},convertCell=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return toArray(e,n)}switch(t){case PostgresTypes.bool:return toBoolean(e);case PostgresTypes.float4:case PostgresTypes.float8:case PostgresTypes.int2:case PostgresTypes.int4:case PostgresTypes.int8:case PostgresTypes.numeric:case PostgresTypes.oid:return toNumber(e);case PostgresTypes.json:case PostgresTypes.jsonb:return toJson(e);case PostgresTypes.timestamp:return toTimestampString(e);case PostgresTypes.abstime:case PostgresTypes.date:case PostgresTypes.daterange:case PostgresTypes.int4range:case PostgresTypes.int8range:case PostgresTypes.money:case PostgresTypes.reltime:case PostgresTypes.text:case PostgresTypes.time:case PostgresTypes.timestamptz:case PostgresTypes.timetz:case PostgresTypes.tsrange:case PostgresTypes.tstzrange:return noop$1(e);default:return noop$1(e)}},noop$1=t=>t,toBoolean=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},toNumber=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},toJson=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},toArray=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,i=t[n];if(t[0]==="{"&&i==="}"){let u;const d=t.slice(1,n);try{u=JSON.parse("["+d+"]")}catch{u=d?d.split(","):[]}return u.map(h=>convertCell(e,h))}return t},toTimestampString=t=>typeof t=="string"?t.replace(" ","T"):t,httpEndpointURL=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Push{constructor(e,n,i={},o=DEFAULT_TIMEOUT){this.channel=e,this.event=n,this.payload=i,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var i;return this._hasReceived(e)&&n((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(i=>i.status===e).forEach(i=>i.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var REALTIME_PRESENCE_LISTEN_EVENTS;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(REALTIME_PRESENCE_LISTEN_EVENTS||(REALTIME_PRESENCE_LISTEN_EVENTS={}));class RealtimePresence{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},o=>{const{onJoin:u,onLeave:d,onSync:h}=this.caller;this.joinRef=this.channel._joinRef(),this.state=RealtimePresence.syncState(this.state,o,u,d),this.pendingDiffs.forEach(m=>{this.state=RealtimePresence.syncDiff(this.state,m,u,d)}),this.pendingDiffs=[],h()}),this.channel._on(i.diff,{},o=>{const{onJoin:u,onLeave:d,onSync:h}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=RealtimePresence.syncDiff(this.state,o,u,d),h())}),this.onJoin((o,u,d)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:u,newPresences:d})}),this.onLeave((o,u,d)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:u,leftPresences:d})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,i,o){const u=this.cloneDeep(e),d=this.transformState(n),h={},m={};return this.map(u,(p,_)=>{d[p]||(m[p]=_)}),this.map(d,(p,_)=>{const f=u[p];if(f){const l=_.map(T=>T.presence_ref),g=f.map(T=>T.presence_ref),v=_.filter(T=>g.indexOf(T.presence_ref)<0),S=f.filter(T=>l.indexOf(T.presence_ref)<0);v.length>0&&(h[p]=v),S.length>0&&(m[p]=S)}else h[p]=_}),this.syncDiff(u,{joins:h,leaves:m},i,o)}static syncDiff(e,n,i,o){const{joins:u,leaves:d}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return i||(i=()=>{}),o||(o=()=>{}),this.map(u,(h,m)=>{var p;const _=(p=e[h])!==null&&p!==void 0?p:[];if(e[h]=this.cloneDeep(m),_.length>0){const f=e[h].map(g=>g.presence_ref),l=_.filter(g=>f.indexOf(g.presence_ref)<0);e[h].unshift(...l)}i(h,_,m)}),this.map(d,(h,m)=>{let p=e[h];if(!p)return;const _=m.map(f=>f.presence_ref);p=p.filter(f=>_.indexOf(f.presence_ref)<0),e[h]=p,o(h,p,m),p.length===0&&delete e[h]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(i=>n(i,e[i]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,i)=>{const o=e[i];return"metas"in o?n[i]=o.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):n[i]=o,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var REALTIME_POSTGRES_CHANGES_LISTEN_EVENT;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(REALTIME_POSTGRES_CHANGES_LISTEN_EVENT||(REALTIME_POSTGRES_CHANGES_LISTEN_EVENT={}));var REALTIME_LISTEN_TYPES;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(REALTIME_LISTEN_TYPES||(REALTIME_LISTEN_TYPES={}));var REALTIME_SUBSCRIBE_STATES;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(REALTIME_SUBSCRIBE_STATES||(REALTIME_SUBSCRIBE_STATES={}));class RealtimeChannel{constructor(e,n={config:{}},i){var o,u;if(this.topic=e,this.params=n,this.socket=i,this.bindings={},this.state=CHANNEL_STATES.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Push(this,CHANNEL_EVENTS.join,this.params,this.timeout),this.rejoinTimer=new Timer(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=CHANNEL_STATES.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(d=>d.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=CHANNEL_STATES.closed,this.socket._remove(this)}),this._onError(d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=CHANNEL_STATES.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=CHANNEL_STATES.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=CHANNEL_STATES.errored,this.rejoinTimer.scheduleTimeout())}),this._on(CHANNEL_EVENTS.reply,{},(d,h)=>{this._trigger(this._replyEventName(h),d)}),this.presence=new RealtimePresence(this),this.broadcastEndpointURL=httpEndpointURL(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((u=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||u===void 0)&&u.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var i,o,u;if(this.socket.isConnected()||this.socket.connect(),this.state==CHANNEL_STATES.closed){const{config:{broadcast:d,presence:h,private:m}}=this.params,p=(o=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(g=>g.filter))!==null&&o!==void 0?o:[],_=!!this.bindings[REALTIME_LISTEN_TYPES.PRESENCE]&&this.bindings[REALTIME_LISTEN_TYPES.PRESENCE].length>0||((u=this.params.config.presence)===null||u===void 0?void 0:u.enabled)===!0,f={},l={broadcast:d,presence:Object.assign(Object.assign({},h),{enabled:_}),postgres_changes:p,private:m};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(g=>e?.(REALTIME_SUBSCRIBE_STATES.CHANNEL_ERROR,g)),this._onClose(()=>e?.(REALTIME_SUBSCRIBE_STATES.CLOSED)),this.updateJoinPayload(Object.assign({config:l},f)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:g})=>{var v;if(this.socket._isManualToken()||this.socket.setAuth(),g===void 0){e?.(REALTIME_SUBSCRIBE_STATES.SUBSCRIBED);return}else{const S=this.bindings.postgres_changes,T=(v=S?.length)!==null&&v!==void 0?v:0,E=[];for(let O=0;O<T;O++){const R=S[O],{filter:{event:M,schema:C,table:j,filter:$}}=R,L=g&&g[O];if(L&&L.event===M&&RealtimeChannel.isFilterValueEqual(L.schema,C)&&RealtimeChannel.isFilterValueEqual(L.table,j)&&RealtimeChannel.isFilterValueEqual(L.filter,$))E.push(Object.assign(Object.assign({},R),{id:L.id}));else{this.unsubscribe(),this.state=CHANNEL_STATES.errored,e?.(REALTIME_SUBSCRIBE_STATES.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=E,e&&e(REALTIME_SUBSCRIBE_STATES.SUBSCRIBED);return}}).receive("error",g=>{this.state=CHANNEL_STATES.errored,e?.(REALTIME_SUBSCRIBE_STATES.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{e?.(REALTIME_SUBSCRIBE_STATES.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,i){return this.state===CHANNEL_STATES.joined&&e===REALTIME_LISTEN_TYPES.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,i)}async httpSend(e,n,i={}){var o;if(n==null)return Promise.reject("Payload is required for httpSend()");const u={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(u.Authorization=`Bearer ${this.socket.accessTokenValue}`);const d={method:"POST",headers:u,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},h=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(o=i.timeout)!==null&&o!==void 0?o:this.timeout);if(h.status===202)return{success:!0};let m=h.statusText;try{const p=await h.json();m=p.error||p.message||m}catch{}return Promise.reject(new Error(m))}async send(e,n={}){var i,o;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:u,payload:d}=e,h={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(h.Authorization=`Bearer ${this.socket.accessTokenValue}`);const m={method:"POST",headers:h,body:JSON.stringify({messages:[{topic:this.subTopic,event:u,payload:d,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);return await((o=p.body)===null||o===void 0?void 0:o.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(u=>{var d,h,m;const p=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((m=(h=(d=this.params)===null||d===void 0?void 0:d.config)===null||h===void 0?void 0:h.broadcast)===null||m===void 0)&&m.ack)&&u("ok"),p.receive("ok",()=>u("ok")),p.receive("error",()=>u("error")),p.receive("timeout",()=>u("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=CHANNEL_STATES.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(CHANNEL_EVENTS.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(o=>{i=new Push(this,CHANNEL_EVENTS.leave,{},e),i.receive("ok",()=>{n(),o("ok")}).receive("timeout",()=>{n(),o("timed out")}).receive("error",()=>{o("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=CHANNEL_STATES.closed,this.bindings={}}async _fetchWithTimeout(e,n,i){const o=new AbortController,u=setTimeout(()=>o.abort(),i),d=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:o.signal}));return clearTimeout(u),d}_push(e,n,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new Push(this,e,n,i);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>MAX_PUSH_BUFFER_SIZE){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,i){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,i){var o,u;const d=e.toLocaleLowerCase(),{close:h,error:m,leave:p,join:_}=CHANNEL_EVENTS;if(i&&[h,m,p,_].indexOf(d)>=0&&i!==this._joinRef())return;let l=this._onMessage(d,n,i);if(n&&!l)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(d)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(g=>{var v,S,T;return((v=g.filter)===null||v===void 0?void 0:v.event)==="*"||((T=(S=g.filter)===null||S===void 0?void 0:S.event)===null||T===void 0?void 0:T.toLocaleLowerCase())===d}).map(g=>g.callback(l,i)):(u=this.bindings[d])===null||u===void 0||u.filter(g=>{var v,S,T,E,O,R;if(["broadcast","presence","postgres_changes"].includes(d))if("id"in g){const M=g.id,C=(v=g.filter)===null||v===void 0?void 0:v.event;return M&&((S=n.ids)===null||S===void 0?void 0:S.includes(M))&&(C==="*"||C?.toLocaleLowerCase()===((T=n.data)===null||T===void 0?void 0:T.type.toLocaleLowerCase()))}else{const M=(O=(E=g?.filter)===null||E===void 0?void 0:E.event)===null||O===void 0?void 0:O.toLocaleLowerCase();return M==="*"||M===((R=n?.event)===null||R===void 0?void 0:R.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===d}).map(g=>{if(typeof l=="object"&&"ids"in l){const v=l.data,{schema:S,table:T,commit_timestamp:E,type:O,errors:R}=v;l=Object.assign(Object.assign({},{schema:S,table:T,commit_timestamp:E,eventType:O,new:{},old:{},errors:R}),this._getPayloadRecords(v))}g.callback(l,i)})}_isClosed(){return this.state===CHANNEL_STATES.closed}_isJoined(){return this.state===CHANNEL_STATES.joined}_isJoining(){return this.state===CHANNEL_STATES.joining}_isLeaving(){return this.state===CHANNEL_STATES.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,i){const o=e.toLocaleLowerCase(),u={type:o,filter:n,callback:i};return this.bindings[o]?this.bindings[o].push(u):this.bindings[o]=[u],this}_off(e,n){const i=e.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(o=>{var u;return!(((u=o.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===i&&RealtimeChannel.isEqual(o.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const i in e)if(e[i]!==n[i])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(CHANNEL_EVENTS.close,{},e)}_onError(e){this._on(CHANNEL_EVENTS.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=CHANNEL_STATES.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=convertChangeData(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=convertChangeData(e.columns,e.old_record)),n}}const noop=()=>{},CONNECTION_TIMEOUTS={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},RECONNECT_INTERVALS=[1e3,2e3,5e3,1e4],DEFAULT_RECONNECT_FALLBACK=1e4,WORKER_SCRIPT=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class RealtimeClient{constructor(e,n){var i;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=DEFAULT_TIMEOUT,this.transport=null,this.heartbeatIntervalMs=CONNECTION_TIMEOUTS.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=noop,this.ref=0,this.reconnectTimer=null,this.vsn=DEFAULT_VSN,this.logger=noop,this.conn=null,this.sendBuffer=[],this.serializer=new Serializer,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=o=>o?(...u)=>o(...u):(...u)=>fetch(...u),!(!((i=n?.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${TRANSPORTS.websocket}`,this.httpEndpoint=httpEndpointURL(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=WebSocketFactory.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,i){this.logger(e,n,i)}connectionState(){switch(this.conn&&this.conn.readyState){case SOCKET_STATES.connecting:return CONNECTION_STATE.Connecting;case SOCKET_STATES.open:return CONNECTION_STATE.Open;case SOCKET_STATES.closing:return CONNECTION_STATE.Closing;default:return CONNECTION_STATE.Closed}}isConnected(){return this.connectionState()===CONNECTION_STATE.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const i=`realtime:${e}`,o=this.getChannels().find(u=>u.topic===i);if(o)return o;{const u=new RealtimeChannel(`realtime:${e}`,n,this);return this.channels.push(u),u}}push(e){const{topic:n,event:i,payload:o,ref:u}=e,d=()=>{this.encode(e,h=>{var m;(m=this.conn)===null||m===void 0||m.send(h)})};this.log("push",`${n} ${i} (${u})`,o),this.isConnected()?d():this.sendBuffer.push(d)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(WS_CLOSE_NORMAL,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},CONNECTION_TIMEOUTS.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(i=>i.topic===e&&(i._isJoined()||i._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){const p=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",p)}catch(_){this.log("error","error in heartbeat callback",_)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:i,event:o,payload:u,ref:d}=n,h=d?`(${d})`:"",m=u.status||"";this.log("receive",`${m} ${i} ${o} ${h}`.trim(),u),this.channels.filter(p=>p._isMember(i)).forEach(p=>p._trigger(o,u,d)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===SOCKET_STATES.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===SOCKET_STATES.open||this.conn.readyState===SOCKET_STATES.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e);try{this.heartbeatCallback("error")}catch(n){this.log("error","error in heartbeat callback",n)}}_triggerChanError(){this.channels.forEach(e=>e._trigger(CHANNEL_EVENTS.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const i=e.match(/\?/)?"&":"?",o=new URLSearchParams(n);return`${e}${i}${o}`}_workerObjectUrl(e){let n;if(e)n=e;else{const i=new Blob([WORKER_SCRIPT],{type:"application/javascript"});n=URL.createObjectURL(i)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,i=!1;if(e)n=e,i=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(o){this.log("error","Error fetching access token from callback",o),n=this.accessTokenValue}else n=this.accessTokenValue;i?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(o=>{const u={access_token:n,version:DEFAULT_VERSION};n&&o.updateJoinPayload(u),o.joinedOnce&&o._isJoined()&&o._push(CHANNEL_EVENTS.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(i=>{try{i(n)}catch(o){this.log("error",`error in ${e} callback`,o)}})}catch(i){this.log("error",`error triggering ${e} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new Timer(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},CONNECTION_TIMEOUTS.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,i,o,u,d,h,m,p,_,f,l,g;switch(this.transport=(n=e?.transport)!==null&&n!==void 0?n:null,this.timeout=(i=e?.timeout)!==null&&i!==void 0?i:DEFAULT_TIMEOUT,this.heartbeatIntervalMs=(o=e?.heartbeatIntervalMs)!==null&&o!==void 0?o:CONNECTION_TIMEOUTS.HEARTBEAT_INTERVAL,this.worker=(u=e?.worker)!==null&&u!==void 0?u:!1,this.accessToken=(d=e?.accessToken)!==null&&d!==void 0?d:null,this.heartbeatCallback=(h=e?.heartbeatCallback)!==null&&h!==void 0?h:noop,this.vsn=(m=e?.vsn)!==null&&m!==void 0?m:DEFAULT_VSN,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=e?.reconnectAfterMs)!==null&&p!==void 0?p:(v=>RECONNECT_INTERVALS[v-1]||DEFAULT_RECONNECT_FALLBACK),this.vsn){case VSN_1_0_0:this.encode=(_=e?.encode)!==null&&_!==void 0?_:((v,S)=>S(JSON.stringify(v))),this.decode=(f=e?.decode)!==null&&f!==void 0?f:((v,S)=>S(JSON.parse(v)));break;case VSN_2_0_0:this.encode=(l=e?.encode)!==null&&l!==void 0?l:this.serializer.encode.bind(this.serializer),this.decode=(g=e?.decode)!==null&&g!==void 0?g:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}var IcebergError=class extends Error{constructor(t,e){super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&e.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function buildUrl(t,e,n){const i=new URL(e,t);if(n)for(const[o,u]of Object.entries(n))u!==void 0&&i.searchParams.set(o,u);return i.toString()}async function buildAuthHeaders(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function createFetchClient(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:i,query:o,body:u,headers:d}){const h=buildUrl(t.baseUrl,i,o),m=await buildAuthHeaders(t.auth),p=await e(h,{method:n,headers:{...u?{"Content-Type":"application/json"}:{},...m,...d},body:u?JSON.stringify(u):void 0}),_=await p.text(),f=(p.headers.get("content-type")||"").includes("application/json"),l=f&&_?JSON.parse(_):_;if(!p.ok){const g=f?l:void 0,v=g?.error;throw new IcebergError(v?.message??`Request failed with status ${p.status}`,{status:p.status,icebergType:v?.type,icebergCode:v?.code,details:g})}return{status:p.status,headers:p.headers,data:l}}}}function namespaceToPath(t){return t.join("")}var NamespaceOperations=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:namespaceToPath(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(i=>({namespace:i}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${namespaceToPath(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${namespaceToPath(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${namespaceToPath(t.namespace)}`}),!0}catch(e){if(e instanceof IcebergError&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof IcebergError&&n.status===409)return;throw n}}};function namespaceToPath2(t){return t.join("")}var TableOperations=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${namespaceToPath2(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${namespaceToPath2(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${namespaceToPath2(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${namespaceToPath2(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String(e?.purge??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${namespaceToPath2(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${namespaceToPath2(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof IcebergError&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof IcebergError&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},IcebergRestCatalog=class{constructor(t){let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=createFetchClient({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=t.accessDelegation?.join(","),this.namespaceOps=new NamespaceOperations(this.client,e),this.tableOps=new TableOperations(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},StorageError=class extends Error{constructor(t,e="storage",n,i){super(t),this.__isStorageError=!0,this.namespace=e,this.name=e==="vectors"?"StorageVectorsError":"StorageError",this.status=n,this.statusCode=i}};function isStorageError(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var StorageApiError=class extends StorageError{constructor(t,e,n,i="storage"){super(t,i,e,n),this.name=i==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},StorageUnknownError=class extends StorageError{constructor(t,e,n="storage"){super(t,n),this.name=n==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=e}};const resolveFetch$2=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),isPlainObject=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},recursiveToCamel=t=>{if(Array.isArray(t))return t.map(n=>recursiveToCamel(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,i])=>{const o=n.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));e[o]=recursiveToCamel(i)}),e},isValidBucketName=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function _typeof$1(t){"@babel/helpers - typeof";return _typeof$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$1(t)}function toPrimitive$1(t,e){if(_typeof$1(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(_typeof$1(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function toPropertyKey$1(t){var e=toPrimitive$1(t,"string");return _typeof$1(e)=="symbol"?e:e+""}function _defineProperty$1(t,e,n){return(e=toPropertyKey$1(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ownKeys$1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread2$1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$1(Object(n),!0).forEach(function(i){_defineProperty$1(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$1(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}const _getErrorMessage$1=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},handleError$2=async(t,e,n,i)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!n?.noResolveJson){const o=t,u=o.status||500;if(typeof o.json=="function")o.json().then(d=>{const h=d?.statusCode||d?.code||u+"";e(new StorageApiError(_getErrorMessage$1(d),u,h,i))}).catch(()=>{if(i==="vectors"){const d=u+"";e(new StorageApiError(o.statusText||`HTTP ${u} error`,u,d,i))}else{const d=u+"";e(new StorageApiError(o.statusText||`HTTP ${u} error`,u,d,i))}});else{const d=u+"";e(new StorageApiError(o.statusText||`HTTP ${u} error`,u,d,i))}}else e(new StorageUnknownError(_getErrorMessage$1(t),t,i))},_getRequestParams$1=(t,e,n,i)=>{const o={method:t,headers:e?.headers||{}};return t==="GET"||t==="HEAD"||!i?_objectSpread2$1(_objectSpread2$1({},o),n):(isPlainObject(i)?(o.headers=_objectSpread2$1({"Content-Type":"application/json"},e?.headers),o.body=JSON.stringify(i)):o.body=i,e?.duplex&&(o.duplex=e.duplex),_objectSpread2$1(_objectSpread2$1({},o),n))};async function _handleRequest$1(t,e,n,i,o,u,d){return new Promise((h,m)=>{t(n,_getRequestParams$1(e,i,o,u)).then(p=>{if(!p.ok)throw p;if(i?.noResolveJson)return p;if(d==="vectors"){const _=p.headers.get("content-type");if(p.headers.get("content-length")==="0"||p.status===204)return{};if(!_||!_.includes("application/json"))return{}}return p.json()}).then(p=>h(p)).catch(p=>handleError$2(p,m,i,d))})}function createFetchApi(t="storage"){return{get:async(e,n,i,o)=>_handleRequest$1(e,"GET",n,i,o,void 0,t),post:async(e,n,i,o,u)=>_handleRequest$1(e,"POST",n,o,u,i,t),put:async(e,n,i,o,u)=>_handleRequest$1(e,"PUT",n,o,u,i,t),head:async(e,n,i,o)=>_handleRequest$1(e,"HEAD",n,_objectSpread2$1(_objectSpread2$1({},i),{},{noResolveJson:!0}),o,void 0,t),remove:async(e,n,i,o,u)=>_handleRequest$1(e,"DELETE",n,o,u,i,t)}}const defaultApi=createFetchApi("storage"),{get,post,put,head,remove}=defaultApi,vectorsApi=createFetchApi("vectors");var BaseApiClient=class{constructor(t,e={},n,i="storage"){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.fetch=resolveFetch$2(n),this.namespace=i}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(t){var e=this;try{return{data:await t(),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(isStorageError(n))return{data:null,error:n};throw n}}},StreamDownloadBuilder=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(isStorageError(e))return{data:null,error:e};throw e}}};let _Symbol$toStringTag;_Symbol$toStringTag=Symbol.toStringTag;var BlobDownloadBuilder=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[_Symbol$toStringTag]="BlobDownloadBuilder",this.promise=null}asStream(){return new StreamDownloadBuilder(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(isStorageError(e))return{data:null,error:e};throw e}}};const DEFAULT_SEARCH_OPTIONS={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},DEFAULT_FILE_OPTIONS={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var StorageFileApi=class extends BaseApiClient{constructor(t,e={},n,i){super(t,e,i,"storage"),this.bucketId=n}async uploadOrUpdate(t,e,n,i){var o=this;return o.handleOperation(async()=>{let u;const d=_objectSpread2$1(_objectSpread2$1({},DEFAULT_FILE_OPTIONS),i);let h=_objectSpread2$1(_objectSpread2$1({},o.headers),t==="POST"&&{"x-upsert":String(d.upsert)});const m=d.metadata;typeof Blob<"u"&&n instanceof Blob?(u=new FormData,u.append("cacheControl",d.cacheControl),m&&u.append("metadata",o.encodeMetadata(m)),u.append("",n)):typeof FormData<"u"&&n instanceof FormData?(u=n,u.has("cacheControl")||u.append("cacheControl",d.cacheControl),m&&!u.has("metadata")&&u.append("metadata",o.encodeMetadata(m))):(u=n,h["cache-control"]=`max-age=${d.cacheControl}`,h["content-type"]=d.contentType,m&&(h["x-metadata"]=o.toBase64(o.encodeMetadata(m))),(typeof ReadableStream<"u"&&u instanceof ReadableStream||u&&typeof u=="object"&&"pipe"in u&&typeof u.pipe=="function")&&!d.duplex&&(d.duplex="half")),i?.headers&&(h=_objectSpread2$1(_objectSpread2$1({},h),i.headers));const p=o._removeEmptyFolders(e),_=o._getFinalPath(p),f=await(t=="PUT"?put:post)(o.fetch,`${o.url}/object/${_}`,u,_objectSpread2$1({headers:h},d?.duplex?{duplex:d.duplex}:{}));return{path:p,id:f.Id,fullPath:f.Key}})}async upload(t,e,n){return this.uploadOrUpdate("POST",t,e,n)}async uploadToSignedUrl(t,e,n,i){var o=this;const u=o._removeEmptyFolders(t),d=o._getFinalPath(u),h=new URL(o.url+`/object/upload/sign/${d}`);return h.searchParams.set("token",e),o.handleOperation(async()=>{let m;const p=_objectSpread2$1({upsert:DEFAULT_FILE_OPTIONS.upsert},i),_=_objectSpread2$1(_objectSpread2$1({},o.headers),{"x-upsert":String(p.upsert)});return typeof Blob<"u"&&n instanceof Blob?(m=new FormData,m.append("cacheControl",p.cacheControl),m.append("",n)):typeof FormData<"u"&&n instanceof FormData?(m=n,m.append("cacheControl",p.cacheControl)):(m=n,_["cache-control"]=`max-age=${p.cacheControl}`,_["content-type"]=p.contentType),{path:u,fullPath:(await put(o.fetch,h.toString(),m,{headers:_})).Key}})}async createSignedUploadUrl(t,e){var n=this;return n.handleOperation(async()=>{let i=n._getFinalPath(t);const o=_objectSpread2$1({},n.headers);e?.upsert&&(o["x-upsert"]="true");const u=await post(n.fetch,`${n.url}/object/upload/sign/${i}`,{},{headers:o}),d=new URL(n.url+u.url),h=d.searchParams.get("token");if(!h)throw new StorageError("No token returned by API");return{signedUrl:d.toString(),path:t,token:h}})}async update(t,e,n){return this.uploadOrUpdate("PUT",t,e,n)}async move(t,e,n){var i=this;return i.handleOperation(async()=>await post(i.fetch,`${i.url}/object/move`,{bucketId:i.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n?.destinationBucket},{headers:i.headers}))}async copy(t,e,n){var i=this;return i.handleOperation(async()=>({path:(await post(i.fetch,`${i.url}/object/copy`,{bucketId:i.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n?.destinationBucket},{headers:i.headers})).Key}))}async createSignedUrl(t,e,n){var i=this;return i.handleOperation(async()=>{let o=i._getFinalPath(t),u=await post(i.fetch,`${i.url}/object/sign/${o}`,_objectSpread2$1({expiresIn:e},n?.transform?{transform:n.transform}:{}),{headers:i.headers});const d=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{signedUrl:encodeURI(`${i.url}${u.signedURL}${d}`)}})}async createSignedUrls(t,e,n){var i=this;return i.handleOperation(async()=>{const o=await post(i.fetch,`${i.url}/object/sign/${i.bucketId}`,{expiresIn:e,paths:t},{headers:i.headers}),u=n?.download?`&download=${n.download===!0?"":n.download}`:"";return o.map(d=>_objectSpread2$1(_objectSpread2$1({},d),{},{signedUrl:d.signedURL?encodeURI(`${i.url}${d.signedURL}${u}`):null}))})}download(t,e){const n=typeof e?.transform<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString(e?.transform||{}),o=i?`?${i}`:"",u=this._getFinalPath(t),d=()=>get(this.fetch,`${this.url}/${n}/${u}${o}`,{headers:this.headers,noResolveJson:!0});return new BlobDownloadBuilder(d,this.shouldThrowOnError)}async info(t){var e=this;const n=e._getFinalPath(t);return e.handleOperation(async()=>recursiveToCamel(await get(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})))}async exists(t){var e=this;const n=e._getFinalPath(t);try{return await head(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(isStorageError(i)&&i instanceof StorageUnknownError){const o=i.originalError;if([400,404].includes(o?.status))return{data:!1,error:i}}throw i}}getPublicUrl(t,e){const n=this._getFinalPath(t),i=[],o=e?.download?`download=${e.download===!0?"":e.download}`:"";o!==""&&i.push(o);const u=typeof e?.transform<"u"?"render/image":"object",d=this.transformOptsToQueryString(e?.transform||{});d!==""&&i.push(d);let h=i.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${n}${h}`)}}}async remove(t){var e=this;return e.handleOperation(async()=>await remove(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}))}async list(t,e,n){var i=this;return i.handleOperation(async()=>{const o=_objectSpread2$1(_objectSpread2$1(_objectSpread2$1({},DEFAULT_SEARCH_OPTIONS),e),{},{prefix:t||""});return await post(i.fetch,`${i.url}/object/list/${i.bucketId}`,o,{headers:i.headers},n)})}async listV2(t,e){var n=this;return n.handleOperation(async()=>{const i=_objectSpread2$1({},t);return await post(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,i,{headers:n.headers},e)})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const version$2="2.93.3",DEFAULT_HEADERS$2={"X-Client-Info":`storage-js/${version$2}`};var StorageBucketApi=class extends BaseApiClient{constructor(t,e={},n,i){const o=new URL(t);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase."));const u=o.href.replace(/\/$/,""),d=_objectSpread2$1(_objectSpread2$1({},DEFAULT_HEADERS$2),e);super(u,d,n,"storage")}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const n=e.listBucketOptionsToQueryString(t);return await get(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers})})}async getBucket(t){var e=this;return e.handleOperation(async()=>await get(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}))}async createBucket(t,e={public:!1}){var n=this;return n.handleOperation(async()=>await post(n.fetch,`${n.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}))}async updateBucket(t,e){var n=this;return n.handleOperation(async()=>await put(n.fetch,`${n.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}))}async emptyBucket(t){var e=this;return e.handleOperation(async()=>await post(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await remove(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},StorageAnalyticsClient=class extends BaseApiClient{constructor(t,e={},n){const i=t.replace(/\/$/,""),o=_objectSpread2$1(_objectSpread2$1({},DEFAULT_HEADERS$2),e);super(i,o,n,"storage")}async createBucket(t){var e=this;return e.handleOperation(async()=>await post(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}))}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const n=new URLSearchParams;t?.limit!==void 0&&n.set("limit",t.limit.toString()),t?.offset!==void 0&&n.set("offset",t.offset.toString()),t?.sortColumn&&n.set("sortColumn",t.sortColumn),t?.sortOrder&&n.set("sortOrder",t.sortOrder),t?.search&&n.set("search",t.search);const i=n.toString(),o=i?`${e.url}/bucket?${i}`:`${e.url}/bucket`;return await get(e.fetch,o,{headers:e.headers})})}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await remove(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}from(t){var e=this;if(!isValidBucketName(t))throw new StorageError("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new IcebergRestCatalog({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),i=this.shouldThrowOnError;return new Proxy(n,{get(o,u){const d=o[u];return typeof d!="function"?d:async(...h)=>{try{return{data:await d.apply(o,h),error:null}}catch(m){if(i)throw m;return{data:null,error:m}}}}})}},VectorIndexApi=class extends BaseApiClient{constructor(t,e={},n){const i=t.replace(/\/$/,""),o=_objectSpread2$1(_objectSpread2$1({},DEFAULT_HEADERS$2),{},{"Content-Type":"application/json"},e);super(i,o,n,"vectors")}async createIndex(t){var e=this;return e.handleOperation(async()=>await vectorsApi.post(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{})}async getIndex(t,e){var n=this;return n.handleOperation(async()=>await vectorsApi.post(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers}))}async listIndexes(t){var e=this;return e.handleOperation(async()=>await vectorsApi.post(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}))}async deleteIndex(t,e){var n=this;return n.handleOperation(async()=>await vectorsApi.post(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers})||{})}},VectorDataApi=class extends BaseApiClient{constructor(t,e={},n){const i=t.replace(/\/$/,""),o=_objectSpread2$1(_objectSpread2$1({},DEFAULT_HEADERS$2),{},{"Content-Type":"application/json"},e);super(i,o,n,"vectors")}async putVectors(t){var e=this;if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return e.handleOperation(async()=>await vectorsApi.post(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{})}async getVectors(t){var e=this;return e.handleOperation(async()=>await vectorsApi.post(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}))}async listVectors(t){var e=this;if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return e.handleOperation(async()=>await vectorsApi.post(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}))}async queryVectors(t){var e=this;return e.handleOperation(async()=>await vectorsApi.post(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}))}async deleteVectors(t){var e=this;if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return e.handleOperation(async()=>await vectorsApi.post(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{})}},VectorBucketApi=class extends BaseApiClient{constructor(t,e={},n){const i=t.replace(/\/$/,""),o=_objectSpread2$1(_objectSpread2$1({},DEFAULT_HEADERS$2),{},{"Content-Type":"application/json"},e);super(i,o,n,"vectors")}async createBucket(t){var e=this;return e.handleOperation(async()=>await vectorsApi.post(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}async getBucket(t){var e=this;return e.handleOperation(async()=>await vectorsApi.post(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}))}async listBuckets(t={}){var e=this;return e.handleOperation(async()=>await vectorsApi.post(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await vectorsApi.post(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}},StorageVectorsClient=class extends VectorBucketApi{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new VectorBucketScope(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,n=this;return e().call(n,t)}async getBucket(t){var e=()=>super.getBucket,n=this;return e().call(n,t)}async listBuckets(t={}){var e=()=>super.listBuckets,n=this;return e().call(n,t)}async deleteBucket(t){var e=()=>super.deleteBucket,n=this;return e().call(n,t)}},VectorBucketScope=class extends VectorIndexApi{constructor(t,e,n,i){super(t,e,i),this.vectorBucketName=n}async createIndex(t){var e=()=>super.createIndex,n=this;return e().call(n,_objectSpread2$1(_objectSpread2$1({},t),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,n=this;return e().call(n,_objectSpread2$1(_objectSpread2$1({},t),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,n=this;return e().call(n,n.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,n=this;return e().call(n,n.vectorBucketName,t)}index(t){return new VectorIndexScope(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},VectorIndexScope=class extends VectorDataApi{constructor(t,e,n,i,o){super(t,e,o),this.vectorBucketName=n,this.indexName=i}async putVectors(t){var e=()=>super.putVectors,n=this;return e().call(n,_objectSpread2$1(_objectSpread2$1({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(t){var e=()=>super.getVectors,n=this;return e().call(n,_objectSpread2$1(_objectSpread2$1({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,n=this;return e().call(n,_objectSpread2$1(_objectSpread2$1({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,n=this;return e().call(n,_objectSpread2$1(_objectSpread2$1({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,n=this;return e().call(n,_objectSpread2$1(_objectSpread2$1({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},StorageClient=class extends StorageBucketApi{constructor(t,e={},n,i){super(t,e,n,i)}from(t){return new StorageFileApi(this.url,this.headers,t,this.fetch)}get vectors(){return new StorageVectorsClient(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new StorageAnalyticsClient(this.url+"/iceberg",this.headers,this.fetch)}};const version$1="2.93.3",AUTO_REFRESH_TICK_DURATION_MS=30*1e3,AUTO_REFRESH_TICK_THRESHOLD=3,EXPIRY_MARGIN_MS=AUTO_REFRESH_TICK_THRESHOLD*AUTO_REFRESH_TICK_DURATION_MS,GOTRUE_URL="http://localhost:9999",STORAGE_KEY="supabase.auth.token",DEFAULT_HEADERS$1={"X-Client-Info":`gotrue-js/${version$1}`},API_VERSION_HEADER_NAME="X-Supabase-Api-Version",API_VERSIONS={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},BASE64URL_REGEX=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,JWKS_TTL=600*1e3;class AuthError extends Error{constructor(e,n,i){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=i}}function isAuthError(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class AuthApiError extends AuthError{constructor(e,n,i){super(e,n,i),this.name="AuthApiError",this.status=n,this.code=i}}function isAuthApiError(t){return isAuthError(t)&&t.name==="AuthApiError"}class AuthUnknownError extends AuthError{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class CustomAuthError extends AuthError{constructor(e,n,i,o){super(e,i,o),this.name=n,this.status=i}}class AuthSessionMissingError extends CustomAuthError{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function isAuthSessionMissingError(t){return isAuthError(t)&&t.name==="AuthSessionMissingError"}class AuthInvalidTokenResponseError extends CustomAuthError{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class AuthInvalidCredentialsError extends CustomAuthError{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class AuthImplicitGrantRedirectError extends CustomAuthError{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function isAuthImplicitGrantRedirectError(t){return isAuthError(t)&&t.name==="AuthImplicitGrantRedirectError"}class AuthPKCEGrantCodeExchangeError extends CustomAuthError{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class AuthPKCECodeVerifierMissingError extends CustomAuthError{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class AuthRetryableFetchError extends CustomAuthError{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function isAuthRetryableFetchError(t){return isAuthError(t)&&t.name==="AuthRetryableFetchError"}class AuthWeakPasswordError extends CustomAuthError{constructor(e,n,i){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=i}}class AuthInvalidJwtError extends CustomAuthError{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const TO_BASE64URL="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),IGNORE_BASE64URL=` 	
\r=`.split(""),FROM_BASE64URL=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<IGNORE_BASE64URL.length;e+=1)t[IGNORE_BASE64URL[e].charCodeAt(0)]=-2;for(let e=0;e<TO_BASE64URL.length;e+=1)t[TO_BASE64URL[e].charCodeAt(0)]=e;return t})();function byteToBase64URL(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;n(TO_BASE64URL[i]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;n(TO_BASE64URL[i]),e.queuedBits-=6}}function byteFromBase64URL(t,e,n){const i=FROM_BASE64URL[t];if(i>-1)for(e.queue=e.queue<<6|i,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function stringFromBase64URL(t){const e=[],n=d=>{e.push(String.fromCodePoint(d))},i={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},u=d=>{stringFromUTF8(d,i,n)};for(let d=0;d<t.length;d+=1)byteFromBase64URL(t.charCodeAt(d),o,u);return e.join("")}function codepointToUTF8(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function stringToUTF8(t,e){for(let n=0;n<t.length;n+=1){let i=t.charCodeAt(n);if(i>55295&&i<=56319){const o=(i-55296)*1024&65535;i=(t.charCodeAt(n+1)-56320&65535|o)+65536,n+=1}codepointToUTF8(i,e)}}function stringFromUTF8(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let i=1;i<6;i+=1)if((t>>7-i&1)===0){e.utf8seq=i;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function base64UrlToUint8Array(t){const e=[],n={queue:0,queuedBits:0},i=o=>{e.push(o)};for(let o=0;o<t.length;o+=1)byteFromBase64URL(t.charCodeAt(o),n,i);return new Uint8Array(e)}function stringToUint8Array(t){const e=[];return stringToUTF8(t,n=>e.push(n)),new Uint8Array(e)}function bytesToBase64URL(t){const e=[],n={queue:0,queuedBits:0},i=o=>{e.push(o)};return t.forEach(o=>byteToBase64URL(o,n,i)),byteToBase64URL(null,n,i),e.join("")}function expiresAt(t){return Math.round(Date.now()/1e3)+t}function generateCallbackId(){return Symbol("auth-callback")}const isBrowser=()=>typeof window<"u"&&typeof document<"u",localStorageWriteTests={tested:!1,writable:!1},supportsLocalStorage=()=>{if(!isBrowser())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(localStorageWriteTests.tested)return localStorageWriteTests.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),localStorageWriteTests.tested=!0,localStorageWriteTests.writable=!0}catch{localStorageWriteTests.tested=!0,localStorageWriteTests.writable=!1}return localStorageWriteTests.writable};function parseParametersFromURL(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((o,u)=>{e[u]=o})}catch{}return n.searchParams.forEach((i,o)=>{e[o]=i}),e}const resolveFetch$1=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),looksLikeFetchResponse=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",setItemAsync=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},getItemAsync=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},removeItemAsync=async(t,e)=>{await t.removeItem(e)};class Deferred{constructor(){this.promise=new Deferred.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Deferred.promiseConstructor=Promise;function decodeJWT(t){const e=t.split(".");if(e.length!==3)throw new AuthInvalidJwtError("Invalid JWT structure");for(let i=0;i<e.length;i++)if(!BASE64URL_REGEX.test(e[i]))throw new AuthInvalidJwtError("JWT not in base64url format");return{header:JSON.parse(stringFromBase64URL(e[0])),payload:JSON.parse(stringFromBase64URL(e[1])),signature:base64UrlToUint8Array(e[2]),raw:{header:e[0],payload:e[1]}}}async function sleep(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function retryable(t,e){return new Promise((i,o)=>{(async()=>{for(let u=0;u<1/0;u++)try{const d=await t(u);if(!e(u,null,d)){i(d);return}}catch(d){if(!e(u,d)){o(d);return}}})()})}function dec2hex(t){return("0"+t.toString(16)).substr(-2)}function generatePKCEVerifier(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=n.length;let o="";for(let u=0;u<56;u++)o+=n.charAt(Math.floor(Math.random()*i));return o}return crypto.getRandomValues(e),Array.from(e,dec2hex).join("")}async function sha256(t){const n=new TextEncoder().encode(t),i=await crypto.subtle.digest("SHA-256",n),o=new Uint8Array(i);return Array.from(o).map(u=>String.fromCharCode(u)).join("")}async function generatePKCEChallenge(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await sha256(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function getCodeChallengeAndMethod(t,e,n=!1){const i=generatePKCEVerifier();let o=i;n&&(o+="/PASSWORD_RECOVERY"),await setItemAsync(t,`${e}-code-verifier`,o);const u=await generatePKCEChallenge(i);return[u,i===u?"plain":"s256"]}const API_VERSION_REGEX=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function parseResponseAPIVersion(t){const e=t.headers.get(API_VERSION_HEADER_NAME);if(!e||!e.match(API_VERSION_REGEX))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function validateExp(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function getAlgorithm(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const UUID_REGEX=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function validateUUID(t){if(!UUID_REGEX.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function userNotAvailableProxy(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function insecureUserWarningProxy(t,e){return new Proxy(t,{get:(n,i,o)=>{if(i==="__isInsecureUserWarningProxy")return!0;if(typeof i=="symbol"){const u=i.toString();if(u==="Symbol(Symbol.toPrimitive)"||u==="Symbol(Symbol.toStringTag)"||u==="Symbol(util.inspect.custom)"||u==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,i,o)}return!e.value&&typeof i=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,i,o)}})}function deepClone(t){return JSON.parse(JSON.stringify(t))}const _getErrorMessage=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),NETWORK_ERROR_CODES=[502,503,504];async function handleError$1(t){var e;if(!looksLikeFetchResponse(t))throw new AuthRetryableFetchError(_getErrorMessage(t),0);if(NETWORK_ERROR_CODES.includes(t.status))throw new AuthRetryableFetchError(_getErrorMessage(t),t.status);let n;try{n=await t.json()}catch(u){throw new AuthUnknownError(_getErrorMessage(u),u)}let i;const o=parseResponseAPIVersion(t);if(o&&o.getTime()>=API_VERSIONS["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?i=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(i=n.error_code),i){if(i==="weak_password")throw new AuthWeakPasswordError(_getErrorMessage(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(i==="session_not_found")throw new AuthSessionMissingError}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((u,d)=>u&&typeof d=="string",!0))throw new AuthWeakPasswordError(_getErrorMessage(n),t.status,n.weak_password.reasons);throw new AuthApiError(_getErrorMessage(n),t.status||500,i)}const _getRequestParams=(t,e,n,i)=>{const o={method:t,headers:e?.headers||{}};return t==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),o.body=JSON.stringify(i),Object.assign(Object.assign({},o),n))};async function _request(t,e,n,i){var o;const u=Object.assign({},i?.headers);u[API_VERSION_HEADER_NAME]||(u[API_VERSION_HEADER_NAME]=API_VERSIONS["2024-01-01"].name),i?.jwt&&(u.Authorization=`Bearer ${i.jwt}`);const d=(o=i?.query)!==null&&o!==void 0?o:{};i?.redirectTo&&(d.redirect_to=i.redirectTo);const h=Object.keys(d).length?"?"+new URLSearchParams(d).toString():"",m=await _handleRequest(t,e,n+h,{headers:u,noResolveJson:i?.noResolveJson},{},i?.body);return i?.xform?i?.xform(m):{data:Object.assign({},m),error:null}}async function _handleRequest(t,e,n,i,o,u){const d=_getRequestParams(e,i,o,u);let h;try{h=await t(n,Object.assign({},d))}catch(m){throw console.error(m),new AuthRetryableFetchError(_getErrorMessage(m),0)}if(h.ok||await handleError$1(h),i?.noResolveJson)return h;try{return await h.json()}catch(m){await handleError$1(m)}}function _sessionResponse(t){var e;let n=null;hasSession(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=expiresAt(t.expires_in)));const i=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:i},error:null}}function _sessionResponsePassword(t){const e=_sessionResponse(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,i)=>n&&typeof i=="string",!0)&&(e.data.weak_password=t.weak_password),e}function _userResponse(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function _ssoResponse(t){return{data:t,error:null}}function _generateLinkResponse(t){const{action_link:e,email_otp:n,hashed_token:i,redirect_to:o,verification_type:u}=t,d=__rest(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),h={action_link:e,email_otp:n,hashed_token:i,redirect_to:o,verification_type:u},m=Object.assign({},d);return{data:{properties:h,user:m},error:null}}function _noResolveJsonResponse(t){return t}function hasSession(t){return t.access_token&&t.refresh_token&&t.expires_in}const SIGN_OUT_SCOPES=["global","local","others"];class GoTrueAdminApi{constructor({url:e="",headers:n={},fetch:i}){this.url=e,this.headers=n,this.fetch=resolveFetch$1(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=SIGN_OUT_SCOPES[0]){if(SIGN_OUT_SCOPES.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${SIGN_OUT_SCOPES.join(", ")}`);try{return await _request(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(i){if(isAuthError(i))return{data:null,error:i};throw i}}async inviteUserByEmail(e,n={}){try{return await _request(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:_userResponse})}catch(i){if(isAuthError(i))return{data:{user:null},error:i};throw i}}async generateLink(e){try{const{options:n}=e,i=__rest(e,["options"]),o=Object.assign(Object.assign({},i),n);return"newEmail"in i&&(o.new_email=i?.newEmail,delete o.newEmail),await _request(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:_generateLinkResponse,redirectTo:n?.redirectTo})}catch(n){if(isAuthError(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await _request(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:_userResponse})}catch(n){if(isAuthError(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,i,o,u,d,h,m;try{const p={nextPage:null,lastPage:0,total:0},_=await _request(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(u=(o=e?.perPage)===null||o===void 0?void 0:o.toString())!==null&&u!==void 0?u:""},xform:_noResolveJsonResponse});if(_.error)throw _.error;const f=await _.json(),l=(d=_.headers.get("x-total-count"))!==null&&d!==void 0?d:0,g=(m=(h=_.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&m!==void 0?m:[];return g.length>0&&(g.forEach(v=>{const S=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(v.split(";")[1].split("=")[1]);p[`${T}Page`]=S}),p.total=parseInt(l)),{data:Object.assign(Object.assign({},f),p),error:null}}catch(p){if(isAuthError(p))return{data:{users:[]},error:p};throw p}}async getUserById(e){validateUUID(e);try{return await _request(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:_userResponse})}catch(n){if(isAuthError(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){validateUUID(e);try{return await _request(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:_userResponse})}catch(i){if(isAuthError(i))return{data:{user:null},error:i};throw i}}async deleteUser(e,n=!1){validateUUID(e);try{return await _request(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:_userResponse})}catch(i){if(isAuthError(i))return{data:{user:null},error:i};throw i}}async _listFactors(e){validateUUID(e.userId);try{const{data:n,error:i}=await _request(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:n,error:i}}catch(n){if(isAuthError(n))return{data:null,error:n};throw n}}async _deleteFactor(e){validateUUID(e.userId),validateUUID(e.id);try{return{data:await _request(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(isAuthError(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,i,o,u,d,h,m;try{const p={nextPage:null,lastPage:0,total:0},_=await _request(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(u=(o=e?.perPage)===null||o===void 0?void 0:o.toString())!==null&&u!==void 0?u:""},xform:_noResolveJsonResponse});if(_.error)throw _.error;const f=await _.json(),l=(d=_.headers.get("x-total-count"))!==null&&d!==void 0?d:0,g=(m=(h=_.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&m!==void 0?m:[];return g.length>0&&(g.forEach(v=>{const S=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(v.split(";")[1].split("=")[1]);p[`${T}Page`]=S}),p.total=parseInt(l)),{data:Object.assign(Object.assign({},f),p),error:null}}catch(p){if(isAuthError(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(e){try{return await _request(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(isAuthError(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await _request(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(isAuthError(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await _request(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(isAuthError(i))return{data:null,error:i};throw i}}async _deleteOAuthClient(e){try{return await _request(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(isAuthError(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await _request(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(isAuthError(n))return{data:null,error:n};throw n}}}function memoryLocalStorageAdapter(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const internals={debug:!!(globalThis&&supportsLocalStorage()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class LockAcquireTimeoutError extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class NavigatorLockAcquireTimeoutError extends LockAcquireTimeoutError{}async function navigatorLock(t,e,n){internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const i=new globalThis.AbortController;return e>0&&setTimeout(()=>{i.abort(),internals.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async o=>{if(o){internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,o.name);try{return await n()}finally{internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,o.name)}}else{if(e===0)throw internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new NavigatorLockAcquireTimeoutError(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(internals.debug)try{const u=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function polyfillGlobalThis(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function getAddress(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function fromHex(t){return parseInt(t,16)}function toHex(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,i=>i.toString(16).padStart(2,"0")).join("")}function createSiweMessage(t){var e;const{chainId:n,domain:i,expirationTime:o,issuedAt:u=new Date,nonce:d,notBefore:h,requestId:m,resources:p,scheme:_,uri:f,version:l}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(d&&d.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${d}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(l!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${l}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const g=getAddress(t.address),v=_?`${_}://${i}`:i,S=t.statement?`${t.statement}
`:"",T=`${v} wants you to sign in with your Ethereum account:
${g}

${S}`;let E=`URI: ${f}
Version: ${l}
Chain ID: ${n}${d?`
Nonce: ${d}`:""}
Issued At: ${u.toISOString()}`;if(o&&(E+=`
Expiration Time: ${o.toISOString()}`),h&&(E+=`
Not Before: ${h.toISOString()}`),m&&(E+=`
Request ID: ${m}`),p){let O=`
Resources:`;for(const R of p){if(!R||typeof R!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${R}`);O+=`
- ${R}`}E+=O}return`${T}
${E}`}class WebAuthnError extends Error{constructor({message:e,code:n,cause:i,name:o}){var u;super(e,{cause:i}),this.__isWebAuthnError=!0,this.name=(u=o??(i instanceof Error?i.name:void 0))!==null&&u!==void 0?u:"Unknown Error",this.code=n}}class WebAuthnUnknownError extends WebAuthnError{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function identifyRegistrationError({error:t,options:e}){var n,i,o;const{publicKey:u}=e;if(!u)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new WebAuthnError({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=u.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new WebAuthnError({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((i=u.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new WebAuthnError({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((o=u.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new WebAuthnError({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new WebAuthnError({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new WebAuthnError({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return u.pubKeyCredParams.filter(h=>h.type==="public-key").length===0?new WebAuthnError({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new WebAuthnError({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const d=window.location.hostname;if(isValidDomain(d)){if(u.rp.id!==d)return new WebAuthnError({message:`The RP ID "${u.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new WebAuthnError({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(u.user.id.byteLength<1||u.user.id.byteLength>64)return new WebAuthnError({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new WebAuthnError({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new WebAuthnError({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function identifyAuthenticationError({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new WebAuthnError({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new WebAuthnError({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const i=window.location.hostname;if(isValidDomain(i)){if(n.rpId!==i)return new WebAuthnError({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new WebAuthnError({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new WebAuthnError({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new WebAuthnError({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class WebAuthnAbortService{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const webAuthnAbortService=new WebAuthnAbortService;function deserializeCredentialCreationOptions(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:i}=t,o=__rest(t,["challenge","user","excludeCredentials"]),u=base64UrlToUint8Array(e).buffer,d=Object.assign(Object.assign({},n),{id:base64UrlToUint8Array(n.id).buffer}),h=Object.assign(Object.assign({},o),{challenge:u,user:d});if(i&&i.length>0){h.excludeCredentials=new Array(i.length);for(let m=0;m<i.length;m++){const p=i[m];h.excludeCredentials[m]=Object.assign(Object.assign({},p),{id:base64UrlToUint8Array(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return h}function deserializeCredentialRequestOptions(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,i=__rest(t,["challenge","allowCredentials"]),o=base64UrlToUint8Array(e).buffer,u=Object.assign(Object.assign({},i),{challenge:o});if(n&&n.length>0){u.allowCredentials=new Array(n.length);for(let d=0;d<n.length;d++){const h=n[d];u.allowCredentials[d]=Object.assign(Object.assign({},h),{id:base64UrlToUint8Array(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return u}function serializeCredentialCreationResponse(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:bytesToBase64URL(new Uint8Array(t.response.attestationObject)),clientDataJSON:bytesToBase64URL(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function serializeCredentialRequestResponse(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,i=t.getClientExtensionResults(),o=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:bytesToBase64URL(new Uint8Array(o.authenticatorData)),clientDataJSON:bytesToBase64URL(new Uint8Array(o.clientDataJSON)),signature:bytesToBase64URL(new Uint8Array(o.signature)),userHandle:o.userHandle?bytesToBase64URL(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function isValidDomain(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function browserSupportsWebAuthn(){var t,e;return!!(isBrowser()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function createCredential(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new WebAuthnUnknownError("Browser returned unexpected credential type",e)}:{data:null,error:new WebAuthnUnknownError("Empty credential response",e)}}catch(e){return{data:null,error:identifyRegistrationError({error:e,options:t})}}}async function getCredential(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new WebAuthnUnknownError("Browser returned unexpected credential type",e)}:{data:null,error:new WebAuthnUnknownError("Empty credential response",e)}}catch(e){return{data:null,error:identifyAuthenticationError({error:e,options:t})}}}const DEFAULT_CREATION_OPTIONS={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},DEFAULT_REQUEST_OPTIONS={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function deepMerge(...t){const e=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),n=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),i={};for(const o of t)if(o)for(const u in o){const d=o[u];if(d!==void 0)if(Array.isArray(d))i[u]=d;else if(n(d))i[u]=d;else if(e(d)){const h=i[u];e(h)?i[u]=deepMerge(h,d):i[u]=deepMerge(d)}else i[u]=d}return i}function mergeCredentialCreationOptions(t,e){return deepMerge(DEFAULT_CREATION_OPTIONS,t,e||{})}function mergeCredentialRequestOptions(t,e){return deepMerge(DEFAULT_REQUEST_OPTIONS,t,e||{})}class WebAuthnApi{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:i,signal:o},u){var d;try{const{data:h,error:m}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!h)return{data:null,error:m};const p=o??webAuthnAbortService.createNewAbortSignal();if(h.webauthn.type==="create"){const{user:_}=h.webauthn.credential_options.publicKey;if(!_.name){const f=i;if(f)_.name=`${_.id}:${f}`;else{const g=(await this.client.getUser()).data.user,v=((d=g?.user_metadata)===null||d===void 0?void 0:d.name)||g?.email||g?.id||"User";_.name=`${_.id}:${v}`}}_.displayName||(_.displayName=_.name)}switch(h.webauthn.type){case"create":{const _=mergeCredentialCreationOptions(h.webauthn.credential_options.publicKey,u?.create),{data:f,error:l}=await createCredential({publicKey:_,signal:p});return f?{data:{factorId:e,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:f}},error:null}:{data:null,error:l}}case"request":{const _=mergeCredentialRequestOptions(h.webauthn.credential_options.publicKey,u?.request),{data:f,error:l}=await getCredential(Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:_,signal:p}));return f?{data:{factorId:e,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:f}},error:null}:{data:null,error:l}}}}catch(h){return isAuthError(h)?{data:null,error:h}:{data:null,error:new AuthUnknownError("Unexpected error in challenge",h)}}}async _verify({challengeId:e,factorId:n,webauthn:i}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:i})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},u){if(!n)return{data:null,error:new AuthError("rpId is required for WebAuthn authentication")};try{if(!browserSupportsWebAuthn())return{data:null,error:new AuthUnknownError("Browser does not support WebAuthn",null)};const{data:d,error:h}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:i},signal:o},{request:u});if(!d)return{data:null,error:h};const{webauthn:m}=d;return this._verify({factorId:e,challengeId:d.challengeId,webauthn:{type:m.type,rpId:n,rpOrigins:i,credential_response:m.credential_response}})}catch(d){return isAuthError(d)?{data:null,error:d}:{data:null,error:new AuthUnknownError("Unexpected error in authenticate",d)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},u){if(!n)return{data:null,error:new AuthError("rpId is required for WebAuthn registration")};try{if(!browserSupportsWebAuthn())return{data:null,error:new AuthUnknownError("Browser does not support WebAuthn",null)};const{data:d,error:h}=await this._enroll({friendlyName:e});if(!d)return await this.client.mfa.listFactors().then(_=>{var f;return(f=_.data)===null||f===void 0?void 0:f.all.find(l=>l.factor_type==="webauthn"&&l.friendly_name===e&&l.status!=="unverified")}).then(_=>_?this.client.mfa.unenroll({factorId:_?.id}):void 0),{data:null,error:h};const{data:m,error:p}=await this._challenge({factorId:d.id,friendlyName:d.friendly_name,webauthn:{rpId:n,rpOrigins:i},signal:o},{create:u});return m?this._verify({factorId:d.id,challengeId:m.challengeId,webauthn:{rpId:n,rpOrigins:i,type:m.webauthn.type,credential_response:m.webauthn.credential_response}}):{data:null,error:p}}catch(d){return isAuthError(d)?{data:null,error:d}:{data:null,error:new AuthUnknownError("Unexpected error in register",d)}}}}polyfillGlobalThis();const DEFAULT_OPTIONS={url:GOTRUE_URL,storageKey:STORAGE_KEY,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:DEFAULT_HEADERS$1,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function lockNoOp(t,e,n){return await n()}const GLOBAL_JWKS={};class GoTrueClient{get jwks(){var e,n;return(n=(e=GLOBAL_JWKS[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){GLOBAL_JWKS[this.storageKey]=Object.assign(Object.assign({},GLOBAL_JWKS[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=GLOBAL_JWKS[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){GLOBAL_JWKS[this.storageKey]=Object.assign(Object.assign({},GLOBAL_JWKS[this.storageKey]),{cachedAt:e})}constructor(e){var n,i,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const u=Object.assign(Object.assign({},DEFAULT_OPTIONS),e);if(this.storageKey=u.storageKey,this.instanceID=(n=GoTrueClient.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,GoTrueClient.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!u.debug,typeof u.debug=="function"&&(this.logger=u.debug),this.instanceID>0&&isBrowser()){const d=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(d),this.logDebugMessages&&console.trace(d)}if(this.persistSession=u.persistSession,this.autoRefreshToken=u.autoRefreshToken,this.admin=new GoTrueAdminApi({url:u.url,headers:u.headers,fetch:u.fetch}),this.url=u.url,this.headers=u.headers,this.fetch=resolveFetch$1(u.fetch),this.lock=u.lock||lockNoOp,this.detectSessionInUrl=u.detectSessionInUrl,this.flowType=u.flowType,this.hasCustomAuthorizationHeader=u.hasCustomAuthorizationHeader,this.throwOnError=u.throwOnError,this.lockAcquireTimeout=u.lockAcquireTimeout,u.lock?this.lock=u.lock:this.persistSession&&isBrowser()&&(!((i=globalThis?.navigator)===null||i===void 0)&&i.locks)?this.lock=navigatorLock:this.lock=lockNoOp,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new WebAuthnApi(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(u.storage?this.storage=u.storage:supportsLocalStorage()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=memoryLocalStorageAdapter(this.memoryStorage)),u.userStorage&&(this.userStorage=u.userStorage)):(this.memoryStorage={},this.storage=memoryLocalStorageAdapter(this.memoryStorage)),isBrowser()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(d){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",d)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async d=>{this._debug("received broadcast notification from other tab or client",d);try{await this._notifyAllSubscribers(d.data.event,d.data.session,!1)}catch(h){this._debug("#broadcastChannel","error",h)}})}this.initialize().catch(d=>{this._debug("#initialize()","error",d)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${version$1}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},i="none";if(isBrowser()&&(n=parseParametersFromURL(window.location.href),this._isImplicitGrantCallback(n)?i="implicit":await this._isPKCECallback(n)&&(i="pkce")),isBrowser()&&this.detectSessionInUrl&&i!=="none"){const{data:o,error:u}=await this._getSessionFromURL(n,i);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),isAuthImplicitGrantRedirectError(u)){const m=(e=u.details)===null||e===void 0?void 0:e.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:u}}return{error:u}}const{session:d,redirectType:h}=o;return this._debug("#_initialize()","detected session in URL",d,"redirect type",h),await this._saveSession(d),setTimeout(async()=>{h==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",d):await this._notifyAllSubscribers("SIGNED_IN",d)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return isAuthError(n)?this._returnResult({error:n}):this._returnResult({error:new AuthUnknownError("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,i,o;try{const u=await _request(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(n=e?.options)===null||n===void 0?void 0:n.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(o=e?.options)===null||o===void 0?void 0:o.captchaToken}},xform:_sessionResponse}),{data:d,error:h}=u;if(h||!d)return this._returnResult({data:{user:null,session:null},error:h});const m=d.session,p=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:p,session:m},error:null})}catch(u){if(isAuthError(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signUp(e){var n,i,o;try{let u;if("email"in e){const{email:_,password:f,options:l}=e;let g=null,v=null;this.flowType==="pkce"&&([g,v]=await getCodeChallengeAndMethod(this.storage,this.storageKey)),u=await _request(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:l?.emailRedirectTo,body:{email:_,password:f,data:(n=l?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:l?.captchaToken},code_challenge:g,code_challenge_method:v},xform:_sessionResponse})}else if("phone"in e){const{phone:_,password:f,options:l}=e;u=await _request(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:_,password:f,data:(i=l?.data)!==null&&i!==void 0?i:{},channel:(o=l?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:_sessionResponse})}else throw new AuthInvalidCredentialsError("You must provide either an email or phone number and a password");const{data:d,error:h}=u;if(h||!d)return await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:h});const m=d.session,p=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:p,session:m},error:null})}catch(u){if(await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),isAuthError(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signInWithPassword(e){try{let n;if("email"in e){const{email:u,password:d,options:h}=e;n=await _request(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:u,password:d,gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:_sessionResponsePassword})}else if("phone"in e){const{phone:u,password:d,options:h}=e;n=await _request(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:u,password:d,gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:_sessionResponsePassword})}else throw new AuthInvalidCredentialsError("You must provide either an email or phone number and a password");const{data:i,error:o}=n;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!i||!i.session||!i.user){const u=new AuthInvalidTokenResponseError;return this._returnResult({data:{user:null,session:null},error:u})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:o})}catch(n){if(isAuthError(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,i,o,u;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(u=e.options)===null||u===void 0?void 0:u.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,i,o,u,d,h,m,p,_,f,l;let g,v;if("message"in e)g=e.message,v=e.signature;else{const{chain:S,wallet:T,statement:E,options:O}=e;let R;if(isBrowser())if(typeof T=="object")R=T;else{const N=window;if("ethereum"in N&&typeof N.ethereum=="object"&&"request"in N.ethereum&&typeof N.ethereum.request=="function")R=N.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!O?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");R=T}const M=new URL((n=O?.url)!==null&&n!==void 0?n:window.location.href),C=await R.request({method:"eth_requestAccounts"}).then(N=>N).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!C||C.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const j=getAddress(C[0]);let $=(i=O?.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!$){const N=await R.request({method:"eth_chainId"});$=fromHex(N)}const L={domain:M.host,address:j,statement:E,uri:M.href,version:"1",chainId:$,nonce:(o=O?.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(d=(u=O?.signInWithEthereum)===null||u===void 0?void 0:u.issuedAt)!==null&&d!==void 0?d:new Date,expirationTime:(h=O?.signInWithEthereum)===null||h===void 0?void 0:h.expirationTime,notBefore:(m=O?.signInWithEthereum)===null||m===void 0?void 0:m.notBefore,requestId:(p=O?.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(_=O?.signInWithEthereum)===null||_===void 0?void 0:_.resources};g=createSiweMessage(L),v=await R.request({method:"personal_sign",params:[toHex(g),j]})}try{const{data:S,error:T}=await _request(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:g,signature:v},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(l=e.options)===null||l===void 0?void 0:l.captchaToken}}:null),xform:_sessionResponse});if(T)throw T;if(!S||!S.session||!S.user){const E=new AuthInvalidTokenResponseError;return this._returnResult({data:{user:null,session:null},error:E})}return S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),this._returnResult({data:Object.assign({},S),error:T})}catch(S){if(isAuthError(S))return this._returnResult({data:{user:null,session:null},error:S});throw S}}async signInWithSolana(e){var n,i,o,u,d,h,m,p,_,f,l,g;let v,S;if("message"in e)v=e.message,S=e.signature;else{const{chain:T,wallet:E,statement:O,options:R}=e;let M;if(isBrowser())if(typeof E=="object")M=E;else{const j=window;if("solana"in j&&typeof j.solana=="object"&&("signIn"in j.solana&&typeof j.solana.signIn=="function"||"signMessage"in j.solana&&typeof j.solana.signMessage=="function"))M=j.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!R?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");M=E}const C=new URL((n=R?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in M&&M.signIn){const j=await M.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},R?.signInWithSolana),{version:"1",domain:C.host,uri:C.href}),O?{statement:O}:null));let $;if(Array.isArray(j)&&j[0]&&typeof j[0]=="object")$=j[0];else if(j&&typeof j=="object"&&"signedMessage"in j&&"signature"in j)$=j;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in $&&"signature"in $&&(typeof $.signedMessage=="string"||$.signedMessage instanceof Uint8Array)&&$.signature instanceof Uint8Array)v=typeof $.signedMessage=="string"?$.signedMessage:new TextDecoder().decode($.signedMessage),S=$.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in M)||typeof M.signMessage!="function"||!("publicKey"in M)||typeof M!="object"||!M.publicKey||!("toBase58"in M.publicKey)||typeof M.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${C.host} wants you to sign in with your Solana account:`,M.publicKey.toBase58(),...O?["",O,""]:[""],"Version: 1",`URI: ${C.href}`,`Issued At: ${(o=(i=R?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((u=R?.signInWithSolana)===null||u===void 0)&&u.notBefore?[`Not Before: ${R.signInWithSolana.notBefore}`]:[],...!((d=R?.signInWithSolana)===null||d===void 0)&&d.expirationTime?[`Expiration Time: ${R.signInWithSolana.expirationTime}`]:[],...!((h=R?.signInWithSolana)===null||h===void 0)&&h.chainId?[`Chain ID: ${R.signInWithSolana.chainId}`]:[],...!((m=R?.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${R.signInWithSolana.nonce}`]:[],...!((p=R?.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${R.signInWithSolana.requestId}`]:[],...!((f=(_=R?.signInWithSolana)===null||_===void 0?void 0:_.resources)===null||f===void 0)&&f.length?["Resources",...R.signInWithSolana.resources.map($=>`- ${$}`)]:[]].join(`
`);const j=await M.signMessage(new TextEncoder().encode(v),"utf8");if(!j||!(j instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");S=j}}try{const{data:T,error:E}=await _request(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:bytesToBase64URL(S)},!((l=e.options)===null||l===void 0)&&l.captchaToken?{gotrue_meta_security:{captcha_token:(g=e.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:_sessionResponse});if(E)throw E;if(!T||!T.session||!T.user){const O=new AuthInvalidTokenResponseError;return this._returnResult({data:{user:null,session:null},error:O})}return T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("SIGNED_IN",T.session)),this._returnResult({data:Object.assign({},T),error:E})}catch(T){if(isAuthError(T))return this._returnResult({data:{user:null,session:null},error:T});throw T}}async _exchangeCodeForSession(e){const n=await getItemAsync(this.storage,`${this.storageKey}-code-verifier`),[i,o]=(n??"").split("/");try{if(!i&&this.flowType==="pkce")throw new AuthPKCECodeVerifierMissingError;const{data:u,error:d}=await _request(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:_sessionResponse});if(await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),d)throw d;if(!u||!u.session||!u.user){const h=new AuthInvalidTokenResponseError;return this._returnResult({data:{user:null,session:null,redirectType:null},error:h})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:Object.assign(Object.assign({},u),{redirectType:o??null}),error:d})}catch(u){if(await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),isAuthError(u))return this._returnResult({data:{user:null,session:null,redirectType:null},error:u});throw u}}async signInWithIdToken(e){try{const{options:n,provider:i,token:o,access_token:u,nonce:d}=e,h=await _request(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:o,access_token:u,nonce:d,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:_sessionResponse}),{data:m,error:p}=h;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!m||!m.session||!m.user){const _=new AuthInvalidTokenResponseError;return this._returnResult({data:{user:null,session:null},error:_})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:m,error:p})}catch(n){if(isAuthError(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,i,o,u,d;try{if("email"in e){const{email:h,options:m}=e;let p=null,_=null;this.flowType==="pkce"&&([p,_]=await getCodeChallengeAndMethod(this.storage,this.storageKey));const{error:f}=await _request(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:h,data:(n=m?.data)!==null&&n!==void 0?n:{},create_user:(i=m?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},code_challenge:p,code_challenge_method:_},redirectTo:m?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}if("phone"in e){const{phone:h,options:m}=e,{data:p,error:_}=await _request(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:h,data:(o=m?.data)!==null&&o!==void 0?o:{},create_user:(u=m?.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:m?.captchaToken},channel:(d=m?.channel)!==null&&d!==void 0?d:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p?.message_id},error:_})}throw new AuthInvalidCredentialsError("You must provide either an email or phone number.")}catch(h){if(await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),isAuthError(h))return this._returnResult({data:{user:null,session:null},error:h});throw h}}async verifyOtp(e){var n,i;try{let o,u;"options"in e&&(o=(n=e.options)===null||n===void 0?void 0:n.redirectTo,u=(i=e.options)===null||i===void 0?void 0:i.captchaToken);const{data:d,error:h}=await _request(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:u}}),redirectTo:o,xform:_sessionResponse});if(h)throw h;if(!d)throw new Error("An error occurred on token verification.");const m=d.session,p=d.user;return m?.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),this._returnResult({data:{user:p,session:m},error:null})}catch(o){if(isAuthError(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithSSO(e){var n,i,o,u,d;try{let h=null,m=null;this.flowType==="pkce"&&([h,m]=await getCodeChallengeAndMethod(this.storage,this.storageKey));const p=await _request(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&i!==void 0?i:void 0}),!((o=e?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:h,code_challenge_method:m}),headers:this.headers,xform:_ssoResponse});return!((u=p.data)===null||u===void 0)&&u.url&&isBrowser()&&!(!((d=e.options)===null||d===void 0)&&d.skipBrowserRedirect)&&window.location.assign(p.data.url),this._returnResult(p)}catch(h){if(await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),isAuthError(h))return this._returnResult({data:null,error:h});throw h}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:i}=e;if(i)throw i;if(!n)throw new AuthSessionMissingError;const{error:o}=await _request(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:o})})}catch(e){if(isAuthError(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:i,type:o,options:u}=e,{error:d}=await _request(this.fetch,"POST",n,{headers:this.headers,body:{email:i,type:o,gotrue_meta_security:{captcha_token:u?.captchaToken}},redirectTo:u?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}else if("phone"in e){const{phone:i,type:o,options:u}=e,{data:d,error:h}=await _request(this.fetch,"POST",n,{headers:this.headers,body:{phone:i,type:o,gotrue_meta_security:{captcha_token:u?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:d?.message_id},error:h})}throw new AuthInvalidCredentialsError("You must provide either an email or phone number and a type")}catch(n){if(isAuthError(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await i,await n()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=n();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await getItemAsync(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const i=e.expires_at?e.expires_at*1e3-Date.now()<EXPIRY_MARGIN_MS:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i){if(this.userStorage){const d=await getItemAsync(this.userStorage,this.storageKey+"-user");d?.user?e.user=d.user:e.user=userNotAvailableProxy()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const d={value:this.suppressGetSessionWarning};e.user=insecureUserWarningProxy(e.user,d),d.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:o,error:u}=await this._callRefreshToken(e.refresh_token);return u?this._returnResult({data:{session:null},error:u}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await _request(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:_userResponse}):await this._useSession(async n=>{var i,o,u;const{data:d,error:h}=n;if(h)throw h;return!(!((i=d.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new AuthSessionMissingError}:await _request(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(u=(o=d.session)===null||o===void 0?void 0:o.access_token)!==null&&u!==void 0?u:void 0,xform:_userResponse})})}catch(n){if(isAuthError(n))return isAuthSessionMissingError(n)&&(await this._removeSession(),await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async i=>{const{data:o,error:u}=i;if(u)throw u;if(!o.session)throw new AuthSessionMissingError;const d=o.session;let h=null,m=null;this.flowType==="pkce"&&e.email!=null&&([h,m]=await getCodeChallengeAndMethod(this.storage,this.storageKey));const{data:p,error:_}=await _request(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:h,code_challenge_method:m}),jwt:d.access_token,xform:_userResponse});if(_)throw _;return d.user=p.user,await this._saveSession(d),await this._notifyAllSubscribers("USER_UPDATED",d),this._returnResult({data:{user:d.user},error:null})})}catch(i){if(await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),isAuthError(i))return this._returnResult({data:{user:null},error:i});throw i}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new AuthSessionMissingError;const n=Date.now()/1e3;let i=n,o=!0,u=null;const{payload:d}=decodeJWT(e.access_token);if(d.exp&&(i=d.exp,o=i<=n),o){const{data:h,error:m}=await this._callRefreshToken(e.refresh_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!h)return{data:{user:null,session:null},error:null};u=h}else{const{data:h,error:m}=await this._getUser(e.access_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});u={access_token:e.access_token,refresh_token:e.refresh_token,user:h.user,token_type:"bearer",expires_in:i-n,expires_at:i},await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)}return this._returnResult({data:{user:u.user,session:u},error:null})}catch(n){if(isAuthError(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var i;if(!e){const{data:d,error:h}=n;if(h)throw h;e=(i=d.session)!==null&&i!==void 0?i:void 0}if(!e?.refresh_token)throw new AuthSessionMissingError;const{data:o,error:u}=await this._callRefreshToken(e.refresh_token);return u?this._returnResult({data:{user:null,session:null},error:u}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(isAuthError(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!isBrowser())throw new AuthImplicitGrantRedirectError("No browser detected.");if(e.error||e.error_description||e.error_code)throw new AuthImplicitGrantRedirectError(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new AuthPKCEGrantCodeExchangeError("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new AuthImplicitGrantRedirectError("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new AuthPKCEGrantCodeExchangeError("No code detected.");const{data:O,error:R}=await this._exchangeCodeForSession(e.code);if(R)throw R;const M=new URL(window.location.href);return M.searchParams.delete("code"),window.history.replaceState(window.history.state,"",M.toString()),{data:{session:O.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:o,access_token:u,refresh_token:d,expires_in:h,expires_at:m,token_type:p}=e;if(!u||!h||!d||!p)throw new AuthImplicitGrantRedirectError("No session defined in URL");const _=Math.round(Date.now()/1e3),f=parseInt(h);let l=_+f;m&&(l=parseInt(m));const g=l-_;g*1e3<=AUTO_REFRESH_TICK_DURATION_MS&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${f}s`);const v=l-f;_-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,l,_):_-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,l,_);const{data:S,error:T}=await this._getUser(u);if(T)throw T;const E={provider_token:i,provider_refresh_token:o,access_token:u,expires_in:f,expires_at:l,refresh_token:d,token_type:p,user:S.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:E,redirectType:e.type},error:null})}catch(i){if(isAuthError(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await getItemAsync(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var i;const{data:o,error:u}=n;if(u&&!isAuthSessionMissingError(u))return this._returnResult({error:u});const d=(i=o.session)===null||i===void 0?void 0:i.access_token;if(d){const{error:h}=await this.admin.signOut(d,e);if(h&&!(isAuthApiError(h)&&(h.status===404||h.status===401||h.status===403)||isAuthSessionMissingError(h)))return this._returnResult({error:h})}return e!=="others"&&(await this._removeSession(),await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=generateCallbackId(),i={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,i),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:i}}}async _emitInitialSession(e){return await this._useSession(async n=>{var i,o;try{const{data:{session:u},error:d}=n;if(d)throw d;await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",u)),this._debug("INITIAL_SESSION","callback id",e,"session",u)}catch(u){await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",u),console.error(u)}})}async resetPasswordForEmail(e,n={}){let i=null,o=null;this.flowType==="pkce"&&([i,o]=await getCodeChallengeAndMethod(this.storage,this.storageKey,!0));try{return await _request(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:i,code_challenge_method:o,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(u){if(await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),isAuthError(u))return this._returnResult({data:null,error:u});throw u}}async getUserIdentities(){var e;try{const{data:n,error:i}=await this.getUser();if(i)throw i;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(isAuthError(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:i,error:o}=await this._useSession(async u=>{var d,h,m,p,_;const{data:f,error:l}=u;if(l)throw l;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(d=e.options)===null||d===void 0?void 0:d.redirectTo,scopes:(h=e.options)===null||h===void 0?void 0:h.scopes,queryParams:(m=e.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await _request(this.fetch,"GET",g,{headers:this.headers,jwt:(_=(p=f.session)===null||p===void 0?void 0:p.access_token)!==null&&_!==void 0?_:void 0})});if(o)throw o;return isBrowser()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(i?.url),this._returnResult({data:{provider:e.provider,url:i?.url},error:null})}catch(i){if(isAuthError(i))return this._returnResult({data:{provider:e.provider,url:null},error:i});throw i}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var i;try{const{error:o,data:{session:u}}=n;if(o)throw o;const{options:d,provider:h,token:m,access_token:p,nonce:_}=e,f=await _request(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=u?.access_token)!==null&&i!==void 0?i:void 0,body:{provider:h,id_token:m,access_token:p,nonce:_,link_identity:!0,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:_sessionResponse}),{data:l,error:g}=f;return g?this._returnResult({data:{user:null,session:null},error:g}):!l||!l.session||!l.user?this._returnResult({data:{user:null,session:null},error:new AuthInvalidTokenResponseError}):(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("USER_UPDATED",l.session)),this._returnResult({data:l,error:g}))}catch(o){if(await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),isAuthError(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var i,o;const{data:u,error:d}=n;if(d)throw d;return await _request(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(i=u.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0})})}catch(n){if(isAuthError(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const i=Date.now();return await retryable(async o=>(o>0&&await sleep(200*Math.pow(2,o-1)),this._debug(n,"refreshing attempt",o),await _request(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:_sessionResponse})),(o,u)=>{const d=200*Math.pow(2,o);return u&&isAuthRetryableFetchError(u)&&Date.now()+d-i<AUTO_REFRESH_TICK_DURATION_MS})}catch(i){if(this._debug(n,"error",i),isAuthError(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const i=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",i),isBrowser()&&!n.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}}async _recoverAndRefresh(){var e,n;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const o=await getItemAsync(this.storage,this.storageKey);if(o&&this.userStorage){let d=await getItemAsync(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!d&&(d={user:o.user},await setItemAsync(this.userStorage,this.storageKey+"-user",d)),o.user=(e=d?.user)!==null&&e!==void 0?e:userNotAvailableProxy()}else if(o&&!o.user&&!o.user){const d=await getItemAsync(this.storage,this.storageKey+"-user");d&&d?.user?(o.user=d.user,await removeItemAsync(this.storage,this.storageKey+"-user"),await setItemAsync(this.storage,this.storageKey,o)):o.user=userNotAvailableProxy()}if(this._debug(i,"session from storage",o),!this._isValidSession(o)){this._debug(i,"session is not valid"),o!==null&&await this._removeSession();return}const u=((n=o.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<EXPIRY_MARGIN_MS;if(this._debug(i,`session has${u?"":" not"} expired with margin of ${EXPIRY_MARGIN_MS}s`),u){if(this.autoRefreshToken&&o.refresh_token){const{error:d}=await this._callRefreshToken(o.refresh_token);d&&(console.error(d),isAuthRetryableFetchError(d)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",d),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:d,error:h}=await this._getUser(o.access_token);!h&&d?.user?(o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(d){console.error("Error getting user data:",d),this._debug(i,"error getting user data, skipping SIGNED_IN notification",d)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(i,"error",o),console.error(o);return}finally{this._debug(i,"end")}}async _callRefreshToken(e){var n,i;if(!e)throw new AuthSessionMissingError;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Deferred;const{data:u,error:d}=await this._refreshAccessToken(e);if(d)throw d;if(!u.session)throw new AuthSessionMissingError;await this._saveSession(u.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const h={data:u.session,error:null};return this.refreshingDeferred.resolve(h),h}catch(u){if(this._debug(o,"error",u),isAuthError(u)){const d={data:null,error:u};return isAuthRetryableFetchError(u)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(d),d}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(u),u}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(e,n,i=!0){const o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",n,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:n});const u=[],d=Array.from(this.stateChangeEmitters.values()).map(async h=>{try{await h.callback(e,n)}catch(m){u.push(m)}});if(await Promise.all(d),u.length>0){for(let h=0;h<u.length;h+=1)console.error(u[h]);throw u[0]}}finally{this._debug(o,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),i=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&n.user&&await setItemAsync(this.userStorage,this.storageKey+"-user",{user:n.user});const o=Object.assign({},n);delete o.user;const u=deepClone(o);await setItemAsync(this.storage,this.storageKey,u)}else{const o=deepClone(n);await setItemAsync(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await removeItemAsync(this.storage,this.storageKey),await removeItemAsync(this.storage,this.storageKey+"-code-verifier"),await removeItemAsync(this.storage,this.storageKey+"-user"),this.userStorage&&await removeItemAsync(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&isBrowser()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),AUTO_REFRESH_TICK_DURATION_MS);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const n=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const n=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,n&&clearTimeout(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:i}}=n;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((i.expires_at*1e3-e)/AUTO_REFRESH_TICK_DURATION_MS);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${AUTO_REFRESH_TICK_DURATION_MS}ms, refresh threshold is ${AUTO_REFRESH_TICK_THRESHOLD} ticks`),o<=AUTO_REFRESH_TICK_THRESHOLD&&await this._callRefreshToken(i.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof LockAcquireTimeoutError)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!isBrowser()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(e){this._debug("#visibilityChangedCallback","error",e)}},window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,i){const o=[`provider=${encodeURIComponent(n)}`];if(i?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&o.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[u,d]=await getCodeChallengeAndMethod(this.storage,this.storageKey),h=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(d)}`});o.push(h.toString())}if(i?.queryParams){const u=new URLSearchParams(i.queryParams);o.push(u.toString())}return i?.skipBrowserRedirect&&o.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${o.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var i;const{data:o,error:u}=n;return u?this._returnResult({data:null,error:u}):await _request(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(isAuthError(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var i,o;const{data:u,error:d}=n;if(d)return this._returnResult({data:null,error:d});const h=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:m,error:p}=await _request(this.fetch,"POST",`${this.url}/factors`,{body:h,headers:this.headers,jwt:(i=u?.session)===null||i===void 0?void 0:i.access_token});return p?this._returnResult({data:null,error:p}):(e.factorType==="totp"&&m.type==="totp"&&(!((o=m?.totp)===null||o===void 0)&&o.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),this._returnResult({data:m,error:null}))})}catch(n){if(isAuthError(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var i;const{data:o,error:u}=n;if(u)return this._returnResult({data:null,error:u});const d=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?serializeCredentialCreationResponse(e.webauthn.credential_response):serializeCredentialRequestResponse(e.webauthn.credential_response)})}:{code:e.code}),{data:h,error:m}=await _request(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:d,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});return m?this._returnResult({data:null,error:m}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+h.expires_in},h)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",h),this._returnResult({data:h,error:m}))})}catch(n){if(isAuthError(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var i;const{data:o,error:u}=n;if(u)return this._returnResult({data:null,error:u});const d=await _request(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});if(d.error)return d;const{data:h}=d;if(h.type!=="webauthn")return{data:h,error:null};switch(h.webauthn.type){case"create":return{data:Object.assign(Object.assign({},h),{webauthn:Object.assign(Object.assign({},h.webauthn),{credential_options:Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:deserializeCredentialCreationOptions(h.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},h),{webauthn:Object.assign(Object.assign({},h.webauthn),{credential_options:Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:deserializeCredentialRequestOptions(h.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(isAuthError(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:i}=await this._challenge({factorId:e.factorId});return i?this._returnResult({data:null,error:i}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:i}=await this.getUser();if(i)return{data:null,error:i};const o={all:[],phone:[],totp:[],webauthn:[]};for(const u of(e=n?.factors)!==null&&e!==void 0?e:[])o.all.push(u),u.status==="verified"&&o[u.factor_type].push(u);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(e){var n,i,o,u;if(e)try{const{payload:g}=decodeJWT(e);let v=null;g.aal&&(v=g.aal);let S=v;const{data:{user:T},error:E}=await this.getUser(e);if(E)return this._returnResult({data:null,error:E});((i=(n=T?.factors)===null||n===void 0?void 0:n.filter(M=>M.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(S="aal2");const R=g.amr||[];return{data:{currentLevel:v,nextLevel:S,currentAuthenticationMethods:R},error:null}}catch(g){if(isAuthError(g))return this._returnResult({data:null,error:g});throw g}const{data:{session:d},error:h}=await this.getSession();if(h)return this._returnResult({data:null,error:h});if(!d)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:m}=decodeJWT(d.access_token);let p=null;m.aal&&(p=m.aal);let _=p;((u=(o=d.user.factors)===null||o===void 0?void 0:o.filter(g=>g.status==="verified"))!==null&&u!==void 0?u:[]).length>0&&(_="aal2");const l=m.amr||[];return{data:{currentLevel:p,nextLevel:_,currentAuthenticationMethods:l},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:i},error:o}=n;return o?this._returnResult({data:null,error:o}):i?await _request(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:i.access_token,xform:u=>({data:u,error:null})}):this._returnResult({data:null,error:new AuthSessionMissingError})})}catch(n){if(isAuthError(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async i=>{const{data:{session:o},error:u}=i;if(u)return this._returnResult({data:null,error:u});if(!o)return this._returnResult({data:null,error:new AuthSessionMissingError});const d=await _request(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:h=>({data:h,error:null})});return d.data&&d.data.redirect_url&&isBrowser()&&!n?.skipBrowserRedirect&&window.location.assign(d.data.redirect_url),d})}catch(i){if(isAuthError(i))return this._returnResult({data:null,error:i});throw i}}async _denyAuthorization(e,n){try{return await this._useSession(async i=>{const{data:{session:o},error:u}=i;if(u)return this._returnResult({data:null,error:u});if(!o)return this._returnResult({data:null,error:new AuthSessionMissingError});const d=await _request(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:h=>({data:h,error:null})});return d.data&&d.data.redirect_url&&isBrowser()&&!n?.skipBrowserRedirect&&window.location.assign(d.data.redirect_url),d})}catch(i){if(isAuthError(i))return this._returnResult({data:null,error:i});throw i}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:i}=e;return i?this._returnResult({data:null,error:i}):n?await _request(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new AuthSessionMissingError})})}catch(e){if(isAuthError(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:i},error:o}=n;return o?this._returnResult({data:null,error:o}):i?(await _request(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new AuthSessionMissingError})})}catch(n){if(isAuthError(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let i=n.keys.find(h=>h.kid===e);if(i)return i;const o=Date.now();if(i=this.jwks.keys.find(h=>h.kid===e),i&&this.jwks_cached_at+JWKS_TTL>o)return i;const{data:u,error:d}=await _request(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(d)throw d;return!u.keys||u.keys.length===0||(this.jwks=u,this.jwks_cached_at=o,i=u.keys.find(h=>h.kid===e),!i)?null:i}async getClaims(e,n={}){try{let i=e;if(!i){const{data:g,error:v}=await this.getSession();if(v||!g.session)return this._returnResult({data:null,error:v});i=g.session.access_token}const{header:o,payload:u,signature:d,raw:{header:h,payload:m}}=decodeJWT(i);n?.allowExpired||validateExp(u.exp);const p=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!p){const{error:g}=await this.getUser(i);if(g)throw g;return{data:{claims:u,header:o,signature:d},error:null}}const _=getAlgorithm(o.alg),f=await crypto.subtle.importKey("jwk",p,_,!0,["verify"]);if(!await crypto.subtle.verify(_,f,d,stringToUint8Array(`${h}.${m}`)))throw new AuthInvalidJwtError("Invalid JWT signature");return{data:{claims:u,header:o,signature:d},error:null}}catch(i){if(isAuthError(i))return this._returnResult({data:null,error:i});throw i}}}GoTrueClient.nextInstanceID={};const AuthClient=GoTrueClient,version="2.93.3";let JS_ENV="";typeof Deno<"u"?JS_ENV="deno":typeof document<"u"?JS_ENV="web":typeof navigator<"u"&&navigator.product==="ReactNative"?JS_ENV="react-native":JS_ENV="node";const DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${JS_ENV}/${version}`},DEFAULT_GLOBAL_OPTIONS={headers:DEFAULT_HEADERS},DEFAULT_DB_OPTIONS={schema:"public"},DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},DEFAULT_REALTIME_OPTIONS={};function _typeof(t){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(t)}function toPrimitive(t,e){if(_typeof(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(_typeof(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function toPropertyKey(t){var e=toPrimitive(t,"string");return _typeof(e)=="symbol"?e:e+""}function _defineProperty(t,e,n){return(e=toPropertyKey(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ownKeys(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,i)}return n}function _objectSpread2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach(function(i){_defineProperty(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}const resolveFetch=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),resolveHeadersConstructor=()=>Headers,fetchWithAuth=(t,e,n)=>{const i=resolveFetch(n),o=resolveHeadersConstructor();return async(u,d)=>{var h;const m=(h=await e())!==null&&h!==void 0?h:t;let p=new o(d?.headers);return p.has("apikey")||p.set("apikey",t),p.has("Authorization")||p.set("Authorization",`Bearer ${m}`),i(u,_objectSpread2(_objectSpread2({},d),{},{headers:p}))}};function ensureTrailingSlash(t){return t.endsWith("/")?t:t+"/"}function applySettingDefaults(t,e){var n,i;const{db:o,auth:u,realtime:d,global:h}=t,{db:m,auth:p,realtime:_,global:f}=e,l={db:_objectSpread2(_objectSpread2({},m),o),auth:_objectSpread2(_objectSpread2({},p),u),realtime:_objectSpread2(_objectSpread2({},_),d),storage:{},global:_objectSpread2(_objectSpread2(_objectSpread2({},f),h),{},{headers:_objectSpread2(_objectSpread2({},(n=f?.headers)!==null&&n!==void 0?n:{}),(i=h?.headers)!==null&&i!==void 0?i:{})}),accessToken:async()=>""};return t.accessToken?l.accessToken=t.accessToken:delete l.accessToken,l}function validateSupabaseUrl(t){const e=t?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(ensureTrailingSlash(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var SupabaseAuthClient=class extends AuthClient{constructor(t){super(t)}},SupabaseClient=class{constructor(t,e,n){var i,o;this.supabaseUrl=t,this.supabaseKey=e;const u=validateSupabaseUrl(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const d=`sb-${u.hostname.split(".")[0]}-auth-token`,h={db:DEFAULT_DB_OPTIONS,realtime:DEFAULT_REALTIME_OPTIONS,auth:_objectSpread2(_objectSpread2({},DEFAULT_AUTH_OPTIONS),{},{storageKey:d}),global:DEFAULT_GLOBAL_OPTIONS},m=applySettingDefaults(n??{},h);if(this.storageKey=(i=m.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(o=m.global.headers)!==null&&o!==void 0?o:{},m.accessToken)this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(_,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}});else{var p;this.auth=this._initSupabaseAuthClient((p=m.auth)!==null&&p!==void 0?p:{},this.headers,m.global.fetch)}this.fetch=fetchWithAuth(e,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(_objectSpread2({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(_=>this.realtime.setAuth(_)).catch(_=>console.warn("Failed to set initial Realtime auth token:",_)),this.rest=new PostgrestClient(new URL("rest/v1",u).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch}),this.storage=new StorageClient(this.storageUrl.href,this.headers,this.fetch,n?.storage),m.accessToken||this._listenForAuthEvents()}get functions(){return new FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,n)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,n;if(t.accessToken)return await t.accessToken();const{data:i}=await t.auth.getSession();return(e=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:i,userStorage:o,storageKey:u,flowType:d,lock:h,debug:m,throwOnError:p},_,f){const l={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new SupabaseAuthClient({url:this.authUrl.href,headers:_objectSpread2(_objectSpread2({},l),_),storageKey:u,autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:i,userStorage:o,flowType:d,lock:h,debug:m,throwOnError:p,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(g=>g.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new RealtimeClient(this.realtimeUrl.href,_objectSpread2(_objectSpread2({},t),{},{params:_objectSpread2(_objectSpread2({},{apikey:this.supabaseKey}),t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e?.access_token)})}_handleTokenChanged(t,e,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const createClient=(t,e,n)=>new SupabaseClient(t,e,n);function shouldShowDeprecationWarning(){if(typeof window<"u")return!1;const t=globalThis.process;if(!t)return!1;const e=t.version;if(e==null)return!1;const n=e.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}shouldShowDeprecationWarning()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const supabaseUrl="https://vgokxvelxjgsfoitayyw.supabase.co",supabaseKey="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZnb2t4dmVseGpnc2ZvaXRheXl3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAwOTE2NDcsImV4cCI6MjA4NTY2NzY0N30.LP0KxR2Jn0FMlk31hYVKkqU4QhbAlQr8M_zbmNGEOyA",supabase=createClient(supabaseUrl,supabaseKey),api={async getNews(){const{data:t,error:e}=await supabase.from("news").select("*").order("timestamp",{ascending:!1});if(e)throw e;return(t||[]).map(n=>({id:n.id,title:n.title,description:n.description,imageUrl:n.image_url,videoUrl:n.video_url,area:n.area,type:n.type,isBreaking:n.is_breaking,liveLink:n.live_link,timestamp:n.timestamp,author:n.author||"Admin",status:n.status}))},async createNews(t){const{data:e,error:n}=await supabase.from("news").insert({title:t.title,description:t.description,image_url:t.imageUrl,video_url:t.videoUrl,area:t.area,type:t.type,is_breaking:t.isBreaking,live_link:t.liveLink,author:t.author||"Admin",status:t.status||"published"}).select().single();if(n)throw n;return e},async updateNews(t,e){const n={};e.title!==void 0&&(n.title=e.title),e.description!==void 0&&(n.description=e.description),e.imageUrl!==void 0&&(n.image_url=e.imageUrl),e.videoUrl!==void 0&&(n.video_url=e.videoUrl),e.area!==void 0&&(n.area=e.area),e.type!==void 0&&(n.type=e.type),e.isBreaking!==void 0&&(n.is_breaking=e.isBreaking),e.liveLink!==void 0&&(n.live_link=e.liveLink),e.status!==void 0&&(n.status=e.status);const{data:i,error:o}=await supabase.from("news").update(n).eq("id",t).select().single();if(o)throw o;return i},async deleteNews(t){const{error:e}=await supabase.from("news").delete().eq("id",t);if(e)throw e},async getShorts(){const{data:t,error:e}=await supabase.from("shorts").select("*").order("timestamp",{ascending:!1});if(e)throw e;return(t||[]).map(n=>({id:n.id,title:n.title,videoUrl:n.video_url,duration:n.duration,timestamp:n.timestamp}))},async createShort(t){const{data:e,error:n}=await supabase.from("shorts").insert({title:t.title,video_url:t.videoUrl,duration:t.duration}).select().single();if(n)throw n;return e},async updateShort(t,e){const n={};e.title!==void 0&&(n.title=e.title),e.videoUrl!==void 0&&(n.video_url=e.videoUrl),e.duration!==void 0&&(n.duration=e.duration);const{data:i,error:o}=await supabase.from("shorts").update(n).eq("id",t).select().single();if(o)throw o;return i},async deleteShort(t){const{error:e}=await supabase.from("shorts").delete().eq("id",t);if(e)throw e},async getAdvertisements(){const{data:t,error:e}=await supabase.from("advertisements").select("*").order("timestamp",{ascending:!1});if(e)throw e;return(t||[]).map(n=>({id:n.id,mediaUrl:n.media_url,intervalMinutes:n.interval_minutes,clickUrl:n.click_url,isActive:n.is_active,timestamp:n.timestamp}))},async createAdvertisement(t){const{data:e,error:n}=await supabase.from("advertisements").insert({media_url:t.mediaUrl,interval_minutes:t.intervalMinutes,click_url:t.clickUrl,is_active:t.isActive}).select().single();if(n)throw n;return{id:e.id,mediaUrl:e.media_url,intervalMinutes:e.interval_minutes,clickUrl:e.click_url,isActive:e.is_active,timestamp:e.timestamp}},async updateAdvertisement(t,e){const n={};e.mediaUrl!==void 0&&(n.media_url=e.mediaUrl),e.intervalMinutes!==void 0&&(n.interval_minutes=e.intervalMinutes),e.clickUrl!==void 0&&(n.click_url=e.clickUrl),e.isActive!==void 0&&(n.is_active=e.isActive);const{data:i,error:o}=await supabase.from("advertisements").update(n).eq("id",t).select().single();if(o)throw o;return{id:i.id,mediaUrl:i.media_url,intervalMinutes:i.interval_minutes,clickUrl:i.click_url,isActive:i.is_active,timestamp:i.timestamp}},async deleteAdvertisement(t){const{error:e}=await supabase.from("advertisements").delete().eq("id",t);if(e)throw e},async uploadFile(t,e="news-media"){console.log("Starting upload...",t.name,e);const n=t.name.split(".").pop(),o=`${`${Date.now()}_${Math.random().toString(36).substring(7)}.${n}`}`,{data:u,error:d}=await supabase.storage.from(e).upload(o,t,{cacheControl:"3600",upsert:!1,contentType:t.type});if(d)throw console.error("Supabase Upload Error:",d),d;console.log("Upload successful, getting URL for:",o);const{data:{publicUrl:h}}=supabase.storage.from(e).getPublicUrl(o);return console.log("Public URL:",h),h}};function dispatchCallback(t,e){t&&t(e)}function reverseDictionary(t){return Object.fromEntries(Object.entries(t).map(([e,n])=>[n,e]))}function escapeRegExp(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}const Callable=class{constructor(){let t=function(...e){return t._call(...e)};return Object.setPrototypeOf(t,new.target.prototype)}_call(...t){throw Error("Must implement _call method in subclass")}};function isTypedArray(t){return t?.prototype?.__proto__?.constructor?.name==="TypedArray"}function isIntegralNumber(t){return Number.isInteger(t)||typeof t=="bigint"}function exists(t){return t!=null}function calculateDimensions(t){const e=[];let n=t;for(;Array.isArray(n);)e.push(n.length),n=n[0];return e}function pop(t,e,n=void 0){const i=t[e];if(i!==void 0)return delete t[e],i;if(n===void 0)throw Error(`Key ${e} does not exist in object.`);return n}function mergeArrays(...t){return Array.prototype.concat.apply([],t)}function product(...t){return t.reduce((e,n)=>e.flatMap(i=>n.map(o=>[i,o])))}function calculateReflectOffset(t,e){return Math.abs((t+e)%(2*e)-e)}const sharp={},ONNX_NODE=Object.freeze(Object.defineProperty({__proto__:null,default:sharp},Symbol.toStringTag,{value:"Module"}));var ortWeb_min$1={exports:{}};const backends={},backendsSortedByPriority=[],registerBackend=(t,e,n)=>{if(e&&typeof e.init=="function"&&typeof e.createSessionHandler=="function"){const i=backends[t];if(i===void 0)backends[t]={backend:e,priority:n};else{if(i.priority>n)return;if(i.priority===n&&i.backend!==e)throw new Error(`cannot register backend "${t}" using priority ${n}`)}if(n>=0){const o=backendsSortedByPriority.indexOf(t);o!==-1&&backendsSortedByPriority.splice(o,1);for(let u=0;u<backendsSortedByPriority.length;u++)if(backends[backendsSortedByPriority[u]].priority<=n){backendsSortedByPriority.splice(u,0,t);return}backendsSortedByPriority.push(t)}return}throw new TypeError("not a valid backend")},resolveBackend=async t=>{const e=t.length===0?backendsSortedByPriority:t,n=[];for(const i of e){const o=backends[i];if(o){if(o.initialized)return o.backend;if(o.aborted)continue;const u=!!o.initPromise;try{return u||(o.initPromise=o.backend.init()),await o.initPromise,o.initialized=!0,o.backend}catch(d){u||n.push({name:i,err:d}),o.aborted=!0}finally{delete o.initPromise}}}throw new Error(`no available backend found. ERR: ${n.map(i=>`[${i.name}] ${i.err}`).join(", ")}`)};class EnvImpl{constructor(){this.wasm={},this.webgl={},this.logLevelInternal="warning"}set logLevel(e){if(e!==void 0){if(typeof e!="string"||["verbose","info","warning","error","fatal"].indexOf(e)===-1)throw new Error(`Unsupported logging level: ${e}`);this.logLevelInternal=e}}get logLevel(){return this.logLevelInternal}}const env$2=new EnvImpl,isBigInt64ArrayAvailable=typeof BigInt64Array<"u"&&typeof BigInt64Array.from=="function",isBigUint64ArrayAvailable=typeof BigUint64Array<"u"&&typeof BigUint64Array.from=="function",NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]);isBigInt64ArrayAvailable&&(NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.set("int64",BigInt64Array),NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.set(BigInt64Array,"int64"));isBigUint64ArrayAvailable&&(NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.set("uint64",BigUint64Array),NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.set(BigUint64Array,"uint64"));const calculateSize=t=>{let e=1;for(let n=0;n<t.length;n++){const i=t[n];if(typeof i!="number"||!Number.isSafeInteger(i))throw new TypeError(`dims[${n}] must be an integer, got: ${i}`);if(i<0)throw new RangeError(`dims[${n}] must be a non-negative integer, got: ${i}`);e*=i}return e};let Tensor$2=class ii{constructor(e,n,i){let o,u,d;if(typeof e=="string")if(o=e,d=i,e==="string"){if(!Array.isArray(n))throw new TypeError("A string tensor's data must be a string array.");u=n}else{const m=NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.get(e);if(m===void 0)throw new TypeError(`Unsupported tensor type: ${e}.`);if(Array.isArray(n))u=m.from(n);else if(n instanceof m)u=n;else throw new TypeError(`A ${o} tensor's data must be type of ${m}`)}else if(d=n,Array.isArray(e)){if(e.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");const m=typeof e[0];if(m==="string")o="string",u=e;else if(m==="boolean")o="bool",u=Uint8Array.from(e);else throw new TypeError(`Invalid element type of data array: ${m}.`)}else{const m=NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.get(e.constructor);if(m===void 0)throw new TypeError(`Unsupported type for tensor data: ${e.constructor}.`);o=m,u=e}if(d===void 0)d=[u.length];else if(!Array.isArray(d))throw new TypeError("A tensor's dims must be a number array");const h=calculateSize(d);if(h!==u.length)throw new Error(`Tensor's size(${h}) does not match data length(${u.length}).`);this.dims=d,this.type=o,this.data=u,this.size=h}static bufferToTensor(e,n){if(e===void 0)throw new Error("Image buffer must be defined");if(n.height===void 0||n.width===void 0)throw new Error("Image height and width must be defined");const{height:i,width:o}=n,u=n.norm;let d,h;u===void 0||u.mean===void 0?d=255:d=u.mean,u===void 0||u.bias===void 0?h=0:h=u.bias;const m=n.bitmapFormat!==void 0?n.bitmapFormat:"RGBA",p=n.tensorFormat!==void 0&&n.tensorFormat!==void 0?n.tensorFormat:"RGB",_=i*o,f=p==="RGBA"?new Float32Array(_*4):new Float32Array(_*3);let l=4,g=0,v=1,S=2,T=3,E=0,O=_,R=_*2,M=-1;m==="RGB"&&(l=3,g=0,v=1,S=2,T=-1),p==="RGBA"?M=_*3:p==="RBG"?(E=0,R=_,O=_*2):p==="BGR"&&(R=0,O=_,E=_*2);for(let j=0;j<_;j++,g+=l,S+=l,v+=l,T+=l)f[E++]=(e[g]+h)/d,f[O++]=(e[v]+h)/d,f[R++]=(e[S]+h)/d,M!==-1&&T!==-1&&(f[M++]=(e[T]+h)/d);return p==="RGBA"?new ii("float32",f,[1,4,i,o]):new ii("float32",f,[1,3,i,o])}static async fromImage(e,n){const i=typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement,o=typeof ImageData<"u"&&e instanceof ImageData,u=typeof ImageBitmap<"u"&&e instanceof ImageBitmap,d=typeof String<"u"&&(e instanceof String||typeof e=="string");let h,m={};if(i){const p=document.createElement("canvas"),_=p.getContext("2d");if(_!=null){let f=e.naturalHeight,l=e.naturalWidth;if(n!==void 0&&n.resizedHeight!==void 0&&n.resizedWidth!==void 0&&(f=n.resizedHeight,l=n.resizedWidth),n!==void 0){if(m=n,n.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");if(m.tensorFormat="RGBA",n.height!==void 0&&n.height!==f)throw new Error("Image input config height doesn't match HTMLImageElement height");if(m.height=f,n.width!==void 0&&n.width!==l)throw new Error("Image input config width doesn't match HTMLImageElement width");m.width=l}else m.tensorFormat="RGBA",m.height=f,m.width=l;p.width=l,p.height=f,_.drawImage(e,0,0,l,f),h=_.getImageData(0,0,l,f).data}else throw new Error("Can not access image data")}else if(o){const p="RGBA";let _,f;if(n!==void 0&&n.resizedWidth!==void 0&&n.resizedHeight!==void 0?(_=n.resizedHeight,f=n.resizedWidth):(_=e.height,f=e.width),n!==void 0){if(m=n,n.bitmapFormat!==void 0&&n.bitmapFormat!==p)throw new Error("Image input config format must be RGBA for ImageData");m.bitmapFormat="RGBA"}else m.bitmapFormat="RGBA";if(m.height=_,m.width=f,n!==void 0){const l=document.createElement("canvas");l.width=f,l.height=_;const g=l.getContext("2d");if(g!=null)g.putImageData(e,0,0),h=g.getImageData(0,0,f,_).data;else throw new Error("Can not access image data")}else h=e.data}else if(u){if(n===void 0)throw new Error("Please provide image config with format for Imagebitmap");if(n.bitmapFormat!==void 0)throw new Error("Image input config format must be defined for ImageBitmap");const p=document.createElement("canvas").getContext("2d");if(p!=null){const _=e.height,f=e.width;if(p.drawImage(e,0,0,f,_),h=p.getImageData(0,0,f,_).data,n!==void 0){if(n.height!==void 0&&n.height!==_)throw new Error("Image input config height doesn't match ImageBitmap height");if(m.height=_,n.width!==void 0&&n.width!==f)throw new Error("Image input config width doesn't match ImageBitmap width");m.width=f}else m.height=_,m.width=f;return ii.bufferToTensor(h,m)}else throw new Error("Can not access image data")}else{if(d)return new Promise((p,_)=>{const f=document.createElement("canvas"),l=f.getContext("2d");if(!e||!l)return _();const g=new Image;g.crossOrigin="Anonymous",g.src=e,g.onload=()=>{f.width=g.width,f.height=g.height,l.drawImage(g,0,0,f.width,f.height);const v=l.getImageData(0,0,f.width,f.height);if(n!==void 0){if(n.height!==void 0&&n.height!==f.height)throw new Error("Image input config height doesn't match ImageBitmap height");if(m.height=f.height,n.width!==void 0&&n.width!==f.width)throw new Error("Image input config width doesn't match ImageBitmap width");m.width=f.width}else m.height=f.height,m.width=f.width;p(ii.bufferToTensor(v.data,m))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(h!==void 0)return ii.bufferToTensor(h,m);throw new Error("Input data provided is not supported - aborted tensor creation")}toImageData(e){var n,i;const o=document.createElement("canvas").getContext("2d");let u;if(o!=null){const d=this.dims[3],h=this.dims[2],m=this.dims[1],p=e!==void 0&&e.format!==void 0?e.format:"RGB",_=e!==void 0&&((n=e.norm)===null||n===void 0?void 0:n.mean)!==void 0?e.norm.mean:255,f=e!==void 0&&((i=e.norm)===null||i===void 0?void 0:i.bias)!==void 0?e.norm.bias:0,l=h*d;if(e!==void 0){if(e.height!==void 0&&e.height!==h)throw new Error("Image output config height doesn't match tensor height");if(e.width!==void 0&&e.width!==d)throw new Error("Image output config width doesn't match tensor width");if(e.format!==void 0&&m===4&&e.format!=="RGBA"||m===3&&e.format!=="RGB"&&e.format!=="BGR")throw new Error("Tensor format doesn't match input tensor dims")}const g=4;let v=0,S=1,T=2,E=3,O=0,R=l,M=l*2,C=-1;p==="RGBA"?(O=0,R=l,M=l*2,C=l*3):p==="RGB"?(O=0,R=l,M=l*2):p==="RBG"&&(O=0,M=l,R=l*2),u=o.createImageData(d,h);for(let j=0;j<h*d;v+=g,S+=g,T+=g,E+=g,j++)u.data[v]=(this.data[O++]-f)*_,u.data[S]=(this.data[R++]-f)*_,u.data[T]=(this.data[M++]-f)*_,u.data[E]=C===-1?255:(this.data[C++]-f)*_}else throw new Error("Can not access image data");return u}reshape(e){return new ii(this.type,this.data,e)}};const Tensor$1=Tensor$2;let InferenceSession$2=class Qu{constructor(e){this.handler=e}async run(e,n,i){const o={};let u={};if(typeof e!="object"||e===null||e instanceof Tensor$1||Array.isArray(e))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let d=!0;if(typeof n=="object"){if(n===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(n instanceof Tensor$1)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(n)){if(n.length===0)throw new TypeError("'fetches' cannot be an empty array.");d=!1;for(const p of n){if(typeof p!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(p)===-1)throw new RangeError(`'fetches' contains invalid output name: ${p}.`);o[p]=null}if(typeof i=="object"&&i!==null)u=i;else if(typeof i<"u")throw new TypeError("'options' must be an object.")}else{let p=!1;const _=Object.getOwnPropertyNames(n);for(const f of this.outputNames)if(_.indexOf(f)!==-1){const l=n[f];(l===null||l instanceof Tensor$1)&&(p=!0,d=!1,o[f]=l)}if(p){if(typeof i=="object"&&i!==null)u=i;else if(typeof i<"u")throw new TypeError("'options' must be an object.")}else u=n}}else if(typeof n<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(const p of this.inputNames)if(typeof e[p]>"u")throw new Error(`input '${p}' is missing in 'feeds'.`);if(d)for(const p of this.outputNames)o[p]=null;const h=await this.handler.run(e,o,u),m={};for(const p in h)Object.hasOwnProperty.call(h,p)&&(m[p]=new Tensor$1(h[p].type,h[p].data,h[p].dims));return m}static async create(e,n,i,o){let u,d={};if(typeof e=="string"){if(u=e,typeof n=="object"&&n!==null)d=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else if(e instanceof Uint8Array){if(u=e,typeof n=="object"&&n!==null)d=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else if(e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer){const f=e;let l=0,g=e.byteLength;if(typeof n=="object"&&n!==null)d=n;else if(typeof n=="number"){if(l=n,!Number.isSafeInteger(l))throw new RangeError("'byteOffset' must be an integer.");if(l<0||l>=f.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${f.byteLength}).`);if(g=e.byteLength-l,typeof i=="number"){if(g=i,!Number.isSafeInteger(g))throw new RangeError("'byteLength' must be an integer.");if(g<=0||l+g>f.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${f.byteLength-l}].`);if(typeof o=="object"&&o!==null)d=o;else if(typeof o<"u")throw new TypeError("'options' must be an object.")}else if(typeof i<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof n<"u")throw new TypeError("'options' must be an object.");u=new Uint8Array(f,l,g)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");const m=(d.executionProviders||[]).map(f=>typeof f=="string"?f:f.name),_=await(await resolveBackend(m)).createSessionHandler(u,d);return new Qu(_)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}};const InferenceSession$1=InferenceSession$2,lib=Object.freeze(Object.defineProperty({__proto__:null,InferenceSession:InferenceSession$1,Tensor:Tensor$1,env:env$2,registerBackend},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(lib);/*!
* ONNX Runtime Web v1.14.0
* Copyright (c) Microsoft Corporation. All rights reserved.
* Licensed under the MIT License.
*/var hasRequiredOrtWeb_min;function requireOrtWeb_min(){return hasRequiredOrtWeb_min||(hasRequiredOrtWeb_min=1,(function(module,exports$1){(function(t,e){module.exports=e(require$$0)})(self,(__WEBPACK_EXTERNAL_MODULE__1670__=>(()=>{var __webpack_modules__={3474:(t,e,n)=>{var i,o=(i=(i=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(u){function d(){return Z.buffer!=ee&&Ye(Z.buffer),le}function h(){return Z.buffer!=ee&&Ye(Z.buffer),ge}function m(){return Z.buffer!=ee&&Ye(Z.buffer),Ae}function p(){return Z.buffer!=ee&&Ye(Z.buffer),Te}function _(){return Z.buffer!=ee&&Ye(Z.buffer),Ce}var f,l,g;u=u||{},f||(f=u!==void 0?u:{}),f.ready=new Promise((function(q,J){l=q,g=J}));var v,S,T,E,O,R,M=Object.assign({},f),C="./this.program",j=(q,J)=>{throw J},$=typeof window=="object",L=typeof importScripts=="function",N=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",B=f.ENVIRONMENT_IS_PTHREAD||!1,U="";function H(q){return f.locateFile?f.locateFile(q,U):U+q}if(N){let q;U=L?n(908).dirname(U)+"/":"//",R=()=>{O||(E=n(1384),O=n(908))},v=function(J,ne){return R(),J=O.normalize(J),E.readFileSync(J,ne?void 0:"utf8")},T=J=>((J=v(J,!0)).buffer||(J=new Uint8Array(J)),J),S=(J,ne,ae)=>{R(),J=O.normalize(J),E.readFile(J,(function(he,be){he?ae(he):ne(be.buffer)}))},1<process.argv.length&&(C=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(J){if(!(J instanceof ir))throw J})),process.on("unhandledRejection",(function(J){throw J})),j=(J,ne)=>{if(Ct())throw process.exitCode=J,ne;ne instanceof ir||G("exiting due to exception: "+ne),process.exit(J)},f.inspect=function(){return"[Emscripten Module object]"};try{q=n(9925)}catch(J){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),J}n.g.Worker=q.Worker}else($||L)&&(L?U=self.location.href:typeof document<"u"&&document.currentScript&&(U=document.currentScript.src),i&&(U=i),U=U.indexOf("blob:")!==0?U.substr(0,U.replace(/[?#].*/,"").lastIndexOf("/")+1):"",N||(v=q=>{var J=new XMLHttpRequest;return J.open("GET",q,!1),J.send(null),J.responseText},L&&(T=q=>{var J=new XMLHttpRequest;return J.open("GET",q,!1),J.responseType="arraybuffer",J.send(null),new Uint8Array(J.response)}),S=(q,J,ne)=>{var ae=new XMLHttpRequest;ae.open("GET",q,!0),ae.responseType="arraybuffer",ae.onload=()=>{ae.status==200||ae.status==0&&ae.response?J(ae.response):ne()},ae.onerror=ne,ae.send(null)}));N&&typeof performance>"u"&&(n.g.performance=n(6953).performance);var Y=console.log.bind(console),K=console.warn.bind(console);N&&(R(),Y=q=>E.writeSync(1,q+`
`),K=q=>E.writeSync(2,q+`
`));var z,V=f.print||Y,G=f.printErr||K;Object.assign(f,M),M=null,f.thisProgram&&(C=f.thisProgram),f.quit&&(j=f.quit),f.wasmBinary&&(z=f.wasmBinary);var ie=f.noExitRuntime||!1;typeof WebAssembly!="object"&&rt("no native wasm support detected");var Z,te,ee,le,ge,Ae,Te,Ce,De=!1,Re=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Ee(q,J,ne){var ae=(J>>>=0)+ne;for(ne=J;q[ne]&&!(ne>=ae);)++ne;if(16<ne-J&&q.buffer&&Re)return Re.decode(q.buffer instanceof SharedArrayBuffer?q.slice(J,ne):q.subarray(J,ne));for(ae="";J<ne;){var he=q[J++];if(128&he){var be=63&q[J++];if((224&he)==192)ae+=String.fromCharCode((31&he)<<6|be);else{var je=63&q[J++];65536>(he=(240&he)==224?(15&he)<<12|be<<6|je:(7&he)<<18|be<<12|je<<6|63&q[J++])?ae+=String.fromCharCode(he):(he-=65536,ae+=String.fromCharCode(55296|he>>10,56320|1023&he))}}else ae+=String.fromCharCode(he)}return ae}function Ie(q,J){return(q>>>=0)?Ee(h(),q,J):""}function Le(q,J,ne,ae){if(!(0<ae))return 0;var he=ne>>>=0;ae=ne+ae-1;for(var be=0;be<q.length;++be){var je=q.charCodeAt(be);if(55296<=je&&57343>=je&&(je=65536+((1023&je)<<10)|1023&q.charCodeAt(++be)),127>=je){if(ne>=ae)break;J[ne++>>>0]=je}else{if(2047>=je){if(ne+1>=ae)break;J[ne++>>>0]=192|je>>6}else{if(65535>=je){if(ne+2>=ae)break;J[ne++>>>0]=224|je>>12}else{if(ne+3>=ae)break;J[ne++>>>0]=240|je>>18,J[ne++>>>0]=128|je>>12&63}J[ne++>>>0]=128|je>>6&63}J[ne++>>>0]=128|63&je}}return J[ne>>>0]=0,ne-he}function Se(q){for(var J=0,ne=0;ne<q.length;++ne){var ae=q.charCodeAt(ne);127>=ae?J++:2047>=ae?J+=2:55296<=ae&&57343>=ae?(J+=4,++ne):J+=3}return J}function Ye(q){ee=q,f.HEAP8=le=new Int8Array(q),f.HEAP16=new Int16Array(q),f.HEAP32=Ae=new Int32Array(q),f.HEAPU8=ge=new Uint8Array(q),f.HEAPU16=new Uint16Array(q),f.HEAPU32=Te=new Uint32Array(q),f.HEAPF32=new Float32Array(q),f.HEAPF64=Ce=new Float64Array(q)}B&&(ee=f.buffer);var Fe=f.INITIAL_MEMORY||16777216;if(B)Z=f.wasmMemory,ee=f.buffer;else if(f.wasmMemory)Z=f.wasmMemory;else if(!((Z=new WebAssembly.Memory({initial:Fe/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw G("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),N&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");Z&&(ee=Z.buffer),Fe=ee.byteLength,Ye(ee);var at,lt=[],dt=[],Rt=[],xt=[];function Ct(){return ie||!1}function wt(){var q=f.preRun.shift();lt.unshift(q)}var Ze,St=0,Yt=null;function rt(q){throw B?postMessage({cmd:"onAbort",arg:q}):f.onAbort&&f.onAbort(q),G(q="Aborted("+q+")"),De=!0,q=new WebAssembly.RuntimeError(q+". Build with -sASSERTIONS for more info."),g(q),q}function Er(){return Ze.startsWith("data:application/octet-stream;base64,")}function Ir(){var q=Ze;try{if(q==Ze&&z)return new Uint8Array(z);if(T)return T(q);throw"both async and sync fetching of the wasm failed"}catch(J){rt(J)}}Ze="ort-wasm-threaded.wasm",Er()||(Ze=H(Ze));var jr={};function ir(q){this.name="ExitStatus",this.message="Program terminated with exit("+q+")",this.status=q}function Gt(q){(q=Xe.Vb[q])||rt(),Xe.mc(q)}function ur(q){var J=Xe.Cc();if(!J)return 6;Xe.ac.push(J),Xe.Vb[q.Ub]=J,J.Ub=q.Ub;var ne={cmd:"run",start_routine:q.Ic,arg:q.zc,pthread_ptr:q.Ub};return J.$b=()=>{ne.time=performance.now(),J.postMessage(ne,q.Nc)},J.loaded&&(J.$b(),delete J.$b),0}function At(q){if(B)return Be(1,1,q);Ct()||(Xe.oc(),f.onExit&&f.onExit(q),De=!0),j(q,new ir(q))}function $r(q,J){if(!J&&B)throw nn(q),"unwind";Ct()||B||($i(),Ar(Rt),ai(0),wn[1].length&&_r(1,10),wn[2].length&&_r(2,10),Xe.oc()),At(q)}var Xe={Yb:[],ac:[],qc:[],Vb:{},fc:function(){B&&Xe.Ec()},Pc:function(){},Ec:function(){Xe.receiveObjectTransfer=Xe.Gc,Xe.threadInitTLS=Xe.pc,Xe.setExitStatus=Xe.nc,ie=!1},nc:function(){},oc:function(){for(var q of Object.values(Xe.Vb))Xe.mc(q);for(q of Xe.Yb)q.terminate();Xe.Yb=[]},mc:function(q){var J=q.Ub;delete Xe.Vb[J],Xe.Yb.push(q),Xe.ac.splice(Xe.ac.indexOf(q),1),q.Ub=0,gt(J)},Gc:function(){},pc:function(){Xe.qc.forEach((q=>q()))},Fc:function(q,J){q.onmessage=ne=>{var ae=(ne=ne.data).cmd;if(q.Ub&&(Xe.Bc=q.Ub),ne.targetThread&&ne.targetThread!=hn()){var he=Xe.Vb[ne.Qc];he?he.postMessage(ne,ne.transferList):G('Internal error! Worker sent a message "'+ae+'" to target pthread '+ne.targetThread+", but that thread no longer exists!")}else ae==="processProxyingQueue"?ce(ne.queue):ae==="spawnThread"?ur(ne):ae==="cleanupThread"?Gt(ne.thread):ae==="killThread"?(ne=ne.thread,ae=Xe.Vb[ne],delete Xe.Vb[ne],ae.terminate(),gt(ne),Xe.ac.splice(Xe.ac.indexOf(ae),1),ae.Ub=0):ae==="cancelThread"?Xe.Vb[ne.thread].postMessage({cmd:"cancel"}):ae==="loaded"?(q.loaded=!0,J&&J(q),q.$b&&(q.$b(),delete q.$b)):ae==="print"?V("Thread "+ne.threadId+": "+ne.text):ae==="printErr"?G("Thread "+ne.threadId+": "+ne.text):ae==="alert"?alert("Thread "+ne.threadId+": "+ne.text):ne.target==="setimmediate"?q.postMessage(ne):ae==="onAbort"?f.onAbort&&f.onAbort(ne.arg):ae&&G("worker sent an unknown command "+ae);Xe.Bc=void 0},q.onerror=ne=>{throw G("worker sent an error! "+ne.filename+":"+ne.lineno+": "+ne.message),ne},N&&(q.on("message",(function(ne){q.onmessage({data:ne})})),q.on("error",(function(ne){q.onerror(ne)})),q.on("detachedExit",(function(){}))),q.postMessage({cmd:"load",urlOrBlob:f.mainScriptUrlOrBlob||i,wasmMemory:Z,wasmModule:te})},yc:function(){var q=H("ort-wasm-threaded.worker.js");Xe.Yb.push(new Worker(q))},Cc:function(){return Xe.Yb.length==0&&(Xe.yc(),Xe.Fc(Xe.Yb[0])),Xe.Yb.pop()}};function Ar(q){for(;0<q.length;)q.shift()(f)}function zr(q){var J=st();return q=q(),it(J),q}function nn(q){if(B)return Be(2,0,q);try{$r(q)}catch(J){J instanceof ir||J=="unwind"||j(1,J)}}f.PThread=Xe,f.establishStackSpace=function(){var q=hn(),J=m()[q+44>>2>>>0];q=m()[q+48>>2>>>0],ci(J,J-q),it(J)};var er=[];function nt(q){var J=er[q];return J||(q>=er.length&&(er.length=q+1),er[q]=J=at.get(q)),J}f.invokeEntryPoint=function(q,J){q=nt(q)(J),Ct()?Xe.nc(q):Ni(q)};var Pr,hr,tr=[],et=0,Me=0;function Ve(q){this.Zb=q,this.Sb=q-24,this.xc=function(J){p()[this.Sb+4>>2>>>0]=J},this.bc=function(){return p()[this.Sb+4>>2>>>0]},this.wc=function(J){p()[this.Sb+8>>2>>>0]=J},this.Dc=function(){return p()[this.Sb+8>>2>>>0]},this.rc=function(){m()[this.Sb>>2>>>0]=0},this.hc=function(J){J=J?1:0,d()[this.Sb+12>>0>>>0]=J},this.uc=function(){return d()[this.Sb+12>>0>>>0]!=0},this.ic=function(J){J=J?1:0,d()[this.Sb+13>>0>>>0]=J},this.kc=function(){return d()[this.Sb+13>>0>>>0]!=0},this.fc=function(J,ne){this.cc(0),this.xc(J),this.wc(ne),this.rc(),this.hc(!1),this.ic(!1)},this.sc=function(){Atomics.add(m(),this.Sb>>2,1)},this.Hc=function(){return Atomics.sub(m(),this.Sb>>2,1)===1},this.cc=function(J){p()[this.Sb+16>>2>>>0]=J},this.tc=function(){return p()[this.Sb+16>>2>>>0]},this.vc=function(){if(Gn(this.bc()))return p()[this.Zb>>2>>>0];var J=this.tc();return J!==0?J:this.Zb}}function Mt(q){return mo(new Ve(q).Sb)}function $t(q,J,ne,ae){return B?Be(3,1,q,J,ne,ae):pr(q,J,ne,ae)}function pr(q,J,ne,ae){if(typeof SharedArrayBuffer>"u")return G("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var he=[];return B&&he.length===0?$t(q,J,ne,ae):(q={Ic:ne,Ub:q,zc:ae,Nc:he},B?(q.Oc="spawnThread",postMessage(q,he),0):ur(q))}function Pt(q,J,ne){return B?Be(4,1,q,J,ne):0}function Nt(q,J){if(B)return Be(5,1,q,J)}function mr(q,J){if(B)return Be(6,1,q,J)}function Lt(q,J,ne){if(B)return Be(7,1,q,J,ne)}function Wt(q,J,ne){return B?Be(8,1,q,J,ne):0}function gr(q,J){if(B)return Be(9,1,q,J)}function Xt(q,J,ne){if(B)return Be(10,1,q,J,ne)}function Gr(q,J,ne,ae){if(B)return Be(11,1,q,J,ne,ae)}function fn(q,J,ne,ae){if(B)return Be(12,1,q,J,ne,ae)}function qn(q,J,ne,ae){if(B)return Be(13,1,q,J,ne,ae)}function Vn(q){if(B)return Be(14,1,q)}function Q(q,J){if(B)return Be(15,1,q,J)}function oe(q,J,ne){if(B)return Be(16,1,q,J,ne)}function ce(q){Atomics.store(m(),q>>2,1),hn()&&ui(q),Atomics.compareExchange(m(),q>>2,1,0)}function fe(q){return p()[q>>>2]+4294967296*m()[q+4>>>2]}function ye(q,J,ne,ae,he,be){return B?Be(17,1,q,J,ne,ae,he,be):-52}function we(q,J,ne,ae,he,be){if(B)return Be(18,1,q,J,ne,ae,he,be)}function Ne(q){var J=Se(q)+1,ne=ji(J);return ne&&Le(q,d(),ne,J),ne}function We(q,J,ne){function ae(ct){return(ct=ct.toTimeString().match(/\(([A-Za-z ]+)\)$/))?ct[1]:"GMT"}if(B)return Be(19,1,q,J,ne);var he=new Date().getFullYear(),be=new Date(he,0,1),je=new Date(he,6,1);he=be.getTimezoneOffset();var Ke=je.getTimezoneOffset(),ht=Math.max(he,Ke);m()[q>>2>>>0]=60*ht,m()[J>>2>>>0]=+(he!=Ke),q=ae(be),J=ae(je),q=Ne(q),J=Ne(J),Ke<he?(p()[ne>>2>>>0]=q,p()[ne+4>>2>>>0]=J):(p()[ne>>2>>>0]=J,p()[ne+4>>2>>>0]=q)}function Be(q,J){var ne=arguments.length-2,ae=arguments;return zr((()=>{for(var he=di(8*ne),be=he>>3,je=0;je<ne;je++){var Ke=ae[2+je];_()[be+je>>>0]=Ke}return go(q,ne,he,J)}))}f.executeNotifiedProxyingQueue=ce,hr=N?()=>{var q=process.hrtime();return 1e3*q[0]+q[1]/1e6}:B?()=>performance.now()-f.__performance_now_clock_drift:()=>performance.now();var ot,bt=[],ft={};function Vt(){if(!ot){var q,J={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:C||"./this.program"};for(q in ft)ft[q]===void 0?delete J[q]:J[q]=ft[q];var ne=[];for(q in J)ne.push(q+"="+J[q]);ot=ne}return ot}function xe(q,J){if(B)return Be(20,1,q,J);var ne=0;return Vt().forEach((function(ae,he){var be=J+ne;for(he=p()[q+4*he>>2>>>0]=be,be=0;be<ae.length;++be)d()[he++>>0>>>0]=ae.charCodeAt(be);d()[he>>0>>>0]=0,ne+=ae.length+1})),0}function pt(q,J){if(B)return Be(21,1,q,J);var ne=Vt();p()[q>>2>>>0]=ne.length;var ae=0;return ne.forEach((function(he){ae+=he.length+1})),p()[J>>2>>>0]=ae,0}function vt(q){return B?Be(22,1,q):52}function yr(q,J,ne,ae){return B?Be(23,1,q,J,ne,ae):52}function Nr(q,J,ne,ae,he){return B?Be(24,1,q,J,ne,ae,he):70}var wn=[null,[],[]];function _r(q,J){var ne=wn[q];J===0||J===10?((q===1?V:G)(Ee(ne,0)),ne.length=0):ne.push(J)}function fo(q,J,ne,ae){if(B)return Be(25,1,q,J,ne,ae);for(var he=0,be=0;be<ne;be++){var je=p()[J>>2>>>0],Ke=p()[J+4>>2>>>0];J+=8;for(var ht=0;ht<Ke;ht++)_r(q,h()[je+ht>>>0]);he+=Ke}return p()[ae>>2>>>0]=he,0}var Ot=0;function oi(q){return q%4==0&&(q%100!=0||q%400==0)}var ho=[31,29,31,30,31,30,31,31,30,31,30,31],po=[31,28,31,30,31,30,31,31,30,31,30,31];function Un(q,J,ne,ae){function he(ve,mt,Tt){for(ve=typeof ve=="number"?ve.toString():ve||"";ve.length<mt;)ve=Tt[0]+ve;return ve}function be(ve,mt){return he(ve,mt,"0")}function je(ve,mt){function Tt(Xr){return 0>Xr?-1:0<Xr?1:0}var Dr;return(Dr=Tt(ve.getFullYear()-mt.getFullYear()))===0&&(Dr=Tt(ve.getMonth()-mt.getMonth()))===0&&(Dr=Tt(ve.getDate()-mt.getDate())),Dr}function Ke(ve){switch(ve.getDay()){case 0:return new Date(ve.getFullYear()-1,11,29);case 1:return ve;case 2:return new Date(ve.getFullYear(),0,3);case 3:return new Date(ve.getFullYear(),0,2);case 4:return new Date(ve.getFullYear(),0,1);case 5:return new Date(ve.getFullYear()-1,11,31);case 6:return new Date(ve.getFullYear()-1,11,30)}}function ht(ve){var mt=ve.Wb;for(ve=new Date(new Date(ve.Xb+1900,0,1).getTime());0<mt;){var Tt=ve.getMonth(),Dr=(oi(ve.getFullYear())?ho:po)[Tt];if(!(mt>Dr-ve.getDate())){ve.setDate(ve.getDate()+mt);break}mt-=Dr-ve.getDate()+1,ve.setDate(1),11>Tt?ve.setMonth(Tt+1):(ve.setMonth(0),ve.setFullYear(ve.getFullYear()+1))}return Tt=new Date(ve.getFullYear()+1,0,4),mt=Ke(new Date(ve.getFullYear(),0,4)),Tt=Ke(Tt),0>=je(mt,ve)?0>=je(Tt,ve)?ve.getFullYear()+1:ve.getFullYear():ve.getFullYear()-1}var ct=m()[ae+40>>2>>>0];for(var Et in ae={Lc:m()[ae>>2>>>0],Kc:m()[ae+4>>2>>>0],dc:m()[ae+8>>2>>>0],jc:m()[ae+12>>2>>>0],ec:m()[ae+16>>2>>>0],Xb:m()[ae+20>>2>>>0],Tb:m()[ae+24>>2>>>0],Wb:m()[ae+28>>2>>>0],Rc:m()[ae+32>>2>>>0],Jc:m()[ae+36>>2>>>0],Mc:ct?Ie(ct):""},ne=Ie(ne),ct={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})ne=ne.replace(new RegExp(Et,"g"),ct[Et]);var br="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),cr="January February March April May June July August September October November December".split(" ");for(Et in ct={"%a":function(ve){return br[ve.Tb].substring(0,3)},"%A":function(ve){return br[ve.Tb]},"%b":function(ve){return cr[ve.ec].substring(0,3)},"%B":function(ve){return cr[ve.ec]},"%C":function(ve){return be((ve.Xb+1900)/100|0,2)},"%d":function(ve){return be(ve.jc,2)},"%e":function(ve){return he(ve.jc,2," ")},"%g":function(ve){return ht(ve).toString().substring(2)},"%G":function(ve){return ht(ve)},"%H":function(ve){return be(ve.dc,2)},"%I":function(ve){return(ve=ve.dc)==0?ve=12:12<ve&&(ve-=12),be(ve,2)},"%j":function(ve){for(var mt=0,Tt=0;Tt<=ve.ec-1;mt+=(oi(ve.Xb+1900)?ho:po)[Tt++]);return be(ve.jc+mt,3)},"%m":function(ve){return be(ve.ec+1,2)},"%M":function(ve){return be(ve.Kc,2)},"%n":function(){return`
`},"%p":function(ve){return 0<=ve.dc&&12>ve.dc?"AM":"PM"},"%S":function(ve){return be(ve.Lc,2)},"%t":function(){return"	"},"%u":function(ve){return ve.Tb||7},"%U":function(ve){return be(Math.floor((ve.Wb+7-ve.Tb)/7),2)},"%V":function(ve){var mt=Math.floor((ve.Wb+7-(ve.Tb+6)%7)/7);if(2>=(ve.Tb+371-ve.Wb-2)%7&&mt++,mt)mt==53&&((Tt=(ve.Tb+371-ve.Wb)%7)==4||Tt==3&&oi(ve.Xb)||(mt=1));else{mt=52;var Tt=(ve.Tb+7-ve.Wb-1)%7;(Tt==4||Tt==5&&oi(ve.Xb%400-1))&&mt++}return be(mt,2)},"%w":function(ve){return ve.Tb},"%W":function(ve){return be(Math.floor((ve.Wb+7-(ve.Tb+6)%7)/7),2)},"%y":function(ve){return(ve.Xb+1900).toString().substring(2)},"%Y":function(ve){return ve.Xb+1900},"%z":function(ve){var mt=0<=(ve=ve.Jc);return ve=Math.abs(ve)/60,(mt?"+":"-")+("0000"+(ve/60*100+ve%60)).slice(-4)},"%Z":function(ve){return ve.Mc},"%%":function(){return"%"}},ne=ne.replace(/%%/g,"\0\0"),ct)ne.includes(Et)&&(ne=ne.replace(new RegExp(Et,"g"),ct[Et](ae)));return Et=(function(ve){var mt=Array(Se(ve)+1);return Le(ve,mt,0,mt.length),mt})(ne=ne.replace(/\0\0/g,"%")),Et.length>J?0:((function(ve,mt){d().set(ve,mt>>>0)})(Et,q),Et.length-1)}Xe.fc();var si=[null,At,nn,$t,Pt,Nt,mr,Lt,Wt,gr,Xt,Gr,fn,qn,Vn,Q,oe,ye,we,We,xe,pt,vt,yr,Nr,fo],zn={b:function(q){return ji(q+24)+24},n:function(q){return(q=new Ve(q)).uc()||(q.hc(!0),et--),q.ic(!1),tr.push(q),q.sc(),q.vc()},ma:function(q){throw G("Unexpected exception thrown, this is not properly supported - aborting"),De=!0,q},x:function(){ut(0);var q=tr.pop();if(q.Hc()&&!q.kc()){var J=q.Dc();J&&nt(J)(q.Zb),Mt(q.Zb)}Me=0},e:function(){var q=Me;if(!q)return Ot=0;var J=new Ve(q);J.cc(q);var ne=J.bc();if(!ne)return Ot=0,q;for(var ae=Array.prototype.slice.call(arguments),he=0;he<ae.length;he++){var be=ae[he];if(be===0||be===ne)break;if(Sn(be,ne,J.Sb+16))return Ot=be,q}return Ot=ne,q},l:function(){var q=Me;if(!q)return Ot=0;var J=new Ve(q);J.cc(q);var ne=J.bc();if(!ne)return Ot=0,q;for(var ae=Array.prototype.slice.call(arguments),he=0;he<ae.length;he++){var be=ae[he];if(be===0||be===ne)break;if(Sn(be,ne,J.Sb+16))return Ot=be,q}return Ot=ne,q},h:function(){var q=Me;if(!q)return Ot=0;var J=new Ve(q);J.cc(q);var ne=J.bc();if(!ne)return Ot=0,q;for(var ae=Array.prototype.slice.call(arguments),he=0;he<ae.length;he++){var be=ae[he];if(be===0||be===ne)break;if(Sn(be,ne,J.Sb+16))return Ot=be,q}return Ot=ne,q},t:Mt,M:function(){var q=tr.pop();q||rt("no exception to throw");var J=q.Zb;throw q.kc()||(tr.push(q),q.ic(!0),q.hc(!1),et++),Me=J,J},c:function(q,J,ne){throw new Ve(q).fc(J,ne),Me=q,et++,q},pa:function(){return et},Fa:function(q){li(q,!L,1,!$),Xe.pc()},T:function(q){B?postMessage({cmd:"cleanupThread",thread:q}):Gt(q)},xa:pr,j:function(q){throw Me||(Me=q),q},H:Pt,Ma:Nt,ua:mr,wa:Lt,oa:Wt,Ka:gr,Ca:Xt,Ja:Gr,V:fn,va:qn,sa:Vn,La:Q,ta:oe,Ta:function(){},X:function(){rt("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ua:function(){rt("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},W:function(){return Date.now()},ya:function(){return 2097152},Oa:function(){return!0},za:function(q,J,ne,ae){if(q==J)setTimeout((()=>ce(ae)));else if(B)postMessage({targetThread:q,cmd:"processProxyingQueue",queue:ae});else{if(!(q=Xe.Vb[q]))return;q.postMessage({cmd:"processProxyingQueue",queue:ae})}return 1},Ea:function(){return-1},Pa:function(q,J){q=new Date(1e3*fe(q)),m()[J>>2>>>0]=q.getUTCSeconds(),m()[J+4>>2>>>0]=q.getUTCMinutes(),m()[J+8>>2>>>0]=q.getUTCHours(),m()[J+12>>2>>>0]=q.getUTCDate(),m()[J+16>>2>>>0]=q.getUTCMonth(),m()[J+20>>2>>>0]=q.getUTCFullYear()-1900,m()[J+24>>2>>>0]=q.getUTCDay(),q=(q.getTime()-Date.UTC(q.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,m()[J+28>>2>>>0]=q},Qa:function(q,J){q=new Date(1e3*fe(q)),m()[J>>2>>>0]=q.getSeconds(),m()[J+4>>2>>>0]=q.getMinutes(),m()[J+8>>2>>>0]=q.getHours(),m()[J+12>>2>>>0]=q.getDate(),m()[J+16>>2>>>0]=q.getMonth(),m()[J+20>>2>>>0]=q.getFullYear()-1900,m()[J+24>>2>>>0]=q.getDay();var ne=new Date(q.getFullYear(),0,1),ae=(q.getTime()-ne.getTime())/864e5|0;m()[J+28>>2>>>0]=ae,m()[J+36>>2>>>0]=-60*q.getTimezoneOffset(),ae=new Date(q.getFullYear(),6,1).getTimezoneOffset(),q=0|(ae!=(ne=ne.getTimezoneOffset())&&q.getTimezoneOffset()==Math.min(ne,ae)),m()[J+32>>2>>>0]=q},Ra:function(q){var J=new Date(m()[q+20>>2>>>0]+1900,m()[q+16>>2>>>0],m()[q+12>>2>>>0],m()[q+8>>2>>>0],m()[q+4>>2>>>0],m()[q>>2>>>0],0),ne=m()[q+32>>2>>>0],ae=J.getTimezoneOffset(),he=new Date(J.getFullYear(),0,1),be=new Date(J.getFullYear(),6,1).getTimezoneOffset(),je=he.getTimezoneOffset(),Ke=Math.min(je,be);return 0>ne?m()[q+32>>2>>>0]=+(be!=je&&Ke==ae):0<ne!=(Ke==ae)&&(be=Math.max(je,be),J.setTime(J.getTime()+6e4*((0<ne?Ke:be)-ae))),m()[q+24>>2>>>0]=J.getDay(),ne=(J.getTime()-he.getTime())/864e5|0,m()[q+28>>2>>>0]=ne,m()[q>>2>>>0]=J.getSeconds(),m()[q+4>>2>>>0]=J.getMinutes(),m()[q+8>>2>>>0]=J.getHours(),m()[q+12>>2>>>0]=J.getDate(),m()[q+16>>2>>>0]=J.getMonth(),J.getTime()/1e3|0},Aa:ye,Ba:we,Sa:function q(J,ne,ae){q.Ac||(q.Ac=!0,We(J,ne,ae))},y:function(){rt("")},U:function(){if(!N&&!L){var q="Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread";Pr||(Pr={}),Pr[q]||(Pr[q]=1,N&&(q="warning: "+q),G(q))}},ra:function(){return 4294901760},B:hr,Ia:function(q,J,ne){h().copyWithin(q>>>0,J>>>0,J+ne>>>0)},F:function(){return N?n(3993).cpus().length:navigator.hardwareConcurrency},Da:function(q,J,ne){bt.length=J,ne>>=3;for(var ae=0;ae<J;ae++)bt[ae]=_()[ne+ae>>>0];return(0>q?jr[-q-1]:si[q]).apply(null,bt)},qa:function(q){var J=h().length;if((q>>>=0)<=J||4294901760<q)return!1;for(var ne=1;4>=ne;ne*=2){var ae=J*(1+.2/ne);ae=Math.min(ae,q+100663296);var he=Math;ae=Math.max(q,ae),he=he.min.call(he,4294901760,ae+(65536-ae%65536)%65536);e:{try{Z.grow(he-ee.byteLength+65535>>>16),Ye(Z.buffer);var be=1;break e}catch{}be=void 0}if(be)return!0}return!1},Na:function(){throw"unwind"},Ga:xe,Ha:pt,J:$r,I:vt,S:yr,ga:Nr,R:fo,d:function(){return Ot},na:function q(J,ne){q.lc||(q.lc=(function(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var he=new Uint8Array(1);return()=>(crypto.getRandomValues(he),he[0])}if(N)try{var be=n(Object((function(){var je=new Error("Cannot find module 'crypto'");throw je.code="MODULE_NOT_FOUND",je})()));return()=>be.randomBytes(1)[0]}catch{}return()=>rt("randomDevice")})());for(var ae=0;ae<ne;ae++)d()[J+ae>>0>>>0]=q.lc();return 0},ia:function(q,J,ne){var ae=st();try{return nt(q)(J,ne)}catch(he){if(it(ae),he!==he+0)throw he;ut(1,0)}},ja:function(q,J,ne){var ae=st();try{return nt(q)(J,ne)}catch(he){if(it(ae),he!==he+0)throw he;ut(1,0)}},K:function(q){var J=st();try{return nt(q)()}catch(ne){if(it(J),ne!==ne+0)throw ne;ut(1,0)}},f:function(q,J){var ne=st();try{return nt(q)(J)}catch(ae){if(it(ne),ae!==ae+0)throw ae;ut(1,0)}},P:function(q,J,ne){var ae=st();try{return nt(q)(J,ne)}catch(he){if(it(ae),he!==he+0)throw he;ut(1,0)}},Q:function(q,J,ne){var ae=st();try{return nt(q)(J,ne)}catch(he){if(it(ae),he!==he+0)throw he;ut(1,0)}},k:function(q,J,ne){var ae=st();try{return nt(q)(J,ne)}catch(he){if(it(ae),he!==he+0)throw he;ut(1,0)}},p:function(q,J,ne,ae){var he=st();try{return nt(q)(J,ne,ae)}catch(be){if(it(he),be!==be+0)throw be;ut(1,0)}},q:function(q,J,ne,ae,he){var be=st();try{return nt(q)(J,ne,ae,he)}catch(je){if(it(be),je!==je+0)throw je;ut(1,0)}},N:function(q,J,ne,ae,he,be){var je=st();try{return nt(q)(J,ne,ae,he,be)}catch(Ke){if(it(je),Ke!==Ke+0)throw Ke;ut(1,0)}},s:function(q,J,ne,ae,he,be){var je=st();try{return nt(q)(J,ne,ae,he,be)}catch(Ke){if(it(je),Ke!==Ke+0)throw Ke;ut(1,0)}},w:function(q,J,ne,ae,he,be,je){var Ke=st();try{return nt(q)(J,ne,ae,he,be,je)}catch(ht){if(it(Ke),ht!==ht+0)throw ht;ut(1,0)}},L:function(q,J,ne,ae,he,be,je,Ke){var ht=st();try{return nt(q)(J,ne,ae,he,be,je,Ke)}catch(ct){if(it(ht),ct!==ct+0)throw ct;ut(1,0)}},E:function(q,J,ne,ae,he,be,je,Ke,ht,ct,Et,br){var cr=st();try{return nt(q)(J,ne,ae,he,be,je,Ke,ht,ct,Et,br)}catch(ve){if(it(cr),ve!==ve+0)throw ve;ut(1,0)}},aa:function(q,J,ne,ae,he,be,je,Ke){var ht=st();try{return An(q,J,ne,ae,he,be,je,Ke)}catch(ct){if(it(ht),ct!==ct+0)throw ct;ut(1,0)}},_:function(q,J,ne,ae,he,be,je){var Ke=st();try{return Hr(q,J,ne,ae,he,be,je)}catch(ht){if(it(Ke),ht!==ht+0)throw ht;ut(1,0)}},Z:function(q,J,ne,ae,he){var be=st();try{return _o(q,J,ne,ae,he)}catch(je){if(it(be),je!==je+0)throw je;ut(1,0)}},ca:function(q,J,ne,ae){var he=st();try{return yo(q,J,ne,ae)}catch(be){if(it(he),be!==be+0)throw be;ut(1,0)}},$:function(q){var J=st();try{return Wr(q)}catch(ne){if(it(J),ne!==ne+0)throw ne;ut(1,0)}},ba:function(q,J){var ne=st();try{return Di(q,J)}catch(ae){if(it(ne),ae!==ae+0)throw ae;ut(1,0)}},Y:function(q,J,ne){var ae=st();try{return Kr(q,J,ne)}catch(he){if(it(ae),he!==he+0)throw he;ut(1,0)}},g:function(q){var J=st();try{nt(q)()}catch(ne){if(it(J),ne!==ne+0)throw ne;ut(1,0)}},r:function(q,J){var ne=st();try{nt(q)(J)}catch(ae){if(it(ne),ae!==ae+0)throw ae;ut(1,0)}},i:function(q,J,ne){var ae=st();try{nt(q)(J,ne)}catch(he){if(it(ae),he!==he+0)throw he;ut(1,0)}},ha:function(q,J,ne,ae){var he=st();try{nt(q)(J,ne,ae)}catch(be){if(it(he),be!==be+0)throw be;ut(1,0)}},m:function(q,J,ne,ae){var he=st();try{nt(q)(J,ne,ae)}catch(be){if(it(he),be!==be+0)throw be;ut(1,0)}},v:function(q,J,ne,ae,he){var be=st();try{nt(q)(J,ne,ae,he)}catch(je){if(it(be),je!==je+0)throw je;ut(1,0)}},u:function(q,J,ne,ae,he,be){var je=st();try{nt(q)(J,ne,ae,he,be)}catch(Ke){if(it(je),Ke!==Ke+0)throw Ke;ut(1,0)}},O:function(q,J,ne,ae,he,be,je){var Ke=st();try{nt(q)(J,ne,ae,he,be,je)}catch(ht){if(it(Ke),ht!==ht+0)throw ht;ut(1,0)}},A:function(q,J,ne,ae,he,be,je,Ke){var ht=st();try{nt(q)(J,ne,ae,he,be,je,Ke)}catch(ct){if(it(ht),ct!==ct+0)throw ct;ut(1,0)}},ka:function(q,J,ne,ae,he,be,je,Ke,ht){var ct=st();try{nt(q)(J,ne,ae,he,be,je,Ke,ht)}catch(Et){if(it(ct),Et!==Et+0)throw Et;ut(1,0)}},C:function(q,J,ne,ae,he,be,je,Ke,ht,ct,Et){var br=st();try{nt(q)(J,ne,ae,he,be,je,Ke,ht,ct,Et)}catch(cr){if(it(br),cr!==cr+0)throw cr;ut(1,0)}},D:function(q,J,ne,ae,he,be,je,Ke,ht,ct,Et,br,cr,ve,mt,Tt){var Dr=st();try{nt(q)(J,ne,ae,he,be,je,Ke,ht,ct,Et,br,cr,ve,mt,Tt)}catch(Xr){if(it(Dr),Xr!==Xr+0)throw Xr;ut(1,0)}},fa:function(q,J,ne,ae,he,be,je,Ke){var ht=st();try{Tn(q,J,ne,ae,he,be,je,Ke)}catch(ct){if(it(ht),ct!==ct+0)throw ct;ut(1,0)}},da:function(q,J,ne,ae,he,be,je,Ke,ht,ct,Et,br){var cr=st();try{Yr(q,J,ne,ae,he,be,je,Ke,ht,ct,Et,br)}catch(ve){if(it(cr),ve!==ve+0)throw ve;ut(1,0)}},ea:function(q,J,ne,ae,he,be){var je=st();try{En(q,J,ne,ae,he,be)}catch(Ke){if(it(je),Ke!==Ke+0)throw Ke;ut(1,0)}},o:function(q){return q},a:Z||f.wasmMemory,G:function(q){Ot=q},la:Un,z:function(q,J,ne,ae){return Un(q,J,ne,ae)}};(function(){function q(he,be){f.asm=he.exports,Xe.qc.push(f.asm.sb),at=f.asm.ub,dt.unshift(f.asm.Va),te=be,B||(St--,f.monitorRunDependencies&&f.monitorRunDependencies(St),St==0&&Yt&&(he=Yt,Yt=null,he()))}function J(he){q(he.instance,he.module)}function ne(he){return(function(){if(!z&&($||L)){if(typeof fetch=="function"&&!Ze.startsWith("file://"))return fetch(Ze,{credentials:"same-origin"}).then((function(be){if(!be.ok)throw"failed to load wasm binary file at '"+Ze+"'";return be.arrayBuffer()})).catch((function(){return Ir()}));if(S)return new Promise((function(be,je){S(Ze,(function(Ke){be(new Uint8Array(Ke))}),je)}))}return Promise.resolve().then((function(){return Ir()}))})().then((function(be){return WebAssembly.instantiate(be,ae)})).then((function(be){return be})).then(he,(function(be){G("failed to asynchronously prepare wasm: "+be),rt(be)}))}var ae={a:zn};if(B||(St++,f.monitorRunDependencies&&f.monitorRunDependencies(St)),f.instantiateWasm)try{return f.instantiateWasm(ae,q)}catch(he){return G("Module.instantiateWasm callback failed with error: "+he),!1}(z||typeof WebAssembly.instantiateStreaming!="function"||Er()||Ze.startsWith("file://")||N||typeof fetch!="function"?ne(J):fetch(Ze,{credentials:"same-origin"}).then((function(he){return WebAssembly.instantiateStreaming(he,ae).then(J,(function(be){return G("wasm streaming compile failed: "+be),G("falling back to ArrayBuffer instantiation"),ne(J)}))}))).catch(g)})(),f.___wasm_call_ctors=function(){return(f.___wasm_call_ctors=f.asm.Va).apply(null,arguments)},f._OrtInit=function(){return(f._OrtInit=f.asm.Wa).apply(null,arguments)},f._OrtCreateSessionOptions=function(){return(f._OrtCreateSessionOptions=f.asm.Xa).apply(null,arguments)},f._OrtAppendExecutionProvider=function(){return(f._OrtAppendExecutionProvider=f.asm.Ya).apply(null,arguments)},f._OrtAddSessionConfigEntry=function(){return(f._OrtAddSessionConfigEntry=f.asm.Za).apply(null,arguments)},f._OrtReleaseSessionOptions=function(){return(f._OrtReleaseSessionOptions=f.asm._a).apply(null,arguments)},f._OrtCreateSession=function(){return(f._OrtCreateSession=f.asm.$a).apply(null,arguments)},f._OrtReleaseSession=function(){return(f._OrtReleaseSession=f.asm.ab).apply(null,arguments)},f._OrtGetInputCount=function(){return(f._OrtGetInputCount=f.asm.bb).apply(null,arguments)},f._OrtGetOutputCount=function(){return(f._OrtGetOutputCount=f.asm.cb).apply(null,arguments)},f._OrtGetInputName=function(){return(f._OrtGetInputName=f.asm.db).apply(null,arguments)},f._OrtGetOutputName=function(){return(f._OrtGetOutputName=f.asm.eb).apply(null,arguments)},f._OrtFree=function(){return(f._OrtFree=f.asm.fb).apply(null,arguments)},f._OrtCreateTensor=function(){return(f._OrtCreateTensor=f.asm.gb).apply(null,arguments)},f._OrtGetTensorData=function(){return(f._OrtGetTensorData=f.asm.hb).apply(null,arguments)},f._OrtReleaseTensor=function(){return(f._OrtReleaseTensor=f.asm.ib).apply(null,arguments)},f._OrtCreateRunOptions=function(){return(f._OrtCreateRunOptions=f.asm.jb).apply(null,arguments)},f._OrtAddRunConfigEntry=function(){return(f._OrtAddRunConfigEntry=f.asm.kb).apply(null,arguments)},f._OrtReleaseRunOptions=function(){return(f._OrtReleaseRunOptions=f.asm.lb).apply(null,arguments)},f._OrtRun=function(){return(f._OrtRun=f.asm.mb).apply(null,arguments)},f._OrtEndProfiling=function(){return(f._OrtEndProfiling=f.asm.nb).apply(null,arguments)};var hn=f._pthread_self=function(){return(hn=f._pthread_self=f.asm.ob).apply(null,arguments)},ji=f._malloc=function(){return(ji=f._malloc=f.asm.pb).apply(null,arguments)},mo=f._free=function(){return(mo=f._free=f.asm.qb).apply(null,arguments)},ai=f._fflush=function(){return(ai=f._fflush=f.asm.rb).apply(null,arguments)};f.__emscripten_tls_init=function(){return(f.__emscripten_tls_init=f.asm.sb).apply(null,arguments)};var $i=f.___funcs_on_exit=function(){return($i=f.___funcs_on_exit=f.asm.tb).apply(null,arguments)},li=f.__emscripten_thread_init=function(){return(li=f.__emscripten_thread_init=f.asm.vb).apply(null,arguments)};f.__emscripten_thread_crashed=function(){return(f.__emscripten_thread_crashed=f.asm.wb).apply(null,arguments)};var on,go=f._emscripten_run_in_main_runtime_thread_js=function(){return(go=f._emscripten_run_in_main_runtime_thread_js=f.asm.xb).apply(null,arguments)},ui=f.__emscripten_proxy_execute_task_queue=function(){return(ui=f.__emscripten_proxy_execute_task_queue=f.asm.yb).apply(null,arguments)},gt=f.__emscripten_thread_free_data=function(){return(gt=f.__emscripten_thread_free_data=f.asm.zb).apply(null,arguments)},Ni=f.__emscripten_thread_exit=function(){return(Ni=f.__emscripten_thread_exit=f.asm.Ab).apply(null,arguments)},ut=f._setThrew=function(){return(ut=f._setThrew=f.asm.Bb).apply(null,arguments)},ci=f._emscripten_stack_set_limits=function(){return(ci=f._emscripten_stack_set_limits=f.asm.Cb).apply(null,arguments)},st=f.stackSave=function(){return(st=f.stackSave=f.asm.Db).apply(null,arguments)},it=f.stackRestore=function(){return(it=f.stackRestore=f.asm.Eb).apply(null,arguments)},di=f.stackAlloc=function(){return(di=f.stackAlloc=f.asm.Fb).apply(null,arguments)},Sn=f.___cxa_can_catch=function(){return(Sn=f.___cxa_can_catch=f.asm.Gb).apply(null,arguments)},Gn=f.___cxa_is_pointer_type=function(){return(Gn=f.___cxa_is_pointer_type=f.asm.Hb).apply(null,arguments)},Wr=f.dynCall_j=function(){return(Wr=f.dynCall_j=f.asm.Ib).apply(null,arguments)},Hr=f.dynCall_iiiiij=function(){return(Hr=f.dynCall_iiiiij=f.asm.Jb).apply(null,arguments)},Kr=f.dynCall_jii=function(){return(Kr=f.dynCall_jii=f.asm.Kb).apply(null,arguments)},Tn=f.dynCall_viiiiij=function(){return(Tn=f.dynCall_viiiiij=f.asm.Lb).apply(null,arguments)},En=f.dynCall_vjji=function(){return(En=f.dynCall_vjji=f.asm.Mb).apply(null,arguments)},Yr=f.dynCall_viiijjjii=function(){return(Yr=f.dynCall_viiijjjii=f.asm.Nb).apply(null,arguments)},yo=f.dynCall_iij=function(){return(yo=f.dynCall_iij=f.asm.Ob).apply(null,arguments)},Di=f.dynCall_ji=function(){return(Di=f.dynCall_ji=f.asm.Pb).apply(null,arguments)},An=f.dynCall_iiiiiij=function(){return(An=f.dynCall_iiiiiij=f.asm.Qb).apply(null,arguments)},_o=f.dynCall_iiij=function(){return(_o=f.dynCall_iiij=f.asm.Rb).apply(null,arguments)};function Li(){function q(){if(!on&&(on=!0,f.calledRun=!0,!De)&&(B||Ar(dt),l(f),f.onRuntimeInitialized&&f.onRuntimeInitialized(),!B)){if(f.postRun)for(typeof f.postRun=="function"&&(f.postRun=[f.postRun]);f.postRun.length;){var J=f.postRun.shift();xt.unshift(J)}Ar(xt)}}if(!(0<St))if(B)l(f),B||Ar(dt),postMessage({cmd:"loaded"});else{if(f.preRun)for(typeof f.preRun=="function"&&(f.preRun=[f.preRun]);f.preRun.length;)wt();Ar(lt),0<St||(f.setStatus?(f.setStatus("Running..."),setTimeout((function(){setTimeout((function(){f.setStatus("")}),1),q()}),1)):q())}}if(f.UTF8ToString=Ie,f.stringToUTF8=function(q,J,ne){return Le(q,h(),J,ne)},f.lengthBytesUTF8=Se,f.keepRuntimeAlive=Ct,f.wasmMemory=Z,f.stackSave=st,f.stackRestore=it,f.stackAlloc=di,f.ExitStatus=ir,f.PThread=Xe,Yt=function q(){on||Li(),on||(Yt=q)},f.preInit)for(typeof f.preInit=="function"&&(f.preInit=[f.preInit]);0<f.preInit.length;)f.preInit.pop()();return Li(),u.ready});t.exports=o},932:(t,e,n)=>{var i,o=(i=(i=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(u){var d,h,m;u=u||{},d||(d=u!==void 0?u:{}),d.ready=new Promise((function(Q,oe){h=Q,m=oe}));var p,_,f,l,g,v,S=Object.assign({},d),T="./this.program",E=(Q,oe)=>{throw oe},O=typeof window=="object",R=typeof importScripts=="function",M=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",C="";M?(C=R?n(908).dirname(C)+"/":"//",v=()=>{g||(l=n(1384),g=n(908))},p=function(Q,oe){return v(),Q=g.normalize(Q),l.readFileSync(Q,oe?void 0:"utf8")},f=Q=>((Q=p(Q,!0)).buffer||(Q=new Uint8Array(Q)),Q),_=(Q,oe,ce)=>{v(),Q=g.normalize(Q),l.readFile(Q,(function(fe,ye){fe?ce(fe):oe(ye.buffer)}))},1<process.argv.length&&(T=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(Q){if(!(Q instanceof dt))throw Q})),process.on("unhandledRejection",(function(Q){throw Q})),E=(Q,oe)=>{if(N||0<Re)throw process.exitCode=Q,oe;oe instanceof dt||L("exiting due to exception: "+oe),process.exit(Q)},d.inspect=function(){return"[Emscripten Module object]"}):(O||R)&&(R?C=self.location.href:typeof document<"u"&&document.currentScript&&(C=document.currentScript.src),i&&(C=i),C=C.indexOf("blob:")!==0?C.substr(0,C.replace(/[?#].*/,"").lastIndexOf("/")+1):"",p=Q=>{var oe=new XMLHttpRequest;return oe.open("GET",Q,!1),oe.send(null),oe.responseText},R&&(f=Q=>{var oe=new XMLHttpRequest;return oe.open("GET",Q,!1),oe.responseType="arraybuffer",oe.send(null),new Uint8Array(oe.response)}),_=(Q,oe,ce)=>{var fe=new XMLHttpRequest;fe.open("GET",Q,!0),fe.responseType="arraybuffer",fe.onload=()=>{fe.status==200||fe.status==0&&fe.response?oe(fe.response):ce()},fe.onerror=ce,fe.send(null)});var j,$=d.print||console.log.bind(console),L=d.printErr||console.warn.bind(console);Object.assign(d,S),S=null,d.thisProgram&&(T=d.thisProgram),d.quit&&(E=d.quit),d.wasmBinary&&(j=d.wasmBinary);var N=d.noExitRuntime||!1;typeof WebAssembly!="object"&&Ye("no native wasm support detected");var B,U,H,Y,K,z,V=!1,G=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function ie(Q,oe,ce){var fe=(oe>>>=0)+ce;for(ce=oe;Q[ce]&&!(ce>=fe);)++ce;if(16<ce-oe&&Q.buffer&&G)return G.decode(Q.subarray(oe,ce));for(fe="";oe<ce;){var ye=Q[oe++];if(128&ye){var we=63&Q[oe++];if((224&ye)==192)fe+=String.fromCharCode((31&ye)<<6|we);else{var Ne=63&Q[oe++];65536>(ye=(240&ye)==224?(15&ye)<<12|we<<6|Ne:(7&ye)<<18|we<<12|Ne<<6|63&Q[oe++])?fe+=String.fromCharCode(ye):(ye-=65536,fe+=String.fromCharCode(55296|ye>>10,56320|1023&ye))}}else fe+=String.fromCharCode(ye)}return fe}function Z(Q,oe){return(Q>>>=0)?ie(Y,Q,oe):""}function te(Q,oe,ce,fe){if(!(0<fe))return 0;var ye=ce>>>=0;fe=ce+fe-1;for(var we=0;we<Q.length;++we){var Ne=Q.charCodeAt(we);if(55296<=Ne&&57343>=Ne&&(Ne=65536+((1023&Ne)<<10)|1023&Q.charCodeAt(++we)),127>=Ne){if(ce>=fe)break;oe[ce++>>>0]=Ne}else{if(2047>=Ne){if(ce+1>=fe)break;oe[ce++>>>0]=192|Ne>>6}else{if(65535>=Ne){if(ce+2>=fe)break;oe[ce++>>>0]=224|Ne>>12}else{if(ce+3>=fe)break;oe[ce++>>>0]=240|Ne>>18,oe[ce++>>>0]=128|Ne>>12&63}oe[ce++>>>0]=128|Ne>>6&63}oe[ce++>>>0]=128|63&Ne}}return oe[ce>>>0]=0,ce-ye}function ee(Q){for(var oe=0,ce=0;ce<Q.length;++ce){var fe=Q.charCodeAt(ce);127>=fe?oe++:2047>=fe?oe+=2:55296<=fe&&57343>=fe?(oe+=4,++ce):oe+=3}return oe}function le(){var Q=B.buffer;U=Q,d.HEAP8=H=new Int8Array(Q),d.HEAP16=new Int16Array(Q),d.HEAP32=K=new Int32Array(Q),d.HEAPU8=Y=new Uint8Array(Q),d.HEAPU16=new Uint16Array(Q),d.HEAPU32=z=new Uint32Array(Q),d.HEAPF32=new Float32Array(Q),d.HEAPF64=new Float64Array(Q)}var ge,Ae=[],Te=[],Ce=[],De=[],Re=0;function Ee(){var Q=d.preRun.shift();Ae.unshift(Q)}var Ie,Le=0,Se=null;function Ye(Q){throw d.onAbort&&d.onAbort(Q),L(Q="Aborted("+Q+")"),V=!0,Q=new WebAssembly.RuntimeError(Q+". Build with -sASSERTIONS for more info."),m(Q),Q}function Fe(){return Ie.startsWith("data:application/octet-stream;base64,")}if(Ie="ort-wasm.wasm",!Fe()){var at=Ie;Ie=d.locateFile?d.locateFile(at,C):C+at}function lt(){var Q=Ie;try{if(Q==Ie&&j)return new Uint8Array(j);if(f)return f(Q);throw"both async and sync fetching of the wasm failed"}catch(oe){Ye(oe)}}function dt(Q){this.name="ExitStatus",this.message="Program terminated with exit("+Q+")",this.status=Q}function Rt(Q){for(;0<Q.length;)Q.shift()(d)}var xt=[],Ct=0,wt=0;function Ze(Q){this.Db=Q,this.zb=Q-24,this.Ub=function(oe){z[this.zb+4>>2>>>0]=oe},this.Eb=function(){return z[this.zb+4>>2>>>0]},this.Sb=function(oe){z[this.zb+8>>2>>>0]=oe},this.Wb=function(){return z[this.zb+8>>2>>>0]},this.Tb=function(){K[this.zb>>2>>>0]=0},this.Ib=function(oe){H[this.zb+12>>0>>>0]=oe?1:0},this.Pb=function(){return H[this.zb+12>>0>>>0]!=0},this.Jb=function(oe){H[this.zb+13>>0>>>0]=oe?1:0},this.Lb=function(){return H[this.zb+13>>0>>>0]!=0},this.Rb=function(oe,ce){this.Fb(0),this.Ub(oe),this.Sb(ce),this.Tb(),this.Ib(!1),this.Jb(!1)},this.Nb=function(){K[this.zb>>2>>>0]+=1},this.Xb=function(){var oe=K[this.zb>>2>>>0];return K[this.zb>>2>>>0]=oe-1,oe===1},this.Fb=function(oe){z[this.zb+16>>2>>>0]=oe},this.Ob=function(){return z[this.zb+16>>2>>>0]},this.Qb=function(){if(pr(this.Eb()))return z[this.Db>>2>>>0];var oe=this.Ob();return oe!==0?oe:this.Db}}function St(Q){return Pr(new Ze(Q).zb)}var Yt=[];function rt(Q){var oe=Yt[Q];return oe||(Q>=Yt.length&&(Yt.length=Q+1),Yt[Q]=oe=ge.get(Q)),oe}function Er(Q){var oe=ee(Q)+1,ce=nt(oe);return ce&&te(Q,H,ce,oe),ce}var Ir={};function jr(){if(!ir){var Q,oe={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:T||"./this.program"};for(Q in Ir)Ir[Q]===void 0?delete oe[Q]:oe[Q]=Ir[Q];var ce=[];for(Q in oe)ce.push(Q+"="+oe[Q]);ir=ce}return ir}var ir,Gt=[null,[],[]];function ur(Q,oe){var ce=Gt[Q];oe===0||oe===10?((Q===1?$:L)(ie(ce,0)),ce.length=0):ce.push(oe)}var At=0;function $r(Q){return Q%4==0&&(Q%100!=0||Q%400==0)}var Xe=[31,29,31,30,31,30,31,31,30,31,30,31],Ar=[31,28,31,30,31,30,31,31,30,31,30,31];function zr(Q,oe,ce,fe){function ye(xe,pt,vt){for(xe=typeof xe=="number"?xe.toString():xe||"";xe.length<pt;)xe=vt[0]+xe;return xe}function we(xe,pt){return ye(xe,pt,"0")}function Ne(xe,pt){function vt(Nr){return 0>Nr?-1:0<Nr?1:0}var yr;return(yr=vt(xe.getFullYear()-pt.getFullYear()))===0&&(yr=vt(xe.getMonth()-pt.getMonth()))===0&&(yr=vt(xe.getDate()-pt.getDate())),yr}function We(xe){switch(xe.getDay()){case 0:return new Date(xe.getFullYear()-1,11,29);case 1:return xe;case 2:return new Date(xe.getFullYear(),0,3);case 3:return new Date(xe.getFullYear(),0,2);case 4:return new Date(xe.getFullYear(),0,1);case 5:return new Date(xe.getFullYear()-1,11,31);case 6:return new Date(xe.getFullYear()-1,11,30)}}function Be(xe){var pt=xe.Bb;for(xe=new Date(new Date(xe.Cb+1900,0,1).getTime());0<pt;){var vt=xe.getMonth(),yr=($r(xe.getFullYear())?Xe:Ar)[vt];if(!(pt>yr-xe.getDate())){xe.setDate(xe.getDate()+pt);break}pt-=yr-xe.getDate()+1,xe.setDate(1),11>vt?xe.setMonth(vt+1):(xe.setMonth(0),xe.setFullYear(xe.getFullYear()+1))}return vt=new Date(xe.getFullYear()+1,0,4),pt=We(new Date(xe.getFullYear(),0,4)),vt=We(vt),0>=Ne(pt,xe)?0>=Ne(vt,xe)?xe.getFullYear()+1:xe.getFullYear():xe.getFullYear()-1}var ot=K[fe+40>>2>>>0];for(var bt in fe={$b:K[fe>>2>>>0],Zb:K[fe+4>>2>>>0],Gb:K[fe+8>>2>>>0],Kb:K[fe+12>>2>>>0],Hb:K[fe+16>>2>>>0],Cb:K[fe+20>>2>>>0],Ab:K[fe+24>>2>>>0],Bb:K[fe+28>>2>>>0],bc:K[fe+32>>2>>>0],Yb:K[fe+36>>2>>>0],ac:ot?Z(ot):""},ce=Z(ce),ot={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})ce=ce.replace(new RegExp(bt,"g"),ot[bt]);var ft="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Vt="January February March April May June July August September October November December".split(" ");for(bt in ot={"%a":function(xe){return ft[xe.Ab].substring(0,3)},"%A":function(xe){return ft[xe.Ab]},"%b":function(xe){return Vt[xe.Hb].substring(0,3)},"%B":function(xe){return Vt[xe.Hb]},"%C":function(xe){return we((xe.Cb+1900)/100|0,2)},"%d":function(xe){return we(xe.Kb,2)},"%e":function(xe){return ye(xe.Kb,2," ")},"%g":function(xe){return Be(xe).toString().substring(2)},"%G":function(xe){return Be(xe)},"%H":function(xe){return we(xe.Gb,2)},"%I":function(xe){return(xe=xe.Gb)==0?xe=12:12<xe&&(xe-=12),we(xe,2)},"%j":function(xe){for(var pt=0,vt=0;vt<=xe.Hb-1;pt+=($r(xe.Cb+1900)?Xe:Ar)[vt++]);return we(xe.Kb+pt,3)},"%m":function(xe){return we(xe.Hb+1,2)},"%M":function(xe){return we(xe.Zb,2)},"%n":function(){return`
`},"%p":function(xe){return 0<=xe.Gb&&12>xe.Gb?"AM":"PM"},"%S":function(xe){return we(xe.$b,2)},"%t":function(){return"	"},"%u":function(xe){return xe.Ab||7},"%U":function(xe){return we(Math.floor((xe.Bb+7-xe.Ab)/7),2)},"%V":function(xe){var pt=Math.floor((xe.Bb+7-(xe.Ab+6)%7)/7);if(2>=(xe.Ab+371-xe.Bb-2)%7&&pt++,pt)pt==53&&((vt=(xe.Ab+371-xe.Bb)%7)==4||vt==3&&$r(xe.Cb)||(pt=1));else{pt=52;var vt=(xe.Ab+7-xe.Bb-1)%7;(vt==4||vt==5&&$r(xe.Cb%400-1))&&pt++}return we(pt,2)},"%w":function(xe){return xe.Ab},"%W":function(xe){return we(Math.floor((xe.Bb+7-(xe.Ab+6)%7)/7),2)},"%y":function(xe){return(xe.Cb+1900).toString().substring(2)},"%Y":function(xe){return xe.Cb+1900},"%z":function(xe){var pt=0<=(xe=xe.Yb);return xe=Math.abs(xe)/60,(pt?"+":"-")+("0000"+(xe/60*100+xe%60)).slice(-4)},"%Z":function(xe){return xe.ac},"%%":function(){return"%"}},ce=ce.replace(/%%/g,"\0\0"),ot)ce.includes(bt)&&(ce=ce.replace(new RegExp(bt,"g"),ot[bt](fe)));return bt=(function(xe){var pt=Array(ee(xe)+1);return te(xe,pt,0,pt.length),pt})(ce=ce.replace(/\0\0/g,"%")),bt.length>oe?0:(H.set(bt,Q>>>0),bt.length-1)}var nn={a:function(Q){return nt(Q+24)+24},m:function(Q){return(Q=new Ze(Q)).Pb()||(Q.Ib(!0),Ct--),Q.Jb(!1),xt.push(Q),Q.Nb(),Q.Qb()},ia:function(Q){throw L("Unexpected exception thrown, this is not properly supported - aborting"),V=!0,Q},w:function(){et(0);var Q=xt.pop();if(Q.Xb()&&!Q.Lb()){var oe=Q.Wb();oe&&rt(oe)(Q.Db),St(Q.Db)}wt=0},d:function(){var Q=wt;if(!Q)return At=0;var oe=new Ze(Q);oe.Fb(Q);var ce=oe.Eb();if(!ce)return At=0,Q;for(var fe=Array.prototype.slice.call(arguments),ye=0;ye<fe.length;ye++){var we=fe[ye];if(we===0||we===ce)break;if($t(we,ce,oe.zb+16))return At=we,Q}return At=ce,Q},k:function(){var Q=wt;if(!Q)return At=0;var oe=new Ze(Q);oe.Fb(Q);var ce=oe.Eb();if(!ce)return At=0,Q;for(var fe=Array.prototype.slice.call(arguments),ye=0;ye<fe.length;ye++){var we=fe[ye];if(we===0||we===ce)break;if($t(we,ce,oe.zb+16))return At=we,Q}return At=ce,Q},g:function(){var Q=wt;if(!Q)return At=0;var oe=new Ze(Q);oe.Fb(Q);var ce=oe.Eb();if(!ce)return At=0,Q;for(var fe=Array.prototype.slice.call(arguments),ye=0;ye<fe.length;ye++){var we=fe[ye];if(we===0||we===ce)break;if($t(we,ce,oe.zb+16))return At=we,Q}return At=ce,Q},s:St,L:function(){var Q=xt.pop();Q||Ye("no exception to throw");var oe=Q.Db;throw Q.Lb()||(xt.push(Q),Q.Jb(!0),Q.Ib(!1),Ct++),wt=oe,oe},b:function(Q,oe,ce){throw new Ze(Q).Rb(oe,ce),wt=Q,Ct++,Q},la:function(){return Ct},i:function(Q){throw wt||(wt=Q),Q},H:function(){return 0},Ba:function(){},pa:function(){},ra:function(){},ka:function(){return 0},za:function(){},ua:function(){},ya:function(){},R:function(){},qa:function(){},na:function(){},Aa:function(){},oa:function(){},Ha:function(){},Ja:function(){Ye("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ia:function(){Ye("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},S:function(){return Date.now()},Ca:function(){return!0},Da:function(Q,oe){Q=new Date(1e3*(z[Q>>>2]+4294967296*K[Q+4>>>2])),K[oe>>2>>>0]=Q.getUTCSeconds(),K[oe+4>>2>>>0]=Q.getUTCMinutes(),K[oe+8>>2>>>0]=Q.getUTCHours(),K[oe+12>>2>>>0]=Q.getUTCDate(),K[oe+16>>2>>>0]=Q.getUTCMonth(),K[oe+20>>2>>>0]=Q.getUTCFullYear()-1900,K[oe+24>>2>>>0]=Q.getUTCDay(),K[oe+28>>2>>>0]=(Q.getTime()-Date.UTC(Q.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},Ea:function(Q,oe){Q=new Date(1e3*(z[Q>>>2]+4294967296*K[Q+4>>>2])),K[oe>>2>>>0]=Q.getSeconds(),K[oe+4>>2>>>0]=Q.getMinutes(),K[oe+8>>2>>>0]=Q.getHours(),K[oe+12>>2>>>0]=Q.getDate(),K[oe+16>>2>>>0]=Q.getMonth(),K[oe+20>>2>>>0]=Q.getFullYear()-1900,K[oe+24>>2>>>0]=Q.getDay();var ce=new Date(Q.getFullYear(),0,1);K[oe+28>>2>>>0]=(Q.getTime()-ce.getTime())/864e5|0,K[oe+36>>2>>>0]=-60*Q.getTimezoneOffset();var fe=new Date(Q.getFullYear(),6,1).getTimezoneOffset();ce=ce.getTimezoneOffset(),K[oe+32>>2>>>0]=0|(fe!=ce&&Q.getTimezoneOffset()==Math.min(ce,fe))},Fa:function(Q){var oe=new Date(K[Q+20>>2>>>0]+1900,K[Q+16>>2>>>0],K[Q+12>>2>>>0],K[Q+8>>2>>>0],K[Q+4>>2>>>0],K[Q>>2>>>0],0),ce=K[Q+32>>2>>>0],fe=oe.getTimezoneOffset(),ye=new Date(oe.getFullYear(),0,1),we=new Date(oe.getFullYear(),6,1).getTimezoneOffset(),Ne=ye.getTimezoneOffset(),We=Math.min(Ne,we);return 0>ce?K[Q+32>>2>>>0]=+(we!=Ne&&We==fe):0<ce!=(We==fe)&&(we=Math.max(Ne,we),oe.setTime(oe.getTime()+6e4*((0<ce?We:we)-fe))),K[Q+24>>2>>>0]=oe.getDay(),K[Q+28>>2>>>0]=(oe.getTime()-ye.getTime())/864e5|0,K[Q>>2>>>0]=oe.getSeconds(),K[Q+4>>2>>>0]=oe.getMinutes(),K[Q+8>>2>>>0]=oe.getHours(),K[Q+12>>2>>>0]=oe.getDate(),K[Q+16>>2>>>0]=oe.getMonth(),oe.getTime()/1e3|0},sa:function(){return-52},ta:function(){},Ga:function Q(oe,ce,fe){Q.Vb||(Q.Vb=!0,(function(ye,we,Ne){function We(Vt){return(Vt=Vt.toTimeString().match(/\(([A-Za-z ]+)\)$/))?Vt[1]:"GMT"}var Be=new Date().getFullYear(),ot=new Date(Be,0,1),bt=new Date(Be,6,1);Be=ot.getTimezoneOffset();var ft=bt.getTimezoneOffset();K[ye>>2>>>0]=60*Math.max(Be,ft),K[we>>2>>>0]=+(Be!=ft),ye=We(ot),we=We(bt),ye=Er(ye),we=Er(we),ft<Be?(z[Ne>>2>>>0]=ye,z[Ne+4>>2>>>0]=we):(z[Ne>>2>>>0]=we,z[Ne+4>>2>>>0]=ye)})(oe,ce,fe))},B:function(){Ye("")},ma:function(){return 4294901760},I:M?()=>{var Q=process.hrtime();return 1e3*Q[0]+Q[1]/1e6}:()=>performance.now(),xa:function(Q,oe,ce){Y.copyWithin(Q>>>0,oe>>>0,oe+ce>>>0)},G:function(Q){var oe=Y.length;if(4294901760<(Q>>>=0))return!1;for(var ce=1;4>=ce;ce*=2){var fe=oe*(1+.2/ce);fe=Math.min(fe,Q+100663296);var ye=Math;fe=Math.max(Q,fe),ye=ye.min.call(ye,4294901760,fe+(65536-fe%65536)%65536);e:{try{B.grow(ye-U.byteLength+65535>>>16),le();var we=1;break e}catch{}we=void 0}if(we)return!0}return!1},va:function(Q,oe){var ce=0;return jr().forEach((function(fe,ye){var we=oe+ce;for(ye=z[Q+4*ye>>2>>>0]=we,we=0;we<fe.length;++we)H[ye++>>0>>>0]=fe.charCodeAt(we);H[ye>>0>>>0]=0,ce+=fe.length+1})),0},wa:function(Q,oe){var ce=jr();z[Q>>2>>>0]=ce.length;var fe=0;return ce.forEach((function(ye){fe+=ye.length+1})),z[oe>>2>>>0]=fe,0},ba:function(Q){N||0<Re||(tr(),Rt(Ce),hr(0),Gt[1].length&&ur(1,10),Gt[2].length&&ur(2,10)),N||0<Re||(d.onExit&&d.onExit(Q),V=!0),E(Q,new dt(Q))},E:function(){return 52},Q:function(){return 52},ca:function(){return 70},P:function(Q,oe,ce,fe){for(var ye=0,we=0;we<ce;we++){var Ne=z[oe>>2>>>0],We=z[oe+4>>2>>>0];oe+=8;for(var Be=0;Be<We;Be++)ur(Q,Y[Ne+Be>>>0]);ye+=We}return z[fe>>2>>>0]=ye,0},c:function(){return At},ja:function Q(oe,ce){Q.Mb||(Q.Mb=(function(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var ye=new Uint8Array(1);return()=>(crypto.getRandomValues(ye),ye[0])}if(M)try{var we=n(Object((function(){var Ne=new Error("Cannot find module 'crypto'");throw Ne.code="MODULE_NOT_FOUND",Ne})()));return()=>we.randomBytes(1)[0]}catch{}return()=>Ye("randomDevice")})());for(var fe=0;fe<ce;fe++)H[oe+fe>>0>>>0]=Q.Mb();return 0},ea:function(Q,oe,ce){var fe=Me();try{return rt(Q)(oe,ce)}catch(ye){if(Ve(fe),ye!==ye+0)throw ye;et(1,0)}},fa:function(Q,oe,ce){var fe=Me();try{return rt(Q)(oe,ce)}catch(ye){if(Ve(fe),ye!==ye+0)throw ye;et(1,0)}},J:function(Q){var oe=Me();try{return rt(Q)()}catch(ce){if(Ve(oe),ce!==ce+0)throw ce;et(1,0)}},e:function(Q,oe){var ce=Me();try{return rt(Q)(oe)}catch(fe){if(Ve(ce),fe!==fe+0)throw fe;et(1,0)}},N:function(Q,oe,ce){var fe=Me();try{return rt(Q)(oe,ce)}catch(ye){if(Ve(fe),ye!==ye+0)throw ye;et(1,0)}},O:function(Q,oe,ce){var fe=Me();try{return rt(Q)(oe,ce)}catch(ye){if(Ve(fe),ye!==ye+0)throw ye;et(1,0)}},j:function(Q,oe,ce){var fe=Me();try{return rt(Q)(oe,ce)}catch(ye){if(Ve(fe),ye!==ye+0)throw ye;et(1,0)}},o:function(Q,oe,ce,fe){var ye=Me();try{return rt(Q)(oe,ce,fe)}catch(we){if(Ve(ye),we!==we+0)throw we;et(1,0)}},p:function(Q,oe,ce,fe,ye){var we=Me();try{return rt(Q)(oe,ce,fe,ye)}catch(Ne){if(Ve(we),Ne!==Ne+0)throw Ne;et(1,0)}},M:function(Q,oe,ce,fe,ye,we){var Ne=Me();try{return rt(Q)(oe,ce,fe,ye,we)}catch(We){if(Ve(Ne),We!==We+0)throw We;et(1,0)}},r:function(Q,oe,ce,fe,ye,we){var Ne=Me();try{return rt(Q)(oe,ce,fe,ye,we)}catch(We){if(Ve(Ne),We!==We+0)throw We;et(1,0)}},v:function(Q,oe,ce,fe,ye,we,Ne){var We=Me();try{return rt(Q)(oe,ce,fe,ye,we,Ne)}catch(Be){if(Ve(We),Be!==Be+0)throw Be;et(1,0)}},K:function(Q,oe,ce,fe,ye,we,Ne,We){var Be=Me();try{return rt(Q)(oe,ce,fe,ye,we,Ne,We)}catch(ot){if(Ve(Be),ot!==ot+0)throw ot;et(1,0)}},D:function(Q,oe,ce,fe,ye,we,Ne,We,Be,ot,bt,ft){var Vt=Me();try{return rt(Q)(oe,ce,fe,ye,we,Ne,We,Be,ot,bt,ft)}catch(xe){if(Ve(Vt),xe!==xe+0)throw xe;et(1,0)}},X:function(Q,oe,ce,fe,ye,we,Ne,We){var Be=Me();try{return fn(Q,oe,ce,fe,ye,we,Ne,We)}catch(ot){if(Ve(Be),ot!==ot+0)throw ot;et(1,0)}},V:function(Q,oe,ce,fe,ye,we,Ne){var We=Me();try{return Nt(Q,oe,ce,fe,ye,we,Ne)}catch(Be){if(Ve(We),Be!==Be+0)throw Be;et(1,0)}},U:function(Q,oe,ce,fe,ye){var we=Me();try{return qn(Q,oe,ce,fe,ye)}catch(Ne){if(Ve(we),Ne!==Ne+0)throw Ne;et(1,0)}},Z:function(Q,oe,ce,fe){var ye=Me();try{return Xt(Q,oe,ce,fe)}catch(we){if(Ve(ye),we!==we+0)throw we;et(1,0)}},W:function(Q){var oe=Me();try{return Pt(Q)}catch(ce){if(Ve(oe),ce!==ce+0)throw ce;et(1,0)}},Y:function(Q,oe){var ce=Me();try{return Gr(Q,oe)}catch(fe){if(Ve(ce),fe!==fe+0)throw fe;et(1,0)}},T:function(Q,oe,ce){var fe=Me();try{return mr(Q,oe,ce)}catch(ye){if(Ve(fe),ye!==ye+0)throw ye;et(1,0)}},f:function(Q){var oe=Me();try{rt(Q)()}catch(ce){if(Ve(oe),ce!==ce+0)throw ce;et(1,0)}},q:function(Q,oe){var ce=Me();try{rt(Q)(oe)}catch(fe){if(Ve(ce),fe!==fe+0)throw fe;et(1,0)}},h:function(Q,oe,ce){var fe=Me();try{rt(Q)(oe,ce)}catch(ye){if(Ve(fe),ye!==ye+0)throw ye;et(1,0)}},da:function(Q,oe,ce,fe){var ye=Me();try{rt(Q)(oe,ce,fe)}catch(we){if(Ve(ye),we!==we+0)throw we;et(1,0)}},l:function(Q,oe,ce,fe){var ye=Me();try{rt(Q)(oe,ce,fe)}catch(we){if(Ve(ye),we!==we+0)throw we;et(1,0)}},t:function(Q,oe,ce,fe,ye){var we=Me();try{rt(Q)(oe,ce,fe,ye)}catch(Ne){if(Ve(we),Ne!==Ne+0)throw Ne;et(1,0)}},u:function(Q,oe,ce,fe,ye,we){var Ne=Me();try{rt(Q)(oe,ce,fe,ye,we)}catch(We){if(Ve(Ne),We!==We+0)throw We;et(1,0)}},x:function(Q,oe,ce,fe,ye,we,Ne){var We=Me();try{rt(Q)(oe,ce,fe,ye,we,Ne)}catch(Be){if(Ve(We),Be!==Be+0)throw Be;et(1,0)}},z:function(Q,oe,ce,fe,ye,we,Ne,We){var Be=Me();try{rt(Q)(oe,ce,fe,ye,we,Ne,We)}catch(ot){if(Ve(Be),ot!==ot+0)throw ot;et(1,0)}},ga:function(Q,oe,ce,fe,ye,we,Ne,We,Be){var ot=Me();try{rt(Q)(oe,ce,fe,ye,we,Ne,We,Be)}catch(bt){if(Ve(ot),bt!==bt+0)throw bt;et(1,0)}},A:function(Q,oe,ce,fe,ye,we,Ne,We,Be,ot,bt){var ft=Me();try{rt(Q)(oe,ce,fe,ye,we,Ne,We,Be,ot,bt)}catch(Vt){if(Ve(ft),Vt!==Vt+0)throw Vt;et(1,0)}},C:function(Q,oe,ce,fe,ye,we,Ne,We,Be,ot,bt,ft,Vt,xe,pt,vt){var yr=Me();try{rt(Q)(oe,ce,fe,ye,we,Ne,We,Be,ot,bt,ft,Vt,xe,pt,vt)}catch(Nr){if(Ve(yr),Nr!==Nr+0)throw Nr;et(1,0)}},aa:function(Q,oe,ce,fe,ye,we,Ne,We){var Be=Me();try{Lt(Q,oe,ce,fe,ye,we,Ne,We)}catch(ot){if(Ve(Be),ot!==ot+0)throw ot;et(1,0)}},_:function(Q,oe,ce,fe,ye,we,Ne,We,Be,ot,bt,ft){var Vt=Me();try{gr(Q,oe,ce,fe,ye,we,Ne,We,Be,ot,bt,ft)}catch(xe){if(Ve(Vt),xe!==xe+0)throw xe;et(1,0)}},$:function(Q,oe,ce,fe,ye,we){var Ne=Me();try{Wt(Q,oe,ce,fe,ye,we)}catch(We){if(Ve(Ne),We!==We+0)throw We;et(1,0)}},n:function(Q){return Q},F:function(Q){At=Q},ha:zr,y:function(Q,oe,ce,fe){return zr(Q,oe,ce,fe)}};(function(){function Q(ye){d.asm=ye.exports,B=d.asm.Ka,le(),ge=d.asm.ib,Te.unshift(d.asm.La),Le--,d.monitorRunDependencies&&d.monitorRunDependencies(Le),Le==0&&Se&&(ye=Se,Se=null,ye())}function oe(ye){Q(ye.instance)}function ce(ye){return(function(){if(!j&&(O||R)){if(typeof fetch=="function"&&!Ie.startsWith("file://"))return fetch(Ie,{credentials:"same-origin"}).then((function(we){if(!we.ok)throw"failed to load wasm binary file at '"+Ie+"'";return we.arrayBuffer()})).catch((function(){return lt()}));if(_)return new Promise((function(we,Ne){_(Ie,(function(We){we(new Uint8Array(We))}),Ne)}))}return Promise.resolve().then((function(){return lt()}))})().then((function(we){return WebAssembly.instantiate(we,fe)})).then((function(we){return we})).then(ye,(function(we){L("failed to asynchronously prepare wasm: "+we),Ye(we)}))}var fe={a:nn};if(Le++,d.monitorRunDependencies&&d.monitorRunDependencies(Le),d.instantiateWasm)try{return d.instantiateWasm(fe,Q)}catch(ye){return L("Module.instantiateWasm callback failed with error: "+ye),!1}(j||typeof WebAssembly.instantiateStreaming!="function"||Fe()||Ie.startsWith("file://")||M||typeof fetch!="function"?ce(oe):fetch(Ie,{credentials:"same-origin"}).then((function(ye){return WebAssembly.instantiateStreaming(ye,fe).then(oe,(function(we){return L("wasm streaming compile failed: "+we),L("falling back to ArrayBuffer instantiation"),ce(oe)}))}))).catch(m)})(),d.___wasm_call_ctors=function(){return(d.___wasm_call_ctors=d.asm.La).apply(null,arguments)},d._OrtInit=function(){return(d._OrtInit=d.asm.Ma).apply(null,arguments)},d._OrtCreateSessionOptions=function(){return(d._OrtCreateSessionOptions=d.asm.Na).apply(null,arguments)},d._OrtAppendExecutionProvider=function(){return(d._OrtAppendExecutionProvider=d.asm.Oa).apply(null,arguments)},d._OrtAddSessionConfigEntry=function(){return(d._OrtAddSessionConfigEntry=d.asm.Pa).apply(null,arguments)},d._OrtReleaseSessionOptions=function(){return(d._OrtReleaseSessionOptions=d.asm.Qa).apply(null,arguments)},d._OrtCreateSession=function(){return(d._OrtCreateSession=d.asm.Ra).apply(null,arguments)},d._OrtReleaseSession=function(){return(d._OrtReleaseSession=d.asm.Sa).apply(null,arguments)},d._OrtGetInputCount=function(){return(d._OrtGetInputCount=d.asm.Ta).apply(null,arguments)},d._OrtGetOutputCount=function(){return(d._OrtGetOutputCount=d.asm.Ua).apply(null,arguments)},d._OrtGetInputName=function(){return(d._OrtGetInputName=d.asm.Va).apply(null,arguments)},d._OrtGetOutputName=function(){return(d._OrtGetOutputName=d.asm.Wa).apply(null,arguments)},d._OrtFree=function(){return(d._OrtFree=d.asm.Xa).apply(null,arguments)},d._OrtCreateTensor=function(){return(d._OrtCreateTensor=d.asm.Ya).apply(null,arguments)},d._OrtGetTensorData=function(){return(d._OrtGetTensorData=d.asm.Za).apply(null,arguments)},d._OrtReleaseTensor=function(){return(d._OrtReleaseTensor=d.asm._a).apply(null,arguments)},d._OrtCreateRunOptions=function(){return(d._OrtCreateRunOptions=d.asm.$a).apply(null,arguments)},d._OrtAddRunConfigEntry=function(){return(d._OrtAddRunConfigEntry=d.asm.ab).apply(null,arguments)},d._OrtReleaseRunOptions=function(){return(d._OrtReleaseRunOptions=d.asm.bb).apply(null,arguments)},d._OrtRun=function(){return(d._OrtRun=d.asm.cb).apply(null,arguments)},d._OrtEndProfiling=function(){return(d._OrtEndProfiling=d.asm.db).apply(null,arguments)};var er,nt=d._malloc=function(){return(nt=d._malloc=d.asm.eb).apply(null,arguments)},Pr=d._free=function(){return(Pr=d._free=d.asm.fb).apply(null,arguments)},hr=d._fflush=function(){return(hr=d._fflush=d.asm.gb).apply(null,arguments)},tr=d.___funcs_on_exit=function(){return(tr=d.___funcs_on_exit=d.asm.hb).apply(null,arguments)},et=d._setThrew=function(){return(et=d._setThrew=d.asm.jb).apply(null,arguments)},Me=d.stackSave=function(){return(Me=d.stackSave=d.asm.kb).apply(null,arguments)},Ve=d.stackRestore=function(){return(Ve=d.stackRestore=d.asm.lb).apply(null,arguments)},Mt=d.stackAlloc=function(){return(Mt=d.stackAlloc=d.asm.mb).apply(null,arguments)},$t=d.___cxa_can_catch=function(){return($t=d.___cxa_can_catch=d.asm.nb).apply(null,arguments)},pr=d.___cxa_is_pointer_type=function(){return(pr=d.___cxa_is_pointer_type=d.asm.ob).apply(null,arguments)},Pt=d.dynCall_j=function(){return(Pt=d.dynCall_j=d.asm.pb).apply(null,arguments)},Nt=d.dynCall_iiiiij=function(){return(Nt=d.dynCall_iiiiij=d.asm.qb).apply(null,arguments)},mr=d.dynCall_jii=function(){return(mr=d.dynCall_jii=d.asm.rb).apply(null,arguments)},Lt=d.dynCall_viiiiij=function(){return(Lt=d.dynCall_viiiiij=d.asm.sb).apply(null,arguments)},Wt=d.dynCall_vjji=function(){return(Wt=d.dynCall_vjji=d.asm.tb).apply(null,arguments)},gr=d.dynCall_viiijjjii=function(){return(gr=d.dynCall_viiijjjii=d.asm.ub).apply(null,arguments)},Xt=d.dynCall_iij=function(){return(Xt=d.dynCall_iij=d.asm.vb).apply(null,arguments)},Gr=d.dynCall_ji=function(){return(Gr=d.dynCall_ji=d.asm.wb).apply(null,arguments)},fn=d.dynCall_iiiiiij=function(){return(fn=d.dynCall_iiiiiij=d.asm.xb).apply(null,arguments)},qn=d.dynCall_iiij=function(){return(qn=d.dynCall_iiij=d.asm.yb).apply(null,arguments)};function Vn(){function Q(){if(!er&&(er=!0,d.calledRun=!0,!V)){if(Rt(Te),h(d),d.onRuntimeInitialized&&d.onRuntimeInitialized(),d.postRun)for(typeof d.postRun=="function"&&(d.postRun=[d.postRun]);d.postRun.length;){var oe=d.postRun.shift();De.unshift(oe)}Rt(De)}}if(!(0<Le)){if(d.preRun)for(typeof d.preRun=="function"&&(d.preRun=[d.preRun]);d.preRun.length;)Ee();Rt(Ae),0<Le||(d.setStatus?(d.setStatus("Running..."),setTimeout((function(){setTimeout((function(){d.setStatus("")}),1),Q()}),1)):Q())}}if(d.UTF8ToString=Z,d.stringToUTF8=function(Q,oe,ce){return te(Q,Y,oe,ce)},d.lengthBytesUTF8=ee,d.stackSave=Me,d.stackRestore=Ve,d.stackAlloc=Mt,Se=function Q(){er||Vn(),er||(Se=Q)},d.preInit)for(typeof d.preInit=="function"&&(d.preInit=[d.preInit]);0<d.preInit.length;)d.preInit.pop()();return Vn(),u.ready});t.exports=o},4537:t=>{t.exports=function(e,n){for(var i=new Array(arguments.length-1),o=0,u=2,d=!0;u<arguments.length;)i[o++]=arguments[u++];return new Promise((function(h,m){i[o]=function(p){if(d)if(d=!1,p)m(p);else{for(var _=new Array(arguments.length-1),f=0;f<_.length;)_[f++]=arguments[f];h.apply(null,_)}};try{e.apply(n||null,i)}catch(p){d&&(d=!1,m(p))}}))}},7419:(t,e)=>{var n=e;n.length=function(h){var m=h.length;if(!m)return 0;for(var p=0;--m%4>1&&h.charAt(m)==="=";)++p;return Math.ceil(3*h.length)/4-p};for(var i=new Array(64),o=new Array(123),u=0;u<64;)o[i[u]=u<26?u+65:u<52?u+71:u<62?u-4:u-59|43]=u++;n.encode=function(h,m,p){for(var _,f=null,l=[],g=0,v=0;m<p;){var S=h[m++];switch(v){case 0:l[g++]=i[S>>2],_=(3&S)<<4,v=1;break;case 1:l[g++]=i[_|S>>4],_=(15&S)<<2,v=2;break;case 2:l[g++]=i[_|S>>6],l[g++]=i[63&S],v=0}g>8191&&((f||(f=[])).push(String.fromCharCode.apply(String,l)),g=0)}return v&&(l[g++]=i[_],l[g++]=61,v===1&&(l[g++]=61)),f?(g&&f.push(String.fromCharCode.apply(String,l.slice(0,g))),f.join("")):String.fromCharCode.apply(String,l.slice(0,g))};var d="invalid encoding";n.decode=function(h,m,p){for(var _,f=p,l=0,g=0;g<h.length;){var v=h.charCodeAt(g++);if(v===61&&l>1)break;if((v=o[v])===void 0)throw Error(d);switch(l){case 0:_=v,l=1;break;case 1:m[p++]=_<<2|(48&v)>>4,_=v,l=2;break;case 2:m[p++]=(15&_)<<4|(60&v)>>2,_=v,l=3;break;case 3:m[p++]=(3&_)<<6|v,l=0}}if(l===1)throw Error(d);return p-f},n.test=function(h){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(h)}},9211:t=>{function e(){this._listeners={}}t.exports=e,e.prototype.on=function(n,i,o){return(this._listeners[n]||(this._listeners[n]=[])).push({fn:i,ctx:o||this}),this},e.prototype.off=function(n,i){if(n===void 0)this._listeners={};else if(i===void 0)this._listeners[n]=[];else for(var o=this._listeners[n],u=0;u<o.length;)o[u].fn===i?o.splice(u,1):++u;return this},e.prototype.emit=function(n){var i=this._listeners[n];if(i){for(var o=[],u=1;u<arguments.length;)o.push(arguments[u++]);for(u=0;u<i.length;)i[u].fn.apply(i[u++].ctx,o)}return this}},945:t=>{function e(d){return typeof Float32Array<"u"?(function(){var h=new Float32Array([-0]),m=new Uint8Array(h.buffer),p=m[3]===128;function _(v,S,T){h[0]=v,S[T]=m[0],S[T+1]=m[1],S[T+2]=m[2],S[T+3]=m[3]}function f(v,S,T){h[0]=v,S[T]=m[3],S[T+1]=m[2],S[T+2]=m[1],S[T+3]=m[0]}function l(v,S){return m[0]=v[S],m[1]=v[S+1],m[2]=v[S+2],m[3]=v[S+3],h[0]}function g(v,S){return m[3]=v[S],m[2]=v[S+1],m[1]=v[S+2],m[0]=v[S+3],h[0]}d.writeFloatLE=p?_:f,d.writeFloatBE=p?f:_,d.readFloatLE=p?l:g,d.readFloatBE=p?g:l})():(function(){function h(p,_,f,l){var g=_<0?1:0;if(g&&(_=-_),_===0)p(1/_>0?0:2147483648,f,l);else if(isNaN(_))p(2143289344,f,l);else if(_>34028234663852886e22)p((g<<31|2139095040)>>>0,f,l);else if(_<11754943508222875e-54)p((g<<31|Math.round(_/1401298464324817e-60))>>>0,f,l);else{var v=Math.floor(Math.log(_)/Math.LN2);p((g<<31|v+127<<23|8388607&Math.round(_*Math.pow(2,-v)*8388608))>>>0,f,l)}}function m(p,_,f){var l=p(_,f),g=2*(l>>31)+1,v=l>>>23&255,S=8388607&l;return v===255?S?NaN:g*(1/0):v===0?1401298464324817e-60*g*S:g*Math.pow(2,v-150)*(S+8388608)}d.writeFloatLE=h.bind(null,n),d.writeFloatBE=h.bind(null,i),d.readFloatLE=m.bind(null,o),d.readFloatBE=m.bind(null,u)})(),typeof Float64Array<"u"?(function(){var h=new Float64Array([-0]),m=new Uint8Array(h.buffer),p=m[7]===128;function _(v,S,T){h[0]=v,S[T]=m[0],S[T+1]=m[1],S[T+2]=m[2],S[T+3]=m[3],S[T+4]=m[4],S[T+5]=m[5],S[T+6]=m[6],S[T+7]=m[7]}function f(v,S,T){h[0]=v,S[T]=m[7],S[T+1]=m[6],S[T+2]=m[5],S[T+3]=m[4],S[T+4]=m[3],S[T+5]=m[2],S[T+6]=m[1],S[T+7]=m[0]}function l(v,S){return m[0]=v[S],m[1]=v[S+1],m[2]=v[S+2],m[3]=v[S+3],m[4]=v[S+4],m[5]=v[S+5],m[6]=v[S+6],m[7]=v[S+7],h[0]}function g(v,S){return m[7]=v[S],m[6]=v[S+1],m[5]=v[S+2],m[4]=v[S+3],m[3]=v[S+4],m[2]=v[S+5],m[1]=v[S+6],m[0]=v[S+7],h[0]}d.writeDoubleLE=p?_:f,d.writeDoubleBE=p?f:_,d.readDoubleLE=p?l:g,d.readDoubleBE=p?g:l})():(function(){function h(p,_,f,l,g,v){var S=l<0?1:0;if(S&&(l=-l),l===0)p(0,g,v+_),p(1/l>0?0:2147483648,g,v+f);else if(isNaN(l))p(0,g,v+_),p(2146959360,g,v+f);else if(l>17976931348623157e292)p(0,g,v+_),p((S<<31|2146435072)>>>0,g,v+f);else{var T;if(l<22250738585072014e-324)p((T=l/5e-324)>>>0,g,v+_),p((S<<31|T/4294967296)>>>0,g,v+f);else{var E=Math.floor(Math.log(l)/Math.LN2);E===1024&&(E=1023),p(4503599627370496*(T=l*Math.pow(2,-E))>>>0,g,v+_),p((S<<31|E+1023<<20|1048576*T&1048575)>>>0,g,v+f)}}}function m(p,_,f,l,g){var v=p(l,g+_),S=p(l,g+f),T=2*(S>>31)+1,E=S>>>20&2047,O=4294967296*(1048575&S)+v;return E===2047?O?NaN:T*(1/0):E===0?5e-324*T*O:T*Math.pow(2,E-1075)*(O+4503599627370496)}d.writeDoubleLE=h.bind(null,n,0,4),d.writeDoubleBE=h.bind(null,i,4,0),d.readDoubleLE=m.bind(null,o,0,4),d.readDoubleBE=m.bind(null,u,4,0)})(),d}function n(d,h,m){h[m]=255&d,h[m+1]=d>>>8&255,h[m+2]=d>>>16&255,h[m+3]=d>>>24}function i(d,h,m){h[m]=d>>>24,h[m+1]=d>>>16&255,h[m+2]=d>>>8&255,h[m+3]=255&d}function o(d,h){return(d[h]|d[h+1]<<8|d[h+2]<<16|d[h+3]<<24)>>>0}function u(d,h){return(d[h]<<24|d[h+1]<<16|d[h+2]<<8|d[h+3])>>>0}t.exports=e(e)},7199:module=>{function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}module.exports=inquire},6662:t=>{t.exports=function(e,n,i){var o=i||8192,u=o>>>1,d=null,h=o;return function(m){if(m<1||m>u)return e(m);h+m>o&&(d=e(o),h=0);var p=n.call(d,h,h+=m);return 7&h&&(h=1+(7|h)),p}}},4997:(t,e)=>{var n=e;n.length=function(i){for(var o=0,u=0,d=0;d<i.length;++d)(u=i.charCodeAt(d))<128?o+=1:u<2048?o+=2:(64512&u)==55296&&(64512&i.charCodeAt(d+1))==56320?(++d,o+=4):o+=3;return o},n.read=function(i,o,u){if(u-o<1)return"";for(var d,h=null,m=[],p=0;o<u;)(d=i[o++])<128?m[p++]=d:d>191&&d<224?m[p++]=(31&d)<<6|63&i[o++]:d>239&&d<365?(d=((7&d)<<18|(63&i[o++])<<12|(63&i[o++])<<6|63&i[o++])-65536,m[p++]=55296+(d>>10),m[p++]=56320+(1023&d)):m[p++]=(15&d)<<12|(63&i[o++])<<6|63&i[o++],p>8191&&((h||(h=[])).push(String.fromCharCode.apply(String,m)),p=0);return h?(p&&h.push(String.fromCharCode.apply(String,m.slice(0,p))),h.join("")):String.fromCharCode.apply(String,m.slice(0,p))},n.write=function(i,o,u){for(var d,h,m=u,p=0;p<i.length;++p)(d=i.charCodeAt(p))<128?o[u++]=d:d<2048?(o[u++]=d>>6|192,o[u++]=63&d|128):(64512&d)==55296&&(64512&(h=i.charCodeAt(p+1)))==56320?(d=65536+((1023&d)<<10)+(1023&h),++p,o[u++]=d>>18|240,o[u++]=d>>12&63|128,o[u++]=d>>6&63|128,o[u++]=63&d|128):(o[u++]=d>>12|224,o[u++]=d>>6&63|128,o[u++]=63&d|128);return u-m}},3442:(t,e)=>{e.__esModule=!0;var n=(function(){function i(o){if(!o)throw new TypeError("Invalid argument; `value` has no value.");this.value=i.EMPTY,o&&i.isGuid(o)&&(this.value=o)}return i.isGuid=function(o){var u=o.toString();return o&&(o instanceof i||i.validator.test(u))},i.create=function(){return new i([i.gen(2),i.gen(1),i.gen(1),i.gen(1),i.gen(3)].join("-"))},i.createEmpty=function(){return new i("emptyguid")},i.parse=function(o){return new i(o)},i.raw=function(){return[i.gen(2),i.gen(1),i.gen(1),i.gen(1),i.gen(3)].join("-")},i.gen=function(o){for(var u="",d=0;d<o;d++)u+=(65536*(1+Math.random())|0).toString(16).substring(1);return u},i.prototype.equals=function(o){return i.isGuid(o)&&this.value===o.toString()},i.prototype.isEmpty=function(){return this.value===i.EMPTY},i.prototype.toString=function(){return this.value},i.prototype.toJSON=function(){return{value:this.value}},i.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),i.EMPTY="00000000-0000-0000-0000-000000000000",i})();e.Guid=n},3720:t=>{t.exports=n;var e=null;try{e=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function n(N,B,U){this.low=0|N,this.high=0|B,this.unsigned=!!U}function i(N){return(N&&N.__isLong__)===!0}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=i;var o={},u={};function d(N,B){var U,H,Y;return B?(Y=0<=(N>>>=0)&&N<256)&&(H=u[N])?H:(U=m(N,(0|N)<0?-1:0,!0),Y&&(u[N]=U),U):(Y=-128<=(N|=0)&&N<128)&&(H=o[N])?H:(U=m(N,N<0?-1:0,!1),Y&&(o[N]=U),U)}function h(N,B){if(isNaN(N))return B?E:T;if(B){if(N<0)return E;if(N>=g)return j}else{if(N<=-v)return $;if(N+1>=v)return C}return N<0?h(-N,B).neg():m(N%l|0,N/l|0,B)}function m(N,B,U){return new n(N,B,U)}n.fromInt=d,n.fromNumber=h,n.fromBits=m;var p=Math.pow;function _(N,B,U){if(N.length===0)throw Error("empty string");if(N==="NaN"||N==="Infinity"||N==="+Infinity"||N==="-Infinity")return T;if(typeof B=="number"?(U=B,B=!1):B=!!B,(U=U||10)<2||36<U)throw RangeError("radix");var H;if((H=N.indexOf("-"))>0)throw Error("interior hyphen");if(H===0)return _(N.substring(1),B,U).neg();for(var Y=h(p(U,8)),K=T,z=0;z<N.length;z+=8){var V=Math.min(8,N.length-z),G=parseInt(N.substring(z,z+V),U);if(V<8){var ie=h(p(U,V));K=K.mul(ie).add(h(G))}else K=(K=K.mul(Y)).add(h(G))}return K.unsigned=B,K}function f(N,B){return typeof N=="number"?h(N,B):typeof N=="string"?_(N,B):m(N.low,N.high,typeof B=="boolean"?B:N.unsigned)}n.fromString=_,n.fromValue=f;var l=4294967296,g=l*l,v=g/2,S=d(1<<24),T=d(0);n.ZERO=T;var E=d(0,!0);n.UZERO=E;var O=d(1);n.ONE=O;var R=d(1,!0);n.UONE=R;var M=d(-1);n.NEG_ONE=M;var C=m(-1,2147483647,!1);n.MAX_VALUE=C;var j=m(-1,-1,!0);n.MAX_UNSIGNED_VALUE=j;var $=m(0,-2147483648,!1);n.MIN_VALUE=$;var L=n.prototype;L.toInt=function(){return this.unsigned?this.low>>>0:this.low},L.toNumber=function(){return this.unsigned?(this.high>>>0)*l+(this.low>>>0):this.high*l+(this.low>>>0)},L.toString=function(N){if((N=N||10)<2||36<N)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq($)){var B=h(N),U=this.div(B),H=U.mul(B).sub(this);return U.toString(N)+H.toInt().toString(N)}return"-"+this.neg().toString(N)}for(var Y=h(p(N,6),this.unsigned),K=this,z="";;){var V=K.div(Y),G=(K.sub(V.mul(Y)).toInt()>>>0).toString(N);if((K=V).isZero())return G+z;for(;G.length<6;)G="0"+G;z=""+G+z}},L.getHighBits=function(){return this.high},L.getHighBitsUnsigned=function(){return this.high>>>0},L.getLowBits=function(){return this.low},L.getLowBitsUnsigned=function(){return this.low>>>0},L.getNumBitsAbs=function(){if(this.isNegative())return this.eq($)?64:this.neg().getNumBitsAbs();for(var N=this.high!=0?this.high:this.low,B=31;B>0&&(N&1<<B)==0;B--);return this.high!=0?B+33:B+1},L.isZero=function(){return this.high===0&&this.low===0},L.eqz=L.isZero,L.isNegative=function(){return!this.unsigned&&this.high<0},L.isPositive=function(){return this.unsigned||this.high>=0},L.isOdd=function(){return(1&this.low)==1},L.isEven=function(){return(1&this.low)==0},L.equals=function(N){return i(N)||(N=f(N)),(this.unsigned===N.unsigned||this.high>>>31!=1||N.high>>>31!=1)&&this.high===N.high&&this.low===N.low},L.eq=L.equals,L.notEquals=function(N){return!this.eq(N)},L.neq=L.notEquals,L.ne=L.notEquals,L.lessThan=function(N){return this.comp(N)<0},L.lt=L.lessThan,L.lessThanOrEqual=function(N){return this.comp(N)<=0},L.lte=L.lessThanOrEqual,L.le=L.lessThanOrEqual,L.greaterThan=function(N){return this.comp(N)>0},L.gt=L.greaterThan,L.greaterThanOrEqual=function(N){return this.comp(N)>=0},L.gte=L.greaterThanOrEqual,L.ge=L.greaterThanOrEqual,L.compare=function(N){if(i(N)||(N=f(N)),this.eq(N))return 0;var B=this.isNegative(),U=N.isNegative();return B&&!U?-1:!B&&U?1:this.unsigned?N.high>>>0>this.high>>>0||N.high===this.high&&N.low>>>0>this.low>>>0?-1:1:this.sub(N).isNegative()?-1:1},L.comp=L.compare,L.negate=function(){return!this.unsigned&&this.eq($)?$:this.not().add(O)},L.neg=L.negate,L.add=function(N){i(N)||(N=f(N));var B=this.high>>>16,U=65535&this.high,H=this.low>>>16,Y=65535&this.low,K=N.high>>>16,z=65535&N.high,V=N.low>>>16,G=0,ie=0,Z=0,te=0;return Z+=(te+=Y+(65535&N.low))>>>16,ie+=(Z+=H+V)>>>16,G+=(ie+=U+z)>>>16,G+=B+K,m((Z&=65535)<<16|(te&=65535),(G&=65535)<<16|(ie&=65535),this.unsigned)},L.subtract=function(N){return i(N)||(N=f(N)),this.add(N.neg())},L.sub=L.subtract,L.multiply=function(N){if(this.isZero())return T;if(i(N)||(N=f(N)),e)return m(e.mul(this.low,this.high,N.low,N.high),e.get_high(),this.unsigned);if(N.isZero())return T;if(this.eq($))return N.isOdd()?$:T;if(N.eq($))return this.isOdd()?$:T;if(this.isNegative())return N.isNegative()?this.neg().mul(N.neg()):this.neg().mul(N).neg();if(N.isNegative())return this.mul(N.neg()).neg();if(this.lt(S)&&N.lt(S))return h(this.toNumber()*N.toNumber(),this.unsigned);var B=this.high>>>16,U=65535&this.high,H=this.low>>>16,Y=65535&this.low,K=N.high>>>16,z=65535&N.high,V=N.low>>>16,G=65535&N.low,ie=0,Z=0,te=0,ee=0;return te+=(ee+=Y*G)>>>16,Z+=(te+=H*G)>>>16,te&=65535,Z+=(te+=Y*V)>>>16,ie+=(Z+=U*G)>>>16,Z&=65535,ie+=(Z+=H*V)>>>16,Z&=65535,ie+=(Z+=Y*z)>>>16,ie+=B*G+U*V+H*z+Y*K,m((te&=65535)<<16|(ee&=65535),(ie&=65535)<<16|(Z&=65535),this.unsigned)},L.mul=L.multiply,L.divide=function(N){if(i(N)||(N=f(N)),N.isZero())throw Error("division by zero");var B,U,H;if(e)return this.unsigned||this.high!==-2147483648||N.low!==-1||N.high!==-1?m((this.unsigned?e.div_u:e.div_s)(this.low,this.high,N.low,N.high),e.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?E:T;if(this.unsigned){if(N.unsigned||(N=N.toUnsigned()),N.gt(this))return E;if(N.gt(this.shru(1)))return R;H=E}else{if(this.eq($))return N.eq(O)||N.eq(M)?$:N.eq($)?O:(B=this.shr(1).div(N).shl(1)).eq(T)?N.isNegative()?O:M:(U=this.sub(N.mul(B)),H=B.add(U.div(N)));if(N.eq($))return this.unsigned?E:T;if(this.isNegative())return N.isNegative()?this.neg().div(N.neg()):this.neg().div(N).neg();if(N.isNegative())return this.div(N.neg()).neg();H=T}for(U=this;U.gte(N);){B=Math.max(1,Math.floor(U.toNumber()/N.toNumber()));for(var Y=Math.ceil(Math.log(B)/Math.LN2),K=Y<=48?1:p(2,Y-48),z=h(B),V=z.mul(N);V.isNegative()||V.gt(U);)V=(z=h(B-=K,this.unsigned)).mul(N);z.isZero()&&(z=O),H=H.add(z),U=U.sub(V)}return H},L.div=L.divide,L.modulo=function(N){return i(N)||(N=f(N)),e?m((this.unsigned?e.rem_u:e.rem_s)(this.low,this.high,N.low,N.high),e.get_high(),this.unsigned):this.sub(this.div(N).mul(N))},L.mod=L.modulo,L.rem=L.modulo,L.not=function(){return m(~this.low,~this.high,this.unsigned)},L.and=function(N){return i(N)||(N=f(N)),m(this.low&N.low,this.high&N.high,this.unsigned)},L.or=function(N){return i(N)||(N=f(N)),m(this.low|N.low,this.high|N.high,this.unsigned)},L.xor=function(N){return i(N)||(N=f(N)),m(this.low^N.low,this.high^N.high,this.unsigned)},L.shiftLeft=function(N){return i(N)&&(N=N.toInt()),(N&=63)==0?this:N<32?m(this.low<<N,this.high<<N|this.low>>>32-N,this.unsigned):m(0,this.low<<N-32,this.unsigned)},L.shl=L.shiftLeft,L.shiftRight=function(N){return i(N)&&(N=N.toInt()),(N&=63)==0?this:N<32?m(this.low>>>N|this.high<<32-N,this.high>>N,this.unsigned):m(this.high>>N-32,this.high>=0?0:-1,this.unsigned)},L.shr=L.shiftRight,L.shiftRightUnsigned=function(N){if(i(N)&&(N=N.toInt()),(N&=63)==0)return this;var B=this.high;return N<32?m(this.low>>>N|B<<32-N,B>>>N,this.unsigned):m(N===32?B:B>>>N-32,0,this.unsigned)},L.shru=L.shiftRightUnsigned,L.shr_u=L.shiftRightUnsigned,L.toSigned=function(){return this.unsigned?m(this.low,this.high,!1):this},L.toUnsigned=function(){return this.unsigned?this:m(this.low,this.high,!0)},L.toBytes=function(N){return N?this.toBytesLE():this.toBytesBE()},L.toBytesLE=function(){var N=this.high,B=this.low;return[255&B,B>>>8&255,B>>>16&255,B>>>24,255&N,N>>>8&255,N>>>16&255,N>>>24]},L.toBytesBE=function(){var N=this.high,B=this.low;return[N>>>24,N>>>16&255,N>>>8&255,255&N,B>>>24,B>>>16&255,B>>>8&255,255&B]},n.fromBytes=function(N,B,U){return U?n.fromBytesLE(N,B):n.fromBytesBE(N,B)},n.fromBytesLE=function(N,B){return new n(N[0]|N[1]<<8|N[2]<<16|N[3]<<24,N[4]|N[5]<<8|N[6]<<16|N[7]<<24,B)},n.fromBytesBE=function(N,B){return new n(N[4]<<24|N[5]<<16|N[6]<<8|N[7],N[0]<<24|N[1]<<16|N[2]<<8|N[3],B)}},1446:(t,e,n)=>{var i,o,u,d=n(2100),h=d.Reader,m=d.Writer,p=d.util,_=d.roots.default||(d.roots.default={});_.onnx=((u={}).Version=(i={},(o=Object.create(i))[i[0]="_START_VERSION"]=0,o[i[1]="IR_VERSION_2017_10_10"]=1,o[i[2]="IR_VERSION_2017_10_30"]=2,o[i[3]="IR_VERSION_2017_11_3"]=3,o[i[4]="IR_VERSION_2019_1_22"]=4,o[i[5]="IR_VERSION"]=5,o),u.AttributeProto=(function(){function f(l){if(this.floats=[],this.ints=[],this.strings=[],this.tensors=[],this.graphs=[],l)for(var g=Object.keys(l),v=0;v<g.length;++v)l[g[v]]!=null&&(this[g[v]]=l[g[v]])}return f.prototype.name="",f.prototype.refAttrName="",f.prototype.docString="",f.prototype.type=0,f.prototype.f=0,f.prototype.i=p.Long?p.Long.fromBits(0,0,!1):0,f.prototype.s=p.newBuffer([]),f.prototype.t=null,f.prototype.g=null,f.prototype.floats=p.emptyArray,f.prototype.ints=p.emptyArray,f.prototype.strings=p.emptyArray,f.prototype.tensors=p.emptyArray,f.prototype.graphs=p.emptyArray,f.create=function(l){return new f(l)},f.encode=function(l,g){if(g||(g=m.create()),l.name!=null&&l.hasOwnProperty("name")&&g.uint32(10).string(l.name),l.f!=null&&l.hasOwnProperty("f")&&g.uint32(21).float(l.f),l.i!=null&&l.hasOwnProperty("i")&&g.uint32(24).int64(l.i),l.s!=null&&l.hasOwnProperty("s")&&g.uint32(34).bytes(l.s),l.t!=null&&l.hasOwnProperty("t")&&_.onnx.TensorProto.encode(l.t,g.uint32(42).fork()).ldelim(),l.g!=null&&l.hasOwnProperty("g")&&_.onnx.GraphProto.encode(l.g,g.uint32(50).fork()).ldelim(),l.floats!=null&&l.floats.length){g.uint32(58).fork();for(var v=0;v<l.floats.length;++v)g.float(l.floats[v]);g.ldelim()}if(l.ints!=null&&l.ints.length){for(g.uint32(66).fork(),v=0;v<l.ints.length;++v)g.int64(l.ints[v]);g.ldelim()}if(l.strings!=null&&l.strings.length)for(v=0;v<l.strings.length;++v)g.uint32(74).bytes(l.strings[v]);if(l.tensors!=null&&l.tensors.length)for(v=0;v<l.tensors.length;++v)_.onnx.TensorProto.encode(l.tensors[v],g.uint32(82).fork()).ldelim();if(l.graphs!=null&&l.graphs.length)for(v=0;v<l.graphs.length;++v)_.onnx.GraphProto.encode(l.graphs[v],g.uint32(90).fork()).ldelim();return l.docString!=null&&l.hasOwnProperty("docString")&&g.uint32(106).string(l.docString),l.type!=null&&l.hasOwnProperty("type")&&g.uint32(160).int32(l.type),l.refAttrName!=null&&l.hasOwnProperty("refAttrName")&&g.uint32(170).string(l.refAttrName),g},f.encodeDelimited=function(l,g){return this.encode(l,g).ldelim()},f.decode=function(l,g){l instanceof h||(l=h.create(l));for(var v=g===void 0?l.len:l.pos+g,S=new _.onnx.AttributeProto;l.pos<v;){var T=l.uint32();switch(T>>>3){case 1:S.name=l.string();break;case 21:S.refAttrName=l.string();break;case 13:S.docString=l.string();break;case 20:S.type=l.int32();break;case 2:S.f=l.float();break;case 3:S.i=l.int64();break;case 4:S.s=l.bytes();break;case 5:S.t=_.onnx.TensorProto.decode(l,l.uint32());break;case 6:S.g=_.onnx.GraphProto.decode(l,l.uint32());break;case 7:if(S.floats&&S.floats.length||(S.floats=[]),(7&T)==2)for(var E=l.uint32()+l.pos;l.pos<E;)S.floats.push(l.float());else S.floats.push(l.float());break;case 8:if(S.ints&&S.ints.length||(S.ints=[]),(7&T)==2)for(E=l.uint32()+l.pos;l.pos<E;)S.ints.push(l.int64());else S.ints.push(l.int64());break;case 9:S.strings&&S.strings.length||(S.strings=[]),S.strings.push(l.bytes());break;case 10:S.tensors&&S.tensors.length||(S.tensors=[]),S.tensors.push(_.onnx.TensorProto.decode(l,l.uint32()));break;case 11:S.graphs&&S.graphs.length||(S.graphs=[]),S.graphs.push(_.onnx.GraphProto.decode(l,l.uint32()));break;default:l.skipType(7&T)}}return S},f.decodeDelimited=function(l){return l instanceof h||(l=new h(l)),this.decode(l,l.uint32())},f.verify=function(l){if(typeof l!="object"||l===null)return"object expected";if(l.name!=null&&l.hasOwnProperty("name")&&!p.isString(l.name))return"name: string expected";if(l.refAttrName!=null&&l.hasOwnProperty("refAttrName")&&!p.isString(l.refAttrName))return"refAttrName: string expected";if(l.docString!=null&&l.hasOwnProperty("docString")&&!p.isString(l.docString))return"docString: string expected";if(l.type!=null&&l.hasOwnProperty("type"))switch(l.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:}if(l.f!=null&&l.hasOwnProperty("f")&&typeof l.f!="number")return"f: number expected";if(l.i!=null&&l.hasOwnProperty("i")&&!(p.isInteger(l.i)||l.i&&p.isInteger(l.i.low)&&p.isInteger(l.i.high)))return"i: integer|Long expected";if(l.s!=null&&l.hasOwnProperty("s")&&!(l.s&&typeof l.s.length=="number"||p.isString(l.s)))return"s: buffer expected";if(l.t!=null&&l.hasOwnProperty("t")&&(v=_.onnx.TensorProto.verify(l.t)))return"t."+v;if(l.g!=null&&l.hasOwnProperty("g")&&(v=_.onnx.GraphProto.verify(l.g)))return"g."+v;if(l.floats!=null&&l.hasOwnProperty("floats")){if(!Array.isArray(l.floats))return"floats: array expected";for(var g=0;g<l.floats.length;++g)if(typeof l.floats[g]!="number")return"floats: number[] expected"}if(l.ints!=null&&l.hasOwnProperty("ints")){if(!Array.isArray(l.ints))return"ints: array expected";for(g=0;g<l.ints.length;++g)if(!(p.isInteger(l.ints[g])||l.ints[g]&&p.isInteger(l.ints[g].low)&&p.isInteger(l.ints[g].high)))return"ints: integer|Long[] expected"}if(l.strings!=null&&l.hasOwnProperty("strings")){if(!Array.isArray(l.strings))return"strings: array expected";for(g=0;g<l.strings.length;++g)if(!(l.strings[g]&&typeof l.strings[g].length=="number"||p.isString(l.strings[g])))return"strings: buffer[] expected"}if(l.tensors!=null&&l.hasOwnProperty("tensors")){if(!Array.isArray(l.tensors))return"tensors: array expected";for(g=0;g<l.tensors.length;++g)if(v=_.onnx.TensorProto.verify(l.tensors[g]))return"tensors."+v}if(l.graphs!=null&&l.hasOwnProperty("graphs")){if(!Array.isArray(l.graphs))return"graphs: array expected";for(g=0;g<l.graphs.length;++g){var v;if(v=_.onnx.GraphProto.verify(l.graphs[g]))return"graphs."+v}}return null},f.fromObject=function(l){if(l instanceof _.onnx.AttributeProto)return l;var g=new _.onnx.AttributeProto;switch(l.name!=null&&(g.name=String(l.name)),l.refAttrName!=null&&(g.refAttrName=String(l.refAttrName)),l.docString!=null&&(g.docString=String(l.docString)),l.type){case"UNDEFINED":case 0:g.type=0;break;case"FLOAT":case 1:g.type=1;break;case"INT":case 2:g.type=2;break;case"STRING":case 3:g.type=3;break;case"TENSOR":case 4:g.type=4;break;case"GRAPH":case 5:g.type=5;break;case"FLOATS":case 6:g.type=6;break;case"INTS":case 7:g.type=7;break;case"STRINGS":case 8:g.type=8;break;case"TENSORS":case 9:g.type=9;break;case"GRAPHS":case 10:g.type=10}if(l.f!=null&&(g.f=Number(l.f)),l.i!=null&&(p.Long?(g.i=p.Long.fromValue(l.i)).unsigned=!1:typeof l.i=="string"?g.i=parseInt(l.i,10):typeof l.i=="number"?g.i=l.i:typeof l.i=="object"&&(g.i=new p.LongBits(l.i.low>>>0,l.i.high>>>0).toNumber())),l.s!=null&&(typeof l.s=="string"?p.base64.decode(l.s,g.s=p.newBuffer(p.base64.length(l.s)),0):l.s.length&&(g.s=l.s)),l.t!=null){if(typeof l.t!="object")throw TypeError(".onnx.AttributeProto.t: object expected");g.t=_.onnx.TensorProto.fromObject(l.t)}if(l.g!=null){if(typeof l.g!="object")throw TypeError(".onnx.AttributeProto.g: object expected");g.g=_.onnx.GraphProto.fromObject(l.g)}if(l.floats){if(!Array.isArray(l.floats))throw TypeError(".onnx.AttributeProto.floats: array expected");g.floats=[];for(var v=0;v<l.floats.length;++v)g.floats[v]=Number(l.floats[v])}if(l.ints){if(!Array.isArray(l.ints))throw TypeError(".onnx.AttributeProto.ints: array expected");for(g.ints=[],v=0;v<l.ints.length;++v)p.Long?(g.ints[v]=p.Long.fromValue(l.ints[v])).unsigned=!1:typeof l.ints[v]=="string"?g.ints[v]=parseInt(l.ints[v],10):typeof l.ints[v]=="number"?g.ints[v]=l.ints[v]:typeof l.ints[v]=="object"&&(g.ints[v]=new p.LongBits(l.ints[v].low>>>0,l.ints[v].high>>>0).toNumber())}if(l.strings){if(!Array.isArray(l.strings))throw TypeError(".onnx.AttributeProto.strings: array expected");for(g.strings=[],v=0;v<l.strings.length;++v)typeof l.strings[v]=="string"?p.base64.decode(l.strings[v],g.strings[v]=p.newBuffer(p.base64.length(l.strings[v])),0):l.strings[v].length&&(g.strings[v]=l.strings[v])}if(l.tensors){if(!Array.isArray(l.tensors))throw TypeError(".onnx.AttributeProto.tensors: array expected");for(g.tensors=[],v=0;v<l.tensors.length;++v){if(typeof l.tensors[v]!="object")throw TypeError(".onnx.AttributeProto.tensors: object expected");g.tensors[v]=_.onnx.TensorProto.fromObject(l.tensors[v])}}if(l.graphs){if(!Array.isArray(l.graphs))throw TypeError(".onnx.AttributeProto.graphs: array expected");for(g.graphs=[],v=0;v<l.graphs.length;++v){if(typeof l.graphs[v]!="object")throw TypeError(".onnx.AttributeProto.graphs: object expected");g.graphs[v]=_.onnx.GraphProto.fromObject(l.graphs[v])}}return g},f.toObject=function(l,g){g||(g={});var v={};if((g.arrays||g.defaults)&&(v.floats=[],v.ints=[],v.strings=[],v.tensors=[],v.graphs=[]),g.defaults){if(v.name="",v.f=0,p.Long){var S=new p.Long(0,0,!1);v.i=g.longs===String?S.toString():g.longs===Number?S.toNumber():S}else v.i=g.longs===String?"0":0;g.bytes===String?v.s="":(v.s=[],g.bytes!==Array&&(v.s=p.newBuffer(v.s))),v.t=null,v.g=null,v.docString="",v.type=g.enums===String?"UNDEFINED":0,v.refAttrName=""}if(l.name!=null&&l.hasOwnProperty("name")&&(v.name=l.name),l.f!=null&&l.hasOwnProperty("f")&&(v.f=g.json&&!isFinite(l.f)?String(l.f):l.f),l.i!=null&&l.hasOwnProperty("i")&&(typeof l.i=="number"?v.i=g.longs===String?String(l.i):l.i:v.i=g.longs===String?p.Long.prototype.toString.call(l.i):g.longs===Number?new p.LongBits(l.i.low>>>0,l.i.high>>>0).toNumber():l.i),l.s!=null&&l.hasOwnProperty("s")&&(v.s=g.bytes===String?p.base64.encode(l.s,0,l.s.length):g.bytes===Array?Array.prototype.slice.call(l.s):l.s),l.t!=null&&l.hasOwnProperty("t")&&(v.t=_.onnx.TensorProto.toObject(l.t,g)),l.g!=null&&l.hasOwnProperty("g")&&(v.g=_.onnx.GraphProto.toObject(l.g,g)),l.floats&&l.floats.length){v.floats=[];for(var T=0;T<l.floats.length;++T)v.floats[T]=g.json&&!isFinite(l.floats[T])?String(l.floats[T]):l.floats[T]}if(l.ints&&l.ints.length)for(v.ints=[],T=0;T<l.ints.length;++T)typeof l.ints[T]=="number"?v.ints[T]=g.longs===String?String(l.ints[T]):l.ints[T]:v.ints[T]=g.longs===String?p.Long.prototype.toString.call(l.ints[T]):g.longs===Number?new p.LongBits(l.ints[T].low>>>0,l.ints[T].high>>>0).toNumber():l.ints[T];if(l.strings&&l.strings.length)for(v.strings=[],T=0;T<l.strings.length;++T)v.strings[T]=g.bytes===String?p.base64.encode(l.strings[T],0,l.strings[T].length):g.bytes===Array?Array.prototype.slice.call(l.strings[T]):l.strings[T];if(l.tensors&&l.tensors.length)for(v.tensors=[],T=0;T<l.tensors.length;++T)v.tensors[T]=_.onnx.TensorProto.toObject(l.tensors[T],g);if(l.graphs&&l.graphs.length)for(v.graphs=[],T=0;T<l.graphs.length;++T)v.graphs[T]=_.onnx.GraphProto.toObject(l.graphs[T],g);return l.docString!=null&&l.hasOwnProperty("docString")&&(v.docString=l.docString),l.type!=null&&l.hasOwnProperty("type")&&(v.type=g.enums===String?_.onnx.AttributeProto.AttributeType[l.type]:l.type),l.refAttrName!=null&&l.hasOwnProperty("refAttrName")&&(v.refAttrName=l.refAttrName),v},f.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},f.AttributeType=(function(){var l={},g=Object.create(l);return g[l[0]="UNDEFINED"]=0,g[l[1]="FLOAT"]=1,g[l[2]="INT"]=2,g[l[3]="STRING"]=3,g[l[4]="TENSOR"]=4,g[l[5]="GRAPH"]=5,g[l[6]="FLOATS"]=6,g[l[7]="INTS"]=7,g[l[8]="STRINGS"]=8,g[l[9]="TENSORS"]=9,g[l[10]="GRAPHS"]=10,g})(),f})(),u.ValueInfoProto=(function(){function f(l){if(l)for(var g=Object.keys(l),v=0;v<g.length;++v)l[g[v]]!=null&&(this[g[v]]=l[g[v]])}return f.prototype.name="",f.prototype.type=null,f.prototype.docString="",f.create=function(l){return new f(l)},f.encode=function(l,g){return g||(g=m.create()),l.name!=null&&l.hasOwnProperty("name")&&g.uint32(10).string(l.name),l.type!=null&&l.hasOwnProperty("type")&&_.onnx.TypeProto.encode(l.type,g.uint32(18).fork()).ldelim(),l.docString!=null&&l.hasOwnProperty("docString")&&g.uint32(26).string(l.docString),g},f.encodeDelimited=function(l,g){return this.encode(l,g).ldelim()},f.decode=function(l,g){l instanceof h||(l=h.create(l));for(var v=g===void 0?l.len:l.pos+g,S=new _.onnx.ValueInfoProto;l.pos<v;){var T=l.uint32();switch(T>>>3){case 1:S.name=l.string();break;case 2:S.type=_.onnx.TypeProto.decode(l,l.uint32());break;case 3:S.docString=l.string();break;default:l.skipType(7&T)}}return S},f.decodeDelimited=function(l){return l instanceof h||(l=new h(l)),this.decode(l,l.uint32())},f.verify=function(l){if(typeof l!="object"||l===null)return"object expected";if(l.name!=null&&l.hasOwnProperty("name")&&!p.isString(l.name))return"name: string expected";if(l.type!=null&&l.hasOwnProperty("type")){var g=_.onnx.TypeProto.verify(l.type);if(g)return"type."+g}return l.docString!=null&&l.hasOwnProperty("docString")&&!p.isString(l.docString)?"docString: string expected":null},f.fromObject=function(l){if(l instanceof _.onnx.ValueInfoProto)return l;var g=new _.onnx.ValueInfoProto;if(l.name!=null&&(g.name=String(l.name)),l.type!=null){if(typeof l.type!="object")throw TypeError(".onnx.ValueInfoProto.type: object expected");g.type=_.onnx.TypeProto.fromObject(l.type)}return l.docString!=null&&(g.docString=String(l.docString)),g},f.toObject=function(l,g){g||(g={});var v={};return g.defaults&&(v.name="",v.type=null,v.docString=""),l.name!=null&&l.hasOwnProperty("name")&&(v.name=l.name),l.type!=null&&l.hasOwnProperty("type")&&(v.type=_.onnx.TypeProto.toObject(l.type,g)),l.docString!=null&&l.hasOwnProperty("docString")&&(v.docString=l.docString),v},f.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},f})(),u.NodeProto=(function(){function f(l){if(this.input=[],this.output=[],this.attribute=[],l)for(var g=Object.keys(l),v=0;v<g.length;++v)l[g[v]]!=null&&(this[g[v]]=l[g[v]])}return f.prototype.input=p.emptyArray,f.prototype.output=p.emptyArray,f.prototype.name="",f.prototype.opType="",f.prototype.domain="",f.prototype.attribute=p.emptyArray,f.prototype.docString="",f.create=function(l){return new f(l)},f.encode=function(l,g){if(g||(g=m.create()),l.input!=null&&l.input.length)for(var v=0;v<l.input.length;++v)g.uint32(10).string(l.input[v]);if(l.output!=null&&l.output.length)for(v=0;v<l.output.length;++v)g.uint32(18).string(l.output[v]);if(l.name!=null&&l.hasOwnProperty("name")&&g.uint32(26).string(l.name),l.opType!=null&&l.hasOwnProperty("opType")&&g.uint32(34).string(l.opType),l.attribute!=null&&l.attribute.length)for(v=0;v<l.attribute.length;++v)_.onnx.AttributeProto.encode(l.attribute[v],g.uint32(42).fork()).ldelim();return l.docString!=null&&l.hasOwnProperty("docString")&&g.uint32(50).string(l.docString),l.domain!=null&&l.hasOwnProperty("domain")&&g.uint32(58).string(l.domain),g},f.encodeDelimited=function(l,g){return this.encode(l,g).ldelim()},f.decode=function(l,g){l instanceof h||(l=h.create(l));for(var v=g===void 0?l.len:l.pos+g,S=new _.onnx.NodeProto;l.pos<v;){var T=l.uint32();switch(T>>>3){case 1:S.input&&S.input.length||(S.input=[]),S.input.push(l.string());break;case 2:S.output&&S.output.length||(S.output=[]),S.output.push(l.string());break;case 3:S.name=l.string();break;case 4:S.opType=l.string();break;case 7:S.domain=l.string();break;case 5:S.attribute&&S.attribute.length||(S.attribute=[]),S.attribute.push(_.onnx.AttributeProto.decode(l,l.uint32()));break;case 6:S.docString=l.string();break;default:l.skipType(7&T)}}return S},f.decodeDelimited=function(l){return l instanceof h||(l=new h(l)),this.decode(l,l.uint32())},f.verify=function(l){if(typeof l!="object"||l===null)return"object expected";if(l.input!=null&&l.hasOwnProperty("input")){if(!Array.isArray(l.input))return"input: array expected";for(var g=0;g<l.input.length;++g)if(!p.isString(l.input[g]))return"input: string[] expected"}if(l.output!=null&&l.hasOwnProperty("output")){if(!Array.isArray(l.output))return"output: array expected";for(g=0;g<l.output.length;++g)if(!p.isString(l.output[g]))return"output: string[] expected"}if(l.name!=null&&l.hasOwnProperty("name")&&!p.isString(l.name))return"name: string expected";if(l.opType!=null&&l.hasOwnProperty("opType")&&!p.isString(l.opType))return"opType: string expected";if(l.domain!=null&&l.hasOwnProperty("domain")&&!p.isString(l.domain))return"domain: string expected";if(l.attribute!=null&&l.hasOwnProperty("attribute")){if(!Array.isArray(l.attribute))return"attribute: array expected";for(g=0;g<l.attribute.length;++g){var v=_.onnx.AttributeProto.verify(l.attribute[g]);if(v)return"attribute."+v}}return l.docString!=null&&l.hasOwnProperty("docString")&&!p.isString(l.docString)?"docString: string expected":null},f.fromObject=function(l){if(l instanceof _.onnx.NodeProto)return l;var g=new _.onnx.NodeProto;if(l.input){if(!Array.isArray(l.input))throw TypeError(".onnx.NodeProto.input: array expected");g.input=[];for(var v=0;v<l.input.length;++v)g.input[v]=String(l.input[v])}if(l.output){if(!Array.isArray(l.output))throw TypeError(".onnx.NodeProto.output: array expected");for(g.output=[],v=0;v<l.output.length;++v)g.output[v]=String(l.output[v])}if(l.name!=null&&(g.name=String(l.name)),l.opType!=null&&(g.opType=String(l.opType)),l.domain!=null&&(g.domain=String(l.domain)),l.attribute){if(!Array.isArray(l.attribute))throw TypeError(".onnx.NodeProto.attribute: array expected");for(g.attribute=[],v=0;v<l.attribute.length;++v){if(typeof l.attribute[v]!="object")throw TypeError(".onnx.NodeProto.attribute: object expected");g.attribute[v]=_.onnx.AttributeProto.fromObject(l.attribute[v])}}return l.docString!=null&&(g.docString=String(l.docString)),g},f.toObject=function(l,g){g||(g={});var v={};if((g.arrays||g.defaults)&&(v.input=[],v.output=[],v.attribute=[]),g.defaults&&(v.name="",v.opType="",v.docString="",v.domain=""),l.input&&l.input.length){v.input=[];for(var S=0;S<l.input.length;++S)v.input[S]=l.input[S]}if(l.output&&l.output.length)for(v.output=[],S=0;S<l.output.length;++S)v.output[S]=l.output[S];if(l.name!=null&&l.hasOwnProperty("name")&&(v.name=l.name),l.opType!=null&&l.hasOwnProperty("opType")&&(v.opType=l.opType),l.attribute&&l.attribute.length)for(v.attribute=[],S=0;S<l.attribute.length;++S)v.attribute[S]=_.onnx.AttributeProto.toObject(l.attribute[S],g);return l.docString!=null&&l.hasOwnProperty("docString")&&(v.docString=l.docString),l.domain!=null&&l.hasOwnProperty("domain")&&(v.domain=l.domain),v},f.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},f})(),u.ModelProto=(function(){function f(l){if(this.opsetImport=[],this.metadataProps=[],l)for(var g=Object.keys(l),v=0;v<g.length;++v)l[g[v]]!=null&&(this[g[v]]=l[g[v]])}return f.prototype.irVersion=p.Long?p.Long.fromBits(0,0,!1):0,f.prototype.opsetImport=p.emptyArray,f.prototype.producerName="",f.prototype.producerVersion="",f.prototype.domain="",f.prototype.modelVersion=p.Long?p.Long.fromBits(0,0,!1):0,f.prototype.docString="",f.prototype.graph=null,f.prototype.metadataProps=p.emptyArray,f.create=function(l){return new f(l)},f.encode=function(l,g){if(g||(g=m.create()),l.irVersion!=null&&l.hasOwnProperty("irVersion")&&g.uint32(8).int64(l.irVersion),l.producerName!=null&&l.hasOwnProperty("producerName")&&g.uint32(18).string(l.producerName),l.producerVersion!=null&&l.hasOwnProperty("producerVersion")&&g.uint32(26).string(l.producerVersion),l.domain!=null&&l.hasOwnProperty("domain")&&g.uint32(34).string(l.domain),l.modelVersion!=null&&l.hasOwnProperty("modelVersion")&&g.uint32(40).int64(l.modelVersion),l.docString!=null&&l.hasOwnProperty("docString")&&g.uint32(50).string(l.docString),l.graph!=null&&l.hasOwnProperty("graph")&&_.onnx.GraphProto.encode(l.graph,g.uint32(58).fork()).ldelim(),l.opsetImport!=null&&l.opsetImport.length)for(var v=0;v<l.opsetImport.length;++v)_.onnx.OperatorSetIdProto.encode(l.opsetImport[v],g.uint32(66).fork()).ldelim();if(l.metadataProps!=null&&l.metadataProps.length)for(v=0;v<l.metadataProps.length;++v)_.onnx.StringStringEntryProto.encode(l.metadataProps[v],g.uint32(114).fork()).ldelim();return g},f.encodeDelimited=function(l,g){return this.encode(l,g).ldelim()},f.decode=function(l,g){l instanceof h||(l=h.create(l));for(var v=g===void 0?l.len:l.pos+g,S=new _.onnx.ModelProto;l.pos<v;){var T=l.uint32();switch(T>>>3){case 1:S.irVersion=l.int64();break;case 8:S.opsetImport&&S.opsetImport.length||(S.opsetImport=[]),S.opsetImport.push(_.onnx.OperatorSetIdProto.decode(l,l.uint32()));break;case 2:S.producerName=l.string();break;case 3:S.producerVersion=l.string();break;case 4:S.domain=l.string();break;case 5:S.modelVersion=l.int64();break;case 6:S.docString=l.string();break;case 7:S.graph=_.onnx.GraphProto.decode(l,l.uint32());break;case 14:S.metadataProps&&S.metadataProps.length||(S.metadataProps=[]),S.metadataProps.push(_.onnx.StringStringEntryProto.decode(l,l.uint32()));break;default:l.skipType(7&T)}}return S},f.decodeDelimited=function(l){return l instanceof h||(l=new h(l)),this.decode(l,l.uint32())},f.verify=function(l){if(typeof l!="object"||l===null)return"object expected";if(l.irVersion!=null&&l.hasOwnProperty("irVersion")&&!(p.isInteger(l.irVersion)||l.irVersion&&p.isInteger(l.irVersion.low)&&p.isInteger(l.irVersion.high)))return"irVersion: integer|Long expected";if(l.opsetImport!=null&&l.hasOwnProperty("opsetImport")){if(!Array.isArray(l.opsetImport))return"opsetImport: array expected";for(var g=0;g<l.opsetImport.length;++g)if(v=_.onnx.OperatorSetIdProto.verify(l.opsetImport[g]))return"opsetImport."+v}if(l.producerName!=null&&l.hasOwnProperty("producerName")&&!p.isString(l.producerName))return"producerName: string expected";if(l.producerVersion!=null&&l.hasOwnProperty("producerVersion")&&!p.isString(l.producerVersion))return"producerVersion: string expected";if(l.domain!=null&&l.hasOwnProperty("domain")&&!p.isString(l.domain))return"domain: string expected";if(l.modelVersion!=null&&l.hasOwnProperty("modelVersion")&&!(p.isInteger(l.modelVersion)||l.modelVersion&&p.isInteger(l.modelVersion.low)&&p.isInteger(l.modelVersion.high)))return"modelVersion: integer|Long expected";if(l.docString!=null&&l.hasOwnProperty("docString")&&!p.isString(l.docString))return"docString: string expected";if(l.graph!=null&&l.hasOwnProperty("graph")&&(v=_.onnx.GraphProto.verify(l.graph)))return"graph."+v;if(l.metadataProps!=null&&l.hasOwnProperty("metadataProps")){if(!Array.isArray(l.metadataProps))return"metadataProps: array expected";for(g=0;g<l.metadataProps.length;++g){var v;if(v=_.onnx.StringStringEntryProto.verify(l.metadataProps[g]))return"metadataProps."+v}}return null},f.fromObject=function(l){if(l instanceof _.onnx.ModelProto)return l;var g=new _.onnx.ModelProto;if(l.irVersion!=null&&(p.Long?(g.irVersion=p.Long.fromValue(l.irVersion)).unsigned=!1:typeof l.irVersion=="string"?g.irVersion=parseInt(l.irVersion,10):typeof l.irVersion=="number"?g.irVersion=l.irVersion:typeof l.irVersion=="object"&&(g.irVersion=new p.LongBits(l.irVersion.low>>>0,l.irVersion.high>>>0).toNumber())),l.opsetImport){if(!Array.isArray(l.opsetImport))throw TypeError(".onnx.ModelProto.opsetImport: array expected");g.opsetImport=[];for(var v=0;v<l.opsetImport.length;++v){if(typeof l.opsetImport[v]!="object")throw TypeError(".onnx.ModelProto.opsetImport: object expected");g.opsetImport[v]=_.onnx.OperatorSetIdProto.fromObject(l.opsetImport[v])}}if(l.producerName!=null&&(g.producerName=String(l.producerName)),l.producerVersion!=null&&(g.producerVersion=String(l.producerVersion)),l.domain!=null&&(g.domain=String(l.domain)),l.modelVersion!=null&&(p.Long?(g.modelVersion=p.Long.fromValue(l.modelVersion)).unsigned=!1:typeof l.modelVersion=="string"?g.modelVersion=parseInt(l.modelVersion,10):typeof l.modelVersion=="number"?g.modelVersion=l.modelVersion:typeof l.modelVersion=="object"&&(g.modelVersion=new p.LongBits(l.modelVersion.low>>>0,l.modelVersion.high>>>0).toNumber())),l.docString!=null&&(g.docString=String(l.docString)),l.graph!=null){if(typeof l.graph!="object")throw TypeError(".onnx.ModelProto.graph: object expected");g.graph=_.onnx.GraphProto.fromObject(l.graph)}if(l.metadataProps){if(!Array.isArray(l.metadataProps))throw TypeError(".onnx.ModelProto.metadataProps: array expected");for(g.metadataProps=[],v=0;v<l.metadataProps.length;++v){if(typeof l.metadataProps[v]!="object")throw TypeError(".onnx.ModelProto.metadataProps: object expected");g.metadataProps[v]=_.onnx.StringStringEntryProto.fromObject(l.metadataProps[v])}}return g},f.toObject=function(l,g){g||(g={});var v={};if((g.arrays||g.defaults)&&(v.opsetImport=[],v.metadataProps=[]),g.defaults){if(p.Long){var S=new p.Long(0,0,!1);v.irVersion=g.longs===String?S.toString():g.longs===Number?S.toNumber():S}else v.irVersion=g.longs===String?"0":0;v.producerName="",v.producerVersion="",v.domain="",p.Long?(S=new p.Long(0,0,!1),v.modelVersion=g.longs===String?S.toString():g.longs===Number?S.toNumber():S):v.modelVersion=g.longs===String?"0":0,v.docString="",v.graph=null}if(l.irVersion!=null&&l.hasOwnProperty("irVersion")&&(typeof l.irVersion=="number"?v.irVersion=g.longs===String?String(l.irVersion):l.irVersion:v.irVersion=g.longs===String?p.Long.prototype.toString.call(l.irVersion):g.longs===Number?new p.LongBits(l.irVersion.low>>>0,l.irVersion.high>>>0).toNumber():l.irVersion),l.producerName!=null&&l.hasOwnProperty("producerName")&&(v.producerName=l.producerName),l.producerVersion!=null&&l.hasOwnProperty("producerVersion")&&(v.producerVersion=l.producerVersion),l.domain!=null&&l.hasOwnProperty("domain")&&(v.domain=l.domain),l.modelVersion!=null&&l.hasOwnProperty("modelVersion")&&(typeof l.modelVersion=="number"?v.modelVersion=g.longs===String?String(l.modelVersion):l.modelVersion:v.modelVersion=g.longs===String?p.Long.prototype.toString.call(l.modelVersion):g.longs===Number?new p.LongBits(l.modelVersion.low>>>0,l.modelVersion.high>>>0).toNumber():l.modelVersion),l.docString!=null&&l.hasOwnProperty("docString")&&(v.docString=l.docString),l.graph!=null&&l.hasOwnProperty("graph")&&(v.graph=_.onnx.GraphProto.toObject(l.graph,g)),l.opsetImport&&l.opsetImport.length){v.opsetImport=[];for(var T=0;T<l.opsetImport.length;++T)v.opsetImport[T]=_.onnx.OperatorSetIdProto.toObject(l.opsetImport[T],g)}if(l.metadataProps&&l.metadataProps.length)for(v.metadataProps=[],T=0;T<l.metadataProps.length;++T)v.metadataProps[T]=_.onnx.StringStringEntryProto.toObject(l.metadataProps[T],g);return v},f.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},f})(),u.StringStringEntryProto=(function(){function f(l){if(l)for(var g=Object.keys(l),v=0;v<g.length;++v)l[g[v]]!=null&&(this[g[v]]=l[g[v]])}return f.prototype.key="",f.prototype.value="",f.create=function(l){return new f(l)},f.encode=function(l,g){return g||(g=m.create()),l.key!=null&&l.hasOwnProperty("key")&&g.uint32(10).string(l.key),l.value!=null&&l.hasOwnProperty("value")&&g.uint32(18).string(l.value),g},f.encodeDelimited=function(l,g){return this.encode(l,g).ldelim()},f.decode=function(l,g){l instanceof h||(l=h.create(l));for(var v=g===void 0?l.len:l.pos+g,S=new _.onnx.StringStringEntryProto;l.pos<v;){var T=l.uint32();switch(T>>>3){case 1:S.key=l.string();break;case 2:S.value=l.string();break;default:l.skipType(7&T)}}return S},f.decodeDelimited=function(l){return l instanceof h||(l=new h(l)),this.decode(l,l.uint32())},f.verify=function(l){return typeof l!="object"||l===null?"object expected":l.key!=null&&l.hasOwnProperty("key")&&!p.isString(l.key)?"key: string expected":l.value!=null&&l.hasOwnProperty("value")&&!p.isString(l.value)?"value: string expected":null},f.fromObject=function(l){if(l instanceof _.onnx.StringStringEntryProto)return l;var g=new _.onnx.StringStringEntryProto;return l.key!=null&&(g.key=String(l.key)),l.value!=null&&(g.value=String(l.value)),g},f.toObject=function(l,g){g||(g={});var v={};return g.defaults&&(v.key="",v.value=""),l.key!=null&&l.hasOwnProperty("key")&&(v.key=l.key),l.value!=null&&l.hasOwnProperty("value")&&(v.value=l.value),v},f.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},f})(),u.TensorAnnotation=(function(){function f(l){if(this.quantParameterTensorNames=[],l)for(var g=Object.keys(l),v=0;v<g.length;++v)l[g[v]]!=null&&(this[g[v]]=l[g[v]])}return f.prototype.tensorName="",f.prototype.quantParameterTensorNames=p.emptyArray,f.create=function(l){return new f(l)},f.encode=function(l,g){if(g||(g=m.create()),l.tensorName!=null&&l.hasOwnProperty("tensorName")&&g.uint32(10).string(l.tensorName),l.quantParameterTensorNames!=null&&l.quantParameterTensorNames.length)for(var v=0;v<l.quantParameterTensorNames.length;++v)_.onnx.StringStringEntryProto.encode(l.quantParameterTensorNames[v],g.uint32(18).fork()).ldelim();return g},f.encodeDelimited=function(l,g){return this.encode(l,g).ldelim()},f.decode=function(l,g){l instanceof h||(l=h.create(l));for(var v=g===void 0?l.len:l.pos+g,S=new _.onnx.TensorAnnotation;l.pos<v;){var T=l.uint32();switch(T>>>3){case 1:S.tensorName=l.string();break;case 2:S.quantParameterTensorNames&&S.quantParameterTensorNames.length||(S.quantParameterTensorNames=[]),S.quantParameterTensorNames.push(_.onnx.StringStringEntryProto.decode(l,l.uint32()));break;default:l.skipType(7&T)}}return S},f.decodeDelimited=function(l){return l instanceof h||(l=new h(l)),this.decode(l,l.uint32())},f.verify=function(l){if(typeof l!="object"||l===null)return"object expected";if(l.tensorName!=null&&l.hasOwnProperty("tensorName")&&!p.isString(l.tensorName))return"tensorName: string expected";if(l.quantParameterTensorNames!=null&&l.hasOwnProperty("quantParameterTensorNames")){if(!Array.isArray(l.quantParameterTensorNames))return"quantParameterTensorNames: array expected";for(var g=0;g<l.quantParameterTensorNames.length;++g){var v=_.onnx.StringStringEntryProto.verify(l.quantParameterTensorNames[g]);if(v)return"quantParameterTensorNames."+v}}return null},f.fromObject=function(l){if(l instanceof _.onnx.TensorAnnotation)return l;var g=new _.onnx.TensorAnnotation;if(l.tensorName!=null&&(g.tensorName=String(l.tensorName)),l.quantParameterTensorNames){if(!Array.isArray(l.quantParameterTensorNames))throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: array expected");g.quantParameterTensorNames=[];for(var v=0;v<l.quantParameterTensorNames.length;++v){if(typeof l.quantParameterTensorNames[v]!="object")throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: object expected");g.quantParameterTensorNames[v]=_.onnx.StringStringEntryProto.fromObject(l.quantParameterTensorNames[v])}}return g},f.toObject=function(l,g){g||(g={});var v={};if((g.arrays||g.defaults)&&(v.quantParameterTensorNames=[]),g.defaults&&(v.tensorName=""),l.tensorName!=null&&l.hasOwnProperty("tensorName")&&(v.tensorName=l.tensorName),l.quantParameterTensorNames&&l.quantParameterTensorNames.length){v.quantParameterTensorNames=[];for(var S=0;S<l.quantParameterTensorNames.length;++S)v.quantParameterTensorNames[S]=_.onnx.StringStringEntryProto.toObject(l.quantParameterTensorNames[S],g)}return v},f.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},f})(),u.GraphProto=(function(){function f(l){if(this.node=[],this.initializer=[],this.input=[],this.output=[],this.valueInfo=[],this.quantizationAnnotation=[],l)for(var g=Object.keys(l),v=0;v<g.length;++v)l[g[v]]!=null&&(this[g[v]]=l[g[v]])}return f.prototype.node=p.emptyArray,f.prototype.name="",f.prototype.initializer=p.emptyArray,f.prototype.docString="",f.prototype.input=p.emptyArray,f.prototype.output=p.emptyArray,f.prototype.valueInfo=p.emptyArray,f.prototype.quantizationAnnotation=p.emptyArray,f.create=function(l){return new f(l)},f.encode=function(l,g){if(g||(g=m.create()),l.node!=null&&l.node.length)for(var v=0;v<l.node.length;++v)_.onnx.NodeProto.encode(l.node[v],g.uint32(10).fork()).ldelim();if(l.name!=null&&l.hasOwnProperty("name")&&g.uint32(18).string(l.name),l.initializer!=null&&l.initializer.length)for(v=0;v<l.initializer.length;++v)_.onnx.TensorProto.encode(l.initializer[v],g.uint32(42).fork()).ldelim();if(l.docString!=null&&l.hasOwnProperty("docString")&&g.uint32(82).string(l.docString),l.input!=null&&l.input.length)for(v=0;v<l.input.length;++v)_.onnx.ValueInfoProto.encode(l.input[v],g.uint32(90).fork()).ldelim();if(l.output!=null&&l.output.length)for(v=0;v<l.output.length;++v)_.onnx.ValueInfoProto.encode(l.output[v],g.uint32(98).fork()).ldelim();if(l.valueInfo!=null&&l.valueInfo.length)for(v=0;v<l.valueInfo.length;++v)_.onnx.ValueInfoProto.encode(l.valueInfo[v],g.uint32(106).fork()).ldelim();if(l.quantizationAnnotation!=null&&l.quantizationAnnotation.length)for(v=0;v<l.quantizationAnnotation.length;++v)_.onnx.TensorAnnotation.encode(l.quantizationAnnotation[v],g.uint32(114).fork()).ldelim();return g},f.encodeDelimited=function(l,g){return this.encode(l,g).ldelim()},f.decode=function(l,g){l instanceof h||(l=h.create(l));for(var v=g===void 0?l.len:l.pos+g,S=new _.onnx.GraphProto;l.pos<v;){var T=l.uint32();switch(T>>>3){case 1:S.node&&S.node.length||(S.node=[]),S.node.push(_.onnx.NodeProto.decode(l,l.uint32()));break;case 2:S.name=l.string();break;case 5:S.initializer&&S.initializer.length||(S.initializer=[]),S.initializer.push(_.onnx.TensorProto.decode(l,l.uint32()));break;case 10:S.docString=l.string();break;case 11:S.input&&S.input.length||(S.input=[]),S.input.push(_.onnx.ValueInfoProto.decode(l,l.uint32()));break;case 12:S.output&&S.output.length||(S.output=[]),S.output.push(_.onnx.ValueInfoProto.decode(l,l.uint32()));break;case 13:S.valueInfo&&S.valueInfo.length||(S.valueInfo=[]),S.valueInfo.push(_.onnx.ValueInfoProto.decode(l,l.uint32()));break;case 14:S.quantizationAnnotation&&S.quantizationAnnotation.length||(S.quantizationAnnotation=[]),S.quantizationAnnotation.push(_.onnx.TensorAnnotation.decode(l,l.uint32()));break;default:l.skipType(7&T)}}return S},f.decodeDelimited=function(l){return l instanceof h||(l=new h(l)),this.decode(l,l.uint32())},f.verify=function(l){if(typeof l!="object"||l===null)return"object expected";if(l.node!=null&&l.hasOwnProperty("node")){if(!Array.isArray(l.node))return"node: array expected";for(var g=0;g<l.node.length;++g)if(v=_.onnx.NodeProto.verify(l.node[g]))return"node."+v}if(l.name!=null&&l.hasOwnProperty("name")&&!p.isString(l.name))return"name: string expected";if(l.initializer!=null&&l.hasOwnProperty("initializer")){if(!Array.isArray(l.initializer))return"initializer: array expected";for(g=0;g<l.initializer.length;++g)if(v=_.onnx.TensorProto.verify(l.initializer[g]))return"initializer."+v}if(l.docString!=null&&l.hasOwnProperty("docString")&&!p.isString(l.docString))return"docString: string expected";if(l.input!=null&&l.hasOwnProperty("input")){if(!Array.isArray(l.input))return"input: array expected";for(g=0;g<l.input.length;++g)if(v=_.onnx.ValueInfoProto.verify(l.input[g]))return"input."+v}if(l.output!=null&&l.hasOwnProperty("output")){if(!Array.isArray(l.output))return"output: array expected";for(g=0;g<l.output.length;++g)if(v=_.onnx.ValueInfoProto.verify(l.output[g]))return"output."+v}if(l.valueInfo!=null&&l.hasOwnProperty("valueInfo")){if(!Array.isArray(l.valueInfo))return"valueInfo: array expected";for(g=0;g<l.valueInfo.length;++g)if(v=_.onnx.ValueInfoProto.verify(l.valueInfo[g]))return"valueInfo."+v}if(l.quantizationAnnotation!=null&&l.hasOwnProperty("quantizationAnnotation")){if(!Array.isArray(l.quantizationAnnotation))return"quantizationAnnotation: array expected";for(g=0;g<l.quantizationAnnotation.length;++g){var v;if(v=_.onnx.TensorAnnotation.verify(l.quantizationAnnotation[g]))return"quantizationAnnotation."+v}}return null},f.fromObject=function(l){if(l instanceof _.onnx.GraphProto)return l;var g=new _.onnx.GraphProto;if(l.node){if(!Array.isArray(l.node))throw TypeError(".onnx.GraphProto.node: array expected");g.node=[];for(var v=0;v<l.node.length;++v){if(typeof l.node[v]!="object")throw TypeError(".onnx.GraphProto.node: object expected");g.node[v]=_.onnx.NodeProto.fromObject(l.node[v])}}if(l.name!=null&&(g.name=String(l.name)),l.initializer){if(!Array.isArray(l.initializer))throw TypeError(".onnx.GraphProto.initializer: array expected");for(g.initializer=[],v=0;v<l.initializer.length;++v){if(typeof l.initializer[v]!="object")throw TypeError(".onnx.GraphProto.initializer: object expected");g.initializer[v]=_.onnx.TensorProto.fromObject(l.initializer[v])}}if(l.docString!=null&&(g.docString=String(l.docString)),l.input){if(!Array.isArray(l.input))throw TypeError(".onnx.GraphProto.input: array expected");for(g.input=[],v=0;v<l.input.length;++v){if(typeof l.input[v]!="object")throw TypeError(".onnx.GraphProto.input: object expected");g.input[v]=_.onnx.ValueInfoProto.fromObject(l.input[v])}}if(l.output){if(!Array.isArray(l.output))throw TypeError(".onnx.GraphProto.output: array expected");for(g.output=[],v=0;v<l.output.length;++v){if(typeof l.output[v]!="object")throw TypeError(".onnx.GraphProto.output: object expected");g.output[v]=_.onnx.ValueInfoProto.fromObject(l.output[v])}}if(l.valueInfo){if(!Array.isArray(l.valueInfo))throw TypeError(".onnx.GraphProto.valueInfo: array expected");for(g.valueInfo=[],v=0;v<l.valueInfo.length;++v){if(typeof l.valueInfo[v]!="object")throw TypeError(".onnx.GraphProto.valueInfo: object expected");g.valueInfo[v]=_.onnx.ValueInfoProto.fromObject(l.valueInfo[v])}}if(l.quantizationAnnotation){if(!Array.isArray(l.quantizationAnnotation))throw TypeError(".onnx.GraphProto.quantizationAnnotation: array expected");for(g.quantizationAnnotation=[],v=0;v<l.quantizationAnnotation.length;++v){if(typeof l.quantizationAnnotation[v]!="object")throw TypeError(".onnx.GraphProto.quantizationAnnotation: object expected");g.quantizationAnnotation[v]=_.onnx.TensorAnnotation.fromObject(l.quantizationAnnotation[v])}}return g},f.toObject=function(l,g){g||(g={});var v={};if((g.arrays||g.defaults)&&(v.node=[],v.initializer=[],v.input=[],v.output=[],v.valueInfo=[],v.quantizationAnnotation=[]),g.defaults&&(v.name="",v.docString=""),l.node&&l.node.length){v.node=[];for(var S=0;S<l.node.length;++S)v.node[S]=_.onnx.NodeProto.toObject(l.node[S],g)}if(l.name!=null&&l.hasOwnProperty("name")&&(v.name=l.name),l.initializer&&l.initializer.length)for(v.initializer=[],S=0;S<l.initializer.length;++S)v.initializer[S]=_.onnx.TensorProto.toObject(l.initializer[S],g);if(l.docString!=null&&l.hasOwnProperty("docString")&&(v.docString=l.docString),l.input&&l.input.length)for(v.input=[],S=0;S<l.input.length;++S)v.input[S]=_.onnx.ValueInfoProto.toObject(l.input[S],g);if(l.output&&l.output.length)for(v.output=[],S=0;S<l.output.length;++S)v.output[S]=_.onnx.ValueInfoProto.toObject(l.output[S],g);if(l.valueInfo&&l.valueInfo.length)for(v.valueInfo=[],S=0;S<l.valueInfo.length;++S)v.valueInfo[S]=_.onnx.ValueInfoProto.toObject(l.valueInfo[S],g);if(l.quantizationAnnotation&&l.quantizationAnnotation.length)for(v.quantizationAnnotation=[],S=0;S<l.quantizationAnnotation.length;++S)v.quantizationAnnotation[S]=_.onnx.TensorAnnotation.toObject(l.quantizationAnnotation[S],g);return v},f.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},f})(),u.TensorProto=(function(){function f(l){if(this.dims=[],this.floatData=[],this.int32Data=[],this.stringData=[],this.int64Data=[],this.externalData=[],this.doubleData=[],this.uint64Data=[],l)for(var g=Object.keys(l),v=0;v<g.length;++v)l[g[v]]!=null&&(this[g[v]]=l[g[v]])}return f.prototype.dims=p.emptyArray,f.prototype.dataType=0,f.prototype.segment=null,f.prototype.floatData=p.emptyArray,f.prototype.int32Data=p.emptyArray,f.prototype.stringData=p.emptyArray,f.prototype.int64Data=p.emptyArray,f.prototype.name="",f.prototype.docString="",f.prototype.rawData=p.newBuffer([]),f.prototype.externalData=p.emptyArray,f.prototype.dataLocation=0,f.prototype.doubleData=p.emptyArray,f.prototype.uint64Data=p.emptyArray,f.create=function(l){return new f(l)},f.encode=function(l,g){if(g||(g=m.create()),l.dims!=null&&l.dims.length){g.uint32(10).fork();for(var v=0;v<l.dims.length;++v)g.int64(l.dims[v]);g.ldelim()}if(l.dataType!=null&&l.hasOwnProperty("dataType")&&g.uint32(16).int32(l.dataType),l.segment!=null&&l.hasOwnProperty("segment")&&_.onnx.TensorProto.Segment.encode(l.segment,g.uint32(26).fork()).ldelim(),l.floatData!=null&&l.floatData.length){for(g.uint32(34).fork(),v=0;v<l.floatData.length;++v)g.float(l.floatData[v]);g.ldelim()}if(l.int32Data!=null&&l.int32Data.length){for(g.uint32(42).fork(),v=0;v<l.int32Data.length;++v)g.int32(l.int32Data[v]);g.ldelim()}if(l.stringData!=null&&l.stringData.length)for(v=0;v<l.stringData.length;++v)g.uint32(50).bytes(l.stringData[v]);if(l.int64Data!=null&&l.int64Data.length){for(g.uint32(58).fork(),v=0;v<l.int64Data.length;++v)g.int64(l.int64Data[v]);g.ldelim()}if(l.name!=null&&l.hasOwnProperty("name")&&g.uint32(66).string(l.name),l.rawData!=null&&l.hasOwnProperty("rawData")&&g.uint32(74).bytes(l.rawData),l.doubleData!=null&&l.doubleData.length){for(g.uint32(82).fork(),v=0;v<l.doubleData.length;++v)g.double(l.doubleData[v]);g.ldelim()}if(l.uint64Data!=null&&l.uint64Data.length){for(g.uint32(90).fork(),v=0;v<l.uint64Data.length;++v)g.uint64(l.uint64Data[v]);g.ldelim()}if(l.docString!=null&&l.hasOwnProperty("docString")&&g.uint32(98).string(l.docString),l.externalData!=null&&l.externalData.length)for(v=0;v<l.externalData.length;++v)_.onnx.StringStringEntryProto.encode(l.externalData[v],g.uint32(106).fork()).ldelim();return l.dataLocation!=null&&l.hasOwnProperty("dataLocation")&&g.uint32(112).int32(l.dataLocation),g},f.encodeDelimited=function(l,g){return this.encode(l,g).ldelim()},f.decode=function(l,g){l instanceof h||(l=h.create(l));for(var v=g===void 0?l.len:l.pos+g,S=new _.onnx.TensorProto;l.pos<v;){var T=l.uint32();switch(T>>>3){case 1:if(S.dims&&S.dims.length||(S.dims=[]),(7&T)==2)for(var E=l.uint32()+l.pos;l.pos<E;)S.dims.push(l.int64());else S.dims.push(l.int64());break;case 2:S.dataType=l.int32();break;case 3:S.segment=_.onnx.TensorProto.Segment.decode(l,l.uint32());break;case 4:if(S.floatData&&S.floatData.length||(S.floatData=[]),(7&T)==2)for(E=l.uint32()+l.pos;l.pos<E;)S.floatData.push(l.float());else S.floatData.push(l.float());break;case 5:if(S.int32Data&&S.int32Data.length||(S.int32Data=[]),(7&T)==2)for(E=l.uint32()+l.pos;l.pos<E;)S.int32Data.push(l.int32());else S.int32Data.push(l.int32());break;case 6:S.stringData&&S.stringData.length||(S.stringData=[]),S.stringData.push(l.bytes());break;case 7:if(S.int64Data&&S.int64Data.length||(S.int64Data=[]),(7&T)==2)for(E=l.uint32()+l.pos;l.pos<E;)S.int64Data.push(l.int64());else S.int64Data.push(l.int64());break;case 8:S.name=l.string();break;case 12:S.docString=l.string();break;case 9:S.rawData=l.bytes();break;case 13:S.externalData&&S.externalData.length||(S.externalData=[]),S.externalData.push(_.onnx.StringStringEntryProto.decode(l,l.uint32()));break;case 14:S.dataLocation=l.int32();break;case 10:if(S.doubleData&&S.doubleData.length||(S.doubleData=[]),(7&T)==2)for(E=l.uint32()+l.pos;l.pos<E;)S.doubleData.push(l.double());else S.doubleData.push(l.double());break;case 11:if(S.uint64Data&&S.uint64Data.length||(S.uint64Data=[]),(7&T)==2)for(E=l.uint32()+l.pos;l.pos<E;)S.uint64Data.push(l.uint64());else S.uint64Data.push(l.uint64());break;default:l.skipType(7&T)}}return S},f.decodeDelimited=function(l){return l instanceof h||(l=new h(l)),this.decode(l,l.uint32())},f.verify=function(l){if(typeof l!="object"||l===null)return"object expected";if(l.dims!=null&&l.hasOwnProperty("dims")){if(!Array.isArray(l.dims))return"dims: array expected";for(var g=0;g<l.dims.length;++g)if(!(p.isInteger(l.dims[g])||l.dims[g]&&p.isInteger(l.dims[g].low)&&p.isInteger(l.dims[g].high)))return"dims: integer|Long[] expected"}if(l.dataType!=null&&l.hasOwnProperty("dataType")&&!p.isInteger(l.dataType))return"dataType: integer expected";if(l.segment!=null&&l.hasOwnProperty("segment")&&(v=_.onnx.TensorProto.Segment.verify(l.segment)))return"segment."+v;if(l.floatData!=null&&l.hasOwnProperty("floatData")){if(!Array.isArray(l.floatData))return"floatData: array expected";for(g=0;g<l.floatData.length;++g)if(typeof l.floatData[g]!="number")return"floatData: number[] expected"}if(l.int32Data!=null&&l.hasOwnProperty("int32Data")){if(!Array.isArray(l.int32Data))return"int32Data: array expected";for(g=0;g<l.int32Data.length;++g)if(!p.isInteger(l.int32Data[g]))return"int32Data: integer[] expected"}if(l.stringData!=null&&l.hasOwnProperty("stringData")){if(!Array.isArray(l.stringData))return"stringData: array expected";for(g=0;g<l.stringData.length;++g)if(!(l.stringData[g]&&typeof l.stringData[g].length=="number"||p.isString(l.stringData[g])))return"stringData: buffer[] expected"}if(l.int64Data!=null&&l.hasOwnProperty("int64Data")){if(!Array.isArray(l.int64Data))return"int64Data: array expected";for(g=0;g<l.int64Data.length;++g)if(!(p.isInteger(l.int64Data[g])||l.int64Data[g]&&p.isInteger(l.int64Data[g].low)&&p.isInteger(l.int64Data[g].high)))return"int64Data: integer|Long[] expected"}if(l.name!=null&&l.hasOwnProperty("name")&&!p.isString(l.name))return"name: string expected";if(l.docString!=null&&l.hasOwnProperty("docString")&&!p.isString(l.docString))return"docString: string expected";if(l.rawData!=null&&l.hasOwnProperty("rawData")&&!(l.rawData&&typeof l.rawData.length=="number"||p.isString(l.rawData)))return"rawData: buffer expected";if(l.externalData!=null&&l.hasOwnProperty("externalData")){if(!Array.isArray(l.externalData))return"externalData: array expected";for(g=0;g<l.externalData.length;++g){var v;if(v=_.onnx.StringStringEntryProto.verify(l.externalData[g]))return"externalData."+v}}if(l.dataLocation!=null&&l.hasOwnProperty("dataLocation"))switch(l.dataLocation){default:return"dataLocation: enum value expected";case 0:case 1:}if(l.doubleData!=null&&l.hasOwnProperty("doubleData")){if(!Array.isArray(l.doubleData))return"doubleData: array expected";for(g=0;g<l.doubleData.length;++g)if(typeof l.doubleData[g]!="number")return"doubleData: number[] expected"}if(l.uint64Data!=null&&l.hasOwnProperty("uint64Data")){if(!Array.isArray(l.uint64Data))return"uint64Data: array expected";for(g=0;g<l.uint64Data.length;++g)if(!(p.isInteger(l.uint64Data[g])||l.uint64Data[g]&&p.isInteger(l.uint64Data[g].low)&&p.isInteger(l.uint64Data[g].high)))return"uint64Data: integer|Long[] expected"}return null},f.fromObject=function(l){if(l instanceof _.onnx.TensorProto)return l;var g=new _.onnx.TensorProto;if(l.dims){if(!Array.isArray(l.dims))throw TypeError(".onnx.TensorProto.dims: array expected");g.dims=[];for(var v=0;v<l.dims.length;++v)p.Long?(g.dims[v]=p.Long.fromValue(l.dims[v])).unsigned=!1:typeof l.dims[v]=="string"?g.dims[v]=parseInt(l.dims[v],10):typeof l.dims[v]=="number"?g.dims[v]=l.dims[v]:typeof l.dims[v]=="object"&&(g.dims[v]=new p.LongBits(l.dims[v].low>>>0,l.dims[v].high>>>0).toNumber())}if(l.dataType!=null&&(g.dataType=0|l.dataType),l.segment!=null){if(typeof l.segment!="object")throw TypeError(".onnx.TensorProto.segment: object expected");g.segment=_.onnx.TensorProto.Segment.fromObject(l.segment)}if(l.floatData){if(!Array.isArray(l.floatData))throw TypeError(".onnx.TensorProto.floatData: array expected");for(g.floatData=[],v=0;v<l.floatData.length;++v)g.floatData[v]=Number(l.floatData[v])}if(l.int32Data){if(!Array.isArray(l.int32Data))throw TypeError(".onnx.TensorProto.int32Data: array expected");for(g.int32Data=[],v=0;v<l.int32Data.length;++v)g.int32Data[v]=0|l.int32Data[v]}if(l.stringData){if(!Array.isArray(l.stringData))throw TypeError(".onnx.TensorProto.stringData: array expected");for(g.stringData=[],v=0;v<l.stringData.length;++v)typeof l.stringData[v]=="string"?p.base64.decode(l.stringData[v],g.stringData[v]=p.newBuffer(p.base64.length(l.stringData[v])),0):l.stringData[v].length&&(g.stringData[v]=l.stringData[v])}if(l.int64Data){if(!Array.isArray(l.int64Data))throw TypeError(".onnx.TensorProto.int64Data: array expected");for(g.int64Data=[],v=0;v<l.int64Data.length;++v)p.Long?(g.int64Data[v]=p.Long.fromValue(l.int64Data[v])).unsigned=!1:typeof l.int64Data[v]=="string"?g.int64Data[v]=parseInt(l.int64Data[v],10):typeof l.int64Data[v]=="number"?g.int64Data[v]=l.int64Data[v]:typeof l.int64Data[v]=="object"&&(g.int64Data[v]=new p.LongBits(l.int64Data[v].low>>>0,l.int64Data[v].high>>>0).toNumber())}if(l.name!=null&&(g.name=String(l.name)),l.docString!=null&&(g.docString=String(l.docString)),l.rawData!=null&&(typeof l.rawData=="string"?p.base64.decode(l.rawData,g.rawData=p.newBuffer(p.base64.length(l.rawData)),0):l.rawData.length&&(g.rawData=l.rawData)),l.externalData){if(!Array.isArray(l.externalData))throw TypeError(".onnx.TensorProto.externalData: array expected");for(g.externalData=[],v=0;v<l.externalData.length;++v){if(typeof l.externalData[v]!="object")throw TypeError(".onnx.TensorProto.externalData: object expected");g.externalData[v]=_.onnx.StringStringEntryProto.fromObject(l.externalData[v])}}switch(l.dataLocation){case"DEFAULT":case 0:g.dataLocation=0;break;case"EXTERNAL":case 1:g.dataLocation=1}if(l.doubleData){if(!Array.isArray(l.doubleData))throw TypeError(".onnx.TensorProto.doubleData: array expected");for(g.doubleData=[],v=0;v<l.doubleData.length;++v)g.doubleData[v]=Number(l.doubleData[v])}if(l.uint64Data){if(!Array.isArray(l.uint64Data))throw TypeError(".onnx.TensorProto.uint64Data: array expected");for(g.uint64Data=[],v=0;v<l.uint64Data.length;++v)p.Long?(g.uint64Data[v]=p.Long.fromValue(l.uint64Data[v])).unsigned=!0:typeof l.uint64Data[v]=="string"?g.uint64Data[v]=parseInt(l.uint64Data[v],10):typeof l.uint64Data[v]=="number"?g.uint64Data[v]=l.uint64Data[v]:typeof l.uint64Data[v]=="object"&&(g.uint64Data[v]=new p.LongBits(l.uint64Data[v].low>>>0,l.uint64Data[v].high>>>0).toNumber(!0))}return g},f.toObject=function(l,g){g||(g={});var v={};if((g.arrays||g.defaults)&&(v.dims=[],v.floatData=[],v.int32Data=[],v.stringData=[],v.int64Data=[],v.doubleData=[],v.uint64Data=[],v.externalData=[]),g.defaults&&(v.dataType=0,v.segment=null,v.name="",g.bytes===String?v.rawData="":(v.rawData=[],g.bytes!==Array&&(v.rawData=p.newBuffer(v.rawData))),v.docString="",v.dataLocation=g.enums===String?"DEFAULT":0),l.dims&&l.dims.length){v.dims=[];for(var S=0;S<l.dims.length;++S)typeof l.dims[S]=="number"?v.dims[S]=g.longs===String?String(l.dims[S]):l.dims[S]:v.dims[S]=g.longs===String?p.Long.prototype.toString.call(l.dims[S]):g.longs===Number?new p.LongBits(l.dims[S].low>>>0,l.dims[S].high>>>0).toNumber():l.dims[S]}if(l.dataType!=null&&l.hasOwnProperty("dataType")&&(v.dataType=l.dataType),l.segment!=null&&l.hasOwnProperty("segment")&&(v.segment=_.onnx.TensorProto.Segment.toObject(l.segment,g)),l.floatData&&l.floatData.length)for(v.floatData=[],S=0;S<l.floatData.length;++S)v.floatData[S]=g.json&&!isFinite(l.floatData[S])?String(l.floatData[S]):l.floatData[S];if(l.int32Data&&l.int32Data.length)for(v.int32Data=[],S=0;S<l.int32Data.length;++S)v.int32Data[S]=l.int32Data[S];if(l.stringData&&l.stringData.length)for(v.stringData=[],S=0;S<l.stringData.length;++S)v.stringData[S]=g.bytes===String?p.base64.encode(l.stringData[S],0,l.stringData[S].length):g.bytes===Array?Array.prototype.slice.call(l.stringData[S]):l.stringData[S];if(l.int64Data&&l.int64Data.length)for(v.int64Data=[],S=0;S<l.int64Data.length;++S)typeof l.int64Data[S]=="number"?v.int64Data[S]=g.longs===String?String(l.int64Data[S]):l.int64Data[S]:v.int64Data[S]=g.longs===String?p.Long.prototype.toString.call(l.int64Data[S]):g.longs===Number?new p.LongBits(l.int64Data[S].low>>>0,l.int64Data[S].high>>>0).toNumber():l.int64Data[S];if(l.name!=null&&l.hasOwnProperty("name")&&(v.name=l.name),l.rawData!=null&&l.hasOwnProperty("rawData")&&(v.rawData=g.bytes===String?p.base64.encode(l.rawData,0,l.rawData.length):g.bytes===Array?Array.prototype.slice.call(l.rawData):l.rawData),l.doubleData&&l.doubleData.length)for(v.doubleData=[],S=0;S<l.doubleData.length;++S)v.doubleData[S]=g.json&&!isFinite(l.doubleData[S])?String(l.doubleData[S]):l.doubleData[S];if(l.uint64Data&&l.uint64Data.length)for(v.uint64Data=[],S=0;S<l.uint64Data.length;++S)typeof l.uint64Data[S]=="number"?v.uint64Data[S]=g.longs===String?String(l.uint64Data[S]):l.uint64Data[S]:v.uint64Data[S]=g.longs===String?p.Long.prototype.toString.call(l.uint64Data[S]):g.longs===Number?new p.LongBits(l.uint64Data[S].low>>>0,l.uint64Data[S].high>>>0).toNumber(!0):l.uint64Data[S];if(l.docString!=null&&l.hasOwnProperty("docString")&&(v.docString=l.docString),l.externalData&&l.externalData.length)for(v.externalData=[],S=0;S<l.externalData.length;++S)v.externalData[S]=_.onnx.StringStringEntryProto.toObject(l.externalData[S],g);return l.dataLocation!=null&&l.hasOwnProperty("dataLocation")&&(v.dataLocation=g.enums===String?_.onnx.TensorProto.DataLocation[l.dataLocation]:l.dataLocation),v},f.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},f.DataType=(function(){var l={},g=Object.create(l);return g[l[0]="UNDEFINED"]=0,g[l[1]="FLOAT"]=1,g[l[2]="UINT8"]=2,g[l[3]="INT8"]=3,g[l[4]="UINT16"]=4,g[l[5]="INT16"]=5,g[l[6]="INT32"]=6,g[l[7]="INT64"]=7,g[l[8]="STRING"]=8,g[l[9]="BOOL"]=9,g[l[10]="FLOAT16"]=10,g[l[11]="DOUBLE"]=11,g[l[12]="UINT32"]=12,g[l[13]="UINT64"]=13,g[l[14]="COMPLEX64"]=14,g[l[15]="COMPLEX128"]=15,g[l[16]="BFLOAT16"]=16,g})(),f.Segment=(function(){function l(g){if(g)for(var v=Object.keys(g),S=0;S<v.length;++S)g[v[S]]!=null&&(this[v[S]]=g[v[S]])}return l.prototype.begin=p.Long?p.Long.fromBits(0,0,!1):0,l.prototype.end=p.Long?p.Long.fromBits(0,0,!1):0,l.create=function(g){return new l(g)},l.encode=function(g,v){return v||(v=m.create()),g.begin!=null&&g.hasOwnProperty("begin")&&v.uint32(8).int64(g.begin),g.end!=null&&g.hasOwnProperty("end")&&v.uint32(16).int64(g.end),v},l.encodeDelimited=function(g,v){return this.encode(g,v).ldelim()},l.decode=function(g,v){g instanceof h||(g=h.create(g));for(var S=v===void 0?g.len:g.pos+v,T=new _.onnx.TensorProto.Segment;g.pos<S;){var E=g.uint32();switch(E>>>3){case 1:T.begin=g.int64();break;case 2:T.end=g.int64();break;default:g.skipType(7&E)}}return T},l.decodeDelimited=function(g){return g instanceof h||(g=new h(g)),this.decode(g,g.uint32())},l.verify=function(g){return typeof g!="object"||g===null?"object expected":g.begin!=null&&g.hasOwnProperty("begin")&&!(p.isInteger(g.begin)||g.begin&&p.isInteger(g.begin.low)&&p.isInteger(g.begin.high))?"begin: integer|Long expected":g.end!=null&&g.hasOwnProperty("end")&&!(p.isInteger(g.end)||g.end&&p.isInteger(g.end.low)&&p.isInteger(g.end.high))?"end: integer|Long expected":null},l.fromObject=function(g){if(g instanceof _.onnx.TensorProto.Segment)return g;var v=new _.onnx.TensorProto.Segment;return g.begin!=null&&(p.Long?(v.begin=p.Long.fromValue(g.begin)).unsigned=!1:typeof g.begin=="string"?v.begin=parseInt(g.begin,10):typeof g.begin=="number"?v.begin=g.begin:typeof g.begin=="object"&&(v.begin=new p.LongBits(g.begin.low>>>0,g.begin.high>>>0).toNumber())),g.end!=null&&(p.Long?(v.end=p.Long.fromValue(g.end)).unsigned=!1:typeof g.end=="string"?v.end=parseInt(g.end,10):typeof g.end=="number"?v.end=g.end:typeof g.end=="object"&&(v.end=new p.LongBits(g.end.low>>>0,g.end.high>>>0).toNumber())),v},l.toObject=function(g,v){v||(v={});var S={};if(v.defaults){if(p.Long){var T=new p.Long(0,0,!1);S.begin=v.longs===String?T.toString():v.longs===Number?T.toNumber():T}else S.begin=v.longs===String?"0":0;p.Long?(T=new p.Long(0,0,!1),S.end=v.longs===String?T.toString():v.longs===Number?T.toNumber():T):S.end=v.longs===String?"0":0}return g.begin!=null&&g.hasOwnProperty("begin")&&(typeof g.begin=="number"?S.begin=v.longs===String?String(g.begin):g.begin:S.begin=v.longs===String?p.Long.prototype.toString.call(g.begin):v.longs===Number?new p.LongBits(g.begin.low>>>0,g.begin.high>>>0).toNumber():g.begin),g.end!=null&&g.hasOwnProperty("end")&&(typeof g.end=="number"?S.end=v.longs===String?String(g.end):g.end:S.end=v.longs===String?p.Long.prototype.toString.call(g.end):v.longs===Number?new p.LongBits(g.end.low>>>0,g.end.high>>>0).toNumber():g.end),S},l.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},l})(),f.DataLocation=(function(){var l={},g=Object.create(l);return g[l[0]="DEFAULT"]=0,g[l[1]="EXTERNAL"]=1,g})(),f})(),u.TensorShapeProto=(function(){function f(l){if(this.dim=[],l)for(var g=Object.keys(l),v=0;v<g.length;++v)l[g[v]]!=null&&(this[g[v]]=l[g[v]])}return f.prototype.dim=p.emptyArray,f.create=function(l){return new f(l)},f.encode=function(l,g){if(g||(g=m.create()),l.dim!=null&&l.dim.length)for(var v=0;v<l.dim.length;++v)_.onnx.TensorShapeProto.Dimension.encode(l.dim[v],g.uint32(10).fork()).ldelim();return g},f.encodeDelimited=function(l,g){return this.encode(l,g).ldelim()},f.decode=function(l,g){l instanceof h||(l=h.create(l));for(var v=g===void 0?l.len:l.pos+g,S=new _.onnx.TensorShapeProto;l.pos<v;){var T=l.uint32();T>>>3==1?(S.dim&&S.dim.length||(S.dim=[]),S.dim.push(_.onnx.TensorShapeProto.Dimension.decode(l,l.uint32()))):l.skipType(7&T)}return S},f.decodeDelimited=function(l){return l instanceof h||(l=new h(l)),this.decode(l,l.uint32())},f.verify=function(l){if(typeof l!="object"||l===null)return"object expected";if(l.dim!=null&&l.hasOwnProperty("dim")){if(!Array.isArray(l.dim))return"dim: array expected";for(var g=0;g<l.dim.length;++g){var v=_.onnx.TensorShapeProto.Dimension.verify(l.dim[g]);if(v)return"dim."+v}}return null},f.fromObject=function(l){if(l instanceof _.onnx.TensorShapeProto)return l;var g=new _.onnx.TensorShapeProto;if(l.dim){if(!Array.isArray(l.dim))throw TypeError(".onnx.TensorShapeProto.dim: array expected");g.dim=[];for(var v=0;v<l.dim.length;++v){if(typeof l.dim[v]!="object")throw TypeError(".onnx.TensorShapeProto.dim: object expected");g.dim[v]=_.onnx.TensorShapeProto.Dimension.fromObject(l.dim[v])}}return g},f.toObject=function(l,g){g||(g={});var v={};if((g.arrays||g.defaults)&&(v.dim=[]),l.dim&&l.dim.length){v.dim=[];for(var S=0;S<l.dim.length;++S)v.dim[S]=_.onnx.TensorShapeProto.Dimension.toObject(l.dim[S],g)}return v},f.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},f.Dimension=(function(){function l(v){if(v)for(var S=Object.keys(v),T=0;T<S.length;++T)v[S[T]]!=null&&(this[S[T]]=v[S[T]])}var g;return l.prototype.dimValue=p.Long?p.Long.fromBits(0,0,!1):0,l.prototype.dimParam="",l.prototype.denotation="",Object.defineProperty(l.prototype,"value",{get:p.oneOfGetter(g=["dimValue","dimParam"]),set:p.oneOfSetter(g)}),l.create=function(v){return new l(v)},l.encode=function(v,S){return S||(S=m.create()),v.dimValue!=null&&v.hasOwnProperty("dimValue")&&S.uint32(8).int64(v.dimValue),v.dimParam!=null&&v.hasOwnProperty("dimParam")&&S.uint32(18).string(v.dimParam),v.denotation!=null&&v.hasOwnProperty("denotation")&&S.uint32(26).string(v.denotation),S},l.encodeDelimited=function(v,S){return this.encode(v,S).ldelim()},l.decode=function(v,S){v instanceof h||(v=h.create(v));for(var T=S===void 0?v.len:v.pos+S,E=new _.onnx.TensorShapeProto.Dimension;v.pos<T;){var O=v.uint32();switch(O>>>3){case 1:E.dimValue=v.int64();break;case 2:E.dimParam=v.string();break;case 3:E.denotation=v.string();break;default:v.skipType(7&O)}}return E},l.decodeDelimited=function(v){return v instanceof h||(v=new h(v)),this.decode(v,v.uint32())},l.verify=function(v){if(typeof v!="object"||v===null)return"object expected";var S={};if(v.dimValue!=null&&v.hasOwnProperty("dimValue")&&(S.value=1,!(p.isInteger(v.dimValue)||v.dimValue&&p.isInteger(v.dimValue.low)&&p.isInteger(v.dimValue.high))))return"dimValue: integer|Long expected";if(v.dimParam!=null&&v.hasOwnProperty("dimParam")){if(S.value===1)return"value: multiple values";if(S.value=1,!p.isString(v.dimParam))return"dimParam: string expected"}return v.denotation!=null&&v.hasOwnProperty("denotation")&&!p.isString(v.denotation)?"denotation: string expected":null},l.fromObject=function(v){if(v instanceof _.onnx.TensorShapeProto.Dimension)return v;var S=new _.onnx.TensorShapeProto.Dimension;return v.dimValue!=null&&(p.Long?(S.dimValue=p.Long.fromValue(v.dimValue)).unsigned=!1:typeof v.dimValue=="string"?S.dimValue=parseInt(v.dimValue,10):typeof v.dimValue=="number"?S.dimValue=v.dimValue:typeof v.dimValue=="object"&&(S.dimValue=new p.LongBits(v.dimValue.low>>>0,v.dimValue.high>>>0).toNumber())),v.dimParam!=null&&(S.dimParam=String(v.dimParam)),v.denotation!=null&&(S.denotation=String(v.denotation)),S},l.toObject=function(v,S){S||(S={});var T={};return S.defaults&&(T.denotation=""),v.dimValue!=null&&v.hasOwnProperty("dimValue")&&(typeof v.dimValue=="number"?T.dimValue=S.longs===String?String(v.dimValue):v.dimValue:T.dimValue=S.longs===String?p.Long.prototype.toString.call(v.dimValue):S.longs===Number?new p.LongBits(v.dimValue.low>>>0,v.dimValue.high>>>0).toNumber():v.dimValue,S.oneofs&&(T.value="dimValue")),v.dimParam!=null&&v.hasOwnProperty("dimParam")&&(T.dimParam=v.dimParam,S.oneofs&&(T.value="dimParam")),v.denotation!=null&&v.hasOwnProperty("denotation")&&(T.denotation=v.denotation),T},l.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},l})(),f})(),u.TypeProto=(function(){function f(g){if(g)for(var v=Object.keys(g),S=0;S<v.length;++S)g[v[S]]!=null&&(this[v[S]]=g[v[S]])}var l;return f.prototype.tensorType=null,f.prototype.denotation="",Object.defineProperty(f.prototype,"value",{get:p.oneOfGetter(l=["tensorType"]),set:p.oneOfSetter(l)}),f.create=function(g){return new f(g)},f.encode=function(g,v){return v||(v=m.create()),g.tensorType!=null&&g.hasOwnProperty("tensorType")&&_.onnx.TypeProto.Tensor.encode(g.tensorType,v.uint32(10).fork()).ldelim(),g.denotation!=null&&g.hasOwnProperty("denotation")&&v.uint32(50).string(g.denotation),v},f.encodeDelimited=function(g,v){return this.encode(g,v).ldelim()},f.decode=function(g,v){g instanceof h||(g=h.create(g));for(var S=v===void 0?g.len:g.pos+v,T=new _.onnx.TypeProto;g.pos<S;){var E=g.uint32();switch(E>>>3){case 1:T.tensorType=_.onnx.TypeProto.Tensor.decode(g,g.uint32());break;case 6:T.denotation=g.string();break;default:g.skipType(7&E)}}return T},f.decodeDelimited=function(g){return g instanceof h||(g=new h(g)),this.decode(g,g.uint32())},f.verify=function(g){if(typeof g!="object"||g===null)return"object expected";if(g.tensorType!=null&&g.hasOwnProperty("tensorType")){var v=_.onnx.TypeProto.Tensor.verify(g.tensorType);if(v)return"tensorType."+v}return g.denotation!=null&&g.hasOwnProperty("denotation")&&!p.isString(g.denotation)?"denotation: string expected":null},f.fromObject=function(g){if(g instanceof _.onnx.TypeProto)return g;var v=new _.onnx.TypeProto;if(g.tensorType!=null){if(typeof g.tensorType!="object")throw TypeError(".onnx.TypeProto.tensorType: object expected");v.tensorType=_.onnx.TypeProto.Tensor.fromObject(g.tensorType)}return g.denotation!=null&&(v.denotation=String(g.denotation)),v},f.toObject=function(g,v){v||(v={});var S={};return v.defaults&&(S.denotation=""),g.tensorType!=null&&g.hasOwnProperty("tensorType")&&(S.tensorType=_.onnx.TypeProto.Tensor.toObject(g.tensorType,v),v.oneofs&&(S.value="tensorType")),g.denotation!=null&&g.hasOwnProperty("denotation")&&(S.denotation=g.denotation),S},f.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},f.Tensor=(function(){function g(v){if(v)for(var S=Object.keys(v),T=0;T<S.length;++T)v[S[T]]!=null&&(this[S[T]]=v[S[T]])}return g.prototype.elemType=0,g.prototype.shape=null,g.create=function(v){return new g(v)},g.encode=function(v,S){return S||(S=m.create()),v.elemType!=null&&v.hasOwnProperty("elemType")&&S.uint32(8).int32(v.elemType),v.shape!=null&&v.hasOwnProperty("shape")&&_.onnx.TensorShapeProto.encode(v.shape,S.uint32(18).fork()).ldelim(),S},g.encodeDelimited=function(v,S){return this.encode(v,S).ldelim()},g.decode=function(v,S){v instanceof h||(v=h.create(v));for(var T=S===void 0?v.len:v.pos+S,E=new _.onnx.TypeProto.Tensor;v.pos<T;){var O=v.uint32();switch(O>>>3){case 1:E.elemType=v.int32();break;case 2:E.shape=_.onnx.TensorShapeProto.decode(v,v.uint32());break;default:v.skipType(7&O)}}return E},g.decodeDelimited=function(v){return v instanceof h||(v=new h(v)),this.decode(v,v.uint32())},g.verify=function(v){if(typeof v!="object"||v===null)return"object expected";if(v.elemType!=null&&v.hasOwnProperty("elemType")&&!p.isInteger(v.elemType))return"elemType: integer expected";if(v.shape!=null&&v.hasOwnProperty("shape")){var S=_.onnx.TensorShapeProto.verify(v.shape);if(S)return"shape."+S}return null},g.fromObject=function(v){if(v instanceof _.onnx.TypeProto.Tensor)return v;var S=new _.onnx.TypeProto.Tensor;if(v.elemType!=null&&(S.elemType=0|v.elemType),v.shape!=null){if(typeof v.shape!="object")throw TypeError(".onnx.TypeProto.Tensor.shape: object expected");S.shape=_.onnx.TensorShapeProto.fromObject(v.shape)}return S},g.toObject=function(v,S){S||(S={});var T={};return S.defaults&&(T.elemType=0,T.shape=null),v.elemType!=null&&v.hasOwnProperty("elemType")&&(T.elemType=v.elemType),v.shape!=null&&v.hasOwnProperty("shape")&&(T.shape=_.onnx.TensorShapeProto.toObject(v.shape,S)),T},g.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},g})(),f})(),u.OperatorSetIdProto=(function(){function f(l){if(l)for(var g=Object.keys(l),v=0;v<g.length;++v)l[g[v]]!=null&&(this[g[v]]=l[g[v]])}return f.prototype.domain="",f.prototype.version=p.Long?p.Long.fromBits(0,0,!1):0,f.create=function(l){return new f(l)},f.encode=function(l,g){return g||(g=m.create()),l.domain!=null&&l.hasOwnProperty("domain")&&g.uint32(10).string(l.domain),l.version!=null&&l.hasOwnProperty("version")&&g.uint32(16).int64(l.version),g},f.encodeDelimited=function(l,g){return this.encode(l,g).ldelim()},f.decode=function(l,g){l instanceof h||(l=h.create(l));for(var v=g===void 0?l.len:l.pos+g,S=new _.onnx.OperatorSetIdProto;l.pos<v;){var T=l.uint32();switch(T>>>3){case 1:S.domain=l.string();break;case 2:S.version=l.int64();break;default:l.skipType(7&T)}}return S},f.decodeDelimited=function(l){return l instanceof h||(l=new h(l)),this.decode(l,l.uint32())},f.verify=function(l){return typeof l!="object"||l===null?"object expected":l.domain!=null&&l.hasOwnProperty("domain")&&!p.isString(l.domain)?"domain: string expected":l.version!=null&&l.hasOwnProperty("version")&&!(p.isInteger(l.version)||l.version&&p.isInteger(l.version.low)&&p.isInteger(l.version.high))?"version: integer|Long expected":null},f.fromObject=function(l){if(l instanceof _.onnx.OperatorSetIdProto)return l;var g=new _.onnx.OperatorSetIdProto;return l.domain!=null&&(g.domain=String(l.domain)),l.version!=null&&(p.Long?(g.version=p.Long.fromValue(l.version)).unsigned=!1:typeof l.version=="string"?g.version=parseInt(l.version,10):typeof l.version=="number"?g.version=l.version:typeof l.version=="object"&&(g.version=new p.LongBits(l.version.low>>>0,l.version.high>>>0).toNumber())),g},f.toObject=function(l,g){g||(g={});var v={};if(g.defaults)if(v.domain="",p.Long){var S=new p.Long(0,0,!1);v.version=g.longs===String?S.toString():g.longs===Number?S.toNumber():S}else v.version=g.longs===String?"0":0;return l.domain!=null&&l.hasOwnProperty("domain")&&(v.domain=l.domain),l.version!=null&&l.hasOwnProperty("version")&&(typeof l.version=="number"?v.version=g.longs===String?String(l.version):l.version:v.version=g.longs===String?p.Long.prototype.toString.call(l.version):g.longs===Number?new p.LongBits(l.version.low>>>0,l.version.high>>>0).toNumber():l.version),v},f.prototype.toJSON=function(){return this.constructor.toObject(this,d.util.toJSONOptions)},f})(),u),t.exports=_},2100:(t,e,n)=>{t.exports=n(9482)},9482:(t,e,n)=>{var i=e;function o(){i.util._configure(),i.Writer._configure(i.BufferWriter),i.Reader._configure(i.BufferReader)}i.build="minimal",i.Writer=n(1173),i.BufferWriter=n(3155),i.Reader=n(1408),i.BufferReader=n(593),i.util=n(9693),i.rpc=n(5994),i.roots=n(5054),i.configure=o,o()},1408:(t,e,n)=>{t.exports=m;var i,o=n(9693),u=o.LongBits,d=o.utf8;function h(S,T){return RangeError("index out of range: "+S.pos+" + "+(T||1)+" > "+S.len)}function m(S){this.buf=S,this.pos=0,this.len=S.length}var p,_=typeof Uint8Array<"u"?function(S){if(S instanceof Uint8Array||Array.isArray(S))return new m(S);throw Error("illegal buffer")}:function(S){if(Array.isArray(S))return new m(S);throw Error("illegal buffer")},f=function(){return o.Buffer?function(S){return(m.create=function(T){return o.Buffer.isBuffer(T)?new i(T):_(T)})(S)}:_};function l(){var S=new u(0,0),T=0;if(!(this.len-this.pos>4)){for(;T<3;++T){if(this.pos>=this.len)throw h(this);if(S.lo=(S.lo|(127&this.buf[this.pos])<<7*T)>>>0,this.buf[this.pos++]<128)return S}return S.lo=(S.lo|(127&this.buf[this.pos++])<<7*T)>>>0,S}for(;T<4;++T)if(S.lo=(S.lo|(127&this.buf[this.pos])<<7*T)>>>0,this.buf[this.pos++]<128)return S;if(S.lo=(S.lo|(127&this.buf[this.pos])<<28)>>>0,S.hi=(S.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return S;if(T=0,this.len-this.pos>4){for(;T<5;++T)if(S.hi=(S.hi|(127&this.buf[this.pos])<<7*T+3)>>>0,this.buf[this.pos++]<128)return S}else for(;T<5;++T){if(this.pos>=this.len)throw h(this);if(S.hi=(S.hi|(127&this.buf[this.pos])<<7*T+3)>>>0,this.buf[this.pos++]<128)return S}throw Error("invalid varint encoding")}function g(S,T){return(S[T-4]|S[T-3]<<8|S[T-2]<<16|S[T-1]<<24)>>>0}function v(){if(this.pos+8>this.len)throw h(this,8);return new u(g(this.buf,this.pos+=4),g(this.buf,this.pos+=4))}m.create=f(),m.prototype._slice=o.Array.prototype.subarray||o.Array.prototype.slice,m.prototype.uint32=(p=4294967295,function(){if(p=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(p=(p|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(p=(p|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(p=(p|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(p=(p|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return p;if((this.pos+=5)>this.len)throw this.pos=this.len,h(this,10);return p}),m.prototype.int32=function(){return 0|this.uint32()},m.prototype.sint32=function(){var S=this.uint32();return S>>>1^-(1&S)|0},m.prototype.bool=function(){return this.uint32()!==0},m.prototype.fixed32=function(){if(this.pos+4>this.len)throw h(this,4);return g(this.buf,this.pos+=4)},m.prototype.sfixed32=function(){if(this.pos+4>this.len)throw h(this,4);return 0|g(this.buf,this.pos+=4)},m.prototype.float=function(){if(this.pos+4>this.len)throw h(this,4);var S=o.float.readFloatLE(this.buf,this.pos);return this.pos+=4,S},m.prototype.double=function(){if(this.pos+8>this.len)throw h(this,4);var S=o.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,S},m.prototype.bytes=function(){var S=this.uint32(),T=this.pos,E=this.pos+S;if(E>this.len)throw h(this,S);return this.pos+=S,Array.isArray(this.buf)?this.buf.slice(T,E):T===E?new this.buf.constructor(0):this._slice.call(this.buf,T,E)},m.prototype.string=function(){var S=this.bytes();return d.read(S,0,S.length)},m.prototype.skip=function(S){if(typeof S=="number"){if(this.pos+S>this.len)throw h(this,S);this.pos+=S}else do if(this.pos>=this.len)throw h(this);while(128&this.buf[this.pos++]);return this},m.prototype.skipType=function(S){switch(S){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(S=7&this.uint32())!=4;)this.skipType(S);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+S+" at offset "+this.pos)}return this},m._configure=function(S){i=S,m.create=f(),i._configure();var T=o.Long?"toLong":"toNumber";o.merge(m.prototype,{int64:function(){return l.call(this)[T](!1)},uint64:function(){return l.call(this)[T](!0)},sint64:function(){return l.call(this).zzDecode()[T](!1)},fixed64:function(){return v.call(this)[T](!0)},sfixed64:function(){return v.call(this)[T](!1)}})}},593:(t,e,n)=>{t.exports=u;var i=n(1408);(u.prototype=Object.create(i.prototype)).constructor=u;var o=n(9693);function u(d){i.call(this,d)}u._configure=function(){o.Buffer&&(u.prototype._slice=o.Buffer.prototype.slice)},u.prototype.string=function(){var d=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+d,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+d,this.len))},u._configure()},5054:t=>{t.exports={}},5994:(t,e,n)=>{e.Service=n(7948)},7948:(t,e,n)=>{t.exports=o;var i=n(9693);function o(u,d,h){if(typeof u!="function")throw TypeError("rpcImpl must be a function");i.EventEmitter.call(this),this.rpcImpl=u,this.requestDelimited=!!d,this.responseDelimited=!!h}(o.prototype=Object.create(i.EventEmitter.prototype)).constructor=o,o.prototype.rpcCall=function u(d,h,m,p,_){if(!p)throw TypeError("request must be specified");var f=this;if(!_)return i.asPromise(u,f,d,h,m,p);if(f.rpcImpl)try{return f.rpcImpl(d,h[f.requestDelimited?"encodeDelimited":"encode"](p).finish(),(function(l,g){if(l)return f.emit("error",l,d),_(l);if(g!==null){if(!(g instanceof m))try{g=m[f.responseDelimited?"decodeDelimited":"decode"](g)}catch(v){return f.emit("error",v,d),_(v)}return f.emit("data",g,d),_(null,g)}f.end(!0)}))}catch(l){return f.emit("error",l,d),void setTimeout((function(){_(l)}),0)}else setTimeout((function(){_(Error("already ended"))}),0)},o.prototype.end=function(u){return this.rpcImpl&&(u||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},1945:(t,e,n)=>{t.exports=o;var i=n(9693);function o(m,p){this.lo=m>>>0,this.hi=p>>>0}var u=o.zero=new o(0,0);u.toNumber=function(){return 0},u.zzEncode=u.zzDecode=function(){return this},u.length=function(){return 1};var d=o.zeroHash="\0\0\0\0\0\0\0\0";o.fromNumber=function(m){if(m===0)return u;var p=m<0;p&&(m=-m);var _=m>>>0,f=(m-_)/4294967296>>>0;return p&&(f=~f>>>0,_=~_>>>0,++_>4294967295&&(_=0,++f>4294967295&&(f=0))),new o(_,f)},o.from=function(m){if(typeof m=="number")return o.fromNumber(m);if(i.isString(m)){if(!i.Long)return o.fromNumber(parseInt(m,10));m=i.Long.fromString(m)}return m.low||m.high?new o(m.low>>>0,m.high>>>0):u},o.prototype.toNumber=function(m){if(!m&&this.hi>>>31){var p=1+~this.lo>>>0,_=~this.hi>>>0;return p||(_=_+1>>>0),-(p+4294967296*_)}return this.lo+4294967296*this.hi},o.prototype.toLong=function(m){return i.Long?new i.Long(0|this.lo,0|this.hi,!!m):{low:0|this.lo,high:0|this.hi,unsigned:!!m}};var h=String.prototype.charCodeAt;o.fromHash=function(m){return m===d?u:new o((h.call(m,0)|h.call(m,1)<<8|h.call(m,2)<<16|h.call(m,3)<<24)>>>0,(h.call(m,4)|h.call(m,5)<<8|h.call(m,6)<<16|h.call(m,7)<<24)>>>0)},o.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},o.prototype.zzEncode=function(){var m=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^m)>>>0,this.lo=(this.lo<<1^m)>>>0,this},o.prototype.zzDecode=function(){var m=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^m)>>>0,this.hi=(this.hi>>>1^m)>>>0,this},o.prototype.length=function(){var m=this.lo,p=(this.lo>>>28|this.hi<<4)>>>0,_=this.hi>>>24;return _===0?p===0?m<16384?m<128?1:2:m<2097152?3:4:p<16384?p<128?5:6:p<2097152?7:8:_<128?9:10}},9693:function(t,e,n){var i=e;function o(d,h,m){for(var p=Object.keys(h),_=0;_<p.length;++_)d[p[_]]!==void 0&&m||(d[p[_]]=h[p[_]]);return d}function u(d){function h(m,p){if(!(this instanceof h))return new h(m,p);Object.defineProperty(this,"message",{get:function(){return m}}),Error.captureStackTrace?Error.captureStackTrace(this,h):Object.defineProperty(this,"stack",{value:new Error().stack||""}),p&&o(this,p)}return(h.prototype=Object.create(Error.prototype)).constructor=h,Object.defineProperty(h.prototype,"name",{get:function(){return d}}),h.prototype.toString=function(){return this.name+": "+this.message},h}i.asPromise=n(4537),i.base64=n(7419),i.EventEmitter=n(9211),i.float=n(945),i.inquire=n(7199),i.utf8=n(4997),i.pool=n(6662),i.LongBits=n(1945),i.isNode=!!(n.g!==void 0&&n.g&&n.g.process&&n.g.process.versions&&n.g.process.versions.node),i.global=i.isNode&&n.g||typeof window<"u"&&window||typeof self<"u"&&self||this,i.emptyArray=Object.freeze?Object.freeze([]):[],i.emptyObject=Object.freeze?Object.freeze({}):{},i.isInteger=Number.isInteger||function(d){return typeof d=="number"&&isFinite(d)&&Math.floor(d)===d},i.isString=function(d){return typeof d=="string"||d instanceof String},i.isObject=function(d){return d&&typeof d=="object"},i.isset=i.isSet=function(d,h){var m=d[h];return!(m==null||!d.hasOwnProperty(h))&&(typeof m!="object"||(Array.isArray(m)?m.length:Object.keys(m).length)>0)},i.Buffer=(function(){try{var d=i.inquire("buffer").Buffer;return d.prototype.utf8Write?d:null}catch{return null}})(),i._Buffer_from=null,i._Buffer_allocUnsafe=null,i.newBuffer=function(d){return typeof d=="number"?i.Buffer?i._Buffer_allocUnsafe(d):new i.Array(d):i.Buffer?i._Buffer_from(d):typeof Uint8Array>"u"?d:new Uint8Array(d)},i.Array=typeof Uint8Array<"u"?Uint8Array:Array,i.Long=i.global.dcodeIO&&i.global.dcodeIO.Long||i.global.Long||i.inquire("long"),i.key2Re=/^true|false|0|1$/,i.key32Re=/^-?(?:0|[1-9][0-9]*)$/,i.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,i.longToHash=function(d){return d?i.LongBits.from(d).toHash():i.LongBits.zeroHash},i.longFromHash=function(d,h){var m=i.LongBits.fromHash(d);return i.Long?i.Long.fromBits(m.lo,m.hi,h):m.toNumber(!!h)},i.merge=o,i.lcFirst=function(d){return d.charAt(0).toLowerCase()+d.substring(1)},i.newError=u,i.ProtocolError=u("ProtocolError"),i.oneOfGetter=function(d){for(var h={},m=0;m<d.length;++m)h[d[m]]=1;return function(){for(var p=Object.keys(this),_=p.length-1;_>-1;--_)if(h[p[_]]===1&&this[p[_]]!==void 0&&this[p[_]]!==null)return p[_]}},i.oneOfSetter=function(d){return function(h){for(var m=0;m<d.length;++m)d[m]!==h&&delete this[d[m]]}},i.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},i._configure=function(){var d=i.Buffer;d?(i._Buffer_from=d.from!==Uint8Array.from&&d.from||function(h,m){return new d(h,m)},i._Buffer_allocUnsafe=d.allocUnsafe||function(h){return new d(h)}):i._Buffer_from=i._Buffer_allocUnsafe=null}},1173:(t,e,n)=>{t.exports=f;var i,o=n(9693),u=o.LongBits,d=o.base64,h=o.utf8;function m(O,R,M){this.fn=O,this.len=R,this.next=void 0,this.val=M}function p(){}function _(O){this.head=O.head,this.tail=O.tail,this.len=O.len,this.next=O.states}function f(){this.len=0,this.head=new m(p,0,0),this.tail=this.head,this.states=null}var l=function(){return o.Buffer?function(){return(f.create=function(){return new i})()}:function(){return new f}};function g(O,R,M){R[M]=255&O}function v(O,R){this.len=O,this.next=void 0,this.val=R}function S(O,R,M){for(;O.hi;)R[M++]=127&O.lo|128,O.lo=(O.lo>>>7|O.hi<<25)>>>0,O.hi>>>=7;for(;O.lo>127;)R[M++]=127&O.lo|128,O.lo=O.lo>>>7;R[M++]=O.lo}function T(O,R,M){R[M]=255&O,R[M+1]=O>>>8&255,R[M+2]=O>>>16&255,R[M+3]=O>>>24}f.create=l(),f.alloc=function(O){return new o.Array(O)},o.Array!==Array&&(f.alloc=o.pool(f.alloc,o.Array.prototype.subarray)),f.prototype._push=function(O,R,M){return this.tail=this.tail.next=new m(O,R,M),this.len+=R,this},v.prototype=Object.create(m.prototype),v.prototype.fn=function(O,R,M){for(;O>127;)R[M++]=127&O|128,O>>>=7;R[M]=O},f.prototype.uint32=function(O){return this.len+=(this.tail=this.tail.next=new v((O>>>=0)<128?1:O<16384?2:O<2097152?3:O<268435456?4:5,O)).len,this},f.prototype.int32=function(O){return O<0?this._push(S,10,u.fromNumber(O)):this.uint32(O)},f.prototype.sint32=function(O){return this.uint32((O<<1^O>>31)>>>0)},f.prototype.uint64=function(O){var R=u.from(O);return this._push(S,R.length(),R)},f.prototype.int64=f.prototype.uint64,f.prototype.sint64=function(O){var R=u.from(O).zzEncode();return this._push(S,R.length(),R)},f.prototype.bool=function(O){return this._push(g,1,O?1:0)},f.prototype.fixed32=function(O){return this._push(T,4,O>>>0)},f.prototype.sfixed32=f.prototype.fixed32,f.prototype.fixed64=function(O){var R=u.from(O);return this._push(T,4,R.lo)._push(T,4,R.hi)},f.prototype.sfixed64=f.prototype.fixed64,f.prototype.float=function(O){return this._push(o.float.writeFloatLE,4,O)},f.prototype.double=function(O){return this._push(o.float.writeDoubleLE,8,O)};var E=o.Array.prototype.set?function(O,R,M){R.set(O,M)}:function(O,R,M){for(var C=0;C<O.length;++C)R[M+C]=O[C]};f.prototype.bytes=function(O){var R=O.length>>>0;if(!R)return this._push(g,1,0);if(o.isString(O)){var M=f.alloc(R=d.length(O));d.decode(O,M,0),O=M}return this.uint32(R)._push(E,R,O)},f.prototype.string=function(O){var R=h.length(O);return R?this.uint32(R)._push(h.write,R,O):this._push(g,1,0)},f.prototype.fork=function(){return this.states=new _(this),this.head=this.tail=new m(p,0,0),this.len=0,this},f.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new m(p,0,0),this.len=0),this},f.prototype.ldelim=function(){var O=this.head,R=this.tail,M=this.len;return this.reset().uint32(M),M&&(this.tail.next=O.next,this.tail=R,this.len+=M),this},f.prototype.finish=function(){for(var O=this.head.next,R=this.constructor.alloc(this.len),M=0;O;)O.fn(O.val,R,M),M+=O.len,O=O.next;return R},f._configure=function(O){i=O,f.create=l(),i._configure()}},3155:(t,e,n)=>{t.exports=u;var i=n(1173);(u.prototype=Object.create(i.prototype)).constructor=u;var o=n(9693);function u(){i.call(this)}function d(h,m,p){h.length<40?o.utf8.write(h,m,p):m.utf8Write?m.utf8Write(h,p):m.write(h,p)}u._configure=function(){u.alloc=o._Buffer_allocUnsafe,u.writeBytesBuffer=o.Buffer&&o.Buffer.prototype instanceof Uint8Array&&o.Buffer.prototype.set.name==="set"?function(h,m,p){m.set(h,p)}:function(h,m,p){if(h.copy)h.copy(m,p,0,h.length);else for(var _=0;_<h.length;)m[p++]=h[_++]}},u.prototype.bytes=function(h){o.isString(h)&&(h=o._Buffer_from(h,"base64"));var m=h.length>>>0;return this.uint32(m),m&&this._push(u.writeBytesBuffer,m,h),this},u.prototype.string=function(h){var m=o.Buffer.byteLength(h);return this.uint32(m),m&&this._push(d,m,h),this},u._configure()},7714:(t,e,n)=>{e.R=void 0;const i=n(6919),o=n(7448);e.R=new class{async init(){}async createSessionHandler(u,d){const h=new i.Session(d);return await h.loadModel(u),new o.OnnxjsSessionHandler(h)}}},4200:(t,e,n)=>{e.c8=e.rX=void 0;const i=n(1670),o=n(5381),u=n(2157),d=n(2306);e.rX=()=>{if((typeof i.env.wasm.initTimeout!="number"||i.env.wasm.initTimeout<0)&&(i.env.wasm.initTimeout=0),typeof i.env.wasm.simd!="boolean"&&(i.env.wasm.simd=!0),typeof i.env.wasm.proxy!="boolean"&&(i.env.wasm.proxy=!1),typeof i.env.wasm.numThreads!="number"||!Number.isInteger(i.env.wasm.numThreads)||i.env.wasm.numThreads<=0){const h=typeof navigator>"u"?(0,o.cpus)().length:navigator.hardwareConcurrency;i.env.wasm.numThreads=Math.min(4,Math.ceil((h||1)/2))}},e.c8=new class{async init(){(0,e.rX)(),await(0,u.initWasm)()}async createSessionHandler(h,m){const p=new d.OnnxruntimeWebAssemblySessionHandler;return await p.loadModel(h,m),Promise.resolve(p)}}},6018:function(t,e,n){var i=this&&this.__createBinding||(Object.create?function(d,h,m,p){p===void 0&&(p=m);var _=Object.getOwnPropertyDescriptor(h,m);_&&!("get"in _?!h.__esModule:_.writable||_.configurable)||(_={enumerable:!0,get:function(){return h[m]}}),Object.defineProperty(d,p,_)}:function(d,h,m,p){p===void 0&&(p=m),d[p]=h[m]}),o=this&&this.__exportStar||function(d,h){for(var m in d)m==="default"||Object.prototype.hasOwnProperty.call(h,m)||i(h,d,m)};Object.defineProperty(e,"__esModule",{value:!0}),o(n(1670),e);const u=n(1670);{const d=n(7714).R;(0,u.registerBackend)("webgl",d,-10)}{const d=n(4200).c8;(0,u.registerBackend)("cpu",d,10),(0,u.registerBackend)("wasm",d,10),(0,u.registerBackend)("xnnpack",d,9)}},246:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createAttributeWithCacheKey=void 0;class n{constructor(o){Object.assign(this,o)}get cacheKey(){return this._cacheKey||(this._cacheKey=Object.getOwnPropertyNames(this).sort().map((o=>`${this[o]}`)).join(";")),this._cacheKey}}e.createAttributeWithCacheKey=i=>new n(i)},7778:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Attribute=void 0;const i=n(1446),o=n(9395),u=n(9162),d=n(2517);var h=o.onnxruntime.experimental.fbs;class m{constructor(_){if(this._attributes=new Map,_!=null){for(const f of _)f instanceof i.onnx.AttributeProto?this._attributes.set(f.name,[m.getValue(f),m.getType(f)]):f instanceof h.Attribute&&this._attributes.set(f.name(),[m.getValue(f),m.getType(f)]);if(this._attributes.size<_.length)throw new Error("duplicated attribute names")}}set(_,f,l){this._attributes.set(_,[l,f])}delete(_){this._attributes.delete(_)}getFloat(_,f){return this.get(_,"float",f)}getInt(_,f){return this.get(_,"int",f)}getString(_,f){return this.get(_,"string",f)}getTensor(_,f){return this.get(_,"tensor",f)}getFloats(_,f){return this.get(_,"floats",f)}getInts(_,f){return this.get(_,"ints",f)}getStrings(_,f){return this.get(_,"strings",f)}getTensors(_,f){return this.get(_,"tensors",f)}get(_,f,l){const g=this._attributes.get(_);if(g===void 0){if(l!==void 0)return l;throw new Error(`required attribute not found: ${_}`)}if(g[1]!==f)throw new Error(`type mismatch: expected ${f} but got ${g[1]}`);return g[0]}static getType(_){const f=_ instanceof i.onnx.AttributeProto?_.type:_.type();switch(f){case i.onnx.AttributeProto.AttributeType.FLOAT:return"float";case i.onnx.AttributeProto.AttributeType.INT:return"int";case i.onnx.AttributeProto.AttributeType.STRING:return"string";case i.onnx.AttributeProto.AttributeType.TENSOR:return"tensor";case i.onnx.AttributeProto.AttributeType.FLOATS:return"floats";case i.onnx.AttributeProto.AttributeType.INTS:return"ints";case i.onnx.AttributeProto.AttributeType.STRINGS:return"strings";case i.onnx.AttributeProto.AttributeType.TENSORS:return"tensors";default:throw new Error(`attribute type is not supported yet: ${i.onnx.AttributeProto.AttributeType[f]}`)}}static getValue(_){const f=_ instanceof i.onnx.AttributeProto?_.type:_.type();if(f===i.onnx.AttributeProto.AttributeType.GRAPH||f===i.onnx.AttributeProto.AttributeType.GRAPHS)throw new Error("graph attribute is not supported yet");const l=this.getValueNoCheck(_);if(f===i.onnx.AttributeProto.AttributeType.INT&&d.LongUtil.isLong(l))return d.LongUtil.longToNumber(l);if(f===i.onnx.AttributeProto.AttributeType.INTS){const g=l,v=new Array(g.length);for(let S=0;S<g.length;S++){const T=g[S];v[S]=d.LongUtil.longToNumber(T)}return v}if(f===i.onnx.AttributeProto.AttributeType.TENSOR)return _ instanceof i.onnx.AttributeProto?u.Tensor.fromProto(l):u.Tensor.fromOrtTensor(l);if(f===i.onnx.AttributeProto.AttributeType.TENSORS){if(_ instanceof i.onnx.AttributeProto)return l.map((g=>u.Tensor.fromProto(g)));if(_ instanceof h.Attribute)return l.map((g=>u.Tensor.fromOrtTensor(g)))}if(f===i.onnx.AttributeProto.AttributeType.STRING&&_ instanceof i.onnx.AttributeProto){const g=l;return(0,d.decodeUtf8String)(g)}return f===i.onnx.AttributeProto.AttributeType.STRINGS&&_ instanceof i.onnx.AttributeProto?l.map(d.decodeUtf8String):l}static getValueNoCheck(_){return _ instanceof i.onnx.AttributeProto?this.getValueNoCheckFromOnnxFormat(_):this.getValueNoCheckFromOrtFormat(_)}static getValueNoCheckFromOnnxFormat(_){switch(_.type){case i.onnx.AttributeProto.AttributeType.FLOAT:return _.f;case i.onnx.AttributeProto.AttributeType.INT:return _.i;case i.onnx.AttributeProto.AttributeType.STRING:return _.s;case i.onnx.AttributeProto.AttributeType.TENSOR:return _.t;case i.onnx.AttributeProto.AttributeType.GRAPH:return _.g;case i.onnx.AttributeProto.AttributeType.FLOATS:return _.floats;case i.onnx.AttributeProto.AttributeType.INTS:return _.ints;case i.onnx.AttributeProto.AttributeType.STRINGS:return _.strings;case i.onnx.AttributeProto.AttributeType.TENSORS:return _.tensors;case i.onnx.AttributeProto.AttributeType.GRAPHS:return _.graphs;default:throw new Error(`unsupported attribute type: ${i.onnx.AttributeProto.AttributeType[_.type]}`)}}static getValueNoCheckFromOrtFormat(_){switch(_.type()){case h.AttributeType.FLOAT:return _.f();case h.AttributeType.INT:return _.i();case h.AttributeType.STRING:return _.s();case h.AttributeType.TENSOR:return _.t();case h.AttributeType.GRAPH:return _.g();case h.AttributeType.FLOATS:return _.floatsArray();case h.AttributeType.INTS:{const f=[];for(let l=0;l<_.intsLength();l++)f.push(_.ints(l));return f}case h.AttributeType.STRINGS:{const f=[];for(let l=0;l<_.stringsLength();l++)f.push(_.strings(l));return f}case h.AttributeType.TENSORS:{const f=[];for(let l=0;l<_.tensorsLength();l++)f.push(_.tensors(l));return f}default:throw new Error(`unsupported attribute type: ${h.AttributeType[_.type()]}`)}}}e.Attribute=m},7091:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.resolveBackend=e.backend=void 0;const i=n(5038),o=new Map;async function u(d){const h=e.backend;if(h[d]!==void 0&&(function(m){const p=m;return"initialize"in p&&typeof p.initialize=="function"&&"createSessionHandler"in p&&typeof p.createSessionHandler=="function"&&"dispose"in p&&typeof p.dispose=="function"})(h[d])){const m=h[d];let p=m.initialize();if(typeof p=="object"&&"then"in p&&(p=await p),p)return o.set(d,m),m}}e.backend={webgl:new i.WebGLBackend},e.resolveBackend=async function d(h){if(!h)return d(["webgl"]);{const m=typeof h=="string"?[h]:h;for(const p of m){const _=o.get(p);if(_)return _;const f=await u(p);if(f)return f}}throw new Error("no available backend to use")}},5038:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLBackend=void 0;const i=n(1670),o=n(6231),u=n(6416),d=n(7305);e.WebGLBackend=class{get contextId(){return i.env.webgl.contextId}set contextId(h){i.env.webgl.contextId=h}get matmulMaxBatchSize(){return i.env.webgl.matmulMaxBatchSize}set matmulMaxBatchSize(h){i.env.webgl.matmulMaxBatchSize=h}get textureCacheMode(){return i.env.webgl.textureCacheMode}set textureCacheMode(h){i.env.webgl.textureCacheMode=h}get pack(){return i.env.webgl.pack}set pack(h){i.env.webgl.pack=h}get async(){return i.env.webgl.async}set async(h){i.env.webgl.async=h}initialize(){try{return this.glContext=(0,d.createWebGLContext)(this.contextId),typeof this.matmulMaxBatchSize!="number"&&(this.matmulMaxBatchSize=16),typeof this.textureCacheMode!="string"&&(this.textureCacheMode="full"),typeof this.pack!="boolean"&&(this.pack=!1),typeof this.async!="boolean"&&(this.async=!1),o.Logger.setWithEnv(i.env),o.Logger.verbose("WebGLBackend",`Created WebGLContext: ${typeof this.glContext} with matmulMaxBatchSize: ${this.matmulMaxBatchSize}; textureCacheMode: ${this.textureCacheMode}; pack: ${this.pack}; async: ${this.async}.`),!0}catch(h){return o.Logger.warning("WebGLBackend",`Unable to initialize WebGLBackend. ${h}`),!1}}createSessionHandler(h){return new u.WebGLSessionHandler(this,h)}dispose(){this.glContext.dispose()}}},5107:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CoordsGlslLib=void 0;const i=n(2517),o=n(8520),u=n(5060),d=n(7859),h=n(9390);class m extends o.GlslLib{constructor(_){super(_)}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.offsetToCoords()),this.coordsToOffset()),this.toVec()),this.valueFrom()),this.getCommonUtilFuncs()),this.getInputsSamplingSnippets()),this.getOutputSamplingSnippet())}getCustomTypes(){return{}}offsetToCoords(){return{offsetToCoords:new o.GlslLibRoutine(`
      vec2 offsetToCoords(int offset, int width, int height) {
        int t = offset / width;
        int s = offset - t*width;
        vec2 coords = (vec2(s,t) + vec2(0.5,0.5)) / vec2(width, height);
        return coords;
      }
      `)}}coordsToOffset(){return{coordsToOffset:new o.GlslLibRoutine(`
      int coordsToOffset(vec2 coords, int width, int height) {
        float s = coords.s * float(width);
        float t = coords.t * float(height);
        int offset = int(t) * width + int(s);
        return offset;
      }
      `)}}getOutputSamplingSnippet(){const _=this.context.outputTextureLayout;return _.isPacked?this.getPackedOutputSamplingSnippet(_):this.getUnpackedOutputSamplingSnippet(_)}getPackedOutputSamplingSnippet(_){const f=_.unpackedShape,l=[_.width,_.height],g={},v="getOutputCoords";switch(f.length){case 0:g[v]=this.getOutputScalarCoords();break;case 1:g[v]=this.getOutputPacked1DCoords(f,l);break;case 2:g[v]=this.getOutputPacked2DCoords(f,l);break;case 3:g[v]=this.getOutputPacked3DCoords(f,l);break;default:g[v]=this.getOutputPackedNDCoords(f,l)}const S=`
      void setOutput(vec4 val) {
        ${(0,u.getGlsl)(this.context.glContext.version).output} = val;
      }
    `;return g.floatTextureSetRGBA=new o.GlslLibRoutine(S),g}getUnpackedOutputSamplingSnippet(_){const f=_.unpackedShape,l=[_.width,_.height],g={},v="getOutputCoords";switch(f.length){case 0:g[v]=this.getOutputScalarCoords();break;case 1:g[v]=this.getOutputUnpacked1DCoords(f,l);break;case 2:g[v]=this.getOutputUnpacked2DCoords(f,l);break;case 3:g[v]=this.getOutputUnpacked3DCoords(f,l);break;case 4:g[v]=this.getOutputUnpacked4DCoords(f,l);break;case 5:g[v]=this.getOutputUnpacked5DCoords(f,l);break;case 6:g[v]=this.getOutputUnpacked6DCoords(f,l);break;default:throw new Error(`Unsupported output dimensionality: ${f.length}`)}const S=`
        void setOutput(float val) {
          ${(0,u.getGlsl)(this.context.glContext.version).output} = vec4(val, 0, 0, 0);
        }
    `;return g.floatTextureSetR=new o.GlslLibRoutine(S),g}getOutputScalarCoords(){return new o.GlslLibRoutine(`
      int getOutputCoords() {
        return 0;
      }
    `)}getOutputPacked1DCoords(_,f){const l=f;let g="";return l[0]===1?(g=`
          int getOutputCoords() {
            return 2 * int(TexCoords.y * ${l[1]}.0);
          }
        `,new o.GlslLibRoutine(g)):l[1]===1?(g=`
          int getOutputCoords() {
            return 2 * int(TexCoords.x * ${l[0]}.0);
          }
        `,new o.GlslLibRoutine(g)):(g=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                 vec2(${l[0]}, ${l[1]}));
          return 2 * (resTexRC.y * ${l[0]} + resTexRC.x);
        }
      `,new o.GlslLibRoutine(g))}getOutputPacked2DCoords(_,f){let l="";if(i.ArrayUtil.arraysEqual(_,f))return l=`
        ivec2 getOutputCoords() {
          return 2 * ivec2(TexCoords.xy * vec2(${f[0]}, ${f[1]}));
        }
      `,new o.GlslLibRoutine(l);const g=f,v=Math.ceil(_[1]/2);return l=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${g[0]}, ${g[1]}));

          int index = resTexRC.y * ${g[0]} + resTexRC.x;

          // reverse r and c order for packed texture
          int r = imod(index, ${v}) * 2;
          int c = 2 * (index / ${v});

          return ivec2(r, c);
        }
      `,new o.GlslLibRoutine(l)}getOutputPacked3DCoords(_,f){const l=[f[0],f[1]],g=Math.ceil(_[2]/2),v=g*Math.ceil(_[1]/2),S=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${l[0]}, ${l[1]}));
          int index = resTexRC.y * ${l[0]} + resTexRC.x;

          int b = index / ${v};
          index -= b * ${v};

          // reverse r and c order for packed texture
          int r = imod(index, ${g}) * 2;
          int c = 2 * (index / ${g});

          return ivec3(b, r, c);
        }
      `;return new o.GlslLibRoutine(S)}getOutputPackedNDCoords(_,f){const l=[f[0],f[1]],g=Math.ceil(_[_.length-1]/2),v=g*Math.ceil(_[_.length-2]/2);let S=v,T="",E="b, r, c";for(let R=2;R<_.length-1;R++)S*=_[_.length-R-1],T=`
      int b${R} = index / ${S};
      index -= b${R} * ${S};
    `+T,E=`b${R}, `+E;const O=`
      ivec${_.length} getOutputCoords() {
        ivec2 resTexRC = ivec2(TexCoords.xy *
                              vec2(${l[0]}, ${l[1]}));
        int index = resTexRC.y * ${l[0]} + resTexRC.x;

        ${T}

        int b = index / ${v};
        index -= b * ${v};

        // reverse r and c order for packed texture
        int r = imod(index, ${g}) * 2;
        int c = 2 * (index / ${g});

        return ivec${_.length}(${E});
      }
    `;return new o.GlslLibRoutine(O)}getOutputUnpacked1DCoords(_,f){const l=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${f[0]}, ${f[1]}));
          return resTexRC.y * ${f[0]} + resTexRC.x;
        }
      `;return new o.GlslLibRoutine(l)}getOutputUnpacked2DCoords(_,f){const l=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${f[0]}, ${f[1]}));
          int index = resTexRC.y * ${f[0]} + resTexRC.x;
          int r = index / ${_[1]};
          int c = index - r * ${_[1]};
          return ivec2(r, c);
        }
      `;return new o.GlslLibRoutine(l)}getOutputUnpacked3DCoords(_,f){let l="";const g=_.length;let v=null;g<2&&(v=[]),v=new Array(g-1),v[g-2]=_[g-1];for(let E=g-3;E>=0;--E)v[E]=v[E+1]*_[E+1];const S=["r","c","d"],T=v.map(((E,O)=>`int ${S[O]} = index / ${E}; ${O===v.length-1?`int ${S[O+1]} = index - ${S[O]} * ${E}`:`index -= ${S[O]} * ${E}`};`)).join("");return l=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${f[0]}, ${f[1]}));
          int index = resTexRC.y * ${f[0]} + resTexRC.x;
          ${T}
          return ivec3(r, c, d);
        }
      `,new o.GlslLibRoutine(l)}getOutputUnpacked4DCoords(_,f){let l="";const g=_.length;let v=null;g<2&&(v=[]),v=new Array(g-1),v[g-2]=_[g-1];for(let E=g-3;E>=0;--E)v[E]=v[E+1]*_[E+1];const S=["r","c","d","d2"],T=v.map(((E,O)=>`int ${S[O]} = index / ${E}; ${O===v.length-1?`int ${S[O+1]} = index - ${S[O]} * ${E}`:`index -= ${S[O]} * ${E}`};`)).join("");return l=`
      ivec4 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${f[0]}, ${f[1]}));
          int index = resTexRC.y * ${f[0]} + resTexRC.x;
          ${T}
          return ivec4(r, c, d, d2);
        }
      `,new o.GlslLibRoutine(l)}getOutputUnpacked5DCoords(_,f){let l="";const g=_.length;let v=null;g<2&&(v=[]),v=new Array(g-1),v[g-2]=_[g-1];for(let E=g-3;E>=0;--E)v[E]=v[E+1]*_[E+1];const S=["r","c","d","d2","d3"],T=v.map(((E,O)=>`int ${S[O]} = index / ${E}; ${O===v.length-1?`int ${S[O+1]} = index - ${S[O]} * ${E}`:`index -= ${S[O]} * ${E}`};`)).join("");return l=`
      ivec5 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${f[0]}, ${f[1]}));
          int index = resTexRC.y * ${f[0]} + resTexRC.x;
          ${T}
          return ivec5(r, c, d, d2, d3);
        }
      `,new o.GlslLibRoutine(l)}getOutputUnpacked6DCoords(_,f){let l="";const g=_.length;let v=null;g<2&&(v=[]),v=new Array(g-1),v[g-2]=_[g-1];for(let E=g-3;E>=0;--E)v[E]=v[E+1]*_[E+1];const S=["r","c","d","d2","d3","d4"],T=v.map(((E,O)=>`int ${S[O]} = index / ${E}; ${O===v.length-1?`int ${S[O+1]} = index - ${S[O]} * ${E}`:`index -= ${S[O]} * ${E}`};`)).join("");return l=`
     ivec6 getOutputCoords() {
         ivec2 resTexRC = ivec2(TexCoords.xy *
                               vec2(${f[0]}, ${f[1]}));
         int index = resTexRC.y * ${f[0]} + resTexRC.x;
         ${T}
         return ivec6(r, c, d, d2, d3, d4);
       }
     `,new o.GlslLibRoutine(l)}getCommonUtilFuncs(){const _={};let f="uvFromFlat";_[f]=new o.GlslLibRoutine(`
    vec2 uvFromFlat(int texNumR, int texNumC, int index) {
      int texC = index / texNumR;
      int texR = index - texC * texNumR;
      // TODO: swap texR, texC order in following function so row is corresponding to u and column is corresponding to
      //       v.
      return (vec2(texR, texC) + halfCR) / vec2(texNumR, texNumC);
    }
    `),f="packedUVfrom1D",_[f]=new o.GlslLibRoutine(`
      vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
        int texelIndex = index / 2;
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),f="packedUVfrom2D",_[f]=new o.GlslLibRoutine(`
      vec2 packedUVfrom2D(int texNumR, int texNumC, int texelsInLogicalRow, int row, int col) {
        int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),f="packedUVfrom3D",_[f]=new o.GlslLibRoutine(`
      vec2 packedUVfrom3D(int texNumR, int texNumC,
          int texelsInBatch, int texelsInLogicalRow, int b,
          int row, int col) {
        int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = index / texNumC;
        int texC = index - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),f="sampleTexture";const l=(0,u.getGlsl)(this.context.glContext.version);return _[f]=new o.GlslLibRoutine(`
        float sampleTexture(sampler2D textureSampler, vec2 uv) {
            return ${l.texture2D}(textureSampler, uv).r;
        }`),_}getInputsSamplingSnippets(){const _={},f=this.context.outputTextureLayout;return this.context.programInfo.inputNames.forEach(((l,g)=>{const v=this.context.inputTextureLayouts[g],S=(0,h.generateShaderFuncNameFromInputSamplerName)(l);v.isPacked?_[S]=this.getPackedSamplerFromInput(S,l,v):_[S]=this.getUnpackedSamplerFromInput(S,l,v);const T=(0,h.generateShaderFuncNameFromInputSamplerNameAtOutCoords)(l);v.unpackedShape.length<=f.unpackedShape.length&&(v.isPacked?_[T]=this.getPackedSamplerAtOutputCoords(T,v,f,l):_[T]=this.getUnpackedSamplerAtOutputCoords(T,v,f,l))})),_}getPackedSamplerAtOutputCoords(_,f,l,g){const v=f.unpackedShape,S=l.unpackedShape,T=g,E=(0,h.generateShaderFuncNameFromInputSamplerName)(T),O=v.length,R=S.length,M=i.BroadcastUtil.getBroadcastDims(v,S),C=(0,h.getCoordsDataType)(R),j=R-O;let $;const L=(0,h.getGlChannels)();$=O===0?"":R<2&&M.length>=1?"coords = 0;":M.map((K=>`coords.${L[K+j]} = 0;`)).join(`
`);let N="";N=R<2&&O>0?"coords":v.map(((K,z)=>`coords.${L[z+j]}`)).join(", ");let B="return outputValue;";const U=i.ShapeUtil.size(v)===1,H=i.ShapeUtil.size(S)===1;if(O!==1||U||H){if(U&&!H)B=R===1?`
          return vec4(outputValue.x, outputValue.x, 0., 0.);
        `:`
          return vec4(outputValue.x);
        `;else if(M.length){const K=O-2,z=O-1;M.indexOf(K)>-1&&M.indexOf(z)>-1?B="return vec4(outputValue.x);":M.indexOf(K)>-1?B="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":M.indexOf(z)>-1&&(B="return vec4(outputValue.xx, outputValue.zz);")}}else B=`
        return vec4(outputValue.xy, outputValue.xy);
      `;const Y=`
      vec4 ${_}() {
        ${C} coords = getOutputCoords();
        
        int lastDim = coords.${L[R-1]};
        coords.${L[R-1]} = coords.${L[R-2]};
        coords.${L[R-2]} = lastDim;
      
        ${$}
        vec4 outputValue = ${E}(${N});
        ${B}
      }
    `;return new o.GlslLibRoutine(Y,["coordinates.getOutputCoords"])}getUnpackedSamplerAtOutputCoords(_,f,l,g){const v=[l.width,l.height],S=[f.width,f.height],T=f.unpackedShape.length,E=l.unpackedShape.length,O=f.unpackedShape,R=l.unpackedShape,M=(0,h.generateShaderFuncNameFromInputSamplerName)(g);if(T===E&&i.ArrayUtil.arraysEqual(S,v)){const H=`
          float ${_}() {
            return sampleTexture(${g}, TexCoords);
          }
        `;return new o.GlslLibRoutine(H,["coordinates.sampleTexture"])}const C=(0,h.getCoordsDataType)(E),j=i.BroadcastUtil.getBroadcastDims(O,R),$=E-T;let L;const N=(0,h.getGlChannels)();L=T===0?"":E<2&&j.length>=1?"coords = 0;":j.map((H=>`coords.${N[H+$]} = 0;`)).join(`
`);let B="";B=E<2&&T>0?"coords":f.unpackedShape.map(((H,Y)=>`coords.${N[Y+$]}`)).join(", ");const U=`
        float ${_}() {
          ${C} coords = getOutputCoords();
          ${L}
          return ${M}(${B});
        }
      `;return new o.GlslLibRoutine(U,["coordinates.getOutputCoords"])}getPackedSamplerFromInput(_,f,l){switch(l.unpackedShape.length){case 0:return this.getPackedSamplerScalar(_,f);case 1:return this.getPackedSampler1D(_,f,l);case 2:return this.getPackedSampler2D(_,f,l);case 3:return this.getPackedSampler3D(_,f,l);default:return this.getPackedSamplerND(_,f,l)}}getUnpackedSamplerFromInput(_,f,l){const g=l.unpackedShape;switch(g.length){case 0:return this.getUnpackedSamplerScalar(_,f,l);case 1:return this.getUnpackedSampler1D(_,f,l);case 2:return this.getUnpackedSampler2D(_,f,l);case 3:return this.getUnpackedSampler3D(_,f,l);case 4:return this.getUnpackedSampler4D(_,f,l);case 5:return this.getUnpackedSampler5D(_,f,l);case 6:return this.getUnpackedSampler6D(_,f,l);default:throw new Error(`Unsupported dimension ${g.length}-D`)}}getPackedSamplerScalar(_,f){const l=`
          vec4 ${_}() {
            return ${(0,u.getGlsl)(this.context.glContext.version).texture2D}(${f}, halfCR);
          }
        `;return new o.GlslLibRoutine(l)}getPackedSampler1D(_,f,l){const g=[l.width,l.height],v=[g[1],g[0]],S=(0,u.getGlsl)(this.context.glContext.version),T=`vec4 ${_}(int index) {
      vec2 uv = packedUVfrom1D(
      ${v[0]}, ${v[1]}, index);
      return ${S.texture2D}(${f}, uv);
    }`;return new o.GlslLibRoutine(T,["coordinates.packedUVfrom1D"])}getPackedSampler2D(_,f,l){const g=l.unpackedShape,v=[l.width,l.height],S=(0,u.getGlsl)(this.context.glContext.version),T=v[0],E=v[1];if(v!=null&&i.ArrayUtil.arraysEqual(g,v)){const C=`vec4 ${_}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${E}.0, ${T}.0);
        return ${S.texture2D}(${f}, uv);
      }`;return new o.GlslLibRoutine(C)}const O=v,R=Math.ceil(g[1]/2),M=`vec4 ${_}(int row, int col) {
      vec2 uv = packedUVfrom2D(${O[1]}, ${O[0]}, ${R}, row, col);
      return ${S.texture2D}(${f}, uv);
    }`;return new o.GlslLibRoutine(M,["coordinates.packedUVfrom2D"])}getPackedSampler3D(_,f,l){const g=l.unpackedShape,v=[l.width,l.height],S=[v[0],v[1]],T=(0,u.getGlsl)(this.context.glContext.version);if(g[0]===1){const C=g.slice(1),j=[1,2],$=(0,h.squeezeInputShape)(g,C),L=["b","row","col"],N=JSON.parse(JSON.stringify(l));N.unpackedShape=$;const B=this.getPackedSamplerFromInput(_,f,N),U=`${B.routineBody}
      vec4 ${_}(int b, int row, int col) {
        return ${_}(${(0,h.getSqueezedParams)(L,j)});
      } `;return new o.GlslLibRoutine(U,B.dependencies)}const E=S[0],O=S[1],R=Math.ceil(g[2]/2),M=`vec4 ${_}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${O}, ${E}, ${R*Math.ceil(g[1]/2)}, ${R}, b, row, col);
      return ${T.texture2D}(${f}, uv);}`;return new o.GlslLibRoutine(M,["coordinates.packedUVfrom3D"])}getPackedSamplerND(_,f,l){const g=l.unpackedShape,v=g.length,S=[l.width,l.height],T=(0,u.getGlsl)(this.context.glContext.version),E=[S[0],S[1]],O=E[1],R=E[0],M=Math.ceil(g[v-1]/2);let C=M*Math.ceil(g[v-2]/2),j="int b, int row, int col",$=`b * ${C} + (row / 2) * ${M} + (col / 2)`;for(let N=2;N<v-1;N++)j=`int b${N}, `+j,C*=g[v-N-1],$=`b${N} * ${C} + `+$;const L=`vec4 ${_}(${j}) {
      int index = ${$};
      int texR = index / ${R};
      int texC = index - texR * ${R};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${R}, ${O});
      return ${T.texture2D}(${f}, uv);
    }`;return new o.GlslLibRoutine(L)}getUnpackedSamplerScalar(_,f,l){const[g,v]=[l.width,l.height];if(g===1&&v===1){const T=`
          float ${_}() {
            return sampleTexture(${f}, halfCR);
          }
        `;return new o.GlslLibRoutine(T,["coordinates.sampleTexture"])}const S=`
        float ${_}() {
          int offset_${f} = coordsToOffset(TexCoords, ${g}, ${v});
          vec2 uv = uvFromFlat(${g}, ${v}, offset_${f});
          return sampleTexture(${f}, uv);
        }
      `;return new o.GlslLibRoutine(S,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler1D(_,f,l){const g=l.width,v=l.height;if(v===1&&g===1){const T=`
        float ${_}(int index) {
          return sampleTexture(${f}, halfCR);
        }
      `;return new o.GlslLibRoutine(T,["coordinates.sampleTexture"])}if(v===1){const T=`
          float ${_}(int index) {
            vec2 uv = vec2((float(index) + 0.5) / ${g}.0, 0.5);
            return sampleTexture(${f}, uv);
          }
        `;return new o.GlslLibRoutine(T,["coordinates.sampleTexture"])}if(g===1){const T=`
          float ${_}(int index) {
            vec2 uv = vec2(0.5, (float(index) + 0.5) / ${v}.0);
            return sampleTexture(${f}, uv);
          }
        `;return new o.GlslLibRoutine(T,["coordinates.sampleTexture"])}const S=`
        float ${_}(int index) {
          vec2 uv = uvFromFlat(${g}, ${v}, index);
          return sampleTexture(${f}, uv);
        }
      `;return new o.GlslLibRoutine(S,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler2D(_,f,l){const g=l.unpackedShape,v=[l.height,l.width];if(v!=null&&i.ArrayUtil.arraysEqual(g,v)){const C=`
          float ${_}(int row, int col) {
            vec2 uv = (vec2(row, col) + halfCR) / vec2(${v[1]}.0, ${v[0]}.0);
            return sampleTexture(${f}, uv);
          }
        `;return new o.GlslLibRoutine(C,["coordinates.sampleTexture"])}const{newShape:S,keptDims:T}=(0,d.squeezeShape)(g),E=S;if(E.length<g.length){const C=(0,h.squeezeInputShape)(g,E),j=JSON.parse(JSON.stringify(l));j.unpackedShape=C;const $=["col","row"],L=`
          ${this.getUnpackedSamplerFromInput(_,f,j).routineBody}
          float ${_}(int row, int col) {
            return ${_}(${(0,h.getSqueezedParams)($,T)});
          }
        `;return new o.GlslLibRoutine(L,["coordinates.sampleTexture"])}const O=v[1],R=v[0];if(R===1){const C=`
          float ${_}(int row, int col) {
            int offset_${f} = coordsToOffset(TexCoords, ${O}, ${R});
            float index = dot(vec3(row, col, offset_${f}), vec3(${g[1]}, 1, 1));
            vec2 uv = vec2(0.5, (index + 0.5) / ${O}.0);
            return sampleTexture(${f}, uv);
          }
        `;return new o.GlslLibRoutine(C,["coordinates.sampleTexture","coordinates.coordsToOffset"])}if(O===1){const C=`
          float ${_}(int row, int col) {
            int offset_${f} = coordsToOffset(TexCoords, ${O}, ${R});
            float index = dot(vec3(row, col, offset_${f}), vec3(${g[1]}, 1, 1));
            vec2 uv = vec2((index + 0.5) / ${R}.0, 0.5);
            return sampleTexture(${f}, uv);
          }
        `;return new o.GlslLibRoutine(C,["coordinates.sampleTexture","coordinates.coordsToOffset"])}const M=`
        float ${_}(int row, int col) {
          int index = col * ${g[1]} + row;
          vec2 uv = uvFromFlat(${O}, ${R}, index);
          return sampleTexture(${f}, uv);
        }
      `;return new o.GlslLibRoutine(M,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler3D(_,f,l){const g=l.unpackedShape,v=g[1]*g[2],S=g[2],{newShape:T,keptDims:E}=(0,d.squeezeShape)(g),O=T;if(O.length<g.length){const M=(0,h.squeezeInputShape)(g,O),C=["batch","col","row"],j=JSON.parse(JSON.stringify(l));j.unpackedShape=M;const $=this.getUnpackedSamplerFromInput(_,f,j),L=E.reverse(),N=`
          ${$.routineBody}
          float ${_}(int batch, int row, int col) {
            return ${_}(${(0,h.getSqueezedParams)(C,L)});
          }
        `;return new o.GlslLibRoutine(N,$.dependencies)}const R=`
          float ${_}(int depth, int row, int col) {
            // Explicitly use integer operations as dot() only works on floats.
            int index = depth * ${v} + col * ${S} + row;
            vec2 uv = uvFromFlat(${l.width}, ${l.height}, index);
            return sampleTexture(${f}, uv);
          }
      `;return new o.GlslLibRoutine(R,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler4D(_,f,l){const g=l.unpackedShape,v=g[3],S=g[2]*v,T=`
        float ${_}(int row, int col, int depth, int depth2) {
          int index = row * ${g[1]*S} + col * ${S} +
              depth2 * ${v} + depth;
          vec2 uv = uvFromFlat(${l.width}, ${l.height}, index);
          return sampleTexture(${f}, uv);
        }
      `;return new o.GlslLibRoutine(T,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler5D(_,f,l){const g=l.unpackedShape,v=g[4],S=g[3]*v,T=g[2]*S,E=g[1]*T,{newShape:O,keptDims:R}=(0,d.squeezeShape)(g);if(O.length<g.length){const C=(0,h.squeezeInputShape)(g,O),j=["row","col","depth","depth2","depth3"],$=JSON.parse(JSON.stringify(l));$.unpackedShape=C;const L=`
          ${this.getUnpackedSamplerFromInput(_,f,$).routineBody}
          float ${_}(int row, int col, int depth, int depth2, int depth3) {
            return ${_}(${(0,h.getSqueezedParams)(j,R)});
          }
        `;return new o.GlslLibRoutine(L,["coordinates.sampleTexture","coordinates.uvFromFlat"])}const M=`
        float ${_}(int row, int col, int depth, int depth2, int depth3) {
          int index = row * ${E} + col * ${T} + depth * ${S} +
          depth3 * ${v} + depth2;
          vec2 uv = uvFromFlat(${l.width}, ${l.height}, index);
          return sampleTexture(${f}, uv);
        }
      `;return new o.GlslLibRoutine(M,["coordinates.sampleTexture","coordinates.uvFromFlat"])}getUnpackedSampler6D(_,f,l){const g=l.unpackedShape,v=g[5],S=g[4]*v,T=g[3]*S,E=g[2]*T,O=g[1]*E,{newShape:R,keptDims:M}=(0,d.squeezeShape)(g);if(R.length<g.length){const j=(0,h.squeezeInputShape)(g,R),$=["row","col","depth","depth2","depth3","depth4"],L=JSON.parse(JSON.stringify(l));L.unpackedShape=j;const N=`
            ${this.getUnpackedSamplerFromInput(_,f,L).routineBody}
            float ${_}(int row, int col, int depth,
              int depth2, int depth3, int depth4) {
              return ${_}(${(0,h.getSqueezedParams)($,M)});
            }
          `;return new o.GlslLibRoutine(N,["coordinates.sampleTexture","coordinates.uvFromFlat"])}const C=`
          float ${_}(int row, int col, int depth,
            int depth2, int depth3, int depth4) {
            int index = row * ${O} + col * ${E} + depth * ${T} +
            depth2 * ${S} + depth3 * ${v} + depth4;
            vec2 uv = uvFromFlat(${l.width}, ${l.height}, index);
            return sampleTexture(${f}, uv);
          }
        `;return new o.GlslLibRoutine(C,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}toVec(){const _=this.context.outputTextureLayout,f=_.shape.length,l=_.strides,g=_.width,v=_.height,S=[];for(let E=0;E<f-1;++E)S.push(`
        c[${E}] = offset / ${l[E]};`),S.push(`
        offset -= c[${E}] * ${l[E]};`);S.push(`
        c[${f-1}] = offset;`);const T=`
      void toVec(vec2 texCoords, out int c[${f}]) {
        int offset = coordsToOffset(texCoords, ${g}, ${v});
        ${S.join("")}
      }
      void toVec(int offset, out int c[${f}]) {
        ${S.join("")}
      }
    `;return{toVec:new o.GlslLibRoutine(T,["coordinates.coordsToOffset"])}}valueFrom(){const _={};return this.context.programInfo.inputNames.forEach(((f,l)=>{const g=this.context.inputTextureLayouts[l],v=(g.unpackedShape.length>0?g.unpackedShape:g.shape).length;let S=`_${f}`;_[S]=new o.GlslLibRoutine(this.getValueFromSingle(f,v,g.width,g.height,!1),[`shapeUtils.indicesToOffset${S}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"]),S+="_T",_[S]=new o.GlslLibRoutine(this.getValueFromSingle(f,v,g.width,g.height,!0),[`shapeUtils.indicesToOffset${S}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"])})),_}getValueFromSingle(_,f,l,g,v){let S=`_${_}`;return v&&(S+="_T"),`
        float ${S}(int m[${f}]) {
          int offset = indicesToOffset${S}(m);
          vec2 coords = offsetToCoords(offset, ${l}, ${g});
          float value = getColorAsFloat(${(0,u.getGlsl)(this.context.glContext.version).texture2D}(${_}, coords));
          return value;
        }
        `}getPackedValueFrom(_,f,l,g,v){let S=`_${_}_Pack`;return v&&(S+="_T"),`
        vec4 ${S}(int m[${f}]) {
          int offset = indicesToOffset_${_}(m);
          vec2 coords = offsetToCoords(offset, ${l}, ${g});
          return ${(0,u.getGlsl)(this.context.glContext.version).texture2D}(${_}, coords);
        }
        `}}e.CoordsGlslLib=m},8520:(t,e)=>{var n;Object.defineProperty(e,"__esModule",{value:!0}),e.TopologicalSortGlslRoutines=e.GlslLibRoutineNode=e.GlslLibRoutine=e.GlslLib=e.GlslContext=e.FunctionType=void 0,(n=e.FunctionType||(e.FunctionType={}))[n.ValueBased=0]="ValueBased",n[n.Positional=1]="Positional",e.GlslContext=class{constructor(i,o,u,d){this.glContext=i,this.programInfo=o,this.inputTextureLayouts=u,this.outputTextureLayout=d}},e.GlslLib=class{constructor(i){this.context=i}},e.GlslLibRoutine=class{constructor(i,o){this.routineBody=i,this.dependencies=o}},e.GlslLibRoutineNode=class{constructor(i,o,u){this.name=i,this.dependencies=u||[],o&&(this.routineBody=o)}addDependency(i){i&&this.dependencies.push(i)}},e.TopologicalSortGlslRoutines=class{static returnOrderedNodes(i){if(!i||i.length===0)return[];if(i.length===1)return i;const o=new Set,u=new Set,d=new Array;return this.createOrderedNodes(i,o,u,d),d}static createOrderedNodes(i,o,u,d){for(let h=0;h<i.length;++h)this.dfsTraverse(i[h],o,u,d)}static dfsTraverse(i,o,u,d){if(!i||u.has(i.name))return;if(o.has(i.name))throw new Error("Cyclic dependency detected. Can't topologically sort routines needed for shader.");o.add(i.name);const h=i.dependencies;if(h&&h.length>0)for(let m=0;m<h.length;++m)this.dfsTraverse(h[m],o,u,d);d.push(i),u.add(i.name),o.delete(i.name)}}},7341:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.EncodingGlslLib=void 0;const i=n(8520);class o extends i.GlslLib{constructor(d){super(d)}getFunctions(){return Object.assign(Object.assign({},this.encodeFloat32()),this.decodeFloat32())}getCustomTypes(){return{}}encodeFloat32(){return{encode:new i.GlslLibRoutine(`highp vec4 encode(highp float f) {
        return vec4(f, 0.0, 0.0, 0.0);
      }
        `)}}decodeFloat32(){return{decode:new i.GlslLibRoutine(`highp float decode(highp vec4 rgba) {
        return rgba.r;
      }
        `)}}encodeUint8(){const d=o.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{encode:new i.GlslLibRoutine(`
      highp vec4 encode(highp float f) {
        highp float F = abs(f);
        highp float Sign = step(0.0,-f);
        highp float Exponent = floor(log2(F));
        highp float Mantissa = (exp2(- Exponent) * F);
        Exponent = floor(log2(F) + 127.0) + floor(log2(Mantissa));
        highp vec4 rgba;
        rgba[0] = 128.0 * Sign  + floor(Exponent*exp2(-1.0));
        rgba[1] = 128.0 * mod(Exponent,2.0) + mod(floor(Mantissa*128.0),128.0);
        rgba[2] = floor(mod(floor(Mantissa*exp2(23.0 -8.0)),exp2(8.0)));
        rgba[3] = floor(exp2(23.0)*mod(Mantissa,exp2(-15.0)));
        ${d}
        rgba = rgba / 255.0; // values need to be normalized to [0,1]
        return rgba;
    }
        `)}}decodeUint8(){const d=o.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{decode:new i.GlslLibRoutine(`
        highp float decode(highp vec4 rgba) {
          rgba = rgba * 255.0; // values need to be de-normalized from [0,1] to [0,255]
          ${d}
          highp float Sign = 1.0 - step(128.0,rgba[0])*2.0;
          highp float Exponent = 2.0 * mod(rgba[0],128.0) + step(128.0,rgba[1]) - 127.0;
          highp float Mantissa = mod(rgba[1],128.0)*65536.0 + rgba[2]*256.0 +rgba[3] + float(0x800000);
          highp float Result =  Sign * exp2(Exponent) * (Mantissa * exp2(-23.0 ));
          return Result;
      }
        `)}}static isLittleEndian(){const d=new ArrayBuffer(4),h=new Uint32Array(d),m=new Uint8Array(d);if(h[0]=3735928559,m[0]===239)return!0;if(m[0]===222)return!1;throw new Error("unknown endianness")}}e.EncodingGlslLib=o},9894:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FragColorGlslLib=void 0;const i=n(8520),o=n(5060);class u extends i.GlslLib{constructor(h){super(h)}getFunctions(){return Object.assign(Object.assign({},this.setFragColor()),this.getColorAsFloat())}getCustomTypes(){return{}}setFragColor(){const h=(0,o.getGlsl)(this.context.glContext.version);return{setFragColor:new i.GlslLibRoutine(`
        void setFragColor(float value) {
            ${h.output} = encode(value);
        }
        `,["encoding.encode"])}}getColorAsFloat(){return{getColorAsFloat:new i.GlslLibRoutine(`
        float getColorAsFloat(vec4 color) {
            return decode(color);
        }
        `,["encoding.decode"])}}}e.FragColorGlslLib=u},2848:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.replaceInlines=void 0;const n=/@inline[\s\n\r]+(\w+)[\s\n\r]+([0-9a-zA-Z_]+)\s*\(([^)]*)\)\s*{(([^}]|[\n\r])*)}/gm;e.replaceInlines=function(i){const o={};let u;for(;(u=n.exec(i))!==null;){const d=u[3].split(",").map((h=>{const m=h.trim().split(" ");return m&&m.length===2?{type:m[0],name:m[1]}:null})).filter((h=>h!==null));o[u[2]]={params:d,body:u[4]}}for(const d in o){const h="(\\w+)?\\s+([_0-9a-zA-Z]+)\\s+=\\s+__FUNC__\\((.*)\\)\\s*;".replace("__FUNC__",d),m=new RegExp(h,"gm");for(;(u=m.exec(i))!==null;){const p=u[1],_=u[2],f=u[3].split(","),l=p?`${p} ${_};`:"";let g=o[d].body,v="";o[d].params.forEach(((T,E)=>{T&&(v+=`${T.type} ${T.name} = ${f[E]};
`)})),g=`${v}
 ${g}`,g=g.replace("return",`${_} = `);const S=`
      ${l}
      {
        ${g}
      }
      `;i=i.replace(u[0],S)}}return i.replace(n,"")}},8879:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlslPreprocessor=void 0;const i=n(8520),o=n(2848),u=n(5483),d=n(5060);e.GlslPreprocessor=class{constructor(h,m,p,_){this.libs={},this.glslLibRoutineDependencyGraph={},this.context=new i.GlslContext(h,m,p,_),Object.keys(u.glslRegistry).forEach((l=>{const g=new u.glslRegistry[l](this.context);this.libs[l]=g}));const f=this.glslLibRoutineDependencyGraph;for(const l in this.libs){const g=this.libs[l].getFunctions();for(const v in g){const S=l+"."+v;let T;f[S]?(T=f[S],T.routineBody=g[v].routineBody):(T=new i.GlslLibRoutineNode(S,g[v].routineBody),f[S]=T);const E=g[v].dependencies;if(E)for(let O=0;O<E.length;++O)if(f[E[O]])T.addDependency(f[E[O]]);else{const R=new i.GlslLibRoutineNode(E[O]);f[E[O]]=R,T.addDependency(R)}}}}preprocess(){const h=this.context.programInfo;let m=h.shaderSource;return this.context.programInfo.hasMain||(m=`${m}
      ${(0,d.getDefaultFragShaderMain)(this.context.glContext.version,this.context.outputTextureLayout.shape.length)}`),m=(0,o.replaceInlines)(m),`${(0,d.getFragShaderPreamble)(this.context.glContext.version)}
    ${this.getUniforms(h.inputNames,h.variables)}
    ${this.getImports(m)}
    ${m}`}getImports(h){const m=this.selectGlslLibRoutinesToBeIncluded(h);if(m.length===0)return"";let p="";for(let _=0;_<m.length;++_){if(!m[_].routineBody)throw new Error(`Missing body for the Glsl Library routine: ${m[_].name}`);p+=m[_].routineBody+`
`}return p}selectGlslLibRoutinesToBeIncluded(h){const m=[];return Object.keys(this.glslLibRoutineDependencyGraph).forEach((p=>{const _=p.split(".")[1];h.indexOf(_)!==-1&&m.push(this.glslLibRoutineDependencyGraph[p])})),i.TopologicalSortGlslRoutines.returnOrderedNodes(m)}getUniforms(h,m){const p=[];if(h)for(const _ of h)p.push(`uniform sampler2D ${_};`);if(m)for(const _ of m)p.push(`uniform ${_.type} ${_.name}${_.arrayLength?`[${_.arrayLength}]`:""};`);return p.join(`
`)}}},5483:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.glslRegistry=void 0;const i=n(5107),o=n(7341),u=n(9894),d=n(2655),h=n(3891);e.glslRegistry={encoding:o.EncodingGlslLib,fragcolor:u.FragColorGlslLib,vec:h.VecGlslLib,shapeUtils:d.ShapeUtilsGlslLib,coordinates:i.CoordsGlslLib}},2655:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ShapeUtilsGlslLib=void 0;const i=n(8520);class o extends i.GlslLib{constructor(d){super(d)}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.bcastIndex()),this.bcastMatmulIndex()),this.offsetToIndices()),this.indicesToOffset()),this.incrementIndices())}getCustomTypes(){return{}}bcastIndex(){const d=this.context.outputTextureLayout.shape.length,h={};return this.context.programInfo.inputNames.forEach(((m,p)=>{const _=this.context.inputTextureLayouts[p].unpackedShape;if(_.length<=d){const f=_.length,l=d-f,g=`bcastIndices_${m}`;let v="";for(let T=0;T<f;++T)v+=`
          realIndices[${T}] = int( mod(float(bcastedIndices[${l+T}]), ${_[T]}.0) );
          `;const S=`
        void ${g} (int bcastedIndices[${d}], out int realIndices[${f}]) {
          ${v}
        }
        `;h[g]=new i.GlslLibRoutine(S)}})),h}bcastMatmulIndex(){const d=this.context.outputTextureLayout.shape.length,h={};return this.context.programInfo.inputNames.forEach(((m,p)=>{const _=this.context.inputTextureLayouts[p].shape;if(!(_.length<2||_.length>d)){const f=_.length,l=d-f,g=`bcastMatmulIndices_${m}`;let v="";for(let T=0;T<f-2;++T)v+=`
          realIndices[${T}] = int( mod(float(bcastedIndices[${l+T}]), ${_[T]}.0) );
          `;const S=`
        void ${g}(int bcastedIndices[${d}], out int realIndices[${f}]) {
          ${v}
          realIndices[${f-1}] = bcastedIndices[${d-1}];
          realIndices[${f-2}] = bcastedIndices[${d-2}];
        }
        `;h[g]=new i.GlslLibRoutine(S)}})),h}indicesToOffset(){const d={};return this.context.programInfo.inputNames.forEach(((h,m)=>{const p=this.context.inputTextureLayouts[m].shape,_=this.context.inputTextureLayouts[m].strides,f=p.length;let l=`indicesToOffset_${h}`;d[l]=new i.GlslLibRoutine(o.indexToOffsetSingle(l,f,_)),l=`indicesToOffset_${h}_T`,d[l]=new i.GlslLibRoutine(o.indexToOffsetSingle(l,f,_.slice().reverse()))})),d}static indexToOffsetSingle(d,h,m){let p="";for(let _=h-1;_>=0;--_)p+=`
        offset += indices[${_}] * ${m[_]};
        `;return`
      int ${d}(int indices[${h}]) {
        int offset = 0;
        ${p}
        return offset;
      }
      `}offsetToIndices(){const d={};return this.context.programInfo.inputNames.forEach(((h,m)=>{const p=this.context.inputTextureLayouts[m].shape,_=this.context.inputTextureLayouts[m].strides,f=p.length;let l=`offsetToIndices_${h}`;d[l]=new i.GlslLibRoutine(o.offsetToIndicesSingle(l,f,_)),l=`offsetToIndices_${h}_T`,d[l]=new i.GlslLibRoutine(o.offsetToIndicesSingle(l,f,_.slice().reverse()))})),d}static offsetToIndicesSingle(d,h,m){const p=[];for(let _=0;_<h-1;++_)p.push(`
      indices[${_}] = offset / ${m[_]};`),p.push(`
        offset -= indices[${_}] * ${m[_]};`);return p.push(`
      indices[${h-1}] = offset;`),`
      void ${d}(int offset, out int indices[${h}]) {
        ${p.join("")}
      }
      `}incrementIndices(){const d={};return this.context.programInfo.inputNames.forEach(((h,m)=>{const p=this.context.inputTextureLayouts[m].shape,_=p.length,f=`incrementIndices_${h}`;let l="";for(let v=0;v<_;++v)l+=`
        shape[${v}] = ${p[v]};`;const g=`
        void ${f}(int axis, out int indices[${_}]) {
          int shape[${_}];
          ${l};
          for(int i = ${_} -1 ; i >= 0; --i) {
            if(i > axis) continue;
            indices[i] += 1;
            if(indices[i] < shape[i]) {
              break;
            }
            indices[i] = 0;
          }
        }
        `;d[f]=new i.GlslLibRoutine(g)})),d}}e.ShapeUtilsGlslLib=o},5060:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getDefaultFragShaderMain=e.getFragShaderPreamble=e.getVertexShaderSource=e.getGlsl=void 0;const n={version:"",attribute:"attribute",varyingVertex:"varying",varyingFrag:"varying",texture2D:"texture2D",output:"gl_FragColor",outputDeclaration:""},i={version:"#version 300 es",attribute:"in",varyingVertex:"out",varyingFrag:"in",texture2D:"texture",output:"outputColor",outputDeclaration:"out vec4 outputColor;"};function o(u){return u===1?n:i}e.getGlsl=o,e.getVertexShaderSource=function(u){const d=o(u);return`${d.version}
      precision highp float;
      ${d.attribute} vec3 position;
      ${d.attribute} vec2 textureCoord;

      ${d.varyingVertex} vec2 TexCoords;

      void main()
      {
          gl_Position = vec4(position, 1.0);
          TexCoords = textureCoord;
      }`},e.getFragShaderPreamble=function(u){const d=o(u);return`${d.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${d.varyingFrag} vec2 TexCoords;
    ${d.outputDeclaration}
    const vec2 halfCR = vec2(0.5, 0.5);

    // Custom vector types to handle higher dimenalities.
    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    `},e.getDefaultFragShaderMain=function(u,d){return`
  void main() {
    int indices[${d}];
    toVec(TexCoords, indices);
    vec4 result = vec4(process(indices));
    ${o(u).output} = result;
  }
  `}},3891:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.VecGlslLib=void 0;const i=n(8520);class o extends i.GlslLib{constructor(d){super(d)}getCustomTypes(){return{}}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign({},this.binaryVecFunctions()),this.copyVec()),this.setVecItem()),this.getVecItem())}binaryVecFunctions(){const d=this.context.outputTextureLayout.shape.length,h={add:"+=",sub:"-=",mul:"*=",div:"/="},m={};for(const p in h){const _=`${p}Vec`;let f="";for(let g=0;g<d;++g)f+=`
          dest[${g}] ${h[p]} src[${g}];
          `;const l=`
        void ${_}(int src[${d}], out int dest[${d}]) {
          ${f}
        }
        `;m[_]=new i.GlslLibRoutine(l)}return m}copyVec(){const d=this.context.outputTextureLayout.shape.length;let h="";for(let p=0;p<d;++p)h+=`
        dest[${p}] = src[${p}];
        `;const m=`
      void copyVec(int src[${d}], out int dest[${d}]) {
        ${h}
      }
      `;return{copyVec:new i.GlslLibRoutine(m)}}setVecItem(){const d=this.context.outputTextureLayout.shape.length;let h=`
        if(index < 0)
            index =${d} + index;
        if (index == 0)
            m[0] = value;
        `;for(let p=1;p<d-1;++p)h+=`
        else if (index == ${p})
            m[${p}] = value;
            `;h+=`
        else
            m[${d-1}] = value;
        `;const m=`
      void setVecItem(out int m[${d}], int index, int value) {
        ${h}
      }
        `;return{setVecItem:new i.GlslLibRoutine(m)}}getVecItem(){const d=this.context.outputTextureLayout.shape.length;let h=`
        if(index < 0)
            index = ${d} + index;
        if (index == 0)
            return m[0];
      `;for(let p=1;p<d-1;++p)h+=`
        else if (index == ${p})
            return m[${p}];
      `;h+=`
        else
            return m[${d-1}];
        `;const m=`
      int getVecItem(int m[${d}], int index) {
        ${h}
      }
    `;return{getVecItem:new i.GlslLibRoutine(m)}}}e.VecGlslLib=o},8316:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLInferenceHandler=void 0;const i=n(6231),o=n(9162),u=n(2517),d=n(2403),h=n(7019),m=n(8710),p=n(5611),_=n(4057),f=n(2039);e.WebGLInferenceHandler=class{constructor(l){this.session=l,this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map}calculateTextureWidthAndHeight(l,g){return(0,_.calculateTextureWidthAndHeight)(this.session.layoutStrategy,l,g)}executeProgram(l,g){if(g.length<l.inputNames.length)throw new Error(`Input size mustn't be less than ${l.inputNames.length}.`);if(l.inputNames.length!==l.inputTypes.length)throw new Error("input names size does not match input types");const v=[];for(let M=0;M<l.inputNames.length;++M)v[M]=this.getOrCreateTextureData(g[M],l.inputTypes[M]);const S=((M,C)=>{const j=C.map((L=>`${L.unpackedShape.join(",")};${L.width}x${L.height}`)).join("_");let $=M.name;return M.cacheHint&&($+="["+M.cacheHint+"]"),$+=":"+j,$})(l,v);let T=this.session.programManager.getArtifact(S);const E=T?T.programInfo:typeof l.get=="function"?l.get():l,O=(0,_.createTextureLayoutFromTextureType)(this.session.layoutStrategy,E.output.dims,E.output.textureType),R=this.createTextureData(O,E.output.type);return T||(T=this.session.programManager.build(E,v,R),this.session.programManager.setArtifact(S,T)),this.runProgram(T,v,R),R}run(l,g){return this.executeProgram(l,g).tensor}runProgram(l,g,v){for(let S=0;S<g.length;++S)if(!!g[S].isPacked!=(l.programInfo.inputTypes[S]===f.TextureType.packed))throw new Error(`input[${S}] property packed inconsistent`);if(!!v.isPacked!=(l.programInfo.output.textureType===f.TextureType.packed))throw new Error("output property packed inconsistent");this.session.programManager.run(l,g,v)}getOrCreateTextureData(l,g){let v=this.getTextureData(l.dataId,g===f.TextureType.packed);if(!v&&(v=this.getTextureData(l.dataId,g!==f.TextureType.packed),v))return g===f.TextureType.packed?this.pack(v):this.unpack(v);if(!v){const S=(0,_.createTextureLayoutFromTextureType)(this.session.layoutStrategy,l.dims,g);if(g===f.TextureType.packedLastDimension){const O=l.dims;if(O.length===4){const R=[O[0],Math.ceil(O[1]*O[2]*O[3]/4)],M=(0,_.createTextureLayoutFromTextureType)(this.session.layoutStrategy,R,g);let C=l.numberData;if(O[1]*O[2]*O[3]%4!=0){const j=O[0],$=O[1]*O[2]*O[3],L=Math.ceil($*1/4)*4;C=new Float32Array(j*L);for(let N=0;N<j;++N){const B=N*$,U=N*L+N%1*$;C.set(l.numberData.subarray(B,B+$),U)}}return this.createTextureData(M,l.type,C,l,1)}}if(g===f.TextureType.packed){const T=(0,_.createTextureLayoutFromShape)(this.session.layoutStrategy,l.dims,1,[],{reverseWH:!0}),E=this.createTextureData(T,l.type,l.numberData,l,1);v=this.pack(E)}else v=this.createTextureData(S,l.type,l.numberData,l,1)}return v}createTextureDataFromLayoutBindTensor(l,g,v,S){return this.createTextureData(l,g,v,S,1)}createTextureData(l,g,v,S,T){i.Logger.verbose("InferenceHandler",`Creating TextureData: layout:[${JSON.stringify(l)}]`);const E=this.session.textureManager.createTextureFromLayout(g,l,v,T);return this.createTextureDataFromTexture(l,g,E,S)}reshapeUnpacked(l,g){const v=this.getOrCreateTextureData(l,f.TextureType.unpacked),S={channels:v.channels,height:v.height,width:v.width,shape:g.length!==0?g:[1],strides:u.ShapeUtil.computeStrides(g),unpackedShape:g};return this.createTextureDataFromTexture(S,l.type,v.texture).tensor}reshapePacked(l,g){const v=this.getOrCreateTextureData(l,f.TextureType.packed);if((0,h.isReshapeCheap)(l.dims,g)){const R={channels:v.channels,height:v.height,width:v.width,shape:g.length!==0?g:[1],strides:u.ShapeUtil.computeStrides(g),unpackedShape:g,isPacked:!0};return this.createTextureDataFromTexture(R,l.type,v.texture).tensor}const S=(0,h.processDims3D)(l.dims),T=(0,h.processDims3D)(g),E=this.reshapePacked(l,S),O=this.run((0,h.createPackedReshape3DProgramInfoLoader)(this,E,T),[E]);return this.reshapePacked(O,g)}cast(l,g){const v=this.getOrCreateTextureData(l,f.TextureType.unpacked);return this.createTextureDataFromTexture(v,g,v.texture).tensor}createTextureDataFromTexture(l,g,v,S,T){const E=Object.assign(Object.assign({},l),{tensor:S||new o.Tensor(l.unpackedShape,g,(O=>this.readTexture(E)),(async O=>this.readTextureAsync(E)),void 0,T),texture:v});return this.setTextureData(E.tensor.dataId,E,l.isPacked),E}getTextureData(l,g=!1){return this.session.isInitializer(l)?this.session.getTextureData(l,g):g?this.packedTextureDataCache.get(l):this.unpackedTextureDataCache.get(l)}setTextureData(l,g,v=!1){this.session.isInitializer(l)?this.session.setTextureData(l,g,v):(v?this.packedTextureDataCache:this.unpackedTextureDataCache).set(l,g)}isTextureLayoutCached(l,g=!1){return!!this.getTextureData(l.dataId,g)}dispose(){this.session.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach((l=>this.session.textureManager.releaseTexture(l))),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach((l=>this.session.textureManager.releaseTexture(l))),this.unpackedTextureDataCache=new Map}readTexture(l){return l.isPacked?this.readTexture(this.unpack(l)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTexture(l,l.tensor.type,l.channels):this.session.textureManager.readUint8TextureAsFloat((0,m.encodeAsUint8)(this,l))}async readTextureAsync(l){return l.isPacked?this.readTextureAsync(this.unpack(l)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTextureAsync(l,l.tensor.type,l.channels):this.session.textureManager.readUint8TextureAsFloat((0,m.encodeAsUint8)(this,l))}pack(l){return this.executeProgram((0,d.createPackProgramInfoLoader)(this,l.tensor),[l.tensor])}unpack(l){return this.executeProgram((0,p.createUnpackProgramInfoLoader)(this,l.tensor),[l.tensor])}}},1640:function(t,e,n){var i=this&&this.__createBinding||(Object.create?function(Z,te,ee,le){le===void 0&&(le=ee);var ge=Object.getOwnPropertyDescriptor(te,ee);ge&&!("get"in ge?!te.__esModule:ge.writable||ge.configurable)||(ge={enumerable:!0,get:function(){return te[ee]}}),Object.defineProperty(Z,le,ge)}:function(Z,te,ee,le){le===void 0&&(le=ee),Z[le]=te[ee]}),o=this&&this.__setModuleDefault||(Object.create?function(Z,te){Object.defineProperty(Z,"default",{enumerable:!0,value:te})}:function(Z,te){Z.default=te}),u=this&&this.__importStar||function(Z){if(Z&&Z.__esModule)return Z;var te={};if(Z!=null)for(var ee in Z)ee!=="default"&&Object.prototype.hasOwnProperty.call(Z,ee)&&i(te,Z,ee);return o(te,Z),te};Object.defineProperty(e,"__esModule",{value:!0}),e.WEBGL_OP_RESOLVE_RULES=void 0;const d=n(2898),h=u(n(7839)),m=n(4196),p=n(2069),_=n(8138),f=n(9663),l=n(5193),g=n(7992),v=n(1253),S=n(4776),T=n(6572),E=n(3346),O=n(5623),R=n(2870),M=n(2143),C=n(4939),j=n(718),$=n(2268),L=n(8117),N=n(2278),B=n(5524),U=n(5975),H=n(3933),Y=n(6558),K=n(5723),z=n(3738),V=u(n(4909)),G=n(8428),ie=n(9793);e.WEBGL_OP_RESOLVE_RULES=[["Abs","","6+",V.abs],["Acos","","7+",V.acos],["Add","","7+",h.add],["And","","7+",h.and],["Asin","","7+",V.asin],["Atan","","7+",V.atan],["AveragePool","","7+",M.averagePool,M.parseAveragePoolAttributes],["BatchNormalization","","7+",d.batchNormalization,d.parseBatchNormalizationAttributes],["Cast","","6+",m.cast,m.parseCastAttributes],["Ceil","","6+",V.ceil],["Clip","","6-10",V.clip,V.parseClipAttributes],["Clip","","11+",V.clipV11],["Concat","","4+",p.concat,p.parseConcatAttributes],["Conv","","1+",_.conv,_.parseConvAttributes],["ConvTranspose","","1+",f.convTranspose,f.parseConvTransposeAttributes],["Cos","","7+",V.cos],["Div","","7+",h.div],["Dropout","","7+",V.identity],["DepthToSpace","","1+",l.depthToSpace,l.parseDepthToSpaceAttributes],["Equal","","7+",h.equal],["Elu","","6+",V.elu,V.parseEluAttributes],["Exp","","6+",V.exp],["Flatten","","1+",g.flatten,g.parseFlattenAttributes],["Floor","","6+",V.floor],["FusedConv","com.microsoft","1+",_.conv,_.parseConvAttributes],["Gather","","1+",v.gather,v.parseGatherAttributes],["Gemm","","7-10",S.gemm,S.parseGemmAttributesV7],["Gemm","","11+",S.gemm,S.parseGemmAttributesV11],["GlobalAveragePool","","1+",M.globalAveragePool,M.parseGlobalAveragePoolAttributes],["GlobalMaxPool","","1+",M.globalMaxPool],["Greater","","7+",h.greater],["Identity","","1+",V.identity],["ImageScaler","","1+",T.imageScaler,T.parseImageScalerAttributes],["InstanceNormalization","","6+",E.instanceNormalization,E.parseInstanceNormalizationAttributes],["LeakyRelu","","6+",V.leakyRelu,V.parseLeakyReluAttributes],["Less","","7+",h.less],["Log","","6+",V.log],["MatMul","","1+",O.matMul,O.parseMatMulAttributes],["MaxPool","","1+",M.maxPool,M.parseMaxPoolAttributes],["Mul","","7+",h.mul],["Neg","","6+",V.neg],["Not","","1+",V.not],["Or","","7+",h.or],["Pad","","2-10",R.padV2,R.parsePadAttributesV2],["Pad","","11+",R.padV11,R.parsePadAttributesV11],["Pow","","7+",h.pow],["PRelu","","7+",h.pRelu],["ReduceLogSum","","1+",C.reduceLogSum,C.parseReduceAttributes],["ReduceMax","","1+",C.reduceMax,C.parseReduceAttributes],["ReduceMean","","1+",C.reduceMean,C.parseReduceAttributes],["ReduceMin","","1+",C.reduceMin,C.parseReduceAttributes],["ReduceProd","","1+",C.reduceProd,C.parseReduceAttributes],["ReduceSum","","1-12",C.reduceSum,C.parseReduceAttributes],["ReduceSumSquare","","1+",C.reduceLogSumSquare,C.parseReduceAttributes],["Relu","","6+",V.relu],["Reshape","","5+",j.reshape],["Resize","","10",$.resize,$.parseResizeAttributesV10],["Resize","","11+",$.resize,$.parseResizeAttributesV11],["Shape","","1+",L.shape],["Sigmoid","","6+",V.sigmoid],["Sin","","7+",V.sin],["Slice","","10+",N.sliceV10],["Slice","","1-9",N.slice,N.parseSliceAttributes],["Softmax","","1-12",B.softmax,B.parseSoftmaxAttributes],["Softmax","","13+",B.softmaxV13,B.parseSoftmaxAttributesV13],["Split","","2-12",U.split,U.parseSplitAttributes],["Sqrt","","6+",V.sqrt],["Squeeze","","1-12",H.squeeze,H.parseSqueezeAttributes],["Squeeze","","13+",H.squeezeV13],["Sub","","7+",h.sub],["Sum","","6+",Y.sum],["Tan","","7+",V.tan],["Tanh","","6+",V.tanh],["Tile","","6+",K.tile],["Transpose","","1+",z.transpose,z.parseTransposeAttributes],["Upsample","","7-8",ie.upsample,ie.parseUpsampleAttributesV7],["Upsample","","9",ie.upsample,ie.parseUpsampleAttributesV9],["Unsqueeze","","1-12",G.unsqueeze,G.parseUnsqueezeAttributes],["Unsqueeze","","13+",G.unsqueezeV13],["Xor","","7+",h.xor]]},2898:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseBatchNormalizationAttributes=e.batchNormalization=void 0;const i=n(246),o=n(5060),u=n(2039),d={name:"BatchNormalization",inputNames:["A","Scale","B","Mean","Variance"],inputTypes:[u.TextureType.unpacked,u.TextureType.unpacked,u.TextureType.unpacked,u.TextureType.unpacked,u.TextureType.unpacked]};e.batchNormalization=(p,_,f)=>(m(_),[p.run(Object.assign(Object.assign({},d),{cacheHint:f.cacheKey,get:()=>h(p,_,f)}),_)]),e.parseBatchNormalizationAttributes=p=>{const _=p.attributes.getFloat("epsilon",1e-5),f=p.attributes.getFloat("momentum",.9),l=p.attributes.getInt("spatial",1);return(0,i.createAttributeWithCacheKey)({epsilon:_,momentum:f,spatial:l})};const h=(p,_,f)=>{const l=(0,o.getGlsl)(p.session.backend.glContext.version),g=_[0].dims.length,[v,S]=p.calculateTextureWidthAndHeight(_[1].dims,u.TextureType.unpacked),T=`
  float process(int[${g}] indices) {
    vec2 position = offsetToCoords(indices[1], ${v}, ${S});
    float scale = getColorAsFloat(${l.texture2D}(Scale, position));
    float mean = getColorAsFloat(${l.texture2D}(Mean, position));
    float variance = getColorAsFloat(${l.texture2D}(Variance, position));
    float b = getColorAsFloat(${l.texture2D}(B, position));

    return scale * ( (_A(indices) - mean) / sqrt(variance + float(${f.epsilon})) ) + b;
  }`;return Object.assign(Object.assign({},d),{output:{dims:_[0].dims,type:_[0].type,textureType:u.TextureType.unpacked},shaderSource:T})},m=p=>{if(!p||p.length!==5)throw new Error("BatchNormalization requires 5 inputs.");const _=p[0],f=p[1],l=p[2],g=p[3],v=p[4];if(_.dims.length<3||f.dims.length!==1||l.dims.length!==1||g.dims.length!==1||v.dims.length!==1)throw new Error("invalid input shape.");if(f.dims[0]!==_.dims[1]||l.dims[0]!==_.dims[1]||g.dims[0]!==_.dims[1]||v.dims[0]!==_.dims[1])throw new Error("invalid input shape.");if(_.type!=="float32"&&_.type!=="float64"||f.type!=="float32"&&f.type!=="float64"||l.type!=="float32"&&l.type!=="float64"||g.type!=="float32"&&g.type!=="float64"||v.type!=="float32"&&v.type!=="float64")throw new Error("invalid input tensor types.")}},7839:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.xor=e.sub=e.pRelu=e.pow=e.or=e.mul=e.less=e.greater=e.equal=e.div=e.and=e.add=e.glslPRelu=e.glslPow=e.glslXor=e.glslOr=e.glslAnd=e.glslLess=e.glslGreater=e.glslEqual=e.glslSub=e.glslMul=e.glslDiv=e.glslAdd=void 0;const i=n(2517),o=n(8520),u=n(5060),d=n(2039);function h(){const C="add_";return{body:`
  float ${C}(float a, float b) {
    return a + b;
  }
  vec4 ${C}(vec4 v1, vec4 v2) {
    return v1 + v2;
  }
  `,name:C,type:o.FunctionType.ValueBased}}function m(){const C="div_";return{body:`
  float ${C}(float a, float b) {
    return a / b;
  }
  vec4 ${C}(vec4 v1, vec4 v2) {
    return v1 / v2;
  }
  `,name:C,type:o.FunctionType.ValueBased}}function p(){const C="mul_";return{body:`
  float ${C}(float a, float b) {
    return a * b;
  }
  vec4 ${C}(vec4 v1, vec4 v2) {
    return v1 * v2;
  }
  `,name:C,type:o.FunctionType.ValueBased}}function _(){const C="sub_";return{body:`
  float ${C}(float a, float b) {
    return a - b;
  }
  vec4 ${C}(vec4 v1, vec4 v2) {
    return v1 - v2;
  }
  `,name:C,type:o.FunctionType.ValueBased}}function f(){const C="equal_";return{body:`
  float ${C}(float a, float b) {
    return float(a == b);
  }
  vec4 ${C}(vec4 v1, vec4 v2) {
    return vec4(equal(v1, v2));
  }
  `,name:C,type:o.FunctionType.ValueBased}}function l(){const C="greater_";return{body:`
  float ${C}(float a, float b) {
    return float(a > b);
  }
  vec4 ${C}(vec4 v1, vec4 v2) {
    return vec4( v1.r > v2.r ,
      v1.g > v2.g,
      v1.b > v2.b,
      v1.a > v2.a );
  }
  `,name:C,type:o.FunctionType.ValueBased}}function g(){const C="less_";return{body:`
  float ${C}(float a, float b) {
    return float(a < b);
  }
  vec4 ${C}(vec4 v1, vec4 v2) {
    return vec4( v1.r < v2.r ,
                v1.g < v2.g,
                v1.b < v2.b,
                v1.a < v2.a );
  }
  `,name:C,type:o.FunctionType.ValueBased}}function v(){const C="and_";return{body:`
  float ${C}(float a, float b) {
    return float( bool(a) && bool(b) );
  }
  vec4 ${C}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r && b2.r ,
                b1.g && b2.g,
                b1.b && b2.b,
                b1.a && b2.a );
  }
  `,name:C,type:o.FunctionType.ValueBased}}function S(){return{body:`
  float or_(float a, float b) {
    return float( bool(a) || bool(b) );
  }
  vec4 or_(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r || b2.r ,
                b1.g || b2.g,
                b1.b || b2.b,
                b1.a || b2.a );
  }
  `,name:"or_",type:o.FunctionType.ValueBased}}function T(){const C="xor_";return{body:`
  float ${C}(float a, float b) {
    return float( bool(a) ^^ bool(b) );
  }
  vec4 ${C}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r ^^ b2.r ,
                b1.g ^^ b2.g,
                b1.b ^^ b2.b,
                b1.a ^^ b2.a );
  }
  `,name:C,type:o.FunctionType.ValueBased}}function E(){return(function(C){const j=`${C}_`;return{body:`
  float ${j}(float a, float b) {
    return ${C}(a, b);
  }
  vec4 ${j}(vec4 v1, vec4 v2) {
    return ${C}(v1, v2);
  }
  `,name:j,type:o.FunctionType.ValueBased}})("pow")}function O(){const C="prelu_";return{body:`
  float ${C}(float a, float b) {
    return a < 0.0 ? a * b: a;
  }
  vec4 ${C}(vec4 v1, vec4 v2) {
    return vec4(
      v1.r < 0.0 ? v1.r * v2.r: v1.r,
      v1.g < 0.0 ? v1.g * v2.g: v1.g,
      v1.b < 0.0 ? v1.b * v2.b: v1.b,
      v1.a < 0.0 ? v1.a * v2.a: v1.a
      );
  }
  `,name:C,type:o.FunctionType.ValueBased}}e.glslAdd=h,e.glslDiv=m,e.glslMul=p,e.glslSub=_,e.glslEqual=f,e.glslGreater=l,e.glslLess=g,e.glslAnd=v,e.glslOr=S,e.glslXor=T,e.glslPow=E,e.glslPRelu=O;const R=(C,j,$,L=j[0].type,N)=>{const B=C.session.pack?d.TextureType.packed:d.TextureType.unpacked;return{name:$.name,inputNames:["A","B"],inputTypes:[B,B],cacheHint:N,get:()=>M(C,j,$,L)}},M=(C,j,$,L=j[0].type)=>{const N=C.session.pack?d.TextureType.packed:d.TextureType.unpacked,B=!i.ShapeUtil.areEqual(j[0].dims,j[1].dims);let U=j[0].dims;const H=C.session.pack;if(B){const z=i.BroadcastUtil.calcShape(j[0].dims,j[1].dims,!1);if(!z)throw new Error("Can't perform binary op on the given tensors");U=z;const V=U.length,G=j[0].dims.length!==0?j[0].dims.length:1,ie=j[1].dims.length!==0?j[1].dims.length:1,Z=j[0].dims.length!==0?"bcastIndices_A(indices, aindices);":"aindices[0] = 0;",te=j[1].dims.length!==0?"bcastIndices_B(indices, bindices);":"bindices[0] = 0;",ee=(0,u.getGlsl)(C.session.backend.glContext.version),le=H?`
      ${$.body}
      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();
        vec4 result = ${$.name}(a, b);
        ${ee.output} = result;
      }`:`
      ${$.body}
      float process(int indices[${V}]) {
        int aindices[${G}];
        int bindices[${ie}];
        ${Z}
        ${te}
        return ${$.name}(_A(aindices), _B(bindices));
      }`;return{name:$.name,inputNames:["A","B"],inputTypes:[N,N],output:{dims:U,type:L,textureType:N},shaderSource:le,hasMain:H}}const Y=(0,u.getGlsl)(C.session.backend.glContext.version),K=`
    ${$.body}
    void main() {
      vec4 v1 = ${Y.texture2D}(A, TexCoords);
      vec4 v2 = ${Y.texture2D}(B, TexCoords);
      vec4 result = ${$.name}(v1, v2);
      ${Y.output} = result;
    }
    `;return{name:$.name,inputNames:["A","B"],inputTypes:[N,N],output:{dims:j[0].dims,type:L,textureType:N},shaderSource:K,hasMain:!0}};e.add=(C,j)=>[C.run(R(C,j,h()),j)],e.and=(C,j)=>[C.run(R(C,j,v(),"bool"),j)],e.div=(C,j)=>[C.run(R(C,j,m()),j)],e.equal=(C,j)=>[C.run(R(C,j,f(),"bool"),j)],e.greater=(C,j)=>[C.run(R(C,j,l(),"bool"),j)],e.less=(C,j)=>[C.run(R(C,j,g(),"bool"),j)],e.mul=(C,j)=>[C.run(R(C,j,p()),j)],e.or=(C,j)=>[C.run(R(C,j,S(),"bool"),j)],e.pow=(C,j)=>[C.run(R(C,j,E()),j)],e.pRelu=(C,j)=>[C.run(R(C,j,O()),j)],e.sub=(C,j)=>[C.run(R(C,j,_()),j)],e.xor=(C,j)=>[C.run(R(C,j,T(),"bool"),j)]},4196:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseCastAttributes=e.cast=void 0;const i=n(2517);e.cast=(u,d,h)=>(o(d),[u.cast(d[0],h)]),e.parseCastAttributes=u=>i.ProtoUtil.tensorDataTypeFromProto(u.attributes.getInt("to"));const o=u=>{if(!u||u.length!==1)throw new Error("Cast requires 1 input.");if(u[0].type==="string")throw new Error("Invalid input type.")}},1163:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createPackedConcatProgramInfoLoader=void 0;const i=n(5060),o=n(2039),u=n(9390),d=n(2827);e.createPackedConcatProgramInfoLoader=(m,p,_)=>{const f=(l=p.length,g=_.cacheKey,{name:"Concat (packed)",inputNames:Array.from({length:l},((v,S)=>`X${S}`)),inputTypes:Array(l).fill(o.TextureType.packed),cacheHint:g});var l,g;return Object.assign(Object.assign({},f),{get:()=>((v,S,T,E)=>{const O=T[0].dims.slice();if(E>=O.length||E<-1*O.length)throw new Error("axis specified for concat doesn't match input dimensionality");E<0&&(E=O.length+E);const R=O.slice(0);for(let Z=1;Z<T.length;Z++){const te=T[Z].dims.slice();for(let ee=0;ee<O.length;ee++)if(ee===E)R[E]+=te[ee];else if(O[ee]!==te[ee])throw new Error("non concat dimensions must match")}const M=R.length,C=(0,d.getChannels)("coords",M),j=(0,u.getCoordsDataType)(M),$=(0,d.unpackFromChannel)(),L=T.map((Z=>Z.dims)),N=(0,u.getGlChannels)(M),B=new Array(L.length-1);B[0]=L[0][E];for(let Z=1;Z<B.length;Z++)B[Z]=B[Z-1]+L[Z][E];const U=N[E],H=N.slice(-2),Y=N.join();let K=`if (${U} < ${B[0]}) {
        return getChannel(
            getX0(${Y}), vec2(${H.join()}));
        }`;for(let Z=1;Z<B.length;Z++){const te=B[Z-1];K+=`
            if (${U} < ${B[Z]}  && ${U} >= ${B[Z-1]}) {
              return getChannel(
                getX${Z}(${h(N,U,te)}),
                vec2(${h(H,U,te)}));
            }`}const z=B.length,V=B[B.length-1];K+=`
            return getChannel(
              getX${z}(${h(N,U,V)}),
              vec2(${h(H,U,V)}));`;const G=(0,i.getGlsl)(v.session.backend.glContext.version),ie=`
          ${$}
          float getValue(${N.map((Z=>"int "+Z))}) {
            ${K}
          }

          void main() {
            ${j} coords = getOutputCoords();
            int lastDim = coords.${N[M-1]};
            coords.${N[M-1]} = coords.${N[M-2]};
            coords.${N[M-2]} = lastDim;

            vec4 result = vec4(getValue(${C}), 0., 0., 0.);

            ${C[M-1]} = ${C[M-1]} + 1;
            if (${C[M-1]} < ${R[M-1]}) {
              result.g = getValue(${C});
            }

            ${C[M-2]} = ${C[M-2]} + 1;
            if (${C[M-2]} < ${R[M-2]}) {
              result.a = getValue(${C});
            }

            ${C[M-1]} = ${C[M-1]} - 1;
            if (${C[M-2]} < ${R[M-2]} &&
                ${C[M-1]} < ${R[M-1]}) {
              result.b = getValue(${C});
            }
            ${G.output} = result;
          }
        `;return Object.assign(Object.assign({},S),{output:{dims:R,type:T[0].type,textureType:o.TextureType.packed},shaderSource:ie,hasMain:!0})})(m,f,p,_.axis)})};const h=(m,p,_)=>{const f=m.indexOf(p);return m.map(((l,g)=>g===f?`${l} - ${_}`:l)).join()}},2069:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseConcatAttributes=e.concat=void 0;const i=n(246),o=n(2039),u=n(1163);e.concat=(l,g,v)=>(f(g),l.session.pack&&g[0].dims.length>1?[l.run((0,u.createPackedConcatProgramInfoLoader)(l,g,v),g)]:[l.run(d(l,g,v),g)]);const d=(l,g,v)=>{const S=(T=g.length,E=v.cacheKey,{name:"Concat",inputNames:Array.from({length:T},((O,R)=>`X${R}`)),inputTypes:Array(T).fill(o.TextureType.unpacked),cacheHint:E});var T,E;return Object.assign(Object.assign({},S),{get:()=>((O,R,M,C)=>{const j=M[0].dims.slice();if(C>=j.length||C<-1*j.length)throw new Error("axis specified for concat doesn't match input dimensionality");C<0&&(C=j.length+C);const $=j.slice(0);for(let Y=1;Y<M.length;Y++){const K=M[Y].dims.slice();for(let z=0;z<j.length;z++)if(z===C)$[C]+=K[z];else if(j[z]!==K[z])throw new Error("non concat dimensions must match")}const L=$.length,N=new Array(M.length);let B=0;for(let Y=0;Y<N.length;++Y)B+=M[Y].dims[C],N[Y]=B;let U="";U=M.length<5?h(N):m(N);const H=`
        ${p(M.length,L)}
        ${_(N)}
        ${U}
        float process(int indices[${L}]) {
          int textureIndex = getTextureWhereDataResides (indices[${C}]);

          if(textureIndex != 0) {
            indices[${C}] = indices[${C}] - int(getSizeInConcatAxisValueFromIndex(textureIndex-int(1)));
          }

          return fetchDataFromCorrectTexture(textureIndex, indices);
        }`;return Object.assign(Object.assign({},R),{output:{dims:$,type:M[0].type,textureType:o.TextureType.unpacked},shaderSource:H})})(0,S,g,v.axis)})},h=l=>`int getTextureWhereDataResides(int index) {
      ${l.map(((g,v)=>`if(index<${g}) {return ${v};}
`)).join("")}
    }`,m=l=>h(l),p=(l,g)=>{const v=[`float fetchDataFromCorrectTexture(int textureIndex, int indices[${g}]) {`];for(let S=0;S<l;++S)S===0?v.push(`	if (textureIndex == ${S}) { return _X${S}(indices); }`):S===l-1?v.push(`	else { return _X${S}(indices); }`):v.push(`	else if (textureIndex == ${S}) { return _X${S}(indices); }`);return v.push("	}"),v.join(`
`)},_=l=>{const g=["int getSizeInConcatAxisValueFromIndex(int index) {"];for(let v=0;v<l.length;++v)v===0?g.push(`	if (index == ${v}) { return ${l[v]}; }`):v===l.length-1?g.push(`	else { return ${l[v]}; }`):g.push(`	else if (index == ${v}) { return ${l[v]}; }`);return g.push("	}"),g.join(`
`)};e.parseConcatAttributes=l=>(0,i.createAttributeWithCacheKey)({axis:l.attributes.getInt("axis")});const f=l=>{if(!l||l.length<1)throw new Error("too few inputs");const g=l[0].type,v=l[0].dims.length;if(g==="string")throw new Error("string tensor is not supported yet");for(const S of l){if(S.type!==g)throw new Error("input tensors should be one type");if(S.dims.length!==v)throw new Error("input tensors should have the same shape")}}},4770:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createUnpackedGroupedConvProgramInfoLoader=void 0;const i=n(6231),o=n(5060),u=n(2039),d=n(8138),h=n(2823);e.createUnpackedGroupedConvProgramInfoLoader=(m,p,_)=>{const f=(l=p.length>2,g=_.cacheKey,{name:"GroupedConv",inputNames:l?["X","W","Bias"]:["X","W"],inputTypes:l?[u.TextureType.unpacked,u.TextureType.unpacked,u.TextureType.unpacked]:[u.TextureType.unpacked,u.TextureType.unpacked],cacheHint:g});var l,g;return Object.assign(Object.assign({},f),{get:()=>((v,S,T,E)=>{const O=S.length>2?"value += getBias(output_channel);":"",R=S[0].dims.slice(),M=S[1].dims.slice(),C=M[0]/E.group;i.Logger.verbose("GroupedConv",`autpPad:${E.autoPad}, dilations:${E.dilations}, group:${E.group}, kernelShape:${E.kernelShape}, pads:${E.pads}, strides:${E.strides}`);const j=(0,d.calculateOutputShape)(R,M,E.dilations,E.pads,E.strides),$=(0,o.getGlsl)(v.session.backend.glContext.version),{activationFunction:L,applyActivation:N}=(0,h.getActivationSnippet)(E),B=`
  const ivec2 strides = ivec2(${E.strides[0]}, ${E.strides[1]});
  const ivec2 pads = ivec2(${E.pads[0]}, ${E.pads[1]});
  ${L}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;
    ivec2 xRCCorner = coords.zw * strides - pads;
    int group_id = output_channel / ${C};

    float value = 0.0;
    for (int wInChannel = 0; wInChannel < ${M[1]}; wInChannel++) {
      int input_channel = group_id * ${M[1]} + wInChannel;
      for (int wHeight = 0; wHeight < ${M[2]}; wHeight++) {
        int xHeight = xRCCorner.x + wHeight * ${E.dilations[0]};

        if (xHeight < 0 || xHeight >= ${R[2]}) {
          continue;
        }

        for (int wWidth = 0; wWidth < ${M[3]}; wWidth++) {
          int xWidth = xRCCorner.y + wWidth * ${E.dilations[1]};
          if (xWidth < 0 || xWidth >= ${R[3]}) {
            continue;
          }

          float xVal = getX(batch, input_channel, xWidth, xHeight);
          float wVal = getW(output_channel, wInChannel, wWidth, wHeight);
          value += xVal*wVal;
        }
      }
    }
    ${O}
    ${N}
    ${$.output} = vec4(value, .0, .0, .0);
  }
`;return Object.assign(Object.assign({},T),{output:{dims:j,type:S[0].type,textureType:u.TextureType.unpacked},shaderSource:B,hasMain:!0})})(m,p,f,_)})}},1386:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.conv2DPacked=e.conv2DPackedPointwise=void 0;const i=n(8138),o=n(8555),u=n(708);e.conv2DPackedPointwise=(d,h,m)=>{const p=h[0].dims,_=h[1].dims,f=(0,i.calculateOutputShape)(p,_,m.dilations,m.pads,m.strides),l=d.reshapePacked(h[0],[p[1],p[2]*p[3]]),g=d.reshapePacked(h[1],[_[0],_[1]]),v=h.length>2?[g,l,h[2]]:[g,l],S=d.run((0,u.createPackedMatmulProgramInfoLoader)(d,v,m),v);return d.reshapePacked(S,f)},e.conv2DPacked=(d,h,m)=>{const p=h[0].dims,_=h[1].dims,f=(0,i.calculateOutputShape)(p,_,m.dilations,m.pads,m.strides),l=d.run((0,o.createPackedIm2ColProgramInfoLoader)(d,h[0],h[1],f,m),[h[0]]),g=d.reshapePacked(h[1],[_[0],_[1]*_[2]*_[3]]),v=h.length===3?[g,l,h[2]]:[g,l],S=d.run((0,u.createPackedMatmulProgramInfoLoader)(d,v,m),v);return d.reshapePacked(S,f)}},9663:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseConvTransposeAttributes=e.convTranspose=void 0;const i=n(246),o=n(5060),u=n(2039),d=n(2823),h=(g,v,S,T,E,O)=>(g-1)*v+S+(T-1)*E+1-O,m=(g,v,S,T,E)=>{const O=Math.floor(g/2);v==="SAME_UPPER"?(S[T]=O,S[E]=g-O):v==="SAME_LOWER"&&(S[T]=g-O,S[E]=O)};e.convTranspose=(g,v,S)=>(l(v,S),p(g,v,S));const p=(g,v,S)=>{const T=f(S,v);return[_(g,v,T)]},_=(g,v,S)=>g.run(((T,E,O)=>{const R=(M=E.length>2,C=O.cacheKey,{name:"ConvTranspose",inputNames:M?["X","W","B"]:["X","W"],inputTypes:M?[u.TextureType.unpacked,u.TextureType.unpacked,u.TextureType.unpacked]:[u.TextureType.unpacked,u.TextureType.unpacked],cacheHint:C});var M,C;return Object.assign(Object.assign({},R),{get:()=>((j,$,L,N)=>{const B=$.length>2?"getB(output_channel)":"0.0",U=$[0].dims,H=$[1].dims,Y=H[1],K=H[0]/N.group,z=[$[0].dims[0],$[1].dims[1]*N.group,...N.outputShape],V=(0,o.getGlsl)(j.session.backend.glContext.version),{activationFunction:G,applyActivation:ie}=(0,d.getActivationSnippet)(N),Z=`
  const ivec2 strides = ivec2(${N.strides[0]}, ${N.strides[1]});
  const ivec2 pads = ivec2(${N.pads[0]}, ${N.pads[1]});
  ${G}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;

    ivec2 loc = coords.zw + pads;

    int group_id = output_channel / ${Y};
    int wOutChannel = output_channel - group_id * ${Y};

    float value = ${B};
    for (int inChannelOffset = 0; inChannelOffset < ${K}; inChannelOffset++) {
      int input_channel = group_id * ${K} + inChannelOffset;
      for (int wWOff = 0; wWOff < ${H[2]}; wWOff++) {
        for (int wHOff = 0; wHOff < ${H[3]}; wHOff++) {
          ivec2 wOff = ivec2(wWOff * ${N.dilations[0]}, wHOff * ${N.dilations[1]});
          ivec2 wLoc = loc - wOff;
          ivec2 wLocIn = wLoc / strides;
          if (
            wLocIn * strides == wLoc &&
            wLocIn.x >= 0 && wLocIn.x < ${U[2]} &&
            wLocIn.y >= 0 && wLocIn.y < ${U[3]}
          ) {
            float xVal = getX(batch, input_channel, wLocIn.y, wLocIn.x);
            float wVal = getW(input_channel, wOutChannel, wHOff, wWOff);
            value += xVal * wVal;
          }
        }
      }
    }
    ${ie}
    ${V.output} = vec4(value, .0, .0, .0);
  }
`;return Object.assign(Object.assign({},L),{output:{dims:z,type:$[0].type,textureType:u.TextureType.unpacked},shaderSource:Z,hasMain:!0})})(T,E,R,O)})})(g,v,S),v),f=(g,v)=>{const S=g.kernelShape.slice();if(g.kernelShape.length===0)for(let R=2;R<v[1].dims.length;++R)S.push(v[1].dims[R]);const T=g.pads.slice(),E=g.outputShape.slice();((R,M,C,j,$,L,N,B)=>{const U=R.length-2,H=B.length===0;for(let Y=0;Y<U;++Y){const K=H?R[Y+2]*L[Y]:B[Y],z=h(R[Y+2],L[Y],$[Y],M[Y],C[Y],K);m(z,j,$,Y,Y+U),H&&B.push(L[Y]*(R[Y+2]-1)+N[Y]+(M[Y]-1)*C[Y]+1-$[Y]-$[Y+U])}})(v[0].dims,S,g.dilations,g.autoPad,T,g.strides,g.outputPadding,E);const O=Object.assign({},g);return Object.assign(O,{kernelShape:S,pads:T,outputShape:E,cacheKey:g.cacheKey}),O};e.parseConvTransposeAttributes=g=>{const v=g.attributes,S=(0,d.parseInternalActivationAttributes)(v),T=v.getString("auto_pad","NOTSET"),E=v.getInts("dilations",[1,1]),O=v.getInt("group",1),R=v.getInts("kernel_shape",[]),M=v.getInts("output_padding",[0,0]),C=v.getInts("output_shape",[]),j=v.getInts("pads",[0,0,0,0]),$=v.getInts("strides",[1,1]);return(0,i.createAttributeWithCacheKey)(Object.assign({autoPad:T,dilations:E,group:O,kernelShape:R,outputPadding:M,outputShape:C,pads:j,strides:$},S))};const l=(g,v)=>{if(!g||g.length!==2&&g.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(g[0].dims.length!==4||g[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");if(g[0].dims[1]!==g[1].dims[0])throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");const S=g[1].dims[1]*v.group;if(g.length===3&&(g[2].dims.length!==1||g[2].dims[0]!==S))throw new Error("invalid bias");const T=g[0].dims.length-2;if(v.dilations.length!==T)throw new Error(`dilations should be ${T}D`);if(v.strides.length!==T)throw new Error(`strides should be ${T}D`);if(v.pads.length!==2*T)throw new Error(`pads should be ${2*T}D`);if(v.outputPadding.length!==T)throw new Error(`output_padding should be ${T}D`);if(v.kernelShape.length!==0&&v.kernelShape.length!==g[1].dims.length-2)throw new Error("invalid kernel shape");if(v.outputShape.length!==0&&v.outputShape.length!==g[0].dims.length-2)throw new Error("invalid output shape");if(g[0].type!=="float32"||g[1].type!=="float32")throw new Error("ConvTranspose input(X,W) should be float tensor");if(g.length===3&&g[2].type!=="float32")throw new Error("ConvTranspose input(bias) should be float tensor")}},8138:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseConvAttributes=e.conv=e.calculateOutputShape=void 0;const i=n(246),o=n(2517),u=n(4770),d=n(1386),h=n(9828),m=n(2823),p=n(3248),_=n(5623);e.calculateOutputShape=(T,E,O,R,M)=>{const C=T[0],j=T.slice(2),$=j.length,L=E[0],N=E.slice(2).map(((U,H)=>U+(U-1)*(O[H]-1))),B=j.map(((U,H)=>U+R[H]+R[H+$])).map(((U,H)=>Math.floor((U-N[H]+M[H])/M[H])));return[C,L].concat(...B)},e.conv=(T,E,O)=>(S(E,O),f(T,E,O));const f=(T,E,O)=>{const R=v(O,E),M=T.session.pack,C=R.kernelShape[0]===1&&R.kernelShape[1]===1;return R.group>1?[T.run((0,u.createUnpackedGroupedConvProgramInfoLoader)(T,E,R),E)]:C&&M?[l(T,E,R)]:M&&E[0].dims.length===4&&E[0].dims[0]===1&&!C?[(0,d.conv2DPacked)(T,E,R)]:[g(T,E,R)]},l=(T,E,O)=>{const R=E[0].dims,M=E[1].dims,C=(0,e.calculateOutputShape)(R,M,O.dilations,O.pads,O.strides),j=T.reshapeUnpacked(E[0],[R[1],R[2]*R[3]]),$=T.reshapeUnpacked(E[1],[M[0],M[1]]),L=E.length>2?[$,j,E[2]]:[$,j],N=T.run((0,_.createMatmulProgramInfoLoader)(L,O),L);return T.reshapeUnpacked(N,C)},g=(T,E,O)=>{const R=E[0].dims,M=E[1].dims,C=(0,e.calculateOutputShape)(R,M,O.dilations,O.pads,O.strides),j=T.run((0,p.createIm2ColProgramInfoLoader)(T,E[0],E[1],C,O),[E[0]]),$=E.length===3?[j,E[1],E[2]]:[j,E[1]];return T.run((0,h.createDotProductProgramInfoLoader)(T,E,C,O),$)},v=(T,E)=>{const O=T.kernelShape.slice();if(T.kernelShape.length===0)for(let C=2;C<E[1].dims.length;++C)O.push(E[1].dims[C]);const R=T.pads.slice();o.PoolConvUtil.adjustPadsBasedOnAutoPad(E[0].dims,T.strides,T.dilations,O,R,T.autoPad);const M=Object.assign({},T);return Object.assign(M,{kernelShape:O,pads:R,cacheKey:T.cacheKey}),M};e.parseConvAttributes=T=>{const E=T.attributes,O=(0,m.parseInternalActivationAttributes)(E),R=E.getString("auto_pad","NOTSET"),M=E.getInts("dilations",[1,1]),C=E.getInt("group",1),j=E.getInts("kernel_shape",[]),$=E.getInts("pads",[0,0,0,0]),L=E.getInts("strides",[1,1]);return(0,i.createAttributeWithCacheKey)(Object.assign({autoPad:R,dilations:M,group:C,kernelShape:j,pads:$,strides:L},O))};const S=(T,E)=>{if(!T||T.length!==2&&T.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(T[0].dims.length!==4||T[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");if(T[0].dims[1]!==T[1].dims[1]*E.group)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(T.length===3&&(T[2].dims.length!==1||T[1].dims[0]!==T[2].dims[0]))throw new Error("invalid bias");const O=T[0].dims.length-2;if(E.dilations.length!==O)throw new Error(`dilations should be ${O}D`);if(E.strides.length!==O)throw new Error(`strides should be ${O}D`);if(E.pads.length!==2*O)throw new Error(`pads should be ${2*O}D`);if(E.kernelShape.length!==0&&E.kernelShape.length!==T[1].dims.length-2)throw new Error("invalid kernel shape");if(T[0].type!=="float32"||T[1].type!=="float32")throw new Error("Conv input(X,W) should be float tensor");if(T.length===3&&T[2].type!=="float32")throw new Error("Conv input(bias) should be float tensor")}},5193:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseDepthToSpaceAttributes=e.depthToSpace=void 0;const i=n(3738);e.depthToSpace=(u,d,h)=>{o(d);const m=h.blocksize,p=m*m,_=h.mode==="DCR"?[0,3,4,1,5,2]:[0,1,4,2,5,3],f=h.mode==="DCR"?[d[0].dims[0],m,m,d[0].dims[1]/p,d[0].dims[2],d[0].dims[3]]:[d[0].dims[0],d[0].dims[1]/p,m,m,d[0].dims[2],d[0].dims[3]],l=u.reshapeUnpacked(d[0],f),g={perm:_,cacheKey:`${_}`},[v]=(0,i.transpose)(u,[l],g),S=[d[0].dims[0],d[0].dims[1]/p,d[0].dims[2]*m,d[0].dims[3]*m];return[u.reshapeUnpacked(v,S)]},e.parseDepthToSpaceAttributes=u=>{const d=u.attributes.getInt("blocksize");if(d<1)throw new Error(`blocksize must be >= 1, but got : ${d} for DepthToSpace`);const h=u.attributes.getString("mode","DCR");if(h!=="DCR"&&h!=="CRD")throw new Error(`unrecognized mode: ${h} for DepthToSpace`);return{mode:h,blocksize:d}};const o=u=>{if(u.length!==1)throw new Error(`DepthToSpace expect 1 inputs, but got ${u.length}`);if(u[0].type==="string"||u[0].dims.length!==4)throw new TypeError("DepthToSpace input should be a 4-D numeric tensor")}},9828:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createDotProductProgramInfoLoader=void 0;const i=n(2517),o=n(5060),u=n(2039),d=n(2823),h=n(3248);e.createDotProductProgramInfoLoader=(m,p,_,f)=>{const l=((g,v)=>({name:"ConvDotProduct",inputNames:g?["Im2Col","K","B"]:["Im2Col","K"],inputTypes:g?[u.TextureType.unpacked,u.TextureType.packedLastDimension,u.TextureType.unpacked]:[u.TextureType.unpacked,u.TextureType.packedLastDimension],cacheKey:v.activationCacheKey}))(p.length>2,f);return Object.assign(Object.assign({},l),{get:()=>((g,v,S,T,E)=>{const O=S[0].dims,R=S[1].dims,M=[R[0],Math.ceil(O[1]*R[2]*R[3]/4)],C=(0,h.calculateIm2ColDims)(O,R,T),[j,$]=g.calculateTextureWidthAndHeight(M,u.TextureType.packedLastDimension),L=i.ShapeUtil.computeStrides(C),[N,B]=g.calculateTextureWidthAndHeight(C,u.TextureType.packedLastDimension),U=T.length,H=S.length<3?"0.0":"_B(b)",Y=Math.ceil(O[1]*R[2]*R[3]/4),{activationFunction:K,applyActivation:z}=(0,d.getActivationSnippet)(E),V=(0,o.getGlsl)(g.session.backend.glContext.version),G=`
${K}
float process(int indices[${U}]) {
  int b[1];
  b[0] = indices[1];
  int im2col[4];
  im2col[0] = indices[0];
  im2col[1] = indices[2];
  im2col[2] = indices[3];
  int im2colOffset = im2col[0] * ${L[0]} + im2col[1] * ${L[1]} + im2col[2] * ${L[2]};
  int kernelOffset = indices[1] * ${M[1]};
  float value = ${H};
  for (int i = 0; i < ${Y}; ++i) {
    vec2 im2colCoords = offsetToCoords(im2colOffset, ${N}, ${B});
    vec2 kernelCoords = offsetToCoords(kernelOffset, ${j}, ${$});
    value += dot(${V.texture2D}(Im2Col, im2colCoords), ${V.texture2D}(K, kernelCoords));
    ++im2colOffset;
    ++kernelOffset;
  }
  ${z}
  return value;
}`;return Object.assign(Object.assign({},v),{output:{dims:T,type:S[0].type,textureType:u.TextureType.unpacked},shaderSource:G})})(m,l,p,_,f)})}},7992:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseFlattenAttributes=e.flatten=void 0;const i=n(2517);e.flatten=(u,d,h)=>{o(d,h);const m=i.ShapeUtil.flattenShape(d[0].dims,h);return[u.reshapeUnpacked(d[0],m)]},e.parseFlattenAttributes=u=>u.attributes.getInt("axis",1);const o=(u,d)=>{if(!u||u.length!==1)throw new Error("Flatten requires 1 input.");const h=u[0].dims.length;if(h===0)throw new Error("scalar tensor is not supported.");if(d<-h||d>h)throw new Error("Invalid axis");if(u[0].type==="string")throw new Error("string tensor is not supported.")}},2823:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseInternalActivationAttributes=e.getActivationSnippet=void 0;const i=n(2517),o=n(4909);e.getActivationSnippet=function(u){let d;switch(u.activation){case"Relu":d=(0,o.glslRelu)();break;case"Sigmoid":d=(0,o.glslSigmoid)();break;case"Clip":d=(0,o.glslClip)(u.clipMin,u.clipMax);break;default:return{activationFunction:"",applyActivation:""}}const h=d.name;return{activationFunction:d.body,applyActivation:`value = ${h}_(value);`}},e.parseInternalActivationAttributes=u=>{const d=u.getString("activation","");if(d==="Clip"){const[h,m]=u.getFloats("activation_params",[i.MIN_CLIP,i.MAX_CLIP]);return{activation:d,clipMax:m,clipMin:h,activationCacheKey:`${d}:${h},${m}`}}return{activation:d,activationCacheKey:d}}},1253:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseGatherAttributes=e.gather=void 0;const i=n(246),o=n(782),u=n(2517),d=n(2039);e.gather=(_,f,l)=>(p(f,l.axis),[_.run(m(_,f,l),f)]),e.parseGatherAttributes=_=>(0,i.createAttributeWithCacheKey)({axis:_.attributes.getInt("axis",0)});const h={name:"Gather",inputNames:["A","B"],inputTypes:[d.TextureType.unpacked,d.TextureType.unpacked]},m=(_,f,l)=>{const g=Object.assign(Object.assign({},h),{cacheHint:l.cacheKey});return Object.assign(Object.assign({},g),{get:()=>((v,S,T,E)=>{const O=T[0].dims.slice(),R=T[1].dims.slice(),M=new Array(O.length+R.length-1);E=u.ShapeUtil.normalizeAxis(E,O.length);const C=[];for(let $=0;$<M.length;$++)$<E?(M[$]=O[$],C.push(`inputIdx[${$}] = outputIdx[${$}];`)):$<E+R.length?(M[$]=R[$-E],C.push(`indexDataIdx[${$-E}] = outputIdx[${$}];`)):(M[$]=O[$-R.length+1],C.push(`inputIdx[${$-R.length+1}] = outputIdx[${$}];`));const j=`
      float process(int outputIdx[${M.length||1}]) {
        int inputIdx[${O.length}];
        int indexDataIdx[${R.length||1}];
        indexDataIdx[0] = 0;
        ${C.join(`
        `)}
        int idx = int(_B(indexDataIdx));
        inputIdx[${E}] = idx < 0 ? idx + ${O[E]} : idx;
        return _A(inputIdx);
      }`;return Object.assign(Object.assign({},S),{output:{dims:M,type:T[0].type,textureType:d.TextureType.unpacked},shaderSource:j})})(0,g,f,l.axis)})},p=(_,f)=>{if(!_||_.length!==2)throw new Error("Gather requires 2 inputs.");const l=_[0].dims.length;if(l<1)throw new Error("Invalid input shape.");if(f<-l||f>l-1)throw new Error("Invalid axis.");if(o.NUMBER_TYPES.indexOf(_[0].type)===-1)throw new Error("Invaid input type.");if(_[1].type!=="int32"&&_[1].type!=="int16")throw new Error("Invaid input type.")}},4776:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseGemmAttributesV11=e.parseGemmAttributesV7=e.gemm=void 0;const i=n(246),o=n(2517),u=n(2039);e.gemm=(_,f,l)=>(p(f,l),[_.run(h(f,l),f)]);const d=(_,f)=>{const l=_.attributes.getInt("transA",0)!==0,g=_.attributes.getInt("transB",0)!==0,v=_.attributes.getFloat("alpha",1),S=_.attributes.getFloat("beta",1);return(0,i.createAttributeWithCacheKey)({transA:l,transB:g,alpha:v,beta:S,isOptionalC:f})};e.parseGemmAttributesV7=_=>d(_,!1),e.parseGemmAttributesV11=_=>d(_,!0);const h=(_,f)=>{const l={name:"Gemm",inputNames:_.length===3?["A","B","C"]:["A","B"],inputTypes:_.length===3?[u.TextureType.unpacked,u.TextureType.unpacked,u.TextureType.unpacked]:[u.TextureType.unpacked,u.TextureType.unpacked],key:f.cacheKey};return Object.assign(Object.assign({},l),{get:()=>m(l,_,f)})},m=(_,f,l)=>{const g=f[0].dims.slice(),v=f[1].dims.slice(),[S,T]=o.GemmUtil.getShapeOfGemmResult(g,l.transA,v,l.transB,f.length===3?f[2].dims:void 0),E=[S,T];if(!E)throw new Error("Can't use gemm on the given tensors");let O=g[g.length-1],R="";l.transA&&(O=g[0]),l.transA&&l.transB?R="value += _A_T(a) * _B_T(b);":l.transA&&!l.transB?R="value += _A_T(a) * _B(b);":!l.transA&&l.transB?R="value += _A(a) * _B_T(b);":l.transA||l.transB||(R="value += _A(a) * _B(b);");const M=E.length,C=`
      float process(int indices[${M}]) {
          int a[${M}];
          int b[${M}];
          ${f.length===3?`int c[${f[2].dims.length}];`:""}

          copyVec(indices, a);
          copyVec(indices, b);
          ${f.length===3?"bcastIndices_C(indices, c);":""}

          float value = 0.0;
          for (int k=0; k<${O}; ++k) {
              a[${M-1}] = k;
              b[${M-2}] = k;
              ${R}
          }

          value = value * alpha;
          ${f.length===3?"value += beta * _C(c);":""}
          return value;
      }`;return Object.assign(Object.assign({},_),{output:{dims:E,type:f[0].type,textureType:u.TextureType.unpacked},variables:[{name:"alpha",type:"float",data:l.alpha},{name:"beta",type:"float",data:l.beta}],shaderSource:C})},p=(_,f)=>{if(!_)throw new Error("Input is missing");if(f.isOptionalC&&(_.length<2||_.length>3))throw new Error("Invaid input shape.");if(!f.isOptionalC&&_.length!==3)throw new Error("Gemm requires 3 inputs");if(_.length===3&&_[2].dims.length!==1&&_[2].dims.length!==2)throw new Error("Invalid input shape of C");if(_[0].type!=="float32"&&_[0].type!=="float64"||_[1].type!=="float32"&&_[1].type!=="float64"||_.length===3&&_[2].type!=="float32"&&_[2].type!=="float64")throw new Error("Invalid input type.");if(_[0].type!==_[1].type||_.length===3&&_[0].type!==_[2].type)throw new Error("Input types are mismatched")}},8555:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createPackedIm2ColProgramInfoLoader=void 0;const i=n(5060),o=n(2039),u=n(2827);e.createPackedIm2ColProgramInfoLoader=(d,h,m,p,_)=>{const f=(l=_.cacheKey,{name:"Im2Col (packed)",inputNames:["A"],inputTypes:[o.TextureType.packed],cacheHint:l});var l;return Object.assign(Object.assign({},f),{get:()=>((g,v,S,T,E,O)=>{const R=S.dims,M=T.dims,C=E.length,j=[M[1]*M[2]*M[3],E[2]*E[3]],$=M[2]*M[3],L=(0,u.unpackFromChannel)(),N=(0,i.getGlsl)(g.session.backend.glContext.version);let B="";for(let H=0;H<=1;H++)for(let Y=0;Y<=1;Y++)B+=`
            blockIndex = rc.x + ${Y};
            pos = rc.y + ${H};

            if(blockIndex < ${j[1]} && pos < ${j[0]}) {
              offsetY = int(blockIndex / (${E[C-1]})) * ${O.strides[0]} -
                ${O.pads[0]};
              d0 = offsetY + ${O.dilations[0]} * (imod(pos, ${$}) / ${M[2]});

              if(d0 < ${R[2]} && d0 >= 0) {
                offsetX = imod(blockIndex, ${E[C-1]}) * ${O.strides[1]} -
                  ${O.pads[1]};
                d1 = offsetX + ${O.dilations[1]} * imod(imod(pos, ${$}), ${M[2]});

                if(d1 < ${R[3]} && d1 >= 0) {

                  ch = int(float(pos)/ ${$}.);
                    innerDims = vec2(d0, d1);
                    result[${2*H+Y}] = getChannel(
                      getA(0, ch, int(innerDims.x),
                      int(innerDims.y)), innerDims);
                }
              }
            }

          `;const U=`
      ${L}

      void main() {
        ivec2 rc = getOutputCoords();
          vec4 result = vec4(0.0);
          int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
          vec2 innerDims;
          ${B}
          ${N.output} = result;
      }
            `;return Object.assign(Object.assign({},v),{output:{dims:j,type:S.type,textureType:o.TextureType.packed},shaderSource:U,hasMain:!0})})(d,f,h,m,p,_)})}},3248:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.calculateIm2ColDims=e.createIm2ColProgramInfoLoader=void 0;const i=n(2039);e.createIm2ColProgramInfoLoader=(o,u,d,h,m)=>{const p=(_=m.cacheKey,{name:"Im2Col",inputNames:["X"],inputTypes:[i.TextureType.unpacked],cacheHint:_});var _;return Object.assign(Object.assign({},p),{get:()=>((f,l,g,v,S,T)=>{const E=g.dims,O=v.dims,R=S.length,M=(0,e.calculateIm2ColDims)(E,O,S,4),C=`
        const int XC = ${E[1]};
        const int XH = ${E[2]};
        const int XW = ${E[3]};
        const int KH = ${T.kernelShape[0]};
        const int KW = ${T.kernelShape[1]};
        const int dilationH = ${T.dilations[0]};
        const int dilationW = ${T.dilations[1]};
        const int strideH = ${T.strides[0]};
        const int strideW = ${T.strides[1]};
        const int padH = ${T.pads[0]};
        const int padW = ${T.pads[1]};
        const int KHKW = KH*KW;
        const int XCKHKW = XC * KHKW;
        const int outputChannels = 4;
        vec4 process(int indices[${R}]) {
          int b  = indices[0]; // batch size
          int oh = indices[1] * strideH - padH; //output height
          int ow = indices[2] * strideW - padW; //output width
          int p = indices[3] * outputChannels; //patch
          vec4 value = vec4(0.0);
          for(int i=0; i < outputChannels; ++i) {
            if(p < XCKHKW) {
              int patchC = p / KHKW;
              int patchH = (p - patchC*KHKW) / KW;
              int patchW = (p - patchC*KHKW) - patchH * KW;
              int xh2 = oh + patchH * dilationH;
              int xw2 = ow + patchW * dilationW;
              int x[${E.length}];
              x[0] = b;
              x[1] = patchC;
              x[2] = xh2;
              x[3] = xw2;
              if(xh2 >= 0 &&
                  xh2 < XH &&
                  xw2 >= 0 &&
                  xw2 < XW) {
                value[i] = _X(x);
              }
            }
            ++p;
          }
          return value;
        }
        `;return Object.assign(Object.assign({},l),{output:{dims:M,type:g.type,textureType:i.TextureType.packedLastDimension},shaderSource:C})})(0,p,u,d,h,m)})},e.calculateIm2ColDims=(o,u,d,h=4)=>[d[0],d[2],d[3],Math.ceil(o[1]*u[2]*u[3]/h)]},6572:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseImageScalerAttributes=e.imageScaler=void 0;const i=n(246),o=n(2039);e.imageScaler=(p,_,f)=>(m(_),[p.run(d(p,_,f),_)]),e.parseImageScalerAttributes=p=>{const _=p.attributes.getFloat("scale"),f=p.attributes.getFloats("bias");return(0,i.createAttributeWithCacheKey)({scale:_,bias:f})};const u={name:"ImageScaler",inputNames:["X"],inputTypes:[o.TextureType.unpacked]},d=(p,_,f)=>{const l=Object.assign(Object.assign({},u),{cacheHint:f.cacheKey});return Object.assign(Object.assign({},l),{get:()=>((g,v,S,T)=>{const E=S[0].dims.slice(),O=E.length,R=`
      ${h(T.bias.length)}
      float process(int indices[${O}]) {
        return _X(indices) * scale + getBias(bias, indices[1]);
      }`;return Object.assign(Object.assign({},v),{output:{dims:E,type:S[0].type,textureType:o.TextureType.unpacked},variables:[{name:"bias",type:"float",arrayLength:T.bias.length,data:T.bias},{name:"scale",type:"float",data:T.scale}],shaderSource:R})})(0,l,_,f)})},h=p=>{const _=[`float getBias(float bias[${p}], int channel) {`];for(let f=0;f<p;++f)f===0?_.push(`	if (channel == ${f}) { return bias[${f}]; }`):f===p-1?_.push(`	else { return bias[${f}]; }`):_.push(`	else if (channel == ${f}) { return bias[${f}]; }`);return _.push("	}"),_.join(`
`)},m=p=>{if(!p||p.length!==1)throw new Error("ImageScaler requires 1 input.");if(p[0].dims.length!==4)throw new Error("Invalid input shape.");if(p[0].type!=="float32"&&p[0].type!=="float64")throw new Error("Invalid input type.")}},3346:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseInstanceNormalizationAttributes=e.instanceNormalization=void 0;const i=n(5060),o=n(2039);e.instanceNormalization=(_,f,l)=>{p(f);const g=_.run(d(f[0]),f);return[_.run(m(_,f[0],l,g.dims),[f[0],g,f[1],f[2]])]},e.parseInstanceNormalizationAttributes=_=>_.attributes.getFloat("epsilon",1e-5);const u={name:"InstanceNormalization_MeanAndVariance",inputNames:["X"],inputTypes:[o.TextureType.unpacked]},d=_=>Object.assign(Object.assign({},u),{get:()=>((f,l)=>{const g=l.dims.slice(),v=g[1],S=g[2]*g[3],T=[g[0],v],E=`
      vec4 process(int[2] indices) {
        vec4 v = vec4(0.0);
        int a[4];
        a[0] = indices[0];
        a[1] = indices[1];
        float temp = 0.0;
        for(int a2=0; a2<${g[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${g[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += x;
          }
        }
        float mean = temp / float(${S});
        temp = 0.0;
        for(int a2=0; a2<${g[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${g[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += (x - mean) * (x - mean);
          }
        }
        v.r = mean;
        v.g = temp / float(${S});

        return v;
      }`;return Object.assign(Object.assign({},f),{output:{dims:T,type:l.type,textureType:o.TextureType.packedLastDimension},shaderSource:E})})(u,_)}),h={name:"InstanceNormalization_ComputeOutput",inputNames:["X","MeanAndVariance","Scale","B"],inputTypes:[o.TextureType.unpacked,o.TextureType.packedLastDimension,o.TextureType.unpacked,o.TextureType.unpacked]},m=(_,f,l,g)=>{const v=Object.assign(Object.assign({},h),{cacheHint:`${l}`});return Object.assign(Object.assign({},v),{get:()=>((S,T,E,O,R)=>{const M=(0,i.getGlsl)(S.session.backend.glContext.version),[C,j]=S.calculateTextureWidthAndHeight(R,o.TextureType.packedLastDimension),[$,L]=[C/4,j],N=`
      vec4 get_MeanAndVariance(int[2] mv) {
        int offset = indicesToOffset_MeanAndVariance(mv);
        vec2 coords = offsetToCoords(offset, ${$}, ${L});
        return ${M.texture2D}(MeanAndVariance, coords);
      }

      float process(int[4] indices) {
        int mv[2];
        mv[0] = indices[0];
        mv[1] = indices[1];
        vec4 mean_and_variance = get_MeanAndVariance(mv);
        float mean = mean_and_variance.r;
        float variance = mean_and_variance.g;

        int sb[1];
        sb[0] = indices[1];
        float scale = _Scale(sb);
        float b = _B(sb);

        return scale * (_X(indices) - mean) / sqrt(variance + epsilon) + b;
      }`;return Object.assign(Object.assign({},T),{output:{dims:E.dims,type:E.type,textureType:o.TextureType.unpacked},variables:[{name:"epsilon",type:"float",data:O}],shaderSource:N})})(_,v,f,l,g)})},p=_=>{if(!_||_.length!==3)throw new Error("InstanceNormalization requires 3 inputs.");const f=_[0],l=_[1],g=_[2];if(f.dims.length<3||l.dims.length!==1||g.dims.length!==1)throw new Error("Invalid input shape.");if(l.dims[0]!==f.dims[1]||g.dims[0]!==f.dims[1])throw new Error("Input shapes are mismatched.");if(f.type!=="float32"&&f.type!=="float64"||l.type!=="float32"&&l.type!=="float64"||g.type!=="float32"&&g.type!=="float64")throw new Error("Invalid input type.");if(_[0].dims.length!==4)throw new Error("Only support 4-D input shape.")}},708:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createPackedMatmulProgramInfoLoader=void 0;const i=n(2517),o=n(5060),u=n(2039),d=n(9390),h=n(2823),m=n(5623);e.createPackedMatmulProgramInfoLoader=(p,_,f)=>{const l=(g=_.length>2,v=f.activationCacheKey,{name:"MatMul (packed)",inputNames:g?["A","B","Bias"]:["A","B"],inputTypes:g?[u.TextureType.packed,u.TextureType.packed,u.TextureType.packed]:[u.TextureType.packed,u.TextureType.packed],cacheHint:v});var g,v;return Object.assign(Object.assign({},l),{get:()=>((S,T,E,O)=>{const R=E.length>2,M=R?"value += getBiasForMatmul();":"",C=E[0].dims,j=E[1].dims,$=i.BroadcastUtil.calcShape(C,j,!0),L=!i.ShapeUtil.areEqual(E[0].dims,E[1].dims);if(!$)throw new Error("Can't use matmul on the given tensors");const N=C[C.length-1],B=Math.ceil(N/2),U=C.length,H=j.length,Y=(0,o.getGlsl)(S.session.backend.glContext.version),K=(0,d.getCoordsDataType)($.length),z=$.length,V=(0,d.getGlChannels)(),{activationFunction:G,applyActivation:ie}=(0,h.getActivationSnippet)(O),Z=R?`${(0,m.getBiasForMatmul)(K,V,E[2].dims,$,!0)}`:"",te=L?`${(function(Ae,Te,Ce,De){let Re=[],Ee=[];const Ie=Ce[0].dims,Le=Ce[1].dims,Se=Ie.length,Ye=Le.length,Fe=De.length,at=Fe-Se,lt=Fe-Ye;Re=Ie.map(((Ze,St)=>`coords.${Te[St+at]}`)),Re[Se-1]="i*2",Re.join(", "),Ee=Le.map(((Ze,St)=>`coords.${Te[St+lt]}`)),Ee[Ye-2]="i*2",Ee.join(", ");const dt=i.BroadcastUtil.getBroadcastDims(Ie,De),Rt=i.BroadcastUtil.getBroadcastDims(Le,De),xt=dt.map((Ze=>`coords.${Te[Ze+at]} = 0;`)).join(`
`),Ct=Rt.map((Ze=>`coords.${Te[Ze+lt]} = 0;`)).join(`
`),wt=`int lastDim = coords.${Te[Fe-1]};
  coords.${Te[Fe-1]} = coords.${Te[Fe-2]};
  coords.${Te[Fe-2]} = lastDim;`;return`
vec4 getAAtOutCoordsMatmul(int i) {
  ${Ae} coords = getOutputCoords();
  ${wt}
  ${xt}
  vec4 outputValue = getA(${Re});
  return outputValue;
}

vec4 getBAtOutCoordsMatmul(int i) {
  ${Ae} coords = getOutputCoords();
  ${wt}
  ${Ct}
  vec4 outputValue = getB(${Ee});
  return outputValue;
}`})(K,V,E,$)}`:"",ee=L?"getAAtOutCoordsMatmul(i)":`getA(${(function(Ae,Te){let Ce="";for(let De=0;De<Te-2;De++)Ce+=`rc.${Ae[De]}, `;return Ce+=`rc.${Ae[Te-2]}, i*2`,Ce})(V,U)})`,le=L?"getBAtOutCoordsMatmul(i)":`getB(${(function(Ae,Te){let Ce="";for(let De=0;De<Te-2;De++)Ce+=`rc.${Ae[De]}, `;return Ce+=`i*2, rc.${Ae[Te-1]}`,Ce})(V,H)})`,ge=`
            ${te}
            ${Z}
            ${G}
            void main() {
              ${L?"":`${K} rc =
          getOutputCoords(); int lastDim = rc.${V[z-1]}; rc.${V[z-1]} =
          rc.${V[z-2]}; rc.${V[z-2]} = lastDim;
      `}

              vec4 value = vec4(0);
              for (int i = 0; i < ${B}; i++) {
                vec4 a = ${ee};
                vec4 b = ${le};

                value += (a.rrbb * b.rgrg);
                value += (a.ggaa * b.baba);
              }
              ${M}
              ${ie}
              ${Y.output} = value;
            }`;return Object.assign(Object.assign({},T),{output:{dims:$,type:E[0].type,textureType:u.TextureType.packed},shaderSource:ge,hasMain:!0})})(p,l,_,f)})}},5623:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getBiasForMatmul=e.createMatmulProgramInfoLoader=e.parseMatMulAttributes=e.matMul=void 0;const i=n(2517),o=n(2039),u=n(9390),d=n(2823),h=n(708);function m(f,l){const g=(v=f.length>2,S=l.activationCacheKey,{name:"MatMul",inputNames:v?["A","B","Bias"]:["A","B"],inputTypes:v?[o.TextureType.unpacked,o.TextureType.unpacked,o.TextureType.unpacked]:[o.TextureType.unpacked,o.TextureType.unpacked],cacheHint:S});var v,S;return Object.assign(Object.assign({},g),{get:()=>(function(T,E,O){const R=E[0].dims,M=E[1].dims,C=i.BroadcastUtil.calcShape(R,M,!0);if(!C)throw new Error("Can't use matmul on the given tensors");const j=(0,u.getCoordsDataType)(C.length),$=(0,u.getGlChannels)(),{activationFunction:L,applyActivation:N}=(0,d.getActivationSnippet)(O),B=E.length>2,U=B?"value += getBiasForMatmul();":"",H=B?`${_(j,$,E[2].dims,C,!1)}`:"",Y=C.length,K=R.length,z=M.length,V=`
    ${L}
    ${H}
    float process(int indices[${Y}]) {
        int a[${K}];
        int b[${z}];
        bcastMatmulIndices_A(indices, a);
        bcastMatmulIndices_B(indices, b);

        float value;
        for (int k=0; k<${R[R.length-1]}; ++k) {
            a[${K-1}] = k;
            b[${z-2}] = k;
            value += _A(a) * _B(b);
        }
        ${U}
        ${N}
        return value;
    }`;return Object.assign(Object.assign({},T),{output:{dims:C,type:E[0].type,textureType:o.TextureType.unpacked},shaderSource:V})})(g,f,l)})}e.matMul=(f,l,g)=>(p(l),f.session.pack?[f.run((0,h.createPackedMatmulProgramInfoLoader)(f,l,g),l)]:[f.run(m(l,g),l)]),e.parseMatMulAttributes=f=>(0,d.parseInternalActivationAttributes)(f.attributes),e.createMatmulProgramInfoLoader=m;const p=f=>{if(!f||f.length!==2)throw new Error("MatMul requires 2 inputs.");if(f[0].dims[f[0].dims.length-1]!==f[1].dims[f[1].dims.length-2])throw new Error("shared dimension does not match.");if(f[0].type!=="float32"&&f[0].type!=="float64"||f[1].type!=="float32"&&f[1].type!=="float64")throw new Error("inputs should be float type");if(f[0].type!==f[1].type)throw new Error("inputs types should match")};function _(f,l,g,v,S){let T="";const E=g.length,O=v.length,R=O-E;T=O<2&&E>0?"coords":g.map(((j,$)=>`coords.${l[$+R]}`)).join(", ");const M=i.BroadcastUtil.getBroadcastDims(g,v).map((j=>`coords.${l[j+R]} = 0;`)).join(`
`);let C="vec4(outputValue.xx, outputValue.yy)";return i.ShapeUtil.size(g)===1&&(C="vec4(outputValue.x)"),S?`
vec4 getBiasForMatmul() {
  ${f} coords = getOutputCoords();
  ${M}
  vec4 outputValue = getBias(${T});
  return ${C};
}`:`
float getBiasForMatmul() {
  ${f} coords = getOutputCoords();
  ${M}
  return getBias(coords.x);
}`}e.getBiasForMatmul=_},2403:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createPackProgramInfoLoader=void 0;const i=n(5060),o=n(2039),u=n(9390),d=n(2827),h={name:"pack",inputNames:["A"],inputTypes:[o.TextureType.unpackedReversed]};e.createPackProgramInfoLoader=(m,p)=>Object.assign(Object.assign({},h),{get:()=>((_,f)=>{const l=(0,i.getGlsl)(_.session.backend.glContext.version),g=f.dims,v=g.length,S=f.dims.length,T=(0,u.getCoordsDataType)(S),E=(0,d.getChannels)("rc",S),O=(R=S,M=E,C=g[g.length-2],j=g[g.length-1],R===0||R===1?"":`
    int r = ${M[R-2]};
    int c = ${M[R-1]};
    int rp1 = ${M[R-2]} + 1;
    int cp1 = ${M[R-1]} + 1;
    bool rEdge = rp1 >= ${j};
    bool cEdge = cp1 >= ${C};
    `);var R,M,C,j;let $;$=v===0?[1,1]:v===1?[g[0],1]:[g[S-1],g[S-2]];const L=(function(U,H,Y){if(U===0)return"false";if(U===1)return`rc > ${H[0]}`;let K="";for(let z=U-2;z<U;z++)K+=`${Y[z]} >= ${H[z-U+2]}`,z<U-1&&(K+="||");return K})(S,$,E),N=(function(U,H){const Y=U.length;if(Y===0)return"getA(), 0, 0, 0";if(Y===1)return`getA(rc),
            rc + 1 >= ${U[0]} ? 0. : getA(rc + 1),
            0, 0`;let K="";if(Y>2)for(let z=0;z<Y-2;++z)K+=`${H[z]},`;return`getA(${K}r, c),
          rEdge ? 0. : getA(${K}rp1, c),
          cEdge ? 0. : getA(${K}r, cp1),
          rEdge || cEdge ? 0. : getA(${K}rp1, cp1)`})(g,E),B=`
        void main() {
          ${T} rc = getOutputCoords();

          if(${L}) {
            ${l.output} = vec4(0);
          } else {
            ${O}

            ${l.output} = vec4(${N});
          }
        }
      `;return Object.assign(Object.assign({},h),{hasMain:!0,output:{dims:f.dims,type:f.type,textureType:o.TextureType.packed},shaderSource:B})})(m,p)})},2827:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.unpackFromChannel=e.getChannels=e.getVecChannels=void 0;const i=n(9390);function o(u,d){return(0,i.getGlChannels)(d).map((h=>`${u}.${h}`))}e.getVecChannels=o,e.getChannels=function(u,d){return d===1?[u]:o(u,d)},e.unpackFromChannel=function(){return`
    float getChannel(vec4 frag, int dim) {
      int modCoord = imod(dim, 2);
      return modCoord == 0 ? frag.r : frag.g;
    }

    float getChannel(vec4 frag, vec2 innerDims) {
      vec2 modCoord = mod(innerDims, 2.);
      return modCoord.x == 0. ?
        (modCoord.y == 0. ? frag.r : frag.g) :
        (modCoord.y == 0. ? frag.b : frag.a);
    }
  `}},2870:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parsePadAttributesV11=e.padV11=e.parsePadAttributesV2=e.padV2=void 0;const i=n(246),o=n(2517),u=n(5060),d=n(2039),h={name:"Pad",inputNames:["A"],inputTypes:[d.TextureType.unpacked]};e.padV2=(T,E,O)=>(_(E),[T.run(Object.assign(Object.assign({},h),{cacheHint:O.cacheKey,get:()=>p(T,E[0],O)}),E)]),e.parsePadAttributesV2=T=>{const E=T.attributes.getString("mode","constant"),O=T.attributes.getFloat("value",0),R=T.attributes.getInts("pads");return(0,i.createAttributeWithCacheKey)({mode:E,value:O,pads:R})},e.padV11=(T,E,O)=>{f(E);const R=m(T,E,O);return(0,e.padV2)(T,[E[0]],R)},e.parsePadAttributesV11=T=>T.attributes.getString("mode","constant");const m=(T,E,O)=>{if(!T.session.isInitializer(E[1].dataId)||E.length>=3&&!T.session.isInitializer(E[2].dataId))throw new Error("dynamic pad attributes are not allowed");const R=Array.from(E[1].integerData),M=E.length>=3?E[2].floatData[0]:0;return(0,i.createAttributeWithCacheKey)({mode:O,pads:R,value:M})},p=(T,E,O)=>{const R=o.ShapeUtil.padShape(E.dims.slice(),O.pads),M=R.length,C=`
      ${l(T,E,O)}
      float process(int[${M}] indices) {
          return padA(indices);
      }`;return{name:"Pad",inputNames:["A"],inputTypes:[d.TextureType.unpacked],output:{dims:R,type:E.type,textureType:d.TextureType.unpacked},shaderSource:C}},_=T=>{if(!T||T.length!==1)throw new Error("Pad requires 1 input");if(T[0].type!=="float32"&&T[0].type!=="float64")throw new Error("Invalid input type.")},f=T=>{if(!T||T.length!==2&&T.length!==3)throw new Error("Pad requires 2 or 3 inputs");if(T[1].type!=="int32")throw new Error("Invalid input type.");if(T.length>=3&&T[2].type==="string")throw new Error("Invalid input type.")},l=(T,E,O)=>{const R=(0,u.getGlsl)(T.session.backend.glContext.version),[M,C]=T.calculateTextureWidthAndHeight(E.dims,d.TextureType.unpacked),j=o.ShapeUtil.computeStrides(E.dims);switch(O.mode){case"constant":return g(R,E.dims,j,M,C,O.pads,O.value);case"reflect":return v(R,E.dims,j,M,C,O.pads);case"edge":return S(R,E.dims,j,M,C,O.pads);default:throw new Error("Invalid mode")}},g=(T,E,O,R,M,C,j)=>{const $=E.length;let L="";for(let N=$-1;N>=0;--N)L+=`
        k = m[${N}] - ${C[N]};
        if (k < 0)  return constant;
        if (k >= ${E[N]}) return constant;
        offset += k * ${O[N]};
        `;return`
      float padA(int m[${$}]) {
        const float constant = float(${j});
        int offset = 0;
        int k = 0;
        ${L}
        vec2 coords = offsetToCoords(offset, ${R}, ${M});
        float value = getColorAsFloat(${T.texture2D}(A, coords));
        return value;
      }
      `},v=(T,E,O,R,M,C)=>{const j=E.length;let $="";for(let L=j-1;L>=0;--L)$+=`
        k = m[${L}] - ${C[L]};
        if (k < 0) { k = -k; }
        {
          const int _2n_1 = ${2*(E[L]-1)};
          k = int( mod( float(k), float(_2n_1) ) ) ;
          if(k >= ${E[L]}) { k = _2n_1 - k; }
        }
        offset += k * ${O[L]};
        `;return`
      float padA(int m[${j}]) {
        int offset = 0;
        int k = 0;
        ${$}
        vec2 coords = offsetToCoords(offset, ${R}, ${M});
        float value = getColorAsFloat(${T.texture2D}(A, coords));
        return value;
      }
      `},S=(T,E,O,R,M,C)=>{const j=E.length;let $="";for(let L=j-1;L>=0;--L)$+=`
        k = m[${L}] - ${C[L]};
        if (k < 0)  k = 0;
        if (k >= ${E[L]}) k = ${E[L]-1};
        offset += k * ${O[L]};
      `;return`
      float padA(int m[${j}]) {
        int offset = 0;
        int k = 0;
        ${$}
        vec2 coords = offsetToCoords(offset, ${R}, ${M});
        float value = getColorAsFloat(${T.texture2D}(A, coords));
        return value;
      }
      `}},2143:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.globalMaxPool=e.parseMaxPoolAttributes=e.maxPool=e.parseGlobalAveragePoolAttributes=e.globalAveragePool=e.parseAveragePoolAttributes=e.averagePool=void 0;const i=n(246),o=n(2517),u=n(2039);e.averagePool=(S,T,E)=>{f(T);const O={name:"AveragePool",inputNames:["X"],inputTypes:[u.TextureType.unpacked],cacheHint:E.cacheKey};return[S.run(Object.assign(Object.assign({},O),{get:()=>d(T,O,!1,E)}),T)]},e.parseAveragePoolAttributes=S=>{const T=S.attributes.getString("auto_pad","NOTSET"),E=S.attributes.getInt("ceil_mode",0),O=S.attributes.getInt("count_include_pad",0)!==0,R=S.attributes.getInts("kernel_shape"),M=S.attributes.getInts("strides",[]),C=S.attributes.getInts("pads",[]);if(E!==0)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");return(0,i.createAttributeWithCacheKey)({autoPad:T,ceilMode:E,countIncludePad:O,kernelShape:R,strides:M,pads:C})};const d=(S,T,E,O)=>{const[R,M]=m(S,O,E),C=o.ShapeUtil.size(R.kernelShape);let j="";R.countIncludePad?j+=`value /= float(${C});`:j+=`value /= float(${C} - pad);`;const $=`
        ${l(S[0].dims,R,"value += _X(x);",j,"0.0")}
      `;return Object.assign(Object.assign({},T),{output:{dims:M,type:S[0].type,textureType:u.TextureType.unpacked},shaderSource:$})};e.globalAveragePool=(S,T,E)=>{f(T);const O={name:"GlobalAveragePool",inputNames:["X"],inputTypes:[u.TextureType.unpacked],cacheHint:`${E.countIncludePad}`};return[S.run(Object.assign(Object.assign({},O),{get:()=>d(T,O,!0,E)}),T)]},e.parseGlobalAveragePoolAttributes=S=>{const T=S.attributes.getInt("count_include_pad",0)!==0;return(0,i.createAttributeWithCacheKey)({autoPad:"",ceilMode:0,countIncludePad:T,kernelShape:[],strides:[],pads:[]})},e.maxPool=(S,T,E)=>{f(T);const O={name:"MaxPool",inputNames:["X"],inputTypes:[u.TextureType.unpacked],cacheHint:E.cacheKey};return[S.run(Object.assign(Object.assign({},O),{get:()=>h(T,O,!1,E)}),T)]},e.parseMaxPoolAttributes=S=>{const T=S.attributes.getString("auto_pad","NOTSET"),E=S.attributes.getInt("ceil_mode",0),O=S.attributes.getInts("kernel_shape"),R=S.attributes.getInts("strides",[]),M=S.attributes.getInts("pads",[]),C=S.attributes.getInt("storage_order",0),j=S.attributes.getInts("dilations",[]);if(C!==0)throw new Error("column major storage order is not yet supported for MaxPool");if(E!==0)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");return(0,i.createAttributeWithCacheKey)({autoPad:T,ceilMode:E,countIncludePad:!1,kernelShape:O,strides:R,pads:M,storageOrder:C,dilations:j})};const h=(S,T,E,O)=>{const[R,M]=m(S,O,E),C=`
      ${l(S[0].dims,R,`
      value = max(_X(x), value);
    `,"","-1e5")}
    `;return Object.assign(Object.assign({},T),{output:{dims:M,type:S[0].type,textureType:u.TextureType.unpacked},shaderSource:C})},m=(S,T,E)=>{const O=S[0].dims.slice(),R=Object.hasOwnProperty.call(T,"dilations"),M=T.kernelShape.slice(),C=T.strides.slice(),j=R?T.dilations.slice():[],$=T.pads.slice();o.PoolConvUtil.adjustPoolAttributes(E,O,M,C,j,$);const L=o.PoolConvUtil.computePoolOutputShape(E,O,C,j,M,$,T.autoPad),N=Object.assign({},T);return R?Object.assign(N,{kernelShape:M,strides:C,pads:$,dilations:j,cacheKey:T.cacheKey}):Object.assign(N,{kernelShape:M,strides:C,pads:$,cacheKey:T.cacheKey}),[N,L]},p={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""},_={name:"GlobalMaxPool",inputNames:["X"],inputTypes:[u.TextureType.unpacked]};e.globalMaxPool=(S,T)=>(f(T),[S.run(Object.assign(Object.assign({},_),{get:()=>h(T,_,!0,p)}),T)]);const f=S=>{if(!S||S.length!==1)throw new Error("Pool ops requires 1 input.");if(S[0].type!=="float32"&&S[0].type!=="float64")throw new Error("Invalid input type.")},l=(S,T,E,O,R)=>{const M=S.length;if(T.kernelShape.length<=2){const C=T.kernelShape[T.kernelShape.length-1],j=T.strides[T.strides.length-1],$=T.pads[T.pads.length/2-1],L=T.pads[T.pads.length-1],N=S[M-1];let B="",U="",H="";if(B=$+L!==0?`
          for (int i = 0; i < ${C}; i++) {
            x[${M} - 1] = indices[${M} - 1] * ${j} - ${$} + i;
            if (x[${M} - 1] < 0 || x[${M} - 1] >= ${N}) {
              pad++;
              continue;
            }
            ${E}
          }`:`
          for (int i = 0; i < ${C}; i++) {
            x[${M} - 1] = indices[${M} - 1] * ${j} - ${$} + i;
            ${E}
          }`,T.kernelShape.length===2){const Y=T.kernelShape[T.kernelShape.length-2],K=T.strides[T.strides.length-2],z=T.pads[T.pads.length/2-2],V=T.pads[T.pads.length-2],G=S[M-2];U=z+V!==0?`
            for (int j = 0; j < ${Y}; j++) {
              x[${M} - 2] = indices[${M} - 2] * ${K} - ${z} + j;
              if (x[${M} - 2] < 0 || x[${M} - 2] >= ${G}) {
                pad+= ${C};
                continue;
              }
          `:`
            for (int j = 0; j < ${Y}; j++) {
              x[${M} - 2] = indices[${M} - 2] * ${K} - ${z} + j;
            `,H=`
          }
        `}return`
        float process(int indices[${M}]) {
          int x[${M}];
          copyVec(indices, x);

          float value = ${R};
          int pad = 0;
          ${U}
          ${B}
          ${H}
          ${O}
          return value;
        }
      `}{const C=o.ShapeUtil.size(T.kernelShape),j=o.ShapeUtil.computeStrides(T.kernelShape),$=j.length,L=T.pads.length,N=v($),B=g(S,"inputDims"),U=g(T.pads,"pads"),H=g(j,"kernelStrides"),Y=g(T.strides,"strides");let K="";return K=T.pads.reduce(((z,V)=>z+V))?`
            if (x[j] >= inputDims[j] || x[j] < 0) {
              pad++;
              isPad = true;
              break;
            }
          }
          if (!isPad) {
            ${E}
          }`:`
          }
          ${E}
        `,`
        ${N}
        float process(int indices[${M}]) {
          int x[${M}];
          copyVec(indices, x);
          int offset[${$}];
          int pads[${L}];
          int inputDims[${M}];
          int kernelStrides[${$}];
          int strides[${$}];
          ${U}
          ${B}
          ${Y}
          ${H}

          float value = ${R};
          int pad = 0;
          bool isPad = false;
          for (int i = 0; i < ${C}; i++) {
            offsetToIndices(i, kernelStrides, offset);
            isPad = false;
            for (int j = ${M} - ${$}; j < ${M}; j++) {
              x[j] = indices[j] * strides[j - ${M} + ${$}]
                + offset[j - ${M} + ${$}] - pads[j - 2];
              ${K}
          }
          ${O}

          return value;
        }
      `}},g=(S,T)=>{let E="";for(let O=0;O<S.length;O++)E+=`
      ${T}[${O}] = ${S[O]};
    `;return E},v=S=>`
  void offsetToIndices(int offset, int[${S}] strides, out int[${S}] indices) {
    if (${S} == 0) {
      return;
    }
    for (int i = 0; i < ${S} - 1; ++i) {
      indices[i] = offset / strides[i];
      offset -= indices[i] * strides[i];
    }
    indices[${S} - 1] = offset;
  }`},4939:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.reduceLogSumSquare=e.reduceLogSum=e.reduceProd=e.reduceMin=e.reduceMax=e.reduceMean=e.reduceSum=e.parseReduceAttributes=void 0;const i=n(246),o=n(782),u=n(2517),d=n(2039),h=(_,f,l,g,v)=>{p(f);const S={name:g,inputNames:["A"],inputTypes:[d.TextureType.unpacked]};return[_.run(Object.assign(Object.assign({},S),{cacheHint:l.cacheKey,get:()=>m(_,f,l,g,v,S)}),f)]};e.parseReduceAttributes=_=>{const f=_.attributes.getInts("axes",[]),l=_.attributes.getInt("keepdims",1)===1;return(0,i.createAttributeWithCacheKey)({axes:f,keepDims:l})};const m=(_,f,l,g,v,S)=>{const T=[],E=f[0].dims.length||1,O=[],R=u.ShapeUtil.normalizeAxes(l.axes,f[0].dims.length),M=v(f,R);let C=M[1];for(let $=0;$<f[0].dims.length;$++)R.indexOf($)>=0||R.length===0?(l.keepDims&&T.push(1),C=`
          for(int j${$} = 0; j${$} < ${f[0].dims[$]}; j${$}++) {
            inputIdx[${$}] = j${$};
            ${C}
          }`):(O.push(`inputIdx[${$}] = outputIdx[${T.length}];`),T.push(f[0].dims[$]));const j=`
      float process(int outputIdx[${T.length||1}]) {
        float value;                 // final result
        int inputIdx[${E}];      // addressing input data
        ${O.join(`
`)}
        ${M[0]}       // init ops for reduce max/min
        ${C}
        ${M[2]}       // final computation for reduce mean
        return value;
      }`;return Object.assign(Object.assign({},S),{output:{dims:T,type:f[0].type,textureType:d.TextureType.unpacked},shaderSource:j})},p=_=>{if(!_||_.length!==1)throw new Error("Reduce op requires 1 input.");if(o.NUMBER_TYPES.indexOf(_[0].type)===-1)throw new Error("Invalid input type.")};e.reduceSum=(_,f,l)=>h(_,f,l,"ReduceSum",(()=>["value = 0.0;","value += _A(inputIdx);",""])),e.reduceMean=(_,f,l)=>h(_,f,l,"ReduceMean",((g,v)=>{let S=1;for(let T=0;T<g[0].dims.length;T++)(v.indexOf(T)>=0||v.length===0)&&(S*=g[0].dims[T]);return["value = 0.0;","value += _A(inputIdx);",`value /= ${S}.;`]})),e.reduceMax=(_,f,l)=>h(_,f,l,"ReduceMax",((g,v)=>{const S=[];for(let T=0;T<g[0].dims.length;T++)(v.indexOf(T)>=0||v.length===0)&&S.push(`inputIdx[${T}] = 0;`);return[`${S.join(`
`)}
value = _A(inputIdx);`,"value = max(value, _A(inputIdx));",""]})),e.reduceMin=(_,f,l)=>h(_,f,l,"ReduceMin",((g,v)=>{const S=[];for(let T=0;T<g[0].dims.length;T++)(v.indexOf(T)>=0||v.length===0)&&S.push(`inputIdx[${T}] = 0;`);return[`${S.join(`
`)}
value = _A(inputIdx);`,"value = min(value, _A(inputIdx));",""]})),e.reduceProd=(_,f,l)=>h(_,f,l,"ReduceProd",(()=>["value = 1.0;","value *= _A(inputIdx);",""])),e.reduceLogSum=(_,f,l)=>h(_,f,l,"ReduceLogSum",(()=>["value = 0.0;","value += _A(inputIdx);","value = log(value);"])),e.reduceLogSumSquare=(_,f,l)=>h(_,f,l,"ReduceLogSumSquare",(()=>["float t; value = 0.0;","t = _A(inputIdx); value += t * t;",""]))},7019:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isReshapeCheap=e.processDims3D=e.createPackedReshape3DProgramInfoLoader=void 0;const i=n(2517),o=n(5060),u=n(2039),d=n(2827);e.createPackedReshape3DProgramInfoLoader=(h,m,p)=>{const _=(f=>({name:"Reshape (packed)",inputTypes:[u.TextureType.packed],inputNames:["A"],cacheHint:`${f}`}))(p);return Object.assign(Object.assign({},_),{get:()=>((f,l,g,v)=>{const S=l.dims,T=v;let E="";for(let M=0;M<4;M++){let C="";switch(M){case 0:C="outputCoords = rc;";break;case 1:C="outputCoords = ivec3(rc.x, rc.y+1, rc.z);";break;case 2:C="outputCoords = ivec3(rc.x, rc.y, rc.z+1);";break;case 3:C="outputCoords = ivec3(rc.x, rc.y+1, rc.z+1);";break;default:throw new Error}E+=`
        ${C}
        ${M>0?"if(outputCoords.y < rows && outputCoords.z < cols){":""}
          int flattenedIndex = getFlattenedIndex(outputCoords);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flattenedIndex);
          vec2 innerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${M}] = getChannel(getA(inputRC.x, inputRC.y, inputRC.z), innerDims);

        ${M>0?"}":""}
      `}const O=(0,o.getGlsl)(f.session.backend.glContext.version),R=`
      ${(function(M){const C=i.ShapeUtil.computeStrides(M),j=["b","r","c"],$="index";return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${C.map(((L,N)=>`int ${j[N]} = ${$} / ${L}; ${N===C.length-1?`int ${j[N+1]} = ${$} - ${j[N]} * ${L}`:`index -= ${j[N]} * ${L}`};`)).join("")}
      return ivec3(b, r, c);
    }
  `})(S)}
      ${(function(M){const C=i.ShapeUtil.computeStrides(M);return`
  int getFlattenedIndex(ivec3 coords) {
    // reverse y, z order
    return coords.x * ${C[0]} + coords.z * ${C[1]} + coords.y;
  }
`})(T)}
      ${(0,d.unpackFromChannel)()}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.0);

        ivec3 outputCoords;
        int rows = ${T[2]};
        int cols = ${T[1]};

        ${E}
        ${O.output} = result;
      }
    `;return Object.assign(Object.assign({},g),{output:{dims:T,type:l.type,textureType:u.TextureType.packed},shaderSource:R,hasMain:!0})})(h,m,_,p)})},e.processDims3D=function(h){if(h.length===0)return[1,1,1];let m=1;for(let p=0;p<h.length-2;++p)m*=h[p];return[m,h.length>1?h[h.length-2]:1,h[h.length-1]]},e.isReshapeCheap=function(h,m){let p=!1;return p=h.length===0||m.length===0||(h.length<2||m.length<2?h[h.length-1]===m[m.length-1]:h[h.length-1]===m[m.length-1]&&h[h.length-2]===m[m.length-2]),p}},718:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.reshape=void 0;const i=n(2517);e.reshape=(o,u)=>{const d=i.ShapeUtil.calculateReshapedDims(u[0].dims,u[1].integerData);return o.session.pack?[o.reshapePacked(u[0],d)]:[o.reshapeUnpacked(u[0],d)]}},2268:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseResizeAttributesV11=e.parseResizeAttributesV10=e.resize=void 0;const i=n(5060),o=n(2039),u=n(9390),d=n(2827),h=n(9793),m={name:"Resize",inputNames:["A"],inputTypes:[o.TextureType.packed]};e.resize=(g,v,S)=>((0,h.validateInputs)(v,S),[g.run(Object.assign(Object.assign({},m),{cacheHint:S.cacheKey,get:()=>p(g,v,S)}),v)]),e.parseResizeAttributesV10=g=>(0,h.parseUpsampleAttributes)(g,10),e.parseResizeAttributesV11=g=>(0,h.parseUpsampleAttributes)(g,11);const p=(g,v,S)=>{const T=(0,i.getGlsl)(g.session.backend.glContext.version),[E,O]=_(v,S);if(E.every((K=>K===1))&&S.coordinateTransformMode!=="tf_crop_and_resize")return Object.assign(Object.assign({},m),{output:{dims:O,type:v[0].type,textureType:o.TextureType.packed},hasMain:!0,shaderSource:`void main() {
                    vec4 v = ${T.texture2D}(X, TexCoords);
                    ${T.output} = v;
                }`});const R=O.length;if(R<2)throw new Error(`output dimension should be at least 2, but got ${R}`);const M=O[R-2],C=O[R-1],j=v[0].dims;if(R!==j.length)throw new Error(`output dimension should match input ${j.length}, but got ${R}`);const $=j[R-2],L=j[R-1],N=E[R-2],B=E[R-1];let U="";if(S.mode!=="linear")throw new Error(`resize (packed) does not support mode: '${S.mode}'`);switch(S.coordinateTransformMode){case"asymmetric":U=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return vec4(coords) / scaleWHWH;
                    }
                `;break;case"half_pixel":U=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return (vec4(coords) + 0.5) / scaleWHWH - 0.5;
                    }
                `;break;case"pytorch_half_pixel":U=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 fcoords = vec4(coords);
                        return vec4(
                            ${C}.0 > 1.0 ? (fcoords.x + 0.5) / scaleWHWH.x - 0.5 : 0.0,
                            ${M}.0 > 1.0 ? (fcoords.y + 0.5) / scaleWHWH.y - 0.5 : 0.0,
                            ${C}.0 > 1.0 ? (fcoords.z + 0.5) / scaleWHWH.z - 0.5 : 0.0,
                            ${M}.0 > 1.0 ? (fcoords.w + 0.5) / scaleWHWH.w - 0.5 : 0.0
                          );
                    }
                `;break;case"align_corners":U=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 resized = vec4(${C}.0 - 1.0, ${M}.0 - 1.0, ${C}.0 - 1.0,
                            ${M}.0 - 1.0);
                        vec4 original = vec4(${L}.0 - 1.0, ${$}.0 - 1.0, ${L}.0 - 1.0,
                            ${$}.0 - 1.0);
                        vec4 new_scale = original / resized;
                        return vec4(coords) * new_scale;
                    }
                `;break;default:throw new Error(`resize (packed) does not support coordinateTransformMode:                                 '${S.coordinateTransformMode}'`)}const H=(0,u.getCoordsDataType)(R),Y=`
            const vec2 inputWH = vec2(${$}.0, ${L}.0);
            const vec4 scaleWHWH = vec4(float(${N}), float(${B}), float(${N}), float(${B}));
            ${(0,d.unpackFromChannel)()}
            ${U}
            float getAValue(int x10, int r, int c, int d) {
                return getChannel(getA(x10, r, c, d), vec2(c, d));
            }
            void main() {
                ${H} rc = getOutputCoords();

                int batch = rc[0];
                int depth = rc[1];

                // retrieve the 4 coordinates that is used in the 4 packed output values.
                ivec4 coords = ivec4(rc.wz, rc.w + 1, rc.z + 1);

                // calculate the source index in fraction
                vec4 sourceFrac = getSourceFracIndex(coords);

                // get the lower and upper bound of the 4 values that will be packed into one texel.
                ivec4 x00 = ivec4(max(sourceFrac.xy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xy)));
                ivec4 x01 = ivec4(max(sourceFrac.xw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xw)));
                ivec4 x10 = ivec4(max(sourceFrac.zy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zy)));
                ivec4 x11 = ivec4(max(sourceFrac.zw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zw)));

                bool hasNextRow = rc.w < ${M-1};
                bool hasNextCol = rc.z < ${C-1};

                // pack x00, x01, x10, x11's top-left corner into one vec4 structure
                vec4 topLeft = vec4(
                    getAValue(batch, depth, x00.x, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.y) : 0.0);

                // pack x00, x01, x10, x11's top-right corner into one vec4 structure
                vec4 topRight = vec4(
                    getAValue(batch, depth, x00.x, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.w) : 0.0);

                // pack x00, x01, x10, x11's bottom-left corner into one vec4 structure
                vec4 bottomLeft = vec4(
                    getAValue(batch, depth, x00.z, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.y) : 0.0);

                // pack x00, x01, x10, x11's bottom-right corner into one vec4 structure
                vec4 bottomRight = vec4(
                    getAValue(batch, depth, x00.z, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.w) : 0.0);

                // calculate the interpolation fraction on u and v direction
                vec4 frac = vec4(sourceFrac) - floor(sourceFrac);
                vec4 clampFrac = clamp(frac, vec4(0.0), vec4(1.0));

                vec4 top = mix(topLeft, topRight, clampFrac.ywyw);
                vec4 bottom = mix(bottomLeft, bottomRight, clampFrac.ywyw);
                vec4 newValue = mix(top, bottom, clampFrac.xxzz);

                ${T.output} = vec4(newValue);
            }
        `;return Object.assign(Object.assign({},m),{output:{dims:O,type:v[0].type,textureType:o.TextureType.packed},hasMain:!0,shaderSource:Y})},_=(g,v)=>{const S=g[0].dims;let T,E=v.scales;if(E.length===0){const R=g[v.scalesInputIdx];if(R&&R.size!==0){if(g[v.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");E=f(R,v.mode,v.isResize)}else{const M=g[v.sizesInputIdx];if(!M||M.size===0)throw new Error("Either scales or sizes MUST be provided as input.");T=Array.from(M.integerData),E=l(T,S,v.mode,v.isResize)}}else if(g[v.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");const O=T||S.map(((R,M)=>Math.floor(R*E[M])));return[E,O]},f=(g,v,S)=>{const T=Array.from(g.floatData);return(0,h.scalesValidation)(T,v,S),T},l=(g,v,S,T)=>{const E=v.length,O=new Array(E);for(let R=0,M=E;R<M;R++)if(v[R]===0){if(g[R]!==0)throw new Error("Input dim is zero but required output dim is non-zero.");O[R]=1}else O[R]=g[R]/v[R];return(0,h.scalesValidation)(O,S,T),O}},8117:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.shape=void 0;const i=n(9162);e.shape=(u,d)=>(o(d),[new i.Tensor([d[0].dims.length],"int32",void 0,void 0,new Int32Array(d[0].dims))]);const o=u=>{if(!u||u.length!==1)throw new Error("Shape requires 1 input.")}},2278:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.sliceV10=e.parseSliceAttributes=e.slice=void 0;const i=n(246),o=n(782),u=n(2517),d=n(2039),h={name:"Slice",inputNames:["A"],inputTypes:[d.TextureType.unpacked]};e.slice=(l,g,v)=>(p(g),[l.run(Object.assign(Object.assign({},h),{cacheHint:v.cacheKey,get:()=>m(l,g[0],v)}),g)]),e.parseSliceAttributes=l=>{const g=l.attributes.getInts("starts"),v=l.attributes.getInts("ends"),S=l.attributes.getInts("axes",[]);return(0,i.createAttributeWithCacheKey)({starts:g,ends:v,axes:S})};const m=(l,g,v)=>{const S=v.axes.length===0?g.dims.slice(0).map(((j,$)=>$)):v.axes,T=u.ShapeUtil.normalizeAxes(S,g.dims.length),E=v.starts.map(((j,$)=>j>g.dims[T[$]]-1?g.dims[T[$]]:u.ShapeUtil.normalizeAxis(j,g.dims[T[$]]))),O=v.ends.map(((j,$)=>j>g.dims[T[$]]-1?g.dims[T[$]]:u.ShapeUtil.normalizeAxis(j,g.dims[T[$]]))),R=g.dims.slice(),M=[];for(let j=0;j<T.length;j++)R[T[j]]=O[j]-E[j],E[j]>0&&M.push(`outputIdx[${T[j]}] += ${E[j]};`);const C=`
      float process(int outputIdx[${R.length}]) {
        ${M.join(`
      `)}
        return _A(outputIdx);
      }`;return Object.assign(Object.assign({},h),{output:{dims:R,type:g.type,textureType:d.TextureType.unpacked},shaderSource:C})},p=l=>{if(!l||l.length!==1)throw new Error("Slice requires 1 input.");if(o.NUMBER_TYPES.indexOf(l[0].type)===-1)throw new Error("Invalid input type.")};e.sliceV10=(l,g)=>{f(g);const v=_(l,g);return[l.run(Object.assign(Object.assign({},h),{cacheHint:v.cacheKey,get:()=>m(l,g[0],v)}),[g[0]])]};const _=(l,g)=>{if(!l.session.isInitializer(g[1].dataId)||!l.session.isInitializer(g[2].dataId)||g.length>=4&&!l.session.isInitializer(g[3].dataId)||g.length>=5&&!l.session.isInitializer(g[4].dataId))throw new Error("dynamic slice attributes are not allowed");if(g.length>=5&&g[4].integerData.some((E=>E!==1)))throw new Error("currently non-1 steps is not supported for Slice");const v=Array.from(g[1].integerData),S=Array.from(g[2].integerData),T=g.length>=4?Array.from(g[3].integerData):[];return{starts:v,ends:S,axes:T,cacheKey:`${T};${v};${S}`}},f=l=>{if(!l||l.length<3||l.length>5)throw new Error("Invalid input number.");if(l[1].type!=="int32"||l[1].dims.length!==1)throw new Error("Invalid input type.");if(l[2].type!=="int32"||l[2].dims.length!==1)throw new Error("Invalid input type.");if(l.length>=4&&(l[3].type!=="int32"||l[3].dims.length!==1))throw new Error("Invalid input type.");if(l.length>=5&&(l[4].type!=="int32"||l[4].dims.length!==1))throw new Error("Invalid input type.")}},5524:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.softmaxV13=e.parseSoftmaxAttributesV13=e.parseSoftmaxAttributes=e.softmax=void 0;const i=n(246),o=n(2517),u=n(5060),d=n(2039),h=n(3738),m={name:"SoftmaxComputeMax",inputNames:["A"],inputTypes:[d.TextureType.unpacked]},p={name:"SoftmaxComputeScale",inputNames:["A","Max"],inputTypes:[d.TextureType.unpacked,d.TextureType.unpacked]},_={name:"SoftMax",inputNames:["A","Max","Norm"],inputTypes:[d.TextureType.unpacked,d.TextureType.unpacked,d.TextureType.unpacked]};e.softmax=(T,E,O)=>{S(E);const R=E[0].dims.slice(),M=o.ShapeUtil.normalizeAxis(O.axis,R.length),C=o.ShapeUtil.sizeToDimension(R,M),j=o.ShapeUtil.sizeFromDimension(R,M);return f(T,E,O,C,j)},e.parseSoftmaxAttributes=T=>(0,i.createAttributeWithCacheKey)({axis:T.attributes.getInt("axis",1)}),e.parseSoftmaxAttributesV13=T=>(0,i.createAttributeWithCacheKey)({axis:T.attributes.getInt("axis",-1)}),e.softmaxV13=(T,E,O)=>{S(E);const R=E[0].dims.slice(),M=o.ShapeUtil.normalizeAxis(O.axis,R.length),C=R.length,j=M!==C-1,$=[];let L,N=[],B=[];j&&(N=Array.from({length:C}).map(((K,z)=>z)),N[M]=C-1,N[C-1]=M,N.map((K=>$.push(R[K]))),L=(0,i.createAttributeWithCacheKey)({perm:N}),B=(0,h.transpose)(T,E,L));const U=j?o.ShapeUtil.sizeToDimension($,C-1):o.ShapeUtil.sizeToDimension(R,C-1),H=j?o.ShapeUtil.sizeFromDimension($,C-1):o.ShapeUtil.sizeFromDimension(R,C-1),Y=f(T,j?B:E,O,U,H);return j?(0,h.transpose)(T,Y,L):Y};const f=(T,E,O,R,M)=>{const C=l(T,E[0],R,M,[R]),j=T.run(Object.assign(Object.assign({},m),{cacheHint:O.cacheKey,get:()=>C}),E),$=g(T,E[0],R,M,C.output.dims,[R]),L=T.run(Object.assign(Object.assign({},p),{cacheHint:O.cacheKey,get:()=>$}),[E[0],j]),N=v(T,E[0],R,M,C.output.dims,$.output.dims);return[T.run(Object.assign(Object.assign({},_),{cacheHint:O.cacheKey,get:()=>N}),[E[0],j,L])]},l=(T,E,O,R,M)=>{const[C,j]=T.calculateTextureWidthAndHeight(E.dims,d.TextureType.unpacked),$=M.length;if(O<1||R<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(M.length!==1)throw new Error("Dimensionality of the output should be 1");if(M[0]!==O)throw new Error("Shape of the output should be equal to logical row count");const L=(0,u.getGlsl)(T.session.backend.glContext.version),N=`
      float process(int[${$}] indices) {
        int logical_row_start_offset = indices[0] * ${R};

        float max = getColorAsFloat(${L.texture2D}(A, offsetToCoords(logical_row_start_offset, ${C},
        ${j} )));
        for(int i=1; i<${R}; ++i)
        {
          float current = getColorAsFloat(${L.texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${C}, ${j})));
          if(current > max)
          max = current;
        }

        return max;
      }`;return Object.assign(Object.assign({},m),{output:{dims:M,type:E.type,textureType:d.TextureType.unpacked},shaderSource:N})},g=(T,E,O,R,M,C)=>{const[j,$]=T.calculateTextureWidthAndHeight(E.dims,d.TextureType.unpacked),L=C.length;if(O<1||R<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(C.length!==1)throw new Error("Dimensionality of the output should be 1");if(C[0]!==O)throw new Error("Shape of the output should be equal to logical row count");if(M.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(M[0]!==O)throw new Error("Shape of the intermediate results should be equal to logical row count");const N=`
      float process(int[${L}] indices) {
        int logical_row_start_offset = indices[0] * ${R};

        float norm_factor = 0.0;
        float max = _Max(indices);
        for(int i=0; i<${R}; ++i)
        {
          norm_factor += exp(getColorAsFloat(${(0,u.getGlsl)(T.session.backend.glContext.version).texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${j}, ${$}))) - max);
        }

        return norm_factor;
      }`;return Object.assign(Object.assign({},p),{output:{dims:C,type:E.type,textureType:d.TextureType.unpacked},shaderSource:N})},v=(T,E,O,R,M,C)=>{const[j,$]=T.calculateTextureWidthAndHeight(E.dims,d.TextureType.unpacked),L=E.dims.length;if(O<1||R<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(M.length!==1||C.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(M[0]!==O||C[0]!==O)throw new Error("Shape of the intermediate results should be equal to logical row count");const N=`
      float process(int[${L}] indices) {

      // get offset of current logical tensor index from the 2-D texture coordinates (TexCoords)
      int offset = coordsToOffset(TexCoords, ${j}, ${$});

      //determine the logical row for this index
      int logical_row_index[1];
      logical_row_index[0] = offset / ${R};

      float norm_factor = _Norm(logical_row_index);

      // avoid possible division by 0
      // if norm_facor is 0, all elements are zero
      // if so, return 0
      if(norm_factor == 0.0)
        return 0.0;

      return exp(_A(indices) - _Max(logical_row_index)) / norm_factor;
    }`;return Object.assign(Object.assign({},_),{output:{dims:E.dims,type:E.type,textureType:d.TextureType.unpacked},shaderSource:N})},S=T=>{if(!T||T.length!==1)throw new Error("Softmax requires 1 input.");if(T[0].type!=="float32"&&T[0].type!=="float64")throw new Error("Invalid input type")}},5975:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseSplitAttributes=e.split=void 0;const i=n(246),o=n(2517),u=n(2039),d={name:"Split",inputNames:["A"],inputTypes:[u.TextureType.unpacked]};e.split=(_,f,l)=>{p(f);const g=o.ShapeUtil.normalizeAxis(l.axis,f[0].dims.length),v=h(_,f,g,l),S=[];for(let T=0;T<v;++T)S.push(_.run(Object.assign(Object.assign({},d),{cacheHint:`${l.cacheKey};${T}`,get:()=>m(_,f[0],l,g,T)}),f));return S},e.parseSplitAttributes=_=>{const f=_.attributes.getInt("axis",0),l=_.attributes.getInts("split",[]),g=_.outputs.length;return(0,i.createAttributeWithCacheKey)({axis:f,split:l,numOutputs:g})};const h=(_,f,l,g)=>{const[,v]=o.SplitUtil.splitShape(f[0].dims,l,g.split,g.numOutputs);return v.length},m=(_,f,l,g,v)=>{const[S,T]=o.SplitUtil.splitShape(f.dims,g,l.split,l.numOutputs),E=T[v],O=S[v],R=`
      float process(int indices[${O.length}]) {
        indices[${g}] += ${E};
        return _A(indices);
      }
    `;return Object.assign(Object.assign({},d),{cacheHint:`${l.cacheKey}:${v}`,output:{dims:O,type:f.type,textureType:u.TextureType.unpacked},shaderSource:R})},p=_=>{if(!_||_.length!==1)throw new Error("Split requires one input.");if(_[0].type!=="int8"&&_[0].type!=="uint8"&&_[0].type!=="int16"&&_[0].type!=="uint16"&&_[0].type!=="int32"&&_[0].type!=="uint32"&&_[0].type!=="float32"&&_[0].type!=="float64"&&_[0].type!=="bool")throw new Error("Invalid input type.")}},3933:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseSqueezeAttributes=e.squeezeV13=e.squeeze=void 0;const i=n(2517);e.squeeze=(d,h,m)=>{o(h);const p=i.ShapeUtil.squeezeShape(h[0].dims,m);return[d.reshapeUnpacked(h[0],p)]},e.squeezeV13=(d,h)=>(u(h),(0,e.squeeze)(d,[h[0]],Array.from(h[1].integerData))),e.parseSqueezeAttributes=d=>d.attributes.getInts("axes");const o=d=>{if(!d||d.length!==1)throw new Error("Squeeze requires 1 input.");if(d[0].type==="string")throw new Error("invalid input tensor types.")},u=d=>{if(!d||d.length!==2)throw new Error("Squeeze requires 2 inputs.");if(d[1].type!=="int32")throw new Error("Invalid input type.")}},6558:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.sum=void 0;const i=n(5060),o=n(2039);e.sum=(h,m)=>{d(m);const p={name:"Sum",inputNames:m.map(((_,f)=>`X${f}`)),inputTypes:new Array(m.length).fill(o.TextureType.unpacked)};return[h.run(Object.assign(Object.assign({},p),{get:()=>u(h,m,p)}),m)]};const u=(h,m,p)=>{const _=(0,i.getGlsl)(h.session.backend.glContext.version),f=m[0].dims.slice(),l=`
      void main() {
        vec4 result = ${m.map(((g,v)=>`${_.texture2D}(X${v},TexCoords)`)).join(" + ")};
        ${_.output} = result;
      }
    `;return Object.assign(Object.assign({},p),{output:{dims:f,type:m[0].type,textureType:o.TextureType.unpacked},hasMain:!0,shaderSource:l})},d=h=>{if(!h||h.length===0)throw new Error("Sum requires inputs.");const m=h[0].dims.length;for(let p=1;p<h.length;p++){if(m!==h[p].dims.length)throw new Error("Input shapes are mismatched.");for(let _=0;_<m;_++)if(h[0].dims[_]!==h[p].dims[_])throw new Error("Input shapes are not matched.")}if(h[0].type!=="float32"&&h[0].type!=="float64")throw new Error("Invalid input type.");for(let p=1;p<h.length;p++)if(h[0].type!==h[p].type)throw new Error("Input types are not matched.")}},5723:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.tile=void 0;const i=n(782),o=n(2039);e.tile=(h,m)=>{d(m);const p={name:"Tile",inputNames:["A"],inputTypes:[o.TextureType.unpacked]};return[h.run(Object.assign(Object.assign({},p),{get:()=>u(h,m,p)}),m)]};const u=(h,m,p)=>{const _=m[0].dims.slice(),f=new Array(_.length),l=[];for(let S=0;S<_.length;S++)f[S]=_[S]*m[1].numberData[S],l.push(`inputIdx[${S}] = int(mod(float(outputIdx[${S}]), ${_[S]}.));`);const g=f.length,v=`
      float process(int outputIdx[${g}]) {
        int inputIdx[${g}];
        ${l.join(`
`)}
        return _A(inputIdx);
      }
    `;return Object.assign(Object.assign({},p),{output:{dims:f,type:m[0].type,textureType:o.TextureType.unpacked},shaderSource:v})},d=h=>{if(!h||h.length!==2)throw new Error("Tile requires 2 input.");if(h[1].dims.length!==1)throw new Error("The second input shape must 1 dimension.");if(h[1].dims[0]!==h[0].dims.length)throw new Error("Invalid input shape.");if(i.NUMBER_TYPES.indexOf(h[0].type)===-1)throw new Error("Invalid input type.");if(h[1].type!=="int32"&&h[1].type!=="int16")throw new Error("Invalid repeat type.")}},3738:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseTransposeAttributes=e.transpose=void 0;const i=n(246),o=n(2517),u=n(2039),d={name:"Transpose",inputNames:["A"],inputTypes:[u.TextureType.unpacked]};e.transpose=(l,g,v)=>(f(g),[l.run(Object.assign(Object.assign({},d),{cacheHint:v.cacheKey,get:()=>h(l,g[0],v.perm)}),g)]),e.parseTransposeAttributes=l=>(0,i.createAttributeWithCacheKey)({perm:l.attributes.getInts("perm",[])});const h=(l,g,v)=>{const S=g.dims;v=m(S,v);const T=p(S,v),E=S.length,O=`
      ${_("perm",v,E)}
      float process(int indices[${E}]) {
        int a[${E}];
        perm(a, indices);
        return _A(a);
      }`;return Object.assign(Object.assign({},d),{output:{dims:T,type:g.type,textureType:u.TextureType.unpacked},shaderSource:O})},m=(l,g)=>(g&&g.length!==l.length&&(g=[...l.keys()].reverse()),g),p=(l,g)=>(g=m(l,g),o.ShapeUtil.sortBasedOnPerm(l,g)),_=(l,g,v)=>{const S=[];S.push(`void ${l}(out int a[${v}], int src[${v}]) {`);for(let T=0;T<v;++T)S.push(`	a[${g[T]}]=src[${T}];`);return S.push("	}"),S.join(`
`)},f=l=>{if(!l||l.length!==1)throw new Error("Transpose requires 1 input.");if(l[0].type!=="float32"&&l[0].type!=="float64")throw new Error("input should be float tensor")}},8710:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.encodeAsUint8=void 0;const i=n(5060),o=n(2039);e.encodeAsUint8=(u,d)=>{const h=d.shape,m=(0,i.getGlsl)(u.session.backend.glContext.version),p=`
    const float FLOAT_MAX = 1.70141184e38;
    const float FLOAT_MIN = 1.17549435e-38;

    bool isNaN(float val) {
      return (val < 1.0 || 0.0 < val || val == 0.0) ? false : true;
    }

    highp vec4 encodeAsUint8(highp float v) {
      if (isNaN(v)) {
        return vec4(255, 255, 255, 255);
      }

      highp float av = abs(v);

      if(av < FLOAT_MIN) {
        return vec4(0.0, 0.0, 0.0, 0.0);
      } else if(v > FLOAT_MAX) {
        return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
      } else if(v < -FLOAT_MAX) {
        return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
      }

      highp vec4 c = vec4(0,0,0,0);

      highp float e = floor(log2(av));
      highp float m = exp2(fract(log2(av))) - 1.0;

      c[2] = floor(128.0 * m);
      m -= c[2] / 128.0;
      c[1] = floor(32768.0 * m);
      m -= c[1] / 32768.0;
      c[0] = floor(8388608.0 * m);

      highp float ebias = e + 127.0;
      c[3] = floor(ebias / 2.0);
      ebias -= c[3] * 2.0;
      c[2] += floor(ebias) * 128.0;

      c[3] += 128.0 * step(0.0, -v);

      return c / 255.0;
    }

    void main() {
      float value = ${m.texture2D}(X,TexCoords).r;
      ${m.output} = encodeAsUint8(value);
    }`,_={name:"Uint8Encode",inputTypes:[o.TextureType.unpacked],inputNames:["X"],output:{dims:h,type:d.tensor.type,textureType:o.TextureType.downloadUint8AsFloat},shaderSource:p,hasMain:!0};return u.executeProgram(_,[d.tensor])}},4909:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.tanh=e.tan=e.sqrt=e.sin=e.sigmoid=e.relu=e.not=e.neg=e.log=e.parseLeakyReluAttributes=e.leakyRelu=e.identity=e.floor=e.exp=e.parseEluAttributes=e.elu=e.cos=e.ceil=e.clipV11=e.parseClipAttributes=e.clip=e.atan=e.asin=e.acos=e.abs=e.glslTanh=e.glslTan=e.glslSqrt=e.glslSigmoid=e.glslRelu=e.glslSin=e.glslNot=e.glslNeg=e.glslLog=e.glslLeakyRelu=e.glslIdentity=e.glslClip=e.glslFloor=e.glslExp=e.glslElu=e.glslCos=e.glslCeil=e.glslAtan=e.glslAsin=e.glslAcos=e.glslAbs=void 0;const i=n(246),o=n(2517),u=n(8520),d=n(5060),h=n(2039);function m(){return Y("abs")}function p(){return Y("acos")}function _(){return Y("asin")}function f(){return Y("atan")}function l(){return Y("ceil")}function g(){return Y("cos")}function v(V){return{body:`
  const float alpha = float(${V});

  float elu_(float a) {
    return a >= 0.0 ? a: (exp(a) - 1.0) * alpha;
  }
  vec4 elu_(vec4 v) {
    return vec4(elu_(v.x), elu_(v.y), elu_(v.z), elu_(v.w));
  }
  `,name:"elu",type:u.FunctionType.ValueBased}}function S(){return Y("exp")}function T(){return Y("floor")}function E(V,G){const ie="clip";return{body:`
  const float min = float(${V});
  const float max = float(${G});

  float ${ie}_(float a) {
    return clamp(a, min, max);
  }
  vec4 ${ie}_(vec4 v) {
    return clamp(v, min, max);
  }
  `,name:ie,type:u.FunctionType.ValueBased}}function O(){const V="indentity";return{body:`
  float ${V}_(float a) {
    return a;
  }
  vec4 ${V}_(vec4 v) {
    return v;
  }
  `,name:V,type:u.FunctionType.ValueBased}}function R(V){const G="leakyRelu";return{body:`
  const float alpha = float(${V});

  float ${G}_(float a) {
    return a < 0.0 ? a * alpha : a;
  }
  vec4 ${G}_(vec4 v) {
    return vec4(${G}_(v.x), ${G}_(v.y), ${G}_(v.z), ${G}_(v.w));
  }
  `,name:G,type:u.FunctionType.ValueBased}}function M(){return Y("log")}function C(){return{body:`
  float neg_(float a) {
    return -a;
  }
  vec4 neg_(vec4 v) {
    return -v;
  }
  `,name:"neg",type:u.FunctionType.ValueBased}}function j(){return{body:`
  float not_(float a) {
    return float( ! bool(a) );
  }
  bool not_(bool a) {
    return !a;
  }
  vec4 not_(vec4 v) {
    return vec4(!bool(v.x), !bool(v.y), !bool(v.z), !bool(v.w));
  }
  bvec4 not_(bvec4 v) {
    return bvec4(!v.x, !v.y, !v.z, !v.w);
  }
  `,name:"not",type:u.FunctionType.ValueBased}}function $(){return Y("sin")}function L(){const V="relu";return{body:`
  float ${V}_(float a) {
    return max( a, 0.0 );
  }
  vec4 ${V}_(vec4 v) {
    return max( v, 0.0 );
  }
  `,name:V,type:u.FunctionType.ValueBased}}function N(){const V="sigmoid";return{body:`
  float ${V}_(float a) {
    return 1.0 / (1.0 + exp(-a));
  }
  vec4 ${V}_(vec4 v) {
    return 1.0 / (1.0 + exp(-v));
  }
  `,name:V,type:u.FunctionType.ValueBased}}function B(){return Y("sqrt")}function U(){return Y("tan")}function H(){const V="tanh";return{body:`
  float ${V}_(float a) {
    a = clamp(a, -10., 10.);
    a = exp(2.*a);
    return (a - 1.) / (a + 1.);
  }
  vec4 ${V}_(vec4 v) {
    v = clamp(v, -10., 10.);
    v = exp(2.*v);
    return (v - 1.) / (v + 1.);
  }
  `,name:V,type:u.FunctionType.ValueBased}}function Y(V){return{body:`
  float ${V}_(float a) {
    return ${V}(a);
  }
  vec4 ${V}_(vec4 v) {
    return ${V}(v);
  }
  `,name:V,type:u.FunctionType.ValueBased}}e.glslAbs=m,e.glslAcos=p,e.glslAsin=_,e.glslAtan=f,e.glslCeil=l,e.glslCos=g,e.glslElu=v,e.glslExp=S,e.glslFloor=T,e.glslClip=E,e.glslIdentity=O,e.glslLeakyRelu=R,e.glslLog=M,e.glslNeg=C,e.glslNot=j,e.glslSin=$,e.glslRelu=L,e.glslSigmoid=N,e.glslSqrt=B,e.glslTan=U,e.glslTanh=H;const K=(V,G,ie,Z)=>{const te=V.session.pack?h.TextureType.packed:h.TextureType.unpacked,ee={name:ie.name,inputTypes:[te],inputNames:["A"],cacheHint:Z};return Object.assign(Object.assign({},ee),{get:()=>((le,ge,Ae,Te)=>{const Ce=le.session.pack?h.TextureType.packed:h.TextureType.unpacked,De=(0,d.getGlsl)(le.session.backend.glContext.version);return Object.assign(Object.assign({},ge),{output:{dims:Ae.dims,type:Ae.type,textureType:Ce},shaderSource:`
     ${Te.body}
     void main() {
       vec4 v = ${De.texture2D}(A, TexCoords);
       v = ${Te.name}_(v);
       ${De.output} = v;
     }
     `,hasMain:!0})})(V,ee,G,ie)})};e.abs=(V,G)=>[V.run(K(V,G[0],m()),G)],e.acos=(V,G)=>[V.run(K(V,G[0],p()),G)],e.asin=(V,G)=>[V.run(K(V,G[0],_()),G)],e.atan=(V,G)=>[V.run(K(V,G[0],f()),G)],e.clip=(V,G,ie)=>[V.run(K(V,G[0],E(ie.min,ie.max),ie.cacheKey),G)],e.parseClipAttributes=V=>(0,i.createAttributeWithCacheKey)({min:V.attributes.getFloat("min",o.MIN_CLIP),max:V.attributes.getFloat("max",o.MAX_CLIP)}),e.clipV11=(V,G)=>{const ie=z(V,G);return(0,e.clip)(V,[G[0]],ie)};const z=(V,G)=>{if(G.length>=3&&(!V.session.isInitializer(G[1].dataId)||!V.session.isInitializer(G[2].dataId)))throw new Error("dynamic clip attributes are not allowed");const ie=G.length>=3?G[1].numberData[0]:o.MIN_CLIP,Z=G.length>=3?G[2].numberData[0]:o.MAX_CLIP;return(0,i.createAttributeWithCacheKey)({min:ie,max:Z})};e.ceil=(V,G)=>[V.run(K(V,G[0],l()),G)],e.cos=(V,G)=>[V.run(K(V,G[0],g()),G)],e.elu=(V,G,ie)=>[V.run(K(V,G[0],v(ie.alpha),ie.cacheKey),G)],e.parseEluAttributes=V=>(0,i.createAttributeWithCacheKey)({alpha:V.attributes.getFloat("alpha",1)}),e.exp=(V,G)=>[V.run(K(V,G[0],S()),G)],e.floor=(V,G)=>[V.run(K(V,G[0],T()),G)],e.identity=(V,G)=>[V.run(K(V,G[0],O()),G)],e.leakyRelu=(V,G,ie)=>[V.run(K(V,G[0],R(ie.alpha),ie.cacheKey),G)],e.parseLeakyReluAttributes=V=>(0,i.createAttributeWithCacheKey)({alpha:V.attributes.getFloat("alpha",.01)}),e.log=(V,G)=>[V.run(K(V,G[0],M()),G)],e.neg=(V,G)=>[V.run(K(V,G[0],C()),G)],e.not=(V,G)=>[V.run(K(V,G[0],j()),G)],e.relu=(V,G)=>[V.run(K(V,G[0],L()),G)],e.sigmoid=(V,G)=>[V.run(K(V,G[0],N()),G)],e.sin=(V,G)=>[V.run(K(V,G[0],$()),G)],e.sqrt=(V,G)=>[V.run(K(V,G[0],B()),G)],e.tan=(V,G)=>[V.run(K(V,G[0],U()),G)],e.tanh=(V,G)=>[V.run(K(V,G[0],H()),G)]},5611:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createUnpackProgramInfoLoader=e.createUnpackProgramInfo=void 0;const i=n(5060),o=n(2039),u=n(9390),d=n(2827),h={name:"unpack",inputNames:["A"],inputTypes:[o.TextureType.packed]};e.createUnpackProgramInfo=(m,p)=>{const _=p.dims.length,f=(0,d.getChannels)("rc",_),l=f.slice(-2),g=(0,u.getCoordsDataType)(_),v=(0,d.unpackFromChannel)(),S=p.dims.length===0?"":(function(O,R){if(O===1)return"rc";let M="";for(let C=0;C<O;C++)M+=R[C],C<O-1&&(M+=",");return M})(_,f),T=_<=1?"rc":`vec2(${l.join(",")})`,E=`
    ${v}
    void main() {
      ${g} rc = getOutputCoords();

       // Sample the texture with the coords to get the rgba channel value.
       vec4 packedInput = getA(${S});

       ${(0,i.getGlsl)(m.session.backend.glContext.version).output} = vec4(getChannel(packedInput, ${T}), 0, 0, 0);
     }
   `;return Object.assign(Object.assign({},h),{hasMain:!0,output:{dims:p.dims,type:p.type,textureType:o.TextureType.unpacked},shaderSource:E})},e.createUnpackProgramInfoLoader=(m,p)=>Object.assign(Object.assign({},h),{get:()=>(0,e.createUnpackProgramInfo)(m,p)})},8428:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseUnsqueezeAttributes=e.unsqueezeV13=e.unsqueeze=void 0;const i=n(2517);e.unsqueeze=(d,h,m)=>{o(h);const p=i.ShapeUtil.unsqueezeShape(h[0].dims,m);return[d.reshapeUnpacked(h[0],p)]},e.unsqueezeV13=(d,h)=>(u(h),(0,e.unsqueeze)(d,[h[0]],Array.from(h[1].integerData))),e.parseUnsqueezeAttributes=d=>d.attributes.getInts("axes");const o=d=>{if(!d||d.length!==1)throw new Error("Unsqueeze requires 1 input.");if(d[0].type==="string")throw new Error("invalid input tensor types.")},u=d=>{if(!d||d.length!==2)throw new Error("Unsqueeze requires 2 inputs.");if(d[1].type!=="int32")throw new Error("Invalid input type.")}},9793:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.scalesValidation=e.validateInputs=e.parseUpsampleAttributes=e.parseUpsampleAttributesV9=e.parseUpsampleAttributesV7=e.upsample=void 0;const i=n(246),o=n(5060),u=n(2039),d={name:"Upsample",inputNames:["X"],inputTypes:[u.TextureType.unpacked]};e.upsample=(m,p,_)=>((0,e.validateInputs)(p,_),[m.run(Object.assign(Object.assign({},d),{cacheHint:_.cacheKey,get:()=>h(m,p,_)}),p)]),e.parseUpsampleAttributesV7=m=>(0,e.parseUpsampleAttributes)(m,7),e.parseUpsampleAttributesV9=m=>(0,e.parseUpsampleAttributes)(m,9),e.parseUpsampleAttributes=(m,p)=>{const _=p>=10,f=m.attributes.getString("mode","nearest");if(f!=="nearest"&&f!=="linear"&&(p<11||f!=="cubic"))throw new Error(`unrecognized mode: ${f}`);let l=[];p<9&&(l=m.attributes.getFloats("scales"),(0,e.scalesValidation)(l,f,_));const g=m.attributes.getFloat("extrapolation_value",0),v=p>10?m.attributes.getString("coordinate_transformation_mode","half_pixel"):"asymmetric";if(["asymmetric","pytorch_half_pixel","tf_half_pixel_for_nn","align_corners","tf_crop_and_resize","half_pixel"].indexOf(v)===-1)throw new Error(`coordinate_transform_mode '${v}' is not supported`);const S=v==="tf_crop_and_resize",T=S,E=f==="nearest"&&p>=11?m.attributes.getString("nearest_mode","round_prefer_floor"):"";if(["round_prefer_floor","round_prefer_ceil","floor","ceil",""].indexOf(E)===-1)throw new Error(`nearest_mode '${E}' is not supported`);const O=m.attributes.getFloat("cubic_coeff_a",-.75),R=m.attributes.getInt("exclude_outside",0)!==0;if(R&&f!=="cubic")throw new Error("exclude_outside can be set to 1 only when mode is CUBIC.");const M=p<11||f==="nearest"&&v==="asymmetric"&&E==="floor";let C=0,j=0,$=0;return p>10?m.inputs.length>2?(C=1,j=2,$=3):(j=1,$=2):p===9&&(j=1),(0,i.createAttributeWithCacheKey)({opset:p,isResize:_,mode:f,scales:l,extrapolationValue:g,coordinateTransformMode:v,useExtrapolation:T,needRoiInput:S,nearestMode:E,cubicCoefficientA:O,excludeOutside:R,useNearest2xOptimization:M,roiInputIdx:C,scalesInputIdx:j,sizesInputIdx:$})};const h=(m,p,_)=>{const f=(0,o.getGlsl)(m.session.backend.glContext.version),[l,g]=m.calculateTextureWidthAndHeight(p[0].dims,u.TextureType.unpacked),v=p[0].dims.map((($,L)=>Math.floor($*_.scales[L]))),[S,T]=m.calculateTextureWidthAndHeight(v,u.TextureType.unpacked),E=v.length,O=new Array(E),R=new Array(E);let M=`
      int output_pitches[${E}];
      int input_pitches[${E}];
      `;for(let $=E-1;$>=0;$--)O[$]=$===E-1?1:O[$+1]*v[$+1],R[$]=$===E-1?1:R[$+1]*p[0].dims[$+1],M+=`
        output_pitches[${$}] = ${O[$]};
        input_pitches[${$}] = ${R[$]};
        `;const C=`
      float getInputFloat(int index) {
        vec2 coords = offsetToCoords(index, ${l}, ${g});
        float value = getColorAsFloat(${f.texture2D}(X, coords));
        return value;
      }
      `,j=_.mode==="nearest"?`
    ${C}
    float process(int indices[${E}]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${S}, ${T});

      ${M}

      int d, m;
      for (int dim = 0; dim < ${E}; ++dim) {
        d = output_index / output_pitches[dim];
        m = output_index - d * output_pitches[dim];
        output_index = m;

        if (scales[dim] != 1 && d > 0) {
          int d2 = d / scales[dim];
          m = d - d2 * scales[dim];
          d = d2;
        }
        input_index += input_pitches[dim] * d;
      }

      return getInputFloat(input_index);
    }`:E===4?`
    ${C}
    float process(int indices[4]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${S}, ${T});

      ${M}

      int m;
      int index_of_dim0, index_of_dim1, index_of_dim2, index_of_dim3;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m / output_pitches[1];
      m = m - index_of_dim1 * output_pitches[1];
      index_of_dim2 = m / output_pitches[2];
      m = m - index_of_dim2 * output_pitches[2];
      index_of_dim3 = m;

      int index_of_input_dim2, index_of_input_dim3, x_offset, y_offset;
      index_of_input_dim2 = index_of_dim2 / scales[2];
      y_offset = index_of_dim2 - index_of_input_dim2 * scales[2];
      index_of_input_dim3 = index_of_dim3 / scales[3];
      x_offset = index_of_dim3 - index_of_input_dim3 * scales[3];

      input_index = index_of_dim0 * input_pitches[0] +
            index_of_dim1 * input_pitches[1] +
            index_of_input_dim2 * input_pitches[2] +
            index_of_input_dim3;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim2 = false;
      if (index_of_input_dim2 == (${p[0].dims[2]} - 1)) {
        // It's the end in dimension 2
        x01 = x00;
        end_of_dim2 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[2]);
      }

      if (index_of_input_dim3 == (input_pitches[2] - 1)) {
        // It's the end in dimension 3
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim2 ? x10 : getInputFloat(input_index + input_pitches[2] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[2]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[2]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[3]);
    }`:`
    ${C}
    float process(int indices[2]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${S}, ${T});

      ${M}

      int m;
      int index_of_dim0, index_of_dim1;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m;

      int index_of_input_dim0, index_of_input_dim1, x_offset, y_offset;
      index_of_input_dim0 = index_of_dim0 / scales[0];
      y_offset = index_of_dim0 - index_of_input_dim0 * scales[0];
      index_of_input_dim1 = index_of_dim1 / scales[1];
      x_offset = index_of_dim1 - index_of_input_dim1 * scales[1];

      input_index = index_of_input_dim0 * input_pitches[0] + index_of_input_dim1;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim0 = false;
      if (index_of_input_dim0 == (${p[0].dims[0]} - 1)) {
        // It's the end in dimension 0
        x01 = x00;
        end_of_dim0 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[0]);
      }

      if (index_of_input_dim1 == (input_pitches[0] - 1)) {
        // It's the end in dimension 1
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim0 ? x10 : getInputFloat(input_index + input_pitches[0] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[0]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[0]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[1]);
    }`;return Object.assign(Object.assign({},d),{output:{dims:v,type:p[0].type,textureType:u.TextureType.unpacked},shaderSource:j,variables:[{name:"scales",type:"int",arrayLength:_.scales.length,data:_.scales.map(($=>Math.ceil($)))}]})};e.validateInputs=(m,p)=>{if(!m||p.opset<9&&m.length!==1||p.opset>=9&&p.opset<11&&m.length!==2||p.opset>=11&&m.length<2)throw new Error("invalid inputs.");if(p.scales.length>0&&m[0].dims.length!==p.scales.length)throw new Error("Invalid input shape.");if(m[0].type==="string")throw new Error("Invalid input tensor types.")},e.scalesValidation=(m,p,_)=>{if(_){for(const f of m)if(f<=0)throw new Error("Scale value should be greater than 0.")}else for(const f of m)if(f<1)throw new Error("Scale value should be greater than or equal to 1.");if(!(p!=="linear"&&p!=="cubic"||m.length===2||m.length===4&&m[0]===1&&m[1]===1))throw new Error(`'Linear' mode and 'Cubic' mode only support 2-D inputs ('Bilinear', 'Bicubic')         or 4-D inputs with the corresponding outermost 2 scale values being 1         in the ${_?"Resize":"Upsample"} opeartor.`)}},1958:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ProgramManager=void 0;const i=n(1670),o=n(6231),u=n(8879),d=n(5060);e.ProgramManager=class{constructor(h,m,p){this.profiler=h,this.glContext=m,this.textureLayoutStrategy=p,this.repo=new Map,this.attributesBound=!1}getArtifact(h){return this.repo.get(h)}setArtifact(h,m){this.repo.set(h,m)}run(h,m,p){var _;this.profiler.event("op",`ProgramManager.run ${(_=h.programInfo.name)!==null&&_!==void 0?_:"unknown kernel"}`,(()=>{var f;const l=this.glContext.gl,g=h.program;l.useProgram(g);try{this.bindOutput(p),this.attributesBound||this.bindAttributes(h.attribLocations),this.bindUniforms(h.uniformLocations,(f=h.programInfo.variables)!==null&&f!==void 0?f:[],m)}catch(v){throw o.Logger.error("ProgramManager",h.programInfo.shaderSource),v}this.profiler.event("backend","GlContext.draw()",(()=>{this.glContext.draw()}))}),this.glContext)}dispose(){this.vertexShader&&this.glContext.deleteShader(this.vertexShader),this.repo.forEach((h=>this.glContext.deleteProgram(h.program)))}build(h,m,p){return this.profiler.event("backend","ProgramManager.build",(()=>{const _=new u.GlslPreprocessor(this.glContext,h,m,p),f=_.preprocess(),l=this.compile(f);return{programInfo:h,program:l,uniformLocations:this.getUniformLocations(l,_.context.programInfo.inputNames,_.context.programInfo.variables),attribLocations:this.getAttribLocations(l)}}))}compile(h){if(!this.vertexShader){o.Logger.verbose("ProrgramManager","Compiling and caching Vertex shader for the first time");const _=(0,d.getVertexShaderSource)(this.glContext.version);this.vertexShader=this.glContext.compileShader(_,this.glContext.gl.VERTEX_SHADER)}i.env.debug&&o.Logger.verbose("ProrgramManager",`FragShader:
${h}
`);const m=this.glContext.compileShader(h,this.glContext.gl.FRAGMENT_SHADER),p=this.glContext.createProgram(this.vertexShader,m);return this.glContext.deleteShader(m),p}bindOutput(h){const m=h.width,p=h.height;o.Logger.verbose("ProrgramManager",`Binding output texture to Framebuffer: w/h=${m}/${p}, shape=${h.shape}, type=${h.tensor.type}`),this.glContext.attachFramebuffer(h.texture,m,p)}bindAttributes(h){const m=h.position,p=h.textureCoord;this.glContext.setVertexAttributes(m,p),this.attributesBound=!0}bindUniforms(h,m,p){var _;const f=this.glContext.gl;let l=0;for(const{name:g,type:v,location:S,arrayLength:T}of h){const E=(_=m.find((O=>O.name===g)))===null||_===void 0?void 0:_.data;if(v!=="sampler2D"&&!E)throw new Error(`variable '${g}' does not have data defined in program info`);switch(v){case"sampler2D":this.bindTexture(p[l],S,l),l++;break;case"float":T?f.uniform1fv(S,E):f.uniform1f(S,E);break;case"int":T?f.uniform1iv(S,E):f.uniform1i(S,E);break;default:throw new Error(`Uniform not implemented: ${v}`)}}}bindTexture(h,m,p){this.glContext.bindTextureToUniform(h.texture,p,m)}getAttribLocations(h){return{position:this.getAttribLocation(h,"position"),textureCoord:this.getAttribLocation(h,"textureCoord")}}getUniformLocations(h,m,p){const _=[];if(m)for(const f of m)_.push({name:f,type:"sampler2D",location:this.getUniformLocation(h,f)});if(p)for(const f of p)_.push(Object.assign(Object.assign({},f),{location:this.getUniformLocation(h,f.name)}));return _}getUniformLocation(h,m){const p=this.glContext.gl.getUniformLocation(h,m);if(p===null)throw new Error(`Uniform ${m} not found.`);return p}getAttribLocation(h,m){return this.glContext.gl.getAttribLocation(h,m)}}},6416:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLSessionHandler=void 0;const i=n(6231),o=n(1047),u=n(8316),d=n(1640),h=n(1958),m=n(7859),p=n(5702);e.WebGLSessionHandler=class{constructor(_,f){this.backend=_,this.context=f,this.layoutStrategy=new m.PreferLogicalStrategy(_.glContext.maxTextureSize),this.programManager=new h.ProgramManager(this.context.profiler,_.glContext,this.layoutStrategy),this.textureManager=new p.TextureManager(_.glContext,this.layoutStrategy,this.context.profiler,{reuseTextures:_.textureCacheMode==="full"}),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map,this.pack=_.pack,this.pack2unpackMap=new Map,this.unpack2packMap=new Map}createInferenceHandler(){return new u.WebGLInferenceHandler(this)}onGraphInitialized(_){const f=_.getValues().filter((l=>l.from===-1&&l.tensor)).map((l=>l.tensor.dataId));this.initializers=new Set(f)}isInitializer(_){return!!this.initializers&&this.initializers.has(_)}addInitializer(_){this.initializers.add(_)}getTextureData(_,f){return f?this.packedTextureDataCache.get(_):this.unpackedTextureDataCache.get(_)}setTextureData(_,f,l=!1){i.Logger.verbose("WebGLSessionHandler","Storing Texture data in cache"),l?this.packedTextureDataCache.set(_,f):this.unpackedTextureDataCache.set(_,f)}dispose(){this.programManager.dispose(),this.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach((_=>this.textureManager.releaseTexture(_,!0))),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach((_=>this.textureManager.releaseTexture(_,!0))),this.unpackedTextureDataCache=new Map}resolve(_,f,l){const g=(0,o.resolveOperator)(_,f,d.WEBGL_OP_RESOLVE_RULES);return{impl:g.opImpl,context:g.opInit?g.opInit(_,l):_}}}},7769:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Uint8DataEncoder=e.RGBAFloatDataEncoder=e.RedFloat32DataEncoder=void 0;const i=n(6231);e.RedFloat32DataEncoder=class{constructor(o,u=1){if(u===1)this.internalFormat=o.R32F,this.format=o.RED,this.textureType=o.FLOAT,this.channelSize=u;else{if(u!==4)throw new Error(`Invalid number of channels: ${u}`);this.internalFormat=o.RGBA32F,this.format=o.RGBA,this.textureType=o.FLOAT,this.channelSize=u}}encode(o,u){let d,h;return o.constructor!==Float32Array&&(i.Logger.warning("Encoder","data was not of type Float32; creating new Float32Array"),h=new Float32Array(o)),u*this.channelSize>o.length?(i.Logger.warning("Encoder","Source data too small. Allocating larger array"),h=o,d=this.allocate(u*this.channelSize),h.forEach(((m,p)=>d[p]=m))):(h=o,d=h),d}allocate(o){return new Float32Array(4*o)}decode(o,u){return this.channelSize===1?o.filter(((d,h)=>h%4==0)).subarray(0,u):o.subarray(0,u)}},e.RGBAFloatDataEncoder=class{constructor(o,u=1,d){if(u!==1&&u!==4)throw new Error(`Invalid number of channels: ${u}`);this.internalFormat=o.RGBA,this.format=o.RGBA,this.channelSize=u,this.textureType=d||o.FLOAT}encode(o,u){let d=o;return this.channelSize===1&&(i.Logger.verbose("Encoder","Exploding into a larger array"),d=this.allocate(u),o.forEach(((h,m)=>d[4*m]=h))),d}allocate(o){return new Float32Array(4*o)}decode(o,u){return this.channelSize===1?o.filter(((d,h)=>h%4==0)).subarray(0,u):o.subarray(0,u)}},e.Uint8DataEncoder=class{constructor(o,u=1){if(this.channelSize=4,u===1)this.internalFormat=o.ALPHA,this.format=o.ALPHA,this.textureType=o.UNSIGNED_BYTE,this.channelSize=u;else{if(u!==4)throw new Error(`Invalid number of channels: ${u}`);this.internalFormat=o.RGBA,this.format=o.RGBA,this.textureType=o.UNSIGNED_BYTE,this.channelSize=u}}encode(o,u){return new Uint8Array(o.buffer,o.byteOffset,o.byteLength)}allocate(o){return new Uint8Array(o*this.channelSize)}decode(o,u){if(o instanceof Uint8Array)return o.subarray(0,u);throw new Error(`Invalid array type: ${o.constructor}`)}}},7859:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getBatchDim=e.sizeToSquarishShape=e.getRowsCols=e.sizeFromShape=e.isInt=e.parseAxisParam=e.squeezeShape=e.PreferLogicalStrategy=e.AlwaysKeepOriginalSizeStrategy=void 0;const i=n(6231),o=n(2517);function u(_,f){const l=[],g=[],v=f!=null&&Array.isArray(f)&&f.length===0,S=f==null||v?null:d(f,_).sort();let T=0;for(let E=0;E<_.length;++E){if(S!=null){if(S[T]===E&&_[E]!==1)throw new Error(`Can't squeeze axis ${E} since its dim '${_[E]}' is not 1`);(S[T]==null||S[T]>E)&&_[E]===1&&(l.push(_[E]),g.push(E)),S[T]<=E&&T++}_[E]!==1&&(l.push(_[E]),g.push(E))}return{newShape:l,keptDims:g}}function d(_,f){const l=f.length;return _=_==null?f.map(((g,v)=>v)):[].concat(_),(0,o.assert)(_.every((g=>g>=-l&&g<l)),(()=>`All values in axis param must be in range [-${l}, ${l}) but got axis ${_}`)),(0,o.assert)(_.every(h),(()=>`All values in axis param must be integers but got axis ${_}`)),_.map((g=>g<0?l+g:g))}function h(_){return _%1==0}function m(_){if(_.length===0)return 1;let f=_[0];for(let l=1;l<_.length;l++)f*=_[l];return f}function p(_){const f=Math.ceil(Math.sqrt(_));return[f,Math.ceil(_/f)]}e.AlwaysKeepOriginalSizeStrategy=class{constructor(_){this.maxTextureSize=_}computeTextureWH(_,f){if(_.length===0)return[1,1];const l=this.maxTextureSize;if(f&&f.breakAxis!==void 0){const S=f.breakAxis>=_.length?1:_.slice(f.breakAxis).reduce(((E,O)=>E*O)),T=f.breakAxis<=0?1:_.slice(0,f.breakAxis).reduce(((E,O)=>E*O));if(!(S>l||T>l))return[S,T];i.Logger.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${_}, breakAxis:${f.breakAxis}`)}const g=_.reduce(((S,T)=>S*T));let v=Math.floor(Math.sqrt(g));for(;v<l&&v<g&&g%v!=0;v++);if(v>=l||g%v!=0)throw new Error(`The given dimensions are outside this GPU's boundaries: ${_}`);return[v,g/v]}},e.PreferLogicalStrategy=class{constructor(_){this.maxTextureSize=_}computeTextureWH(_,f){const l=this.computeTexture(_,f);return f&&f.isPacked&&(l[0]/=2,l[1]/=2),f&&f.reverseWH?[l[1],l[0]]:l}computeTexture(_,f){const l=f&&f.isPacked;if(_.length===0)return l?[2,2]:[1,1];let g=this.maxTextureSize;if(f&&f.breakAxis!==void 0){const T=f.breakAxis>=_.length?1:_.slice(f.breakAxis).reduce(((O,R)=>O*R)),E=f.breakAxis<=0?1:_.slice(0,f.breakAxis).reduce(((O,R)=>O*R));if(!(T>g||E>g))return[T,E];i.Logger.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${_}, breakAxis:${f.breakAxis}`)}let v=_.slice(0);l&&(g*=2,v=v.map(((T,E)=>E>=v.length-2?v[E]%2==0?v[E]:v[E]+1:v[E])),v.length===1&&(v=[2,v[0]])),v.length!==2&&(v=u(v).newShape);const S=m(v);return v.length<=1&&S<=g?[1,S]:v.length===2&&v[0]<=g&&v[1]<=g?v:v.length===3&&v[0]*v[1]<=g&&v[2]<=g?[v[0]*v[1],v[2]]:v.length===3&&v[0]<=g&&v[1]*v[2]<=g?[v[0],v[1]*v[2]]:v.length===4&&v[0]*v[1]*v[2]<=g&&v[3]<=g?[v[0]*v[1]*v[2],v[3]]:v.length===4&&v[0]<=g&&v[1]*v[2]*v[3]<=g?[v[0],v[1]*v[2]*v[3]]:l?p(S/4).map((T=>2*T)):p(S)}},e.squeezeShape=u,e.parseAxisParam=d,e.isInt=h,e.sizeFromShape=m,e.getRowsCols=function(_){if(_.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[_.length>1?_[_.length-2]:1,_[_.length-1]]},e.sizeToSquarishShape=p,e.getBatchDim=function(_,f=2){return m(_.slice(0,_.length-f))}},4057:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createTextureLayoutFromShape=e.calculateTextureWidthAndHeight=e.createTextureLayoutFromTextureType=void 0;const i=n(2517),o=n(2039);e.createTextureLayoutFromTextureType=(u,d,h)=>{const m=h===o.TextureType.unpacked||h===o.TextureType.unpackedReversed?1:4,p=h===o.TextureType.packed,_=h===o.TextureType.unpackedReversed||h===o.TextureType.packed,f=h===o.TextureType.packedLastDimension?d.length-1:void 0,l=h===o.TextureType.packedLastDimension?d.map(((g,v)=>v===d.length-1?4*g:g)):void 0;return(0,e.createTextureLayoutFromShape)(u,d,m,l,{isPacked:p,reverseWH:_,breakAxis:f})},e.calculateTextureWidthAndHeight=(u,d,h)=>{const m=(0,e.createTextureLayoutFromTextureType)(u,d,h);return[m.width,m.height]},e.createTextureLayoutFromShape=(u,d,h=1,m,p)=>{const _=!(!p||!p.isPacked),[f,l]=u.computeTextureWH(_&&m||d,p),g=d.length;let v=d.slice(0);if(g===0&&(v=[1]),h===1)m=d;else if(_){if(h!==4)throw new Error("a packed texture must be 4-channel");m=d,g>0&&(v[g-1]=Math.ceil(v[g-1]/2)),g>1&&(v[g-2]=Math.ceil(v[g-2]/2))}else if(!m)throw new Error("Unpacked shape is needed when using channels > 1");return{width:f,height:l,channels:h,isPacked:_,shape:v,strides:i.ShapeUtil.computeStrides(v),unpackedShape:m,reversedWH:p&&p.reverseWH}}},5702:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextureManager=void 0;const i=n(6231);e.TextureManager=class{constructor(o,u,d,h){this.glContext=o,this.layoutStrategy=u,this.profiler=d,this.config=h,this.pendingRead=new Map,h.reuseTextures&&(this.inUseTextures=new Map,this.idleTextures=new Map,this.textureLookup=new Map)}createTextureFromLayout(o,u,d,h){const m=this.toEncoderType(o),p=this.glContext.getEncoder(m,u.channels||1,h);if(u.isPacked&&h===1)throw new Error("not implemented");const _=u.width,f=u.height;let l,g;if(this.config.reuseTextures){l=`${_}x${f}_${p.format}_${p.internalFormat}_${p.textureType}`,g=this.inUseTextures.get(l),g||(g=[],this.inUseTextures.set(l,g));const S=this.idleTextures.get(l);if(S&&S.length>0){const T=S.pop();return g.push(T),h===1&&this.glContext.updateTexture(T,_,f,p,this.toTextureData(o,d)),T}}i.Logger.verbose("TextureManager",`Creating new texture of size ${u.width}x${u.height}`);const v=this.glContext.allocateTexture(_,f,p,this.toTextureData(o,d));return this.config.reuseTextures&&(g.push(v),this.textureLookup.set(v,l)),v}readTexture(o,u,d){return d||(d=1),this.profiler.event("backend","TextureManager.readTexture",(()=>{const h=o.shape.reduce(((p,_)=>p*_))*d,m=this.glContext.readTexture(o.texture,o.width,o.height,h,this.toEncoderType(u),d);return this.toTensorData(u,m)}))}async readTextureAsync(o,u,d){const h=o.tensor.dataId;if(d||(d=1),this.pendingRead.has(h)){const m=this.pendingRead.get(h);return new Promise((p=>m?.push(p)))}return this.profiler.event("backend","TextureManager.readTextureAsync",(async()=>{this.pendingRead.set(h,[]);const m=o.shape.reduce(((l,g)=>l*g))*d;await this.glContext.createAndWaitForFence();const p=this.glContext.readTexture(o.texture,o.width,o.height,m,this.toEncoderType(u),d),_=this.toTensorData(u,p),f=this.pendingRead.get(h);return this.pendingRead.delete(h),f?.forEach((l=>l(_))),_}))}readUint8TextureAsFloat(o){return this.profiler.event("backend","TextureManager.readUint8TextureAsFloat",(()=>{const u=o.shape.reduce(((h,m)=>h*m)),d=this.glContext.readTexture(o.texture,o.width,o.height,4*u,"byte",4);return new Float32Array(d.buffer,d.byteOffset,u)}))}releaseTexture(o,u){let d;if(this.config.reuseTextures&&(d=this.textureLookup.get(o.texture),d)){u&&this.textureLookup.delete(d);const h=this.inUseTextures.get(d);if(h){const m=h.indexOf(o.texture);if(m!==-1){h.splice(m,1);let p=this.idleTextures.get(d);p||(p=[],this.idleTextures.set(d,p)),p.push(o.texture)}}}d&&!u||(i.Logger.verbose("TextureManager",`Deleting texture of size ${o.width}x${o.height}`),this.glContext.deleteTexture(o.texture))}toTensorData(o,u){switch(o){case"int16":return u instanceof Int16Array?u:Int16Array.from(u);case"int32":return u instanceof Int32Array?u:Int32Array.from(u);case"int8":return u instanceof Int8Array?u:Int8Array.from(u);case"uint16":return u instanceof Uint16Array?u:Uint16Array.from(u);case"uint32":return u instanceof Uint32Array?u:Uint32Array.from(u);case"uint8":case"bool":return u instanceof Uint8Array?u:Uint8Array.from(u);case"float32":return u instanceof Float32Array?u:Float32Array.from(u);case"float64":return u instanceof Float64Array?u:Float64Array.from(u);default:throw new Error(`TensorData type ${o} is not supported`)}}toTextureData(o,u){if(u)return u instanceof Float32Array?u:new Float32Array(u)}toEncoderType(o){return"float"}clearActiveTextures(){this.glContext.clearActiveTextures()}}},2039:(t,e)=>{var n;Object.defineProperty(e,"__esModule",{value:!0}),e.TextureType=void 0,(n=e.TextureType||(e.TextureType={}))[n.unpacked=0]="unpacked",n[n.unpackedReversed=1]="unpackedReversed",n[n.packed=2]="packed",n[n.downloadUint8AsFloat=3]="downloadUint8AsFloat",n[n.packedLastDimension=4]="packedLastDimension"},9390:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getGlChannels=e.getCoordsDataType=e.getSqueezedParams=e.squeezeInputShape=e.generateShaderFuncNameFromInputSamplerNameAtOutCoords=e.generateShaderFuncNameFromInputSamplerName=e.repeatedTry=e.getPackedShape=void 0;const i=n(2517);e.getPackedShape=function(o){const u=o.length;return o.slice(0,u-1).concat(o[u-1]/4)},e.repeatedTry=async function(o,u=(h=>0),d){return new Promise(((h,m)=>{let p=0;const _=()=>{if(o())return void h();p++;const f=u(p);d!=null&&p>=d?m():setTimeout(_,f)};_()}))},e.generateShaderFuncNameFromInputSamplerName=function(o){return(0,i.assert)(o!==void 0&&o.length!==0,(()=>"empty string found for sampler name")),"get"+o.charAt(0).toUpperCase()+o.slice(1)},e.generateShaderFuncNameFromInputSamplerNameAtOutCoords=function(o){return(0,i.assert)(o!==void 0&&o.length!==0,(()=>"empty string found for sampler name")),"get"+o.charAt(0).toUpperCase()+o.slice(1)+"AtOutCoords"},e.squeezeInputShape=function(o,u){let d=JSON.parse(JSON.stringify(o));return d=u,d},e.getSqueezedParams=function(o,u){return u.map((d=>o[d])).join(", ")},e.getCoordsDataType=function(o){if(o<=1)return"int";if(o===2)return"ivec2";if(o===3)return"ivec3";if(o===4)return"ivec4";if(o===5)return"ivec5";if(o===6)return"ivec6";throw Error(`GPU for rank ${o} is not yet supported`)},e.getGlChannels=function(o=6){return["x","y","z","w","u","v"].slice(0,o)}},7305:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createNewWebGLContext=e.createWebGLContext=void 0;const i=n(6231),o=n(1713),u={};function d(h){const m=(function(){if(typeof document>"u"){if(typeof OffscreenCanvas>"u")throw new TypeError("failed to create canvas: OffscreenCanvas is not supported");return new OffscreenCanvas(1,1)}const f=document.createElement("canvas");return f.width=1,f.height=1,f})();let p;const _={alpha:!1,depth:!1,antialias:!1,stencil:!1,preserveDrawingBuffer:!1,premultipliedAlpha:!1,failIfMajorPerformanceCaveat:!1};if((!h||h==="webgl2")&&(p=m.getContext("webgl2",_),p))try{return new o.WebGLContext(p,2)}catch(f){i.Logger.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl2'. Error: ${f}`)}if((!h||h==="webgl")&&(p=m.getContext("webgl",_)||m.getContext("experimental-webgl",_),p))try{return new o.WebGLContext(p,1)}catch(f){i.Logger.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl' or 'experimental-webgl'. Error: ${f}`)}throw new Error("WebGL is not supported")}e.createWebGLContext=function h(m){let p;m&&m!=="webgl2"||!("webgl2"in u)?m&&m!=="webgl"||!("webgl"in u)||(p=u.webgl):p=u.webgl2,p=p||d(m),m=m||p.version===1?"webgl":"webgl2";const _=p.gl;return u[m]=p,_.isContextLost()?(delete u[m],h(m)):(_.disable(_.DEPTH_TEST),_.disable(_.STENCIL_TEST),_.disable(_.BLEND),_.disable(_.DITHER),_.disable(_.POLYGON_OFFSET_FILL),_.disable(_.SAMPLE_COVERAGE),_.enable(_.SCISSOR_TEST),_.enable(_.CULL_FACE),_.cullFace(_.BACK),p)},e.createNewWebGLContext=d},1713:function(t,e,n){var i=this&&this.__createBinding||(Object.create?function(_,f,l,g){g===void 0&&(g=l);var v=Object.getOwnPropertyDescriptor(f,l);v&&!("get"in v?!f.__esModule:v.writable||v.configurable)||(v={enumerable:!0,get:function(){return f[l]}}),Object.defineProperty(_,g,v)}:function(_,f,l,g){g===void 0&&(g=l),_[g]=f[l]}),o=this&&this.__setModuleDefault||(Object.create?function(_,f){Object.defineProperty(_,"default",{enumerable:!0,value:f})}:function(_,f){_.default=f}),u=this&&this.__importStar||function(_){if(_&&_.__esModule)return _;var f={};if(_!=null)for(var l in _)l!=="default"&&Object.prototype.hasOwnProperty.call(_,l)&&i(f,_,l);return o(f,_),f};Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLContext=e.linearSearchLastTrue=void 0;const d=n(1670),h=u(n(7769)),m=n(9390);function p(_){let f=0;for(;f<_.length&&_[f]();++f);return f-1}e.linearSearchLastTrue=p,e.WebGLContext=class{constructor(_,f){this.frameBufferBound=!1,this.itemsToPoll=[],this.gl=_,this.version=f,this.getExtensions(),this.vertexbuffer=this.createVertexbuffer(),this.framebuffer=this.createFramebuffer(),this.queryVitalParameters()}allocateTexture(_,f,l,g){const v=this.gl,S=v.createTexture();v.bindTexture(v.TEXTURE_2D,S),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,v.NEAREST),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,v.NEAREST),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,v.CLAMP_TO_EDGE);const T=g?l.encode(g,_*f):null;return v.texImage2D(v.TEXTURE_2D,0,l.internalFormat,_,f,0,l.format,l.textureType,T),this.checkError(),S}updateTexture(_,f,l,g,v){const S=this.gl;S.bindTexture(S.TEXTURE_2D,_);const T=g.encode(v,f*l);S.texSubImage2D(S.TEXTURE_2D,0,0,0,f,l,g.format,g.textureType,T),this.checkError()}attachFramebuffer(_,f,l){const g=this.gl;g.bindTexture(g.TEXTURE_2D,_),g.bindFramebuffer(g.FRAMEBUFFER,this.framebuffer),g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,_,0),this.checkError(),g.viewport(0,0,f,l),g.scissor(0,0,f,l)}readTexture(_,f,l,g,v,S){const T=this.gl;S||(S=1),this.frameBufferBound||this.attachFramebuffer(_,f,l);const E=this.getEncoder(v,S),O=E.allocate(f*l);return T.bindTexture(T.TEXTURE_2D,_),T.framebufferTexture2D(T.FRAMEBUFFER,T.COLOR_ATTACHMENT0,T.TEXTURE_2D,_,0),T.readPixels(0,0,f,l,T.RGBA,E.textureType,O),this.checkError(),E.decode(O,g)}isFramebufferReady(){return!0}getActiveTexture(){const _=this.gl;return"TEXTURE"+(_.getParameter(this.gl.ACTIVE_TEXTURE)-_.TEXTURE0)}getTextureBinding(){return this.gl.getParameter(this.gl.TEXTURE_BINDING_2D)}getFramebufferBinding(){return this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING)}setVertexAttributes(_,f){const l=this.gl;l.vertexAttribPointer(_,3,l.FLOAT,!1,20,0),l.enableVertexAttribArray(_),f!==-1&&(l.vertexAttribPointer(f,2,l.FLOAT,!1,20,12),l.enableVertexAttribArray(f)),this.checkError()}createProgram(_,f){const l=this.gl,g=l.createProgram();return l.attachShader(g,_),l.attachShader(g,f),l.linkProgram(g),g}compileShader(_,f){const l=this.gl,g=l.createShader(f);if(!g)throw new Error(`createShader() returned null with type ${f}`);if(l.shaderSource(g,_),l.compileShader(g),l.getShaderParameter(g,l.COMPILE_STATUS)===!1)throw new Error(`Failed to compile shader: ${l.getShaderInfoLog(g)}
Shader source:
${_}`);return g}deleteShader(_){this.gl.deleteShader(_)}bindTextureToUniform(_,f,l){const g=this.gl;g.activeTexture(g.TEXTURE0+f),this.checkError(),g.bindTexture(g.TEXTURE_2D,_),this.checkError(),g.uniform1i(l,f),this.checkError()}draw(){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.checkError()}checkError(){if(d.env.debug){const _=this.gl,f=_.getError();let l="";switch(f){case _.NO_ERROR:return;case _.INVALID_ENUM:l="INVALID_ENUM";break;case _.INVALID_VALUE:l="INVALID_VALUE";break;case _.INVALID_OPERATION:l="INVALID_OPERATION";break;case _.INVALID_FRAMEBUFFER_OPERATION:l="INVALID_FRAMEBUFFER_OPERATION";break;case _.OUT_OF_MEMORY:l="OUT_OF_MEMORY";break;case _.CONTEXT_LOST_WEBGL:l="CONTEXT_LOST_WEBGL";break;default:l=`Unknown WebGL Error: ${f.toString(16)}`}throw new Error(l)}}deleteTexture(_){this.gl.deleteTexture(_)}deleteProgram(_){this.gl.deleteProgram(_)}getEncoder(_,f,l=0){if(this.version===2)return new h.RedFloat32DataEncoder(this.gl,f);switch(_){case"float":return l===1||this.isRenderFloat32Supported?new h.RGBAFloatDataEncoder(this.gl,f):new h.RGBAFloatDataEncoder(this.gl,f,this.textureHalfFloatExtension.HALF_FLOAT_OES);case"int":throw new Error("not implemented");case"byte":return new h.Uint8DataEncoder(this.gl,f);default:throw new Error(`Invalid dataType: ${_}`)}}clearActiveTextures(){const _=this.gl;for(let f=0;f<this.maxTextureImageUnits;++f)_.activeTexture(_.TEXTURE0+f),_.bindTexture(_.TEXTURE_2D,null)}dispose(){if(this.disposed)return;const _=this.gl;_.bindFramebuffer(_.FRAMEBUFFER,null),_.deleteFramebuffer(this.framebuffer),_.bindBuffer(_.ARRAY_BUFFER,null),_.deleteBuffer(this.vertexbuffer),_.bindBuffer(_.ELEMENT_ARRAY_BUFFER,null),_.finish(),this.disposed=!0}createDefaultGeometry(){return new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0])}createVertexbuffer(){const _=this.gl,f=_.createBuffer();if(!f)throw new Error("createBuffer() returned null");const l=this.createDefaultGeometry();return _.bindBuffer(_.ARRAY_BUFFER,f),_.bufferData(_.ARRAY_BUFFER,l,_.STATIC_DRAW),this.checkError(),f}createFramebuffer(){const _=this.gl.createFramebuffer();if(!_)throw new Error("createFramebuffer returned null");return _}queryVitalParameters(){const _=this.gl;if(this.isFloatTextureAttachableToFrameBuffer=this.checkFloatTextureAttachableToFrameBuffer(),this.isRenderFloat32Supported=this.checkRenderFloat32(),this.isFloat32DownloadSupported=this.checkFloat32Download(),this.version===1&&!this.textureHalfFloatExtension&&!this.isRenderFloat32Supported)throw new Error("both float32 and float16 TextureType are not supported");this.isBlendSupported=!this.isRenderFloat32Supported||this.checkFloat32Blend(),this.maxTextureSize=_.getParameter(_.MAX_TEXTURE_SIZE),this.maxTextureImageUnits=_.getParameter(_.MAX_TEXTURE_IMAGE_UNITS),this.version}getExtensions(){this.version===2?(this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float"),this.disjointTimerQueryWebgl2Extension=this.gl.getExtension("EXT_disjoint_timer_query_webgl2")):(this.textureFloatExtension=this.gl.getExtension("OES_texture_float"),this.textureHalfFloatExtension=this.gl.getExtension("OES_texture_half_float"))}checkFloatTextureAttachableToFrameBuffer(){const _=this.gl,f=_.createTexture();_.bindTexture(_.TEXTURE_2D,f);const l=this.version===2?_.RGBA32F:_.RGBA;_.texImage2D(_.TEXTURE_2D,0,l,1,1,0,_.RGBA,_.FLOAT,null);const g=_.createFramebuffer();_.bindFramebuffer(_.FRAMEBUFFER,g),_.framebufferTexture2D(_.FRAMEBUFFER,_.COLOR_ATTACHMENT0,_.TEXTURE_2D,f,0);const v=_.checkFramebufferStatus(_.FRAMEBUFFER)===_.FRAMEBUFFER_COMPLETE;return _.bindTexture(_.TEXTURE_2D,null),_.bindFramebuffer(_.FRAMEBUFFER,null),_.deleteTexture(f),_.deleteFramebuffer(g),v}checkRenderFloat32(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension)return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Download(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension||!this.gl.getExtension("WEBGL_color_buffer_float"))return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Blend(){const _=this.gl;let f,l,g,v,S;try{f=_.createTexture(),l=_.createFramebuffer(),_.bindTexture(_.TEXTURE_2D,f);const T=this.version===2?_.RGBA32F:_.RGBA;return _.texImage2D(_.TEXTURE_2D,0,T,1,1,0,_.RGBA,_.FLOAT,null),_.bindFramebuffer(_.FRAMEBUFFER,l),_.framebufferTexture2D(_.FRAMEBUFFER,_.COLOR_ATTACHMENT0,_.TEXTURE_2D,f,0),_.enable(_.BLEND),g=_.createShader(_.VERTEX_SHADER),!!g&&(_.shaderSource(g,"void main(){}"),_.compileShader(g),v=_.createShader(_.FRAGMENT_SHADER),!!v&&(_.shaderSource(v,"precision highp float;void main(){gl_FragColor=vec4(0.5);}"),_.compileShader(v),S=_.createProgram(),!!S&&(_.attachShader(S,g),_.attachShader(S,v),_.linkProgram(S),_.useProgram(S),_.drawArrays(_.POINTS,0,1),_.getError()===_.NO_ERROR)))}finally{_.disable(_.BLEND),S&&_.deleteProgram(S),g&&_.deleteShader(g),v&&_.deleteShader(v),l&&(_.bindFramebuffer(_.FRAMEBUFFER,null),_.deleteFramebuffer(l)),f&&(_.bindTexture(_.TEXTURE_2D,null),_.deleteTexture(f))}}beginTimer(){if(this.version===2&&this.disjointTimerQueryWebgl2Extension){const _=this.gl,f=this.disjointTimerQueryWebgl2Extension,l=_.createQuery();return _.beginQuery(f.TIME_ELAPSED_EXT,l),l}throw new Error("WebGL1 profiling currently not supported.")}endTimer(){if(this.version!==2||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");{const _=this.gl,f=this.disjointTimerQueryWebgl2Extension;_.endQuery(f.TIME_ELAPSED_EXT)}}isTimerResultAvailable(_){let f=!1,l=!1;if(this.version!==2||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");{const g=this.gl,v=this.disjointTimerQueryWebgl2Extension;f=g.getQueryParameter(_,g.QUERY_RESULT_AVAILABLE),l=g.getParameter(v.GPU_DISJOINT_EXT)}return f&&!l}getTimerResult(_){let f=0;if(this.version!==2)throw new Error("WebGL1 profiling currently not supported");{const l=this.gl;f=l.getQueryParameter(_,l.QUERY_RESULT),l.deleteQuery(_)}return f/1e6}async waitForQueryAndGetTime(_){return await(0,m.repeatedTry)((()=>this.isTimerResultAvailable(_))),this.getTimerResult(_)}async createAndWaitForFence(){const _=this.createFence(this.gl);return this.pollFence(_)}createFence(_){let f;const l=_,g=l.fenceSync(l.SYNC_GPU_COMMANDS_COMPLETE,0);return _.flush(),f=g===null?()=>!0:()=>{const v=l.clientWaitSync(g,0,0);return v===l.ALREADY_SIGNALED||v===l.CONDITION_SATISFIED},{query:g,isFencePassed:f}}async pollFence(_){return new Promise((f=>{this.addItemToPoll((()=>_.isFencePassed()),(()=>f()))}))}pollItems(){const _=p(this.itemsToPoll.map((f=>f.isDoneFn)));for(let f=0;f<=_;++f){const{resolveFn:l}=this.itemsToPoll[f];l()}this.itemsToPoll=this.itemsToPoll.slice(_+1)}async addItemToPoll(_,f){this.itemsToPoll.push({isDoneFn:_,resolveFn:f}),this.itemsToPoll.length>1||await(0,m.repeatedTry)((()=>(this.pollItems(),this.itemsToPoll.length===0)))}}},1036:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ExecutionPlan=void 0;const i=n(6231);class o{constructor(d,h){this.op=d,this.node=h}}e.ExecutionPlan=class{constructor(u,d,h){this.graph=u,this.profiler=h,this.initialize(d)}initialize(u){this.profiler.event("session","ExecutionPlan.initialize",(()=>{const d=this.graph.getNodes();if(d.length!==u.length)throw new Error("The size of nodes and OPs do not match.");this._ops=u.map(((h,m)=>new o(h,d[m]))),this.reset(),this._starter=[],this._ops.forEach(((h,m)=>{let p=!0;for(const _ of h.node.inputs)if(!this._values[_]&&this.graph.getInputIndices().indexOf(_)===-1){p=!1;break}p&&this._starter.push(m)}))}))}reset(){this._values=this.graph.getValues().map((u=>u.tensor))}async execute(u,d){return this.profiler.event("session","ExecutionPlan.execute",(async()=>{this.reset();const h=u.createInferenceHandler(),m=this.graph.getInputIndices();if(d.length!==m.length)throw new Error(`number of input tensors don't match the number of inputs to the model: actual: ${d.length} expected: ${m.length}`);d.forEach(((v,S)=>{const T=m[S];this._values[T]=v}));const p=this._starter.slice(0),_=this.graph.getValues(),f=this.graph.getNodes();let l=0;for(;l<p.length;){const v=p[l++],S=this._ops[v],T=S.node.inputs.map((M=>this._values[M]));if(T.indexOf(void 0)!==-1)throw new Error(`unresolved input detected: op: ${S.node}`);const E=T;i.Logger.verbose("ExecPlan",`Runing op:${S.node.name} (${E.map(((M,C)=>`'${S.node.inputs[C]}': ${M.type}[${M.dims.join(",")}]`)).join(", ")})`);const O=await this.profiler.event("node",S.node.name,(async()=>S.op.impl(h,E,S.op.context)));if(O.length!==S.node.outputs.length)throw new Error("the size of output does not match model definition.");O.forEach(((M,C)=>{const j=S.node.outputs[C];if(this._values[j])throw new Error(`output [${j}] already has value: op:${S.node.name}`);this._values[j]=M}));const R=new Set;O.forEach(((M,C)=>{const j=S.node.outputs[C];for(const $ of _[j].to){const L=f[$];let N=!0;for(const B of L.inputs)if(!this._values[B]){N=!1;break}N&&R.add($)}})),p.push(...R)}const g=[];for(let v=0;v<this.graph.getOutputIndices().length;v++){const S=this.graph.getOutputIndices()[v],T=this._values[S];if(T===void 0)throw new Error(`required output [${S}] does not have value`);S===0?await T.getData():T.data,g.push(T)}return i.Logger.verbose("ExecPlan","disposing of inferenceHandler"),h.dispose(),g}))}}},7070:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Graph=void 0;const i=n(1446),o=n(7778),u=n(9395),d=n(9162),h=n(2517);var m=u.onnxruntime.experimental.fbs;e.Graph={from:(l,g)=>new f(l,g)};class p{constructor(g){this._from=void 0,this._to=[],this.tensor=void 0,this.type=void 0,g&&(this.type=h.ProtoUtil.tensorValueTypeFromProto(g.type.tensorType))}get from(){return this._from}get to(){return this._to}}class _{constructor(g,v){g instanceof i.onnx.NodeProto?(this.name=g.name,this.opType=g.opType,this.attributes=new o.Attribute(g.attribute)):g instanceof m.Node&&(this.name=v??g.name(),this.opType=g.opType(),this.attributes=new o.Attribute(h.ProtoUtil.tensorAttributesFromORTFormat(g))),this.inputs=[],this.outputs=[],this.executeNode=!0}}class f{constructor(g,v){if(!g)throw new TypeError("graph is empty");this.buildGraph(g),this.transformGraph(v),this.checkIsAcyclic()}getInputIndices(){return this._allInputIndices}getInputNames(){return this._allInputNames}getOutputIndices(){return this._allOutputIndices}getOutputNames(){return this._allOutputNames}getValues(){return this._allData}getNodes(){return this._nodes}buildGraph(g){if(g instanceof i.onnx.GraphProto)this.buildGraphFromOnnxFormat(g);else{if(!(g instanceof m.Graph))throw new TypeError("Graph type is not supported.");this.buildGraphFromOrtFormat(g)}}buildGraphFromOnnxFormat(g){const v=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];const S=new Map;if(!g.input)throw new Error("missing information in graph: input");const T=[];for(const E of g.input){if(v.has(E.name))throw new Error(`duplicated input name: ${E.name}`);const O=this._allData.push(new p(E))-1;v.set(E.name,O),T.push(E.name)}if(!g.initializer)throw new Error("missing information in graph: initializer");for(const E of g.initializer){let O=v.get(E.name);if(O===void 0){const R=new p;R.type={shape:{dims:h.ProtoUtil.tensorDimsFromProto(E.dims)},tensorType:h.ProtoUtil.tensorDataTypeFromProto(E.dataType)},O=this._allData.push(R)-1,v.set(E.name,O)}this._allData[O]._from=-1,this._allData[O].tensor=d.Tensor.fromProto(E)}for(let E=0;E<this._allData.length;E++)this._allData[E].tensor||(this._allInputIndices.push(E),this._allInputNames.push(T[E]));if(!g.output)throw new Error("missing information in graph: output");for(const E of g.output){if(v.has(E.name))throw new Error(`duplicated output name: ${E.name}`);const O=this._allData.push(new p(E))-1;v.set(E.name,O),this._allOutputIndices.push(O),this._allOutputNames.push(E.name)}if(!g.node)throw new Error("missing information in graph: node");for(const E of g.node){if(!E.name)for(let R=0;;R++){const M=`unnamed_${E.opType}_${R}`;if(!S.has(M)){E.name=M;break}}if(S.has(E.name))throw new Error(`duplicated node name: ${E.name}`);const O=this._nodes.push(new _(E))-1;S.set(E.name,O)}for(let E=0;E<this._nodes.length;E++){const O=this._nodes[E],R=g.node[E];if(!R.output)throw new Error(`missing output for node: ${R.name}`);for(const M of R.output){let C=v.get(M);if(C===void 0&&(C=this._allData.push(new p)-1,v.set(M,C)),O.outputs.push(C),this._allData[C]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${C}`);if(this._allData[C]._from=E,R.opType==="Constant"){if(!R.attribute||R.attribute.length!==1||!R.attribute[0].t)throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(!R.output||R.output.length!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");O.outputs.pop(),O.executeNode=!1,this._allData[C]._from=-1,this._allData[C].tensor=d.Tensor.fromProto(R.attribute[0].t)}}}for(let E=0;E<this._nodes.length;E++){const O=this._nodes[E],R=g.node[E];if(!R.input)throw new Error(`missing input for node: ${R.name}`);for(const M of R.input){const C=v.get(M);if(C===void 0){if(M===""&&R.input.length===3&&R.opType==="Resize")continue;throw new Error(`unrecognized input '${M}' for node: ${R.name}`)}O.inputs.push(C),this._allData[C]._to.push(E)}}return!0}buildGraphFromOrtFormat(g){var v,S,T;const E=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];const O=new Map,R=[];for(let M=0;M<g.inputsLength();M++){const C=g.inputs(M);if(E.has(C))throw new Error(`duplicated input name: ${C}`);for(let j=0;j<g.nodeArgsLength();j++)if(((v=g.nodeArgs(j))===null||v===void 0?void 0:v.name())===C){const $=new p;if(((T=(S=g.nodeArgs(j))===null||S===void 0?void 0:S.type())===null||T===void 0?void 0:T.valueType())!==m.TypeInfoValue.tensor_type)throw new Error("Unexpected value type for the nodeArg.");const L=g.nodeArgs(j).type().value(new m.TensorTypeAndShape),N=h.ProtoUtil.tensorDataTypeFromProto(L.elemType()),B=L.shape(),U=[];for(let Y=0;Y<B.dimLength();Y++)U.push(h.LongUtil.longToNumber(B.dim(Y).value().dimValue()));$.type={shape:{dims:U},tensorType:N};const H=this._allData.push($)-1;E.set(C,H),R.push(C)}}for(let M=0;M<g.initializersLength();M++){const C=g.initializers(M);let j=E.get(C.name());if(j===void 0){const $=new p,L=h.ProtoUtil.tensorDimsFromORTFormat(C),N=h.ProtoUtil.tensorDataTypeFromProto(C.dataType());$.type={shape:{dims:L},tensorType:N},j=this._allData.push($)-1,E.set(C.name(),j)}this._allData[j]._from=-1,this._allData[j].tensor=d.Tensor.fromOrtTensor(C)}for(let M=0;M<this._allData.length;M++)this._allData[M].tensor||(this._allInputIndices.push(M),this._allInputNames.push(R[M]));for(let M=0;M<g.outputsLength();M++){const C=g.outputs(M);if(E.has(C))throw new Error(`duplicated output name: ${C}`);const j=this._allData.push(new p)-1;E.set(C,j),this._allOutputIndices.push(j),this._allOutputNames.push(C)}if(!g.nodes)throw new Error("missing information in graph: node");for(let M=0;M<g.nodesLength();M++){const C=g.nodes(M);let j=C.name();if(!j)for(let L=0;j=`unnamed_${C.opType()}_${L}`,O.has(j);L++);if(O.has(j))throw new Error(`duplicated node name: ${j}`);const $=this._nodes.push(new _(C,j))-1;O.set(j,$)}for(let M=0;M<this._nodes.length;M++){const C=this._nodes[M],j=g.nodes(M);if(j==null)throw new Error(`No node exists at index ${M}`);if(j?.outputsLength()===0)throw new Error(`missing output for node: ${j.name}`);for(let $=0;$<j?.outputsLength();$++){const L=j?.outputs($);let N=E.get(L);if(N===void 0&&(N=this._allData.push(new p)-1,E.set(L,N)),C.outputs.push(N),this._allData[N]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${N}`);if(this._allData[N]._from=M,j.opType()==="Constant"){if(j.attributesLength()!==1||!j.attributes(0).t())throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(j.outputsLength()!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");C.outputs.pop(),C.executeNode=!1,this._allData[N]._from=-1,this._allData[N].tensor=d.Tensor.fromOrtTensor(j.attributes(0).t())}}}for(let M=0;M<this._nodes.length;M++){const C=this._nodes[M],j=g.nodes(M);if(j.inputsLength()===0)throw new Error(`missing input for node: ${j.name}`);for(let $=0;$<j.inputsLength();$++){const L=j.inputs($),N=E.get(L);if(N===void 0)throw new Error(`unrecognized input '${L}' for node: ${j.name()}`);C.inputs.push(N),this._allData[N]._to.push(M)}}}checkIsAcyclic(){const g=new Set;this._allInputIndices.forEach((T=>{this._allData[T]._to.forEach((E=>{g.add(E)}))}));const v=Array.from(g),S=new Array(this._nodes.length).fill("white");for(;v.length>0;){const T=v.pop();S[T]==="gray"?S[T]="black":(v.push(T),S[T]="gray",this._nodes[T].outputs.forEach((E=>{const O=this._allData[E];if(O.tensor!==void 0)throw new Error("node outputs should not be initialized");if(O._from!==T)throw new Error("from property of the Value object doesn't match index of Node being processed");O._to.forEach((R=>{if(S[R]==="gray")throw new Error("model graph is cyclic");S[R]==="white"&&v.push(R)}))})))}}transformGraph(g){this.removeAllIdentityNodes(),this.removeAllDropoutNodes(),this.fuseConvActivationNodes(),g&&g.transformGraph(this),this.finalizeGraph()}finalizeGraph(){let g=0;for(let v=0;v<this._nodes.length;v++)this._nodes[v].executeNode?g>0&&(this._nodes[v].inputs.forEach((S=>{const T=this._allData[S]._to.indexOf(v+g);T!==-1&&(this._allData[S]._to[T]=v)})),this._nodes[v].outputs.forEach((S=>{this._allData[S]._from&&this._allData[S]._from===v+g&&(this._allData[S]._from=v)}))):(g++,this._nodes[v].outputs.forEach((S=>{this._allData[S]._from=-2})),this._nodes.splice(v,1),v--);g=0;for(let v=0;v<this._allData.length;v++)if(this._allData[v].from!==-2||this._allOutputIndices.indexOf(v+g)!==-1){if(g>0){let S=-1;this._allData[v].from!==void 0&&this._allData[v].from!==-1?(S=this._nodes[this._allData[v].from].outputs.indexOf(v+g),S!==-1&&(this._nodes[this._allData[v].from].outputs[S]=v)):(S=this._allInputIndices.indexOf(v+g),S!==-1&&(this._allInputIndices[S]=v)),this._allData[v].to.forEach((T=>{S=this._nodes[T].inputs.indexOf(v+g),S!==-1&&(this._nodes[T].inputs[S]=v)})),this._allData[v].to.length===0&&(S=this._allOutputIndices.indexOf(v+g),S!==-1&&(this._allOutputIndices[S]=v))}}else g++,this._allData.splice(v,1),v--}deleteNode(g){const v=this._nodes[g];if(v.outputs.length>1){for(let M=1;M<v.outputs.length;M++)if(this._allData[v.outputs[M]].to.length>0)throw new Error("Node deletion with more than one output connected to other nodes is not supported. ")}v.executeNode=!1;const S=v.inputs[0],T=v.outputs[0],E=this._allData[T].to,O=this._allData[S].to.indexOf(g);if(O===-1)throw new Error("The Value object doesn't have the current Node in it's 'to' property ");this._allData[S].to.splice(O,1),this._allData[T]._to=[];const R=this._allOutputIndices.indexOf(T);if(R!==-1&&(this._allOutputIndices[R]=S),E&&E.length>0)for(const M of E){const C=this._nodes[M].inputs.indexOf(T);if(C===-1)throw new Error("The Node object doesn't have the output Value in it's 'inputs' property ");this._nodes[M].inputs[C]=S,this._allData[S].to.push(M)}}removeAllDropoutNodes(){let g=0;for(const v of this._nodes){if(v.opType==="Dropout"){if(v.inputs.length!==1)throw new Error("Dropout nodes should only contain one input. ");if(v.outputs.length!==1&&v.outputs.length!==2)throw new Error("Dropout nodes should contain either 1 or 2 output(s)");if(v.outputs.length===2&&this._allData[v.outputs[1]]._to.length!==0)throw new Error("Dropout nodes's second output should not be referenced by other nodes");this.deleteNode(g)}g++}}removeAllIdentityNodes(){let g=0;for(const v of this._nodes)v.opType==="Identity"&&this.deleteNode(g),g++}isActivation(g){switch(g.opType){case"Relu":case"Sigmoid":case"Clip":return!0;default:return!1}}fuseConvActivationNodes(){for(const g of this._nodes)if(g.opType==="Conv"){const v=this._allData[g.outputs[0]]._to;if(v.length===1&&this.isActivation(this._nodes[v[0]])){const S=this._nodes[v[0]];if(S.opType==="Clip")if(S.inputs.length===1)try{g.attributes.set("activation_params","floats",[S.attributes.getFloat("min"),S.attributes.getFloat("max")])}catch{g.attributes.set("activation_params","floats",[h.MIN_CLIP,h.MAX_CLIP])}else{if(!(S.inputs.length>=3&&this._allData[S.inputs[1]].tensor!==void 0&&this._allData[S.inputs[2]].tensor!==void 0))continue;g.attributes.set("activation_params","floats",[this._allData[S.inputs[1]].tensor.floatData[0],this._allData[S.inputs[2]].tensor.floatData[0]])}g.attributes.set("activation","string",S.opType),this.deleteNode(v[0])}}}}},6231:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.now=e.Profiler=e.Logger=void 0;const n={verbose:1e3,info:2e3,warning:4e3,error:5e3,fatal:6e3},i={none:new class{log(_,f,l){}},console:new class{log(_,f,l){console.log(`${this.color(_)} ${l?"\x1B[35m"+l+"\x1B[0m ":""}${f}`)}color(_){switch(_){case"verbose":return"\x1B[34;40mv\x1B[0m";case"info":return"\x1B[32mi\x1B[0m";case"warning":return"\x1B[30;43mw\x1B[0m";case"error":return"\x1B[31;40me\x1B[0m";case"fatal":return"\x1B[101mf\x1B[0m";default:throw new Error(`unsupported severity: ${_}`)}}}},o={provider:"console",minimalSeverity:"warning",logDateTime:!0,logSourceLocation:!1};let u={"":o};function d(_,f,l,g){if(f===void 0)return v=_,{verbose:d.verbose.bind(null,v),info:d.info.bind(null,v),warning:d.warning.bind(null,v),error:d.error.bind(null,v),fatal:d.fatal.bind(null,v)};if(l===void 0)h(_,f);else if(typeof l=="number"&&g===void 0)h(_,f);else if(typeof l=="string"&&g===void 0)h(_,l,0,f);else{if(typeof l!="string"||typeof g!="number")throw new TypeError("input is valid");h(_,l,0,f)}var v}function h(_,f,l,g){const v=u[g||""]||u[""];n[_]<n[v.minimalSeverity]||(v.logDateTime&&(f=`${new Date().toISOString()}|${f}`),v.logSourceLocation,i[v.provider].log(_,f,g))}(function(_){function f(g){u={},l("",g||{})}function l(g,v){if(g==="*")f(v);else{const S=u[g]||o;u[g]={provider:v.provider||S.provider,minimalSeverity:v.minimalSeverity||S.minimalSeverity,logDateTime:v.logDateTime===void 0?S.logDateTime:v.logDateTime,logSourceLocation:v.logSourceLocation===void 0?S.logSourceLocation:v.logSourceLocation}}}_.verbose=function(g,v){_("verbose",g,v)},_.info=function(g,v){_("info",g,v)},_.warning=function(g,v){_("warning",g,v)},_.error=function(g,v){_("error",g,v)},_.fatal=function(g,v){_("fatal",g,v)},_.reset=f,_.set=l,_.setWithEnv=function(g){const v={};g.logLevel&&(v.minimalSeverity=g.logLevel),l("",v)}})(d||(d={})),e.Logger=d;class m{constructor(f,l,g,v,S,T){this.category=f,this.name=l,this.startTime=g,this.endCallback=v,this.timer=S,this.ctx=T}end(){return this.endCallback(this)}async checkTimer(){if(this.ctx===void 0||this.timer===void 0)throw new Error("No webgl timer found");return this.ctx.endTimer(),this.ctx.waitForQueryAndGetTime(this.timer)}}class p{constructor(f,l,g,v){this.category=f,this.name=l,this.startTime=g,this.endTime=v}}e.Profiler=class{static create(_){return _===void 0?new this:new this(_.maxNumberEvents,_.flushBatchSize,_.flushIntervalInMilliseconds)}constructor(_,f,l){this._started=!1,this._flushPointer=0,this._started=!1,this._maxNumberEvents=_===void 0?1e4:_,this._flushBatchSize=f===void 0?10:f,this._flushIntervalInMilliseconds=l===void 0?5e3:l}start(){this._started=!0,this._timingEvents=[],this._flushTime=(0,e.now)(),this._flushPointer=0}stop(){for(this._started=!1;this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer])}event(_,f,l,g){const v=this._started?this.begin(_,f,g):void 0;let S=!1;const T=l();if(T&&typeof T.then=="function")return S=!0,new Promise(((E,O)=>{T.then((async R=>{v&&await v.end(),E(R)}),(async R=>{v&&await v.end(),O(R)}))}));if(!S&&v){const E=v.end();if(E&&typeof E.then=="function")return new Promise(((O,R)=>{E.then((()=>{O(T)}),(M=>{R(M)}))}))}return T}begin(_,f,l){if(!this._started)throw new Error("profiler is not started yet");if(l===void 0){const g=(0,e.now)();return this.flush(g),new m(_,f,g,(v=>this.endSync(v)))}{const g=l.beginTimer();return new m(_,f,0,(async v=>this.end(v)),g,l)}}async end(_){const f=await _.checkTimer();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new p(_.category,_.name,_.startTime,f)),this.flush(f))}endSync(_){const f=(0,e.now)();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new p(_.category,_.name,_.startTime,f)),this.flush(f))}logOneEvent(_){e.Logger.verbose(`Profiler.${_.category}`,`${(_.endTime-_.startTime).toFixed(2)}ms on event '${_.name}' at ${_.endTime.toFixed(2)}`)}flush(_){if(this._timingEvents.length-this._flushPointer>=this._flushBatchSize||_-this._flushTime>=this._flushIntervalInMilliseconds){for(const f=this._flushPointer;this._flushPointer<f+this._flushBatchSize&&this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer]);this._flushTime=(0,e.now)()}}get started(){return this._started}},e.now=typeof performance<"u"&&performance.now?()=>performance.now():Date.now},2644:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Model=void 0;const i=n(5686),o=n(1446),u=n(7070),d=n(9395),h=n(2517);var m=d.onnxruntime.experimental.fbs;e.Model=class{constructor(){}load(p,_,f){if(!f)try{return void this.loadFromOnnxFormat(p,_)}catch(l){if(f!==void 0)throw l}this.loadFromOrtFormat(p,_)}loadFromOnnxFormat(p,_){const f=o.onnx.ModelProto.decode(p);if(h.LongUtil.longToNumber(f.irVersion)<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=f.opsetImport.map((l=>({domain:l.domain,version:h.LongUtil.longToNumber(l.version)}))),this._graph=u.Graph.from(f.graph,_)}loadFromOrtFormat(p,_){const f=new i.flatbuffers.ByteBuffer(p),l=m.InferenceSession.getRootAsInferenceSession(f).model();if(h.LongUtil.longToNumber(l.irVersion())<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=[];for(let g=0;g<l.opsetImportLength();g++){const v=l.opsetImport(g);this._opsets.push({domain:v?.domain(),version:h.LongUtil.longToNumber(v.version())})}this._graph=u.Graph.from(l.graph(),_)}get graph(){return this._graph}get opsets(){return this._opsets}}},782:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FLOAT_TYPES=e.INT_TYPES=e.NUMBER_TYPES=void 0,e.NUMBER_TYPES=["float32","float64","int32","int16","int8","uint16","uint32","uint8"],e.INT_TYPES=["int32","int16","int8","uint16","uint32","uint8"],e.FLOAT_TYPES=["float32","float64"]},1047:(t,e)=>{function n(i,o){if(o.endsWith("+")){const u=Number.parseInt(o.substring(0,o.length-1),10);return!isNaN(u)&&u<=i}if(o.split("-").length===2){const u=o.split("-"),d=Number.parseInt(u[0],10),h=Number.parseInt(u[1],10);return!isNaN(d)&&!isNaN(h)&&d<=i&&i<=h}return Number.parseInt(o,10)===i}Object.defineProperty(e,"__esModule",{value:!0}),e.resolveOperator=void 0,e.resolveOperator=function(i,o,u){for(const d of u){const h=d[0],m=d[1],p=d[2],_=d[3],f=d[4];if(i.opType===h){for(const l of o)if((l.domain===m||l.domain==="ai.onnx"&&m==="")&&n(l.version,p))return{opImpl:_,opInit:f}}}throw new TypeError(`cannot resolve operator '${i.opType}' with opsets: ${o.map((d=>`${d.domain||"ai.onnx"} v${d.version}`)).join(", ")}`)}},9395:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.onnxruntime=void 0;const i=n(5686);var o,u;o=e.onnxruntime||(e.onnxruntime={}),(function(d){(function(h){h[h.UNDEFINED=0]="UNDEFINED",h[h.FLOAT=1]="FLOAT",h[h.INT=2]="INT",h[h.STRING=3]="STRING",h[h.TENSOR=4]="TENSOR",h[h.GRAPH=5]="GRAPH",h[h.FLOATS=6]="FLOATS",h[h.INTS=7]="INTS",h[h.STRINGS=8]="STRINGS",h[h.TENSORS=9]="TENSORS",h[h.GRAPHS=10]="GRAPHS",h[h.SPARSE_TENSOR=11]="SPARSE_TENSOR",h[h.SPARSE_TENSORS=12]="SPARSE_TENSORS"})(d.AttributeType||(d.AttributeType={}))})((u=o.experimental||(o.experimental={})).fbs||(u.fbs={})),(function(d){(function(h){(function(m){(function(p){p[p.UNKNOWN=0]="UNKNOWN",p[p.VALUE=1]="VALUE",p[p.PARAM=2]="PARAM"})(m.DimensionValueType||(m.DimensionValueType={}))})(h.fbs||(h.fbs={}))})(d.experimental||(d.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(d){(function(h){(function(m){(function(p){p[p.UNDEFINED=0]="UNDEFINED",p[p.FLOAT=1]="FLOAT",p[p.UINT8=2]="UINT8",p[p.INT8=3]="INT8",p[p.UINT16=4]="UINT16",p[p.INT16=5]="INT16",p[p.INT32=6]="INT32",p[p.INT64=7]="INT64",p[p.STRING=8]="STRING",p[p.BOOL=9]="BOOL",p[p.FLOAT16=10]="FLOAT16",p[p.DOUBLE=11]="DOUBLE",p[p.UINT32=12]="UINT32",p[p.UINT64=13]="UINT64",p[p.COMPLEX64=14]="COMPLEX64",p[p.COMPLEX128=15]="COMPLEX128",p[p.BFLOAT16=16]="BFLOAT16"})(m.TensorDataType||(m.TensorDataType={}))})(h.fbs||(h.fbs={}))})(d.experimental||(d.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(d){(function(h){(function(m){(function(p){p[p.Primitive=0]="Primitive",p[p.Fused=1]="Fused"})(m.NodeType||(m.NodeType={}))})(h.fbs||(h.fbs={}))})(d.experimental||(d.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(d){(function(h){(function(m){(function(p){p[p.NONE=0]="NONE",p[p.tensor_type=1]="tensor_type",p[p.sequence_type=2]="sequence_type",p[p.map_type=3]="map_type"})(m.TypeInfoValue||(m.TypeInfoValue={}))})(h.fbs||(h.fbs={}))})(d.experimental||(d.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(d){(function(h){(function(m){class p{constructor(){this.bb=null,this.bb_pos=0}__init(f,l){return this.bb_pos=f,this.bb=l,this}static getRootAsShape(f,l){return(l||new p).__init(f.readInt32(f.position())+f.position(),f)}static getSizePrefixedRootAsShape(f,l){return f.setPosition(f.position()+i.flatbuffers.SIZE_PREFIX_LENGTH),(l||new p).__init(f.readInt32(f.position())+f.position(),f)}dim(f,l){let g=this.bb.__offset(this.bb_pos,4);return g?(l||new d.experimental.fbs.Dimension).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+g)+4*f),this.bb):null}dimLength(){let f=this.bb.__offset(this.bb_pos,4);return f?this.bb.__vector_len(this.bb_pos+f):0}static startShape(f){f.startObject(1)}static addDim(f,l){f.addFieldOffset(0,l,0)}static createDimVector(f,l){f.startVector(4,l.length,4);for(let g=l.length-1;g>=0;g--)f.addOffset(l[g]);return f.endVector()}static startDimVector(f,l){f.startVector(4,l,4)}static endShape(f){return f.endObject()}static createShape(f,l){return p.startShape(f),p.addDim(f,l),p.endShape(f)}}m.Shape=p})(h.fbs||(h.fbs={}))})(d.experimental||(d.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(d){(function(h){(function(m){class p{constructor(){this.bb=null,this.bb_pos=0}__init(f,l){return this.bb_pos=f,this.bb=l,this}static getRootAsDimension(f,l){return(l||new p).__init(f.readInt32(f.position())+f.position(),f)}static getSizePrefixedRootAsDimension(f,l){return f.setPosition(f.position()+i.flatbuffers.SIZE_PREFIX_LENGTH),(l||new p).__init(f.readInt32(f.position())+f.position(),f)}value(f){let l=this.bb.__offset(this.bb_pos,4);return l?(f||new d.experimental.fbs.DimensionValue).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}denotation(f){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.__string(this.bb_pos+l,f):null}static startDimension(f){f.startObject(2)}static addValue(f,l){f.addFieldOffset(0,l,0)}static addDenotation(f,l){f.addFieldOffset(1,l,0)}static endDimension(f){return f.endObject()}static createDimension(f,l,g){return p.startDimension(f),p.addValue(f,l),p.addDenotation(f,g),p.endDimension(f)}}m.Dimension=p})(h.fbs||(h.fbs={}))})(d.experimental||(d.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(d){(function(h){(function(m){class p{constructor(){this.bb=null,this.bb_pos=0}__init(f,l){return this.bb_pos=f,this.bb=l,this}static getRootAsDimensionValue(f,l){return(l||new p).__init(f.readInt32(f.position())+f.position(),f)}static getSizePrefixedRootAsDimensionValue(f,l){return f.setPosition(f.position()+i.flatbuffers.SIZE_PREFIX_LENGTH),(l||new p).__init(f.readInt32(f.position())+f.position(),f)}dimType(){let f=this.bb.__offset(this.bb_pos,4);return f?this.bb.readInt8(this.bb_pos+f):d.experimental.fbs.DimensionValueType.UNKNOWN}dimValue(){let f=this.bb.__offset(this.bb_pos,6);return f?this.bb.readInt64(this.bb_pos+f):this.bb.createLong(0,0)}dimParam(f){let l=this.bb.__offset(this.bb_pos,8);return l?this.bb.__string(this.bb_pos+l,f):null}static startDimensionValue(f){f.startObject(3)}static addDimType(f,l){f.addFieldInt8(0,l,d.experimental.fbs.DimensionValueType.UNKNOWN)}static addDimValue(f,l){f.addFieldInt64(1,l,f.createLong(0,0))}static addDimParam(f,l){f.addFieldOffset(2,l,0)}static endDimensionValue(f){return f.endObject()}static createDimensionValue(f,l,g,v){return p.startDimensionValue(f),p.addDimType(f,l),p.addDimValue(f,g),p.addDimParam(f,v),p.endDimensionValue(f)}}m.DimensionValue=p})(h.fbs||(h.fbs={}))})(d.experimental||(d.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(d){(function(h){(function(m){class p{constructor(){this.bb=null,this.bb_pos=0}__init(f,l){return this.bb_pos=f,this.bb=l,this}static getRootAsTensorTypeAndShape(f,l){return(l||new p).__init(f.readInt32(f.position())+f.position(),f)}static getSizePrefixedRootAsTensorTypeAndShape(f,l){return f.setPosition(f.position()+i.flatbuffers.SIZE_PREFIX_LENGTH),(l||new p).__init(f.readInt32(f.position())+f.position(),f)}elemType(){let f=this.bb.__offset(this.bb_pos,4);return f?this.bb.readInt32(this.bb_pos+f):d.experimental.fbs.TensorDataType.UNDEFINED}shape(f){let l=this.bb.__offset(this.bb_pos,6);return l?(f||new d.experimental.fbs.Shape).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}static startTensorTypeAndShape(f){f.startObject(2)}static addElemType(f,l){f.addFieldInt32(0,l,d.experimental.fbs.TensorDataType.UNDEFINED)}static addShape(f,l){f.addFieldOffset(1,l,0)}static endTensorTypeAndShape(f){return f.endObject()}static createTensorTypeAndShape(f,l,g){return p.startTensorTypeAndShape(f),p.addElemType(f,l),p.addShape(f,g),p.endTensorTypeAndShape(f)}}m.TensorTypeAndShape=p})(h.fbs||(h.fbs={}))})(d.experimental||(d.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(d){(function(h){(function(m){class p{constructor(){this.bb=null,this.bb_pos=0}__init(f,l){return this.bb_pos=f,this.bb=l,this}static getRootAsMapType(f,l){return(l||new p).__init(f.readInt32(f.position())+f.position(),f)}static getSizePrefixedRootAsMapType(f,l){return f.setPosition(f.position()+i.flatbuffers.SIZE_PREFIX_LENGTH),(l||new p).__init(f.readInt32(f.position())+f.position(),f)}keyType(){let f=this.bb.__offset(this.bb_pos,4);return f?this.bb.readInt32(this.bb_pos+f):d.experimental.fbs.TensorDataType.UNDEFINED}valueType(f){let l=this.bb.__offset(this.bb_pos,6);return l?(f||new d.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}static startMapType(f){f.startObject(2)}static addKeyType(f,l){f.addFieldInt32(0,l,d.experimental.fbs.TensorDataType.UNDEFINED)}static addValueType(f,l){f.addFieldOffset(1,l,0)}static endMapType(f){return f.endObject()}static createMapType(f,l,g){return p.startMapType(f),p.addKeyType(f,l),p.addValueType(f,g),p.endMapType(f)}}m.MapType=p})(h.fbs||(h.fbs={}))})(d.experimental||(d.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(d){(function(h){(function(m){class p{constructor(){this.bb=null,this.bb_pos=0}__init(f,l){return this.bb_pos=f,this.bb=l,this}static getRootAsSequenceType(f,l){return(l||new p).__init(f.readInt32(f.position())+f.position(),f)}static getSizePrefixedRootAsSequenceType(f,l){return f.setPosition(f.position()+i.flatbuffers.SIZE_PREFIX_LENGTH),(l||new p).__init(f.readInt32(f.position())+f.position(),f)}elemType(f){let l=this.bb.__offset(this.bb_pos,4);return l?(f||new d.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}static startSequenceType(f){f.startObject(1)}static addElemType(f,l){f.addFieldOffset(0,l,0)}static endSequenceType(f){return f.endObject()}static createSequenceType(f,l){return p.startSequenceType(f),p.addElemType(f,l),p.endSequenceType(f)}}m.SequenceType=p})(h.fbs||(h.fbs={}))})(d.experimental||(d.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(d){(function(h){(h.fbs||(h.fbs={})).EdgeEnd=class{constructor(){this.bb=null,this.bb_pos=0}__init(m,p){return this.bb_pos=m,this.bb=p,this}nodeIndex(){return this.bb.readUint32(this.bb_pos)}srcArgIndex(){return this.bb.readInt32(this.bb_pos+4)}dstArgIndex(){return this.bb.readInt32(this.bb_pos+8)}static createEdgeEnd(m,p,_,f){return m.prep(4,12),m.writeInt32(f),m.writeInt32(_),m.writeInt32(p),m.offset()}}})(d.experimental||(d.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(d){(function(h){(function(m){class p{constructor(){this.bb=null,this.bb_pos=0}__init(f,l){return this.bb_pos=f,this.bb=l,this}static getRootAsNodeEdge(f,l){return(l||new p).__init(f.readInt32(f.position())+f.position(),f)}static getSizePrefixedRootAsNodeEdge(f,l){return f.setPosition(f.position()+i.flatbuffers.SIZE_PREFIX_LENGTH),(l||new p).__init(f.readInt32(f.position())+f.position(),f)}nodeIndex(){let f=this.bb.__offset(this.bb_pos,4);return f?this.bb.readUint32(this.bb_pos+f):0}inputEdges(f,l){let g=this.bb.__offset(this.bb_pos,6);return g?(l||new d.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+g)+12*f,this.bb):null}inputEdgesLength(){let f=this.bb.__offset(this.bb_pos,6);return f?this.bb.__vector_len(this.bb_pos+f):0}outputEdges(f,l){let g=this.bb.__offset(this.bb_pos,8);return g?(l||new d.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+g)+12*f,this.bb):null}outputEdgesLength(){let f=this.bb.__offset(this.bb_pos,8);return f?this.bb.__vector_len(this.bb_pos+f):0}static startNodeEdge(f){f.startObject(3)}static addNodeIndex(f,l){f.addFieldInt32(0,l,0)}static addInputEdges(f,l){f.addFieldOffset(1,l,0)}static startInputEdgesVector(f,l){f.startVector(12,l,4)}static addOutputEdges(f,l){f.addFieldOffset(2,l,0)}static startOutputEdgesVector(f,l){f.startVector(12,l,4)}static endNodeEdge(f){return f.endObject()}static createNodeEdge(f,l,g,v){return p.startNodeEdge(f),p.addNodeIndex(f,l),p.addInputEdges(f,g),p.addOutputEdges(f,v),p.endNodeEdge(f)}}m.NodeEdge=p})(h.fbs||(h.fbs={}))})(d.experimental||(d.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(d){(function(h){(function(m){class p{constructor(){this.bb=null,this.bb_pos=0}__init(f,l){return this.bb_pos=f,this.bb=l,this}static getRootAsNode(f,l){return(l||new p).__init(f.readInt32(f.position())+f.position(),f)}static getSizePrefixedRootAsNode(f,l){return f.setPosition(f.position()+i.flatbuffers.SIZE_PREFIX_LENGTH),(l||new p).__init(f.readInt32(f.position())+f.position(),f)}name(f){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,f):null}docString(f){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.__string(this.bb_pos+l,f):null}domain(f){let l=this.bb.__offset(this.bb_pos,8);return l?this.bb.__string(this.bb_pos+l,f):null}sinceVersion(){let f=this.bb.__offset(this.bb_pos,10);return f?this.bb.readInt32(this.bb_pos+f):0}index(){let f=this.bb.__offset(this.bb_pos,12);return f?this.bb.readUint32(this.bb_pos+f):0}opType(f){let l=this.bb.__offset(this.bb_pos,14);return l?this.bb.__string(this.bb_pos+l,f):null}type(){let f=this.bb.__offset(this.bb_pos,16);return f?this.bb.readInt32(this.bb_pos+f):d.experimental.fbs.NodeType.Primitive}executionProviderType(f){let l=this.bb.__offset(this.bb_pos,18);return l?this.bb.__string(this.bb_pos+l,f):null}inputs(f,l){let g=this.bb.__offset(this.bb_pos,20);return g?this.bb.__string(this.bb.__vector(this.bb_pos+g)+4*f,l):null}inputsLength(){let f=this.bb.__offset(this.bb_pos,20);return f?this.bb.__vector_len(this.bb_pos+f):0}outputs(f,l){let g=this.bb.__offset(this.bb_pos,22);return g?this.bb.__string(this.bb.__vector(this.bb_pos+g)+4*f,l):null}outputsLength(){let f=this.bb.__offset(this.bb_pos,22);return f?this.bb.__vector_len(this.bb_pos+f):0}attributes(f,l){let g=this.bb.__offset(this.bb_pos,24);return g?(l||new d.experimental.fbs.Attribute).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+g)+4*f),this.bb):null}attributesLength(){let f=this.bb.__offset(this.bb_pos,24);return f?this.bb.__vector_len(this.bb_pos+f):0}inputArgCounts(f){let l=this.bb.__offset(this.bb_pos,26);return l?this.bb.readInt32(this.bb.__vector(this.bb_pos+l)+4*f):0}inputArgCountsLength(){let f=this.bb.__offset(this.bb_pos,26);return f?this.bb.__vector_len(this.bb_pos+f):0}inputArgCountsArray(){let f=this.bb.__offset(this.bb_pos,26);return f?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+f),this.bb.__vector_len(this.bb_pos+f)):null}implicitInputs(f,l){let g=this.bb.__offset(this.bb_pos,28);return g?this.bb.__string(this.bb.__vector(this.bb_pos+g)+4*f,l):null}implicitInputsLength(){let f=this.bb.__offset(this.bb_pos,28);return f?this.bb.__vector_len(this.bb_pos+f):0}static startNode(f){f.startObject(13)}static addName(f,l){f.addFieldOffset(0,l,0)}static addDocString(f,l){f.addFieldOffset(1,l,0)}static addDomain(f,l){f.addFieldOffset(2,l,0)}static addSinceVersion(f,l){f.addFieldInt32(3,l,0)}static addIndex(f,l){f.addFieldInt32(4,l,0)}static addOpType(f,l){f.addFieldOffset(5,l,0)}static addType(f,l){f.addFieldInt32(6,l,d.experimental.fbs.NodeType.Primitive)}static addExecutionProviderType(f,l){f.addFieldOffset(7,l,0)}static addInputs(f,l){f.addFieldOffset(8,l,0)}static createInputsVector(f,l){f.startVector(4,l.length,4);for(let g=l.length-1;g>=0;g--)f.addOffset(l[g]);return f.endVector()}static startInputsVector(f,l){f.startVector(4,l,4)}static addOutputs(f,l){f.addFieldOffset(9,l,0)}static createOutputsVector(f,l){f.startVector(4,l.length,4);for(let g=l.length-1;g>=0;g--)f.addOffset(l[g]);return f.endVector()}static startOutputsVector(f,l){f.startVector(4,l,4)}static addAttributes(f,l){f.addFieldOffset(10,l,0)}static createAttributesVector(f,l){f.startVector(4,l.length,4);for(let g=l.length-1;g>=0;g--)f.addOffset(l[g]);return f.endVector()}static startAttributesVector(f,l){f.startVector(4,l,4)}static addInputArgCounts(f,l){f.addFieldOffset(11,l,0)}static createInputArgCountsVector(f,l){f.startVector(4,l.length,4);for(let g=l.length-1;g>=0;g--)f.addInt32(l[g]);return f.endVector()}static startInputArgCountsVector(f,l){f.startVector(4,l,4)}static addImplicitInputs(f,l){f.addFieldOffset(12,l,0)}static createImplicitInputsVector(f,l){f.startVector(4,l.length,4);for(let g=l.length-1;g>=0;g--)f.addOffset(l[g]);return f.endVector()}static startImplicitInputsVector(f,l){f.startVector(4,l,4)}static endNode(f){return f.endObject()}static createNode(f,l,g,v,S,T,E,O,R,M,C,j,$,L){return p.startNode(f),p.addName(f,l),p.addDocString(f,g),p.addDomain(f,v),p.addSinceVersion(f,S),p.addIndex(f,T),p.addOpType(f,E),p.addType(f,O),p.addExecutionProviderType(f,R),p.addInputs(f,M),p.addOutputs(f,C),p.addAttributes(f,j),p.addInputArgCounts(f,$),p.addImplicitInputs(f,L),p.endNode(f)}}m.Node=p})(h.fbs||(h.fbs={}))})(d.experimental||(d.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(d){(function(h){(function(m){class p{constructor(){this.bb=null,this.bb_pos=0}__init(f,l){return this.bb_pos=f,this.bb=l,this}static getRootAsValueInfo(f,l){return(l||new p).__init(f.readInt32(f.position())+f.position(),f)}static getSizePrefixedRootAsValueInfo(f,l){return f.setPosition(f.position()+i.flatbuffers.SIZE_PREFIX_LENGTH),(l||new p).__init(f.readInt32(f.position())+f.position(),f)}name(f){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,f):null}docString(f){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.__string(this.bb_pos+l,f):null}type(f){let l=this.bb.__offset(this.bb_pos,8);return l?(f||new d.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}static startValueInfo(f){f.startObject(3)}static addName(f,l){f.addFieldOffset(0,l,0)}static addDocString(f,l){f.addFieldOffset(1,l,0)}static addType(f,l){f.addFieldOffset(2,l,0)}static endValueInfo(f){return f.endObject()}static createValueInfo(f,l,g,v){return p.startValueInfo(f),p.addName(f,l),p.addDocString(f,g),p.addType(f,v),p.endValueInfo(f)}}m.ValueInfo=p})(h.fbs||(h.fbs={}))})(d.experimental||(d.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(d){(function(h){(function(m){class p{constructor(){this.bb=null,this.bb_pos=0}__init(f,l){return this.bb_pos=f,this.bb=l,this}static getRootAsTypeInfo(f,l){return(l||new p).__init(f.readInt32(f.position())+f.position(),f)}static getSizePrefixedRootAsTypeInfo(f,l){return f.setPosition(f.position()+i.flatbuffers.SIZE_PREFIX_LENGTH),(l||new p).__init(f.readInt32(f.position())+f.position(),f)}denotation(f){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,f):null}valueType(){let f=this.bb.__offset(this.bb_pos,6);return f?this.bb.readUint8(this.bb_pos+f):d.experimental.fbs.TypeInfoValue.NONE}value(f){let l=this.bb.__offset(this.bb_pos,8);return l?this.bb.__union(f,this.bb_pos+l):null}static startTypeInfo(f){f.startObject(3)}static addDenotation(f,l){f.addFieldOffset(0,l,0)}static addValueType(f,l){f.addFieldInt8(1,l,d.experimental.fbs.TypeInfoValue.NONE)}static addValue(f,l){f.addFieldOffset(2,l,0)}static endTypeInfo(f){return f.endObject()}static createTypeInfo(f,l,g,v){return p.startTypeInfo(f),p.addDenotation(f,l),p.addValueType(f,g),p.addValue(f,v),p.endTypeInfo(f)}}m.TypeInfo=p})(h.fbs||(h.fbs={}))})(d.experimental||(d.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(d){(function(h){(function(m){class p{constructor(){this.bb=null,this.bb_pos=0}__init(f,l){return this.bb_pos=f,this.bb=l,this}static getRootAsOperatorSetId(f,l){return(l||new p).__init(f.readInt32(f.position())+f.position(),f)}static getSizePrefixedRootAsOperatorSetId(f,l){return f.setPosition(f.position()+i.flatbuffers.SIZE_PREFIX_LENGTH),(l||new p).__init(f.readInt32(f.position())+f.position(),f)}domain(f){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,f):null}version(){let f=this.bb.__offset(this.bb_pos,6);return f?this.bb.readInt64(this.bb_pos+f):this.bb.createLong(0,0)}static startOperatorSetId(f){f.startObject(2)}static addDomain(f,l){f.addFieldOffset(0,l,0)}static addVersion(f,l){f.addFieldInt64(1,l,f.createLong(0,0))}static endOperatorSetId(f){return f.endObject()}static createOperatorSetId(f,l,g){return p.startOperatorSetId(f),p.addDomain(f,l),p.addVersion(f,g),p.endOperatorSetId(f)}}m.OperatorSetId=p})(h.fbs||(h.fbs={}))})(d.experimental||(d.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(d){(function(h){(function(m){class p{constructor(){this.bb=null,this.bb_pos=0}__init(f,l){return this.bb_pos=f,this.bb=l,this}static getRootAsTensor(f,l){return(l||new p).__init(f.readInt32(f.position())+f.position(),f)}static getSizePrefixedRootAsTensor(f,l){return f.setPosition(f.position()+i.flatbuffers.SIZE_PREFIX_LENGTH),(l||new p).__init(f.readInt32(f.position())+f.position(),f)}name(f){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,f):null}docString(f){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.__string(this.bb_pos+l,f):null}dims(f){let l=this.bb.__offset(this.bb_pos,8);return l?this.bb.readInt64(this.bb.__vector(this.bb_pos+l)+8*f):this.bb.createLong(0,0)}dimsLength(){let f=this.bb.__offset(this.bb_pos,8);return f?this.bb.__vector_len(this.bb_pos+f):0}dataType(){let f=this.bb.__offset(this.bb_pos,10);return f?this.bb.readInt32(this.bb_pos+f):d.experimental.fbs.TensorDataType.UNDEFINED}rawData(f){let l=this.bb.__offset(this.bb_pos,12);return l?this.bb.readUint8(this.bb.__vector(this.bb_pos+l)+f):0}rawDataLength(){let f=this.bb.__offset(this.bb_pos,12);return f?this.bb.__vector_len(this.bb_pos+f):0}rawDataArray(){let f=this.bb.__offset(this.bb_pos,12);return f?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+f),this.bb.__vector_len(this.bb_pos+f)):null}stringData(f,l){let g=this.bb.__offset(this.bb_pos,14);return g?this.bb.__string(this.bb.__vector(this.bb_pos+g)+4*f,l):null}stringDataLength(){let f=this.bb.__offset(this.bb_pos,14);return f?this.bb.__vector_len(this.bb_pos+f):0}static startTensor(f){f.startObject(6)}static addName(f,l){f.addFieldOffset(0,l,0)}static addDocString(f,l){f.addFieldOffset(1,l,0)}static addDims(f,l){f.addFieldOffset(2,l,0)}static createDimsVector(f,l){f.startVector(8,l.length,8);for(let g=l.length-1;g>=0;g--)f.addInt64(l[g]);return f.endVector()}static startDimsVector(f,l){f.startVector(8,l,8)}static addDataType(f,l){f.addFieldInt32(3,l,d.experimental.fbs.TensorDataType.UNDEFINED)}static addRawData(f,l){f.addFieldOffset(4,l,0)}static createRawDataVector(f,l){f.startVector(1,l.length,1);for(let g=l.length-1;g>=0;g--)f.addInt8(l[g]);return f.endVector()}static startRawDataVector(f,l){f.startVector(1,l,1)}static addStringData(f,l){f.addFieldOffset(5,l,0)}static createStringDataVector(f,l){f.startVector(4,l.length,4);for(let g=l.length-1;g>=0;g--)f.addOffset(l[g]);return f.endVector()}static startStringDataVector(f,l){f.startVector(4,l,4)}static endTensor(f){return f.endObject()}static createTensor(f,l,g,v,S,T,E){return p.startTensor(f),p.addName(f,l),p.addDocString(f,g),p.addDims(f,v),p.addDataType(f,S),p.addRawData(f,T),p.addStringData(f,E),p.endTensor(f)}}m.Tensor=p})(h.fbs||(h.fbs={}))})(d.experimental||(d.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(d){(function(h){(function(m){class p{constructor(){this.bb=null,this.bb_pos=0}__init(f,l){return this.bb_pos=f,this.bb=l,this}static getRootAsSparseTensor(f,l){return(l||new p).__init(f.readInt32(f.position())+f.position(),f)}static getSizePrefixedRootAsSparseTensor(f,l){return f.setPosition(f.position()+i.flatbuffers.SIZE_PREFIX_LENGTH),(l||new p).__init(f.readInt32(f.position())+f.position(),f)}values(f){let l=this.bb.__offset(this.bb_pos,4);return l?(f||new d.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}indices(f){let l=this.bb.__offset(this.bb_pos,6);return l?(f||new d.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}dims(f){let l=this.bb.__offset(this.bb_pos,8);return l?this.bb.readInt64(this.bb.__vector(this.bb_pos+l)+8*f):this.bb.createLong(0,0)}dimsLength(){let f=this.bb.__offset(this.bb_pos,8);return f?this.bb.__vector_len(this.bb_pos+f):0}static startSparseTensor(f){f.startObject(3)}static addValues(f,l){f.addFieldOffset(0,l,0)}static addIndices(f,l){f.addFieldOffset(1,l,0)}static addDims(f,l){f.addFieldOffset(2,l,0)}static createDimsVector(f,l){f.startVector(8,l.length,8);for(let g=l.length-1;g>=0;g--)f.addInt64(l[g]);return f.endVector()}static startDimsVector(f,l){f.startVector(8,l,8)}static endSparseTensor(f){return f.endObject()}static createSparseTensor(f,l,g,v){return p.startSparseTensor(f),p.addValues(f,l),p.addIndices(f,g),p.addDims(f,v),p.endSparseTensor(f)}}m.SparseTensor=p})(h.fbs||(h.fbs={}))})(d.experimental||(d.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(d){(function(h){(function(m){class p{constructor(){this.bb=null,this.bb_pos=0}__init(f,l){return this.bb_pos=f,this.bb=l,this}static getRootAsAttribute(f,l){return(l||new p).__init(f.readInt32(f.position())+f.position(),f)}static getSizePrefixedRootAsAttribute(f,l){return f.setPosition(f.position()+i.flatbuffers.SIZE_PREFIX_LENGTH),(l||new p).__init(f.readInt32(f.position())+f.position(),f)}name(f){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,f):null}docString(f){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.__string(this.bb_pos+l,f):null}type(){let f=this.bb.__offset(this.bb_pos,8);return f?this.bb.readInt32(this.bb_pos+f):d.experimental.fbs.AttributeType.UNDEFINED}f(){let f=this.bb.__offset(this.bb_pos,10);return f?this.bb.readFloat32(this.bb_pos+f):0}i(){let f=this.bb.__offset(this.bb_pos,12);return f?this.bb.readInt64(this.bb_pos+f):this.bb.createLong(0,0)}s(f){let l=this.bb.__offset(this.bb_pos,14);return l?this.bb.__string(this.bb_pos+l,f):null}t(f){let l=this.bb.__offset(this.bb_pos,16);return l?(f||new d.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}g(f){let l=this.bb.__offset(this.bb_pos,18);return l?(f||new d.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}floats(f){let l=this.bb.__offset(this.bb_pos,20);return l?this.bb.readFloat32(this.bb.__vector(this.bb_pos+l)+4*f):0}floatsLength(){let f=this.bb.__offset(this.bb_pos,20);return f?this.bb.__vector_len(this.bb_pos+f):0}floatsArray(){let f=this.bb.__offset(this.bb_pos,20);return f?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+f),this.bb.__vector_len(this.bb_pos+f)):null}ints(f){let l=this.bb.__offset(this.bb_pos,22);return l?this.bb.readInt64(this.bb.__vector(this.bb_pos+l)+8*f):this.bb.createLong(0,0)}intsLength(){let f=this.bb.__offset(this.bb_pos,22);return f?this.bb.__vector_len(this.bb_pos+f):0}strings(f,l){let g=this.bb.__offset(this.bb_pos,24);return g?this.bb.__string(this.bb.__vector(this.bb_pos+g)+4*f,l):null}stringsLength(){let f=this.bb.__offset(this.bb_pos,24);return f?this.bb.__vector_len(this.bb_pos+f):0}tensors(f,l){let g=this.bb.__offset(this.bb_pos,26);return g?(l||new d.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+g)+4*f),this.bb):null}tensorsLength(){let f=this.bb.__offset(this.bb_pos,26);return f?this.bb.__vector_len(this.bb_pos+f):0}graphs(f,l){let g=this.bb.__offset(this.bb_pos,28);return g?(l||new d.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+g)+4*f),this.bb):null}graphsLength(){let f=this.bb.__offset(this.bb_pos,28);return f?this.bb.__vector_len(this.bb_pos+f):0}static startAttribute(f){f.startObject(13)}static addName(f,l){f.addFieldOffset(0,l,0)}static addDocString(f,l){f.addFieldOffset(1,l,0)}static addType(f,l){f.addFieldInt32(2,l,d.experimental.fbs.AttributeType.UNDEFINED)}static addF(f,l){f.addFieldFloat32(3,l,0)}static addI(f,l){f.addFieldInt64(4,l,f.createLong(0,0))}static addS(f,l){f.addFieldOffset(5,l,0)}static addT(f,l){f.addFieldOffset(6,l,0)}static addG(f,l){f.addFieldOffset(7,l,0)}static addFloats(f,l){f.addFieldOffset(8,l,0)}static createFloatsVector(f,l){f.startVector(4,l.length,4);for(let g=l.length-1;g>=0;g--)f.addFloat32(l[g]);return f.endVector()}static startFloatsVector(f,l){f.startVector(4,l,4)}static addInts(f,l){f.addFieldOffset(9,l,0)}static createIntsVector(f,l){f.startVector(8,l.length,8);for(let g=l.length-1;g>=0;g--)f.addInt64(l[g]);return f.endVector()}static startIntsVector(f,l){f.startVector(8,l,8)}static addStrings(f,l){f.addFieldOffset(10,l,0)}static createStringsVector(f,l){f.startVector(4,l.length,4);for(let g=l.length-1;g>=0;g--)f.addOffset(l[g]);return f.endVector()}static startStringsVector(f,l){f.startVector(4,l,4)}static addTensors(f,l){f.addFieldOffset(11,l,0)}static createTensorsVector(f,l){f.startVector(4,l.length,4);for(let g=l.length-1;g>=0;g--)f.addOffset(l[g]);return f.endVector()}static startTensorsVector(f,l){f.startVector(4,l,4)}static addGraphs(f,l){f.addFieldOffset(12,l,0)}static createGraphsVector(f,l){f.startVector(4,l.length,4);for(let g=l.length-1;g>=0;g--)f.addOffset(l[g]);return f.endVector()}static startGraphsVector(f,l){f.startVector(4,l,4)}static endAttribute(f){return f.endObject()}static createAttribute(f,l,g,v,S,T,E,O,R,M,C,j,$,L){return p.startAttribute(f),p.addName(f,l),p.addDocString(f,g),p.addType(f,v),p.addF(f,S),p.addI(f,T),p.addS(f,E),p.addT(f,O),p.addG(f,R),p.addFloats(f,M),p.addInts(f,C),p.addStrings(f,j),p.addTensors(f,$),p.addGraphs(f,L),p.endAttribute(f)}}m.Attribute=p})(h.fbs||(h.fbs={}))})(d.experimental||(d.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(d){(function(h){(function(m){class p{constructor(){this.bb=null,this.bb_pos=0}__init(f,l){return this.bb_pos=f,this.bb=l,this}static getRootAsGraph(f,l){return(l||new p).__init(f.readInt32(f.position())+f.position(),f)}static getSizePrefixedRootAsGraph(f,l){return f.setPosition(f.position()+i.flatbuffers.SIZE_PREFIX_LENGTH),(l||new p).__init(f.readInt32(f.position())+f.position(),f)}initializers(f,l){let g=this.bb.__offset(this.bb_pos,4);return g?(l||new d.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+g)+4*f),this.bb):null}initializersLength(){let f=this.bb.__offset(this.bb_pos,4);return f?this.bb.__vector_len(this.bb_pos+f):0}nodeArgs(f,l){let g=this.bb.__offset(this.bb_pos,6);return g?(l||new d.experimental.fbs.ValueInfo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+g)+4*f),this.bb):null}nodeArgsLength(){let f=this.bb.__offset(this.bb_pos,6);return f?this.bb.__vector_len(this.bb_pos+f):0}nodes(f,l){let g=this.bb.__offset(this.bb_pos,8);return g?(l||new d.experimental.fbs.Node).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+g)+4*f),this.bb):null}nodesLength(){let f=this.bb.__offset(this.bb_pos,8);return f?this.bb.__vector_len(this.bb_pos+f):0}maxNodeIndex(){let f=this.bb.__offset(this.bb_pos,10);return f?this.bb.readUint32(this.bb_pos+f):0}nodeEdges(f,l){let g=this.bb.__offset(this.bb_pos,12);return g?(l||new d.experimental.fbs.NodeEdge).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+g)+4*f),this.bb):null}nodeEdgesLength(){let f=this.bb.__offset(this.bb_pos,12);return f?this.bb.__vector_len(this.bb_pos+f):0}inputs(f,l){let g=this.bb.__offset(this.bb_pos,14);return g?this.bb.__string(this.bb.__vector(this.bb_pos+g)+4*f,l):null}inputsLength(){let f=this.bb.__offset(this.bb_pos,14);return f?this.bb.__vector_len(this.bb_pos+f):0}outputs(f,l){let g=this.bb.__offset(this.bb_pos,16);return g?this.bb.__string(this.bb.__vector(this.bb_pos+g)+4*f,l):null}outputsLength(){let f=this.bb.__offset(this.bb_pos,16);return f?this.bb.__vector_len(this.bb_pos+f):0}sparseInitializers(f,l){let g=this.bb.__offset(this.bb_pos,18);return g?(l||new d.experimental.fbs.SparseTensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+g)+4*f),this.bb):null}sparseInitializersLength(){let f=this.bb.__offset(this.bb_pos,18);return f?this.bb.__vector_len(this.bb_pos+f):0}static startGraph(f){f.startObject(8)}static addInitializers(f,l){f.addFieldOffset(0,l,0)}static createInitializersVector(f,l){f.startVector(4,l.length,4);for(let g=l.length-1;g>=0;g--)f.addOffset(l[g]);return f.endVector()}static startInitializersVector(f,l){f.startVector(4,l,4)}static addNodeArgs(f,l){f.addFieldOffset(1,l,0)}static createNodeArgsVector(f,l){f.startVector(4,l.length,4);for(let g=l.length-1;g>=0;g--)f.addOffset(l[g]);return f.endVector()}static startNodeArgsVector(f,l){f.startVector(4,l,4)}static addNodes(f,l){f.addFieldOffset(2,l,0)}static createNodesVector(f,l){f.startVector(4,l.length,4);for(let g=l.length-1;g>=0;g--)f.addOffset(l[g]);return f.endVector()}static startNodesVector(f,l){f.startVector(4,l,4)}static addMaxNodeIndex(f,l){f.addFieldInt32(3,l,0)}static addNodeEdges(f,l){f.addFieldOffset(4,l,0)}static createNodeEdgesVector(f,l){f.startVector(4,l.length,4);for(let g=l.length-1;g>=0;g--)f.addOffset(l[g]);return f.endVector()}static startNodeEdgesVector(f,l){f.startVector(4,l,4)}static addInputs(f,l){f.addFieldOffset(5,l,0)}static createInputsVector(f,l){f.startVector(4,l.length,4);for(let g=l.length-1;g>=0;g--)f.addOffset(l[g]);return f.endVector()}static startInputsVector(f,l){f.startVector(4,l,4)}static addOutputs(f,l){f.addFieldOffset(6,l,0)}static createOutputsVector(f,l){f.startVector(4,l.length,4);for(let g=l.length-1;g>=0;g--)f.addOffset(l[g]);return f.endVector()}static startOutputsVector(f,l){f.startVector(4,l,4)}static addSparseInitializers(f,l){f.addFieldOffset(7,l,0)}static createSparseInitializersVector(f,l){f.startVector(4,l.length,4);for(let g=l.length-1;g>=0;g--)f.addOffset(l[g]);return f.endVector()}static startSparseInitializersVector(f,l){f.startVector(4,l,4)}static endGraph(f){return f.endObject()}static createGraph(f,l,g,v,S,T,E,O,R){return p.startGraph(f),p.addInitializers(f,l),p.addNodeArgs(f,g),p.addNodes(f,v),p.addMaxNodeIndex(f,S),p.addNodeEdges(f,T),p.addInputs(f,E),p.addOutputs(f,O),p.addSparseInitializers(f,R),p.endGraph(f)}}m.Graph=p})(h.fbs||(h.fbs={}))})(d.experimental||(d.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(d){(function(h){(function(m){class p{constructor(){this.bb=null,this.bb_pos=0}__init(f,l){return this.bb_pos=f,this.bb=l,this}static getRootAsModel(f,l){return(l||new p).__init(f.readInt32(f.position())+f.position(),f)}static getSizePrefixedRootAsModel(f,l){return f.setPosition(f.position()+i.flatbuffers.SIZE_PREFIX_LENGTH),(l||new p).__init(f.readInt32(f.position())+f.position(),f)}irVersion(){let f=this.bb.__offset(this.bb_pos,4);return f?this.bb.readInt64(this.bb_pos+f):this.bb.createLong(0,0)}opsetImport(f,l){let g=this.bb.__offset(this.bb_pos,6);return g?(l||new d.experimental.fbs.OperatorSetId).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+g)+4*f),this.bb):null}opsetImportLength(){let f=this.bb.__offset(this.bb_pos,6);return f?this.bb.__vector_len(this.bb_pos+f):0}producerName(f){let l=this.bb.__offset(this.bb_pos,8);return l?this.bb.__string(this.bb_pos+l,f):null}producerVersion(f){let l=this.bb.__offset(this.bb_pos,10);return l?this.bb.__string(this.bb_pos+l,f):null}domain(f){let l=this.bb.__offset(this.bb_pos,12);return l?this.bb.__string(this.bb_pos+l,f):null}modelVersion(){let f=this.bb.__offset(this.bb_pos,14);return f?this.bb.readInt64(this.bb_pos+f):this.bb.createLong(0,0)}docString(f){let l=this.bb.__offset(this.bb_pos,16);return l?this.bb.__string(this.bb_pos+l,f):null}graph(f){let l=this.bb.__offset(this.bb_pos,18);return l?(f||new d.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}graphDocString(f){let l=this.bb.__offset(this.bb_pos,20);return l?this.bb.__string(this.bb_pos+l,f):null}static startModel(f){f.startObject(9)}static addIrVersion(f,l){f.addFieldInt64(0,l,f.createLong(0,0))}static addOpsetImport(f,l){f.addFieldOffset(1,l,0)}static createOpsetImportVector(f,l){f.startVector(4,l.length,4);for(let g=l.length-1;g>=0;g--)f.addOffset(l[g]);return f.endVector()}static startOpsetImportVector(f,l){f.startVector(4,l,4)}static addProducerName(f,l){f.addFieldOffset(2,l,0)}static addProducerVersion(f,l){f.addFieldOffset(3,l,0)}static addDomain(f,l){f.addFieldOffset(4,l,0)}static addModelVersion(f,l){f.addFieldInt64(5,l,f.createLong(0,0))}static addDocString(f,l){f.addFieldOffset(6,l,0)}static addGraph(f,l){f.addFieldOffset(7,l,0)}static addGraphDocString(f,l){f.addFieldOffset(8,l,0)}static endModel(f){return f.endObject()}static createModel(f,l,g,v,S,T,E,O,R,M){return p.startModel(f),p.addIrVersion(f,l),p.addOpsetImport(f,g),p.addProducerName(f,v),p.addProducerVersion(f,S),p.addDomain(f,T),p.addModelVersion(f,E),p.addDocString(f,O),p.addGraph(f,R),p.addGraphDocString(f,M),p.endModel(f)}}m.Model=p})(h.fbs||(h.fbs={}))})(d.experimental||(d.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(d){(function(h){(function(m){class p{constructor(){this.bb=null,this.bb_pos=0}__init(f,l){return this.bb_pos=f,this.bb=l,this}static getRootAsKernelCreateInfos(f,l){return(l||new p).__init(f.readInt32(f.position())+f.position(),f)}static getSizePrefixedRootAsKernelCreateInfos(f,l){return f.setPosition(f.position()+i.flatbuffers.SIZE_PREFIX_LENGTH),(l||new p).__init(f.readInt32(f.position())+f.position(),f)}nodeIndices(f){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.readUint32(this.bb.__vector(this.bb_pos+l)+4*f):0}nodeIndicesLength(){let f=this.bb.__offset(this.bb_pos,4);return f?this.bb.__vector_len(this.bb_pos+f):0}nodeIndicesArray(){let f=this.bb.__offset(this.bb_pos,4);return f?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+f),this.bb.__vector_len(this.bb_pos+f)):null}kernelDefHashes(f){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.readUint64(this.bb.__vector(this.bb_pos+l)+8*f):this.bb.createLong(0,0)}kernelDefHashesLength(){let f=this.bb.__offset(this.bb_pos,6);return f?this.bb.__vector_len(this.bb_pos+f):0}static startKernelCreateInfos(f){f.startObject(2)}static addNodeIndices(f,l){f.addFieldOffset(0,l,0)}static createNodeIndicesVector(f,l){f.startVector(4,l.length,4);for(let g=l.length-1;g>=0;g--)f.addInt32(l[g]);return f.endVector()}static startNodeIndicesVector(f,l){f.startVector(4,l,4)}static addKernelDefHashes(f,l){f.addFieldOffset(1,l,0)}static createKernelDefHashesVector(f,l){f.startVector(8,l.length,8);for(let g=l.length-1;g>=0;g--)f.addInt64(l[g]);return f.endVector()}static startKernelDefHashesVector(f,l){f.startVector(8,l,8)}static endKernelCreateInfos(f){return f.endObject()}static createKernelCreateInfos(f,l,g){return p.startKernelCreateInfos(f),p.addNodeIndices(f,l),p.addKernelDefHashes(f,g),p.endKernelCreateInfos(f)}}m.KernelCreateInfos=p})(h.fbs||(h.fbs={}))})(d.experimental||(d.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(d){(function(h){(function(m){class p{constructor(){this.bb=null,this.bb_pos=0}__init(f,l){return this.bb_pos=f,this.bb=l,this}static getRootAsSubGraphSessionState(f,l){return(l||new p).__init(f.readInt32(f.position())+f.position(),f)}static getSizePrefixedRootAsSubGraphSessionState(f,l){return f.setPosition(f.position()+i.flatbuffers.SIZE_PREFIX_LENGTH),(l||new p).__init(f.readInt32(f.position())+f.position(),f)}graphId(f){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,f):null}sessionState(f){let l=this.bb.__offset(this.bb_pos,6);return l?(f||new d.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}static startSubGraphSessionState(f){f.startObject(2)}static addGraphId(f,l){f.addFieldOffset(0,l,0)}static addSessionState(f,l){f.addFieldOffset(1,l,0)}static endSubGraphSessionState(f){let l=f.endObject();return f.requiredField(l,4),l}static createSubGraphSessionState(f,l,g){return p.startSubGraphSessionState(f),p.addGraphId(f,l),p.addSessionState(f,g),p.endSubGraphSessionState(f)}}m.SubGraphSessionState=p})(h.fbs||(h.fbs={}))})(d.experimental||(d.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(d){(function(h){(function(m){class p{constructor(){this.bb=null,this.bb_pos=0}__init(f,l){return this.bb_pos=f,this.bb=l,this}static getRootAsSessionState(f,l){return(l||new p).__init(f.readInt32(f.position())+f.position(),f)}static getSizePrefixedRootAsSessionState(f,l){return f.setPosition(f.position()+i.flatbuffers.SIZE_PREFIX_LENGTH),(l||new p).__init(f.readInt32(f.position())+f.position(),f)}kernels(f){let l=this.bb.__offset(this.bb_pos,4);return l?(f||new d.experimental.fbs.KernelCreateInfos).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}subGraphSessionStates(f,l){let g=this.bb.__offset(this.bb_pos,6);return g?(l||new d.experimental.fbs.SubGraphSessionState).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+g)+4*f),this.bb):null}subGraphSessionStatesLength(){let f=this.bb.__offset(this.bb_pos,6);return f?this.bb.__vector_len(this.bb_pos+f):0}static startSessionState(f){f.startObject(2)}static addKernels(f,l){f.addFieldOffset(0,l,0)}static addSubGraphSessionStates(f,l){f.addFieldOffset(1,l,0)}static createSubGraphSessionStatesVector(f,l){f.startVector(4,l.length,4);for(let g=l.length-1;g>=0;g--)f.addOffset(l[g]);return f.endVector()}static startSubGraphSessionStatesVector(f,l){f.startVector(4,l,4)}static endSessionState(f){return f.endObject()}static createSessionState(f,l,g){return p.startSessionState(f),p.addKernels(f,l),p.addSubGraphSessionStates(f,g),p.endSessionState(f)}}m.SessionState=p})(h.fbs||(h.fbs={}))})(d.experimental||(d.experimental={}))})(e.onnxruntime||(e.onnxruntime={})),(function(d){(function(h){(function(m){class p{constructor(){this.bb=null,this.bb_pos=0}__init(f,l){return this.bb_pos=f,this.bb=l,this}static getRootAsInferenceSession(f,l){return(l||new p).__init(f.readInt32(f.position())+f.position(),f)}static getSizePrefixedRootAsInferenceSession(f,l){return f.setPosition(f.position()+i.flatbuffers.SIZE_PREFIX_LENGTH),(l||new p).__init(f.readInt32(f.position())+f.position(),f)}static bufferHasIdentifier(f){return f.__has_identifier("ORTM")}ortVersion(f){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,f):null}model(f){let l=this.bb.__offset(this.bb_pos,6);return l?(f||new d.experimental.fbs.Model).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}sessionState(f){let l=this.bb.__offset(this.bb_pos,8);return l?(f||new d.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}static startInferenceSession(f){f.startObject(3)}static addOrtVersion(f,l){f.addFieldOffset(0,l,0)}static addModel(f,l){f.addFieldOffset(1,l,0)}static addSessionState(f,l){f.addFieldOffset(2,l,0)}static endInferenceSession(f){return f.endObject()}static finishInferenceSessionBuffer(f,l){f.finish(l,"ORTM")}static finishSizePrefixedInferenceSessionBuffer(f,l){f.finish(l,"ORTM",!0)}static createInferenceSession(f,l,g,v){return p.startInferenceSession(f),p.addOrtVersion(f,l),p.addModel(f,g),p.addSessionState(f,v),p.endInferenceSession(f)}}m.InferenceSession=p})(h.fbs||(h.fbs={}))})(d.experimental||(d.experimental={}))})(e.onnxruntime||(e.onnxruntime={}))},7448:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OnnxjsSessionHandler=void 0;const i=n(1670),o=n(9162);e.OnnxjsSessionHandler=class{constructor(u){this.session=u,this.inputNames=this.session.inputNames,this.outputNames=this.session.outputNames}async dispose(){}async run(u,d,h){const m=new Map;for(const f in u)if(Object.hasOwnProperty.call(u,f)){const l=u[f];m.set(f,new o.Tensor(l.dims,l.type,void 0,void 0,l.data))}const p=await this.session.run(m),_={};return p.forEach(((f,l)=>{_[l]=new i.Tensor(f.type,f.data,f.dims)})),_}startProfiling(){this.session.startProfiling()}endProfiling(){this.session.endProfiling()}}},6919:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Session=void 0;const i=n(7067),o=n(1296),u=n(7091),d=n(1036),h=n(6231),m=n(2644);e.Session=class{constructor(p={}){this._initialized=!1,this.backendHint=p.backendHint,this.profiler=h.Profiler.create(p.profiler),this.context={profiler:this.profiler,graphInputTypes:[],graphInputDims:[]}}get inputNames(){return this._model.graph.getInputNames()}get outputNames(){return this._model.graph.getOutputNames()}startProfiling(){this.profiler.start()}endProfiling(){this.profiler.stop()}async loadModel(p,_,f){await this.profiler.event("session","Session.loadModel",(async()=>{const l=await(0,u.resolveBackend)(this.backendHint);if(this.sessionHandler=l.createSessionHandler(this.context),this._model=new m.Model,typeof p=="string"){const g=p.endsWith(".ort");if(typeof fetch>"u"){const v=await(0,o.promisify)(i.readFile)(p);this.initialize(v,g)}else{const v=await fetch(p),S=await v.arrayBuffer();this.initialize(new Uint8Array(S),g)}}else if(ArrayBuffer.isView(p))this.initialize(p);else{const g=new Uint8Array(p,_||0,f||p.byteLength);this.initialize(g)}}))}initialize(p,_){if(this._initialized)throw new Error("already initialized");this.profiler.event("session","Session.initialize",(()=>{const f=this.sessionHandler.transformGraph?this.sessionHandler:void 0;this._model.load(p,f,_),this.sessionHandler.onGraphInitialized&&this.sessionHandler.onGraphInitialized(this._model.graph),this.initializeOps(this._model.graph),this._executionPlan=new d.ExecutionPlan(this._model.graph,this._ops,this.profiler)})),this._initialized=!0}async run(p){if(!this._initialized)throw new Error("session not initialized yet");return this.profiler.event("session","Session.run",(async()=>{const _=this.normalizeAndValidateInputs(p),f=await this._executionPlan.execute(this.sessionHandler,_);return this.createOutput(f)}))}normalizeAndValidateInputs(p){const _=this._model.graph.getInputNames();if(Array.isArray(p)){if(p.length!==_.length)throw new Error(`incorrect input array length: expected ${_.length} but got ${p.length}`)}else{if(p.size!==_.length)throw new Error(`incorrect input map size: expected ${_.length} but got ${p.size}`);const f=new Array(p.size);let l=0;for(let g=0;g<_.length;++g){const v=p.get(_[g]);if(!v)throw new Error(`missing input tensor for: '${name}'`);f[l++]=v}p=f}if(this.context.graphInputTypes&&this.context.graphInputTypes.length!==0&&this.context.graphInputDims&&this.context.graphInputDims.length!==0)this.validateInputTensorDims(this.context.graphInputDims,p,!1);else{const f=this._model.graph.getInputIndices(),l=this._model.graph.getValues(),g=new Array(f.length);for(let v=0;v<f.length;++v){const S=l[f[v]];g[v]=S.type.shape.dims,this.context.graphInputTypes.push(S.type.tensorType),this.context.graphInputDims.push(p[v].dims)}this.validateInputTensorDims(g,p,!0)}return this.validateInputTensorTypes(this.context.graphInputTypes,p),p}validateInputTensorTypes(p,_){for(let f=0;f<_.length;f++){const l=p[f],g=_[f].type;if(l!==g)throw new Error(`input tensor[${f}] check failed: expected type '${l}' but got ${g}`)}}validateInputTensorDims(p,_,f){for(let l=0;l<_.length;l++){const g=p[l],v=_[l].dims;if(!this.compareTensorDims(g,v,f))throw new Error(`input tensor[${l}] check failed: expected shape '[${g.join(",")}]' but got [${v.join(",")}]`)}}compareTensorDims(p,_,f){if(p.length!==_.length)return!1;for(let l=0;l<p.length;++l)if(p[l]!==_[l]&&(!f||p[l]!==0))return!1;return!0}createOutput(p){const _=this._model.graph.getOutputNames();if(p.length!==_.length)throw new Error("expected number of outputs do not match number of generated outputs");const f=new Map;for(let l=0;l<_.length;++l)f.set(_[l],p[l]);return f}initializeOps(p){const _=p.getNodes();this._ops=new Array(_.length);for(let f=0;f<_.length;f++)this._ops[f]=this.sessionHandler.resolve(_[f],this._model.opsets,p)}}},9162:function(t,e,n){var i=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(e,"__esModule",{value:!0}),e.Tensor=void 0;const o=n(3442),u=i(n(3720)),d=n(1446),h=n(9395),m=n(2517);var p=h.onnxruntime.experimental.fbs;class _{get data(){if(this.cache===void 0){const T=this.dataProvider(this.dataId);if(T.length!==this.size)throw new Error("Length of data provided by the Data Provider is inconsistent with the dims of this Tensor.");this.cache=T}return this.cache}get stringData(){if(this.type!=="string")throw new TypeError("data type is not string");return this.data}get integerData(){switch(this.type){case"uint8":case"int8":case"uint16":case"int16":case"int32":case"uint32":case"bool":return this.data;default:throw new TypeError("data type is not integer (uint8, int8, uint16, int16, int32, uint32, bool)")}}get floatData(){switch(this.type){case"float32":case"float64":return this.data;default:throw new TypeError("data type is not float (float32, float64)")}}get numberData(){if(this.type!=="string")return this.data;throw new TypeError("type cannot be non-number (string)")}get(T){return this.data[m.ShapeUtil.indicesToOffset(T,this.strides)]}set(T,E){this.data[m.ShapeUtil.indicesToOffset(T,this.strides)]=E}async getData(){return this.cache===void 0&&(this.cache=await this.asyncDataProvider(this.dataId)),this.cache}get strides(){return this._strides||(this._strides=m.ShapeUtil.computeStrides(this.dims)),this._strides}constructor(T,E,O,R,M,C=o.Guid.create()){this.dims=T,this.type=E,this.dataProvider=O,this.asyncDataProvider=R,this.cache=M,this.dataId=C,this.size=m.ShapeUtil.validateDimsAndCalcSize(T);const j=this.size,$=O===void 0&&R===void 0&&M===void 0;if(M!==void 0&&M.length!==j)throw new RangeError("Input dims doesn't match data length.");if(E==="string"){if(!(M===void 0||Array.isArray(M)&&M.every((L=>typeof L=="string"))))throw new TypeError("cache should be a string array");$&&(this.cache=new Array(j))}else{if(M!==void 0){const L=l(E);if(!(M instanceof L))throw new TypeError(`cache should be type ${L.name}`)}if($){const L=new ArrayBuffer(j*(function(N){switch(N){case"bool":case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;case"float64":return 8;default:throw new Error(`cannot calculate sizeof() on type ${N}`)}})(E));this.cache=(function(N,B){return new(l(B))(N)})(L,E)}}}static fromProto(T){if(!T)throw new Error("cannot construct Value from an empty tensor");const E=m.ProtoUtil.tensorDataTypeFromProto(T.dataType),O=m.ProtoUtil.tensorDimsFromProto(T.dims),R=new _(O,E);if(E==="string")T.stringData.forEach(((M,C)=>{R.data[C]=(0,m.decodeUtf8String)(M)}));else if(T.rawData&&typeof T.rawData.byteLength=="number"&&T.rawData.byteLength>0){const M=R.data,C=new DataView(T.rawData.buffer,T.rawData.byteOffset,T.rawData.byteLength),j=f(T.dataType),$=T.rawData.byteLength/j;if(T.rawData.byteLength%j!=0)throw new Error("invalid buffer length");if(M.length!==$)throw new Error("buffer length mismatch");for(let L=0;L<$;L++){const N=v(C,T.dataType,L*j);M[L]=N}}else{let M;switch(T.dataType){case d.onnx.TensorProto.DataType.FLOAT:M=T.floatData;break;case d.onnx.TensorProto.DataType.INT32:case d.onnx.TensorProto.DataType.INT16:case d.onnx.TensorProto.DataType.UINT16:case d.onnx.TensorProto.DataType.INT8:case d.onnx.TensorProto.DataType.UINT8:case d.onnx.TensorProto.DataType.BOOL:M=T.int32Data;break;case d.onnx.TensorProto.DataType.INT64:M=T.int64Data;break;case d.onnx.TensorProto.DataType.DOUBLE:M=T.doubleData;break;case d.onnx.TensorProto.DataType.UINT32:case d.onnx.TensorProto.DataType.UINT64:M=T.uint64Data;break;default:throw new Error("unspecific error")}if(M==null)throw new Error("failed to populate data from a tensorproto value");const C=R.data;if(C.length!==M.length)throw new Error("array length mismatch");for(let j=0;j<M.length;j++){const $=M[j];u.default.isLong($)?C[j]=g($,T.dataType):C[j]=$}}return R}static fromData(T,E,O){return new _(E,O,void 0,void 0,T)}static fromOrtTensor(T){if(!T)throw new Error("cannot construct Value from an empty tensor");const E=m.ProtoUtil.tensorDimsFromORTFormat(T),O=m.ProtoUtil.tensorDataTypeFromProto(T.dataType()),R=new _(E,O);if(O==="string")for(let M=0;M<T.stringDataLength();M++)R.data[M]=T.stringData(M);else if(T.rawDataArray()&&typeof T.rawDataLength()=="number"&&T.rawDataLength()>0){const M=R.data,C=new DataView(T.rawDataArray().buffer,T.rawDataArray().byteOffset,T.rawDataLength()),j=f(T.dataType()),$=T.rawDataLength()/j;if(T.rawDataLength()%j!=0)throw new Error("invalid buffer length");if(M.length!==$)throw new Error("buffer length mismatch");for(let L=0;L<$;L++){const N=v(C,T.dataType(),L*j);M[L]=N}}return R}}function f(S){switch(S){case d.onnx.TensorProto.DataType.UINT8:case d.onnx.TensorProto.DataType.INT8:case d.onnx.TensorProto.DataType.BOOL:return 1;case d.onnx.TensorProto.DataType.UINT16:case d.onnx.TensorProto.DataType.INT16:return 2;case d.onnx.TensorProto.DataType.FLOAT:case d.onnx.TensorProto.DataType.INT32:case d.onnx.TensorProto.DataType.UINT32:return 4;case d.onnx.TensorProto.DataType.INT64:case d.onnx.TensorProto.DataType.DOUBLE:case d.onnx.TensorProto.DataType.UINT64:return 8;default:throw new Error(`cannot calculate sizeof() on type ${d.onnx.TensorProto.DataType[S]}`)}}function l(S){switch(S){case"bool":case"uint8":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;default:throw new Error("unspecified error")}}function g(S,T){if(T===d.onnx.TensorProto.DataType.INT64||T===p.TensorDataType.INT64){if(S.greaterThanOrEqual(2147483648)||S.lessThan(-2147483648))throw new TypeError("int64 is not supported")}else{if(T!==d.onnx.TensorProto.DataType.UINT32&&T!==p.TensorDataType.UINT32&&T!==d.onnx.TensorProto.DataType.UINT64&&T!==p.TensorDataType.UINT64)throw new TypeError(`not a LONG type: ${d.onnx.TensorProto.DataType[T]}`);if(S.greaterThanOrEqual(4294967296)||S.lessThan(0))throw new TypeError("uint64 is not supported")}return S.toNumber()}function v(S,T,E){switch(T){case d.onnx.TensorProto.DataType.BOOL:case d.onnx.TensorProto.DataType.UINT8:return S.getUint8(E);case d.onnx.TensorProto.DataType.INT8:return S.getInt8(E);case d.onnx.TensorProto.DataType.UINT16:return S.getUint16(E,!0);case d.onnx.TensorProto.DataType.INT16:return S.getInt16(E,!0);case d.onnx.TensorProto.DataType.FLOAT:return S.getFloat32(E,!0);case d.onnx.TensorProto.DataType.INT32:return S.getInt32(E,!0);case d.onnx.TensorProto.DataType.UINT32:return S.getUint32(E,!0);case d.onnx.TensorProto.DataType.INT64:return g(u.default.fromBits(S.getUint32(E,!0),S.getUint32(E+4,!0),!1),T);case d.onnx.TensorProto.DataType.DOUBLE:return S.getFloat64(E,!0);case d.onnx.TensorProto.DataType.UINT64:return g(u.default.fromBits(S.getUint32(E,!0),S.getUint32(E+4,!0),!0),T);default:throw new Error(`cannot read from DataView for type ${d.onnx.TensorProto.DataType[T]}`)}}e.Tensor=_},2517:function(t,e,n){var i=this&&this.__importDefault||function(T){return T&&T.__esModule?T:{default:T}};Object.defineProperty(e,"__esModule",{value:!0}),e.decodeUtf8String=e.MAX_CLIP=e.MIN_CLIP=e.PoolConvUtil=e.ReduceUtil=e.SplitUtil=e.MathUtil=e.ShapeUtil=e.LongUtil=e.ProtoUtil=e.GemmUtil=e.arrayCopyHelper=e.BroadcastUtil=e.MatMulUtil=e.ArrayUtil=e.assert=e.checkInputsShape=void 0;const o=n(5686),u=i(n(3720)),d=n(1446),h=n(9162);e.checkInputsShape=function(T,...E){if(!T||T.length!==E.length)return!1;for(let O=0;O<T.length;O++)if(!T[O].dims||T[O].dims.length!==E[O])return!1;return!0},e.assert=function(T,E){if(!T)throw new Error(typeof E=="string"?E:E())},e.ArrayUtil=class{static arraysEqual(T,E){if(T.length!==E.length)return!1;for(let O=0;O<T.length;O++)if(T[O]!==E[O])return!1;return!0}};class m{static preprocessInputShapes(E,O){return[E.length===1?[1,E[0]]:E,O.length===1?[O[0],1]:O]}static postprocessOutputShape(E,O,R){O===1&&E.splice(E.length-2,1),R===1&&E.pop()}static calcMatMulShape(E,O){return E[1]!==O[0]?void 0:[E[0],O[1]]}}e.MatMulUtil=m;class p{static calcShape(E,O,R=!1){const M=E.length,C=O.length;if(M===0)return O;if(C===0)return E;const j=Math.max(E.length,O.length),$=new Array(j);if(R){if(M<2||C<2)return;const L=m.calcMatMulShape([E[M-2],E[M-1]],[O[C-2],O[C-1]]);if(L===void 0)return;[$[j-2],$[j-1]]=L}for(let L=R?3:1;L<=j;L++){const N=M-L<0?1:E[M-L],B=C-L<0?1:O[C-L];if(N!==B&&N>1&&B>1)return;$[j-L]=Math.max(N,B)}return $}static index(E,O){const R=new Array(O.length);return p.fillIndex(E,O,R),R}static fillIndex(E,O,R){const M=E.length-O.length;for(let C=0;C<O.length;C++)R[C]=E[M+C]%O[C]}static calc(E,O,R,M,C){const j=p.calcShape(E.dims,O.dims);if(j){if(M&&!l.areEqual(j,E.dims))return;const $=l.size(j),L=M?E:new h.Tensor(j,C||E.type);if(j.length===0)L.set([],R(E.get([]),O.get([])));else{const N=new Array(j.length),B=new Array(E.dims.length),U=new Array(O.dims.length);let H,Y=0,K=0,z=!1,V=!1;E.dims.length===0&&(Y=E.get([]),z=!0),O.dims.length===0&&(K=O.get([]),V=!0);for(let G=0;G<$;G++){H=G;for(let ie=j.length-1;ie>=0;ie--)N[ie]=H%j[ie],H=Math.floor(H/j[ie]);z||(p.fillIndex(N,E.dims,B),Y=E.get(B)),V||(p.fillIndex(N,O.dims,U),K=O.get(U)),L.set(N,R(Y,K))}}return L}}static isValidBroadcast(E,O){const R=E.length,M=O.length;if(R>M)return!1;for(let C=1;C<=R;C++)if(E[R-C]!==1&&E[R-C]!==O[M-C])return!1;return!0}static getBroadcastDims(E,O){const R=E.length,M=[];for(let C=0;C<R;C++){const j=R-1-C,$=E[j]||1;(O[O.length-1-C]||1)>1&&$===1&&M.unshift(j)}return M}}e.BroadcastUtil=p,e.arrayCopyHelper=function(T,E,O,R,M){if(R<0||R>=E.length)throw new Error("sourceIndex out of bounds");if(O<0||O>=T.length)throw new Error("targetIndex out of bounds");if(R+M>E.length)throw new Error("source indices to be copied are outside bounds");if(O+M>T.length)throw new Error("target array is too small to hold result");for(let C=0;C<M;C++)T[O+C]=E[R+C]},e.GemmUtil=class{static getShapeOfGemmResult(T,E,O,R,M){if(T.length!==2||O.length!==2)throw new Error("shape need to be of size 2");let C,j,$;E?(C=T[1],j=T[0]):(C=T[0],j=T[1]);let L=-1;if(R?($=O[0],L=1):($=O[1],L=0),O[L]!==j)throw new Error("dimension mismatch");if(C<=0||$<=0||j<=0)throw new Error("invalid shape specified");if(M&&!p.isValidBroadcast(M,[C,$]))throw new Error("gemm: invalid bias shape for broadcast");return[C,$,j]}};class _{static tensorDataTypeFromProto(E){switch(E){case d.onnx.TensorProto.DataType.INT8:return"int8";case d.onnx.TensorProto.DataType.UINT8:return"uint8";case d.onnx.TensorProto.DataType.BOOL:return"bool";case d.onnx.TensorProto.DataType.INT16:return"int16";case d.onnx.TensorProto.DataType.UINT16:return"uint16";case d.onnx.TensorProto.DataType.INT32:return"int32";case d.onnx.TensorProto.DataType.UINT32:return"uint32";case d.onnx.TensorProto.DataType.FLOAT:return"float32";case d.onnx.TensorProto.DataType.DOUBLE:return"float64";case d.onnx.TensorProto.DataType.STRING:return"string";case d.onnx.TensorProto.DataType.INT64:return"int32";case d.onnx.TensorProto.DataType.UINT64:return"uint32";default:throw new Error(`unsupported data type: ${d.onnx.TensorProto.DataType[E]}`)}}static tensorDataTypeStringToEnum(E){switch(E){case"int8":return d.onnx.TensorProto.DataType.INT8;case"uint8":return d.onnx.TensorProto.DataType.UINT8;case"bool":return d.onnx.TensorProto.DataType.BOOL;case"int16":return d.onnx.TensorProto.DataType.INT16;case"uint16":return d.onnx.TensorProto.DataType.UINT16;case"int32":return d.onnx.TensorProto.DataType.INT32;case"uint32":return d.onnx.TensorProto.DataType.UINT32;case"float32":return d.onnx.TensorProto.DataType.FLOAT;case"float64":return d.onnx.TensorProto.DataType.DOUBLE;case"string":return d.onnx.TensorProto.DataType.STRING;case"int64":return d.onnx.TensorProto.DataType.INT64;case"uint64":return d.onnx.TensorProto.DataType.UINT64;default:throw new Error(`unsupported data type: ${E}`)}}static tensorDimsFromProto(E){return E.map((O=>u.default.isLong(O)?O.toNumber():O))}static tensorValueTypeFromProto(E){return{tensorType:_.tensorDataTypeFromProto(E.elemType),shape:{dims:_.tensorDimsFromProto(E.shape.dim.map((O=>O.dimValue)))}}}static tensorDimsFromORTFormat(E){const O=[];for(let R=0;R<E.dimsLength();R++)O.push(f.longToNumber(E.dims(R)));return O}static tensorAttributesFromORTFormat(E){const O=[];for(let R=0;R<E.attributesLength();R++)O.push(E.attributes(R));return O}}e.ProtoUtil=_;class f{static longToNumber(E,O){return u.default.isLong(E)?E.toNumber():E instanceof o.flatbuffers.Long?u.default.fromValue({low:E.low,high:E.high,unsigned:O!=null&&O}).toNumber():E}static isLong(E){return u.default.isLong(E)||E instanceof o.flatbuffers.Long}}e.LongUtil=f;class l{static size(E){return l.getSizeFromDimensionRange(E,0,E.length)}static sizeFromDimension(E,O){if(O<0||O>E.length)throw new Error(`invalid dimension of ${O} for sizeFromDimension as Tensor has ${E.length} dimensions.`);return l.getSizeFromDimensionRange(E,O,E.length)}static sizeToDimension(E,O){if(O<0||O>E.length)throw new Error(`invalid dimension of ${O} for sizeToDimension as Tensor has ${E.length} dimensions.`);return l.getSizeFromDimensionRange(E,0,O)}static getSizeFromDimensionRange(E,O,R){let M=1;for(let C=O;C<R;C++){if(E[C]<=0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains 0 or negative values in them.");M*=E[C]}return M}static computeStrides(E){const O=E.length;if(O===0)return[];if(O===1)return[1];const R=new Array(O);R[O-1]=1,R[O-2]=E[O-1];for(let M=O-3;M>=0;--M)R[M]=R[M+1]*E[M+1];return R}static transpose(E){return E.slice().reverse()}static indicesToOffset(E,O,R){R===void 0&&(R=E.length);let M=0;for(let C=0;C<R;++C)M+=O[C]*E[C];return M}static offsetToIndices(E,O){const R=O.length;if(R===0)return[];if(R===1)return[E*O[0]];const M=new Array(O.length);for(let C=0;C<M.length-1;++C)M[C]=Math.floor(E/O[C]),E-=M[C]*O[C];return M[M.length-1]=E,M}static normalizeAxis(E,O){if(E<-O&&E>=O)throw new Error("unsupported axis for this operation.");return E<0?E+O:E}static normalizeAxes(E,O){return E.map((R=>this.normalizeAxis(R,O)))}static incrementIndex(E,O,R){if(O.length===0||E.length===0)throw new Error("Index incrementing unsupported for scalar Tensor");if(R===void 0)R=O.length;else if(R<=0||R>O.length)throw new Error("Incorrect axis to increment on");for(let M=R-1;M>=0&&(E[M]++,!(E[M]<O[M]));--M)E[M]=0}static calculateReshapedDims(E,O){if(O.length===0){if(E.length===0||l.size(E)===1)return[];throw new Error("cannot reshape to a scalar Tensor")}const R=O.length,M=new Array(R);let C=-1,j=1;for(let L=0;L<R;L++){if(O[L]<-1)throw new Error("a dimension in shape hints cannot be less than -1");if(O[L]===-1){if(C!==-1)throw new Error("at most one dimension in shape hints can be -1");C=L}else{if(O[L]===0){if(L>=E.length)throw new Error("the dimension with value zero exceeds the dimension size of the input tensor");M[L]=E[L]}else M[L]=O[L];j*=M[L]}}const $=l.size(E);if(C!==-1){if($%j!=0)throw new Error(`the input tensor cannot be reshaped to the requested shape. Input shape: [${E}] Output shape: [${O}]`);M[C]=$/j}else if(j!==$)throw new Error("reshapedDims and originalDims don't have matching sizes");return M}static sortBasedOnPerm(E,O){return O?O.map((R=>E[R])):E.slice().reverse()}static padShape(E,O){const R=E.length;return E.map(((M,C)=>M+O[C]+O[C+R]))}static areEqual(E,O){return E.length===O.length&&E.every(((R,M)=>R===O[M]))}static validateDimsAndCalcSize(E){if(E.length>6)throw new TypeError("Only rank 0 to 6 is supported for tensor shape.");let O=1;for(const R of E){if(!Number.isInteger(R))throw new TypeError(`Invalid shape: ${R} is not an integer`);if(R<0||R>2147483647)throw new TypeError(`Invalid shape: length ${R} is not allowed`);O*=R}return O}static flattenShape(E,O){O<0&&(O+=E.length);const R=E.reduce(((C,j)=>C*j),1),M=E.slice(O).reduce(((C,j)=>C*j),1);return[R/M,M]}static squeezeShape(E,O){const R=new Array;O=l.normalizeAxes(O,E.length);for(let M=0;M<E.length;M++){const C=O.indexOf(M)>=0;if(C&&E[M]!==1)throw new Error("squeeze an axis of size different than 1");(O.length===0&&E[M]>1||O.length>0&&!C)&&R.push(E[M])}return R}static unsqueezeShape(E,O){const R=new Array(E.length+O.length);R.fill(0);for(let C=0;C<O.length;C++){const j=l.normalizeAxis(O[C],R.length);if(j>=R.length)throw new Error("'axes' has an out of range axis");if(R[j]!==0)throw new Error("'axes' has a duplicate axis");R[j]=1}let M=0;for(let C=0;C<R.length;C++)R[C]===0&&(R[C]=E[M++]);if(M!==E.length)throw new Error("the unsqueezed dimension could not be established");return R}}e.ShapeUtil=l,e.MathUtil=class{static sqr(T,E,O,R,M){if(R<0||R>=E.length)throw new Error("sourceIndex out of bounds");if(O<0||O>=T.length)throw new Error("targetIndex out of bounds");if(R+M>E.length)throw new Error("source indices to be copied are outside bounds");if(O+M>T.length)throw new Error("target array is too small to hold result");for(let C=0;C<M;C++)T[O+C]+=Math.pow(E[R+C],2)}static axpy(T,E,O,R,M,C){if(R<0||R>=E.length)throw new Error("sourceIndex out of bounds");if(O<0||O>=T.length)throw new Error("targetIndex out of bounds");if(R+M>E.length)throw new Error("source indices to be copied are outside bounds");if(O+M>T.length)throw new Error("target array is too small to hold result");for(let j=0;j<M;j++)T[O+j]+=C*E[R+j]}static powx(T,E,O,R,M,C){if(R<0||R>=E.length)throw new Error("sourceIndex out of bounds");if(O<0||O>=T.length)throw new Error("targetIndex out of bounds");if(R+M>E.length)throw new Error("source indices to be copied are outside bounds");if(O+M>T.length)throw new Error("target array is too small to hold result");for(let j=0;j<M;j++)T[O+j]=Math.pow(E[R+j],C)}static mul(T,E,O,R,M){if(R<0||R>=E.length)throw new Error("sourceIndex out of bounds");if(O<0||O>=T.length)throw new Error("targetIndex out of bounds");if(R+M>E.length)throw new Error("source indices to be copied are outside bounds");if(O+M>T.length)throw new Error("target array is too small to hold result");for(let C=0;C<M;C++)T[O+C]=E[R+C]*T[O+C]}};class g{static splitShape(E,O,R,M){if(R.length===0){if(!M)throw new Error("need to know number of outputs when the 'split' attribute is not specified");g.determineSplit(E[O],M,R)}const C=[],j=[0];for(let $=0;$<R.length;++$){$!==0&&j.push(j[$-1]+R[$-1]);const L=E.slice();L[O]=R[$],C.push(L)}return[C,j]}static determineSplit(E,O,R){if(E%O!=0)throw new Error("cannot split tensor to equal sized parts");for(let M=0;M<O;++M)R.push(E/O)}}e.SplitUtil=g;class v{static calcReduce(E,O,R,M,C){const j=E.dims.slice(0);O.length===0&&j.forEach(((Y,K)=>O.push(K)));const $=v.calcReduceShape(j,O,!0),L=l.size($),N=new h.Tensor($,E.type),B=l.computeStrides($),U=l.computeStrides(j),H=new Array(j.length);for(let Y=0;Y<L;Y++){const K=l.offsetToIndices(Y,B);p.fillIndex(K,j,H),N.set(K,v.calcReduceByAxis(E.numberData,O,j,0,l.indicesToOffset(H,U),M,C))}return R?N:new h.Tensor(v.calcReduceShape(j,O,R),N.type,void 0,void 0,N.data,N.dataId)}static calcReduceByAxis(E,O,R,M,C,j,$){let L=0;if(M>=O.length)return j(E[C]);const N=O[M],B=N>=R.length?1:l.size(R.slice(N+1));for(let U=0;U<R[N];U++)L=U===0?v.calcReduceByAxis(E,O,R,M+1,C,j,$):$(L,v.calcReduceByAxis(E,O,R,M+1,C,j,$)),C+=B;return L}static calcReduceShape(E,O,R){const M=E.slice();for(let C=0;C<O.length;C++)M[O[C]]=R?1:0;return M.filter((C=>C!==0))}}e.ReduceUtil=v;class S{static adjustPoolAttributes(E,O,R,M,C,j){if(!E&&R.length!==O.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(E)for(let $=0;$<O.length-2;$++)$>=R.length?R.push(O[$+2]):R[$]=O[$+2];for(let $=0;$<R.length;$++)if($<M.length){if(M[$]<0)throw new Error("strides should be greater than or equal to 1")}else M.push(1);for(let $=0;$<R.length;$++)if($<C.length){if(C[$]<0)throw new Error("dilations should be greater than or equal to 1")}else C.push(1);for(let $=0;$<2*R.length;$++)if($<j.length){if(j[$]<0)throw new Error("pad should be greater than or equal to 1")}else j.push(0);for(let $=0;$<R.length;$++){if(R[$]<=0)throw new Error("kernel shapes need to be greater than 0");if(j[$]>=R[$]||j[$+R.length]>=R[$])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(E,O,R,M,C,j){if(j){if(C.length!==2*(E.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(O.length!==E.length-2)throw new Error("length of strides should be the length of data dimensions");if(M.length!==E.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let $=0;$<E.length-2;$++)S.adjustPadAndReturnShape(E[$+2],O[$],R[$],M[$],C,$,$+E.length-2,j)}}static computePoolOutputShape(E,O,R,M,C,j,$){if(O.length<=0)throw new Error("input shape must be of size greater than 0");const L=[O[0],O[1]];return S.computeShapeHelper(E,O,L,R,M,C,j,$),L}static computeConvOutputShape(E,O,R,M,C,j,$){if(E.length<=0||O.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");const L=[E[0],O[0]];return S.computeShapeHelper(!1,E,L,R,M,C,j,$),L}static computeShapeHelper(E,O,R,M,C,j,$,L){if(E)for(let N=0;N<O.length-2;N++)R.push(1);else for(let N=0;N<O.length-2;N++)R.push(S.adjustPadAndReturnShape(O[N+2],M[N],C[N],j[N],$,N,N+O.length-2,L))}static adjustPadAndReturnShape(E,O,R,M,C,j,$,L){const N=R*(M-1)+1;if(!L||L==="NOTSET")return Math.floor((E+C[j]+C[$]-N)/O+1);switch(L){case"VALID":return C[j]=0,C[$]=0,Math.floor((E-N)/O+1);case"SAME_LOWER":case"SAME_UPPER":if(R!==1)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{const B=((E+O-1)/O-1)*O+M-E;return C[j]=Math.floor(L==="SAME_LOWER"?(B+1)/2:B/2),C[$]=B-C[j],Math.floor((E+B-M)/O+1)}default:throw new Error("Unsupported AutoPad type")}}}e.PoolConvUtil=S,e.MIN_CLIP=-34028234663852886e22,e.MAX_CLIP=34028234663852886e22,e.decodeUtf8String=function(T){return new TextDecoder().decode(T)}},7967:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.iterateExtraOptions=void 0,e.iterateExtraOptions=(n,i,o,u)=>{if(typeof n=="object"&&n!==null){if(o.has(n))throw new Error("Circular reference in options");o.add(n)}Object.entries(n).forEach((([d,h])=>{const m=i?i+d:d;if(typeof h=="object")(0,e.iterateExtraOptions)(h,m+".",o,u);else if(typeof h=="string"||typeof h=="number")u(m,h.toString());else{if(typeof h!="boolean")throw new Error("Can't handle extra config type: "+typeof h);u(m,h?"1":"0")}}))}},2157:function(t,e,n){var i,o=this&&this.__createBinding||(Object.create?function(B,U,H,Y){Y===void 0&&(Y=H);var K=Object.getOwnPropertyDescriptor(U,H);K&&!("get"in K?!U.__esModule:K.writable||K.configurable)||(K={enumerable:!0,get:function(){return U[H]}}),Object.defineProperty(B,Y,K)}:function(B,U,H,Y){Y===void 0&&(Y=H),B[Y]=U[H]}),u=this&&this.__setModuleDefault||(Object.create?function(B,U){Object.defineProperty(B,"default",{enumerable:!0,value:U})}:function(B,U){B.default=U}),d=this&&this.__importStar||function(B){if(B&&B.__esModule)return B;var U={};if(B!=null)for(var H in B)H!=="default"&&Object.prototype.hasOwnProperty.call(B,H)&&o(U,B,H);return u(U,B),U};Object.defineProperty(e,"__esModule",{value:!0}),e.endProfiling=e.run=e.releaseSession=e.createSession=e.createSessionFinalize=e.createSessionAllocate=e.initOrt=e.initWasm=void 0;const h=n(1670),m=d(n(349)),p=n(6361),_=()=>!!h.env.wasm.proxy&&typeof document<"u";let f,l,g,v=!1,S=!1,T=!1;const E=[],O=[],R=[],M=[],C=[],j=[],$=()=>{if(v||!S||T||!f)throw new Error("worker not ready")},L=B=>{switch(B.data.type){case"init-wasm":v=!1,B.data.err?(T=!0,l[1](B.data.err)):(S=!0,l[0]());break;case"init-ort":B.data.err?g[1](B.data.err):g[0]();break;case"create_allocate":B.data.err?E.shift()[1](B.data.err):E.shift()[0](B.data.out);break;case"create_finalize":B.data.err?O.shift()[1](B.data.err):O.shift()[0](B.data.out);break;case"create":B.data.err?R.shift()[1](B.data.err):R.shift()[0](B.data.out);break;case"release":B.data.err?M.shift()[1](B.data.err):M.shift()[0]();break;case"run":B.data.err?C.shift()[1](B.data.err):C.shift()[0](B.data.out);break;case"end-profiling":B.data.err?j.shift()[1](B.data.err):j.shift()[0]()}},N=typeof document<"u"?(i=document?.currentScript)===null||i===void 0?void 0:i.src:void 0;e.initWasm=async()=>{if(_()){if(S)return;if(v)throw new Error("multiple calls to 'initWasm()' detected.");if(T)throw new Error("previous call to 'initWasm()' failed.");return v=!0,h.env.wasm.wasmPaths===void 0&&N&&N.indexOf("blob:")!==0&&(h.env.wasm.wasmPaths=N.substr(0,+N.lastIndexOf("/")+1)),new Promise(((B,U)=>{f?.terminate(),f=n(9710).Z(),f.onmessage=L,l=[B,U];const H={type:"init-wasm",in:h.env.wasm};f.postMessage(H)}))}return(0,p.initializeWebAssembly)(h.env.wasm)},e.initOrt=async(B,U)=>{if(_())return $(),new Promise(((H,Y)=>{g=[H,Y];const K={type:"init-ort",in:{numThreads:B,loggingLevel:U}};f.postMessage(K)}));m.initOrt(B,U)},e.createSessionAllocate=async B=>_()?($(),new Promise(((U,H)=>{E.push([U,H]);const Y={type:"create_allocate",in:{model:B}};f.postMessage(Y,[B.buffer])}))):m.createSessionAllocate(B),e.createSessionFinalize=async(B,U)=>_()?($(),new Promise(((H,Y)=>{O.push([H,Y]);const K={type:"create_finalize",in:{modeldata:B,options:U}};f.postMessage(K)}))):m.createSessionFinalize(B,U),e.createSession=async(B,U)=>_()?($(),new Promise(((H,Y)=>{R.push([H,Y]);const K={type:"create",in:{model:B,options:U}};f.postMessage(K,[B.buffer])}))):m.createSession(B,U),e.releaseSession=async B=>{if(_())return $(),new Promise(((U,H)=>{M.push([U,H]);const Y={type:"release",in:B};f.postMessage(Y)}));m.releaseSession(B)},e.run=async(B,U,H,Y,K)=>_()?($(),new Promise(((z,V)=>{C.push([z,V]);const G={type:"run",in:{sessionId:B,inputIndices:U,inputs:H,outputIndices:Y,options:K}};f.postMessage(G,m.extractTransferableBuffers(H))}))):m.run(B,U,H,Y,K),e.endProfiling=async B=>{if(_())return $(),new Promise(((U,H)=>{j.push([U,H]);const Y={type:"end-profiling",in:B};f.postMessage(Y)}));m.endProfiling(B)}},586:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.setRunOptions=void 0;const i=n(7967),o=n(4983),u=n(6361);e.setRunOptions=d=>{const h=(0,u.getInstance)();let m=0;const p=[],_=d||{};try{if(d?.logSeverityLevel===void 0)_.logSeverityLevel=2;else if(typeof d.logSeverityLevel!="number"||!Number.isInteger(d.logSeverityLevel)||d.logSeverityLevel<0||d.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${d.logSeverityLevel}`);if(d?.logVerbosityLevel===void 0)_.logVerbosityLevel=0;else if(typeof d.logVerbosityLevel!="number"||!Number.isInteger(d.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${d.logVerbosityLevel}`);d?.terminate===void 0&&(_.terminate=!1);let f=0;if(d?.tag!==void 0&&(f=(0,o.allocWasmString)(d.tag,p)),m=h._OrtCreateRunOptions(_.logSeverityLevel,_.logVerbosityLevel,!!_.terminate,f),m===0)throw new Error("Can't create run options");return d?.extra!==void 0&&(0,i.iterateExtraOptions)(d.extra,"",new WeakSet,((l,g)=>{const v=(0,o.allocWasmString)(l,p),S=(0,o.allocWasmString)(g,p);if(h._OrtAddRunConfigEntry(m,v,S)!==0)throw new Error(`Can't set a run config entry: ${l} - ${g}`)})),[m,p]}catch(f){throw m!==0&&h._OrtReleaseRunOptions(m),p.forEach(h._free),f}}},2306:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OnnxruntimeWebAssemblySessionHandler=void 0;const i=n(2806),o=n(1670),u=n(2850),d=n(2157);let h;e.OnnxruntimeWebAssemblySessionHandler=class{async createSessionAllocate(m){const p=await fetch(m),_=await p.arrayBuffer();return(0,d.createSessionAllocate)(new Uint8Array(_))}async loadModel(m,p){if(h||(await(0,d.initOrt)(o.env.wasm.numThreads,(_=>{switch(_){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${_}`)}})(o.env.logLevel)),h=!0),typeof m=="string")if(typeof fetch>"u"){const _=await(0,u.promisify)(i.readFile)(m);[this.sessionId,this.inputNames,this.outputNames]=await(0,d.createSession)(_,p)}else{const _=await this.createSessionAllocate(m);[this.sessionId,this.inputNames,this.outputNames]=await(0,d.createSessionFinalize)(_,p)}else[this.sessionId,this.inputNames,this.outputNames]=await(0,d.createSession)(m,p)}async dispose(){return(0,d.releaseSession)(this.sessionId)}async run(m,p,_){const f=[],l=[];Object.entries(m).forEach((T=>{const E=T[0],O=T[1],R=this.inputNames.indexOf(E);if(R===-1)throw new Error(`invalid input '${E}'`);f.push(O),l.push(R)}));const g=[];Object.entries(p).forEach((T=>{const E=T[0],O=this.outputNames.indexOf(E);if(O===-1)throw new Error(`invalid output '${E}'`);g.push(O)}));const v=await(0,d.run)(this.sessionId,l,f.map((T=>[T.type,T.dims,T.data])),g,_),S={};for(let T=0;T<v.length;T++)S[this.outputNames[g[T]]]=new o.Tensor(v[T][0],v[T][2],v[T][1]);return S}startProfiling(){}endProfiling(){(0,d.endProfiling)(this.sessionId)}}},4919:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.setSessionOptions=void 0;const i=n(7967),o=n(4983),u=n(6361);e.setSessionOptions=d=>{const h=(0,u.getInstance)();let m=0;const p=[],_=d||{};(f=>{f.extra||(f.extra={}),f.extra.session||(f.extra.session={});const l=f.extra.session;l.use_ort_model_bytes_directly||(l.use_ort_model_bytes_directly="1")})(_);try{d?.graphOptimizationLevel===void 0&&(_.graphOptimizationLevel="all");const f=(v=>{switch(v){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${v}`)}})(_.graphOptimizationLevel);d?.enableCpuMemArena===void 0&&(_.enableCpuMemArena=!0),d?.enableMemPattern===void 0&&(_.enableMemPattern=!0),d?.executionMode===void 0&&(_.executionMode="sequential");const l=(v=>{switch(v){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${v}`)}})(_.executionMode);let g=0;if(d?.logId!==void 0&&(g=(0,o.allocWasmString)(d.logId,p)),d?.logSeverityLevel===void 0)_.logSeverityLevel=2;else if(typeof d.logSeverityLevel!="number"||!Number.isInteger(d.logSeverityLevel)||d.logSeverityLevel<0||d.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${d.logSeverityLevel}`);if(d?.logVerbosityLevel===void 0)_.logVerbosityLevel=0;else if(typeof d.logVerbosityLevel!="number"||!Number.isInteger(d.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${d.logVerbosityLevel}`);if(d?.enableProfiling===void 0&&(_.enableProfiling=!1),m=h._OrtCreateSessionOptions(f,!!_.enableCpuMemArena,!!_.enableMemPattern,l,!!_.enableProfiling,0,g,_.logSeverityLevel,_.logVerbosityLevel),m===0)throw new Error("Can't create session options");return d?.executionProviders&&((v,S,T)=>{for(const E of S){let O=typeof E=="string"?E:E.name;switch(O){case"xnnpack":O="XNNPACK";break;case"wasm":case"cpu":continue;default:throw new Error(`not supported EP: ${O}`)}const R=(0,o.allocWasmString)(O,T);if((0,u.getInstance)()._OrtAppendExecutionProvider(v,R)!==0)throw new Error(`Can't append execution provider: ${O}`)}})(m,d.executionProviders,p),d?.extra!==void 0&&(0,i.iterateExtraOptions)(d.extra,"",new WeakSet,((v,S)=>{const T=(0,o.allocWasmString)(v,p),E=(0,o.allocWasmString)(S,p);if(h._OrtAddSessionConfigEntry(m,T,E)!==0)throw new Error(`Can't set a session config entry: ${v} - ${S}`)})),[m,p]}catch(f){throw m!==0&&h._OrtReleaseSessionOptions(m),p.forEach(h._free),f}}},4983:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.allocWasmString=void 0;const i=n(6361);e.allocWasmString=(o,u)=>{const d=(0,i.getInstance)(),h=d.lengthBytesUTF8(o)+1,m=d._malloc(h);return d.stringToUTF8(o,m,h),u.push(m),m}},349:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.extractTransferableBuffers=e.endProfiling=e.run=e.releaseSession=e.createSession=e.createSessionFinalize=e.createSessionAllocate=e.initOrt=void 0;const i=n(586),o=n(4919),u=n(4983),d=n(6361);e.initOrt=(f,l)=>{const g=(0,d.getInstance)()._OrtInit(f,l);if(g!==0)throw new Error(`Can't initialize onnxruntime. error code = ${g}`)};const h=new Map;e.createSessionAllocate=f=>{const l=(0,d.getInstance)(),g=l._malloc(f.byteLength);return l.HEAPU8.set(f,g),[g,f.byteLength]},e.createSessionFinalize=(f,l)=>{const g=(0,d.getInstance)();let v=0,S=0,T=[];try{if([S,T]=(0,o.setSessionOptions)(l),v=g._OrtCreateSession(f[0],f[1],S),v===0)throw new Error("Can't create a session")}finally{g._free(f[0]),g._OrtReleaseSessionOptions(S),T.forEach(g._free)}const E=g._OrtGetInputCount(v),O=g._OrtGetOutputCount(v),R=[],M=[],C=[],j=[];for(let $=0;$<E;$++){const L=g._OrtGetInputName(v,$);if(L===0)throw new Error("Can't get an input name");M.push(L),R.push(g.UTF8ToString(L))}for(let $=0;$<O;$++){const L=g._OrtGetOutputName(v,$);if(L===0)throw new Error("Can't get an output name");j.push(L),C.push(g.UTF8ToString(L))}return h.set(v,[v,M,j]),[v,R,C]},e.createSession=(f,l)=>{const g=(0,e.createSessionAllocate)(f);return(0,e.createSessionFinalize)(g,l)},e.releaseSession=f=>{const l=(0,d.getInstance)(),g=h.get(f);if(!g)throw new Error("invalid session id");const v=g[0],S=g[1],T=g[2];S.forEach(l._OrtFree),T.forEach(l._OrtFree),l._OrtReleaseSession(v),h.delete(f)};const m=f=>{switch(f){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${f}`)}},p=f=>{switch(f){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${f}`)}},_=f=>{switch(f){case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${f}`)}};e.run=(f,l,g,v,S)=>{const T=(0,d.getInstance)(),E=h.get(f);if(!E)throw new Error("invalid session id");const O=E[0],R=E[1],M=E[2],C=l.length,j=v.length;let $=0,L=[];const N=[],B=[];try{[$,L]=(0,i.setRunOptions)(S);for(let V=0;V<C;V++){const G=g[V][0],ie=g[V][1],Z=g[V][2];let te,ee;if(Array.isArray(Z)){ee=4*Z.length,te=T._malloc(ee),B.push(te);let Ae=te/4;for(let Te=0;Te<Z.length;Te++){if(typeof Z[Te]!="string")throw new TypeError(`tensor data at index ${Te} is not a string`);T.HEAPU32[Ae++]=(0,u.allocWasmString)(Z[Te],B)}}else ee=Z.byteLength,te=T._malloc(ee),B.push(te),T.HEAPU8.set(new Uint8Array(Z.buffer,Z.byteOffset,ee),te);const le=T.stackSave(),ge=T.stackAlloc(4*ie.length);try{let Ae=ge/4;ie.forEach((Ce=>T.HEAP32[Ae++]=Ce));const Te=T._OrtCreateTensor(m(G),te,ee,ge,ie.length);if(Te===0)throw new Error("Can't create a tensor");N.push(Te)}finally{T.stackRestore(le)}}const U=T.stackSave(),H=T.stackAlloc(4*C),Y=T.stackAlloc(4*C),K=T.stackAlloc(4*j),z=T.stackAlloc(4*j);try{let V=H/4,G=Y/4,ie=K/4,Z=z/4;for(let le=0;le<C;le++)T.HEAPU32[V++]=N[le],T.HEAPU32[G++]=R[l[le]];for(let le=0;le<j;le++)T.HEAPU32[ie++]=0,T.HEAPU32[Z++]=M[v[le]];let te=T._OrtRun(O,Y,H,C,z,j,K,$);const ee=[];if(te===0)for(let le=0;le<j;le++){const ge=T.HEAPU32[K/4+le],Ae=T.stackSave(),Te=T.stackAlloc(16);let Ce,De=0;try{if(te=T._OrtGetTensorData(ge,Te,Te+4,Te+8,Te+12),te!==0)throw new Error(`Can't access output tensor data. error code = ${te}`);let Re=Te/4;const Ee=T.HEAPU32[Re++];De=T.HEAPU32[Re++];const Ie=T.HEAPU32[Re++],Le=T.HEAPU32[Re++],Se=[];for(let Fe=0;Fe<Le;Fe++)Se.push(T.HEAPU32[Ie/4+Fe]);T._OrtFree(Ie);const Ye=Se.length===0?1:Se.reduce(((Fe,at)=>Fe*at));if(Ce=p(Ee),Ce==="string"){const Fe=[];let at=De/4;for(let lt=0;lt<Ye;lt++){const dt=T.HEAPU32[at++],Rt=lt===Ye-1?void 0:T.HEAPU32[at]-dt;Fe.push(T.UTF8ToString(dt,Rt))}ee.push([Ce,Se,Fe])}else{const Fe=new(_(Ce))(Ye);new Uint8Array(Fe.buffer,Fe.byteOffset,Fe.byteLength).set(T.HEAPU8.subarray(De,De+Fe.byteLength)),ee.push([Ce,Se,Fe])}}finally{T.stackRestore(Ae),Ce==="string"&&De&&T._free(De),T._OrtReleaseTensor(ge)}}if(te===0)return ee;throw new Error(`failed to call OrtRun(). error code = ${te}.`)}finally{T.stackRestore(U)}}finally{N.forEach(T._OrtReleaseTensor),B.forEach(T._free),T._OrtReleaseRunOptions($),L.forEach(T._free)}},e.endProfiling=f=>{const l=(0,d.getInstance)(),g=h.get(f);if(!g)throw new Error("invalid session id");const v=g[0],S=l._OrtEndProfiling(v);if(S===0)throw new Error("Can't get an profile file name");l._OrtFree(S)},e.extractTransferableBuffers=f=>{const l=[];for(const g of f){const v=g[2];!Array.isArray(v)&&v.buffer&&l.push(v.buffer)}return l}},6361:function(t,e,n){var i=this&&this.__createBinding||(Object.create?function(S,T,E,O){O===void 0&&(O=E);var R=Object.getOwnPropertyDescriptor(T,E);R&&!("get"in R?!T.__esModule:R.writable||R.configurable)||(R={enumerable:!0,get:function(){return T[E]}}),Object.defineProperty(S,O,R)}:function(S,T,E,O){O===void 0&&(O=E),S[O]=T[E]}),o=this&&this.__setModuleDefault||(Object.create?function(S,T){Object.defineProperty(S,"default",{enumerable:!0,value:T})}:function(S,T){S.default=T}),u=this&&this.__importStar||function(S){if(S&&S.__esModule)return S;var T={};if(S!=null)for(var E in S)E!=="default"&&Object.prototype.hasOwnProperty.call(S,E)&&i(T,S,E);return o(T,S),T},d=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.getInstance=e.initializeWebAssembly=void 0;const h=u(n(6449)),m=d(n(932)),p=n(3474);let _,f=!1,l=!1,g=!1;const v=(S,T)=>T?S?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":S?"ort-wasm-simd.wasm":"ort-wasm.wasm";e.initializeWebAssembly=async S=>{if(f)return Promise.resolve();if(l)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(g)throw new Error("previous call to 'initializeWebAssembly()' failed.");l=!0;const T=S.initTimeout,E=S.numThreads,O=S.simd,R=E>1&&(()=>{try{return typeof SharedArrayBuffer<"u"&&(typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch{return!1}})(),M=O&&(()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}})(),C=typeof S.wasmPaths=="string"?S.wasmPaths:void 0,j=v(!1,R),$=v(M,R),L=typeof S.wasmPaths=="object"?S.wasmPaths[$]:void 0;let N=!1;const B=[];if(T>0&&B.push(new Promise((U=>{setTimeout((()=>{N=!0,U()}),T)}))),B.push(new Promise(((U,H)=>{const Y=R?p:m.default,K={locateFile:(z,V)=>R&&z.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([n(4154)],{type:"text/javascript"})):z===j?L??(C??V)+$:V+z};if(R)if(typeof Blob>"u")K.mainScriptUrlOrBlob=h.join("/","ort-wasm-threaded.js");else{const z=`var ortWasmThreaded=(function(){var _scriptDir;return ${Y.toString()}})();`;K.mainScriptUrlOrBlob=new Blob([z],{type:"text/javascript"})}Y(K).then((z=>{l=!1,f=!0,_=z,U()}),(z=>{l=!1,g=!0,H(z)}))}))),await Promise.race(B),N)throw new Error(`WebAssembly backend initializing failed due to timeout: ${T}ms`)},e.getInstance=()=>{if(f&&_)return _;throw new Error("WebAssembly is not initialized yet.")},e.dispose=()=>{var S;!f||l||g||(l=!0,(S=_.PThread)===null||S===void 0||S.terminateAllThreads(),_=void 0,l=!1,f=!1,g=!0)}},9710:(t,e,n)=>{n.d(e,{Z:()=>u});var i=n(477),o=n.n(i);function u(){return o()('/*!\n* ONNX Runtime Web v1.14.0\n* Copyright (c) Microsoft Corporation. All rights reserved.\n* Licensed under the MIT License.\n*/\n(()=>{var t={474:(t,e,n)=>{var _scriptDir,r=(_scriptDir=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(t){function e(){return j.buffer!=D&&N(j.buffer),P}function r(){return j.buffer!=D&&N(j.buffer),U}function a(){return j.buffer!=D&&N(j.buffer),F}function i(){return j.buffer!=D&&N(j.buffer),I}function o(){return j.buffer!=D&&N(j.buffer),W}var u,c,s;t=t||{},u||(u=void 0!==t?t:{}),u.ready=new Promise((function(t,e){c=t,s=e}));var l,f,p,h,d,y,b=Object.assign({},u),m="./this.program",g=(t,e)=>{throw e},v="object"==typeof window,w="function"==typeof importScripts,_="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,O=u.ENVIRONMENT_IS_PTHREAD||!1,A="";function S(t){return u.locateFile?u.locateFile(t,A):A+t}if(_){let e;A=w?n(908).dirname(A)+"/":"//",y=()=>{d||(h=n(384),d=n(908))},l=function(t,e){return y(),t=d.normalize(t),h.readFileSync(t,e?void 0:"utf8")},p=t=>((t=l(t,!0)).buffer||(t=new Uint8Array(t)),t),f=(t,e,n)=>{y(),t=d.normalize(t),h.readFile(t,(function(t,r){t?n(t):e(r.buffer)}))},1<process.argv.length&&(m=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(t){if(!(t instanceof ct))throw t})),process.on("unhandledRejection",(function(t){throw t})),g=(t,e)=>{if(Q())throw process.exitCode=t,e;e instanceof ct||x("exiting due to exception: "+e),process.exit(t)},u.inspect=function(){return"[Emscripten Module object]"};try{e=n(925)}catch(t){throw console.error(\'The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?\'),t}n.g.Worker=e.Worker}else(v||w)&&(w?A=self.location.href:"undefined"!=typeof document&&document.currentScript&&(A=document.currentScript.src),_scriptDir&&(A=_scriptDir),A=0!==A.indexOf("blob:")?A.substr(0,A.replace(/[?#].*/,"").lastIndexOf("/")+1):"",_||(l=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},w&&(p=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),f=(t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?e(r.response):n()},r.onerror=n,r.send(null)}));_&&"undefined"==typeof performance&&(n.g.performance=n(953).performance);var T=console.log.bind(console),E=console.warn.bind(console);_&&(y(),T=t=>h.writeSync(1,t+"\\n"),E=t=>h.writeSync(2,t+"\\n"));var M,C=u.print||T,x=u.printErr||E;Object.assign(u,b),b=null,u.thisProgram&&(m=u.thisProgram),u.quit&&(g=u.quit),u.wasmBinary&&(M=u.wasmBinary);var R=u.noExitRuntime||!1;"object"!=typeof WebAssembly&&at("no native wasm support detected");var j,k,D,P,U,F,I,W,H=!1,L="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function z(t,e,n){var r=(e>>>=0)+n;for(n=e;t[n]&&!(n>=r);)++n;if(16<n-e&&t.buffer&&L)return L.decode(t.buffer instanceof SharedArrayBuffer?t.slice(e,n):t.subarray(e,n));for(r="";e<n;){var a=t[e++];if(128&a){var i=63&t[e++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|i);else{var o=63&t[e++];65536>(a=224==(240&a)?(15&a)<<12|i<<6|o:(7&a)<<18|i<<12|o<<6|63&t[e++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r}function Y(t,e){return(t>>>=0)?z(r(),t,e):""}function B(t,e,n,r){if(!(0<r))return 0;var a=n>>>=0;r=n+r-1;for(var i=0;i<t.length;++i){var o=t.charCodeAt(i);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++i)),127>=o){if(n>=r)break;e[n++>>>0]=o}else{if(2047>=o){if(n+1>=r)break;e[n++>>>0]=192|o>>6}else{if(65535>=o){if(n+2>=r)break;e[n++>>>0]=224|o>>12}else{if(n+3>=r)break;e[n++>>>0]=240|o>>18,e[n++>>>0]=128|o>>12&63}e[n++>>>0]=128|o>>6&63}e[n++>>>0]=128|63&o}}return e[n>>>0]=0,n-a}function G(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);127>=r?e++:2047>=r?e+=2:55296<=r&&57343>=r?(e+=4,++n):e+=3}return e}function N(t){D=t,u.HEAP8=P=new Int8Array(t),u.HEAP16=new Int16Array(t),u.HEAP32=F=new Int32Array(t),u.HEAPU8=U=new Uint8Array(t),u.HEAPU16=new Uint16Array(t),u.HEAPU32=I=new Uint32Array(t),u.HEAPF32=new Float32Array(t),u.HEAPF64=W=new Float64Array(t)}O&&(D=u.buffer);var V=u.INITIAL_MEMORY||16777216;if(O)j=u.wasmMemory,D=u.buffer;else if(u.wasmMemory)j=u.wasmMemory;else if(!((j=new WebAssembly.Memory({initial:V/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw x("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),_&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");j&&(D=j.buffer),V=D.byteLength,N(D);var $,q=[],X=[],J=[],Z=[];function Q(){return R||!1}function K(){var t=u.preRun.shift();q.unshift(t)}var tt,et=0,nt=null,rt=null;function at(t){throw O?postMessage({cmd:"onAbort",arg:t}):u.onAbort&&u.onAbort(t),x(t="Aborted("+t+")"),H=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),s(t),t}function it(){return tt.startsWith("data:application/octet-stream;base64,")}function ot(){var t=tt;try{if(t==tt&&M)return new Uint8Array(M);if(p)return p(t);throw"both async and sync fetching of the wasm failed"}catch(t){at(t)}}tt="ort-wasm-threaded.wasm",it()||(tt=S(tt));var ut={};function ct(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function st(t){(t=ht.Vb[t])||at(),ht.mc(t)}function lt(t){var e=ht.Cc();if(!e)return 6;ht.ac.push(e),ht.Vb[t.Ub]=e,e.Ub=t.Ub;var n={cmd:"run",start_routine:t.Ic,arg:t.zc,pthread_ptr:t.Ub};return e.$b=()=>{n.time=performance.now(),e.postMessage(n,t.Nc)},e.loaded&&(e.$b(),delete e.$b),0}function ft(t){if(O)return $t(1,1,t);Q()||(ht.oc(),u.onExit&&u.onExit(t),H=!0),g(t,new ct(t))}function pt(t,e){if(!e&&O)throw bt(t),"unwind";Q()||O||(me(),dt(J),be(0),re[1].length&&ae(1,10),re[2].length&&ae(2,10),ht.oc()),ft(t)}var ht={Yb:[],ac:[],qc:[],Vb:{},fc:function(){O&&ht.Ec()},Pc:function(){},Ec:function(){ht.receiveObjectTransfer=ht.Gc,ht.threadInitTLS=ht.pc,ht.setExitStatus=ht.nc,R=!1},nc:function(){},oc:function(){for(var t of Object.values(ht.Vb))ht.mc(t);for(t of ht.Yb)t.terminate();ht.Yb=[]},mc:function(t){var e=t.Ub;delete ht.Vb[e],ht.Yb.push(t),ht.ac.splice(ht.ac.indexOf(t),1),t.Ub=0,Oe(e)},Gc:function(){},pc:function(){ht.qc.forEach((t=>t()))},Fc:function(t,e){t.onmessage=n=>{var r=(n=n.data).cmd;if(t.Ub&&(ht.Bc=t.Ub),n.targetThread&&n.targetThread!=he()){var a=ht.Vb[n.Qc];a?a.postMessage(n,n.transferList):x(\'Internal error! Worker sent a message "\'+r+\'" to target pthread \'+n.targetThread+", but that thread no longer exists!")}else"processProxyingQueue"===r?zt(n.queue):"spawnThread"===r?lt(n):"cleanupThread"===r?st(n.thread):"killThread"===r?(n=n.thread,r=ht.Vb[n],delete ht.Vb[n],r.terminate(),Oe(n),ht.ac.splice(ht.ac.indexOf(r),1),r.Ub=0):"cancelThread"===r?ht.Vb[n.thread].postMessage({cmd:"cancel"}):"loaded"===r?(t.loaded=!0,e&&e(t),t.$b&&(t.$b(),delete t.$b)):"print"===r?C("Thread "+n.threadId+": "+n.text):"printErr"===r?x("Thread "+n.threadId+": "+n.text):"alert"===r?alert("Thread "+n.threadId+": "+n.text):"setimmediate"===n.target?t.postMessage(n):"onAbort"===r?u.onAbort&&u.onAbort(n.arg):r&&x("worker sent an unknown command "+r);ht.Bc=void 0},t.onerror=t=>{throw x("worker sent an error! "+t.filename+":"+t.lineno+": "+t.message),t},_&&(t.on("message",(function(e){t.onmessage({data:e})})),t.on("error",(function(e){t.onerror(e)})),t.on("detachedExit",(function(){}))),t.postMessage({cmd:"load",urlOrBlob:u.mainScriptUrlOrBlob||_scriptDir,wasmMemory:j,wasmModule:k})},yc:function(){var t=S("ort-wasm-threaded.worker.js");ht.Yb.push(new Worker(t))},Cc:function(){return 0==ht.Yb.length&&(ht.yc(),ht.Fc(ht.Yb[0])),ht.Yb.pop()}};function dt(t){for(;0<t.length;)t.shift()(u)}function yt(t){var e=Ee();return t=t(),Me(e),t}function bt(t){if(O)return $t(2,0,t);try{pt(t)}catch(t){t instanceof ct||"unwind"==t||g(1,t)}}u.PThread=ht,u.establishStackSpace=function(){var t=he(),e=a()[t+44>>2>>>0];t=a()[t+48>>2>>>0],Te(e,e-t),Me(e)};var mt=[];function gt(t){var e=mt[t];return e||(t>=mt.length&&(mt.length=t+1),mt[t]=e=$.get(t)),e}u.invokeEntryPoint=function(t,e){t=gt(t)(e),Q()?ht.nc(t):Ae(t)};var vt,wt,_t=[],Ot=0,At=0;function St(t){this.Zb=t,this.Sb=t-24,this.xc=function(t){i()[this.Sb+4>>2>>>0]=t},this.bc=function(){return i()[this.Sb+4>>2>>>0]},this.wc=function(t){i()[this.Sb+8>>2>>>0]=t},this.Dc=function(){return i()[this.Sb+8>>2>>>0]},this.rc=function(){a()[this.Sb>>2>>>0]=0},this.hc=function(t){t=t?1:0,e()[this.Sb+12>>0>>>0]=t},this.uc=function(){return 0!=e()[this.Sb+12>>0>>>0]},this.ic=function(t){t=t?1:0,e()[this.Sb+13>>0>>>0]=t},this.kc=function(){return 0!=e()[this.Sb+13>>0>>>0]},this.fc=function(t,e){this.cc(0),this.xc(t),this.wc(e),this.rc(),this.hc(!1),this.ic(!1)},this.sc=function(){Atomics.add(a(),this.Sb>>2,1)},this.Hc=function(){return 1===Atomics.sub(a(),this.Sb>>2,1)},this.cc=function(t){i()[this.Sb+16>>2>>>0]=t},this.tc=function(){return i()[this.Sb+16>>2>>>0]},this.vc=function(){if(Re(this.bc()))return i()[this.Zb>>2>>>0];var t=this.tc();return 0!==t?t:this.Zb}}function Tt(t){return ye(new St(t).Sb)}function Et(t,e,n,r){return O?$t(3,1,t,e,n,r):Mt(t,e,n,r)}function Mt(t,e,n,r){if("undefined"==typeof SharedArrayBuffer)return x("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var a=[];return O&&0===a.length?Et(t,e,n,r):(t={Ic:n,Ub:t,zc:r,Nc:a},O?(t.Oc="spawnThread",postMessage(t,a),0):lt(t))}function Ct(t,e,n){return O?$t(4,1,t,e,n):0}function xt(t,e){if(O)return $t(5,1,t,e)}function Rt(t,e){if(O)return $t(6,1,t,e)}function jt(t,e,n){if(O)return $t(7,1,t,e,n)}function kt(t,e,n){return O?$t(8,1,t,e,n):0}function Dt(t,e){if(O)return $t(9,1,t,e)}function Pt(t,e,n){if(O)return $t(10,1,t,e,n)}function Ut(t,e,n,r){if(O)return $t(11,1,t,e,n,r)}function Ft(t,e,n,r){if(O)return $t(12,1,t,e,n,r)}function It(t,e,n,r){if(O)return $t(13,1,t,e,n,r)}function Wt(t){if(O)return $t(14,1,t)}function Ht(t,e){if(O)return $t(15,1,t,e)}function Lt(t,e,n){if(O)return $t(16,1,t,e,n)}function zt(t){Atomics.store(a(),t>>2,1),he()&&_e(t),Atomics.compareExchange(a(),t>>2,1,0)}function Yt(t){return i()[t>>>2]+4294967296*a()[t+4>>>2]}function Bt(t,e,n,r,a,i){return O?$t(17,1,t,e,n,r,a,i):-52}function Gt(t,e,n,r,a,i){if(O)return $t(18,1,t,e,n,r,a,i)}function Nt(t){var n=G(t)+1,r=de(n);return r&&B(t,e(),r,n),r}function Vt(t,e,n){function r(t){return(t=t.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?t[1]:"GMT"}if(O)return $t(19,1,t,e,n);var o=(new Date).getFullYear(),u=new Date(o,0,1),c=new Date(o,6,1);o=u.getTimezoneOffset();var s=c.getTimezoneOffset(),l=Math.max(o,s);a()[t>>2>>>0]=60*l,a()[e>>2>>>0]=Number(o!=s),t=r(u),e=r(c),t=Nt(t),e=Nt(e),s<o?(i()[n>>2>>>0]=t,i()[n+4>>2>>>0]=e):(i()[n>>2>>>0]=e,i()[n+4>>2>>>0]=t)}function $t(t,e){var n=arguments.length-2,r=arguments;return yt((()=>{for(var a=Ce(8*n),i=a>>3,u=0;u<n;u++){var c=r[2+u];o()[i+u>>>0]=c}return we(t,n,a,e)}))}u.executeNotifiedProxyingQueue=zt,wt=_?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:O?()=>performance.now()-u.__performance_now_clock_drift:()=>performance.now();var qt,Xt=[],Jt={};function Zt(){if(!qt){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:m||"./this.program"};for(t in Jt)void 0===Jt[t]?delete e[t]:e[t]=Jt[t];var n=[];for(t in e)n.push(t+"="+e[t]);qt=n}return qt}function Qt(t,n){if(O)return $t(20,1,t,n);var r=0;return Zt().forEach((function(a,o){var u=n+r;for(o=i()[t+4*o>>2>>>0]=u,u=0;u<a.length;++u)e()[o++>>0>>>0]=a.charCodeAt(u);e()[o>>0>>>0]=0,r+=a.length+1})),0}function Kt(t,e){if(O)return $t(21,1,t,e);var n=Zt();i()[t>>2>>>0]=n.length;var r=0;return n.forEach((function(t){r+=t.length+1})),i()[e>>2>>>0]=r,0}function te(t){return O?$t(22,1,t):52}function ee(t,e,n,r){return O?$t(23,1,t,e,n,r):52}function ne(t,e,n,r,a){return O?$t(24,1,t,e,n,r,a):70}var re=[null,[],[]];function ae(t,e){var n=re[t];0===e||10===e?((1===t?C:x)(z(n,0)),n.length=0):n.push(e)}function ie(t,e,n,a){if(O)return $t(25,1,t,e,n,a);for(var o=0,u=0;u<n;u++){var c=i()[e>>2>>>0],s=i()[e+4>>2>>>0];e+=8;for(var l=0;l<s;l++)ae(t,r()[c+l>>>0]);o+=s}return i()[a>>2>>>0]=o,0}var oe=0;function ue(t){return 0==t%4&&(0!=t%100||0==t%400)}var ce=[31,29,31,30,31,30,31,31,30,31,30,31],se=[31,28,31,30,31,30,31,31,30,31,30,31];function le(t,n,r,i){function o(t,e,n){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=n[0]+t;return t}function u(t,e){return o(t,e,"0")}function c(t,e){function n(t){return 0>t?-1:0<t?1:0}var r;return 0===(r=n(t.getFullYear()-e.getFullYear()))&&0===(r=n(t.getMonth()-e.getMonth()))&&(r=n(t.getDate()-e.getDate())),r}function s(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function l(t){var e=t.Wb;for(t=new Date(new Date(t.Xb+1900,0,1).getTime());0<e;){var n=t.getMonth(),r=(ue(t.getFullYear())?ce:se)[n];if(!(e>r-t.getDate())){t.setDate(t.getDate()+e);break}e-=r-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return n=new Date(t.getFullYear()+1,0,4),e=s(new Date(t.getFullYear(),0,4)),n=s(n),0>=c(e,t)?0>=c(n,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var f=a()[i+40>>2>>>0];for(var p in i={Lc:a()[i>>2>>>0],Kc:a()[i+4>>2>>>0],dc:a()[i+8>>2>>>0],jc:a()[i+12>>2>>>0],ec:a()[i+16>>2>>>0],Xb:a()[i+20>>2>>>0],Tb:a()[i+24>>2>>>0],Wb:a()[i+28>>2>>>0],Rc:a()[i+32>>2>>>0],Jc:a()[i+36>>2>>>0],Mc:f?Y(f):""},r=Y(r),f={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})r=r.replace(new RegExp(p,"g"),f[p]);var h="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),d="January February March April May June July August September October November December".split(" ");for(p in f={"%a":function(t){return h[t.Tb].substring(0,3)},"%A":function(t){return h[t.Tb]},"%b":function(t){return d[t.ec].substring(0,3)},"%B":function(t){return d[t.ec]},"%C":function(t){return u((t.Xb+1900)/100|0,2)},"%d":function(t){return u(t.jc,2)},"%e":function(t){return o(t.jc,2," ")},"%g":function(t){return l(t).toString().substring(2)},"%G":function(t){return l(t)},"%H":function(t){return u(t.dc,2)},"%I":function(t){return 0==(t=t.dc)?t=12:12<t&&(t-=12),u(t,2)},"%j":function(t){for(var e=0,n=0;n<=t.ec-1;e+=(ue(t.Xb+1900)?ce:se)[n++]);return u(t.jc+e,3)},"%m":function(t){return u(t.ec+1,2)},"%M":function(t){return u(t.Kc,2)},"%n":function(){return"\\n"},"%p":function(t){return 0<=t.dc&&12>t.dc?"AM":"PM"},"%S":function(t){return u(t.Lc,2)},"%t":function(){return"\\t"},"%u":function(t){return t.Tb||7},"%U":function(t){return u(Math.floor((t.Wb+7-t.Tb)/7),2)},"%V":function(t){var e=Math.floor((t.Wb+7-(t.Tb+6)%7)/7);if(2>=(t.Tb+371-t.Wb-2)%7&&e++,e)53==e&&(4==(n=(t.Tb+371-t.Wb)%7)||3==n&&ue(t.Xb)||(e=1));else{e=52;var n=(t.Tb+7-t.Wb-1)%7;(4==n||5==n&&ue(t.Xb%400-1))&&e++}return u(e,2)},"%w":function(t){return t.Tb},"%W":function(t){return u(Math.floor((t.Wb+7-(t.Tb+6)%7)/7),2)},"%y":function(t){return(t.Xb+1900).toString().substring(2)},"%Y":function(t){return t.Xb+1900},"%z":function(t){var e=0<=(t=t.Jc);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":function(t){return t.Mc},"%%":function(){return"%"}},r=r.replace(/%%/g,"\\0\\0"),f)r.includes(p)&&(r=r.replace(new RegExp(p,"g"),f[p](i)));return p=function(t){var e=Array(G(t)+1);return B(t,e,0,e.length),e}(r=r.replace(/\\0\\0/g,"%")),p.length>n?0:(function(t,n){e().set(t,n>>>0)}(p,t),p.length-1)}ht.fc();var fe=[null,ft,bt,Et,Ct,xt,Rt,jt,kt,Dt,Pt,Ut,Ft,It,Wt,Ht,Lt,Bt,Gt,Vt,Qt,Kt,te,ee,ne,ie],pe={b:function(t){return de(t+24)+24},n:function(t){return(t=new St(t)).uc()||(t.hc(!0),Ot--),t.ic(!1),_t.push(t),t.sc(),t.vc()},ma:function(t){throw x("Unexpected exception thrown, this is not properly supported - aborting"),H=!0,t},x:function(){Se(0);var t=_t.pop();if(t.Hc()&&!t.kc()){var e=t.Dc();e&&gt(e)(t.Zb),Tt(t.Zb)}At=0},e:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},l:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},h:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},t:Tt,M:function(){var t=_t.pop();t||at("no exception to throw");var e=t.Zb;throw t.kc()||(_t.push(t),t.ic(!0),t.hc(!1),Ot++),At=e,e},c:function(t,e,n){throw new St(t).fc(e,n),At=t,Ot++,t},pa:function(){return Ot},Fa:function(t){ge(t,!w,1,!v),ht.pc()},T:function(t){O?postMessage({cmd:"cleanupThread",thread:t}):st(t)},xa:Mt,j:function(t){throw At||(At=t),t},H:Ct,Ma:xt,ua:Rt,wa:jt,oa:kt,Ka:Dt,Ca:Pt,Ja:Ut,V:Ft,va:It,sa:Wt,La:Ht,ta:Lt,Ta:function(){},X:function(){at("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ua:function(){at("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},W:function(){return Date.now()},ya:function(){return 2097152},Oa:function(){return!0},za:function(t,e,n,r){if(t==e)setTimeout((()=>zt(r)));else if(O)postMessage({targetThread:t,cmd:"processProxyingQueue",queue:r});else{if(!(t=ht.Vb[t]))return;t.postMessage({cmd:"processProxyingQueue",queue:r})}return 1},Ea:function(){return-1},Pa:function(t,e){t=new Date(1e3*Yt(t)),a()[e>>2>>>0]=t.getUTCSeconds(),a()[e+4>>2>>>0]=t.getUTCMinutes(),a()[e+8>>2>>>0]=t.getUTCHours(),a()[e+12>>2>>>0]=t.getUTCDate(),a()[e+16>>2>>>0]=t.getUTCMonth(),a()[e+20>>2>>>0]=t.getUTCFullYear()-1900,a()[e+24>>2>>>0]=t.getUTCDay(),t=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,a()[e+28>>2>>>0]=t},Qa:function(t,e){t=new Date(1e3*Yt(t)),a()[e>>2>>>0]=t.getSeconds(),a()[e+4>>2>>>0]=t.getMinutes(),a()[e+8>>2>>>0]=t.getHours(),a()[e+12>>2>>>0]=t.getDate(),a()[e+16>>2>>>0]=t.getMonth(),a()[e+20>>2>>>0]=t.getFullYear()-1900,a()[e+24>>2>>>0]=t.getDay();var n=new Date(t.getFullYear(),0,1),r=(t.getTime()-n.getTime())/864e5|0;a()[e+28>>2>>>0]=r,a()[e+36>>2>>>0]=-60*t.getTimezoneOffset(),r=new Date(t.getFullYear(),6,1).getTimezoneOffset(),t=0|(r!=(n=n.getTimezoneOffset())&&t.getTimezoneOffset()==Math.min(n,r)),a()[e+32>>2>>>0]=t},Ra:function(t){var e=new Date(a()[t+20>>2>>>0]+1900,a()[t+16>>2>>>0],a()[t+12>>2>>>0],a()[t+8>>2>>>0],a()[t+4>>2>>>0],a()[t>>2>>>0],0),n=a()[t+32>>2>>>0],r=e.getTimezoneOffset(),i=new Date(e.getFullYear(),0,1),o=new Date(e.getFullYear(),6,1).getTimezoneOffset(),u=i.getTimezoneOffset(),c=Math.min(u,o);return 0>n?a()[t+32>>2>>>0]=Number(o!=u&&c==r):0<n!=(c==r)&&(o=Math.max(u,o),e.setTime(e.getTime()+6e4*((0<n?c:o)-r))),a()[t+24>>2>>>0]=e.getDay(),n=(e.getTime()-i.getTime())/864e5|0,a()[t+28>>2>>>0]=n,a()[t>>2>>>0]=e.getSeconds(),a()[t+4>>2>>>0]=e.getMinutes(),a()[t+8>>2>>>0]=e.getHours(),a()[t+12>>2>>>0]=e.getDate(),a()[t+16>>2>>>0]=e.getMonth(),e.getTime()/1e3|0},Aa:Bt,Ba:Gt,Sa:function t(e,n,r){t.Ac||(t.Ac=!0,Vt(e,n,r))},y:function(){at("")},U:function(){if(!_&&!w){var t="Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread";vt||(vt={}),vt[t]||(vt[t]=1,_&&(t="warning: "+t),x(t))}},ra:function(){return 4294901760},B:wt,Ia:function(t,e,n){r().copyWithin(t>>>0,e>>>0,e+n>>>0)},F:function(){return _?n(993).cpus().length:navigator.hardwareConcurrency},Da:function(t,e,n){Xt.length=e,n>>=3;for(var r=0;r<e;r++)Xt[r]=o()[n+r>>>0];return(0>t?ut[-t-1]:fe[t]).apply(null,Xt)},qa:function(t){var e=r().length;if((t>>>=0)<=e||4294901760<t)return!1;for(var n=1;4>=n;n*=2){var a=e*(1+.2/n);a=Math.min(a,t+100663296);var i=Math;a=Math.max(t,a),i=i.min.call(i,4294901760,a+(65536-a%65536)%65536);t:{try{j.grow(i-D.byteLength+65535>>>16),N(j.buffer);var o=1;break t}catch(t){}o=void 0}if(o)return!0}return!1},Na:function(){throw"unwind"},Ga:Qt,Ha:Kt,J:pt,I:te,S:ee,ga:ne,R:ie,d:function(){return oe},na:function t(r,a){t.lc||(t.lc=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);return()=>(crypto.getRandomValues(t),t[0])}if(_)try{var e=n(Object(function(){var t=new Error("Cannot find module \'crypto\'");throw t.code="MODULE_NOT_FOUND",t}()));return()=>e.randomBytes(1)[0]}catch(t){}return()=>at("randomDevice")}());for(var i=0;i<a;i++)e()[r+i>>0>>>0]=t.lc();return 0},ia:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},ja:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},K:function(t){var e=Ee();try{return gt(t)()}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},f:function(t,e){var n=Ee();try{return gt(t)(e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},P:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},Q:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},k:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},p:function(t,e,n,r){var a=Ee();try{return gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},q:function(t,e,n,r,a){var i=Ee();try{return gt(t)(e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},N:function(t,e,n,r,a,i){var o=Ee();try{return gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},s:function(t,e,n,r,a,i){var o=Ee();try{return gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},w:function(t,e,n,r,a,i,o){var u=Ee();try{return gt(t)(e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},L:function(t,e,n,r,a,i,o,u){var c=Ee();try{return gt(t)(e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},E:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=Ee();try{return gt(t)(e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(Me(p),t!==t+0)throw t;Se(1,0)}},aa:function(t,e,n,r,a,i,o,u){var c=Ee();try{return He(t,e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},_:function(t,e,n,r,a,i,o){var u=Ee();try{return ke(t,e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},Z:function(t,e,n,r,a){var i=Ee();try{return Le(t,e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},ca:function(t,e,n,r){var a=Ee();try{return Ie(t,e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},$:function(t){var e=Ee();try{return je(t)}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},ba:function(t,e){var n=Ee();try{return We(t,e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},Y:function(t,e,n){var r=Ee();try{return De(t,e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},g:function(t){var e=Ee();try{gt(t)()}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},r:function(t,e){var n=Ee();try{gt(t)(e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},i:function(t,e,n){var r=Ee();try{gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},ha:function(t,e,n,r){var a=Ee();try{gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},m:function(t,e,n,r){var a=Ee();try{gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},v:function(t,e,n,r,a){var i=Ee();try{gt(t)(e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},u:function(t,e,n,r,a,i){var o=Ee();try{gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},O:function(t,e,n,r,a,i,o){var u=Ee();try{gt(t)(e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},A:function(t,e,n,r,a,i,o,u){var c=Ee();try{gt(t)(e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},ka:function(t,e,n,r,a,i,o,u,c){var s=Ee();try{gt(t)(e,n,r,a,i,o,u,c)}catch(t){if(Me(s),t!==t+0)throw t;Se(1,0)}},C:function(t,e,n,r,a,i,o,u,c,s,l){var f=Ee();try{gt(t)(e,n,r,a,i,o,u,c,s,l)}catch(t){if(Me(f),t!==t+0)throw t;Se(1,0)}},D:function(t,e,n,r,a,i,o,u,c,s,l,f,p,h,d,y){var b=Ee();try{gt(t)(e,n,r,a,i,o,u,c,s,l,f,p,h,d,y)}catch(t){if(Me(b),t!==t+0)throw t;Se(1,0)}},fa:function(t,e,n,r,a,i,o,u){var c=Ee();try{Pe(t,e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},da:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=Ee();try{Fe(t,e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(Me(p),t!==t+0)throw t;Se(1,0)}},ea:function(t,e,n,r,a,i){var o=Ee();try{Ue(t,e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},o:function(t){return t},a:j||u.wasmMemory,G:function(t){oe=t},la:le,z:function(t,e,n,r){return le(t,e,n,r)}};!function(){function t(t,e){u.asm=t.exports,ht.qc.push(u.asm.sb),$=u.asm.ub,X.unshift(u.asm.Va),k=e,O||(et--,u.monitorRunDependencies&&u.monitorRunDependencies(et),0==et&&(null!==nt&&(clearInterval(nt),nt=null),rt&&(t=rt,rt=null,t())))}function e(e){t(e.instance,e.module)}function n(t){return function(){if(!M&&(v||w)){if("function"==typeof fetch&&!tt.startsWith("file://"))return fetch(tt,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at \'"+tt+"\'";return t.arrayBuffer()})).catch((function(){return ot()}));if(f)return new Promise((function(t,e){f(tt,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return ot()}))}().then((function(t){return WebAssembly.instantiate(t,r)})).then((function(t){return t})).then(t,(function(t){x("failed to asynchronously prepare wasm: "+t),at(t)}))}var r={a:pe};if(O||(et++,u.monitorRunDependencies&&u.monitorRunDependencies(et)),u.instantiateWasm)try{return u.instantiateWasm(r,t)}catch(t){return x("Module.instantiateWasm callback failed with error: "+t),!1}(M||"function"!=typeof WebAssembly.instantiateStreaming||it()||tt.startsWith("file://")||_||"function"!=typeof fetch?n(e):fetch(tt,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,r).then(e,(function(t){return x("wasm streaming compile failed: "+t),x("falling back to ArrayBuffer instantiation"),n(e)}))}))).catch(s)}(),u.___wasm_call_ctors=function(){return(u.___wasm_call_ctors=u.asm.Va).apply(null,arguments)},u._OrtInit=function(){return(u._OrtInit=u.asm.Wa).apply(null,arguments)},u._OrtCreateSessionOptions=function(){return(u._OrtCreateSessionOptions=u.asm.Xa).apply(null,arguments)},u._OrtAppendExecutionProvider=function(){return(u._OrtAppendExecutionProvider=u.asm.Ya).apply(null,arguments)},u._OrtAddSessionConfigEntry=function(){return(u._OrtAddSessionConfigEntry=u.asm.Za).apply(null,arguments)},u._OrtReleaseSessionOptions=function(){return(u._OrtReleaseSessionOptions=u.asm._a).apply(null,arguments)},u._OrtCreateSession=function(){return(u._OrtCreateSession=u.asm.$a).apply(null,arguments)},u._OrtReleaseSession=function(){return(u._OrtReleaseSession=u.asm.ab).apply(null,arguments)},u._OrtGetInputCount=function(){return(u._OrtGetInputCount=u.asm.bb).apply(null,arguments)},u._OrtGetOutputCount=function(){return(u._OrtGetOutputCount=u.asm.cb).apply(null,arguments)},u._OrtGetInputName=function(){return(u._OrtGetInputName=u.asm.db).apply(null,arguments)},u._OrtGetOutputName=function(){return(u._OrtGetOutputName=u.asm.eb).apply(null,arguments)},u._OrtFree=function(){return(u._OrtFree=u.asm.fb).apply(null,arguments)},u._OrtCreateTensor=function(){return(u._OrtCreateTensor=u.asm.gb).apply(null,arguments)},u._OrtGetTensorData=function(){return(u._OrtGetTensorData=u.asm.hb).apply(null,arguments)},u._OrtReleaseTensor=function(){return(u._OrtReleaseTensor=u.asm.ib).apply(null,arguments)},u._OrtCreateRunOptions=function(){return(u._OrtCreateRunOptions=u.asm.jb).apply(null,arguments)},u._OrtAddRunConfigEntry=function(){return(u._OrtAddRunConfigEntry=u.asm.kb).apply(null,arguments)},u._OrtReleaseRunOptions=function(){return(u._OrtReleaseRunOptions=u.asm.lb).apply(null,arguments)},u._OrtRun=function(){return(u._OrtRun=u.asm.mb).apply(null,arguments)},u._OrtEndProfiling=function(){return(u._OrtEndProfiling=u.asm.nb).apply(null,arguments)};var he=u._pthread_self=function(){return(he=u._pthread_self=u.asm.ob).apply(null,arguments)},de=u._malloc=function(){return(de=u._malloc=u.asm.pb).apply(null,arguments)},ye=u._free=function(){return(ye=u._free=u.asm.qb).apply(null,arguments)},be=u._fflush=function(){return(be=u._fflush=u.asm.rb).apply(null,arguments)};u.__emscripten_tls_init=function(){return(u.__emscripten_tls_init=u.asm.sb).apply(null,arguments)};var me=u.___funcs_on_exit=function(){return(me=u.___funcs_on_exit=u.asm.tb).apply(null,arguments)},ge=u.__emscripten_thread_init=function(){return(ge=u.__emscripten_thread_init=u.asm.vb).apply(null,arguments)};u.__emscripten_thread_crashed=function(){return(u.__emscripten_thread_crashed=u.asm.wb).apply(null,arguments)};var ve,we=u._emscripten_run_in_main_runtime_thread_js=function(){return(we=u._emscripten_run_in_main_runtime_thread_js=u.asm.xb).apply(null,arguments)},_e=u.__emscripten_proxy_execute_task_queue=function(){return(_e=u.__emscripten_proxy_execute_task_queue=u.asm.yb).apply(null,arguments)},Oe=u.__emscripten_thread_free_data=function(){return(Oe=u.__emscripten_thread_free_data=u.asm.zb).apply(null,arguments)},Ae=u.__emscripten_thread_exit=function(){return(Ae=u.__emscripten_thread_exit=u.asm.Ab).apply(null,arguments)},Se=u._setThrew=function(){return(Se=u._setThrew=u.asm.Bb).apply(null,arguments)},Te=u._emscripten_stack_set_limits=function(){return(Te=u._emscripten_stack_set_limits=u.asm.Cb).apply(null,arguments)},Ee=u.stackSave=function(){return(Ee=u.stackSave=u.asm.Db).apply(null,arguments)},Me=u.stackRestore=function(){return(Me=u.stackRestore=u.asm.Eb).apply(null,arguments)},Ce=u.stackAlloc=function(){return(Ce=u.stackAlloc=u.asm.Fb).apply(null,arguments)},xe=u.___cxa_can_catch=function(){return(xe=u.___cxa_can_catch=u.asm.Gb).apply(null,arguments)},Re=u.___cxa_is_pointer_type=function(){return(Re=u.___cxa_is_pointer_type=u.asm.Hb).apply(null,arguments)},je=u.dynCall_j=function(){return(je=u.dynCall_j=u.asm.Ib).apply(null,arguments)},ke=u.dynCall_iiiiij=function(){return(ke=u.dynCall_iiiiij=u.asm.Jb).apply(null,arguments)},De=u.dynCall_jii=function(){return(De=u.dynCall_jii=u.asm.Kb).apply(null,arguments)},Pe=u.dynCall_viiiiij=function(){return(Pe=u.dynCall_viiiiij=u.asm.Lb).apply(null,arguments)},Ue=u.dynCall_vjji=function(){return(Ue=u.dynCall_vjji=u.asm.Mb).apply(null,arguments)},Fe=u.dynCall_viiijjjii=function(){return(Fe=u.dynCall_viiijjjii=u.asm.Nb).apply(null,arguments)},Ie=u.dynCall_iij=function(){return(Ie=u.dynCall_iij=u.asm.Ob).apply(null,arguments)},We=u.dynCall_ji=function(){return(We=u.dynCall_ji=u.asm.Pb).apply(null,arguments)},He=u.dynCall_iiiiiij=function(){return(He=u.dynCall_iiiiiij=u.asm.Qb).apply(null,arguments)},Le=u.dynCall_iiij=function(){return(Le=u.dynCall_iiij=u.asm.Rb).apply(null,arguments)};function ze(){function t(){if(!ve&&(ve=!0,u.calledRun=!0,!H)&&(O||dt(X),c(u),u.onRuntimeInitialized&&u.onRuntimeInitialized(),!O)){if(u.postRun)for("function"==typeof u.postRun&&(u.postRun=[u.postRun]);u.postRun.length;){var t=u.postRun.shift();Z.unshift(t)}dt(Z)}}if(!(0<et))if(O)c(u),O||dt(X),postMessage({cmd:"loaded"});else{if(u.preRun)for("function"==typeof u.preRun&&(u.preRun=[u.preRun]);u.preRun.length;)K();dt(q),0<et||(u.setStatus?(u.setStatus("Running..."),setTimeout((function(){setTimeout((function(){u.setStatus("")}),1),t()}),1)):t())}}if(u.UTF8ToString=Y,u.stringToUTF8=function(t,e,n){return B(t,r(),e,n)},u.lengthBytesUTF8=G,u.keepRuntimeAlive=Q,u.wasmMemory=j,u.stackSave=Ee,u.stackRestore=Me,u.stackAlloc=Ce,u.ExitStatus=ct,u.PThread=ht,rt=function t(){ve||ze(),ve||(rt=t)},u.preInit)for("function"==typeof u.preInit&&(u.preInit=[u.preInit]);0<u.preInit.length;)u.preInit.pop()();return ze(),t.ready});t.exports=r},932:(t,e,n)=>{var _scriptDir,r=(_scriptDir=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(t){var e,r,a;t=t||{},e||(e=void 0!==t?t:{}),e.ready=new Promise((function(t,e){r=t,a=e}));var i,o,u,c,s,l,f=Object.assign({},e),p="./this.program",h=(t,e)=>{throw e},d="object"==typeof window,y="function"==typeof importScripts,b="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,m="";b?(m=y?n(908).dirname(m)+"/":"//",l=()=>{s||(c=n(384),s=n(908))},i=function(t,e){return l(),t=s.normalize(t),c.readFileSync(t,e?void 0:"utf8")},u=t=>((t=i(t,!0)).buffer||(t=new Uint8Array(t)),t),o=(t,e,n)=>{l(),t=s.normalize(t),c.readFile(t,(function(t,r){t?n(t):e(r.buffer)}))},1<process.argv.length&&(p=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(t){if(!(t instanceof J))throw t})),process.on("unhandledRejection",(function(t){throw t})),h=(t,e)=>{if(_||0<L)throw process.exitCode=t,e;e instanceof J||w("exiting due to exception: "+e),process.exit(t)},e.inspect=function(){return"[Emscripten Module object]"}):(d||y)&&(y?m=self.location.href:"undefined"!=typeof document&&document.currentScript&&(m=document.currentScript.src),_scriptDir&&(m=_scriptDir),m=0!==m.indexOf("blob:")?m.substr(0,m.replace(/[?#].*/,"").lastIndexOf("/")+1):"",i=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},y&&(u=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),o=(t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?e(r.response):n()},r.onerror=n,r.send(null)});var g,v=e.print||console.log.bind(console),w=e.printErr||console.warn.bind(console);Object.assign(e,f),f=null,e.thisProgram&&(p=e.thisProgram),e.quit&&(h=e.quit),e.wasmBinary&&(g=e.wasmBinary);var _=e.noExitRuntime||!1;"object"!=typeof WebAssembly&&V("no native wasm support detected");var O,A,S,T,E,M,C=!1,x="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function R(t,e,n){var r=(e>>>=0)+n;for(n=e;t[n]&&!(n>=r);)++n;if(16<n-e&&t.buffer&&x)return x.decode(t.subarray(e,n));for(r="";e<n;){var a=t[e++];if(128&a){var i=63&t[e++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|i);else{var o=63&t[e++];65536>(a=224==(240&a)?(15&a)<<12|i<<6|o:(7&a)<<18|i<<12|o<<6|63&t[e++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r}function j(t,e){return(t>>>=0)?R(T,t,e):""}function k(t,e,n,r){if(!(0<r))return 0;var a=n>>>=0;r=n+r-1;for(var i=0;i<t.length;++i){var o=t.charCodeAt(i);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++i)),127>=o){if(n>=r)break;e[n++>>>0]=o}else{if(2047>=o){if(n+1>=r)break;e[n++>>>0]=192|o>>6}else{if(65535>=o){if(n+2>=r)break;e[n++>>>0]=224|o>>12}else{if(n+3>=r)break;e[n++>>>0]=240|o>>18,e[n++>>>0]=128|o>>12&63}e[n++>>>0]=128|o>>6&63}e[n++>>>0]=128|63&o}}return e[n>>>0]=0,n-a}function D(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);127>=r?e++:2047>=r?e+=2:55296<=r&&57343>=r?(e+=4,++n):e+=3}return e}function P(){var t=O.buffer;A=t,e.HEAP8=S=new Int8Array(t),e.HEAP16=new Int16Array(t),e.HEAP32=E=new Int32Array(t),e.HEAPU8=T=new Uint8Array(t),e.HEAPU16=new Uint16Array(t),e.HEAPU32=M=new Uint32Array(t),e.HEAPF32=new Float32Array(t),e.HEAPF64=new Float64Array(t)}var U,F=[],I=[],W=[],H=[],L=0;function z(){var t=e.preRun.shift();F.unshift(t)}var Y,B=0,G=null,N=null;function V(t){throw e.onAbort&&e.onAbort(t),w(t="Aborted("+t+")"),C=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),a(t),t}function $(){return Y.startsWith("data:application/octet-stream;base64,")}if(Y="ort-wasm.wasm",!$()){var q=Y;Y=e.locateFile?e.locateFile(q,m):m+q}function X(){var t=Y;try{if(t==Y&&g)return new Uint8Array(g);if(u)return u(t);throw"both async and sync fetching of the wasm failed"}catch(t){V(t)}}function J(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function Z(t){for(;0<t.length;)t.shift()(e)}var Q=[],K=0,tt=0;function et(t){this.Db=t,this.zb=t-24,this.Ub=function(t){M[this.zb+4>>2>>>0]=t},this.Eb=function(){return M[this.zb+4>>2>>>0]},this.Sb=function(t){M[this.zb+8>>2>>>0]=t},this.Wb=function(){return M[this.zb+8>>2>>>0]},this.Tb=function(){E[this.zb>>2>>>0]=0},this.Ib=function(t){S[this.zb+12>>0>>>0]=t?1:0},this.Pb=function(){return 0!=S[this.zb+12>>0>>>0]},this.Jb=function(t){S[this.zb+13>>0>>>0]=t?1:0},this.Lb=function(){return 0!=S[this.zb+13>>0>>>0]},this.Rb=function(t,e){this.Fb(0),this.Ub(t),this.Sb(e),this.Tb(),this.Ib(!1),this.Jb(!1)},this.Nb=function(){E[this.zb>>2>>>0]+=1},this.Xb=function(){var t=E[this.zb>>2>>>0];return E[this.zb>>2>>>0]=t-1,1===t},this.Fb=function(t){M[this.zb+16>>2>>>0]=t},this.Ob=function(){return M[this.zb+16>>2>>>0]},this.Qb=function(){if(Mt(this.Eb()))return M[this.Db>>2>>>0];var t=this.Ob();return 0!==t?t:this.Db}}function nt(t){return vt(new et(t).zb)}var rt=[];function at(t){var e=rt[t];return e||(t>=rt.length&&(rt.length=t+1),rt[t]=e=U.get(t)),e}function it(t){var e=D(t)+1,n=gt(e);return n&&k(t,S,n,e),n}var ot={};function ut(){if(!ct){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:p||"./this.program"};for(t in ot)void 0===ot[t]?delete e[t]:e[t]=ot[t];var n=[];for(t in e)n.push(t+"="+e[t]);ct=n}return ct}var ct,st=[null,[],[]];function lt(t,e){var n=st[t];0===e||10===e?((1===t?v:w)(R(n,0)),n.length=0):n.push(e)}var ft=0;function pt(t){return 0==t%4&&(0!=t%100||0==t%400)}var ht=[31,29,31,30,31,30,31,31,30,31,30,31],dt=[31,28,31,30,31,30,31,31,30,31,30,31];function yt(t,e,n,r){function a(t,e,n){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=n[0]+t;return t}function i(t,e){return a(t,e,"0")}function o(t,e){function n(t){return 0>t?-1:0<t?1:0}var r;return 0===(r=n(t.getFullYear()-e.getFullYear()))&&0===(r=n(t.getMonth()-e.getMonth()))&&(r=n(t.getDate()-e.getDate())),r}function u(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function c(t){var e=t.Bb;for(t=new Date(new Date(t.Cb+1900,0,1).getTime());0<e;){var n=t.getMonth(),r=(pt(t.getFullYear())?ht:dt)[n];if(!(e>r-t.getDate())){t.setDate(t.getDate()+e);break}e-=r-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return n=new Date(t.getFullYear()+1,0,4),e=u(new Date(t.getFullYear(),0,4)),n=u(n),0>=o(e,t)?0>=o(n,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var s=E[r+40>>2>>>0];for(var l in r={$b:E[r>>2>>>0],Zb:E[r+4>>2>>>0],Gb:E[r+8>>2>>>0],Kb:E[r+12>>2>>>0],Hb:E[r+16>>2>>>0],Cb:E[r+20>>2>>>0],Ab:E[r+24>>2>>>0],Bb:E[r+28>>2>>>0],bc:E[r+32>>2>>>0],Yb:E[r+36>>2>>>0],ac:s?j(s):""},n=j(n),s={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})n=n.replace(new RegExp(l,"g"),s[l]);var f="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),p="January February March April May June July August September October November December".split(" ");for(l in s={"%a":function(t){return f[t.Ab].substring(0,3)},"%A":function(t){return f[t.Ab]},"%b":function(t){return p[t.Hb].substring(0,3)},"%B":function(t){return p[t.Hb]},"%C":function(t){return i((t.Cb+1900)/100|0,2)},"%d":function(t){return i(t.Kb,2)},"%e":function(t){return a(t.Kb,2," ")},"%g":function(t){return c(t).toString().substring(2)},"%G":function(t){return c(t)},"%H":function(t){return i(t.Gb,2)},"%I":function(t){return 0==(t=t.Gb)?t=12:12<t&&(t-=12),i(t,2)},"%j":function(t){for(var e=0,n=0;n<=t.Hb-1;e+=(pt(t.Cb+1900)?ht:dt)[n++]);return i(t.Kb+e,3)},"%m":function(t){return i(t.Hb+1,2)},"%M":function(t){return i(t.Zb,2)},"%n":function(){return"\\n"},"%p":function(t){return 0<=t.Gb&&12>t.Gb?"AM":"PM"},"%S":function(t){return i(t.$b,2)},"%t":function(){return"\\t"},"%u":function(t){return t.Ab||7},"%U":function(t){return i(Math.floor((t.Bb+7-t.Ab)/7),2)},"%V":function(t){var e=Math.floor((t.Bb+7-(t.Ab+6)%7)/7);if(2>=(t.Ab+371-t.Bb-2)%7&&e++,e)53==e&&(4==(n=(t.Ab+371-t.Bb)%7)||3==n&&pt(t.Cb)||(e=1));else{e=52;var n=(t.Ab+7-t.Bb-1)%7;(4==n||5==n&&pt(t.Cb%400-1))&&e++}return i(e,2)},"%w":function(t){return t.Ab},"%W":function(t){return i(Math.floor((t.Bb+7-(t.Ab+6)%7)/7),2)},"%y":function(t){return(t.Cb+1900).toString().substring(2)},"%Y":function(t){return t.Cb+1900},"%z":function(t){var e=0<=(t=t.Yb);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":function(t){return t.ac},"%%":function(){return"%"}},n=n.replace(/%%/g,"\\0\\0"),s)n.includes(l)&&(n=n.replace(new RegExp(l,"g"),s[l](r)));return l=function(t){var e=Array(D(t)+1);return k(t,e,0,e.length),e}(n=n.replace(/\\0\\0/g,"%")),l.length>e?0:(S.set(l,t>>>0),l.length-1)}var bt={a:function(t){return gt(t+24)+24},m:function(t){return(t=new et(t)).Pb()||(t.Ib(!0),K--),t.Jb(!1),Q.push(t),t.Nb(),t.Qb()},ia:function(t){throw w("Unexpected exception thrown, this is not properly supported - aborting"),C=!0,t},w:function(){Ot(0);var t=Q.pop();if(t.Xb()&&!t.Lb()){var e=t.Wb();e&&at(e)(t.Db),nt(t.Db)}tt=0},d:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},k:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},g:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},s:nt,L:function(){var t=Q.pop();t||V("no exception to throw");var e=t.Db;throw t.Lb()||(Q.push(t),t.Jb(!0),t.Ib(!1),K++),tt=e,e},b:function(t,e,n){throw new et(t).Rb(e,n),tt=t,K++,t},la:function(){return K},i:function(t){throw tt||(tt=t),t},H:function(){return 0},Ba:function(){},pa:function(){},ra:function(){},ka:function(){return 0},za:function(){},ua:function(){},ya:function(){},R:function(){},qa:function(){},na:function(){},Aa:function(){},oa:function(){},Ha:function(){},Ja:function(){V("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ia:function(){V("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},S:function(){return Date.now()},Ca:function(){return!0},Da:function(t,e){t=new Date(1e3*(M[t>>>2]+4294967296*E[t+4>>>2])),E[e>>2>>>0]=t.getUTCSeconds(),E[e+4>>2>>>0]=t.getUTCMinutes(),E[e+8>>2>>>0]=t.getUTCHours(),E[e+12>>2>>>0]=t.getUTCDate(),E[e+16>>2>>>0]=t.getUTCMonth(),E[e+20>>2>>>0]=t.getUTCFullYear()-1900,E[e+24>>2>>>0]=t.getUTCDay(),E[e+28>>2>>>0]=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},Ea:function(t,e){t=new Date(1e3*(M[t>>>2]+4294967296*E[t+4>>>2])),E[e>>2>>>0]=t.getSeconds(),E[e+4>>2>>>0]=t.getMinutes(),E[e+8>>2>>>0]=t.getHours(),E[e+12>>2>>>0]=t.getDate(),E[e+16>>2>>>0]=t.getMonth(),E[e+20>>2>>>0]=t.getFullYear()-1900,E[e+24>>2>>>0]=t.getDay();var n=new Date(t.getFullYear(),0,1);E[e+28>>2>>>0]=(t.getTime()-n.getTime())/864e5|0,E[e+36>>2>>>0]=-60*t.getTimezoneOffset();var r=new Date(t.getFullYear(),6,1).getTimezoneOffset();n=n.getTimezoneOffset(),E[e+32>>2>>>0]=0|(r!=n&&t.getTimezoneOffset()==Math.min(n,r))},Fa:function(t){var e=new Date(E[t+20>>2>>>0]+1900,E[t+16>>2>>>0],E[t+12>>2>>>0],E[t+8>>2>>>0],E[t+4>>2>>>0],E[t>>2>>>0],0),n=E[t+32>>2>>>0],r=e.getTimezoneOffset(),a=new Date(e.getFullYear(),0,1),i=new Date(e.getFullYear(),6,1).getTimezoneOffset(),o=a.getTimezoneOffset(),u=Math.min(o,i);return 0>n?E[t+32>>2>>>0]=Number(i!=o&&u==r):0<n!=(u==r)&&(i=Math.max(o,i),e.setTime(e.getTime()+6e4*((0<n?u:i)-r))),E[t+24>>2>>>0]=e.getDay(),E[t+28>>2>>>0]=(e.getTime()-a.getTime())/864e5|0,E[t>>2>>>0]=e.getSeconds(),E[t+4>>2>>>0]=e.getMinutes(),E[t+8>>2>>>0]=e.getHours(),E[t+12>>2>>>0]=e.getDate(),E[t+16>>2>>>0]=e.getMonth(),e.getTime()/1e3|0},sa:function(){return-52},ta:function(){},Ga:function t(e,n,r){t.Vb||(t.Vb=!0,function(t,e,n){function r(t){return(t=t.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?t[1]:"GMT"}var a=(new Date).getFullYear(),i=new Date(a,0,1),o=new Date(a,6,1);a=i.getTimezoneOffset();var u=o.getTimezoneOffset();E[t>>2>>>0]=60*Math.max(a,u),E[e>>2>>>0]=Number(a!=u),t=r(i),e=r(o),t=it(t),e=it(e),u<a?(M[n>>2>>>0]=t,M[n+4>>2>>>0]=e):(M[n>>2>>>0]=e,M[n+4>>2>>>0]=t)}(e,n,r))},B:function(){V("")},ma:function(){return 4294901760},I:b?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:()=>performance.now(),xa:function(t,e,n){T.copyWithin(t>>>0,e>>>0,e+n>>>0)},G:function(t){var e=T.length;if(4294901760<(t>>>=0))return!1;for(var n=1;4>=n;n*=2){var r=e*(1+.2/n);r=Math.min(r,t+100663296);var a=Math;r=Math.max(t,r),a=a.min.call(a,4294901760,r+(65536-r%65536)%65536);t:{try{O.grow(a-A.byteLength+65535>>>16),P();var i=1;break t}catch(t){}i=void 0}if(i)return!0}return!1},va:function(t,e){var n=0;return ut().forEach((function(r,a){var i=e+n;for(a=M[t+4*a>>2>>>0]=i,i=0;i<r.length;++i)S[a++>>0>>>0]=r.charCodeAt(i);S[a>>0>>>0]=0,n+=r.length+1})),0},wa:function(t,e){var n=ut();M[t>>2>>>0]=n.length;var r=0;return n.forEach((function(t){r+=t.length+1})),M[e>>2>>>0]=r,0},ba:function(t){_||0<L||(_t(),Z(W),wt(0),st[1].length&&lt(1,10),st[2].length&&lt(2,10)),_||0<L||(e.onExit&&e.onExit(t),C=!0),h(t,new J(t))},E:function(){return 52},Q:function(){return 52},ca:function(){return 70},P:function(t,e,n,r){for(var a=0,i=0;i<n;i++){var o=M[e>>2>>>0],u=M[e+4>>2>>>0];e+=8;for(var c=0;c<u;c++)lt(t,T[o+c>>>0]);a+=u}return M[r>>2>>>0]=a,0},c:function(){return ft},ja:function t(e,r){t.Mb||(t.Mb=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);return()=>(crypto.getRandomValues(t),t[0])}if(b)try{var e=n(Object(function(){var t=new Error("Cannot find module \'crypto\'");throw t.code="MODULE_NOT_FOUND",t}()));return()=>e.randomBytes(1)[0]}catch(t){}return()=>V("randomDevice")}());for(var a=0;a<r;a++)S[e+a>>0>>>0]=t.Mb();return 0},ea:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},fa:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},J:function(t){var e=At();try{return at(t)()}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},e:function(t,e){var n=At();try{return at(t)(e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},N:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},O:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},j:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},o:function(t,e,n,r){var a=At();try{return at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},p:function(t,e,n,r,a){var i=At();try{return at(t)(e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},M:function(t,e,n,r,a,i){var o=At();try{return at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},r:function(t,e,n,r,a,i){var o=At();try{return at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},v:function(t,e,n,r,a,i,o){var u=At();try{return at(t)(e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},K:function(t,e,n,r,a,i,o,u){var c=At();try{return at(t)(e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},D:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=At();try{return at(t)(e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(St(p),t!==t+0)throw t;Ot(1,0)}},X:function(t,e,n,r,a,i,o,u){var c=At();try{return Ft(t,e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},V:function(t,e,n,r,a,i,o){var u=At();try{return xt(t,e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},U:function(t,e,n,r,a){var i=At();try{return It(t,e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},Z:function(t,e,n,r){var a=At();try{return Pt(t,e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},W:function(t){var e=At();try{return Ct(t)}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},Y:function(t,e){var n=At();try{return Ut(t,e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},T:function(t,e,n){var r=At();try{return Rt(t,e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},f:function(t){var e=At();try{at(t)()}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},q:function(t,e){var n=At();try{at(t)(e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},h:function(t,e,n){var r=At();try{at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},da:function(t,e,n,r){var a=At();try{at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},l:function(t,e,n,r){var a=At();try{at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},t:function(t,e,n,r,a){var i=At();try{at(t)(e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},u:function(t,e,n,r,a,i){var o=At();try{at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},x:function(t,e,n,r,a,i,o){var u=At();try{at(t)(e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},z:function(t,e,n,r,a,i,o,u){var c=At();try{at(t)(e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},ga:function(t,e,n,r,a,i,o,u,c){var s=At();try{at(t)(e,n,r,a,i,o,u,c)}catch(t){if(St(s),t!==t+0)throw t;Ot(1,0)}},A:function(t,e,n,r,a,i,o,u,c,s,l){var f=At();try{at(t)(e,n,r,a,i,o,u,c,s,l)}catch(t){if(St(f),t!==t+0)throw t;Ot(1,0)}},C:function(t,e,n,r,a,i,o,u,c,s,l,f,p,h,d,y){var b=At();try{at(t)(e,n,r,a,i,o,u,c,s,l,f,p,h,d,y)}catch(t){if(St(b),t!==t+0)throw t;Ot(1,0)}},aa:function(t,e,n,r,a,i,o,u){var c=At();try{jt(t,e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},_:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=At();try{Dt(t,e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(St(p),t!==t+0)throw t;Ot(1,0)}},$:function(t,e,n,r,a,i){var o=At();try{kt(t,e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},n:function(t){return t},F:function(t){ft=t},ha:yt,y:function(t,e,n,r){return yt(t,e,n,r)}};!function(){function t(t){e.asm=t.exports,O=e.asm.Ka,P(),U=e.asm.ib,I.unshift(e.asm.La),B--,e.monitorRunDependencies&&e.monitorRunDependencies(B),0==B&&(null!==G&&(clearInterval(G),G=null),N&&(t=N,N=null,t()))}function n(e){t(e.instance)}function r(t){return function(){if(!g&&(d||y)){if("function"==typeof fetch&&!Y.startsWith("file://"))return fetch(Y,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at \'"+Y+"\'";return t.arrayBuffer()})).catch((function(){return X()}));if(o)return new Promise((function(t,e){o(Y,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return X()}))}().then((function(t){return WebAssembly.instantiate(t,i)})).then((function(t){return t})).then(t,(function(t){w("failed to asynchronously prepare wasm: "+t),V(t)}))}var i={a:bt};if(B++,e.monitorRunDependencies&&e.monitorRunDependencies(B),e.instantiateWasm)try{return e.instantiateWasm(i,t)}catch(t){return w("Module.instantiateWasm callback failed with error: "+t),!1}(g||"function"!=typeof WebAssembly.instantiateStreaming||$()||Y.startsWith("file://")||b||"function"!=typeof fetch?r(n):fetch(Y,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,i).then(n,(function(t){return w("wasm streaming compile failed: "+t),w("falling back to ArrayBuffer instantiation"),r(n)}))}))).catch(a)}(),e.___wasm_call_ctors=function(){return(e.___wasm_call_ctors=e.asm.La).apply(null,arguments)},e._OrtInit=function(){return(e._OrtInit=e.asm.Ma).apply(null,arguments)},e._OrtCreateSessionOptions=function(){return(e._OrtCreateSessionOptions=e.asm.Na).apply(null,arguments)},e._OrtAppendExecutionProvider=function(){return(e._OrtAppendExecutionProvider=e.asm.Oa).apply(null,arguments)},e._OrtAddSessionConfigEntry=function(){return(e._OrtAddSessionConfigEntry=e.asm.Pa).apply(null,arguments)},e._OrtReleaseSessionOptions=function(){return(e._OrtReleaseSessionOptions=e.asm.Qa).apply(null,arguments)},e._OrtCreateSession=function(){return(e._OrtCreateSession=e.asm.Ra).apply(null,arguments)},e._OrtReleaseSession=function(){return(e._OrtReleaseSession=e.asm.Sa).apply(null,arguments)},e._OrtGetInputCount=function(){return(e._OrtGetInputCount=e.asm.Ta).apply(null,arguments)},e._OrtGetOutputCount=function(){return(e._OrtGetOutputCount=e.asm.Ua).apply(null,arguments)},e._OrtGetInputName=function(){return(e._OrtGetInputName=e.asm.Va).apply(null,arguments)},e._OrtGetOutputName=function(){return(e._OrtGetOutputName=e.asm.Wa).apply(null,arguments)},e._OrtFree=function(){return(e._OrtFree=e.asm.Xa).apply(null,arguments)},e._OrtCreateTensor=function(){return(e._OrtCreateTensor=e.asm.Ya).apply(null,arguments)},e._OrtGetTensorData=function(){return(e._OrtGetTensorData=e.asm.Za).apply(null,arguments)},e._OrtReleaseTensor=function(){return(e._OrtReleaseTensor=e.asm._a).apply(null,arguments)},e._OrtCreateRunOptions=function(){return(e._OrtCreateRunOptions=e.asm.$a).apply(null,arguments)},e._OrtAddRunConfigEntry=function(){return(e._OrtAddRunConfigEntry=e.asm.ab).apply(null,arguments)},e._OrtReleaseRunOptions=function(){return(e._OrtReleaseRunOptions=e.asm.bb).apply(null,arguments)},e._OrtRun=function(){return(e._OrtRun=e.asm.cb).apply(null,arguments)},e._OrtEndProfiling=function(){return(e._OrtEndProfiling=e.asm.db).apply(null,arguments)};var mt,gt=e._malloc=function(){return(gt=e._malloc=e.asm.eb).apply(null,arguments)},vt=e._free=function(){return(vt=e._free=e.asm.fb).apply(null,arguments)},wt=e._fflush=function(){return(wt=e._fflush=e.asm.gb).apply(null,arguments)},_t=e.___funcs_on_exit=function(){return(_t=e.___funcs_on_exit=e.asm.hb).apply(null,arguments)},Ot=e._setThrew=function(){return(Ot=e._setThrew=e.asm.jb).apply(null,arguments)},At=e.stackSave=function(){return(At=e.stackSave=e.asm.kb).apply(null,arguments)},St=e.stackRestore=function(){return(St=e.stackRestore=e.asm.lb).apply(null,arguments)},Tt=e.stackAlloc=function(){return(Tt=e.stackAlloc=e.asm.mb).apply(null,arguments)},Et=e.___cxa_can_catch=function(){return(Et=e.___cxa_can_catch=e.asm.nb).apply(null,arguments)},Mt=e.___cxa_is_pointer_type=function(){return(Mt=e.___cxa_is_pointer_type=e.asm.ob).apply(null,arguments)},Ct=e.dynCall_j=function(){return(Ct=e.dynCall_j=e.asm.pb).apply(null,arguments)},xt=e.dynCall_iiiiij=function(){return(xt=e.dynCall_iiiiij=e.asm.qb).apply(null,arguments)},Rt=e.dynCall_jii=function(){return(Rt=e.dynCall_jii=e.asm.rb).apply(null,arguments)},jt=e.dynCall_viiiiij=function(){return(jt=e.dynCall_viiiiij=e.asm.sb).apply(null,arguments)},kt=e.dynCall_vjji=function(){return(kt=e.dynCall_vjji=e.asm.tb).apply(null,arguments)},Dt=e.dynCall_viiijjjii=function(){return(Dt=e.dynCall_viiijjjii=e.asm.ub).apply(null,arguments)},Pt=e.dynCall_iij=function(){return(Pt=e.dynCall_iij=e.asm.vb).apply(null,arguments)},Ut=e.dynCall_ji=function(){return(Ut=e.dynCall_ji=e.asm.wb).apply(null,arguments)},Ft=e.dynCall_iiiiiij=function(){return(Ft=e.dynCall_iiiiiij=e.asm.xb).apply(null,arguments)},It=e.dynCall_iiij=function(){return(It=e.dynCall_iiij=e.asm.yb).apply(null,arguments)};function Wt(){function t(){if(!mt&&(mt=!0,e.calledRun=!0,!C)){if(Z(I),r(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),e.postRun)for("function"==typeof e.postRun&&(e.postRun=[e.postRun]);e.postRun.length;){var t=e.postRun.shift();H.unshift(t)}Z(H)}}if(!(0<B)){if(e.preRun)for("function"==typeof e.preRun&&(e.preRun=[e.preRun]);e.preRun.length;)z();Z(F),0<B||(e.setStatus?(e.setStatus("Running..."),setTimeout((function(){setTimeout((function(){e.setStatus("")}),1),t()}),1)):t())}}if(e.UTF8ToString=j,e.stringToUTF8=function(t,e,n){return k(t,T,e,n)},e.lengthBytesUTF8=D,e.stackSave=At,e.stackRestore=St,e.stackAlloc=Tt,N=function t(){mt||Wt(),mt||(N=t)},e.preInit)for("function"==typeof e.preInit&&(e.preInit=[e.preInit]);0<e.preInit.length;)e.preInit.pop()();return Wt(),t.ready});t.exports=r},967:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.iterateExtraOptions=void 0,e.iterateExtraOptions=(t,n,r,a)=>{if("object"==typeof t&&null!==t){if(r.has(t))throw new Error("Circular reference in options");r.add(t)}Object.entries(t).forEach((([t,i])=>{const o=n?n+t:t;if("object"==typeof i)(0,e.iterateExtraOptions)(i,o+".",r,a);else if("string"==typeof i||"number"==typeof i)a(o,i.toString());else{if("boolean"!=typeof i)throw new Error("Can\'t handle extra config type: "+typeof i);a(o,i?"1":"0")}}))}},586:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setRunOptions=void 0;const r=n(967),a=n(983),i=n(361);e.setRunOptions=t=>{const e=(0,i.getInstance)();let n=0;const o=[],u=t||{};try{if(void 0===(null==t?void 0:t.logSeverityLevel))u.logSeverityLevel=2;else if("number"!=typeof t.logSeverityLevel||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${t.logSeverityLevel}`);if(void 0===(null==t?void 0:t.logVerbosityLevel))u.logVerbosityLevel=0;else if("number"!=typeof t.logVerbosityLevel||!Number.isInteger(t.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${t.logVerbosityLevel}`);void 0===(null==t?void 0:t.terminate)&&(u.terminate=!1);let i=0;if(void 0!==(null==t?void 0:t.tag)&&(i=(0,a.allocWasmString)(t.tag,o)),n=e._OrtCreateRunOptions(u.logSeverityLevel,u.logVerbosityLevel,!!u.terminate,i),0===n)throw new Error("Can\'t create run options");return void 0!==(null==t?void 0:t.extra)&&(0,r.iterateExtraOptions)(t.extra,"",new WeakSet,((t,r)=>{const i=(0,a.allocWasmString)(t,o),u=(0,a.allocWasmString)(r,o);if(0!==e._OrtAddRunConfigEntry(n,i,u))throw new Error(`Can\'t set a run config entry: ${t} - ${r}`)})),[n,o]}catch(t){throw 0!==n&&e._OrtReleaseRunOptions(n),o.forEach(e._free),t}}},919:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setSessionOptions=void 0;const r=n(967),a=n(983),i=n(361);e.setSessionOptions=t=>{const e=(0,i.getInstance)();let n=0;const o=[],u=t||{};(t=>{t.extra||(t.extra={}),t.extra.session||(t.extra.session={});const e=t.extra.session;e.use_ort_model_bytes_directly||(e.use_ort_model_bytes_directly="1")})(u);try{void 0===(null==t?void 0:t.graphOptimizationLevel)&&(u.graphOptimizationLevel="all");const c=(t=>{switch(t){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${t}`)}})(u.graphOptimizationLevel);void 0===(null==t?void 0:t.enableCpuMemArena)&&(u.enableCpuMemArena=!0),void 0===(null==t?void 0:t.enableMemPattern)&&(u.enableMemPattern=!0),void 0===(null==t?void 0:t.executionMode)&&(u.executionMode="sequential");const s=(t=>{switch(t){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${t}`)}})(u.executionMode);let l=0;if(void 0!==(null==t?void 0:t.logId)&&(l=(0,a.allocWasmString)(t.logId,o)),void 0===(null==t?void 0:t.logSeverityLevel))u.logSeverityLevel=2;else if("number"!=typeof t.logSeverityLevel||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${t.logSeverityLevel}`);if(void 0===(null==t?void 0:t.logVerbosityLevel))u.logVerbosityLevel=0;else if("number"!=typeof t.logVerbosityLevel||!Number.isInteger(t.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${t.logVerbosityLevel}`);if(void 0===(null==t?void 0:t.enableProfiling)&&(u.enableProfiling=!1),n=e._OrtCreateSessionOptions(c,!!u.enableCpuMemArena,!!u.enableMemPattern,s,!!u.enableProfiling,0,l,u.logSeverityLevel,u.logVerbosityLevel),0===n)throw new Error("Can\'t create session options");return(null==t?void 0:t.executionProviders)&&((t,e,n)=>{for(const r of e){let e="string"==typeof r?r:r.name;switch(e){case"xnnpack":e="XNNPACK";break;case"wasm":case"cpu":continue;default:throw new Error(`not supported EP: ${e}`)}const o=(0,a.allocWasmString)(e,n);if(0!==(0,i.getInstance)()._OrtAppendExecutionProvider(t,o))throw new Error(`Can\'t append execution provider: ${e}`)}})(n,t.executionProviders,o),void 0!==(null==t?void 0:t.extra)&&(0,r.iterateExtraOptions)(t.extra,"",new WeakSet,((t,r)=>{const i=(0,a.allocWasmString)(t,o),u=(0,a.allocWasmString)(r,o);if(0!==e._OrtAddSessionConfigEntry(n,i,u))throw new Error(`Can\'t set a session config entry: ${t} - ${r}`)})),[n,o]}catch(t){throw 0!==n&&e._OrtReleaseSessionOptions(n),o.forEach(e._free),t}}},983:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.allocWasmString=void 0;const r=n(361);e.allocWasmString=(t,e)=>{const n=(0,r.getInstance)(),a=n.lengthBytesUTF8(t)+1,i=n._malloc(a);return n.stringToUTF8(t,i,a),e.push(i),i}},349:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.extractTransferableBuffers=e.endProfiling=e.run=e.releaseSession=e.createSession=e.createSessionFinalize=e.createSessionAllocate=e.initOrt=void 0;const r=n(586),a=n(919),i=n(983),o=n(361);e.initOrt=(t,e)=>{const n=(0,o.getInstance)()._OrtInit(t,e);if(0!==n)throw new Error(`Can\'t initialize onnxruntime. error code = ${n}`)};const u=new Map;e.createSessionAllocate=t=>{const e=(0,o.getInstance)(),n=e._malloc(t.byteLength);return e.HEAPU8.set(t,n),[n,t.byteLength]},e.createSessionFinalize=(t,e)=>{const n=(0,o.getInstance)();let r=0,i=0,c=[];try{if([i,c]=(0,a.setSessionOptions)(e),r=n._OrtCreateSession(t[0],t[1],i),0===r)throw new Error("Can\'t create a session")}finally{n._free(t[0]),n._OrtReleaseSessionOptions(i),c.forEach(n._free)}const s=n._OrtGetInputCount(r),l=n._OrtGetOutputCount(r),f=[],p=[],h=[],d=[];for(let t=0;t<s;t++){const e=n._OrtGetInputName(r,t);if(0===e)throw new Error("Can\'t get an input name");p.push(e),f.push(n.UTF8ToString(e))}for(let t=0;t<l;t++){const e=n._OrtGetOutputName(r,t);if(0===e)throw new Error("Can\'t get an output name");d.push(e),h.push(n.UTF8ToString(e))}return u.set(r,[r,p,d]),[r,f,h]},e.createSession=(t,n)=>{const r=(0,e.createSessionAllocate)(t);return(0,e.createSessionFinalize)(r,n)},e.releaseSession=t=>{const e=(0,o.getInstance)(),n=u.get(t);if(!n)throw new Error("invalid session id");const r=n[0],a=n[1],i=n[2];a.forEach(e._OrtFree),i.forEach(e._OrtFree),e._OrtReleaseSession(r),u.delete(t)};const c=t=>{switch(t){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${t}`)}},s=t=>{switch(t){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${t}`)}},l=t=>{switch(t){case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${t}`)}};e.run=(t,e,n,a,f)=>{const p=(0,o.getInstance)(),h=u.get(t);if(!h)throw new Error("invalid session id");const d=h[0],y=h[1],b=h[2],m=e.length,g=a.length;let v=0,w=[];const _=[],O=[];try{[v,w]=(0,r.setRunOptions)(f);for(let t=0;t<m;t++){const e=n[t][0],r=n[t][1],a=n[t][2];let o,u;if(Array.isArray(a)){u=4*a.length,o=p._malloc(u),O.push(o);let t=o/4;for(let e=0;e<a.length;e++){if("string"!=typeof a[e])throw new TypeError(`tensor data at index ${e} is not a string`);p.HEAPU32[t++]=(0,i.allocWasmString)(a[e],O)}}else u=a.byteLength,o=p._malloc(u),O.push(o),p.HEAPU8.set(new Uint8Array(a.buffer,a.byteOffset,u),o);const s=p.stackSave(),l=p.stackAlloc(4*r.length);try{let t=l/4;r.forEach((e=>p.HEAP32[t++]=e));const n=p._OrtCreateTensor(c(e),o,u,l,r.length);if(0===n)throw new Error("Can\'t create a tensor");_.push(n)}finally{p.stackRestore(s)}}const t=p.stackSave(),o=p.stackAlloc(4*m),u=p.stackAlloc(4*m),h=p.stackAlloc(4*g),A=p.stackAlloc(4*g);try{let n=o/4,r=u/4,i=h/4,c=A/4;for(let t=0;t<m;t++)p.HEAPU32[n++]=_[t],p.HEAPU32[r++]=y[e[t]];for(let t=0;t<g;t++)p.HEAPU32[i++]=0,p.HEAPU32[c++]=b[a[t]];let f=p._OrtRun(d,u,o,m,A,g,h,v);const w=[];if(0===f)for(let t=0;t<g;t++){const e=p.HEAPU32[h/4+t],n=p.stackSave(),r=p.stackAlloc(16);let a,i=0;try{if(f=p._OrtGetTensorData(e,r,r+4,r+8,r+12),0!==f)throw new Error(`Can\'t access output tensor data. error code = ${f}`);let t=r/4;const o=p.HEAPU32[t++];i=p.HEAPU32[t++];const u=p.HEAPU32[t++],c=p.HEAPU32[t++],h=[];for(let t=0;t<c;t++)h.push(p.HEAPU32[u/4+t]);p._OrtFree(u);const d=0===h.length?1:h.reduce(((t,e)=>t*e));if(a=s(o),"string"===a){const t=[];let e=i/4;for(let n=0;n<d;n++){const r=p.HEAPU32[e++],a=n===d-1?void 0:p.HEAPU32[e]-r;t.push(p.UTF8ToString(r,a))}w.push([a,h,t])}else{const t=new(l(a))(d);new Uint8Array(t.buffer,t.byteOffset,t.byteLength).set(p.HEAPU8.subarray(i,i+t.byteLength)),w.push([a,h,t])}}finally{p.stackRestore(n),"string"===a&&i&&p._free(i),p._OrtReleaseTensor(e)}}if(0===f)return w;throw new Error(`failed to call OrtRun(). error code = ${f}.`)}finally{p.stackRestore(t)}}finally{_.forEach(p._OrtReleaseTensor),O.forEach(p._free),p._OrtReleaseRunOptions(v),w.forEach(p._free)}},e.endProfiling=t=>{const e=(0,o.getInstance)(),n=u.get(t);if(!n)throw new Error("invalid session id");const r=n[0],a=e._OrtEndProfiling(r);if(0===a)throw new Error("Can\'t get an profile file name");e._OrtFree(a)},e.extractTransferableBuffers=t=>{const e=[];for(const n of t){const t=n[2];!Array.isArray(t)&&t.buffer&&e.push(t.buffer)}return e}},361:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(e,n);a&&!("get"in a?!e.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,a)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return a(e,t),e},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.getInstance=e.initializeWebAssembly=void 0;const u=i(n(449)),c=o(n(932)),s=n(474);let l,f=!1,p=!1,h=!1;const d=(t,e)=>e?t?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":t?"ort-wasm-simd.wasm":"ort-wasm.wasm";e.initializeWebAssembly=async t=>{if(f)return Promise.resolve();if(p)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(h)throw new Error("previous call to \'initializeWebAssembly()\' failed.");p=!0;const e=t.initTimeout,r=t.numThreads,a=t.simd,i=r>1&&(()=>{try{return"undefined"!=typeof SharedArrayBuffer&&("undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch(t){return!1}})(),o=a&&(()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch(t){return!1}})(),y="string"==typeof t.wasmPaths?t.wasmPaths:void 0,b=d(!1,i),m=d(o,i),g="object"==typeof t.wasmPaths?t.wasmPaths[m]:void 0;let v=!1;const w=[];if(e>0&&w.push(new Promise((t=>{setTimeout((()=>{v=!0,t()}),e)}))),w.push(new Promise(((t,e)=>{const r=i?s:c.default,a={locateFile:(t,e)=>i&&t.endsWith(".worker.js")&&"undefined"!=typeof Blob?URL.createObjectURL(new Blob([n(154)],{type:"text/javascript"})):t===b?null!=g?g:(null!=y?y:e)+m:e+t};if(i)if("undefined"==typeof Blob)a.mainScriptUrlOrBlob=u.join("/","ort-wasm-threaded.js");else{const t=`var ortWasmThreaded=(function(){var _scriptDir;return ${r.toString()}})();`;a.mainScriptUrlOrBlob=new Blob([t],{type:"text/javascript"})}r(a).then((e=>{p=!1,f=!0,l=e,t()}),(t=>{p=!1,h=!0,e(t)}))}))),await Promise.race(w),v)throw new Error(`WebAssembly backend initializing failed due to timeout: ${e}ms`)},e.getInstance=()=>{if(f&&l)return l;throw new Error("WebAssembly is not initialized yet.")},e.dispose=()=>{var t;!f||p||h||(p=!0,null===(t=l.PThread)||void 0===t||t.terminateAllThreads(),l=void 0,p=!1,f=!1,h=!0)}},154:t=>{"use strict";t.exports=\'"use strict";var e={},t="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(t){var r=require("worker_threads"),a=r.parentPort;a.on("message",(e=>onmessage({data:e})));var o=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:function(e){(0,eval)(o.readFileSync(e,"utf8"))},postMessage:function(e){a.postMessage(e)},performance:global.performance||{now:function(){return Date.now()}}})}var s=!1,n=[],i=function(){var e=Array.prototype.slice.call(arguments).join(" ");t?o.writeSync(2,e+"\\\\n"):console.error(e)};self.alert=function(){var t=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:t,threadId:e._pthread_self()})},e.instantiateWasm=(t,r)=>{var a=new WebAssembly.Instance(e.wasmModule,t);return r(a),e.wasmModule=null,a.exports},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=t=>{try{if("load"===t.data.cmd){if(e.wasmModule=t.data.wasmModule,e.wasmMemory=t.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof t.data.urlOrBlob)importScripts(t.data.urlOrBlob);else{var r=URL.createObjectURL(t.data.urlOrBlob);importScripts(r),URL.revokeObjectURL(r)}ortWasmThreaded(e).then((function(t){e=t}))}else if("run"===t.data.cmd){e.__performance_now_clock_drift=performance.now()-t.data.time,e.__emscripten_thread_init(t.data.pthread_ptr,0,0,1),e.establishStackSpace(),e.PThread.receiveObjectTransfer(t.data),e.PThread.threadInitTLS(),s||(n.forEach((t=>{e.executeNotifiedProxyingQueue(t)})),n=[],s=!0);try{e.invokeEntryPoint(t.data.start_routine,t.data.arg)}catch(t){if("unwind"!=t){if(!(t instanceof e.ExitStatus))throw t;e.keepRuntimeAlive()||e.__emscripten_thread_exit(t.status)}}}else"cancel"===t.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===t.data.target||("processProxyingQueue"===t.data.cmd?s?e.executeNotifiedProxyingQueue(t.data.queue):n.push(t.data.queue):(i("worker.js received unknown command "+t.data.cmd),i(t.data)))}catch(t){throw i("worker.js onmessage() captured an uncaught exception: "+t),t&&t.stack&&i(t.stack),e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),t}};\\n\'},384:()=>{},993:()=>{},908:()=>{},953:()=>{},925:()=>{},449:()=>{}},e={};function n(r){var a=e[r];if(void 0!==a)return a.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{"use strict";const t=n(349),e=n(361);self.onmessage=n=>{switch(n.data.type){case"init-wasm":(0,e.initializeWebAssembly)(n.data.in).then((()=>postMessage({type:"init-wasm"})),(t=>postMessage({type:"init-wasm",err:t})));break;case"init-ort":try{const{numThreads:e,loggingLevel:r}=n.data.in;(0,t.initOrt)(e,r),postMessage({type:"init-ort"})}catch(t){postMessage({type:"init-ort",err:t})}break;case"create_allocate":try{const{model:e}=n.data.in,r=(0,t.createSessionAllocate)(e);postMessage({type:"create_allocate",out:r})}catch(t){postMessage({type:"create_allocate",err:t})}break;case"create_finalize":try{const{modeldata:e,options:r}=n.data.in,a=(0,t.createSessionFinalize)(e,r);postMessage({type:"create_finalize",out:a})}catch(t){postMessage({type:"create_finalize",err:t})}break;case"create":try{const{model:e,options:r}=n.data.in,a=(0,t.createSession)(e,r);postMessage({type:"create",out:a})}catch(t){postMessage({type:"create",err:t})}break;case"release":try{const e=n.data.in;(0,t.releaseSession)(e),postMessage({type:"release"})}catch(t){postMessage({type:"release",err:t})}break;case"run":try{const{sessionId:e,inputIndices:r,inputs:a,outputIndices:i,options:o}=n.data.in,u=(0,t.run)(e,r,a,i,o);postMessage({type:"run",out:u},(0,t.extractTransferableBuffers)(u))}catch(t){postMessage({type:"run",err:t})}break;case"end-profiling":try{const e=n.data.in;(0,t.endProfiling)(e),postMessage({type:"end-profiling"})}catch(t){postMessage({type:"end-profiling",err:t})}}}})()})();\n',"Worker",void 0,void 0)}},477:t=>{t.exports=function(e,n,i,o){var u=self||window;try{try{var d;try{d=new u.Blob([e])}catch{(d=new(u.BlobBuilder||u.WebKitBlobBuilder||u.MozBlobBuilder||u.MSBlobBuilder)).append(e),d=d.getBlob()}var h=u.URL||u.webkitURL,m=h.createObjectURL(d),p=new u[n](m,i);return h.revokeObjectURL(m),p}catch{return new u[n]("data:application/javascript,".concat(encodeURIComponent(e)),i)}}catch{if(!o)throw Error("Inline worker is not supported");return new u[n](o,i)}}},4154:t=>{t.exports=`"use strict";var e={},t="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(t){var r=require("worker_threads"),a=r.parentPort;a.on("message",(e=>onmessage({data:e})));var o=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:function(e){(0,eval)(o.readFileSync(e,"utf8"))},postMessage:function(e){a.postMessage(e)},performance:global.performance||{now:function(){return Date.now()}}})}var s=!1,n=[],i=function(){var e=Array.prototype.slice.call(arguments).join(" ");t?o.writeSync(2,e+"\\n"):console.error(e)};self.alert=function(){var t=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:t,threadId:e._pthread_self()})},e.instantiateWasm=(t,r)=>{var a=new WebAssembly.Instance(e.wasmModule,t);return r(a),e.wasmModule=null,a.exports},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=t=>{try{if("load"===t.data.cmd){if(e.wasmModule=t.data.wasmModule,e.wasmMemory=t.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof t.data.urlOrBlob)importScripts(t.data.urlOrBlob);else{var r=URL.createObjectURL(t.data.urlOrBlob);importScripts(r),URL.revokeObjectURL(r)}ortWasmThreaded(e).then((function(t){e=t}))}else if("run"===t.data.cmd){e.__performance_now_clock_drift=performance.now()-t.data.time,e.__emscripten_thread_init(t.data.pthread_ptr,0,0,1),e.establishStackSpace(),e.PThread.receiveObjectTransfer(t.data),e.PThread.threadInitTLS(),s||(n.forEach((t=>{e.executeNotifiedProxyingQueue(t)})),n=[],s=!0);try{e.invokeEntryPoint(t.data.start_routine,t.data.arg)}catch(t){if("unwind"!=t){if(!(t instanceof e.ExitStatus))throw t;e.keepRuntimeAlive()||e.__emscripten_thread_exit(t.status)}}}else"cancel"===t.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===t.data.target||("processProxyingQueue"===t.data.cmd?s?e.executeNotifiedProxyingQueue(t.data.queue):n.push(t.data.queue):(i("worker.js received unknown command "+t.data.cmd),i(t.data)))}catch(t){throw i("worker.js onmessage() captured an uncaught exception: "+t),t&&t.stack&&i(t.stack),e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),t}};
`},1670:t=>{t.exports=__WEBPACK_EXTERNAL_MODULE__1670__},7067:()=>{},1296:()=>{},1384:()=>{},3993:()=>{},908:()=>{},6953:()=>{},9925:()=>{},2806:()=>{},6449:()=>{},2850:()=>{},5381:()=>{},5686:(t,e,n)=>{n.r(e),n.d(e,{flatbuffers:()=>i});var i={};i.Offset,i.Table,i.SIZEOF_SHORT=2,i.SIZEOF_INT=4,i.FILE_IDENTIFIER_LENGTH=4,i.SIZE_PREFIX_LENGTH=4,i.Encoding={UTF8_BYTES:1,UTF16_STRING:2},i.int32=new Int32Array(2),i.float32=new Float32Array(i.int32.buffer),i.float64=new Float64Array(i.int32.buffer),i.isLittleEndian=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1,i.Long=function(o,u){this.low=0|o,this.high=0|u},i.Long.create=function(o,u){return o==0&&u==0?i.Long.ZERO:new i.Long(o,u)},i.Long.prototype.toFloat64=function(){return(this.low>>>0)+4294967296*this.high},i.Long.prototype.equals=function(o){return this.low==o.low&&this.high==o.high},i.Long.ZERO=new i.Long(0,0),i.Builder=function(o){if(o)u=o;else var u=1024;this.bb=i.ByteBuffer.allocate(u),this.space=u,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},i.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},i.Builder.prototype.forceDefaults=function(o){this.force_defaults=o},i.Builder.prototype.dataBuffer=function(){return this.bb},i.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},i.Builder.prototype.prep=function(o,u){o>this.minalign&&(this.minalign=o);for(var d=1+~(this.bb.capacity()-this.space+u)&o-1;this.space<d+o+u;){var h=this.bb.capacity();this.bb=i.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-h}this.pad(d)},i.Builder.prototype.pad=function(o){for(var u=0;u<o;u++)this.bb.writeInt8(--this.space,0)},i.Builder.prototype.writeInt8=function(o){this.bb.writeInt8(this.space-=1,o)},i.Builder.prototype.writeInt16=function(o){this.bb.writeInt16(this.space-=2,o)},i.Builder.prototype.writeInt32=function(o){this.bb.writeInt32(this.space-=4,o)},i.Builder.prototype.writeInt64=function(o){this.bb.writeInt64(this.space-=8,o)},i.Builder.prototype.writeFloat32=function(o){this.bb.writeFloat32(this.space-=4,o)},i.Builder.prototype.writeFloat64=function(o){this.bb.writeFloat64(this.space-=8,o)},i.Builder.prototype.addInt8=function(o){this.prep(1,0),this.writeInt8(o)},i.Builder.prototype.addInt16=function(o){this.prep(2,0),this.writeInt16(o)},i.Builder.prototype.addInt32=function(o){this.prep(4,0),this.writeInt32(o)},i.Builder.prototype.addInt64=function(o){this.prep(8,0),this.writeInt64(o)},i.Builder.prototype.addFloat32=function(o){this.prep(4,0),this.writeFloat32(o)},i.Builder.prototype.addFloat64=function(o){this.prep(8,0),this.writeFloat64(o)},i.Builder.prototype.addFieldInt8=function(o,u,d){(this.force_defaults||u!=d)&&(this.addInt8(u),this.slot(o))},i.Builder.prototype.addFieldInt16=function(o,u,d){(this.force_defaults||u!=d)&&(this.addInt16(u),this.slot(o))},i.Builder.prototype.addFieldInt32=function(o,u,d){(this.force_defaults||u!=d)&&(this.addInt32(u),this.slot(o))},i.Builder.prototype.addFieldInt64=function(o,u,d){!this.force_defaults&&u.equals(d)||(this.addInt64(u),this.slot(o))},i.Builder.prototype.addFieldFloat32=function(o,u,d){(this.force_defaults||u!=d)&&(this.addFloat32(u),this.slot(o))},i.Builder.prototype.addFieldFloat64=function(o,u,d){(this.force_defaults||u!=d)&&(this.addFloat64(u),this.slot(o))},i.Builder.prototype.addFieldOffset=function(o,u,d){(this.force_defaults||u!=d)&&(this.addOffset(u),this.slot(o))},i.Builder.prototype.addFieldStruct=function(o,u,d){u!=d&&(this.nested(u),this.slot(o))},i.Builder.prototype.nested=function(o){if(o!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},i.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},i.Builder.prototype.slot=function(o){this.vtable[o]=this.offset()},i.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},i.Builder.growByteBuffer=function(o){var u=o.capacity();if(3221225472&u)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var d=u<<1,h=i.ByteBuffer.allocate(d);return h.setPosition(d-u),h.bytes().set(o.bytes(),d-u),h},i.Builder.prototype.addOffset=function(o){this.prep(i.SIZEOF_INT,0),this.writeInt32(this.offset()-o+i.SIZEOF_INT)},i.Builder.prototype.startObject=function(o){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=o;for(var u=0;u<o;u++)this.vtable[u]=0;this.isNested=!0,this.object_start=this.offset()},i.Builder.prototype.endObject=function(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var o=this.offset(),u=this.vtable_in_use-1;u>=0&&this.vtable[u]==0;u--);for(var d=u+1;u>=0;u--)this.addInt16(this.vtable[u]!=0?o-this.vtable[u]:0);this.addInt16(o-this.object_start);var h=(d+2)*i.SIZEOF_SHORT;this.addInt16(h);var m=0,p=this.space;e:for(u=0;u<this.vtables.length;u++){var _=this.bb.capacity()-this.vtables[u];if(h==this.bb.readInt16(_)){for(var f=i.SIZEOF_SHORT;f<h;f+=i.SIZEOF_SHORT)if(this.bb.readInt16(p+f)!=this.bb.readInt16(_+f))continue e;m=this.vtables[u];break}}return m?(this.space=this.bb.capacity()-o,this.bb.writeInt32(this.space,m-o)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-o,this.offset()-o)),this.isNested=!1,o},i.Builder.prototype.finish=function(o,u,d){var h=d?i.SIZE_PREFIX_LENGTH:0;if(u){var m=u;if(this.prep(this.minalign,i.SIZEOF_INT+i.FILE_IDENTIFIER_LENGTH+h),m.length!=i.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+i.FILE_IDENTIFIER_LENGTH);for(var p=i.FILE_IDENTIFIER_LENGTH-1;p>=0;p--)this.writeInt8(m.charCodeAt(p))}this.prep(this.minalign,i.SIZEOF_INT+h),this.addOffset(o),h&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)},i.Builder.prototype.finishSizePrefixed=function(o,u){this.finish(o,u,!0)},i.Builder.prototype.requiredField=function(o,u){var d=this.bb.capacity()-o,h=d-this.bb.readInt32(d);if(this.bb.readInt16(h+u)==0)throw new Error("FlatBuffers: field "+u+" must be set")},i.Builder.prototype.startVector=function(o,u,d){this.notNested(),this.vector_num_elems=u,this.prep(i.SIZEOF_INT,o*u),this.prep(d,o*u)},i.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},i.Builder.prototype.createString=function(o){if(o instanceof Uint8Array)var u=o;else{u=[];for(var d=0;d<o.length;){var h,m=o.charCodeAt(d++);(h=m<55296||m>=56320?m:(m<<10)+o.charCodeAt(d++)+-56613888)<128?u.push(h):(h<2048?u.push(h>>6&31|192):(h<65536?u.push(h>>12&15|224):u.push(h>>18&7|240,h>>12&63|128),u.push(h>>6&63|128)),u.push(63&h|128))}}this.addInt8(0),this.startVector(1,u.length,1),this.bb.setPosition(this.space-=u.length),d=0;for(var p=this.space,_=this.bb.bytes();d<u.length;d++)_[p++]=u[d];return this.endVector()},i.Builder.prototype.createLong=function(o,u){return i.Long.create(o,u)},i.ByteBuffer=function(o){this.bytes_=o,this.position_=0},i.ByteBuffer.allocate=function(o){return new i.ByteBuffer(new Uint8Array(o))},i.ByteBuffer.prototype.clear=function(){this.position_=0},i.ByteBuffer.prototype.bytes=function(){return this.bytes_},i.ByteBuffer.prototype.position=function(){return this.position_},i.ByteBuffer.prototype.setPosition=function(o){this.position_=o},i.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},i.ByteBuffer.prototype.readInt8=function(o){return this.readUint8(o)<<24>>24},i.ByteBuffer.prototype.readUint8=function(o){return this.bytes_[o]},i.ByteBuffer.prototype.readInt16=function(o){return this.readUint16(o)<<16>>16},i.ByteBuffer.prototype.readUint16=function(o){return this.bytes_[o]|this.bytes_[o+1]<<8},i.ByteBuffer.prototype.readInt32=function(o){return this.bytes_[o]|this.bytes_[o+1]<<8|this.bytes_[o+2]<<16|this.bytes_[o+3]<<24},i.ByteBuffer.prototype.readUint32=function(o){return this.readInt32(o)>>>0},i.ByteBuffer.prototype.readInt64=function(o){return new i.Long(this.readInt32(o),this.readInt32(o+4))},i.ByteBuffer.prototype.readUint64=function(o){return new i.Long(this.readUint32(o),this.readUint32(o+4))},i.ByteBuffer.prototype.readFloat32=function(o){return i.int32[0]=this.readInt32(o),i.float32[0]},i.ByteBuffer.prototype.readFloat64=function(o){return i.int32[i.isLittleEndian?0:1]=this.readInt32(o),i.int32[i.isLittleEndian?1:0]=this.readInt32(o+4),i.float64[0]},i.ByteBuffer.prototype.writeInt8=function(o,u){this.bytes_[o]=u},i.ByteBuffer.prototype.writeUint8=function(o,u){this.bytes_[o]=u},i.ByteBuffer.prototype.writeInt16=function(o,u){this.bytes_[o]=u,this.bytes_[o+1]=u>>8},i.ByteBuffer.prototype.writeUint16=function(o,u){this.bytes_[o]=u,this.bytes_[o+1]=u>>8},i.ByteBuffer.prototype.writeInt32=function(o,u){this.bytes_[o]=u,this.bytes_[o+1]=u>>8,this.bytes_[o+2]=u>>16,this.bytes_[o+3]=u>>24},i.ByteBuffer.prototype.writeUint32=function(o,u){this.bytes_[o]=u,this.bytes_[o+1]=u>>8,this.bytes_[o+2]=u>>16,this.bytes_[o+3]=u>>24},i.ByteBuffer.prototype.writeInt64=function(o,u){this.writeInt32(o,u.low),this.writeInt32(o+4,u.high)},i.ByteBuffer.prototype.writeUint64=function(o,u){this.writeUint32(o,u.low),this.writeUint32(o+4,u.high)},i.ByteBuffer.prototype.writeFloat32=function(o,u){i.float32[0]=u,this.writeInt32(o,i.int32[0])},i.ByteBuffer.prototype.writeFloat64=function(o,u){i.float64[0]=u,this.writeInt32(o,i.int32[i.isLittleEndian?0:1]),this.writeInt32(o+4,i.int32[i.isLittleEndian?1:0])},i.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+i.SIZEOF_INT+i.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var o="",u=0;u<i.FILE_IDENTIFIER_LENGTH;u++)o+=String.fromCharCode(this.readInt8(this.position_+i.SIZEOF_INT+u));return o},i.ByteBuffer.prototype.__offset=function(o,u){var d=o-this.readInt32(o);return u<this.readInt16(d)?this.readInt16(d+u):0},i.ByteBuffer.prototype.__union=function(o,u){return o.bb_pos=u+this.readInt32(u),o.bb=this,o},i.ByteBuffer.prototype.__string=function(o,u){o+=this.readInt32(o);var d=this.readInt32(o),h="",m=0;if(o+=i.SIZEOF_INT,u===i.Encoding.UTF8_BYTES)return this.bytes_.subarray(o,o+d);for(;m<d;){var p,_=this.readUint8(o+m++);if(_<192)p=_;else{var f=this.readUint8(o+m++);if(_<224)p=(31&_)<<6|63&f;else{var l=this.readUint8(o+m++);p=_<240?(15&_)<<12|(63&f)<<6|63&l:(7&_)<<18|(63&f)<<12|(63&l)<<6|63&this.readUint8(o+m++)}}p<65536?h+=String.fromCharCode(p):(p-=65536,h+=String.fromCharCode(55296+(p>>10),56320+(1023&p)))}return h},i.ByteBuffer.prototype.__indirect=function(o){return o+this.readInt32(o)},i.ByteBuffer.prototype.__vector=function(o){return o+this.readInt32(o)+i.SIZEOF_INT},i.ByteBuffer.prototype.__vector_len=function(o){return this.readInt32(o+this.readInt32(o))},i.ByteBuffer.prototype.__has_identifier=function(o){if(o.length!=i.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+i.FILE_IDENTIFIER_LENGTH);for(var u=0;u<i.FILE_IDENTIFIER_LENGTH;u++)if(o.charCodeAt(u)!=this.readInt8(this.position_+i.SIZEOF_INT+u))return!1;return!0},i.ByteBuffer.prototype.createLong=function(o,u){return i.Long.create(o,u)}}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(e!==void 0)return e.exports;var n=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return __webpack_require__.d(e,{a:e}),e},__webpack_require__.d=(t,e)=>{for(var n in e)__webpack_require__.o(e,n)&&!__webpack_require__.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},__webpack_require__.g=(function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}})(),__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),__webpack_require__.r=t=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__(6018);return __webpack_exports__})()))})(ortWeb_min$1)),ortWeb_min$1.exports}var ortWeb_minExports=requireOrtWeb_min();const ortWeb_min=getDefaultExportFromCjs(ortWeb_minExports),ONNX_WEB=_mergeNamespaces({__proto__:null,default:ortWeb_min},[ortWeb_minExports]);let ONNX;const executionProviders=["wasm"];typeof process<"u"&&process?.release?.name==="node"?(ONNX=sharp??ONNX_NODE,executionProviders.unshift("cpu")):(ONNX=ortWeb_min??ONNX_WEB,typeof navigator<"u"&&/iP(hone|od|ad).+16_4.+AppleWebKit/.test(navigator.userAgent)&&(ONNX.env.wasm.simd=!1));const{env:onnx_env}=ONNX,VERSION="2.17.2",WEB_CACHE_AVAILABLE=typeof self<"u"&&"caches"in self,FS_AVAILABLE=!isEmpty(sharp),PATH_AVAILABLE=!isEmpty(sharp),RUNNING_LOCALLY=FS_AVAILABLE&&PATH_AVAILABLE,__dirname$1=RUNNING_LOCALLY?sharp.dirname(sharp.dirname(sharp.fileURLToPath(import.meta.url))):"./",DEFAULT_CACHE_DIR=RUNNING_LOCALLY?sharp.join(__dirname$1,"/.cache/"):null,DEFAULT_LOCAL_MODEL_PATH="/models/",localModelPath=RUNNING_LOCALLY?sharp.join(__dirname$1,DEFAULT_LOCAL_MODEL_PATH):DEFAULT_LOCAL_MODEL_PATH;onnx_env?.wasm&&(onnx_env.wasm.wasmPaths=RUNNING_LOCALLY?sharp.join(__dirname$1,"/dist/"):`https://cdn.jsdelivr.net/npm/@xenova/transformers@${VERSION}/dist/`);const env$1={backends:{onnx:onnx_env,tfjs:{}},__dirname:__dirname$1,version:VERSION,allowRemoteModels:!0,remoteHost:"https://huggingface.co/",remotePathTemplate:"{model}/resolve/{revision}/",allowLocalModels:!0,localModelPath,useFS:FS_AVAILABLE,useBrowserCache:WEB_CACHE_AVAILABLE,useFSCache:FS_AVAILABLE,cacheDir:DEFAULT_CACHE_DIR,useCustomCache:!1,customCache:null};function isEmpty(t){return Object.keys(t).length===0}var define_process_env_default={};class FileResponse{_CONTENT_TYPE_MAP={txt:"text/plain",html:"text/html",css:"text/css",js:"text/javascript",json:"application/json",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif"};constructor(e){if(this.filePath=e,this.headers=new Headers,this.exists=sharp.existsSync(e),this.exists){this.status=200,this.statusText="OK";let n=sharp.statSync(e);this.headers.set("content-length",n.size.toString()),this.updateContentType();let i=this;this.body=new ReadableStream({start(o){i.arrayBuffer().then(u=>{o.enqueue(new Uint8Array(u)),o.close()})}})}else this.status=404,this.statusText="Not Found",this.body=null}updateContentType(){const e=this.filePath.toString().split(".").pop().toLowerCase();this.headers.set("content-type",this._CONTENT_TYPE_MAP[e]??"application/octet-stream")}clone(){let e=new FileResponse(this.filePath);return e.exists=this.exists,e.status=this.status,e.statusText=this.statusText,e.headers=new Headers(this.headers),e}async arrayBuffer(){return(await sharp.promises.readFile(this.filePath)).buffer}async blob(){const e=await sharp.promises.readFile(this.filePath);return new Blob([e],{type:this.headers.get("content-type")})}async text(){return await sharp.promises.readFile(this.filePath,"utf8")}async json(){return JSON.parse(await this.text())}}function isValidUrl(t,e=null,n=null){let i;try{i=new URL(t)}catch{return!1}return!(e&&!e.includes(i.protocol)||n&&!n.includes(i.hostname))}async function getFile(t){if(env$1.useFS&&!isValidUrl(t,["http:","https:","blob:"]))return new FileResponse(t);if(typeof process<"u"&&process?.release?.name==="node"){const e=!!define_process_env_default?.TESTING_REMOTELY,n=env$1.version,i=new Headers;if(i.set("User-Agent",`transformers.js/${n}; is_ci/${e};`),isValidUrl(t,["http:","https:"],["huggingface.co","hf.co"])){const u=define_process_env_default?.HF_TOKEN??define_process_env_default?.HF_ACCESS_TOKEN;u&&i.set("Authorization",`Bearer ${u}`)}return fetch(t,{headers:i})}else return fetch(t)}const ERROR_MAPPING={400:"Bad request error occurred while trying to load file",401:"Unauthorized access to file",403:"Forbidden access to file",404:"Could not locate file",408:"Request timeout error occurred while trying to load file",500:"Internal server error error occurred while trying to load file",502:"Bad gateway error occurred while trying to load file",503:"Service unavailable error occurred while trying to load file",504:"Gateway timeout error occurred while trying to load file"};function handleError(t,e,n){if(!n)return null;const i=ERROR_MAPPING[t]??`Error (${t}) occurred while trying to load file`;throw Error(`${i}: "${e}".`)}class FileCache{constructor(e){this.path=e}async match(e){let n=sharp.join(this.path,e),i=new FileResponse(n);if(i.exists)return i}async put(e,n){const i=Buffer.from(await n.arrayBuffer());let o=sharp.join(this.path,e);try{await sharp.promises.mkdir(sharp.dirname(o),{recursive:!0}),await sharp.promises.writeFile(o,i)}catch(u){console.warn("An error occurred while writing the file to cache:",u)}}}async function tryCache(t,...e){for(let n of e)try{let i=await t.match(n);if(i)return i}catch{continue}}async function getModelFile(t,e,n=!0,i={}){if(!env$1.allowLocalModels&&i.local_files_only)throw Error("Invalid configuration detected: local models are disabled (`env.allowLocalModels=false`) but you have requested to only use local models (`local_files_only=true`).");dispatchCallback(i.progress_callback,{status:"initiate",name:t,file:e});let o;if(!o&&env$1.useBrowserCache){if(typeof caches>"u")throw Error("Browser cache is not available in this environment.");try{o=await caches.open("transformers-cache")}catch(E){console.warn("An error occurred while opening the browser cache:",E)}}!o&&env$1.useFSCache&&(o=new FileCache(i.cache_dir??env$1.cacheDir));const u=i.revision??"main";let d=pathJoin(t,e),h=pathJoin(env$1.localModelPath,d),m=pathJoin(env$1.remoteHost,env$1.remotePathTemplate.replaceAll("{model}",t).replaceAll("{revision}",encodeURIComponent(u)),e),p=u==="main"?d:pathJoin(t,u,e),_,f=o instanceof FileCache?p:m,l=!1,g;o&&(g=await tryCache(o,h,f));const v=g!==void 0;if(g===void 0){if(env$1.allowLocalModels)if(isValidUrl(d,["http:","https:"])){if(i.local_files_only)throw new Error(`\`local_files_only=true\`, but attempted to load a remote file from: ${d}.`)}else try{g=await getFile(h),_=h}catch(O){console.warn(`Unable to load from local path "${h}": "${O}"`)}if(g===void 0||g.status===404){if(i.local_files_only){if(n)throw Error(`\`local_files_only=true\` or \`env.allowRemoteModels=false\` and file was not found locally at "${h}".`);return null}if(g=await getFile(m),g.status!==200)return handleError(g.status,m,n);_=f}l=o&&typeof Response<"u"&&g instanceof Response&&g.status===200}dispatchCallback(i.progress_callback,{status:"download",name:t,file:e});const S={status:"progress",name:t,file:e};let T;return i.progress_callback?v&&typeof navigator<"u"&&/firefox/i.test(navigator.userAgent)?(T=new Uint8Array(await g.arrayBuffer()),dispatchCallback(i.progress_callback,{...S,progress:100,loaded:T.length,total:T.length})):T=await readResponse(g,E=>{dispatchCallback(i.progress_callback,{...S,...E})}):T=new Uint8Array(await g.arrayBuffer()),l&&_&&await o.match(_)===void 0&&await o.put(_,new Response(T,{headers:g.headers})).catch(E=>{console.warn(`Unable to add response to browser cache: ${E}.`)}),dispatchCallback(i.progress_callback,{status:"done",name:t,file:e}),T}async function getModelJSON(t,e,n=!0,i={}){let o=await getModelFile(t,e,n,i);if(o===null)return{};let d=new TextDecoder("utf-8").decode(o);return JSON.parse(d)}async function readResponse(t,e){const n=t.headers.get("Content-Length");n===null&&console.warn("Unable to determine content-length from response headers. Will expand buffer when needed.");let i=parseInt(n??"0"),o=new Uint8Array(i),u=0;const d=t.body.getReader();async function h(){const{done:m,value:p}=await d.read();if(m)return;let _=u+p.length;if(_>i){i=_;let l=new Uint8Array(i);l.set(o),o=l}o.set(p,u),u=_;const f=u/i*100;return e({progress:f,loaded:u,total:i}),h()}return await h(),o}function pathJoin(...t){return t=t.map((e,n)=>(n&&(e=e.replace(new RegExp("^/"),"")),n!==t.length-1&&(e=e.replace(new RegExp("/$"),"")),e)),t.join("/")}function interpolate_data(t,[e,n,i],[o,u],d="bilinear",h=!1){const m=u/i,p=o/n,_=new t.constructor(o*u*e),f=n*i,l=o*u;for(let g=0;g<o;++g)for(let v=0;v<u;++v){const S=g*u+v,T=(v+.5)/m-.5,E=(g+.5)/p-.5;let O=Math.floor(T),R=Math.floor(E);const M=Math.min(O+1,i-1),C=Math.min(R+1,n-1);O=Math.max(O,0),R=Math.max(R,0);const j=T-O,$=E-R,L=(1-j)*(1-$),N=j*(1-$),B=(1-j)*$,U=j*$,H=R*i,Y=C*i,K=H+O,z=H+M,V=Y+O,G=Y+M;for(let ie=0;ie<e;++ie){const Z=ie*f;_[ie*l+S]=L*t[Z+K]+N*t[Z+z]+B*t[Z+V]+U*t[Z+G]}}return _}function permute_data(t,e,n){const i=new Array(n.length),o=new Array(n.length);for(let h=n.length-1,m=1;h>=0;--h)o[h]=m,i[h]=e[n[h]],m*=i[h];const u=n.map((h,m)=>o[n.indexOf(m)]),d=new t.constructor(t.length);for(let h=0;h<t.length;++h){let m=0;for(let p=e.length-1,_=h;p>=0;--p)m+=_%e[p]*u[p],_=Math.floor(_/e[p]);d[m]=t[h]}return[d,i]}function softmax(t){const e=max(t)[0],n=t.map(u=>Math.exp(u-e)),i=n.reduce((u,d)=>u+d,0);return n.map(u=>u/i)}function log_softmax(t){return softmax(t).map(i=>Math.log(i))}function getTopItems(t,e=0){return t=Array.from(t).map((n,i)=>[i,n]).sort((n,i)=>i[1]-n[1]),e!==null&&e>0&&(t=t.slice(0,e)),t}function min(t){if(t.length===0)throw Error("Array must not be empty");let e=t[0],n=0;for(let i=1;i<t.length;++i)t[i]<e&&(e=t[i],n=i);return[e,n]}function max(t){if(t.length===0)throw Error("Array must not be empty");let e=t[0],n=0;for(let i=1;i<t.length;++i)t[i]>e&&(e=t[i],n=i);return[Number(e),n]}function isPowerOfTwo(t){return t>0&&(t&t-1)===0}class P2FFT{constructor(e){if(this.size=e|0,this.size<=1||!isPowerOfTwo(this.size))throw new Error("FFT size must be a power of two larger than 1");this._csize=e<<1,this.table=new Float64Array(this.size*2);for(let i=0;i<this.table.length;i+=2){const o=Math.PI*i/this.size;this.table[i]=Math.cos(o),this.table[i+1]=-Math.sin(o)}let n=0;for(let i=1;this.size>i;i<<=1)++n;this._width=n%2===0?n-1:n,this._bitrev=new Int32Array(1<<this._width);for(let i=0;i<this._bitrev.length;++i){this._bitrev[i]=0;for(let o=0;o<this._width;o+=2){const u=this._width-o-2;this._bitrev[i]|=(i>>>o&3)<<u}}}createComplexArray(){return new Float64Array(this._csize)}fromComplexArray(e,n){const i=n||new Array(e.length>>>1);for(let o=0;o<e.length;o+=2)i[o>>>1]=e[o];return i}toComplexArray(e,n){const i=n||this.createComplexArray();for(let o=0;o<i.length;o+=2)i[o]=e[o>>>1],i[o+1]=0;return i}transform(e,n){if(e===n)throw new Error("Input and output buffers must be different");this._transform4(e,n,1)}realTransform(e,n){if(e===n)throw new Error("Input and output buffers must be different");this._realTransform4(e,n,1)}inverseTransform(e,n){if(e===n)throw new Error("Input and output buffers must be different");this._transform4(e,n,-1);for(let i=0;i<e.length;++i)e[i]/=this.size}_transform4(e,n,i){const o=this._csize;let d=1<<this._width,h=o/d<<1,m,p;const _=this._bitrev;if(h===4)for(m=0,p=0;m<o;m+=h,++p){const l=_[p];this._singleTransform2(n,e,m,l,d)}else for(m=0,p=0;m<o;m+=h,++p){const l=_[p];this._singleTransform4(n,e,m,l,d,i)}const f=this.table;for(d>>=2;d>=2;d>>=2){h=o/d<<1;const l=h>>>2;for(m=0;m<o;m+=h){const g=m+l-1;for(let v=m,S=0;v<g;v+=2,S+=d){const T=v,E=T+l,O=E+l,R=O+l,M=e[T],C=e[T+1],j=e[E],$=e[E+1],L=e[O],N=e[O+1],B=e[R],U=e[R+1],H=f[S],Y=i*f[S+1],K=j*H-$*Y,z=j*Y+$*H,V=f[2*S],G=i*f[2*S+1],ie=L*V-N*G,Z=L*G+N*V,te=f[3*S],ee=i*f[3*S+1],le=B*te-U*ee,ge=B*ee+U*te,Ae=M+ie,Te=C+Z,Ce=M-ie,De=C-Z,Re=K+le,Ee=z+ge,Ie=i*(K-le),Le=i*(z-ge);e[T]=Ae+Re,e[T+1]=Te+Ee,e[E]=Ce+Le,e[E+1]=De-Ie,e[O]=Ae-Re,e[O+1]=Te-Ee,e[R]=Ce-Le,e[R+1]=De+Ie}}}}_singleTransform2(e,n,i,o,u){const d=e[o],h=e[o+1],m=e[o+u],p=e[o+u+1];n[i]=d+m,n[i+1]=h+p,n[i+2]=d-m,n[i+3]=h-p}_singleTransform4(e,n,i,o,u,d){const h=u*2,m=u*3,p=e[o],_=e[o+1],f=e[o+u],l=e[o+u+1],g=e[o+h],v=e[o+h+1],S=e[o+m],T=e[o+m+1],E=p+g,O=_+v,R=p-g,M=_-v,C=f+S,j=l+T,$=d*(f-S),L=d*(l-T);n[i]=E+C,n[i+1]=O+j,n[i+2]=R+L,n[i+3]=M-$,n[i+4]=E-C,n[i+5]=O-j,n[i+6]=R-L,n[i+7]=M+$}_realTransform4(e,n,i){const o=this._csize;let d=1<<this._width,h=o/d<<1,m,p;const _=this._bitrev;if(h===4)for(m=0,p=0;m<o;m+=h,++p){const g=_[p];this._singleRealTransform2(n,e,m,g>>>1,d>>>1)}else for(m=0,p=0;m<o;m+=h,++p){const g=_[p];this._singleRealTransform4(n,e,m,g>>>1,d>>>1,i)}const f=this.table;for(d>>=2;d>=2;d>>=2){h=o/d<<1;const g=h>>>1,v=g>>>1,S=v>>>1;for(m=0;m<o;m+=h)for(let T=0,E=0;T<=S;T+=2,E+=d){const O=m+T,R=O+v,M=R+v,C=M+v,j=e[O],$=e[O+1],L=e[R],N=e[R+1],B=e[M],U=e[M+1],H=e[C],Y=e[C+1],K=j,z=$,V=f[E],G=i*f[E+1],ie=L*V-N*G,Z=L*G+N*V,te=f[2*E],ee=i*f[2*E+1],le=B*te-U*ee,ge=B*ee+U*te,Ae=f[3*E],Te=i*f[3*E+1],Ce=H*Ae-Y*Te,De=H*Te+Y*Ae,Re=K+le,Ee=z+ge,Ie=K-le,Le=z-ge,Se=ie+Ce,Ye=Z+De,Fe=i*(ie-Ce),at=i*(Z-De);if(e[O]=Re+Se,e[O+1]=Ee+Ye,e[R]=Ie+at,e[R+1]=Le-Fe,T===0){e[M]=Re-Se,e[M+1]=Ee-Ye;continue}if(T===S)continue;const lt=m+v-T,dt=m+g-T;e[lt]=Ie-i*at,e[lt+1]=-Le-i*Fe,e[dt]=Re-i*Se,e[dt+1]=-Ee+i*Ye}}const l=o>>>1;for(let g=2;g<l;g+=2)e[o-g]=e[g],e[o-g+1]=-e[g+1]}_singleRealTransform2(e,n,i,o,u){const d=e[o],h=e[o+u];n[i]=d+h,n[i+1]=0,n[i+2]=d-h,n[i+3]=0}_singleRealTransform4(e,n,i,o,u,d){const h=u*2,m=u*3,p=e[o],_=e[o+u],f=e[o+h],l=e[o+m],g=p+f,v=p-f,S=_+l,T=d*(_-l);n[i]=g+S,n[i+1]=0,n[i+2]=v,n[i+3]=-T,n[i+4]=g-S,n[i+5]=0,n[i+6]=v,n[i+7]=T}}class NP2FFT{constructor(e){const n=2*(e-1),i=2*(2*e-1),o=2**Math.ceil(Math.log2(i));this.bufferSize=o,this._a=n;const u=new Float64Array(i),d=new Float64Array(o);this._chirpBuffer=new Float64Array(o),this._buffer1=new Float64Array(o),this._buffer2=new Float64Array(o),this._outBuffer1=new Float64Array(o),this._outBuffer2=new Float64Array(o);const h=-2*Math.PI/e,m=Math.cos(h),p=Math.sin(h);for(let _=0;_<i>>1;++_){const f=(_+1-e)**2/2,l=Math.sqrt(m**2+p**2)**f,g=f*Math.atan2(p,m),v=2*_;u[v]=l*Math.cos(g),u[v+1]=l*Math.sin(g),d[v]=u[v],d[v+1]=-u[v+1]}this._slicedChirpBuffer=u.subarray(n,i),this._f=new P2FFT(o>>1),this._f.transform(this._chirpBuffer,d)}_transform(e,n,i){const o=this._buffer1,u=this._buffer2,d=this._outBuffer1,h=this._outBuffer2,m=this._chirpBuffer,p=this._slicedChirpBuffer,_=this._a;if(i)for(let f=0;f<p.length;f+=2){const l=f+1,g=f>>1,v=n[g];o[f]=v*p[f],o[l]=v*p[l]}else for(let f=0;f<p.length;f+=2){const l=f+1;o[f]=n[f]*p[f]-n[l]*p[l],o[l]=n[f]*p[l]+n[l]*p[f]}this._f.transform(d,o);for(let f=0;f<m.length;f+=2){const l=f+1;u[f]=d[f]*m[f]-d[l]*m[l],u[l]=d[f]*m[l]+d[l]*m[f]}this._f.inverseTransform(h,u);for(let f=0;f<h.length;f+=2){const l=h[f+_],g=h[f+_+1],v=p[f],S=p[f+1];e[f]=l*v-g*S,e[f+1]=l*S+g*v}}transform(e,n){this._transform(e,n,!1)}realTransform(e,n){this._transform(e,n,!0)}}class FFT{constructor(e){this.fft_length=e,this.isPowerOfTwo=isPowerOfTwo(e),this.isPowerOfTwo?(this.fft=new P2FFT(e),this.outputBufferSize=2*e):(this.fft=new NP2FFT(e),this.outputBufferSize=this.fft.bufferSize)}realTransform(e,n){this.fft.realTransform(e,n)}transform(e,n){this.fft.transform(e,n)}}function medianFilter(t,e){if(e%2===0||e<=0)throw new Error("Window size must be a positive odd number");const n=new t.constructor(t.length),i=new t.constructor(e),o=Math.floor(e/2);for(let u=0;u<t.length;++u){let d=0;for(let h=-o;h<=o;++h){let m=u+h;m<0?m=Math.abs(m):m>=t.length&&(m=2*(t.length-1)-m),i[d++]=t[m]}i.sort(),n[u]=i[o]}return n}function round(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}function bankers_round(t){const e=Math.round(t);return Math.abs(t)%1===.5?e%2===0?e:e-1:e}const DataTypeMap=Object.freeze({float32:Float32Array,float64:Float64Array,string:Array,int8:Int8Array,uint8:Uint8Array,int16:Int16Array,uint16:Uint16Array,int32:Int32Array,uint32:Uint32Array,int64:BigInt64Array,uint64:BigUint64Array,bool:Uint8Array}),ONNXTensor$1=ONNX.Tensor;class Tensor{dims;type;data;size;constructor(...e){return e[0]instanceof ONNXTensor$1?Object.assign(this,e[0]):Object.assign(this,new ONNXTensor$1(e[0],e[1],e[2])),new Proxy(this,{get:(n,i)=>{if(typeof i=="string"){let o=Number(i);if(Number.isInteger(o))return n._getitem(o)}return n[i]},set:(n,i,o)=>n[i]=o})}*[Symbol.iterator](){const[e,...n]=this.dims;if(n.length>0){const i=n.reduce((o,u)=>o*u);for(let o=0;o<e;++o)yield this._subarray(o,i,n)}else yield*this.data}_getitem(e){const[n,...i]=this.dims;if(e=safeIndex(e,n),i.length>0){const o=i.reduce((u,d)=>u*d);return this._subarray(e,o,i)}else return new Tensor(this.type,[this.data[e]],i)}indexOf(e){for(let n=0;n<this.data.length;++n)if(this.data[n]==e)return n;return-1}_subarray(e,n,i){const o=e*n,u=(e+1)*n,d="subarray"in this.data?this.data.subarray(o,u):this.data.slice(o,u);return new Tensor(this.type,d,i)}item(){if(this.data.length!==1)throw new Error(`a Tensor with ${this.data.length} elements cannot be converted to Scalar`);return this.data[0]}tolist(){return reshape(this.data,this.dims)}sigmoid(){return this.clone().sigmoid_()}sigmoid_(){for(let e=0;e<this.data.length;++e)this.data[e]=1/(1+Math.exp(-this.data[e]));return this}mul(e){return this.clone().mul_(e)}mul_(e){for(let n=0;n<this.data.length;++n)this.data[n]*=e;return this}add(e){return this.clone().add_(e)}add_(e){for(let n=0;n<this.data.length;++n)this.data[n]+=e;return this}clone(){return new Tensor(this.type,this.data.slice(),this.dims.slice())}slice(...e){let n=[],i=[];for(let m=0;m<this.dims.length;++m){let p=e[m];if(p==null)i.push([0,this.dims[m]]),n.push(this.dims[m]);else if(typeof p=="number")p=safeIndex(p,this.dims[m],m),i.push([p,p+1]);else if(Array.isArray(p)&&p.length===2){if(p[0]>p[1])throw new Error(`Invalid slice: ${p}`);let _=[Math.max(p[0],0),Math.min(p[1],this.dims[m])];i.push(_),n.push(_[1]-_[0])}else throw new Error(`Invalid slice: ${p}`)}let o=i.map(([m,p])=>p-m),u=o.reduce((m,p)=>m*p),d=new this.data.constructor(u);const h=this.stride();for(let m=0;m<u;++m){let p=0;for(let _=o.length-1,f=m;_>=0;--_){const l=o[_];p+=(f%l+i[_][0])*h[_],f=Math.floor(f/l)}d[m]=this.data[p]}return new Tensor(this.type,d,n)}permute(...e){return permute(this,e)}transpose(...e){return this.permute(...e)}sum(e=null,n=!1){return this.norm(1,e,n)}norm(e="fro",n=null,i=!1){if(e==="fro")e=2;else if(typeof e=="string")throw Error(`Unsupported norm: ${e}`);if(n===null){let d=this.data.reduce((h,m)=>h+m**e,0)**(1/e);return new Tensor(this.type,[d],[])}n=safeIndex(n,this.dims.length);const o=this.dims.slice();o[n]=1;const u=new this.data.constructor(this.data.length/this.dims[n]);for(let d=0;d<this.data.length;++d){let h=0;for(let m=this.dims.length-1,p=d,_=1;m>=0;--m){const f=this.dims[m];if(m!==n){const l=p%f;h+=l*_,_*=o[m]}p=Math.floor(p/f)}u[h]+=this.data[d]**e}if(e!==1)for(let d=0;d<u.length;++d)u[d]=u[d]**(1/e);return i||o.splice(n,1),new Tensor(this.type,u,o)}normalize_(e=2,n=1){n=safeIndex(n,this.dims.length);const i=this.norm(e,n,!0);for(let o=0;o<this.data.length;++o){let u=0;for(let d=this.dims.length-1,h=o,m=1;d>=0;--d){const p=this.dims[d];if(d!==n){const _=h%p;u+=_*m,m*=this.dims[d]}h=Math.floor(h/p)}this.data[o]/=i.data[u]}return this}normalize(e=2,n=1){return this.clone().normalize_(e,n)}stride(){return dimsToStride(this.dims)}squeeze(e=null){return new Tensor(this.type,this.data,calc_squeeze_dims(this.dims,e))}squeeze_(e=null){return this.dims=calc_squeeze_dims(this.dims,e),this}unsqueeze(e=null){return new Tensor(this.type,this.data,calc_unsqueeze_dims(this.dims,e))}unsqueeze_(e=null){return this.dims=calc_unsqueeze_dims(this.dims,e),this}flatten_(e=0,n=-1){n=(n+this.dims.length)%this.dims.length;let i=this.dims.slice(0,e),o=this.dims.slice(e,n+1),u=this.dims.slice(n+1);return this.dims=[...i,o.reduce((d,h)=>d*h,1),...u],this}flatten(e=0,n=-1){return this.clone().flatten_(e,n)}view(...e){let n=-1;for(let i=0;i<e.length;++i)if(e[i]===-1){if(n!==-1)throw new Error("Only one dimension can be inferred");n=i}if(n!==-1){const i=e.reduce((o,u,d)=>d!==n?o*u:o,1);e[n]=this.data.length/i}return new Tensor(this.type,this.data,e)}neg_(){for(let e=0;e<this.data.length;++e)this.data[e]=-this.data[e];return this}neg(){return this.clone().neg_()}clamp_(e,n){for(let i=0;i<this.data.length;++i)this.data[i]=Math.min(Math.max(this.data[i],e),n);return this}clamp(e,n){return this.clone().clamp_(e,n)}round_(){for(let e=0;e<this.data.length;++e)this.data[e]=Math.round(this.data[e]);return this}round(){return this.clone().round_()}to(e){if(this.type===e)return this;if(!DataTypeMap.hasOwnProperty(e))throw new Error(`Unsupported type: ${e}`);return new Tensor(e,DataTypeMap[e].from(this.data),this.dims)}}function reshape(t,e){const n=t.length,i=e.reduce((u,d)=>u*d);if(n!==i)throw Error(`cannot reshape array of size ${n} into shape (${e})`);let o=t;for(let u=e.length-1;u>=0;u--)o=o.reduce((d,h)=>{let m=d[d.length-1];return m.length<e[u]?m.push(h):d.push([h]),d},[[]]);return o[0]}function permute(t,e){const[n,i]=permute_data(t.data,t.dims,e);return new Tensor(t.type,n,i)}function interpolate(t,[e,n],i="bilinear",o=!1){const u=t.dims.at(-3)??1,d=t.dims.at(-2),h=t.dims.at(-1);let m=interpolate_data(t.data,[u,d,h],[e,n],i,o);return new Tensor(t.type,m,[u,e,n])}function mean_pooling(t,e){let n=[t.dims[0],t.dims[2]],i=new t.data.constructor(n[0]*n[1]),[o,u,d]=t.dims,h=0;for(let m=0;m<o;++m){let p=m*d*u;for(let _=0;_<d;++_){let f=0,l=0,g=m*u,v=p+_;for(let T=0;T<u;++T){let E=Number(e.data[g+T]);l+=E,f+=t.data[v+T*d]*E}let S=f/l;i[h++]=S}}return new Tensor(t.type,i,n)}function calc_squeeze_dims(t,e){return t=t.slice(),e===null?t=t.filter(n=>n!==1):typeof e=="number"?t[e]===1&&t.splice(e,1):Array.isArray(e)&&(t=t.filter((n,i)=>n!==1||!e.includes(i))),t}function calc_unsqueeze_dims(t,e){return e=safeIndex(e,t.length+1),t=t.slice(),t.splice(e,0,1),t}function safeIndex(t,e,n=null){if(t<-e||t>=e)throw new Error(`IndexError: index ${t} is out of bounds for dimension${n===null?"":" "+n} with size ${e}`);return t<0&&(t=(t%e+e)%e),t}function cat(t,e=0){e=safeIndex(e,t[0].dims.length);const n=t[0].dims.slice();n[e]=t.reduce((d,h)=>d+h.dims[e],0);const i=n.reduce((d,h)=>d*h,1),o=new t[0].data.constructor(i),u=t[0].type;if(e===0){let d=0;for(let h of t)o.set(h.data,d),d+=h.data.length}else{let d=0;for(let h=0;h<t.length;++h){let m=t[h];for(let p=0;p<m.data.length;++p){let _=0;for(let f=m.dims.length-1,l=p,g=1;f>=0;--f){const v=m.dims[f];let S=l%v;f===e&&(S+=d),_+=S*g,g*=n[f],l=Math.floor(l/v)}o[_]=m.data[p]}d+=m.dims[e]}}return new Tensor(u,o,n)}function stack(t,e=0){return cat(t.map(n=>n.unsqueeze(e)),e)}function std_mean(t,e=null,n=1,i=!1){if(e===null){const p=t.data.reduce((g,v)=>g+v,0)/t.data.length,_=Math.sqrt(t.data.reduce((g,v)=>g+(v-p)**2,0)/(t.data.length-n)),f=new Tensor(t.type,[p],[]);return[new Tensor(t.type,[_],[]),f]}e=safeIndex(e,t.dims.length);const o=mean(t,e,i),u=t.dims.slice();u[e]=1;const d=new t.data.constructor(t.data.length/t.dims[e]);for(let m=0;m<t.data.length;++m){let p=0;for(let _=t.dims.length-1,f=m,l=1;_>=0;--_){const g=t.dims[_];if(_!==e){const v=f%g;p+=v*l,l*=u[_]}f=Math.floor(f/g)}d[p]+=(t.data[m]-o.data[p])**2}for(let m=0;m<d.length;++m)d[m]=Math.sqrt(d[m]/(t.dims[e]-n));return i||u.splice(e,1),[new Tensor(t.type,d,u),o]}function mean(t,e=null,n=!1){if(e===null){let u=t.data.reduce((d,h)=>d+h,0);return new Tensor(t.type,[u/t.data.length],[])}e=safeIndex(e,t.dims.length);const i=t.dims.slice();i[e]=1;const o=new t.data.constructor(t.data.length/t.dims[e]);for(let u=0;u<t.data.length;++u){let d=0;for(let h=t.dims.length-1,m=u,p=1;h>=0;--h){const _=t.dims[h];if(h!==e){const f=m%_;d+=f*p,p*=i[h]}m=Math.floor(m/_)}o[d]+=t.data[u]}if(t.dims[e]!==1)for(let u=0;u<o.length;++u)o[u]=o[u]/t.dims[e];return n||i.splice(e,1),new Tensor(t.type,o,i)}function dynamicTimeWarping(t){const[e,n]=t.dims,i=[e+1,n+1],o=new Tensor("float32",new Float32Array(i[0]*i[1]).fill(1/0),i),u=new Tensor("float32",new Float32Array(i[0]*i[1]).fill(-1),i);o[0].data[0]=0;for(let _=1;_<n+1;++_)for(let f=1;f<e+1;++f){const l=o[f-1][_-1].item(),g=o[f-1][_].item(),v=o[f][_-1].item();let S,T;l<g&&l<v?(S=l,T=0):g<l&&g<v?(S=g,T=1):(S=v,T=2),o[f].data[_]=t[f-1][_-1].item()+S,u[f].data[_]=T}let d=e,h=n;u.data.fill(2,0,i[1]);for(let _=0;_<i[0];++_)u[_].data[0]=1;let m=[],p=[];for(;d>0||h>0;)switch(m.push(d-1),p.push(h-1),u[d][h].item()){case 0:--d,--h;break;case 1:--d;break;case 2:--h;break;default:throw new Error(`Internal error in dynamic time warping. Unexpected trace[${d}, ${h}]. Please file a bug report.`)}return m.reverse(),p.reverse(),[m,p]}function dimsToStride(t){const e=new Array(t.length);for(let n=t.length-1,i=1;n>=0;--n)e[n]=i,i*=t[n];return e}function ones(t){const e=t.reduce((n,i)=>n*i,1);return new Tensor("int64",new BigInt64Array(e).fill(1n),t)}function ones_like(t){return ones(t.dims)}function quantize_embeddings(t,e){if(t.dims.length!==2)throw new Error("The tensor must have 2 dimensions");if(t.dims.at(-1)%8!==0)throw new Error("The last dimension of the tensor must be a multiple of 8");if(!["binary","ubinary"].includes(e))throw new Error("The precision must be either 'binary' or 'ubinary'");const n=e==="binary",i=n?"int8":"uint8",o=n?Int8Array:Uint8Array,u=t.data,d=new o(u.length/8);for(let h=0;h<u.length;++h){const m=u[h]>0?1:0,p=Math.floor(h/8),_=h%8;d[p]|=m<<7-_,n&&_===0&&(d[p]-=128)}return new Tensor(i,d,[t.dims[0],t.dims[1]/8])}class PriorityQueue{constructor(e=(n,i)=>n>i){this._heap=[],this._comparator=e}get size(){return this._heap.length}isEmpty(){return this.size===0}peek(){return this._heap[0]}push(...e){return this.extend(e)}extend(e){for(const n of e)this._heap.push(n),this._siftUp();return this.size}pop(){const e=this.peek(),n=this.size-1;return n>0&&this._swap(0,n),this._heap.pop(),this._siftDown(),e}replace(e){const n=this.peek();return this._heap[0]=e,this._siftDown(),n}_parent(e){return(e+1>>>1)-1}_left(e){return(e<<1)+1}_right(e){return e+1<<1}_greater(e,n){return this._comparator(this._heap[e],this._heap[n])}_swap(e,n){const i=this._heap[e];this._heap[e]=this._heap[n],this._heap[n]=i}_siftUp(){let e=this.size-1;for(;e>0&&this._greater(e,this._parent(e));)this._swap(e,this._parent(e)),e=this._parent(e)}_siftDown(){let e=0;for(;this._left(e)<this.size&&this._greater(this._left(e),e)||this._right(e)<this.size&&this._greater(this._right(e),e);){const n=this._right(e)<this.size&&this._greater(this._right(e),this._left(e))?this._right(e):this._left(e);this._swap(e,n),e=n}}}class CharTrie{constructor(){this.root=CharTrieNode.default()}extend(e){for(let n of e)this.push(n)}push(e){let n=this.root;for(let i of e){let o=n.children.get(i);o===void 0&&(o=CharTrieNode.default(),n.children.set(i,o)),n=o}n.isLeaf=!0}*commonPrefixSearch(e){let n=this.root,i="";for(let o=0;o<e.length&&n!==void 0;++o){const u=e[o];i+=u,n=n.children.get(u),n!==void 0&&n.isLeaf&&(yield i)}}}class CharTrieNode{constructor(e,n){this.isLeaf=e,this.children=n}static default(){return new CharTrieNode(!1,new Map)}}class TokenLattice{constructor(e,n,i){this.sentence=e,this.len=e.length,this.bosTokenId=n,this.eosTokenId=i,this.nodes=[],this.beginNodes=Array.from({length:this.len+1},()=>[]),this.endNodes=Array.from({length:this.len+1},()=>[]);const o=new TokenLatticeNode(this.bosTokenId,0,0,0,0),u=new TokenLatticeNode(this.eosTokenId,1,this.len,0,0);this.nodes.push(o.clone()),this.nodes.push(u.clone()),this.beginNodes[this.len].push(u),this.endNodes[0].push(o)}insert(e,n,i,o){const u=this.nodes.length,d=new TokenLatticeNode(o,u,e,n,i);this.beginNodes[e].push(d),this.endNodes[e+n].push(d),this.nodes.push(d)}viterbi(){const e=this.len;let n=0;for(;n<=e;){if(this.beginNodes[n].length==0)return[];for(let h of this.beginNodes[n]){h.prev=null;let m=0,p=null;for(let _ of this.endNodes[n]){const f=_.backtraceScore+h.score;(p===null||f>m)&&(p=_.clone(),m=f)}if(p!==null)h.prev=p,h.backtraceScore=m;else return[]}++n}const i=[],u=this.beginNodes[e][0].prev;if(u===null)return[];let d=u.clone();for(;d.prev!==null;)i.push(d.clone()),d=d.clone().prev.clone();return i.reverse(),i}piece(e){return this.sentence.slice(e.pos,e.pos+e.length)}tokens(){return this.viterbi().map(n=>this.piece(n))}tokenIds(){return this.viterbi().map(n=>n.tokenId)}}class TokenLatticeNode{constructor(e,n,i,o,u){this.tokenId=e,this.nodeId=n,this.pos=i,this.length=o,this.score=u,this.prev=null,this.backtraceScore=0}clone(){const e=new TokenLatticeNode(this.tokenId,this.nodeId,this.pos,this.length,this.score);return e.prev=this.prev,e.backtraceScore=this.backtraceScore,e}}var TOKEN_TYPES=Object.freeze({Text:"Text",NumericLiteral:"NumericLiteral",BooleanLiteral:"BooleanLiteral",StringLiteral:"StringLiteral",Identifier:"Identifier",Equals:"Equals",OpenParen:"OpenParen",CloseParen:"CloseParen",OpenStatement:"OpenStatement",CloseStatement:"CloseStatement",OpenExpression:"OpenExpression",CloseExpression:"CloseExpression",OpenSquareBracket:"OpenSquareBracket",CloseSquareBracket:"CloseSquareBracket",OpenCurlyBracket:"OpenCurlyBracket",CloseCurlyBracket:"CloseCurlyBracket",Comma:"Comma",Dot:"Dot",Colon:"Colon",Pipe:"Pipe",CallOperator:"CallOperator",AdditiveBinaryOperator:"AdditiveBinaryOperator",MultiplicativeBinaryOperator:"MultiplicativeBinaryOperator",ComparisonBinaryOperator:"ComparisonBinaryOperator",UnaryOperator:"UnaryOperator",Set:"Set",If:"If",For:"For",In:"In",Is:"Is",NotIn:"NotIn",Else:"Else",EndIf:"EndIf",ElseIf:"ElseIf",EndFor:"EndFor",And:"And",Or:"Or",Not:"UnaryOperator"}),KEYWORDS=Object.freeze({set:TOKEN_TYPES.Set,for:TOKEN_TYPES.For,in:TOKEN_TYPES.In,is:TOKEN_TYPES.Is,if:TOKEN_TYPES.If,else:TOKEN_TYPES.Else,endif:TOKEN_TYPES.EndIf,elif:TOKEN_TYPES.ElseIf,endfor:TOKEN_TYPES.EndFor,and:TOKEN_TYPES.And,or:TOKEN_TYPES.Or,not:TOKEN_TYPES.Not,"not in":TOKEN_TYPES.NotIn,true:TOKEN_TYPES.BooleanLiteral,false:TOKEN_TYPES.BooleanLiteral}),Token=class{constructor(t,e){this.value=t,this.type=e}};function isWord(t){return/\w/.test(t)}function isInteger(t){return/[0-9]/.test(t)}var ORDERED_MAPPING_TABLE=[["{%",TOKEN_TYPES.OpenStatement],["%}",TOKEN_TYPES.CloseStatement],["{{",TOKEN_TYPES.OpenExpression],["}}",TOKEN_TYPES.CloseExpression],["(",TOKEN_TYPES.OpenParen],[")",TOKEN_TYPES.CloseParen],["{",TOKEN_TYPES.OpenCurlyBracket],["}",TOKEN_TYPES.CloseCurlyBracket],["[",TOKEN_TYPES.OpenSquareBracket],["]",TOKEN_TYPES.CloseSquareBracket],[",",TOKEN_TYPES.Comma],[".",TOKEN_TYPES.Dot],[":",TOKEN_TYPES.Colon],["|",TOKEN_TYPES.Pipe],["<=",TOKEN_TYPES.ComparisonBinaryOperator],[">=",TOKEN_TYPES.ComparisonBinaryOperator],["==",TOKEN_TYPES.ComparisonBinaryOperator],["!=",TOKEN_TYPES.ComparisonBinaryOperator],["<",TOKEN_TYPES.ComparisonBinaryOperator],[">",TOKEN_TYPES.ComparisonBinaryOperator],["+",TOKEN_TYPES.AdditiveBinaryOperator],["-",TOKEN_TYPES.AdditiveBinaryOperator],["*",TOKEN_TYPES.MultiplicativeBinaryOperator],["/",TOKEN_TYPES.MultiplicativeBinaryOperator],["%",TOKEN_TYPES.MultiplicativeBinaryOperator],["=",TOKEN_TYPES.Equals]],ESCAPE_CHARACTERS=new Map([["n",`
`],["t","	"],["r","\r"],["b","\b"],["f","\f"],["v","\v"],["'","'"],['"','"'],["\\","\\"]]);function preprocess(t,e={}){return t.endsWith(`
`)&&(t=t.slice(0,-1)),t=t.replace(/{#.*?#}/gs,"{##}"),e.lstrip_blocks&&(t=t.replace(/^[ \t]*({[#%])/gm,"$1")),e.trim_blocks&&(t=t.replace(/([#%]})\n/g,"$1")),t.replace(/{##}/g,"").replace(/-%}\s*/g,"%}").replace(/\s*{%-/g,"{%").replace(/-}}\s*/g,"}}").replace(/\s*{{-/g,"{{")}function tokenize(t,e={}){const n=[],i=preprocess(t,e);let o=0;const u=d=>{let h="";for(;d(i[o]);){if(i[o]==="\\"){if(++o,o>=i.length)throw new SyntaxError("Unexpected end of input");const m=i[o++],p=ESCAPE_CHARACTERS.get(m);if(p===void 0)throw new SyntaxError(`Unexpected escaped character: ${m}`);h+=p;continue}if(h+=i[o++],o>=i.length)throw new SyntaxError("Unexpected end of input")}return h};e:for(;o<i.length;){const d=n.at(-1)?.type;if(d===void 0||d===TOKEN_TYPES.CloseStatement||d===TOKEN_TYPES.CloseExpression){let m="";for(;o<i.length&&!(i[o]==="{"&&(i[o+1]==="%"||i[o+1]==="{"));)m+=i[o++];if(m.length>0){n.push(new Token(m,TOKEN_TYPES.Text));continue}}u(m=>/\s/.test(m));const h=i[o];if(h==="-"||h==="+"){const m=n.at(-1)?.type;if(m===TOKEN_TYPES.Text||m===void 0)throw new SyntaxError(`Unexpected character: ${h}`);switch(m){case TOKEN_TYPES.Identifier:case TOKEN_TYPES.NumericLiteral:case TOKEN_TYPES.BooleanLiteral:case TOKEN_TYPES.StringLiteral:case TOKEN_TYPES.CloseParen:case TOKEN_TYPES.CloseSquareBracket:break;default:{++o;const p=u(isInteger);n.push(new Token(`${h}${p}`,p.length>0?TOKEN_TYPES.NumericLiteral:TOKEN_TYPES.UnaryOperator));continue}}}for(const[m,p]of ORDERED_MAPPING_TABLE)if(i.slice(o,o+m.length)===m){n.push(new Token(m,p)),o+=m.length;continue e}if(h==="'"||h==='"'){++o;const m=u(p=>p!==h);n.push(new Token(m,TOKEN_TYPES.StringLiteral)),++o;continue}if(isInteger(h)){const m=u(isInteger);n.push(new Token(m,TOKEN_TYPES.NumericLiteral));continue}if(isWord(h)){const m=u(isWord),p=Object.hasOwn(KEYWORDS,m)?KEYWORDS[m]:TOKEN_TYPES.Identifier;p===TOKEN_TYPES.In&&n.at(-1)?.type===TOKEN_TYPES.Not?(n.pop(),n.push(new Token("not in",TOKEN_TYPES.NotIn))):n.push(new Token(m,p));continue}throw new SyntaxError(`Unexpected character: ${h}`)}return n}var Statement=class{type="Statement"},Program=class extends Statement{constructor(t){super(),this.body=t}type="Program"},If=class extends Statement{constructor(t,e,n){super(),this.test=t,this.body=e,this.alternate=n}type="If"},For=class extends Statement{constructor(t,e,n){super(),this.loopvar=t,this.iterable=e,this.body=n}type="For"},SetStatement=class extends Statement{constructor(t,e){super(),this.assignee=t,this.value=e}type="Set"},Expression=class extends Statement{type="Expression"},MemberExpression=class extends Expression{constructor(t,e,n){super(),this.object=t,this.property=e,this.computed=n}type="MemberExpression"},CallExpression=class extends Expression{constructor(t,e){super(),this.callee=t,this.args=e}type="CallExpression"},Identifier=class extends Expression{constructor(t){super(),this.value=t}type="Identifier"},Literal=class extends Expression{constructor(t){super(),this.value=t}type="Literal"},NumericLiteral=class extends Literal{type="NumericLiteral"},StringLiteral=class extends Literal{type="StringLiteral"},BooleanLiteral=class extends Literal{type="BooleanLiteral"},ArrayLiteral=class extends Literal{type="ArrayLiteral"},TupleLiteral=class extends Literal{type="TupleLiteral"},ObjectLiteral=class extends Literal{type="ObjectLiteral"},BinaryExpression=class extends Expression{constructor(t,e,n){super(),this.operator=t,this.left=e,this.right=n}type="BinaryExpression"},FilterExpression=class extends Expression{constructor(t,e){super(),this.operand=t,this.filter=e}type="FilterExpression"},TestExpression=class extends Expression{constructor(t,e,n){super(),this.operand=t,this.negate=e,this.test=n}type="TestExpression"},UnaryExpression=class extends Expression{constructor(t,e){super(),this.operator=t,this.argument=e}type="UnaryExpression"},SliceExpression=class extends Expression{constructor(t=void 0,e=void 0,n=void 0){super(),this.start=t,this.stop=e,this.step=n}type="SliceExpression"},KeywordArgumentExpression=class extends Expression{constructor(t,e){super(),this.key=t,this.value=e}type="KeywordArgumentExpression"};function parse(t){const e=new Program([]);let n=0;function i(z,V){const G=t[n++];if(!G||G.type!==z)throw new Error(`Parser Error: ${V}. ${G.type} !== ${z}.`);return G}function o(){switch(t[n].type){case TOKEN_TYPES.Text:return h();case TOKEN_TYPES.OpenStatement:return m();case TOKEN_TYPES.OpenExpression:return p();default:throw new SyntaxError(`Unexpected token type: ${t[n].type}`)}}function u(...z){return n+z.length<=t.length&&z.some((V,G)=>V!==t[n+G].type)}function d(...z){return n+z.length<=t.length&&z.every((V,G)=>V===t[n+G].type)}function h(){return new StringLiteral(i(TOKEN_TYPES.Text,"Expected text token").value)}function m(){i(TOKEN_TYPES.OpenStatement,"Expected opening statement token");let z;switch(t[n].type){case TOKEN_TYPES.Set:++n,z=_(),i(TOKEN_TYPES.CloseStatement,"Expected closing statement token");break;case TOKEN_TYPES.If:++n,z=f(),i(TOKEN_TYPES.OpenStatement,"Expected {% token"),i(TOKEN_TYPES.EndIf,"Expected endif token"),i(TOKEN_TYPES.CloseStatement,"Expected %} token");break;case TOKEN_TYPES.For:++n,z=g(),i(TOKEN_TYPES.OpenStatement,"Expected {% token"),i(TOKEN_TYPES.EndFor,"Expected endfor token"),i(TOKEN_TYPES.CloseStatement,"Expected %} token");break;default:throw new SyntaxError(`Unknown statement type: ${t[n].type}`)}return z}function p(){i(TOKEN_TYPES.OpenExpression,"Expected opening expression token");const z=v();return i(TOKEN_TYPES.CloseExpression,"Expected closing expression token"),z}function _(){const z=v();if(d(TOKEN_TYPES.Equals)){++n;const V=_();return new SetStatement(z,V)}return z}function f(){const z=v();i(TOKEN_TYPES.CloseStatement,"Expected closing statement token");const V=[],G=[];for(;!(t[n]?.type===TOKEN_TYPES.OpenStatement&&(t[n+1]?.type===TOKEN_TYPES.ElseIf||t[n+1]?.type===TOKEN_TYPES.Else||t[n+1]?.type===TOKEN_TYPES.EndIf));)V.push(o());if(t[n]?.type===TOKEN_TYPES.OpenStatement&&t[n+1]?.type!==TOKEN_TYPES.EndIf)if(++n,d(TOKEN_TYPES.ElseIf))i(TOKEN_TYPES.ElseIf,"Expected elseif token"),G.push(f());else for(i(TOKEN_TYPES.Else,"Expected else token"),i(TOKEN_TYPES.CloseStatement,"Expected closing statement token");!(t[n]?.type===TOKEN_TYPES.OpenStatement&&t[n+1]?.type===TOKEN_TYPES.EndIf);)G.push(o());return new If(z,V,G)}function l(z=!1){const V=z?K:v,G=[V()],ie=d(TOKEN_TYPES.Comma);for(;ie&&(++n,G.push(V()),!!d(TOKEN_TYPES.Comma)););return ie?new TupleLiteral(G):G[0]}function g(){const z=l(!0);if(!(z instanceof Identifier||z instanceof TupleLiteral))throw new SyntaxError(`Expected identifier/tuple for the loop variable, got ${z.type} instead`);i(TOKEN_TYPES.In,"Expected `in` keyword following loop variable");const V=v();i(TOKEN_TYPES.CloseStatement,"Expected closing statement token");const G=[];for(;u(TOKEN_TYPES.OpenStatement,TOKEN_TYPES.EndFor);)G.push(o());return new For(z,V,G)}function v(){return S()}function S(){const z=T();if(d(TOKEN_TYPES.If)){++n;const V=T();i(TOKEN_TYPES.Else,"Expected else token");const G=T();return new If(V,[z],[G])}return z}function T(){let z=E();for(;d(TOKEN_TYPES.Or);){const V=t[n];++n;const G=E();z=new BinaryExpression(V,z,G)}return z}function E(){let z=O();for(;d(TOKEN_TYPES.And);){const V=t[n];++n;const G=O();z=new BinaryExpression(V,z,G)}return z}function O(){let z;for(;d(TOKEN_TYPES.Not);){const V=t[n];++n;const G=O();z=new UnaryExpression(V,G)}return z??R()}function R(){let z=M();for(;d(TOKEN_TYPES.ComparisonBinaryOperator)||d(TOKEN_TYPES.In)||d(TOKEN_TYPES.NotIn);){const V=t[n];++n;const G=M();z=new BinaryExpression(V,z,G)}return z}function M(){let z=U();for(;d(TOKEN_TYPES.AdditiveBinaryOperator);){const V=t[n];++n;const G=U();z=new BinaryExpression(V,z,G)}return z}function C(){const z=B();return d(TOKEN_TYPES.OpenParen)?j(z):z}function j(z){let V=new CallExpression(z,$());return d(TOKEN_TYPES.OpenParen)&&(V=j(V)),V}function $(){i(TOKEN_TYPES.OpenParen,"Expected opening parenthesis for arguments list");const z=L();return i(TOKEN_TYPES.CloseParen,"Expected closing parenthesis for arguments list"),z}function L(){const z=[];for(;!d(TOKEN_TYPES.CloseParen);){let V=v();if(d(TOKEN_TYPES.Equals)){if(++n,!(V instanceof Identifier))throw new SyntaxError("Expected identifier for keyword argument");const G=v();V=new KeywordArgumentExpression(V,G)}z.push(V),d(TOKEN_TYPES.Comma)&&++n}return z}function N(){const z=[];let V=!1;for(;!d(TOKEN_TYPES.CloseSquareBracket);)d(TOKEN_TYPES.Colon)?(z.push(void 0),++n,V=!0):(z.push(v()),d(TOKEN_TYPES.Colon)&&(++n,V=!0));if(z.length===0)throw new SyntaxError("Expected at least one argument for member/slice expression");if(V){if(z.length>3)throw new SyntaxError("Expected 0-3 arguments for slice expression");return new SliceExpression(...z)}return z[0]}function B(){let z=K();for(;d(TOKEN_TYPES.Dot)||d(TOKEN_TYPES.OpenSquareBracket);){const V=t[n];++n;let G;const ie=V.type!==TOKEN_TYPES.Dot;if(ie)G=N(),i(TOKEN_TYPES.CloseSquareBracket,"Expected closing square bracket");else if(G=K(),G.type!=="Identifier")throw new SyntaxError("Expected identifier following dot operator");z=new MemberExpression(z,G,ie)}return z}function U(){let z=H();for(;d(TOKEN_TYPES.MultiplicativeBinaryOperator);){const V=t[n];++n;const G=H();z=new BinaryExpression(V,z,G)}return z}function H(){let z=Y();for(;d(TOKEN_TYPES.Is);){++n;const V=d(TOKEN_TYPES.Not);V&&++n;let G=K();if(G instanceof BooleanLiteral&&(G=new Identifier(G.value.toString())),!(G instanceof Identifier))throw new SyntaxError("Expected identifier for the test");z=new TestExpression(z,V,G)}return z}function Y(){let z=C();for(;d(TOKEN_TYPES.Pipe);){++n;let V=K();if(!(V instanceof Identifier))throw new SyntaxError("Expected identifier for the filter");d(TOKEN_TYPES.OpenParen)&&(V=j(V)),z=new FilterExpression(z,V)}return z}function K(){const z=t[n];switch(z.type){case TOKEN_TYPES.NumericLiteral:return++n,new NumericLiteral(Number(z.value));case TOKEN_TYPES.StringLiteral:return++n,new StringLiteral(z.value);case TOKEN_TYPES.BooleanLiteral:return++n,new BooleanLiteral(z.value==="true");case TOKEN_TYPES.Identifier:return++n,new Identifier(z.value);case TOKEN_TYPES.OpenParen:{++n;const V=l();if(t[n].type!==TOKEN_TYPES.CloseParen)throw new SyntaxError(`Expected closing parenthesis, got ${t[n].type} instead`);return++n,V}case TOKEN_TYPES.OpenSquareBracket:{++n;const V=[];for(;!d(TOKEN_TYPES.CloseSquareBracket);)V.push(v()),d(TOKEN_TYPES.Comma)&&++n;return++n,new ArrayLiteral(V)}case TOKEN_TYPES.OpenCurlyBracket:{++n;const V=new Map;for(;!d(TOKEN_TYPES.CloseCurlyBracket);){const G=v();i(TOKEN_TYPES.Colon,"Expected colon between key and value in object literal");const ie=v();V.set(G,ie),d(TOKEN_TYPES.Comma)&&++n}return++n,new ObjectLiteral(V)}default:throw new SyntaxError(`Unexpected token: ${z.type}`)}}for(;n<t.length;)e.body.push(o());return e}function range(t,e,n=1){e===void 0&&(e=t,t=0);const i=[];for(let o=t;o<e;o+=n)i.push(o);return i}function slice(t,e,n,i=1){const o=Math.sign(i);o>=0?(e=(e??=0)<0?Math.max(t.length+e,0):Math.min(e,t.length),n=(n??=t.length)<0?Math.max(t.length+n,0):Math.min(n,t.length)):(e=(e??=t.length-1)<0?Math.max(t.length+e,-1):Math.min(e,t.length-1),n=(n??=-1)<-1?Math.max(t.length+n,-1):Math.min(n,t.length-1));const u=[];for(let d=e;o*d<o*n;d+=i)u.push(t[d]);return u}function titleCase(t){return t.replace(/\b\w/g,e=>e.toUpperCase())}var RuntimeValue=class{type="RuntimeValue";value;builtins=new Map;constructor(t=void 0){this.value=t}__bool__(){return new BooleanValue(!!this.value)}},NumericValue=class extends RuntimeValue{type="NumericValue"},StringValue=class extends RuntimeValue{type="StringValue";builtins=new Map([["upper",new FunctionValue(()=>new StringValue(this.value.toUpperCase()))],["lower",new FunctionValue(()=>new StringValue(this.value.toLowerCase()))],["strip",new FunctionValue(()=>new StringValue(this.value.trim()))],["title",new FunctionValue(()=>new StringValue(titleCase(this.value)))],["length",new NumericValue(this.value.length)]])},BooleanValue=class extends RuntimeValue{type="BooleanValue"},ObjectValue=class extends RuntimeValue{type="ObjectValue";__bool__(){return new BooleanValue(this.value.size>0)}builtins=new Map([["get",new FunctionValue(([t,e])=>{if(!(t instanceof StringValue))throw new Error(`Object key must be a string: got ${t.type}`);return this.value.get(t.value)??e??new NullValue})],["items",new FunctionValue(()=>new ArrayValue(Array.from(this.value.entries()).map(([t,e])=>new ArrayValue([new StringValue(t),e]))))]])},ArrayValue=class extends RuntimeValue{type="ArrayValue";builtins=new Map([["length",new NumericValue(this.value.length)]]);__bool__(){return new BooleanValue(this.value.length>0)}},TupleValue=class extends ArrayValue{type="TupleValue"},FunctionValue=class extends RuntimeValue{type="FunctionValue"},NullValue=class extends RuntimeValue{type="NullValue"},UndefinedValue=class extends RuntimeValue{type="UndefinedValue"},Environment=class{constructor(t){this.parent=t}variables=new Map([["namespace",new FunctionValue(t=>{if(t.length===0)return new ObjectValue(new Map);if(t.length!==1||!(t[0]instanceof ObjectValue))throw new Error("`namespace` expects either zero arguments or a single object argument");return t[0]})]]);tests=new Map([["boolean",t=>t.type==="BooleanValue"],["callable",t=>t instanceof FunctionValue],["odd",t=>{if(t.type!=="NumericValue")throw new Error(`Cannot apply test "odd" to type: ${t.type}`);return t.value%2!==0}],["even",t=>{if(t.type!=="NumericValue")throw new Error(`Cannot apply test "even" to type: ${t.type}`);return t.value%2===0}],["false",t=>t.type==="BooleanValue"&&!t.value],["true",t=>t.type==="BooleanValue"&&t.value],["number",t=>t.type==="NumericValue"],["integer",t=>t.type==="NumericValue"&&Number.isInteger(t.value)],["iterable",t=>t instanceof ArrayValue||t instanceof StringValue],["lower",t=>{const e=t.value;return t.type==="StringValue"&&e===e.toLowerCase()}],["upper",t=>{const e=t.value;return t.type==="StringValue"&&e===e.toUpperCase()}],["none",t=>t.type==="NullValue"],["defined",t=>t.type!=="UndefinedValue"],["undefined",t=>t.type==="UndefinedValue"],["equalto",(t,e)=>t.value===e.value]]);set(t,e){return this.declareVariable(t,convertToRuntimeValues(e))}declareVariable(t,e){if(this.variables.has(t))throw new SyntaxError(`Variable already declared: ${t}`);return this.variables.set(t,e),e}setVariable(t,e){return this.variables.set(t,e),e}resolve(t){if(this.variables.has(t))return this;if(this.parent)return this.parent.resolve(t);throw new Error(`Unknown variable: ${t}`)}lookupVariable(t){try{return this.resolve(t).variables.get(t)??new UndefinedValue}catch{return new UndefinedValue}}},Interpreter=class{global;constructor(t){this.global=t??new Environment}run(t){return this.evaluate(t,this.global)}evaluateBinaryExpression(t,e){const n=this.evaluate(t.left,e);switch(t.operator.value){case"and":return n.__bool__().value?this.evaluate(t.right,e):n;case"or":return n.__bool__().value?n:this.evaluate(t.right,e)}const i=this.evaluate(t.right,e);switch(t.operator.value){case"==":return new BooleanValue(n.value==i.value);case"!=":return new BooleanValue(n.value!=i.value)}if(n instanceof UndefinedValue||i instanceof UndefinedValue)throw new Error("Cannot perform operation on undefined values");if(n instanceof NullValue||i instanceof NullValue)throw new Error("Cannot perform operation on null values");if(n instanceof NumericValue&&i instanceof NumericValue)switch(t.operator.value){case"+":return new NumericValue(n.value+i.value);case"-":return new NumericValue(n.value-i.value);case"*":return new NumericValue(n.value*i.value);case"/":return new NumericValue(n.value/i.value);case"%":return new NumericValue(n.value%i.value);case"<":return new BooleanValue(n.value<i.value);case">":return new BooleanValue(n.value>i.value);case">=":return new BooleanValue(n.value>=i.value);case"<=":return new BooleanValue(n.value<=i.value)}else if(n instanceof ArrayValue&&i instanceof ArrayValue)switch(t.operator.value){case"+":return new ArrayValue(n.value.concat(i.value))}else if(i instanceof ArrayValue){const o=i.value.find(u=>u.value===n.value)!==void 0;switch(t.operator.value){case"in":return new BooleanValue(o);case"not in":return new BooleanValue(!o)}}if(n instanceof StringValue||i instanceof StringValue)switch(t.operator.value){case"+":return new StringValue(n.value.toString()+i.value.toString())}if(n instanceof StringValue&&i instanceof StringValue)switch(t.operator.value){case"in":return new BooleanValue(i.value.includes(n.value));case"not in":return new BooleanValue(!i.value.includes(n.value))}if(n instanceof StringValue&&i instanceof ObjectValue)switch(t.operator.value){case"in":return new BooleanValue(i.value.has(n.value));case"not in":return new BooleanValue(!i.value.has(n.value))}throw new SyntaxError(`Unknown operator "${t.operator.value}" between ${n.type} and ${i.type}`)}evaluateFilterExpression(t,e){const n=this.evaluate(t.operand,e);if(t.filter.type==="Identifier"){const i=t.filter;if(n instanceof ArrayValue)switch(i.value){case"list":return n;case"first":return n.value[0];case"last":return n.value[n.value.length-1];case"length":return new NumericValue(n.value.length);case"reverse":return new ArrayValue(n.value.reverse());case"sort":return new ArrayValue(n.value.sort((o,u)=>{if(o.type!==u.type)throw new Error(`Cannot compare different types: ${o.type} and ${u.type}`);switch(o.type){case"NumericValue":return o.value-u.value;case"StringValue":return o.value.localeCompare(u.value);default:throw new Error(`Cannot compare type: ${o.type}`)}}));default:throw new Error(`Unknown ArrayValue filter: ${i.value}`)}else if(n instanceof StringValue)switch(i.value){case"length":return new NumericValue(n.value.length);case"upper":return new StringValue(n.value.toUpperCase());case"lower":return new StringValue(n.value.toLowerCase());case"title":return new StringValue(titleCase(n.value));case"capitalize":return new StringValue(n.value.charAt(0).toUpperCase()+n.value.slice(1));case"trim":return new StringValue(n.value.trim());default:throw new Error(`Unknown StringValue filter: ${i.value}`)}else if(n instanceof NumericValue)switch(i.value){case"abs":return new NumericValue(Math.abs(n.value));default:throw new Error(`Unknown NumericValue filter: ${i.value}`)}else if(n instanceof ObjectValue)switch(i.value){case"items":return new ArrayValue(Array.from(n.value.entries()).map(([o,u])=>new ArrayValue([new StringValue(o),u])));case"length":return new NumericValue(n.value.size);default:throw new Error(`Unknown ObjectValue filter: ${i.value}`)}throw new Error(`Cannot apply filter "${i.value}" to type: ${n.type}`)}else if(t.filter.type==="CallExpression"){const i=t.filter;if(i.callee.type!=="Identifier")throw new Error(`Unknown filter: ${i.callee.type}`);const o=i.callee.value;if(n instanceof ArrayValue){switch(o){case"selectattr":{if(n.value.some(_=>!(_ instanceof ObjectValue)))throw new Error("`selectattr` can only be applied to array of objects");if(i.args.some(_=>_.type!=="StringLiteral"))throw new Error("arguments of `selectattr` must be strings");const[u,d,h]=i.args.map(_=>this.evaluate(_,e));let m;if(d){const _=e.tests.get(d.value);if(!_)throw new Error(`Unknown test: ${d.value}`);m=_}else m=(..._)=>_[0].__bool__().value;const p=n.value.filter(_=>{const f=_.value.get(u.value);return f?m(f,h):!1});return new ArrayValue(p)}}throw new Error(`Unknown ArrayValue filter: ${o}`)}else throw new Error(`Cannot apply filter "${o}" to type: ${n.type}`)}throw new Error(`Unknown filter: ${t.filter.type}`)}evaluateTestExpression(t,e){const n=this.evaluate(t.operand,e),i=e.tests.get(t.test.value);if(!i)throw new Error(`Unknown test: ${t.test.value}`);const o=i(n);return new BooleanValue(t.negate?!o:o)}evaluateUnaryExpression(t,e){const n=this.evaluate(t.argument,e);switch(t.operator.value){case"not":return new BooleanValue(!n.value);default:throw new SyntaxError(`Unknown operator: ${t.operator.value}`)}}evalProgram(t,e){return this.evaluateBlock(t.body,e)}evaluateBlock(t,e){let n="";for(const i of t){const o=this.evaluate(i,e);o.type!=="NullValue"&&o.type!=="UndefinedValue"&&(n+=o.value)}return new StringValue(n)}evaluateIdentifier(t,e){return e.lookupVariable(t.value)}evaluateCallExpression(t,e){const n=[],i=new Map;for(const u of t.args)if(u.type==="KeywordArgumentExpression"){const d=u;i.set(d.key.value,this.evaluate(d.value,e))}else n.push(this.evaluate(u,e));i.size>0&&n.push(new ObjectValue(i));const o=this.evaluate(t.callee,e);if(o.type!=="FunctionValue")throw new Error(`Cannot call something that is not a function: got ${o.type}`);return o.value(n,e)}evaluateSliceExpression(t,e,n){if(!(t instanceof ArrayValue||t instanceof StringValue))throw new Error("Slice object must be an array or string");const i=this.evaluate(e.start,n),o=this.evaluate(e.stop,n),u=this.evaluate(e.step,n);if(!(i instanceof NumericValue||i instanceof UndefinedValue))throw new Error("Slice start must be numeric or undefined");if(!(o instanceof NumericValue||o instanceof UndefinedValue))throw new Error("Slice stop must be numeric or undefined");if(!(u instanceof NumericValue||u instanceof UndefinedValue))throw new Error("Slice step must be numeric or undefined");return t instanceof ArrayValue?new ArrayValue(slice(t.value,i.value,o.value,u.value)):new StringValue(slice(Array.from(t.value),i.value,o.value,u.value).join(""))}evaluateMemberExpression(t,e){const n=this.evaluate(t.object,e);let i;if(t.computed){if(t.property.type==="SliceExpression")return this.evaluateSliceExpression(n,t.property,e);i=this.evaluate(t.property,e)}else i=new StringValue(t.property.value);let o;if(n instanceof ObjectValue){if(!(i instanceof StringValue))throw new Error(`Cannot access property with non-string: got ${i.type}`);o=n.value.get(i.value)??n.builtins.get(i.value)}else if(n instanceof ArrayValue||n instanceof StringValue)if(i instanceof NumericValue)o=n.value.at(i.value),n instanceof StringValue&&(o=new StringValue(n.value.at(i.value)));else if(i instanceof StringValue)o=n.builtins.get(i.value);else throw new Error(`Cannot access property with non-string/non-number: got ${i.type}`);else{if(!(i instanceof StringValue))throw new Error(`Cannot access property with non-string: got ${i.type}`);o=n.builtins.get(i.value)}return o instanceof RuntimeValue?o:new UndefinedValue}evaluateSet(t,e){const n=this.evaluate(t.value,e);if(t.assignee.type==="Identifier"){const i=t.assignee.value;e.setVariable(i,n)}else if(t.assignee.type==="MemberExpression"){const i=t.assignee,o=this.evaluate(i.object,e);if(!(o instanceof ObjectValue))throw new Error("Cannot assign to member of non-object");if(i.property.type!=="Identifier")throw new Error("Cannot assign to member with non-identifier property");o.value.set(i.property.value,n)}else throw new Error(`Invalid LHS inside assignment expression: ${JSON.stringify(t.assignee)}`);return new NullValue}evaluateIf(t,e){const n=this.evaluate(t.test,e);return this.evaluateBlock(n.__bool__().value?t.body:t.alternate,e)}evaluateFor(t,e){const n=new Environment(e),i=this.evaluate(t.iterable,n);if(!(i instanceof ArrayValue))throw new Error(`Expected iterable type in for loop: got ${i.type}`);let o="";for(let u=0;u<i.value.length;++u){const d=new Map([["index",new NumericValue(u+1)],["index0",new NumericValue(u)],["revindex",new NumericValue(i.value.length-u)],["revindex0",new NumericValue(i.value.length-u-1)],["first",new BooleanValue(u===0)],["last",new BooleanValue(u===i.value.length-1)],["length",new NumericValue(i.value.length)],["previtem",u>0?i.value[u-1]:new UndefinedValue],["nextitem",u<i.value.length-1?i.value[u+1]:new UndefinedValue]]);n.setVariable("loop",new ObjectValue(d));const h=i.value[u];if(t.loopvar.type==="Identifier")n.setVariable(t.loopvar.value,h);else if(t.loopvar.type==="TupleLiteral"){const p=t.loopvar;if(h.type!=="ArrayValue")throw new Error(`Cannot unpack non-iterable type: ${h.type}`);const _=h;if(p.value.length!==_.value.length)throw new Error(`Too ${p.value.length>_.value.length?"few":"many"} items to unpack`);for(let f=0;f<p.value.length;++f){if(p.value[f].type!=="Identifier")throw new Error(`Cannot unpack non-identifier type: ${p.value[f].type}`);n.setVariable(p.value[f].value,_.value[f])}}const m=this.evaluateBlock(t.body,n);o+=m.value}return new StringValue(o)}evaluate(t,e){if(t===void 0)return new UndefinedValue;switch(t.type){case"Program":return this.evalProgram(t,e);case"Set":return this.evaluateSet(t,e);case"If":return this.evaluateIf(t,e);case"For":return this.evaluateFor(t,e);case"NumericLiteral":return new NumericValue(Number(t.value));case"StringLiteral":return new StringValue(t.value);case"BooleanLiteral":return new BooleanValue(t.value);case"ArrayLiteral":return new ArrayValue(t.value.map(n=>this.evaluate(n,e)));case"TupleLiteral":return new TupleValue(t.value.map(n=>this.evaluate(n,e)));case"ObjectLiteral":{const n=new Map;for(const[i,o]of t.value){const u=this.evaluate(i,e);if(!(u instanceof StringValue))throw new Error(`Object keys must be strings: got ${u.type}`);n.set(u.value,this.evaluate(o,e))}return new ObjectValue(n)}case"Identifier":return this.evaluateIdentifier(t,e);case"CallExpression":return this.evaluateCallExpression(t,e);case"MemberExpression":return this.evaluateMemberExpression(t,e);case"UnaryExpression":return this.evaluateUnaryExpression(t,e);case"BinaryExpression":return this.evaluateBinaryExpression(t,e);case"FilterExpression":return this.evaluateFilterExpression(t,e);case"TestExpression":return this.evaluateTestExpression(t,e);default:throw new SyntaxError(`Unknown node type: ${t.type}`)}}};function convertToRuntimeValues(t){switch(typeof t){case"number":return new NumericValue(t);case"string":return new StringValue(t);case"boolean":return new BooleanValue(t);case"object":return t===null?new NullValue:Array.isArray(t)?new ArrayValue(t.map(convertToRuntimeValues)):new ObjectValue(new Map(Object.entries(t).map(([e,n])=>[e,convertToRuntimeValues(n)])));case"function":return new FunctionValue((e,n)=>{const i=t(...e.map(o=>o.value))??null;return convertToRuntimeValues(i)});default:throw new Error(`Cannot convert to runtime value: ${t}`)}}var Template=class{parsed;constructor(t){const e=tokenize(t,{lstrip_blocks:!0,trim_blocks:!0});this.parsed=parse(e)}render(t){const e=new Environment;e.set("false",!1),e.set("true",!0),e.set("raise_exception",o=>{throw new Error(o)}),e.set("range",range);for(const[o,u]of Object.entries(t))e.set(o,u);return new Interpreter(e).run(this.parsed).value}};async function loadTokenizer(t,e){const n=await Promise.all([getModelJSON(t,"tokenizer.json",!0,e),getModelJSON(t,"tokenizer_config.json",!0,e)]);return e.legacy!==null&&(n[1].legacy=e.legacy),n}function regexSplit(t,e){const n=[];let i=0;for(const o of t.matchAll(e)){const u=o[0];i<o.index&&n.push(t.slice(i,o.index)),u.length>0&&n.push(u),i=o.index+u.length}return i<t.length&&n.push(t.slice(i)),n}function createPattern(t,e=!0){if(t.Regex!==void 0){let n=t.Regex.replace(/\\([#&~])/g,"$1");for(const[i,o]of PROBLEMATIC_REGEX_MAP)n=n.replaceAll(i,o);return new RegExp(n,"gu")}else if(t.String!==void 0){const n=escapeRegExp(t.String);return new RegExp(e?n:`(${n})`,"gu")}else return console.warn("Unknown pattern type:",t),null}function objectToMap(t){return new Map(Object.entries(t))}function prepareTensorForDecode(t){const e=t.dims;switch(e.length){case 1:return t.tolist();case 2:if(e[0]!==1)throw new Error("Unable to decode tensor with `batch size !== 1`. Use `tokenizer.batch_decode(...)` for batched inputs.");return t.tolist()[0];default:throw new Error(`Expected tensor to have 1-2 dimensions, got ${e.length}.`)}}function clean_up_tokenization(t){return t.replace(/ \./g,".").replace(/ \?/g,"?").replace(/ \!/g,"!").replace(/ ,/g,",").replace(/ \' /g,"'").replace(/ n\'t/g,"n't").replace(/ \'m/g,"'m").replace(/ \'s/g,"'s").replace(/ \'ve/g,"'ve").replace(/ \'re/g,"'re")}function remove_accents(t){return t.replace(/[\u0300-\u036f]/g,"")}function lowercase_and_remove_accent(t){return remove_accents(t.toLowerCase())}function fuse(t,e,n){const i=[];let o=0;for(;o<t.length;){if(i.push(t[o]),(n.get(t[o])??e)!==e){++o;continue}for(;o<t.length&&(n.get(t[o])??e)===e;)++o}return i}function whitespace_split(t){return t.match(/\S+/g)||[]}const PUNCTUATION_REGEX="\\p{P}\\u0021-\\u002F\\u003A-\\u0040\\u005B-\\u0060\\u007B-\\u007E",PROBLEMATIC_REGEX_MAP=new Map([["(?i:'s|'t|'re|'ve|'m|'ll|'d)","(?:'([sS]|[tT]|[rR][eE]|[vV][eE]|[mM]|[lL][lL]|[dD]))"]]);class AddedToken{constructor(e){this.content=e.content,this.id=e.id,this.single_word=e.single_word??!1,this.lstrip=e.lstrip??!1,this.rstrip=e.rstrip??!1,this.special=e.special??!1,this.normalized=e.normalized??null}}class TokenizerModel extends Callable{constructor(e){super(),this.config=e,this.vocab=[],this.tokens_to_ids=new Map,this.unk_token_id=void 0,this.unk_token=void 0,this.end_of_word_suffix=void 0,this.fuse_unk=this.config.fuse_unk??!1}static fromConfig(e,...n){switch(e.type){case"WordPiece":return new WordPieceTokenizer(e);case"Unigram":return new Unigram(e,...n);case"BPE":return new BPE(e);default:if(e.vocab)return new LegacyTokenizerModel(e,...n);throw new Error(`Unknown TokenizerModel type: ${e.type}`)}}_call(e){let n=this.encode(e);return this.fuse_unk&&(n=fuse(n,this.unk_token_id,this.tokens_to_ids)),n}encode(e){throw Error("encode should be implemented in subclass.")}convert_tokens_to_ids(e){return e.map(n=>this.tokens_to_ids.get(n)??this.unk_token_id)}convert_ids_to_tokens(e){return e.map(n=>this.vocab[n]??this.unk_token)}}class WordPieceTokenizer extends TokenizerModel{constructor(e){super(e),this.tokens_to_ids=objectToMap(e.vocab),this.unk_token_id=this.tokens_to_ids.get(e.unk_token),this.unk_token=e.unk_token,this.max_input_chars_per_word=e.max_input_chars_per_word??100,this.vocab=new Array(this.tokens_to_ids.size);for(const[n,i]of this.tokens_to_ids)this.vocab[i]=n}encode(e){const n=[];for(const i of e){const o=[...i];if(o.length>this.max_input_chars_per_word){n.push(this.unk_token);continue}let u=!1,d=0;const h=[];for(;d<o.length;){let m=o.length,p=null;for(;d<m;){let _=o.slice(d,m).join("");if(d>0&&(_=this.config.continuing_subword_prefix+_),this.tokens_to_ids.has(_)){p=_;break}--m}if(p===null){u=!0;break}h.push(p),d=m}u?n.push(this.unk_token):n.push(...h)}return n}}class Unigram extends TokenizerModel{constructor(e,n){super(e);const i=e.vocab.length;this.vocab=new Array(i),this.scores=new Array(i);for(let o=0;o<i;++o){const u=e.vocab[o];this.vocab[o]=u[0],this.scores[o]=u[1]}this.unk_token_id=e.unk_id,this.unk_token=this.vocab[e.unk_id],this.tokens_to_ids=new Map(this.vocab.map((o,u)=>[o,u])),this.bosToken=" ",this.bosTokenId=this.tokens_to_ids.get(this.bosToken),this.eosToken=n.eos_token,this.eosTokenId=this.tokens_to_ids.get(this.eosToken),this.unkToken=this.vocab[this.unk_token_id],this.minScore=min(this.scores)[0],this.unkScore=this.minScore-10,this.scores[this.unk_token_id]=this.unkScore,this.trie=new CharTrie,this.trie.extend(this.vocab),this.fuse_unk=!0}populateNodes(e){const n=e.sentence,i=n.length;let o=0;for(;o<i;){let d=!1;for(let h of this.trie.commonPrefixSearch(n.slice(o))){const m=this.tokens_to_ids.get(h),p=this.scores[m],_=h.length;e.insert(o,_,p,m),!d&&_===1&&(d=!0)}d||e.insert(o,1,this.unkScore,this.unk_token_id),o+=1}}tokenize(e){const n=new TokenLattice(e,this.bosTokenId,this.eosTokenId);return this.populateNodes(n),n.tokens()}encode(e){const n=[];for(const i of e){const o=this.tokenize(i);n.push(...o)}return n}}const BYTES_TO_UNICODE=(()=>{const t=[...Array.from({length:94},(o,u)=>u+33),...Array.from({length:12},(o,u)=>u+161),...Array.from({length:82},(o,u)=>u+174)],e=t.slice();let n=0;for(let o=0;o<256;++o)t.includes(o)||(t.push(o),e.push(256+n),n+=1);const i=e.map(o=>String.fromCharCode(o));return Object.fromEntries(t.map((o,u)=>[o,i[u]]))})(),UNICODE_TO_BYTES=reverseDictionary(BYTES_TO_UNICODE);class BPE extends TokenizerModel{constructor(e){super(e),this.BPE_SPLIT_TOKEN=" ",this.tokens_to_ids=objectToMap(e.vocab),this.unk_token_id=this.tokens_to_ids.get(e.unk_token),this.unk_token=e.unk_token,this.vocab=new Array(this.tokens_to_ids.size);for(const[n,i]of this.tokens_to_ids)this.vocab[i]=n;this.bpe_ranks=new Map(e.merges.map((n,i)=>[n,i])),this.merges=e.merges.map(n=>n.split(this.BPE_SPLIT_TOKEN)),this.end_of_word_suffix=e.end_of_word_suffix,this.continuing_subword_suffix=e.continuing_subword_suffix??null,this.byte_fallback=this.config.byte_fallback??!1,this.byte_fallback&&(this.text_encoder=new TextEncoder),this.ignore_merges=this.config.ignore_merges??!1,this.cache=new Map}bpe(e){if(e.length===0)return[];const n=this.cache.get(e);if(n!==void 0)return n;const i=Array.from(e);this.end_of_word_suffix&&(i[i.length-1]+=this.end_of_word_suffix);let o=[];if(i.length>1){const u=new PriorityQueue((m,p)=>m.score<p.score);let d={token:i[0],bias:0,prev:null,next:null},h=d;for(let m=1;m<i.length;++m){const p={bias:m/i.length,token:i[m],prev:h,next:null};h.next=p,this._add_node(u,h),h=p}for(;!u.isEmpty();){const m=u.pop();if(m.deleted||!m.next||m.next.deleted)continue;if(m.deleted=!0,m.next.deleted=!0,m.prev){const _={...m.prev};m.prev.deleted=!0,m.prev=_,_.prev?_.prev.next=_:d=_}const p={token:m.token+m.next.token,bias:m.bias,prev:m.prev,next:m.next.next};p.prev?(p.prev.next=p,this._add_node(u,p.prev)):d=p,p.next&&(p.next.prev=p,this._add_node(u,p))}for(let m=d;m!==null;m=m.next)o.push(m.token)}else o=i;if(this.continuing_subword_suffix)for(let u=0;u<o.length-1;++u)o[u]+=this.continuing_subword_suffix;return this.cache.set(e,o),o}_add_node(e,n){const i=this.bpe_ranks.get(n.token+this.BPE_SPLIT_TOKEN+n.next.token);i!==void 0&&(n.score=i+n.bias,e.push(n))}encode(e){const n=[];for(const i of e){if(this.ignore_merges&&this.tokens_to_ids.has(i)){n.push(i);continue}const o=this.bpe(i);for(const u of o)this.tokens_to_ids.has(u)?n.push(u):this.byte_fallback?n.push(...Array.from(this.text_encoder.encode(u)).map(d=>`<0x${d.toString(16).toUpperCase().padStart(2,"0")}>`)):n.push(this.unk_token)}return n}}class LegacyTokenizerModel extends TokenizerModel{constructor(e,n){super(e),this.tokens_to_ids=objectToMap(n.target_lang?e.vocab[n.target_lang]:e.vocab),this.bos_token=n.bos_token,this.bos_token_id=this.tokens_to_ids.get(this.bos_token),this.eos_token=n.eos_token,this.eos_token_id=this.tokens_to_ids.get(this.eos_token),this.pad_token=n.pad_token,this.pad_token_id=this.tokens_to_ids.get(this.pad_token),this.unk_token=n.unk_token,this.unk_token_id=this.tokens_to_ids.get(this.unk_token),this.vocab=new Array(this.tokens_to_ids.size);for(const[i,o]of this.tokens_to_ids)this.vocab[o]=i}encode(e){return e}}class Normalizer extends Callable{constructor(e){super(),this.config=e}static fromConfig(e){if(e===null)return null;switch(e.type){case"BertNormalizer":return new BertNormalizer(e);case"Precompiled":return new Precompiled(e);case"Sequence":return new NormalizerSequence(e);case"Replace":return new Replace(e);case"NFC":return new NFC(e);case"NFKC":return new NFKC(e);case"NFKD":return new NFKD(e);case"Strip":return new StripNormalizer(e);case"StripAccents":return new StripAccents(e);case"Lowercase":return new Lowercase(e);case"Prepend":return new Prepend(e);default:throw new Error(`Unknown Normalizer type: ${e.type}`)}}normalize(e){throw Error("normalize should be implemented in subclass.")}_call(e){return this.normalize(e)}}class Replace extends Normalizer{normalize(e){const n=createPattern(this.config.pattern);return n===null?e:e.replaceAll(n,this.config.content)}}class NFC extends Normalizer{normalize(e){return e=e.normalize("NFC"),e}}class NFKC extends Normalizer{normalize(e){return e=e.normalize("NFKC"),e}}class NFKD extends Normalizer{normalize(e){return e=e.normalize("NFKD"),e}}class StripNormalizer extends Normalizer{normalize(e){return this.config.strip_left&&this.config.strip_right?e=e.trim():(this.config.strip_left&&(e=e.trimStart()),this.config.strip_right&&(e=e.trimEnd())),e}}class StripAccents extends Normalizer{normalize(e){return e=remove_accents(e),e}}class Lowercase extends Normalizer{normalize(e){return e=e.toLowerCase(),e}}class Prepend extends Normalizer{normalize(e){return e=this.config.prepend+e,e}}class NormalizerSequence extends Normalizer{constructor(e){super(e),this.normalizers=e.normalizers.map(n=>Normalizer.fromConfig(n))}normalize(e){return this.normalizers.reduce((n,i)=>i.normalize(n),e)}}class BertNormalizer extends Normalizer{_tokenize_chinese_chars(e){const n=[];for(let i=0;i<e.length;++i){const o=e[i],u=o.charCodeAt(0);this._is_chinese_char(u)?(n.push(" "),n.push(o),n.push(" ")):n.push(o)}return n.join("")}_is_chinese_char(e){return e>=19968&&e<=40959||e>=13312&&e<=19903||e>=131072&&e<=173791||e>=173824&&e<=177983||e>=177984&&e<=178207||e>=178208&&e<=183983||e>=63744&&e<=64255||e>=194560&&e<=195103}stripAccents(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}_is_control(e){switch(e){case"	":case`
`:case"\r":return!1;default:return/^\p{Cc}|\p{Cf}|\p{Co}|\p{Cs}$/u.test(e)}}_clean_text(e){const n=[];for(const i of e){const o=i.charCodeAt(0);o===0||o===65533||this._is_control(i)||(/^\s$/.test(i)?n.push(" "):n.push(i))}return n.join("")}normalize(e){return this.config.clean_text&&(e=this._clean_text(e)),this.config.handle_chinese_chars&&(e=this._tokenize_chinese_chars(e)),this.config.lowercase?(e=e.toLowerCase(),this.config.strip_accents!==!1&&(e=this.stripAccents(e))):this.config.strip_accents&&(e=this.stripAccents(e)),e}}class PreTokenizer extends Callable{static fromConfig(e){if(e===null)return null;switch(e.type){case"BertPreTokenizer":return new BertPreTokenizer(e);case"Sequence":return new PreTokenizerSequence(e);case"Whitespace":return new WhitespacePreTokenizer(e);case"WhitespaceSplit":return new WhitespaceSplit(e);case"Metaspace":return new MetaspacePreTokenizer(e);case"ByteLevel":return new ByteLevelPreTokenizer(e);case"Split":return new SplitPreTokenizer(e);case"Punctuation":return new PunctuationPreTokenizer(e);case"Digits":return new DigitsPreTokenizer(e);case"Replace":return new ReplacePreTokenizer(e);default:throw new Error(`Unknown PreTokenizer type: ${e.type}`)}}pre_tokenize_text(e,n){throw Error("pre_tokenize_text should be implemented in subclass.")}pre_tokenize(e,n){return(Array.isArray(e)?e.map(i=>this.pre_tokenize_text(i,n)):this.pre_tokenize_text(e,n)).flat()}_call(e,n){return this.pre_tokenize(e,n)}}class BertPreTokenizer extends PreTokenizer{constructor(e){super(),this.pattern=new RegExp(`[^\\s${PUNCTUATION_REGEX}]+|[${PUNCTUATION_REGEX}]`,"gu")}pre_tokenize_text(e,n){return e.trim().match(this.pattern)||[]}}class ByteLevelPreTokenizer extends PreTokenizer{constructor(e){super(),this.config=e,this.add_prefix_space=this.config.add_prefix_space,this.trim_offsets=this.config.trim_offsets,this.use_regex=this.config.use_regex??!0,this.pattern=/'s|'t|'re|'ve|'m|'ll|'d| ?\p{L}+| ?\p{N}+| ?[^\s\p{L}\p{N}]+|\s+(?!\S)|\s+/gu,this.byte_encoder=BYTES_TO_UNICODE,this.text_encoder=new TextEncoder}pre_tokenize_text(e,n){return this.add_prefix_space&&!e.startsWith(" ")&&(e=" "+e),(this.use_regex?e.match(this.pattern)||[]:[e]).map(o=>Array.from(this.text_encoder.encode(o),u=>this.byte_encoder[u]).join(""))}}class SplitPreTokenizer extends PreTokenizer{constructor(e){super(),this.config=e,this.pattern=createPattern(this.config.pattern,this.config.invert)}pre_tokenize_text(e,n){return this.pattern===null?[]:this.config.invert?e.match(this.pattern)||[]:regexSplit(e,this.pattern)}}class PunctuationPreTokenizer extends PreTokenizer{constructor(e){super(),this.config=e,this.pattern=new RegExp(`[^${PUNCTUATION_REGEX}]+|[${PUNCTUATION_REGEX}]+`,"gu")}pre_tokenize_text(e,n){return e.match(this.pattern)||[]}}class DigitsPreTokenizer extends PreTokenizer{constructor(e){super(),this.config=e;const n=`[^\\d]+|\\d${this.config.individual_digits?"":"+"}`;this.pattern=new RegExp(n,"gu")}pre_tokenize_text(e,n){return e.match(this.pattern)||[]}}class PostProcessor extends Callable{constructor(e){super(),this.config=e}static fromConfig(e){if(e===null)return null;switch(e.type){case"TemplateProcessing":return new TemplateProcessing(e);case"ByteLevel":return new ByteLevelPostProcessor(e);case"RobertaProcessing":return new RobertaProcessing(e);case"BertProcessing":return new BertProcessing(e);case"Sequence":return new PostProcessorSequence(e);default:throw new Error(`Unknown PostProcessor type: ${e.type}`)}}post_process(e,...n){throw Error("post_process should be implemented in subclass.")}_call(e,...n){return this.post_process(e,...n)}}class BertProcessing extends PostProcessor{constructor(e){super(e),this.cls=e.cls[0],this.sep=e.sep[0]}post_process(e,n=null,{add_special_tokens:i=!0}={}){i&&(e=mergeArrays([this.cls],e,[this.sep]));let o=new Array(e.length).fill(0);if(n!==null){const u=i&&this instanceof RobertaProcessing?[this.sep]:[],d=i?[this.sep]:[];e=mergeArrays(e,u,n,d),o=mergeArrays(o,new Array(n.length+u.length+d.length).fill(1))}return{tokens:e,token_type_ids:o}}}class RobertaProcessing extends BertProcessing{}class TemplateProcessing extends PostProcessor{constructor(e){super(e),this.single=e.single,this.pair=e.pair}post_process(e,n=null,{add_special_tokens:i=!0}={}){const o=n===null?this.single:this.pair;let u=[],d=[];for(const h of o)"SpecialToken"in h?i&&(u.push(h.SpecialToken.id),d.push(h.SpecialToken.type_id)):"Sequence"in h&&(h.Sequence.id==="A"?(u=mergeArrays(u,e),d=mergeArrays(d,new Array(e.length).fill(h.Sequence.type_id))):h.Sequence.id==="B"&&(u=mergeArrays(u,n),d=mergeArrays(d,new Array(n.length).fill(h.Sequence.type_id))));return{tokens:u,token_type_ids:d}}}class ByteLevelPostProcessor extends PostProcessor{post_process(e,n=null){return n&&(e=mergeArrays(e,n)),{tokens:e}}}class PostProcessorSequence extends PostProcessor{constructor(e){super(e),this.processors=e.processors.map(n=>PostProcessor.fromConfig(n))}post_process(e,n=null,i={}){let o;for(const u of this.processors)if(u instanceof ByteLevelPostProcessor)e=u.post_process(e).tokens,n&&(n=u.post_process(n).tokens);else{const d=u.post_process(e,n,i);e=d.tokens,o=d.token_type_ids}return{tokens:e,token_type_ids:o}}}class Decoder extends Callable{constructor(e){super(),this.config=e,this.added_tokens=[],this.end_of_word_suffix=null,this.trim_offsets=e.trim_offsets}static fromConfig(e){if(e===null)return null;switch(e.type){case"WordPiece":return new WordPieceDecoder(e);case"Metaspace":return new MetaspaceDecoder(e);case"ByteLevel":return new ByteLevelDecoder(e);case"Replace":return new ReplaceDecoder(e);case"ByteFallback":return new ByteFallback(e);case"Fuse":return new FuseDecoder(e);case"Strip":return new StripDecoder(e);case"Sequence":return new DecoderSequence(e);case"CTC":return new CTCDecoder(e);case"BPEDecoder":return new BPEDecoder(e);default:throw new Error(`Unknown Decoder type: ${e.type}`)}}_call(e){return this.decode(e)}decode(e){return this.decode_chain(e).join("")}decode_chain(e){throw Error("`decode_chain` should be implemented in subclass.")}}class ReplaceDecoder extends Decoder{decode_chain(e){const n=createPattern(this.config.pattern);return n===null?e:e.map(i=>i.replaceAll(n,this.config.content))}}class ByteFallback extends Decoder{constructor(e){super(e),this.text_decoder=new TextDecoder}decode_chain(e){const n=[];let i=[];for(const o of e){let u=null;if(o.length===6&&o.startsWith("<0x")&&o.endsWith(">")){const d=parseInt(o.slice(3,5),16);isNaN(d)||(u=d)}if(u!==null)i.push(u);else{if(i.length>0){const d=this.text_decoder.decode(Uint8Array.from(i));n.push(d),i=[]}n.push(o)}}if(i.length>0){const o=this.text_decoder.decode(Uint8Array.from(i));n.push(o),i=[]}return n}}class FuseDecoder extends Decoder{decode_chain(e){return[e.join("")]}}class StripDecoder extends Decoder{constructor(e){super(e),this.content=this.config.content,this.start=this.config.start,this.stop=this.config.stop}decode_chain(e){return e.map(n=>{let i=0;for(let u=0;u<this.start&&n[u]===this.content;++u){i=u+1;continue}let o=n.length;for(let u=0;u<this.stop;++u){const d=n.length-u-1;if(n[d]===this.content){o=d;continue}else break}return n.slice(i,o)})}}class WordPieceDecoder extends Decoder{constructor(e){super(e),this.cleanup=e.cleanup}decode_chain(e){return e.map((n,i)=>(i!==0&&(n.startsWith(this.config.prefix)?n=n.replace(this.config.prefix,""):n=" "+n),this.cleanup&&(n=clean_up_tokenization(n)),n))}}class ByteLevelDecoder extends Decoder{constructor(e){super(e),this.byte_decoder=UNICODE_TO_BYTES,this.text_decoder=new TextDecoder("utf-8",{fatal:!1,ignoreBOM:!0}),this.end_of_word_suffix=null}convert_tokens_to_string(e){const n=e.join(""),i=new Uint8Array([...n].map(u=>this.byte_decoder[u]));return this.text_decoder.decode(i)}decode_chain(e){const n=[];let i=[];for(const o of e)this.added_tokens.find(u=>u.content===o)!==void 0?(i.length>0&&(n.push(this.convert_tokens_to_string(i)),i=[]),n.push(o)):i.push(o);return i.length>0&&n.push(this.convert_tokens_to_string(i)),n}}class CTCDecoder extends Decoder{constructor(e){super(e),this.pad_token=this.config.pad_token,this.word_delimiter_token=this.config.word_delimiter_token,this.cleanup=this.config.cleanup}convert_tokens_to_string(e){if(e.length===0)return"";const n=[e[0]];for(let u=1;u<e.length;++u)e[u]!==n.at(-1)&&n.push(e[u]);let o=n.filter(u=>u!==this.pad_token).join("");return this.cleanup&&(o=clean_up_tokenization(o).replaceAll(this.word_delimiter_token," ").trim()),o}decode_chain(e){return[this.convert_tokens_to_string(e)]}}class DecoderSequence extends Decoder{constructor(e){super(e),this.decoders=e.decoders.map(n=>Decoder.fromConfig(n))}decode_chain(e){return this.decoders.reduce((n,i)=>i.decode_chain(n),e)}}class BPEDecoder extends Decoder{constructor(e){super(e),this.suffix=this.config.suffix}decode_chain(e){return e.map((n,i)=>n.replaceAll(this.suffix,i===e.length-1?"":" "))}}class VitsDecoder extends Decoder{decode_chain(e){let n="";for(let i=1;i<e.length;i+=2)n+=e[i];return[n]}}class MetaspacePreTokenizer extends PreTokenizer{constructor(e){super(),this.addPrefixSpace=e.add_prefix_space,this.replacement=e.replacement,this.strRep=e.str_rep||this.replacement,this.prepend_scheme=e.prepend_scheme??"always"}pre_tokenize_text(e,{section_index:n=void 0}={}){let i=e.replaceAll(" ",this.strRep);return this.addPrefixSpace&&!i.startsWith(this.replacement)&&(this.prepend_scheme==="always"||this.prepend_scheme==="first"&&n===0)&&(i=this.strRep+i),[i]}}class MetaspaceDecoder extends Decoder{constructor(e){super(e),this.addPrefixSpace=e.add_prefix_space,this.replacement=e.replacement}decode_chain(e){const n=[];for(let i=0;i<e.length;++i){let o=e[i].replaceAll(this.replacement," ");this.addPrefixSpace&&i==0&&o.startsWith(" ")&&(o=o.substring(1)),n.push(o)}return n}}class Precompiled extends Normalizer{constructor(e){super(e),this.charsmap=e.precompiled_charsmap}normalize(e){return e=e.replace(/[\u0001-\u0008\u000B\u000E-\u001F\u007F\u008F\u009F]/gm,""),e=e.replace(/[\u0009\u000A\u000C\u000D\u1680\u200B\u200C\u200E\u200F\u2028\u2029\u2581\uFEFF\uFFFD]/gm," "),e.includes("")?e=e.split("").map(i=>i.normalize("NFKC")).join(""):e=e.normalize("NFKC"),e}}class PreTokenizerSequence extends PreTokenizer{constructor(e){super(),this.tokenizers=e.pretokenizers.map(n=>PreTokenizer.fromConfig(n))}pre_tokenize_text(e,n){return this.tokenizers.reduce((i,o)=>o.pre_tokenize(i,n),[e])}}class WhitespacePreTokenizer extends PreTokenizer{constructor(e){super()}pre_tokenize_text(e,n){return e.match(/\w+|[^\w\s]+/g)||[]}}class WhitespaceSplit extends PreTokenizer{constructor(e){super()}pre_tokenize_text(e,n){return whitespace_split(e)}}class ReplacePreTokenizer extends PreTokenizer{constructor(e){super(),this.config=e,this.pattern=createPattern(this.config.pattern),this.content=this.config.content}pre_tokenize_text(e,n){return this.pattern===null?[e]:[e.replaceAll(this.pattern,this.config.content)]}}const SPECIAL_TOKEN_ATTRIBUTES=["bos_token","eos_token","unk_token","sep_token","pad_token","cls_token","mask_token"];function padHelper(t,e,n,i){for(const o of Object.keys(t)){const u=e-t[o].length,d=n(o),h=new Array(u).fill(d);t[o]=i==="right"?mergeArrays(t[o],h):mergeArrays(h,t[o])}}function truncateHelper(t,e){for(const n of Object.keys(t))t[n].length=e}class PreTrainedTokenizer extends Callable{return_token_type_ids=!1;_default_chat_template=`{% for message in messages %}{{'<|im_start|>' + message['role'] + '
' + message['content'] + '<|im_end|>' + '
'}}{% endfor %}{% if add_generation_prompt %}{{ '<|im_start|>assistant
' }}{% endif %}`;constructor(e,n){super(),this._tokenizer_config=n,this.normalizer=Normalizer.fromConfig(e.normalizer),this.pre_tokenizer=PreTokenizer.fromConfig(e.pre_tokenizer),this.model=TokenizerModel.fromConfig(e.model,n),this.post_processor=PostProcessor.fromConfig(e.post_processor),this.decoder=Decoder.fromConfig(e.decoder),this.special_tokens=[],this.all_special_ids=[],this.added_tokens=[];for(const i of e.added_tokens){const o=new AddedToken(i);this.added_tokens.push(o),this.model.tokens_to_ids.set(o.content,o.id),this.model.vocab[o.id]=o.content,o.special&&(this.special_tokens.push(o.content),this.all_special_ids.push(o.id))}if(this.additional_special_tokens=n.additional_special_tokens??[],this.special_tokens.push(...this.additional_special_tokens),this.special_tokens=[...new Set(this.special_tokens)],this.decoder&&(this.decoder.added_tokens=this.added_tokens,this.decoder.end_of_word_suffix=this.model.end_of_word_suffix),this.added_tokens_regex=this.added_tokens.length>0?new RegExp(this.added_tokens.map(i=>`${i.lstrip?"\\s*":""}(${escapeRegExp(i.content)})${i.rstrip?"\\s*":""}`).join("|")):null,this.mask_token=this.getToken("mask_token"),this.mask_token_id=this.model.tokens_to_ids.get(this.mask_token),this.pad_token=this.getToken("pad_token","eos_token"),this.pad_token_id=this.model.tokens_to_ids.get(this.pad_token),this.sep_token=this.getToken("sep_token"),this.sep_token_id=this.model.tokens_to_ids.get(this.sep_token),this.unk_token=this.getToken("unk_token"),this.unk_token_id=this.model.tokens_to_ids.get(this.unk_token),this.model_max_length=n.model_max_length,this.remove_space=n.remove_space,this.clean_up_tokenization_spaces=n.clean_up_tokenization_spaces??!0,this.do_lowercase_and_remove_accent=n.do_lowercase_and_remove_accent??!1,this.padding_side="right",this.legacy=!1,this.chat_template=n.chat_template??null,Array.isArray(this.chat_template)){const i=Object.create(null);for(const{name:o,template:u}of this.chat_template){if(typeof o!="string"||typeof u!="string")throw new Error('Chat template must be a list of objects with "name" and "template" properties');i[o]=u}this.chat_template=i}this._compiled_template_cache=new Map}getToken(...e){for(const n of e){const i=this._tokenizer_config[n];if(i)if(typeof i=="object"){if(i.__type==="AddedToken")return i.content;throw Error(`Unknown token: ${i}`)}else return i}return null}static async from_pretrained(e,{progress_callback:n=null,config:i=null,cache_dir:o=null,local_files_only:u=!1,revision:d="main",legacy:h=null}={}){const m=await loadTokenizer(e,{progress_callback:n,cache_dir:o,local_files_only:u,revision:d,legacy:h});return new this(...m)}_call(e,{text_pair:n=null,add_special_tokens:i=!0,padding:o=!1,truncation:u=null,max_length:d=null,return_tensor:h=!0,return_token_type_ids:m=null}={}){const p=Array.isArray(e);let _;if(p){if(e.length===0)throw Error("text array must be non-empty");if(n!==null){if(Array.isArray(n)){if(e.length!==n.length)throw Error("text and text_pair must have the same length")}else throw Error("text_pair must also be an array");_=e.map((l,g)=>this._encode_plus(l,n[g],{add_special_tokens:i,return_token_type_ids:m}))}else _=e.map(l=>this._encode_plus(l,null,{add_special_tokens:i,return_token_type_ids:m}))}else{if(e==null)throw Error("text may not be null or undefined");if(Array.isArray(n))throw Error("When specifying `text_pair`, since `text` is a string, `text_pair` must also be a string (i.e., not an array).");_=[this._encode_plus(e,n,{add_special_tokens:i,return_token_type_ids:m})]}if(d===null?o==="max_length"?d=this.model_max_length:d=max(_.map(l=>l.input_ids.length))[0]:u||console.warn("Truncation was not explicitly activated but `max_length` is provided a specific value, please use `truncation=true` to explicitly truncate examples to max length."),d=Math.min(d,this.model_max_length),o||u)for(let l=0;l<_.length;++l)_[l].input_ids.length!==d&&(_[l].input_ids.length>d?u&&truncateHelper(_[l],d):o&&padHelper(_[l],d,g=>g==="input_ids"?this.pad_token_id:0,this.padding_side));const f={};if(h){if(!(o&&u)&&_.some(g=>{for(const v of Object.keys(g))if(g[v].length!==_[0][v]?.length)return!0;return!1}))throw Error("Unable to create tensor, you should probably activate truncation and/or padding with 'padding=true' and 'truncation=true' to have batched tensors with the same length.");const l=[_.length,_[0].input_ids.length];for(const g of Object.keys(_[0]))f[g]=new Tensor("int64",BigInt64Array.from(_.flatMap(v=>v[g]).map(BigInt)),l)}else{for(const l of Object.keys(_[0]))f[l]=_.map(g=>g[l]);if(!p)for(const l of Object.keys(f))f[l]=f[l][0]}return f}_encode_text(e){return e===null?null:(this.added_tokens_regex?e.split(this.added_tokens_regex).filter(o=>o):[e]).map((o,u)=>{if(this.added_tokens.find(h=>h.content===o)!==void 0)return o;{if(this.remove_space===!0&&(o=o.trim().split(/\s+/).join(" ")),this.do_lowercase_and_remove_accent&&(o=lowercase_and_remove_accent(o)),this.normalizer!==null&&(o=this.normalizer(o)),o.length===0)return[];const h=this.pre_tokenizer!==null?this.pre_tokenizer(o,{section_index:u}):[o];return this.model(h)}}).flat()}_encode_plus(e,n=null,{add_special_tokens:i=!0,return_token_type_ids:o=null}={}){const u=this._encode_text(e),d=this._encode_text(n),h=this.post_processor?this.post_processor(u,d,{add_special_tokens:i}):{tokens:mergeArrays(u??[],d??[])},m=this.model.convert_tokens_to_ids(h.tokens),p={input_ids:m,attention_mask:new Array(m.length).fill(1)};return(o??this.return_token_type_ids)&&h.token_type_ids&&(p.token_type_ids=h.token_type_ids),p}encode(e,n=null,{add_special_tokens:i=!0,return_token_type_ids:o=null}={}){const{input_ids:u}=this._encode_plus(e,n,{add_special_tokens:i,return_token_type_ids:o});return u}batch_decode(e,n={}){return e instanceof Tensor&&(e=e.tolist()),e.map(i=>this.decode(i,n))}decode(e,n={}){if(e instanceof Tensor&&(e=prepareTensorForDecode(e)),!Array.isArray(e)||e.length===0||!isIntegralNumber(e[0]))throw Error("token_ids must be a non-empty array of integers.");return this.decode_single(e,n)}decode_single(e,{skip_special_tokens:n=!1,clean_up_tokenization_spaces:i=null}){let o=this.model.convert_ids_to_tokens(e);n&&(o=o.filter(d=>!this.special_tokens.includes(d)));let u=this.decoder?this.decoder(o):o.join(" ");return this.decoder&&this.decoder.end_of_word_suffix&&(u=u.replaceAll(this.decoder.end_of_word_suffix," "),n&&(u=u.trim())),(i??this.clean_up_tokenization_spaces)&&(u=clean_up_tokenization(u)),u}get default_chat_template(){return this._warned_about_chat_template||(console.warn("No chat template is defined for this tokenizer - using a default chat template that implements the ChatML format. If the default is not appropriate for your model, please set `tokenizer.chat_template` to an appropriate template. See https://huggingface.co/docs/transformers/main/chat_templating for more information."),this._warned_about_chat_template=!0),this._default_chat_template}apply_chat_template(e,{chat_template:n=null,add_generation_prompt:i=!1,tokenize:o=!0,padding:u=!1,truncation:d=!1,max_length:h=null,return_tensor:m=!0,tokenizer_kwargs:p={},..._}={}){if(this.chat_template&&typeof this.chat_template=="object"||this.chat_template===null&&this.default_chat_template&&typeof this.default_chat_template=="object"){const v=this.chat_template??this.default_chat_template;if(n!==null&&Object.hasOwn(v,n))n=v[n];else if(n===null&&"default"in v)n=v.default;else if(n===null)throw Error(`This model has multiple chat templates with no default specified! Please either pass a chat template or the name of the template you wish to use to the 'chat_template' argument. Available template names are ${Object.keys(v).sort()}.`)}else n??=this.chat_template??this.default_chat_template;if(typeof n!="string")throw Error(`chat_template must be a string, but got ${typeof n}`);let f=this._compiled_template_cache.get(n);f===void 0&&(f=new Template(n),this._compiled_template_cache.set(n,f));const l=Object.create(null);for(const v of SPECIAL_TOKEN_ATTRIBUTES){const S=this.getToken(v);S&&(l[v]=S)}const g=f.render({messages:e,add_generation_prompt:i,...l,..._});return o?this._call(g,{add_special_tokens:!1,padding:u,truncation:d,max_length:h,return_tensor:m,...p}).input_ids:g}}class BertTokenizer extends PreTrainedTokenizer{return_token_type_ids=!0}class AlbertTokenizer extends PreTrainedTokenizer{return_token_type_ids=!0}class MobileBertTokenizer extends PreTrainedTokenizer{return_token_type_ids=!0}class SqueezeBertTokenizer extends PreTrainedTokenizer{return_token_type_ids=!0}class DebertaTokenizer extends PreTrainedTokenizer{return_token_type_ids=!0}class DebertaV2Tokenizer extends PreTrainedTokenizer{return_token_type_ids=!0}class HerbertTokenizer extends PreTrainedTokenizer{return_token_type_ids=!0}class ConvBertTokenizer extends PreTrainedTokenizer{return_token_type_ids=!0}class RoFormerTokenizer extends PreTrainedTokenizer{return_token_type_ids=!0}class DistilBertTokenizer extends PreTrainedTokenizer{}class CamembertTokenizer extends PreTrainedTokenizer{}class XLMTokenizer extends PreTrainedTokenizer{return_token_type_ids=!0;constructor(e,n){super(e,n),console.warn('WARNING: `XLMTokenizer` is not yet supported by Hugging Face\'s "fast" tokenizers library. Therefore, you may experience slightly inaccurate results.')}}class ElectraTokenizer extends PreTrainedTokenizer{return_token_type_ids=!0}class T5Tokenizer extends PreTrainedTokenizer{}class GPT2Tokenizer extends PreTrainedTokenizer{_default_chat_template='{% for message in messages %}" "{{ message.content }}{{ eos_token }}" "{% endfor %}'}class BartTokenizer extends PreTrainedTokenizer{}class MBartTokenizer extends PreTrainedTokenizer{constructor(e,n){super(e,n),this.languageRegex=/^[a-z]{2}_[A-Z]{2}$/,this.language_codes=this.special_tokens.filter(i=>this.languageRegex.test(i)),this.lang_to_token=i=>i}_build_translation_inputs(e,n,i){return _build_translation_inputs(this,e,n,i)}}class MBart50Tokenizer extends MBartTokenizer{}class RobertaTokenizer extends PreTrainedTokenizer{}class BloomTokenizer extends GPT2Tokenizer{constructor(e,n){const i=".,!?",o=e.pre_tokenizer?.pretokenizers[0]?.pattern;o&&o.Regex===` ?[^(\\s|[${i}])]+`&&(o.Regex=` ?[^\\s${i}]+`),super(e,n)}}const SPIECE_UNDERLINE="";class LlamaTokenizer extends PreTrainedTokenizer{_default_chat_template=`{% if messages[0]['role'] == 'system' %}{% set loop_messages = messages[1:] %}{% set system_message = messages[0]['content'] %}{% elif USE_DEFAULT_PROMPT == true and not '<<SYS>>' in messages[0]['content'] %}{% set loop_messages = messages %}{% set system_message = 'DEFAULT_SYSTEM_MESSAGE' %}{% else %}{% set loop_messages = messages %}{% set system_message = false %}{% endif %}{% for message in loop_messages %}{% if (message['role'] == 'user') != (loop.index0 % 2 == 0) %}{{ raise_exception('Conversation roles must alternate user/assistant/user/assistant/...') }}{% endif %}{% if loop.index0 == 0 and system_message != false %}{% set content = '<<SYS>>
' + system_message + '
<</SYS>>

' + message['content'] %}{% else %}{% set content = message['content'] %}{% endif %}{% if message['role'] == 'user' %}{{ bos_token + '[INST] ' + content.strip() + ' [/INST]' }}{% elif message['role'] == 'system' %}{{ '<<SYS>>
' + content.strip() + '
<</SYS>>

' }}{% elif message['role'] == 'assistant' %}{{ ' '  + content.strip() + ' ' + eos_token }}{% endif %}{% endfor %}`;DEFAULT_SYSTEM_PROMPT=`You are a helpful, respectful and honest assistant. Always answer as helpfully as possible, while being safe. Your answers should not include any harmful, unethical, racist, sexist, toxic, dangerous, or illegal content. Please ensure that your responses are socially unbiased and positive in nature.

If a question does not make any sense, or is not factually coherent, explain why instead of answering something not correct. If you don't know the answer to a question, please don't share false information.`;constructor(e,n){super(e,n),this.use_default_system_prompt=n.use_default_system_prompt??!1,this.legacy=n.legacy??!0,this.legacy||(this.normalizer=null,this.pre_tokenizer=new MetaspacePreTokenizer({replacement:SPIECE_UNDERLINE,add_prefix_space:!0,prepend_scheme:"first"}))}_encode_text(e){if(e===null)return null;if(this.legacy||e.length===0)return super._encode_text(e);let n=super._encode_text(SPIECE_UNDERLINE+e.replaceAll(SPIECE_UNDERLINE," "));return n.length>1&&n[0]===SPIECE_UNDERLINE&&this.special_tokens.includes(n[1])&&(n=n.slice(1)),n}get default_chat_template(){return super.default_chat_template.replaceAll("USE_DEFAULT_PROMPT",this.use_default_system_prompt?"true":"false").replaceAll("DEFAULT_SYSTEM_MESSAGE",this.DEFAULT_SYSTEM_PROMPT.replaceAll(`
`,"\\n").replaceAll("'","\\'"))}}class CodeLlamaTokenizer extends LlamaTokenizer{}class XLMRobertaTokenizer extends PreTrainedTokenizer{}class MPNetTokenizer extends PreTrainedTokenizer{}class FalconTokenizer extends PreTrainedTokenizer{}class GPTNeoXTokenizer extends PreTrainedTokenizer{}class EsmTokenizer extends PreTrainedTokenizer{}class Qwen2Tokenizer extends PreTrainedTokenizer{}class GemmaTokenizer extends PreTrainedTokenizer{_default_chat_template=`{% if messages[0]['role'] == 'system' %}{{ raise_exception('System role not supported') }}{% endif %}{% for message in messages %}{% if (message['role'] == 'user') != (loop.index0 % 2 == 0) %}{{ raise_exception('Conversation roles must alternate user/assistant/user/assistant/...') }}{% endif %}{% if (message['role'] == 'assistant') %}{% set role = 'model' %}{% else %}{% set role = message['role'] %}{% endif %}{{ '<start_of_turn>' + role + '
' + message['content'] | trim + '<end_of_turn>
' }}{% endfor %}{% if add_generation_prompt %}{{'<start_of_turn>model
'}}{% endif %}`}class Grok1Tokenizer extends PreTrainedTokenizer{}function _build_translation_inputs(t,e,n,i){if(!("language_codes"in t)||!Array.isArray(t.language_codes))throw new Error("Tokenizer must have `language_codes` attribute set and it should be an array of language ids.");if(!("languageRegex"in t)||!(t.languageRegex instanceof RegExp))throw new Error("Tokenizer must have `languageRegex` attribute set and it should be a regular expression.");if(!("lang_to_token"in t)||typeof t.lang_to_token!="function")throw new Error("Tokenizer must have `lang_to_token` attribute set and it should be a function.");const o=i.src_lang,u=i.tgt_lang;if(!t.language_codes.includes(u))throw new Error(`Target language code "${u}" is not valid. Must be one of: {${t.language_codes.join(", ")}}`);if(o!==void 0){if(!t.language_codes.includes(o))throw new Error(`Source language code "${o}" is not valid. Must be one of: {${t.language_codes.join(", ")}}`);for(const d of t.post_processor.config.single)if("SpecialToken"in d&&t.languageRegex.test(d.SpecialToken.id)){d.SpecialToken.id=t.lang_to_token(o);break}}return i.forced_bos_token_id=t.model.convert_tokens_to_ids([t.lang_to_token(u)])[0],t._call(e,n)}class NllbTokenizer extends PreTrainedTokenizer{constructor(e,n){super(e,n),this.languageRegex=/^[a-z]{3}_[A-Z][a-z]{3}$/,this.language_codes=this.special_tokens.filter(i=>this.languageRegex.test(i)),this.lang_to_token=i=>i}_build_translation_inputs(e,n,i){return _build_translation_inputs(this,e,n,i)}}class M2M100Tokenizer extends PreTrainedTokenizer{constructor(e,n){super(e,n),this.languageRegex=/^__[a-z]{2,3}__$/,this.language_codes=this.special_tokens.filter(i=>this.languageRegex.test(i)).map(i=>i.slice(2,-2)),this.lang_to_token=i=>`__${i}__`}_build_translation_inputs(e,n,i){return _build_translation_inputs(this,e,n,i)}}const WHISPER_LANGUAGES=[["en","english"],["zh","chinese"],["de","german"],["es","spanish"],["ru","russian"],["ko","korean"],["fr","french"],["ja","japanese"],["pt","portuguese"],["tr","turkish"],["pl","polish"],["ca","catalan"],["nl","dutch"],["ar","arabic"],["sv","swedish"],["it","italian"],["id","indonesian"],["hi","hindi"],["fi","finnish"],["vi","vietnamese"],["he","hebrew"],["uk","ukrainian"],["el","greek"],["ms","malay"],["cs","czech"],["ro","romanian"],["da","danish"],["hu","hungarian"],["ta","tamil"],["no","norwegian"],["th","thai"],["ur","urdu"],["hr","croatian"],["bg","bulgarian"],["lt","lithuanian"],["la","latin"],["mi","maori"],["ml","malayalam"],["cy","welsh"],["sk","slovak"],["te","telugu"],["fa","persian"],["lv","latvian"],["bn","bengali"],["sr","serbian"],["az","azerbaijani"],["sl","slovenian"],["kn","kannada"],["et","estonian"],["mk","macedonian"],["br","breton"],["eu","basque"],["is","icelandic"],["hy","armenian"],["ne","nepali"],["mn","mongolian"],["bs","bosnian"],["kk","kazakh"],["sq","albanian"],["sw","swahili"],["gl","galician"],["mr","marathi"],["pa","punjabi"],["si","sinhala"],["km","khmer"],["sn","shona"],["yo","yoruba"],["so","somali"],["af","afrikaans"],["oc","occitan"],["ka","georgian"],["be","belarusian"],["tg","tajik"],["sd","sindhi"],["gu","gujarati"],["am","amharic"],["yi","yiddish"],["lo","lao"],["uz","uzbek"],["fo","faroese"],["ht","haitian creole"],["ps","pashto"],["tk","turkmen"],["nn","nynorsk"],["mt","maltese"],["sa","sanskrit"],["lb","luxembourgish"],["my","myanmar"],["bo","tibetan"],["tl","tagalog"],["mg","malagasy"],["as","assamese"],["tt","tatar"],["haw","hawaiian"],["ln","lingala"],["ha","hausa"],["ba","bashkir"],["jw","javanese"],["su","sundanese"]],WHISPER_LANGUAGE_MAPPING=new Map(WHISPER_LANGUAGES),WHISPER_TO_LANGUAGE_CODE_MAPPING=new Map([...WHISPER_LANGUAGES.map(([t,e])=>[e,t]),["burmese","my"],["valencian","ca"],["flemish","nl"],["haitian","ht"],["letzeburgesch","lb"],["pushto","ps"],["panjabi","pa"],["moldavian","ro"],["moldovan","ro"],["sinhalese","si"],["castilian","es"]]);class WhisperTokenizer extends PreTrainedTokenizer{_default_chat_template='{% for message in messages %}" "{{ message.content }}{{ eos_token }}" "{% endfor %}';_decode_asr(e,{return_timestamps:n=!1,return_language:i=!1,time_precision:o=null,force_full_sequences:u=!0}={}){if(o===null)throw Error("Must specify time_precision");let d=null;const h=n==="word";function m(){return{language:d,timestamp:[null,null],text:""}}const p=[];let _=m(),f=0;const l=this.model.convert_tokens_to_ids(["<|notimestamps|>"])[0]+1;let g=[],v=[],S=!1,T=null;const E=new Set(this.all_special_ids);for(const M of e){const C=M.tokens,j=h?M.token_timestamps:null;let $=null,L=l;if("stride"in M){const[U,H,Y]=M.stride;if(f-=H,T=U-Y,H&&(L=H/o+l),Y)for(let K=C.length-1;K>=0;--K){const z=C[K];if(z>=l){if($!==null&&(z-l)*o<T)break;$=z}}}let N=[],B=[];for(let U=0;U<C.length;++U){const H=C[U];if(E.has(H)){const Y=this.decode([H]),K=WHISPER_LANGUAGE_MAPPING.get(Y.slice(2,-2));if(K!==void 0){if(d!==null&&K!==d&&!n){g.push(N);const z=this.findLongestCommonSequence(g)[0],V=this.decode(z);_.text=V,p.push(_),g=[],N=[],_=m()}d=_.language=K}}else if(H>=l){const Y=(H-l)*o+f,K=round(Y,2);if($!==null&&H>=$)S=!0;else if(S||g.length>0&&H<L)S=!1;else if(_.timestamp[0]===null)_.timestamp[0]=K;else if(K!==_.timestamp[0]){_.timestamp[1]=K,g.push(N),h&&v.push(B);const[z,V]=this.findLongestCommonSequence(g,v),G=this.decode(z);_.text=G,h&&(_.words=this.collateWordTimestamps(z,V,d)),p.push(_),g=[],N=[],v=[],B=[],_=m()}}else if(N.push(H),h){let Y=round(j[U]+f,2),K;U+1<j.length?K=round(j[U+1]+f,2):K=null,B.push([Y,K])}}if("stride"in M){const[U,H,Y]=M.stride;f+=U-Y}N.length>0?(g.push(N),h&&v.push(B)):g.every(U=>U.length===0)&&(_=m(),g=[],N=[],v=[],B=[])}if(g.length>0){if(u&&n)throw new Error("Whisper did not predict an ending timestamp, which can happen if audio is cut off in the middle of a word. Also make sure WhisperTimeStampLogitsProcessor was used during generation.");const[M,C]=this.findLongestCommonSequence(g,v),j=this.decode(M);_.text=j,h&&(_.words=this.collateWordTimestamps(M,C,d)),p.push(_)}let O=Object.create(null);const R=p.map(M=>M.text).join("");if(n||i){for(let M=0;M<p.length;++M){const C=p[M];n||delete C.timestamp,i||delete C.language}if(h){const M=[];for(const C of p)for(const j of C.words)M.push(j);O={chunks:M}}else O={chunks:p}}return[R,O]}findLongestCommonSequence(e,n=null){let i=e[0],o=i.length,u=[];const d=Array.isArray(n)&&n.length>0;let h=d?[]:null,m=d?n[0]:null;for(let p=1;p<e.length;++p){const _=e[p];let f=0,l=[o,o,0,0];const g=_.length;for(let M=1;M<o+g;++M){const C=M/1e4,j=Math.max(0,o-M),$=Math.min(o,o+g-M),L=i.slice(j,$),N=Math.max(0,M-o),B=Math.min(g,M),U=_.slice(N,B);if(L.length!==U.length)throw new Error("There is a bug within whisper `decode_asr` function, please report it. Dropping to prevent bad inference.");const H=L.filter((K,z)=>K===U[z]).length,Y=H/M+C;H>1&&Y>f&&(f=Y,l=[j,$,N,B])}const[v,S,T,E]=l,O=Math.floor((S+v)/2),R=Math.floor((E+T)/2);u.push(...i.slice(0,O)),i=_.slice(R),o=i.length,d&&(h.push(...m.slice(0,O)),m=n[p].slice(R))}return u.push(...i),d?(h.push(...m),[u,h]):[u,[]]}collateWordTimestamps(e,n,i){const[o,u,d]=this.combineTokensIntoWords(e,i),h=[];for(let m=0;m<o.length;++m){const p=d[m];h.push({text:o[m],timestamp:[n[p.at(0)][0],n[p.at(-1)][1]]})}return h}combineTokensIntoWords(e,n,i=`"'([{-`,o=`"'.,!?:)]}`){n=n??"english";let u,d,h;return["chinese","japanese","thai","lao","myanmar"].includes(n)?[u,d,h]=this.splitTokensOnUnicode(e):[u,d,h]=this.splitTokensOnSpaces(e),this.mergePunctuations(u,d,h,i,o)}decode(e,n){let i;return n&&n.decode_with_timestamps?(e instanceof Tensor&&(e=prepareTensorForDecode(e)),i=this.decodeWithTimestamps(e,n)):i=super.decode(e,n),i}decodeWithTimestamps(e,n){const i=n?.time_precision??.02,o=Array.from(this.all_special_ids).at(-1)+1;let u=[[]];for(const d of e)if(d>=o){const h=round((d-o)*i,2);u.push(`<|${h}|>`),u.push([])}else u[u.length-1].push(d);return u=u.map(d=>typeof d=="string"?d:super.decode(d,n)),u.join("")}splitTokensOnUnicode(e){const n=this.decode(e,{decode_with_timestamps:!0}),i="",o=[],u=[],d=[];let h=[],m=[],p=0;for(let _=0;_<e.length;++_){const f=e[_];h.push(f),m.push(_);const l=this.decode(h,{decode_with_timestamps:!0});(!l.includes(i)||n[p+l.indexOf(i)]===i)&&(o.push(l),u.push(h),d.push(m),h=[],m=[],p+=l.length)}return[o,u,d]}splitTokensOnSpaces(e){const[n,i,o]=this.splitTokensOnUnicode(e),u=[],d=[],h=[],m=new RegExp(`^[${PUNCTUATION_REGEX}]$`,"gu");for(let p=0;p<n.length;++p){const _=n[p],f=i[p],l=o[p],g=f[0]>=this.model.tokens_to_ids.get("<|endoftext|>"),v=_.startsWith(" "),S=_.trim(),T=m.test(S);if(g||v||T||u.length===0)u.push(_),d.push(f),h.push(l);else{const E=u.length-1;u[E]+=_,d[E].push(...f),h[E].push(...l)}}return[u,d,h]}mergePunctuations(e,n,i,o,u){const d=structuredClone(e),h=structuredClone(n),m=structuredClone(i);let p=d.length-2,_=d.length-1;for(;p>=0;)d[p].startsWith(" ")&&o.includes(d[p].trim())?(d[_]=d[p]+d[_],h[_]=mergeArrays(h[p],h[_]),m[_]=mergeArrays(m[p],m[_]),d[p]="",h[p]=[],m[p]=[]):_=p,--p;for(p=0,_=1;_<d.length;)!d[p].endsWith(" ")&&u.includes(d[_])?(d[p]+=d[_],h[p]=mergeArrays(h[p],h[_]),m[p]=mergeArrays(m[p],m[_]),d[_]="",h[_]=[],m[_]=[]):p=_,++_;return[d.filter(f=>f),h.filter(f=>f.length>0),m.filter(f=>f.length>0)]}get_decoder_prompt_ids({language:e=null,task:n=null,no_timestamps:i=!0}={}){const o=[];if(e){e=e.toLowerCase();let u=WHISPER_TO_LANGUAGE_CODE_MAPPING.get(e);if(u===void 0)if(WHISPER_LANGUAGE_MAPPING.has(e))u=e;else{const m=e.length===2?WHISPER_LANGUAGE_MAPPING.keys():WHISPER_LANGUAGE_MAPPING.values();throw new Error(`Language "${e}" is not supported. Must be one of: ${JSON.stringify(m)}`)}const d=this.model.tokens_to_ids.get(`<|${u}|>`);if(d===void 0)throw new Error(`Unable to find language "${u}" in model vocabulary. Please report this issue at https://github.com/xenova/transformers.js/issues/new/choose.`);o.push(d)}else o.push(null);if(n){if(n=n.toLowerCase(),n!=="transcribe"&&n!=="translate")throw new Error(`Task "${n}" is not supported. Must be one of: ["transcribe", "translate"]`);const u=this.model.tokens_to_ids.get(`<|${n}|>`);if(u===void 0)throw new Error(`Unable to find task "${n}" in model vocabulary. Please report this issue at https://github.com/xenova/transformers.js/issues/new/choose.`);o.push(u)}else o.push(null);if(i){const u=this.model.tokens_to_ids.get("<|notimestamps|>");if(u===void 0)throw new Error('Unable to find "<|notimestamps|>" in model vocabulary. Please report this issue at https://github.com/xenova/transformers.js/issues/new/choose.');o.push(u)}return o.map((u,d)=>[d+1,u]).filter(u=>u[1]!==null)}}class CodeGenTokenizer extends PreTrainedTokenizer{}class CLIPTokenizer extends PreTrainedTokenizer{}class SiglipTokenizer extends PreTrainedTokenizer{}class MarianTokenizer extends PreTrainedTokenizer{constructor(e,n){super(e,n),this.languageRegex=/^(>>\w+<<)\s*/g,this.supported_language_codes=this.model.vocab.filter(i=>this.languageRegex.test(i)),console.warn('WARNING: `MarianTokenizer` is not yet supported by Hugging Face\'s "fast" tokenizers library. Therefore, you may experience slightly inaccurate results.')}_encode_text(e){if(e===null)return null;const[n,...i]=e.trim().split(this.languageRegex);if(i.length===0)return super._encode_text(n);if(i.length===2){const[o,u]=i;return this.supported_language_codes.includes(o)||console.warn(`Unsupported language code "${o}" detected, which may lead to unexpected behavior. Should be one of: ${JSON.stringify(this.supported_language_codes)}`),mergeArrays([o],super._encode_text(u))}}}class Wav2Vec2CTCTokenizer extends PreTrainedTokenizer{}class BlenderbotTokenizer extends PreTrainedTokenizer{_default_chat_template="{% for message in messages %}{% if message['role'] == 'user' %}{{ ' ' }}{% endif %}{{ message['content'] }}{% if not loop.last %}{{ '  ' }}{% endif %}{% endfor %}{{ eos_token }}"}class BlenderbotSmallTokenizer extends BlenderbotTokenizer{}class SpeechT5Tokenizer extends PreTrainedTokenizer{}class NougatTokenizer extends PreTrainedTokenizer{}class VitsTokenizer extends PreTrainedTokenizer{constructor(e,n){super(e,n),this.decoder=new VitsDecoder({})}}class CohereTokenizer extends PreTrainedTokenizer{}class AutoTokenizer{static TOKENIZER_CLASS_MAPPING={T5Tokenizer,DistilBertTokenizer,CamembertTokenizer,DebertaTokenizer,DebertaV2Tokenizer,BertTokenizer,HerbertTokenizer,ConvBertTokenizer,RoFormerTokenizer,XLMTokenizer,ElectraTokenizer,MobileBertTokenizer,SqueezeBertTokenizer,AlbertTokenizer,GPT2Tokenizer,BartTokenizer,MBartTokenizer,MBart50Tokenizer,RobertaTokenizer,WhisperTokenizer,CodeGenTokenizer,CLIPTokenizer,SiglipTokenizer,MarianTokenizer,BloomTokenizer,NllbTokenizer,M2M100Tokenizer,LlamaTokenizer,CodeLlamaTokenizer,XLMRobertaTokenizer,MPNetTokenizer,FalconTokenizer,GPTNeoXTokenizer,EsmTokenizer,Wav2Vec2CTCTokenizer,BlenderbotTokenizer,BlenderbotSmallTokenizer,SpeechT5Tokenizer,NougatTokenizer,VitsTokenizer,Qwen2Tokenizer,GemmaTokenizer,Grok1Tokenizer,CohereTokenizer,PreTrainedTokenizer};static async from_pretrained(e,{quantized:n=!0,progress_callback:i=null,config:o=null,cache_dir:u=null,local_files_only:d=!1,revision:h="main",legacy:m=null}={}){const[p,_]=await loadTokenizer(e,{progress_callback:i,cache_dir:u,local_files_only:d,revision:h,legacy:m}),f=_.tokenizer_class?.replace(/Fast$/,"")??"PreTrainedTokenizer";let l=this.TOKENIZER_CLASS_MAPPING[f];return l||(console.warn(`Unknown tokenizer class "${f}", attempting to construct from base class.`),l=PreTrainedTokenizer),new l(p,_)}}async function loadConfig(t,e){return await getModelJSON(t,"config.json",!0,e)}class PretrainedConfig{constructor(e){this.model_type=null,this.is_encoder_decoder=!1,Object.assign(this,e)}static async from_pretrained(e,{progress_callback:n=null,config:i=null,cache_dir:o=null,local_files_only:u=!1,revision:d="main"}={}){let h=i??await loadConfig(e,{progress_callback:n,cache_dir:o,local_files_only:u,revision:d});return new this(h)}}class AutoConfig{static async from_pretrained(...e){return PretrainedConfig.from_pretrained(...e)}}class LogitsProcessorList extends Callable{constructor(){super(),this.processors=[]}push(e){this.processors.push(e)}extend(e){this.processors.push(...e)}_call(e,n){for(let i of n)this.processors.forEach(o=>o(e,i))}[Symbol.iterator](){return this.processors.values()}}class LogitsProcessor extends Callable{_call(e,n){throw Error("`_call` should be implemented in a subclass")}}class ForceTokensLogitsProcessor extends LogitsProcessor{constructor(e){super(),this.force_token_map=Object.fromEntries(e??[])}_call(e,n){let i=this.force_token_map[e.length];return exists(i)&&(n.data.fill(-1/0),n.data[i]=0),n}}class ForcedBOSTokenLogitsProcessor extends LogitsProcessor{constructor(e){super(),this.bos_token_id=e}_call(e,n){return e.length===1&&(n.data.fill(-1/0),n.data[this.bos_token_id]=0),n}}class ForcedEOSTokenLogitsProcessor extends LogitsProcessor{constructor(e,n){super(),this.max_length=e,this.forced_eos_token_id=n}_call(e,n){}}class SuppressTokensAtBeginLogitsProcessor extends LogitsProcessor{constructor(e,n){super(),this.begin_suppress_tokens=e,this.begin_index=n}_call(e,n){if(e.length===this.begin_index)for(let i of this.begin_suppress_tokens)n.data[i]=-1/0;return n}}class WhisperTimeStampLogitsProcessor extends LogitsProcessor{constructor(e){super(),this.eos_token_id=e.eos_token_id,this.no_timestamps_token_id=e.no_timestamps_token_id,this.timestamp_begin=this.no_timestamps_token_id+1,this.begin_index=(e.forced_decoder_ids||[]).length+2,e.forced_decoder_ids.slice(-1)[0][1]===this.no_timestamps_token_id&&(this.begin_index-=1),this.max_initial_timestamp_index=e.max_initial_timestamp_index}_call(e,n){const i=n.data;if(i[this.no_timestamps_token_id]=-1/0,e.length===this.begin_index-1)return i.fill(-1/0),i[this.timestamp_begin]=0,n;const o=e.slice(this.begin_index),u=o.length>=1&&o[o.length-1]>=this.timestamp_begin,d=o.length<2||o[o.length-2]>=this.timestamp_begin;if(u&&(d?i.subarray(this.timestamp_begin).fill(-1/0):i.subarray(0,this.eos_token_id).fill(-1/0)),e.length===this.begin_index&&this.max_initial_timestamp_index!==null){const _=this.timestamp_begin+this.max_initial_timestamp_index;i.subarray(_+1).fill(-1/0)}const h=log_softmax(i),m=Math.log(h.subarray(this.timestamp_begin).map(Math.exp).reduce((_,f)=>_+f)),p=max(h.subarray(0,this.timestamp_begin))[0];return m>p&&i.subarray(0,this.timestamp_begin).fill(-1/0),n}}class NoRepeatNGramLogitsProcessor extends LogitsProcessor{constructor(e){super(),this.no_repeat_ngram_size=e}getNgrams(e){const n=e.length,i=[];for(let u=0;u<n+1-this.no_repeat_ngram_size;++u){const d=[];for(let h=0;h<this.no_repeat_ngram_size;++h)d.push(e[u+h]);i.push(d)}const o=new Map;for(const u of i){const d=u.slice(0,u.length-1),h=JSON.stringify(d),m=o.get(h)??[];m.push(u[u.length-1]),o.set(h,m)}return o}getGeneratedNgrams(e,n){const i=n.slice(n.length+1-this.no_repeat_ngram_size,n.length);return e.get(JSON.stringify(i))??[]}calcBannedNgramTokens(e){const n=[];if(e.length+1<this.no_repeat_ngram_size)return n;{const i=this.getNgrams(e);return this.getGeneratedNgrams(i,e)}}_call(e,n){const i=this.calcBannedNgramTokens(e);for(const o of i)n.data[o]=-1/0;return n}}class RepetitionPenaltyLogitsProcessor extends LogitsProcessor{constructor(e){super(),this.penalty=e}_call(e,n){for(const i of e)n.data[i]<0?n.data[i]*=this.penalty:n.data[i]/=this.penalty;return n}}class MinLengthLogitsProcessor extends LogitsProcessor{constructor(e,n){super(),this.min_length=e,this.eos_token_id=Array.isArray(n)?n:[n]}_call(e,n){if(e.length<this.min_length)for(const i of this.eos_token_id)n.data[i]=-1/0;return n}}class MinNewTokensLengthLogitsProcessor extends LogitsProcessor{constructor(e,n,i){super(),this.prompt_length_to_skip=e,this.min_new_tokens=n,this.eos_token_id=Array.isArray(i)?i:[i]}_call(e,n){if(e.length-this.prompt_length_to_skip<this.min_new_tokens)for(const o of this.eos_token_id)n.data[o]=-1/0;return n}}class NoBadWordsLogitsProcessor extends LogitsProcessor{constructor(e,n){super(),this.bad_words_ids=e,this.eos_token_id=Array.isArray(n)?n:[n]}_call(e,n){for(const i of this.bad_words_ids){let o=!0;for(let u=1;u<=i.length-1&&i.length<e.length;++u)if(i.at(-u-1)!==e.at(-u)){o=!1;break}o&&(n.data[i.at(-1)]=-1/0)}return n}}const GenerationConfig=class{constructor(t={}){this.max_length=t.max_length??20,this.max_new_tokens=t.max_new_tokens??null,this.min_length=t.min_length??0,this.min_new_tokens=t.min_new_tokens??null,this.early_stopping=t.early_stopping??!1,this.max_time=t.max_time??null,this.do_sample=t.do_sample??!1,this.num_beams=t.num_beams??1,this.num_beam_groups=t.num_beam_groups??1,this.penalty_alpha=t.penalty_alpha??null,this.use_cache=t.use_cache??!0,this.temperature=t.temperature??1,this.top_k=t.top_k??50,this.top_p=t.top_p??1,this.typical_p=t.typical_p??1,this.epsilon_cutoff=t.epsilon_cutoff??0,this.eta_cutoff=t.eta_cutoff??0,this.diversity_penalty=t.diversity_penalty??0,this.repetition_penalty=t.repetition_penalty??1,this.encoder_repetition_penalty=t.encoder_repetition_penalty??1,this.length_penalty=t.length_penalty??1,this.no_repeat_ngram_size=t.no_repeat_ngram_size??0,this.bad_words_ids=t.bad_words_ids??null,this.force_words_ids=t.force_words_ids??null,this.renormalize_logits=t.renormalize_logits??!1,this.constraints=t.constraints??null,this.forced_bos_token_id=t.forced_bos_token_id??null,this.forced_eos_token_id=t.forced_eos_token_id??null,this.remove_invalid_values=t.remove_invalid_values??!1,this.exponential_decay_length_penalty=t.exponential_decay_length_penalty??null,this.suppress_tokens=t.suppress_tokens??null,this.begin_suppress_tokens=t.begin_suppress_tokens??null,this.forced_decoder_ids=t.forced_decoder_ids??null,this.num_return_sequences=t.num_return_sequences??1,this.output_attentions=t.output_attentions??!1,this.output_hidden_states=t.output_hidden_states??!1,this.output_scores=t.output_scores??!1,this.return_dict_in_generate=t.return_dict_in_generate??!1,this.pad_token_id=t.pad_token_id??null,this.bos_token_id=t.bos_token_id??null,this.eos_token_id=t.eos_token_id??null,this.encoder_no_repeat_ngram_size=t.encoder_no_repeat_ngram_size??0,this.decoder_start_token_id=t.decoder_start_token_id??null,this.generation_kwargs=t.generation_kwargs??{}}};class Sampler extends Callable{constructor(e){super(),this.generation_config=e}_call(e,n=-1){return this.sample(e,n)}sample(e,n){throw Error("sample should be implemented in subclasses.")}getLogits(e,n){let i=e.dims.at(-1),o=e.data;if(n===-1)o=o.slice(-i);else{let u=n*i;o=o.slice(u,u+i)}return this.generation_config.temperature>0&&(o=o.map(u=>u/this.generation_config.temperature)),o}randomSelect(e){let n=e.reduce((o,u)=>o+u,0),i=Math.random()*n;for(let o=0;o<e.length;++o)if(i-=e[o],i<=0)return o;return 0}static getSampler(e){if(e.do_sample)return new MultinomialSampler(e);if(e.num_beams>1)return new BeamSearchSampler(e);if(e.num_return_sequences>1)throw Error(`num_return_sequences has to be 1 when doing greedy search, but is ${e.num_return_sequences}.`);return new GreedySampler(e)}}class GreedySampler extends Sampler{sample(e,n=-1){let i=this.getLogits(e,n);return[[max(i)[1],0]]}}class MultinomialSampler extends Sampler{sample(e,n=-1){let i=e.dims.at(-1);this.generation_config.top_k>0&&(i=Math.min(this.generation_config.top_k,i));const o=this.getLogits(e,n),u=getTopItems(o,i),d=softmax(u.map(h=>h[1]));return Array.from({length:this.generation_config.num_beams},()=>{const h=this.randomSelect(d);return[u[h][0],Math.log(d[h])]})}}class BeamSearchSampler extends Sampler{sample(e,n=-1){let i=e.dims.at(-1);this.generation_config.top_k>0&&(i=Math.min(this.generation_config.top_k,i));const o=this.getLogits(e,n),u=getTopItems(o,i),d=softmax(u.map(h=>h[1]));return Array.from({length:this.generation_config.num_beams},(h,m)=>[u[m][0],Math.log(d[m])])}}const{InferenceSession,Tensor:ONNXTensor,env}=ONNX,MODEL_TYPES={EncoderOnly:0,EncoderDecoder:1,Seq2Seq:2,Vision2Seq:3,DecoderOnly:4,MaskGeneration:5},MODEL_TYPE_MAPPING=new Map,MODEL_NAME_TO_CLASS_MAPPING=new Map,MODEL_CLASS_TO_NAME_MAPPING=new Map;async function constructSession(t,e,n){let i=`onnx/${e}${n.quantized?"_quantized":""}.onnx`,o=await getModelFile(t,i,!0,n);try{return await InferenceSession.create(o,{executionProviders})}catch(u){if(executionProviders.length===1&&executionProviders[0]==="wasm")throw u;return console.warn(u),console.warn("Something went wrong during model construction (most likely a missing operation). Using `wasm` as a fallback. "),await InferenceSession.create(o,{executionProviders:["wasm"]})}}function validateInputs(t,e){const n=Object.create(null),i=[];for(const d of t.inputNames){const h=e[d];if(!(h instanceof Tensor)){i.push(d);continue}n[d]=env.wasm.proxy?h.clone():h}if(i.length>0)throw new Error(`An error occurred during model execution: "Missing the following inputs: ${i.join(", ")}.`);const o=Object.keys(e).length,u=t.inputNames.length;if(o>u){let d=Object.keys(e).filter(h=>!t.inputNames.includes(h));console.warn(`WARNING: Too many inputs were provided (${o} > ${u}). The following inputs will be ignored: "${d.join(", ")}".`)}return n}async function sessionRun(t,e){const n=validateInputs(t,e);try{let i=await t.run(n);return i=replaceTensors(i),i}catch(i){throw console.error(`An error occurred during model execution: "${i}".`),console.error("Inputs given to model:",n),i}}function replaceTensors(t){for(let e in t)t[e]instanceof ONNXTensor?t[e]=new Tensor(t[e]):typeof t[e]=="object"&&replaceTensors(t[e]);return t}function toI64Tensor(t){if(t instanceof Tensor)return t;if(t.length===0)throw Error("items must be non-empty");if(Array.isArray(t[0])){if(t.some(e=>e.length!==t[0].length))throw Error("Unable to create tensor, you should probably activate truncation and/or padding with 'padding=True' and/or 'truncation=True' to have batched tensors with the same length.");return new Tensor("int64",BigInt64Array.from(t.flat().map(e=>BigInt(e))),[t.length,t[0].length])}else return new Tensor("int64",BigInt64Array.from(t.map(e=>BigInt(e))),[1,t.length])}function prepareAttentionMask(t,e){let n=t.config.pad_token_id??null,i=t.config.eos_token_id??null;isIntegralNumber(i)&&(i=[i]);let o=e.indexOf(n)!==-1,u=i===null||!i.includes(n);if(o&&u){let d=BigInt64Array.from(e.data.map(h=>h!=n));return new Tensor("int64",d,e.dims)}else return ones_like(e)}function preparePositionIds(t,e,n){if(!t.inputNames.includes("position_ids"))return;const i=new BigInt64Array(e.attention_mask.data.length);for(let o=0;o<e.attention_mask.dims[0];++o){let u=o*e.attention_mask.dims[1],d=BigInt(0);for(let h=0;h<e.attention_mask.dims[1];++h){const m=u+h;e.attention_mask.data[m]===0n?i[m]=BigInt(1):(i[m]=d,d+=e.attention_mask.data[m])}}e.position_ids=new Tensor("int64",i,e.attention_mask.dims),n&&(e.position_ids=e.position_ids.slice(null,-1).unsqueeze_(-1))}function boolTensor(t){return new Tensor("bool",[t],[1])}async function seq2seqForward(t,e){let{encoder_outputs:n,past_key_values:i}=e;n||(n=(await encoderForward(t,e)).last_hidden_state);let o={input_ids:e.decoder_input_ids,encoder_hidden_states:n};const u=!!i;t.decoder_merged_session.inputNames.includes("use_cache_branch")&&(o.use_cache_branch=boolTensor(u)),t.decoder_merged_session.inputNames.includes("encoder_attention_mask")&&(o.encoder_attention_mask=e.attention_mask),preparePositionIds(t.decoder_merged_session,o,u),t.addPastKeyValues(o,i);const d=await sessionRun(t.decoder_merged_session,o);let h=d.logits;i=t.getPastKeyValues(d,i);const m=t.getAttentions(d);return new Seq2SeqLMOutput({logits:h,past_key_values:i,encoder_outputs:n,...m})}function seq2seqStartBeams(t,e,n,i){let o=[],u=0;const d=t.requires_attention_mask??!0;let h=n.decoder_input_ids??n.decoder_start_token_id??n.bos_token_id??n.eos_token_id;h instanceof Tensor?h=h.tolist().flat():Array.isArray(h)||(h=[h]);for(let m of e){m.dims=[1,...m.dims];let p={inputs:m,encoder_outputs:null,prev_model_outputs:null,output_token_ids:h,done:!1,score:0,id:u++};d&&(p.attention_mask=prepareAttentionMask(t,m)),o.push(p)}return o}async function seq2seqRunBeam(t,e){const n=t.main_input_name;let i=e.output_token_ids;e.prev_model_outputs&&(i=i.slice(-1));let o={[n]:e.inputs,decoder_input_ids:toI64Tensor(i),encoder_outputs:e.encoder_outputs,past_key_values:e.prev_model_outputs?.past_key_values};e.attention_mask&&(o.attention_mask=e.attention_mask);let u=await t.forward(o);return e.prev_model_outputs=u,e.encoder_outputs=u.encoder_outputs,u}function seq2seqUpdatebeam(t,e){t.output_token_ids=[...t.output_token_ids,e]}async function encoderForward(t,e){const n=Object.create(null);for(const i of t.session.inputNames)n[i]=e[i];return t.session.inputNames.includes("token_type_ids")&&!n.token_type_ids&&(n.token_type_ids=new Tensor("int64",new BigInt64Array(n.input_ids.data.length),n.input_ids.dims)),await sessionRun(t.session,n)}async function decoderForward(t,e){let{input_ids:n,past_key_values:i,attention_mask:o}=e,u={input_ids:n,attention_mask:o??prepareAttentionMask(t,n)};const d=!!i;t.session.inputNames.includes("use_cache_branch")&&(u.use_cache_branch=boolTensor(d)),preparePositionIds(t.session,u,d),t.addPastKeyValues(u,i);let h=await sessionRun(t.session,u),m=h.logits;return i=t.getPastKeyValues(h,i),{logits:m,past_key_values:i}}function decoderStartBeams(t,e,n,i,o){let u=[],d=0;for(let h of e){let m=h.tolist().map(Number);h.dims=[1,...h.dims];let p;o?(p=o[d],p.dims=[1,...p.dims]):p=prepareAttentionMask(t,h);let _={input:h,model_input_ids:h,attention_mask:p,prev_model_outputs:null,output_token_ids:m,num_output_tokens:i,done:!1,score:0,id:d++};u.push(_)}return u}async function decoderRunBeam(t,e){let n=new BigInt64Array(e.output_token_ids.length).fill(1n),i={input_ids:e.model_input_ids,attention_mask:new Tensor("int64",n,[1,n.length]),past_key_values:e.prev_model_outputs?.past_key_values},o=await t.forward(i);return e.prev_model_outputs=o,o}function decoderUpdatebeam(t,e){t.output_token_ids=[...t.output_token_ids,e],t.model_input_ids=new Tensor("int64",[BigInt(e)],[1,1])}class PreTrainedModel extends Callable{main_input_name="input_ids";constructor(e,n){super(),this.config=e,this.session=n;const i=MODEL_CLASS_TO_NAME_MAPPING.get(this.constructor),o=MODEL_TYPE_MAPPING.get(i);this.can_generate=!1,this._runBeam=null,this._getStartBeams=null,this._updateBeam=null,this._forward=null,o===MODEL_TYPES.DecoderOnly?(this.can_generate=!0,this._runBeam=decoderRunBeam,this._getStartBeams=decoderStartBeams,this._updateBeam=decoderUpdatebeam,this._forward=decoderForward):o===MODEL_TYPES.Seq2Seq||o===MODEL_TYPES.Vision2Seq?(this.can_generate=!0,this._runBeam=seq2seqRunBeam,this._getStartBeams=seq2seqStartBeams,this._updateBeam=seq2seqUpdatebeam,this._forward=seq2seqForward):o===MODEL_TYPES.EncoderDecoder?this._forward=encoderForward:this._forward=encoderForward}async dispose(){const e=[];for(let n of Object.keys(this)){const i=this[n];i instanceof InferenceSession&&e.push(i.handler.dispose())}return await Promise.all(e)}static async from_pretrained(e,{quantized:n=!0,progress_callback:i=null,config:o=null,cache_dir:u=null,local_files_only:d=!1,revision:h="main",model_file_name:m=null}={}){let p={quantized:n,progress_callback:i,config:o,cache_dir:u,local_files_only:d,revision:h,model_file_name:m};const _=MODEL_CLASS_TO_NAME_MAPPING.get(this),f=MODEL_TYPE_MAPPING.get(_);let l;return f===MODEL_TYPES.DecoderOnly?l=await Promise.all([AutoConfig.from_pretrained(e,p),constructSession(e,p.model_file_name??"decoder_model_merged",p),getModelJSON(e,"generation_config.json",!1,p)]):f===MODEL_TYPES.Seq2Seq||f===MODEL_TYPES.Vision2Seq?l=await Promise.all([AutoConfig.from_pretrained(e,p),constructSession(e,"encoder_model",p),constructSession(e,"decoder_model_merged",p),getModelJSON(e,"generation_config.json",!1,p)]):f===MODEL_TYPES.MaskGeneration?l=await Promise.all([AutoConfig.from_pretrained(e,p),constructSession(e,"vision_encoder",p),constructSession(e,"prompt_encoder_mask_decoder",p)]):f===MODEL_TYPES.EncoderDecoder?l=await Promise.all([AutoConfig.from_pretrained(e,p),constructSession(e,"encoder_model",p),constructSession(e,"decoder_model_merged",p)]):(f!==MODEL_TYPES.EncoderOnly&&console.warn(`Model type for '${_??o?.model_type}' not found, assuming encoder-only architecture. Please report this at https://github.com/xenova/transformers.js/issues/new/choose.`),l=await Promise.all([AutoConfig.from_pretrained(e,p),constructSession(e,p.model_file_name??"model",p)])),new this(...l)}async _call(e){return await this.forward(e)}async forward(e){return await this._forward(this,e)}_get_logits_processor(e,n,i=null){const o=new LogitsProcessorList;if(e.repetition_penalty!==null&&e.repetition_penalty!==1&&o.push(new RepetitionPenaltyLogitsProcessor(e.repetition_penalty)),e.no_repeat_ngram_size!==null&&e.no_repeat_ngram_size>0&&o.push(new NoRepeatNGramLogitsProcessor(e.no_repeat_ngram_size)),e.bad_words_ids!==null&&o.push(new NoBadWordsLogitsProcessor(e.bad_words_ids,e.eos_token_id)),e.min_length!==null&&e.eos_token_id!==null&&e.min_length>0&&o.push(new MinLengthLogitsProcessor(e.min_length,e.eos_token_id)),e.min_new_tokens!==null&&e.eos_token_id!==null&&e.min_new_tokens>0&&o.push(new MinNewTokensLengthLogitsProcessor(n,e.min_new_tokens,e.eos_token_id)),e.forced_bos_token_id!==null&&o.push(new ForcedBOSTokenLogitsProcessor(e.forced_bos_token_id)),e.forced_eos_token_id!==null&&o.push(new ForcedEOSTokenLogitsProcessor(e.max_length,e.forced_eos_token_id)),e.begin_suppress_tokens!==null){let u=n>1||e.forced_bos_token_id===null?n:n+1;e.forced_decoder_ids!==null&&(u+=e.forced_decoder_ids[e.forced_decoder_ids.length-1][0]),o.push(new SuppressTokensAtBeginLogitsProcessor(e.begin_suppress_tokens,u))}return e.forced_decoder_ids!==null&&o.push(new ForceTokensLogitsProcessor(e.forced_decoder_ids)),i!==null&&o.extend(i),o}_get_generation_config(e){let n=new GenerationConfig(this.config);return"generation_config"in this&&Object.assign(n,this.generation_config),e!==null&&Object.assign(n,e),n}async generate(e,n=null,i=null,{inputs_attention_mask:o=null}={}){if(!this.can_generate){let T=`The current model class (${MODEL_CLASS_TO_NAME_MAPPING.get(this.constructor)}) is not compatible with \`.generate()\`, as it doesn't have a language model head.`;const E=this.config.model_type,O=MODEL_WITH_LM_HEAD_MAPPING_NAMES.get(E)??MODEL_FOR_SEQ_TO_SEQ_CAUSAL_LM_MAPPING_NAMES.get(E)??MODEL_FOR_SPEECH_SEQ_2_SEQ_MAPPING_NAMES.get(E)??MODEL_FOR_VISION_2_SEQ_MAPPING_NAMES.get(E);throw O&&(T+=` Please use the following class instead: '${O[0]}'`),Error(T)}if(!(e instanceof Tensor)&&!isTypedArray(e)&&!Array.isArray(e))throw Error(`\`inputs\` must be a Tensor, TypedArray, or Array, but is "${e.constructor.name}".`);let u;if(this.config.is_encoder_decoder)u=0;else if(u=e instanceof Tensor?e.dims.at(-1):e.length,u===0)throw Error("Must supply a non-empty array of input token ids.");n=this._get_generation_config(n),i=i??new LogitsProcessorList,i=this._get_logits_processor(n,u,i);let d=n.eos_token_id;d!==null&&!Array.isArray(d)&&(d=[d]);let h=1;const m=h+(n.max_new_tokens??1/0),p=Number.isInteger(n.max_length)&&(n.max_new_tokens??null)===null;let _=Sampler.getSampler(n),f=this.getStartBeams(e,n,h,o);for(;f.some(S=>!S.done)&&h<m;){let S=[];for(let T of f){if(T.done){S.push(T);continue}if(p&&T.output_token_ids.length>=n.max_length){T.done=!0,S.push(T);continue}let E=await this.runBeam(T);n.output_attentions&&this.addAttentionsToBeam(T,E),n.output_scores;let O=E.logits.slice(null,-1,null);i(T.output_token_ids,O);let R=_(O);for(let[M,C]of R){let j={...T};this.updateBeam(j,M),j.score+=C,d&&d.includes(M)&&(j.done=!0),S.push(j)}}++h,S=this.groupBeams(S).map(T=>T.sort((E,O)=>O.score-E.score).slice(0,n.num_beams)),f=S.flat(),n.callback_function&&n.callback_function(f)}const l=this.groupBeams(f),g=S=>l.map(T=>n.num_return_sequences>1?T.slice(0,n.num_return_sequences).map(E=>E[S]):[T[0][S]]).flat(),v=g("output_token_ids");if(n.return_dict_in_generate){const S=g("decoder_attentions"),T=g("cross_attentions");return{sequences:v,decoder_attentions:S,cross_attentions:T}}else return v}addAttentionsToBeam(e,n){if(this.config.is_encoder_decoder){if(!n.cross_attentions||n.cross_attentions.length===0)throw Error("`output_attentions` is true, but the model did not produce cross-attentions. This is most likely because the model was not exported with `output_attentions=True`.");e.cross_attentions||(e.cross_attentions=[]),e.cross_attentions.push(n.cross_attentions)}if(!n.decoder_attentions||n.decoder_attentions.length===0)throw Error("`output_attentions` is true, but the model did not produce decoder-attentions. This is most likely because the model was not exported with `output_attentions=True`.");e.decoder_attentions||(e.decoder_attentions=[]),e.decoder_attentions.push(n.decoder_attentions)}groupBeams(e){const n=Object.create(null);for(const i of e)n[i.id]===void 0?n[i.id]=[i]:n[i.id].push(i);return Object.values(n)}getPastKeyValues(e,n){const i=Object.create(null);for(const o in e)if(o.startsWith("present")){let u=o.replace("present","past_key_values");n&&o.includes("encoder")?i[u]=n[u]:i[u]=e[o]}return i}getAttentions(e){const n=Object.create(null);for(const i of["cross_attentions","decoder_attentions"]){const o=[];for(const u in e)if(u.startsWith(i)){const d=u.split(".").pop();o[d]=e[u]}n[i]=o}return n}addPastKeyValues(e,n){if(n)Object.assign(e,n);else if(this.config.is_encoder_decoder&&(this.add_encoder_pkv??!0)){let o=[1,this.num_encoder_heads,0,this.encoder_dim_kv],u=[1,this.num_decoder_heads,0,this.decoder_dim_kv];for(let d=0;d<this.num_decoder_layers;++d)e[`past_key_values.${d}.encoder.key`]=new Tensor("float32",[],o),e[`past_key_values.${d}.encoder.value`]=new Tensor("float32",[],o),e[`past_key_values.${d}.decoder.key`]=new Tensor("float32",[],u),e[`past_key_values.${d}.decoder.value`]=new Tensor("float32",[],u)}else if(this.config.model_type==="falcon"){let o=[1*this.num_heads,0,this.dim_kv];for(let u=0;u<this.num_layers;++u)e[`past_key_values.${u}.key`]=new Tensor("float32",[],o),e[`past_key_values.${u}.value`]=new Tensor("float32",[],o)}else if(this.config.multi_query){let o=[1*this.num_heads,0,2*this.dim_kv];for(let u=0;u<this.num_layers;++u)e[`past_key_values.${u}.key_value`]=new Tensor("float32",[],o)}else if(this.config.model_type==="bloom"){let o=[1*this.num_heads,this.dim_kv,0],u=[1*this.num_heads,0,this.dim_kv];for(let d=0;d<this.num_layers;++d)e[`past_key_values.${d}.key`]=new Tensor("float32",[],o),e[`past_key_values.${d}.value`]=new Tensor("float32",[],u)}else{let o=[1,this.num_heads,0,this.dim_kv];for(let u=0;u<this.num_layers;++u)e[`past_key_values.${u}.key`]=new Tensor("float32",[],o),e[`past_key_values.${u}.value`]=new Tensor("float32",[],o)}}getStartBeams(e,n,i,o){return this._getStartBeams(this,e,n,i,o)}async runBeam(e){return await this._runBeam(this,e)}updateBeam(e,n){return this._updateBeam(e,n)}}class ModelOutput{}class BertPreTrainedModel extends PreTrainedModel{}class BertModel extends BertPreTrainedModel{}class BertForMaskedLM extends BertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class BertForSequenceClassification extends BertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class BertForTokenClassification extends BertPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class BertForQuestionAnswering extends BertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class NomicBertPreTrainedModel extends PreTrainedModel{}class NomicBertModel extends NomicBertPreTrainedModel{}class RoFormerPreTrainedModel extends PreTrainedModel{}class RoFormerModel extends RoFormerPreTrainedModel{}class RoFormerForMaskedLM extends RoFormerPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class RoFormerForSequenceClassification extends RoFormerPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class RoFormerForTokenClassification extends RoFormerPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class RoFormerForQuestionAnswering extends RoFormerPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class ConvBertPreTrainedModel extends PreTrainedModel{}class ConvBertModel extends ConvBertPreTrainedModel{}class ConvBertForMaskedLM extends ConvBertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class ConvBertForSequenceClassification extends ConvBertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class ConvBertForTokenClassification extends ConvBertPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class ConvBertForQuestionAnswering extends ConvBertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class ElectraPreTrainedModel extends PreTrainedModel{}class ElectraModel extends ElectraPreTrainedModel{}class ElectraForMaskedLM extends ElectraPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class ElectraForSequenceClassification extends ElectraPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class ElectraForTokenClassification extends ElectraPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class ElectraForQuestionAnswering extends ElectraPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class CamembertPreTrainedModel extends PreTrainedModel{}class CamembertModel extends CamembertPreTrainedModel{}class CamembertForMaskedLM extends CamembertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class CamembertForSequenceClassification extends CamembertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class CamembertForTokenClassification extends CamembertPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class CamembertForQuestionAnswering extends CamembertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class DebertaPreTrainedModel extends PreTrainedModel{}class DebertaModel extends DebertaPreTrainedModel{}class DebertaForMaskedLM extends DebertaPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class DebertaForSequenceClassification extends DebertaPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class DebertaForTokenClassification extends DebertaPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class DebertaForQuestionAnswering extends DebertaPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class DebertaV2PreTrainedModel extends PreTrainedModel{}class DebertaV2Model extends DebertaV2PreTrainedModel{}class DebertaV2ForMaskedLM extends DebertaV2PreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class DebertaV2ForSequenceClassification extends DebertaV2PreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class DebertaV2ForTokenClassification extends DebertaV2PreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class DebertaV2ForQuestionAnswering extends DebertaV2PreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class DistilBertPreTrainedModel extends PreTrainedModel{}class DistilBertModel extends DistilBertPreTrainedModel{}class DistilBertForSequenceClassification extends DistilBertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class DistilBertForTokenClassification extends DistilBertPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class DistilBertForQuestionAnswering extends DistilBertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class DistilBertForMaskedLM extends DistilBertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class EsmPreTrainedModel extends PreTrainedModel{}class EsmModel extends EsmPreTrainedModel{}class EsmForMaskedLM extends EsmPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class EsmForSequenceClassification extends EsmPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class EsmForTokenClassification extends EsmPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class MobileBertPreTrainedModel extends PreTrainedModel{}class MobileBertModel extends MobileBertPreTrainedModel{}class MobileBertForMaskedLM extends MobileBertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class MobileBertForSequenceClassification extends MobileBertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class MobileBertForQuestionAnswering extends MobileBertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class MPNetPreTrainedModel extends PreTrainedModel{}class MPNetModel extends MPNetPreTrainedModel{}class MPNetForMaskedLM extends MPNetPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class MPNetForSequenceClassification extends MPNetPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class MPNetForTokenClassification extends MPNetPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class MPNetForQuestionAnswering extends MPNetPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class SqueezeBertPreTrainedModel extends PreTrainedModel{}class SqueezeBertModel extends SqueezeBertPreTrainedModel{}class SqueezeBertForMaskedLM extends SqueezeBertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class SqueezeBertForSequenceClassification extends SqueezeBertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class SqueezeBertForQuestionAnswering extends SqueezeBertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class AlbertPreTrainedModel extends PreTrainedModel{}class AlbertModel extends AlbertPreTrainedModel{}class AlbertForSequenceClassification extends AlbertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class AlbertForQuestionAnswering extends AlbertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class AlbertForMaskedLM extends AlbertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class T5PreTrainedModel extends PreTrainedModel{}class T5Model extends T5PreTrainedModel{}class T5ForConditionalGeneration extends T5PreTrainedModel{constructor(e,n,i,o){super(e,n),this.decoder_merged_session=i,this.generation_config=o,this.num_decoder_layers=this.config.num_decoder_layers,this.num_decoder_heads=this.config.num_heads,this.decoder_dim_kv=this.config.d_kv,this.num_encoder_layers=this.config.num_layers,this.num_encoder_heads=this.config.num_heads,this.encoder_dim_kv=this.config.d_kv}}class LongT5PreTrainedModel extends PreTrainedModel{}class LongT5Model extends LongT5PreTrainedModel{}class LongT5ForConditionalGeneration extends LongT5PreTrainedModel{constructor(e,n,i,o){super(e,n),this.decoder_merged_session=i,this.generation_config=o,this.num_decoder_layers=this.config.num_decoder_layers,this.num_decoder_heads=this.config.num_heads,this.decoder_dim_kv=this.config.d_kv,this.num_encoder_layers=this.config.num_layers,this.num_encoder_heads=this.config.num_heads,this.encoder_dim_kv=this.config.d_kv}}class MT5PreTrainedModel extends PreTrainedModel{}class MT5Model extends MT5PreTrainedModel{}class MT5ForConditionalGeneration extends MT5PreTrainedModel{constructor(e,n,i,o){super(e,n),this.decoder_merged_session=i,this.generation_config=o,this.num_decoder_layers=this.config.num_decoder_layers,this.num_decoder_heads=this.config.num_heads,this.decoder_dim_kv=this.config.d_kv,this.num_encoder_layers=this.config.num_layers,this.num_encoder_heads=this.config.num_heads,this.encoder_dim_kv=this.config.d_kv}}class BartPretrainedModel extends PreTrainedModel{}class BartModel extends BartPretrainedModel{}class BartForConditionalGeneration extends BartPretrainedModel{constructor(e,n,i,o){super(e,n),this.decoder_merged_session=i,this.generation_config=o,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class BartForSequenceClassification extends BartPretrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class MBartPreTrainedModel extends PreTrainedModel{}class MBartModel extends MBartPreTrainedModel{}class MBartForConditionalGeneration extends MBartPreTrainedModel{constructor(e,n,i,o){super(e,n),this.decoder_merged_session=i,this.generation_config=o,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class MBartForSequenceClassification extends MBartPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class MBartForCausalLM extends MBartPreTrainedModel{constructor(e,n,i){super(e,n),this.generation_config=i,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class BlenderbotPreTrainedModel extends PreTrainedModel{}class BlenderbotModel extends BlenderbotPreTrainedModel{}class BlenderbotForConditionalGeneration extends BlenderbotPreTrainedModel{constructor(e,n,i,o){super(e,n),this.decoder_merged_session=i,this.generation_config=o,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class BlenderbotSmallPreTrainedModel extends PreTrainedModel{}class BlenderbotSmallModel extends BlenderbotSmallPreTrainedModel{}class BlenderbotSmallForConditionalGeneration extends BlenderbotSmallPreTrainedModel{constructor(e,n,i,o){super(e,n),this.decoder_merged_session=i,this.generation_config=o,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class RobertaPreTrainedModel extends PreTrainedModel{}class RobertaModel extends RobertaPreTrainedModel{}class RobertaForMaskedLM extends RobertaPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class RobertaForSequenceClassification extends RobertaPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class RobertaForTokenClassification extends RobertaPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class RobertaForQuestionAnswering extends RobertaPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class XLMPreTrainedModel extends PreTrainedModel{}class XLMModel extends XLMPreTrainedModel{}class XLMWithLMHeadModel extends XLMPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class XLMForSequenceClassification extends XLMPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class XLMForTokenClassification extends XLMPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class XLMForQuestionAnswering extends XLMPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class XLMRobertaPreTrainedModel extends PreTrainedModel{}class XLMRobertaModel extends XLMRobertaPreTrainedModel{}class XLMRobertaForMaskedLM extends XLMRobertaPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class XLMRobertaForSequenceClassification extends XLMRobertaPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class XLMRobertaForTokenClassification extends XLMRobertaPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class XLMRobertaForQuestionAnswering extends XLMRobertaPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class ASTPreTrainedModel extends PreTrainedModel{}class ASTModel extends ASTPreTrainedModel{}class ASTForAudioClassification extends ASTPreTrainedModel{}class WhisperPreTrainedModel extends PreTrainedModel{}class WhisperModel extends WhisperPreTrainedModel{}class WhisperForConditionalGeneration extends WhisperPreTrainedModel{requires_attention_mask=!1;main_input_name="input_features";constructor(e,n,i,o){super(e,n),this.decoder_merged_session=i,this.generation_config=o,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}async generate(e,n=null,i=null){if(n=this._get_generation_config(n),n.return_timestamps??=!1,n.return_timestamps&&(i=[new WhisperTimeStampLogitsProcessor(n)]),n.return_token_timestamps&&(n.output_attentions=!0,n.return_dict_in_generate=!0,n.task==="translate"&&console.warn("Token-level timestamps may not be reliable for task 'translate'."),!n.alignment_heads))throw new Error("Model generation config has no `alignment_heads`, token-level timestamps not available. See https://gist.github.com/hollance/42e32852f24243b748ae6bc1f985b13a on how to add this property to the generation config.");const o=await super.generate(e,n,i);return n.return_token_timestamps&&n.alignment_heads&&(o.token_timestamps=this._extract_token_timestamps(o,n.alignment_heads,n.num_frames)),o}_extract_token_timestamps(e,n,i=null,o=.02){if(!e.cross_attentions)throw new Error("Model outputs must contain cross attentions to extract timestamps. This is most likely because the model was not exported with `output_attentions=True`.");let u=this.config.median_filter_width;u===void 0&&(console.warn("Model config has no `median_filter_width`, using default value of 7."),u=7);const d=e.cross_attentions.map(p=>{let _=Array.from({length:this.config.decoder_layers},(T,E)=>cat(p.map(O=>O[E]),2)),f=stack(n.map(([T,E])=>i?_[T].slice(null,E,null,[0,i]):_[T].slice(null,E)));f=f.transpose(1,0,2,3);let[l,g]=std_mean(f,-2,0,!0),v=f.clone();for(let T=0;T<v.dims[0];++T){let E=v[T];for(let O=0;O<E.dims[0];++O){let R=E[O];const M=l[T][O][0],C=g[T][O][0];for(let j=0;j<R.dims[0];++j){let $=R[j];for(let L=0;L<$.data.length;++L)$.data[L]=($.data[L]-C.data[L])/M.data[L];$.data.set(medianFilter($.data,u))}}}return mean(v,1)}),h=[e.sequences.length,e.sequences[0].length],m=new Tensor("float32",new Float32Array(h[0]*h[1]),h);for(let p=0;p<h[0];++p){const _=d[p].neg().squeeze_(0);let[f,l]=dynamicTimeWarping(_),g=Array.from({length:f.length-1},(T,E)=>f[E+1]-f[E]),v=mergeArrays([1],g).map(T=>!!T),S=[];for(let T=0;T<v.length;++T)v[T]&&S.push(l[T]*o);m[p].data.set(S,1)}return m}}class VisionEncoderDecoderModel extends PreTrainedModel{main_input_name="pixel_values";constructor(e,n,i,o){super(e,n),this.decoder_merged_session=i,this.generation_config=o;const u=this.config.encoder,d=this.config.decoder,h=u.model_type;(MODEL_MAPPING_NAMES_ENCODER_ONLY.get(h)??MODEL_MAPPING_NAMES_ENCODER_DECODER.get(h))||console.warn(`Model type for encoder '${h}' not found, assuming encoder-only architecture. Please report this at https://github.com/xenova/transformers.js/issues/new/choose.`);const p=MODEL_WITH_LM_HEAD_MAPPING_NAMES.get(d.model_type);if(!p)throw new Error(`Unable to construct \`VisionEncoderDecoder\` due to unsupported decoder: "${this.config.decoder.model_type}"`);const _=p[1],f=new _(d,i,o);this.add_encoder_pkv="num_decoder_layers"in f,this.add_encoder_pkv?(this.num_decoder_layers=f.num_decoder_layers,this.num_decoder_heads=f.num_decoder_heads,this.decoder_dim_kv=f.decoder_dim_kv,this.num_encoder_layers=f.num_encoder_layers,this.num_encoder_heads=f.num_encoder_heads,this.encoder_dim_kv=f.encoder_dim_kv):(this.num_layers=f.num_layers,this.num_heads=f.num_heads,this.dim_kv=f.dim_kv)}}class CLIPPreTrainedModel extends PreTrainedModel{}class CLIPModel extends CLIPPreTrainedModel{}class CLIPTextModelWithProjection extends CLIPPreTrainedModel{static async from_pretrained(e,n={}){return n.model_file_name??="text_model",super.from_pretrained(e,n)}}class CLIPVisionModelWithProjection extends CLIPPreTrainedModel{static async from_pretrained(e,n={}){return n.model_file_name??="vision_model",super.from_pretrained(e,n)}}class SiglipPreTrainedModel extends PreTrainedModel{}class SiglipModel extends SiglipPreTrainedModel{}class SiglipTextModel extends SiglipPreTrainedModel{static async from_pretrained(e,n={}){return n.model_file_name??="text_model",super.from_pretrained(e,n)}}class SiglipVisionModel extends CLIPPreTrainedModel{static async from_pretrained(e,n={}){return n.model_file_name??="vision_model",super.from_pretrained(e,n)}}class ChineseCLIPPreTrainedModel extends PreTrainedModel{}class ChineseCLIPModel extends ChineseCLIPPreTrainedModel{}class CLIPSegPreTrainedModel extends PreTrainedModel{}class CLIPSegModel extends CLIPSegPreTrainedModel{}class CLIPSegForImageSegmentation extends CLIPSegPreTrainedModel{}class GPT2PreTrainedModel extends PreTrainedModel{constructor(e,n,i){super(e,n),this.generation_config=i,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.n_embd/this.num_heads}}class GPT2Model extends GPT2PreTrainedModel{}class GPT2LMHeadModel extends GPT2PreTrainedModel{}class GPTNeoPreTrainedModel extends PreTrainedModel{constructor(e,n,i){super(e,n),this.generation_config=i,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_heads,this.num_layers=this.config.num_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class GPTNeoModel extends GPTNeoPreTrainedModel{}class GPTNeoForCausalLM extends GPTNeoPreTrainedModel{}class GPTNeoXPreTrainedModel extends PreTrainedModel{constructor(e,n,i){super(e,n),this.generation_config=i,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class GPTNeoXModel extends GPTNeoXPreTrainedModel{}class GPTNeoXForCausalLM extends GPTNeoXPreTrainedModel{}class GPTJPreTrainedModel extends PreTrainedModel{constructor(e,n,i){super(e,n),this.generation_config=i,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.n_embd/this.num_heads}}class GPTJModel extends GPTJPreTrainedModel{}class GPTJForCausalLM extends GPTJPreTrainedModel{}class GPTBigCodePreTrainedModel extends PreTrainedModel{constructor(e,n,i){super(e,n),this.generation_config=i,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.n_embd/this.num_heads}}class GPTBigCodeModel extends GPTBigCodePreTrainedModel{}class GPTBigCodeForCausalLM extends GPTBigCodePreTrainedModel{}class CodeGenPreTrainedModel extends PreTrainedModel{constructor(e,n,i){super(e,n),this.generation_config=i,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.n_embd/this.num_heads}}class CodeGenModel extends CodeGenPreTrainedModel{}class CodeGenForCausalLM extends CodeGenPreTrainedModel{}class LlamaPreTrainedModel extends PreTrainedModel{constructor(e,n,i){super(e,n),this.generation_config=i,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_key_value_heads??this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class LlamaModel extends LlamaPreTrainedModel{}class LlamaForCausalLM extends LlamaPreTrainedModel{}class Qwen2PreTrainedModel extends PreTrainedModel{constructor(e,n,i){super(e,n),this.generation_config=i,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_key_value_heads??this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class Qwen2Model extends Qwen2PreTrainedModel{}class Qwen2ForCausalLM extends Qwen2PreTrainedModel{}class PhiPreTrainedModel extends PreTrainedModel{constructor(e,n,i){super(e,n),this.generation_config=i,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class PhiModel extends PhiPreTrainedModel{}class PhiForCausalLM extends PhiPreTrainedModel{}class BloomPreTrainedModel extends PreTrainedModel{constructor(e,n,i){super(e,n),this.generation_config=i,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.hidden_size/this.num_heads}}class BloomModel extends BloomPreTrainedModel{}class BloomForCausalLM extends BloomPreTrainedModel{}class MptPreTrainedModel extends PreTrainedModel{constructor(e,n,i){super(e,n),this.generation_config=i,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_heads,this.num_layers=this.config.n_layers,this.dim_kv=this.config.d_model/this.num_heads}}class MptModel extends MptPreTrainedModel{}class MptForCausalLM extends MptPreTrainedModel{}class OPTPreTrainedModel extends PreTrainedModel{constructor(e,n,i){super(e,n),this.generation_config=i,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class OPTModel extends OPTPreTrainedModel{}class OPTForCausalLM extends OPTPreTrainedModel{}class ViTPreTrainedModel extends PreTrainedModel{}class ViTModel extends ViTPreTrainedModel{}class ViTForImageClassification extends ViTPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class FastViTPreTrainedModel extends PreTrainedModel{}class FastViTModel extends FastViTPreTrainedModel{}class FastViTForImageClassification extends FastViTPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class VitMattePreTrainedModel extends PreTrainedModel{}class VitMatteForImageMatting extends VitMattePreTrainedModel{async _call(e){return new ImageMattingOutput(await super._call(e))}}class MobileViTPreTrainedModel extends PreTrainedModel{}class MobileViTModel extends MobileViTPreTrainedModel{}class MobileViTForImageClassification extends MobileViTPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class MobileViTV2PreTrainedModel extends PreTrainedModel{}class MobileViTV2Model extends MobileViTV2PreTrainedModel{}class MobileViTV2ForImageClassification extends MobileViTV2PreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class OwlViTPreTrainedModel extends PreTrainedModel{}class OwlViTModel extends OwlViTPreTrainedModel{}class OwlViTForObjectDetection extends OwlViTPreTrainedModel{}class Owlv2PreTrainedModel extends PreTrainedModel{}class Owlv2Model extends Owlv2PreTrainedModel{}class Owlv2ForObjectDetection extends Owlv2PreTrainedModel{}class BeitPreTrainedModel extends PreTrainedModel{}class BeitModel extends BeitPreTrainedModel{}class BeitForImageClassification extends BeitPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class DetrPreTrainedModel extends PreTrainedModel{}class DetrModel extends DetrPreTrainedModel{}class DetrForObjectDetection extends DetrPreTrainedModel{async _call(e){return new DetrObjectDetectionOutput(await super._call(e))}}class DetrForSegmentation extends DetrPreTrainedModel{async _call(e){return new DetrSegmentationOutput(await super._call(e))}}class DetrObjectDetectionOutput extends ModelOutput{constructor({logits:e,pred_boxes:n}){super(),this.logits=e,this.pred_boxes=n}}class DetrSegmentationOutput extends ModelOutput{constructor({logits:e,pred_boxes:n,pred_masks:i}){super(),this.logits=e,this.pred_boxes=n,this.pred_masks=i}}class TableTransformerPreTrainedModel extends PreTrainedModel{}class TableTransformerModel extends TableTransformerPreTrainedModel{}class TableTransformerForObjectDetection extends TableTransformerPreTrainedModel{async _call(e){return new TableTransformerObjectDetectionOutput(await super._call(e))}}class TableTransformerObjectDetectionOutput extends DetrObjectDetectionOutput{}class DeiTPreTrainedModel extends PreTrainedModel{}class DeiTModel extends DeiTPreTrainedModel{}class DeiTForImageClassification extends DeiTPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class ResNetPreTrainedModel extends PreTrainedModel{}class ResNetModel extends ResNetPreTrainedModel{}class ResNetForImageClassification extends ResNetPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class SwinPreTrainedModel extends PreTrainedModel{}class SwinModel extends SwinPreTrainedModel{}class SwinForImageClassification extends SwinPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class Swin2SRPreTrainedModel extends PreTrainedModel{}class Swin2SRModel extends Swin2SRPreTrainedModel{}class Swin2SRForImageSuperResolution extends Swin2SRPreTrainedModel{}class DPTPreTrainedModel extends PreTrainedModel{}class DPTModel extends DPTPreTrainedModel{}class DPTForDepthEstimation extends DPTPreTrainedModel{}class DepthAnythingPreTrainedModel extends PreTrainedModel{}class DepthAnythingForDepthEstimation extends DepthAnythingPreTrainedModel{}class GLPNPreTrainedModel extends PreTrainedModel{}class GLPNModel extends GLPNPreTrainedModel{}class GLPNForDepthEstimation extends GLPNPreTrainedModel{}class DonutSwinPreTrainedModel extends PreTrainedModel{}class DonutSwinModel extends DonutSwinPreTrainedModel{}class ConvNextPreTrainedModel extends PreTrainedModel{}class ConvNextModel extends ConvNextPreTrainedModel{}class ConvNextForImageClassification extends ConvNextPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class ConvNextV2PreTrainedModel extends PreTrainedModel{}class ConvNextV2Model extends ConvNextV2PreTrainedModel{}class ConvNextV2ForImageClassification extends ConvNextV2PreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class Dinov2PreTrainedModel extends PreTrainedModel{}class Dinov2Model extends Dinov2PreTrainedModel{}class Dinov2ForImageClassification extends Dinov2PreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class YolosPreTrainedModel extends PreTrainedModel{}class YolosModel extends YolosPreTrainedModel{}class YolosForObjectDetection extends YolosPreTrainedModel{async _call(e){return new YolosObjectDetectionOutput(await super._call(e))}}class YolosObjectDetectionOutput extends ModelOutput{constructor({logits:e,pred_boxes:n}){super(),this.logits=e,this.pred_boxes=n}}class SamPreTrainedModel extends PreTrainedModel{}class SamModel extends SamPreTrainedModel{constructor(e,n,i){super(e,n),this.prompt_encoder_mask_decoder=i}async get_image_embeddings({pixel_values:e}){return await encoderForward(this,{pixel_values:e})}async forward(e){if((!e.image_embeddings||!e.image_positional_embeddings)&&(e={...e,...await this.get_image_embeddings(e)}),!e.input_labels){const n=e.input_points.dims.slice(0,-1),i=n.reduce((o,u)=>o*u,1);e.input_labels=new Tensor("int64",new BigInt64Array(i).fill(1n),n)}return await sessionRun(this.prompt_encoder_mask_decoder,{input_points:e.input_points,input_labels:e.input_labels,image_embeddings:e.image_embeddings,image_positional_embeddings:e.image_positional_embeddings})}async _call(e){return new SamImageSegmentationOutput(await super._call(e))}}class SamImageSegmentationOutput extends ModelOutput{constructor({iou_scores:e,pred_masks:n}){super(),this.iou_scores=e,this.pred_masks=n}}class MarianPreTrainedModel extends PreTrainedModel{}class MarianModel extends MarianPreTrainedModel{}class MarianMTModel extends MarianPreTrainedModel{constructor(e,n,i,o){super(e,n),this.decoder_merged_session=i,this.generation_config=o,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class M2M100PreTrainedModel extends PreTrainedModel{}class M2M100Model extends M2M100PreTrainedModel{}class M2M100ForConditionalGeneration extends M2M100PreTrainedModel{constructor(e,n,i,o){super(e,n),this.decoder_merged_session=i,this.generation_config=o,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class Wav2Vec2PreTrainedModel extends PreTrainedModel{}class Wav2Vec2Model extends Wav2Vec2PreTrainedModel{}class Wav2Vec2ForCTC extends Wav2Vec2PreTrainedModel{async _call(e){return new CausalLMOutput(await super._call(e))}}class Wav2Vec2ForSequenceClassification extends Wav2Vec2PreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class Wav2Vec2ForAudioFrameClassification extends Wav2Vec2PreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class UniSpeechPreTrainedModel extends PreTrainedModel{}class UniSpeechModel extends UniSpeechPreTrainedModel{}class UniSpeechForCTC extends UniSpeechPreTrainedModel{async _call(e){return new CausalLMOutput(await super._call(e))}}class UniSpeechForSequenceClassification extends UniSpeechPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class UniSpeechSatPreTrainedModel extends PreTrainedModel{}class UniSpeechSatModel extends UniSpeechSatPreTrainedModel{}class UniSpeechSatForCTC extends UniSpeechSatPreTrainedModel{async _call(e){return new CausalLMOutput(await super._call(e))}}class UniSpeechSatForSequenceClassification extends UniSpeechSatPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class UniSpeechSatForAudioFrameClassification extends UniSpeechSatPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class Wav2Vec2BertPreTrainedModel extends PreTrainedModel{}class Wav2Vec2BertModel extends Wav2Vec2BertPreTrainedModel{}class Wav2Vec2BertForCTC extends Wav2Vec2BertPreTrainedModel{async _call(e){return new CausalLMOutput(await super._call(e))}}class Wav2Vec2BertForSequenceClassification extends Wav2Vec2BertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class HubertModel extends Wav2Vec2PreTrainedModel{}class HubertForCTC extends Wav2Vec2PreTrainedModel{async _call(e){return new CausalLMOutput(await super._call(e))}}class HubertForSequenceClassification extends Wav2Vec2PreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class WavLMPreTrainedModel extends PreTrainedModel{}class WavLMModel extends WavLMPreTrainedModel{}class WavLMForCTC extends WavLMPreTrainedModel{async _call(e){return new CausalLMOutput(await super._call(e))}}class WavLMForSequenceClassification extends WavLMPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class WavLMForXVector extends WavLMPreTrainedModel{async _call(e){return new XVectorOutput(await super._call(e))}}class WavLMForAudioFrameClassification extends WavLMPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class SpeechT5PreTrainedModel extends PreTrainedModel{}class SpeechT5ForSpeechToText extends SpeechT5PreTrainedModel{}class SpeechT5ForTextToSpeech extends SpeechT5PreTrainedModel{constructor(e,n,i,o){super(e,n),this.decoder_merged_session=i,this.generation_config=o,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.hidden_size/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.hidden_size/this.num_encoder_heads}async generate_speech(e,n,{threshold:i=.5,minlenratio:o=0,maxlenratio:u=20,vocoder:d=null}={}){const h={input_ids:e},{encoder_outputs:m,encoder_attention_mask:p}=await encoderForward(this,h),_=m.dims[1]/this.config.reduction_factor,f=Math.floor(_*u),l=Math.floor(_*o),g=this.config.num_mel_bins;let v=[],S=null,T=null,E=0;for(;;){++E;const M=boolTensor(!!T);let C;T?C=T.output_sequence_out:C=new Tensor("float32",new Float32Array(g),[1,1,g]);let j={use_cache_branch:M,output_sequence:C,encoder_attention_mask:p,speaker_embeddings:n,encoder_hidden_states:m};this.addPastKeyValues(j,S),T=await sessionRun(this.decoder_merged_session,j),S=this.getPastKeyValues(T,S);const{prob:$,spectrum:L}=T;if(v.push(L),E>=l&&(Array.from($.data).filter(N=>N>=i).length>0||E>=f))break}const O=cat(v),{waveform:R}=await sessionRun(d.session,{spectrogram:O});return{spectrogram:O,waveform:R}}}class SpeechT5HifiGan extends PreTrainedModel{main_input_name="spectrogram"}class TrOCRPreTrainedModel extends PreTrainedModel{constructor(e,n,i){super(e,n),this.generation_config=i,this.config.pad_token_id=this.config.eos_token_id,this.num_encoder_layers=this.num_decoder_layers=this.config.decoder_layers,this.num_encoder_heads=this.num_decoder_heads=this.config.decoder_attention_heads,this.encoder_dim_kv=this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads}}class TrOCRForCausalLM extends TrOCRPreTrainedModel{}class MistralPreTrainedModel extends PreTrainedModel{constructor(e,n,i){super(e,n),this.generation_config=i,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_key_value_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class MistralModel extends MistralPreTrainedModel{}class MistralForCausalLM extends MistralPreTrainedModel{}class Starcoder2PreTrainedModel extends PreTrainedModel{constructor(e,n,i){super(e,n),this.generation_config=i,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_key_value_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class Starcoder2Model extends Starcoder2PreTrainedModel{}class Starcoder2ForCausalLM extends Starcoder2PreTrainedModel{}class FalconPreTrainedModel extends PreTrainedModel{constructor(e,n,i){super(e,n),this.generation_config=i,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class FalconModel extends FalconPreTrainedModel{}class FalconForCausalLM extends FalconPreTrainedModel{}class ClapPreTrainedModel extends PreTrainedModel{}class ClapModel extends ClapPreTrainedModel{}class ClapTextModelWithProjection extends ClapPreTrainedModel{static async from_pretrained(e,n={}){return n.model_file_name??="text_model",super.from_pretrained(e,n)}}class ClapAudioModelWithProjection extends ClapPreTrainedModel{static async from_pretrained(e,n={}){return n.model_file_name??="audio_model",super.from_pretrained(e,n)}}class VitsPreTrainedModel extends PreTrainedModel{}class VitsModel extends VitsPreTrainedModel{async _call(e){return new VitsModelOutput(await super._call(e))}}class SegformerPreTrainedModel extends PreTrainedModel{}class SegformerForImageClassification extends SegformerPreTrainedModel{}class SegformerForSemanticSegmentation extends SegformerPreTrainedModel{}class StableLmPreTrainedModel extends PreTrainedModel{constructor(e,n,i){super(e,n),this.generation_config=i,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class StableLmForCausalLM extends StableLmPreTrainedModel{}class EfficientNetPreTrainedModel extends PreTrainedModel{}class EfficientNetModel extends EfficientNetPreTrainedModel{}class EfficientNetForImageClassification extends EfficientNetPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class PretrainedMixin{static MODEL_CLASS_MAPPINGS=null;static BASE_IF_FAIL=!1;static async from_pretrained(e,{quantized:n=!0,progress_callback:i=null,config:o=null,cache_dir:u=null,local_files_only:d=!1,revision:h="main",model_file_name:m=null}={}){let p={quantized:n,progress_callback:i,config:o,cache_dir:u,local_files_only:d,revision:h,model_file_name:m};if(o=await AutoConfig.from_pretrained(e,p),p.config||(p.config=o),!this.MODEL_CLASS_MAPPINGS)throw new Error("`MODEL_CLASS_MAPPINGS` not implemented for this type of `AutoClass`: "+this.name);for(let _ of this.MODEL_CLASS_MAPPINGS){const f=_.get(o.model_type);if(f)return await f[1].from_pretrained(e,p)}if(this.BASE_IF_FAIL)return console.warn(`Unknown model class "${o.model_type}", attempting to construct from base class.`),await PreTrainedModel.from_pretrained(e,p);throw Error(`Unsupported model type: ${o.model_type}`)}}const MODEL_MAPPING_NAMES_ENCODER_ONLY=new Map([["bert",["BertModel",BertModel]],["nomic_bert",["NomicBertModel",NomicBertModel]],["roformer",["RoFormerModel",RoFormerModel]],["electra",["ElectraModel",ElectraModel]],["esm",["EsmModel",EsmModel]],["convbert",["ConvBertModel",ConvBertModel]],["camembert",["CamembertModel",CamembertModel]],["deberta",["DebertaModel",DebertaModel]],["deberta-v2",["DebertaV2Model",DebertaV2Model]],["mpnet",["MPNetModel",MPNetModel]],["albert",["AlbertModel",AlbertModel]],["distilbert",["DistilBertModel",DistilBertModel]],["roberta",["RobertaModel",RobertaModel]],["xlm",["XLMModel",XLMModel]],["xlm-roberta",["XLMRobertaModel",XLMRobertaModel]],["clap",["ClapModel",ClapModel]],["clip",["CLIPModel",CLIPModel]],["clipseg",["CLIPSegModel",CLIPSegModel]],["chinese_clip",["ChineseCLIPModel",ChineseCLIPModel]],["siglip",["SiglipModel",SiglipModel]],["mobilebert",["MobileBertModel",MobileBertModel]],["squeezebert",["SqueezeBertModel",SqueezeBertModel]],["wav2vec2",["Wav2Vec2Model",Wav2Vec2Model]],["wav2vec2-bert",["Wav2Vec2BertModel",Wav2Vec2BertModel]],["unispeech",["UniSpeechModel",UniSpeechModel]],["unispeech-sat",["UniSpeechSatModel",UniSpeechSatModel]],["hubert",["HubertModel",HubertModel]],["wavlm",["WavLMModel",WavLMModel]],["audio-spectrogram-transformer",["ASTModel",ASTModel]],["vits",["VitsModel",VitsModel]],["detr",["DetrModel",DetrModel]],["table-transformer",["TableTransformerModel",TableTransformerModel]],["vit",["ViTModel",ViTModel]],["fastvit",["FastViTModel",FastViTModel]],["mobilevit",["MobileViTModel",MobileViTModel]],["mobilevitv2",["MobileViTV2Model",MobileViTV2Model]],["owlvit",["OwlViTModel",OwlViTModel]],["owlv2",["Owlv2Model",Owlv2Model]],["beit",["BeitModel",BeitModel]],["deit",["DeiTModel",DeiTModel]],["convnext",["ConvNextModel",ConvNextModel]],["convnextv2",["ConvNextV2Model",ConvNextV2Model]],["dinov2",["Dinov2Model",Dinov2Model]],["resnet",["ResNetModel",ResNetModel]],["swin",["SwinModel",SwinModel]],["swin2sr",["Swin2SRModel",Swin2SRModel]],["donut-swin",["DonutSwinModel",DonutSwinModel]],["yolos",["YolosModel",YolosModel]],["dpt",["DPTModel",DPTModel]],["glpn",["GLPNModel",GLPNModel]],["hifigan",["SpeechT5HifiGan",SpeechT5HifiGan]],["efficientnet",["EfficientNetModel",EfficientNetModel]]]),MODEL_MAPPING_NAMES_ENCODER_DECODER=new Map([["t5",["T5Model",T5Model]],["longt5",["LongT5Model",LongT5Model]],["mt5",["MT5Model",MT5Model]],["bart",["BartModel",BartModel]],["mbart",["MBartModel",MBartModel]],["marian",["MarianModel",MarianModel]],["whisper",["WhisperModel",WhisperModel]],["m2m_100",["M2M100Model",M2M100Model]],["blenderbot",["BlenderbotModel",BlenderbotModel]],["blenderbot-small",["BlenderbotSmallModel",BlenderbotSmallModel]]]),MODEL_MAPPING_NAMES_DECODER_ONLY=new Map([["bloom",["BloomModel",BloomModel]],["gpt2",["GPT2Model",GPT2Model]],["gptj",["GPTJModel",GPTJModel]],["gpt_bigcode",["GPTBigCodeModel",GPTBigCodeModel]],["gpt_neo",["GPTNeoModel",GPTNeoModel]],["gpt_neox",["GPTNeoXModel",GPTNeoXModel]],["codegen",["CodeGenModel",CodeGenModel]],["llama",["LlamaModel",LlamaModel]],["qwen2",["Qwen2Model",Qwen2Model]],["phi",["PhiModel",PhiModel]],["mpt",["MptModel",MptModel]],["opt",["OPTModel",OPTModel]],["mistral",["MistralModel",MistralModel]],["starcoder2",["Starcoder2Model",Starcoder2Model]],["falcon",["FalconModel",FalconModel]]]),MODEL_FOR_SPEECH_SEQ_2_SEQ_MAPPING_NAMES=new Map([["speecht5",["SpeechT5ForSpeechToText",SpeechT5ForSpeechToText]],["whisper",["WhisperForConditionalGeneration",WhisperForConditionalGeneration]]]),MODEL_FOR_TEXT_TO_SPECTROGRAM_MAPPING_NAMES=new Map([["speecht5",["SpeechT5ForTextToSpeech",SpeechT5ForTextToSpeech]]]),MODEL_FOR_TEXT_TO_WAVEFORM_MAPPING_NAMES=new Map([["vits",["VitsModel",VitsModel]]]),MODEL_FOR_SEQUENCE_CLASSIFICATION_MAPPING_NAMES=new Map([["bert",["BertForSequenceClassification",BertForSequenceClassification]],["roformer",["RoFormerForSequenceClassification",RoFormerForSequenceClassification]],["electra",["ElectraForSequenceClassification",ElectraForSequenceClassification]],["esm",["EsmForSequenceClassification",EsmForSequenceClassification]],["convbert",["ConvBertForSequenceClassification",ConvBertForSequenceClassification]],["camembert",["CamembertForSequenceClassification",CamembertForSequenceClassification]],["deberta",["DebertaForSequenceClassification",DebertaForSequenceClassification]],["deberta-v2",["DebertaV2ForSequenceClassification",DebertaV2ForSequenceClassification]],["mpnet",["MPNetForSequenceClassification",MPNetForSequenceClassification]],["albert",["AlbertForSequenceClassification",AlbertForSequenceClassification]],["distilbert",["DistilBertForSequenceClassification",DistilBertForSequenceClassification]],["roberta",["RobertaForSequenceClassification",RobertaForSequenceClassification]],["xlm",["XLMForSequenceClassification",XLMForSequenceClassification]],["xlm-roberta",["XLMRobertaForSequenceClassification",XLMRobertaForSequenceClassification]],["bart",["BartForSequenceClassification",BartForSequenceClassification]],["mbart",["MBartForSequenceClassification",MBartForSequenceClassification]],["mobilebert",["MobileBertForSequenceClassification",MobileBertForSequenceClassification]],["squeezebert",["SqueezeBertForSequenceClassification",SqueezeBertForSequenceClassification]]]),MODEL_FOR_TOKEN_CLASSIFICATION_MAPPING_NAMES=new Map([["bert",["BertForTokenClassification",BertForTokenClassification]],["roformer",["RoFormerForTokenClassification",RoFormerForTokenClassification]],["electra",["ElectraForTokenClassification",ElectraForTokenClassification]],["esm",["EsmForTokenClassification",EsmForTokenClassification]],["convbert",["ConvBertForTokenClassification",ConvBertForTokenClassification]],["camembert",["CamembertForTokenClassification",CamembertForTokenClassification]],["deberta",["DebertaForTokenClassification",DebertaForTokenClassification]],["deberta-v2",["DebertaV2ForTokenClassification",DebertaV2ForTokenClassification]],["mpnet",["MPNetForTokenClassification",MPNetForTokenClassification]],["distilbert",["DistilBertForTokenClassification",DistilBertForTokenClassification]],["roberta",["RobertaForTokenClassification",RobertaForTokenClassification]],["xlm",["XLMForTokenClassification",XLMForTokenClassification]],["xlm-roberta",["XLMRobertaForTokenClassification",XLMRobertaForTokenClassification]]]),MODEL_FOR_SEQ_TO_SEQ_CAUSAL_LM_MAPPING_NAMES=new Map([["t5",["T5ForConditionalGeneration",T5ForConditionalGeneration]],["longt5",["LongT5ForConditionalGeneration",LongT5ForConditionalGeneration]],["mt5",["MT5ForConditionalGeneration",MT5ForConditionalGeneration]],["bart",["BartForConditionalGeneration",BartForConditionalGeneration]],["mbart",["MBartForConditionalGeneration",MBartForConditionalGeneration]],["marian",["MarianMTModel",MarianMTModel]],["m2m_100",["M2M100ForConditionalGeneration",M2M100ForConditionalGeneration]],["blenderbot",["BlenderbotForConditionalGeneration",BlenderbotForConditionalGeneration]],["blenderbot-small",["BlenderbotSmallForConditionalGeneration",BlenderbotSmallForConditionalGeneration]]]),MODEL_WITH_LM_HEAD_MAPPING_NAMES=new Map([["bloom",["BloomForCausalLM",BloomForCausalLM]],["gpt2",["GPT2LMHeadModel",GPT2LMHeadModel]],["gptj",["GPTJForCausalLM",GPTJForCausalLM]],["gpt_bigcode",["GPTBigCodeForCausalLM",GPTBigCodeForCausalLM]],["gpt_neo",["GPTNeoForCausalLM",GPTNeoForCausalLM]],["gpt_neox",["GPTNeoXForCausalLM",GPTNeoXForCausalLM]],["codegen",["CodeGenForCausalLM",CodeGenForCausalLM]],["llama",["LlamaForCausalLM",LlamaForCausalLM]],["qwen2",["Qwen2ForCausalLM",Qwen2ForCausalLM]],["phi",["PhiForCausalLM",PhiForCausalLM]],["mpt",["MptForCausalLM",MptForCausalLM]],["opt",["OPTForCausalLM",OPTForCausalLM]],["mbart",["MBartForCausalLM",MBartForCausalLM]],["mistral",["MistralForCausalLM",MistralForCausalLM]],["starcoder2",["Starcoder2ForCausalLM",Starcoder2ForCausalLM]],["falcon",["FalconForCausalLM",FalconForCausalLM]],["trocr",["TrOCRForCausalLM",TrOCRForCausalLM]],["stablelm",["StableLmForCausalLM",StableLmForCausalLM]]]),MODEL_FOR_MASKED_LM_MAPPING_NAMES=new Map([["bert",["BertForMaskedLM",BertForMaskedLM]],["roformer",["RoFormerForMaskedLM",RoFormerForMaskedLM]],["electra",["ElectraForMaskedLM",ElectraForMaskedLM]],["esm",["EsmForMaskedLM",EsmForMaskedLM]],["convbert",["ConvBertForMaskedLM",ConvBertForMaskedLM]],["camembert",["CamembertForMaskedLM",CamembertForMaskedLM]],["deberta",["DebertaForMaskedLM",DebertaForMaskedLM]],["deberta-v2",["DebertaV2ForMaskedLM",DebertaV2ForMaskedLM]],["mpnet",["MPNetForMaskedLM",MPNetForMaskedLM]],["albert",["AlbertForMaskedLM",AlbertForMaskedLM]],["distilbert",["DistilBertForMaskedLM",DistilBertForMaskedLM]],["roberta",["RobertaForMaskedLM",RobertaForMaskedLM]],["xlm",["XLMWithLMHeadModel",XLMWithLMHeadModel]],["xlm-roberta",["XLMRobertaForMaskedLM",XLMRobertaForMaskedLM]],["mobilebert",["MobileBertForMaskedLM",MobileBertForMaskedLM]],["squeezebert",["SqueezeBertForMaskedLM",SqueezeBertForMaskedLM]]]),MODEL_FOR_QUESTION_ANSWERING_MAPPING_NAMES=new Map([["bert",["BertForQuestionAnswering",BertForQuestionAnswering]],["roformer",["RoFormerForQuestionAnswering",RoFormerForQuestionAnswering]],["electra",["ElectraForQuestionAnswering",ElectraForQuestionAnswering]],["convbert",["ConvBertForQuestionAnswering",ConvBertForQuestionAnswering]],["camembert",["CamembertForQuestionAnswering",CamembertForQuestionAnswering]],["deberta",["DebertaForQuestionAnswering",DebertaForQuestionAnswering]],["deberta-v2",["DebertaV2ForQuestionAnswering",DebertaV2ForQuestionAnswering]],["mpnet",["MPNetForQuestionAnswering",MPNetForQuestionAnswering]],["albert",["AlbertForQuestionAnswering",AlbertForQuestionAnswering]],["distilbert",["DistilBertForQuestionAnswering",DistilBertForQuestionAnswering]],["roberta",["RobertaForQuestionAnswering",RobertaForQuestionAnswering]],["xlm",["XLMForQuestionAnswering",XLMForQuestionAnswering]],["xlm-roberta",["XLMRobertaForQuestionAnswering",XLMRobertaForQuestionAnswering]],["mobilebert",["MobileBertForQuestionAnswering",MobileBertForQuestionAnswering]],["squeezebert",["SqueezeBertForQuestionAnswering",SqueezeBertForQuestionAnswering]]]),MODEL_FOR_VISION_2_SEQ_MAPPING_NAMES=new Map([["vision-encoder-decoder",["VisionEncoderDecoderModel",VisionEncoderDecoderModel]]]),MODEL_FOR_DOCUMENT_QUESTION_ANSWERING_MAPPING_NAMES=new Map([["vision-encoder-decoder",["VisionEncoderDecoderModel",VisionEncoderDecoderModel]]]),MODEL_FOR_IMAGE_CLASSIFICATION_MAPPING_NAMES=new Map([["vit",["ViTForImageClassification",ViTForImageClassification]],["fastvit",["FastViTForImageClassification",FastViTForImageClassification]],["mobilevit",["MobileViTForImageClassification",MobileViTForImageClassification]],["mobilevitv2",["MobileViTV2ForImageClassification",MobileViTV2ForImageClassification]],["beit",["BeitForImageClassification",BeitForImageClassification]],["deit",["DeiTForImageClassification",DeiTForImageClassification]],["convnext",["ConvNextForImageClassification",ConvNextForImageClassification]],["convnextv2",["ConvNextV2ForImageClassification",ConvNextV2ForImageClassification]],["dinov2",["Dinov2ForImageClassification",Dinov2ForImageClassification]],["resnet",["ResNetForImageClassification",ResNetForImageClassification]],["swin",["SwinForImageClassification",SwinForImageClassification]],["segformer",["SegformerForImageClassification",SegformerForImageClassification]],["efficientnet",["EfficientNetForImageClassification",EfficientNetForImageClassification]]]),MODEL_FOR_OBJECT_DETECTION_MAPPING_NAMES=new Map([["detr",["DetrForObjectDetection",DetrForObjectDetection]],["table-transformer",["TableTransformerForObjectDetection",TableTransformerForObjectDetection]],["yolos",["YolosForObjectDetection",YolosForObjectDetection]]]),MODEL_FOR_ZERO_SHOT_OBJECT_DETECTION_MAPPING_NAMES=new Map([["owlvit",["OwlViTForObjectDetection",OwlViTForObjectDetection]],["owlv2",["Owlv2ForObjectDetection",Owlv2ForObjectDetection]]]),MODEL_FOR_IMAGE_SEGMENTATION_MAPPING_NAMES=new Map([["detr",["DetrForSegmentation",DetrForSegmentation]],["clipseg",["CLIPSegForImageSegmentation",CLIPSegForImageSegmentation]]]),MODEL_FOR_SEMANTIC_SEGMENTATION_MAPPING_NAMES=new Map([["segformer",["SegformerForSemanticSegmentation",SegformerForSemanticSegmentation]]]),MODEL_FOR_MASK_GENERATION_MAPPING_NAMES=new Map([["sam",["SamModel",SamModel]]]),MODEL_FOR_CTC_MAPPING_NAMES=new Map([["wav2vec2",["Wav2Vec2ForCTC",Wav2Vec2ForCTC]],["wav2vec2-bert",["Wav2Vec2BertForCTC",Wav2Vec2BertForCTC]],["unispeech",["UniSpeechForCTC",UniSpeechForCTC]],["unispeech-sat",["UniSpeechSatForCTC",UniSpeechSatForCTC]],["wavlm",["WavLMForCTC",WavLMForCTC]],["hubert",["HubertForCTC",HubertForCTC]]]),MODEL_FOR_AUDIO_CLASSIFICATION_MAPPING_NAMES=new Map([["wav2vec2",["Wav2Vec2ForSequenceClassification",Wav2Vec2ForSequenceClassification]],["wav2vec2-bert",["Wav2Vec2BertForSequenceClassification",Wav2Vec2BertForSequenceClassification]],["unispeech",["UniSpeechForSequenceClassification",UniSpeechForSequenceClassification]],["unispeech-sat",["UniSpeechSatForSequenceClassification",UniSpeechSatForSequenceClassification]],["wavlm",["WavLMForSequenceClassification",WavLMForSequenceClassification]],["hubert",["HubertForSequenceClassification",HubertForSequenceClassification]],["audio-spectrogram-transformer",["ASTForAudioClassification",ASTForAudioClassification]]]),MODEL_FOR_AUDIO_XVECTOR_MAPPING_NAMES=new Map([["wavlm",["WavLMForXVector",WavLMForXVector]]]),MODEL_FOR_AUDIO_FRAME_CLASSIFICATION_MAPPING_NAMES=new Map([["unispeech-sat",["UniSpeechSatForAudioFrameClassification",UniSpeechSatForAudioFrameClassification]],["wavlm",["WavLMForAudioFrameClassification",WavLMForAudioFrameClassification]],["wav2vec2",["Wav2Vec2ForAudioFrameClassification",Wav2Vec2ForAudioFrameClassification]]]),MODEL_FOR_IMAGE_MATTING_MAPPING_NAMES=new Map([["vitmatte",["VitMatteForImageMatting",VitMatteForImageMatting]]]),MODEL_FOR_IMAGE_TO_IMAGE_MAPPING_NAMES=new Map([["swin2sr",["Swin2SRForImageSuperResolution",Swin2SRForImageSuperResolution]]]),MODEL_FOR_DEPTH_ESTIMATION_MAPPING_NAMES=new Map([["dpt",["DPTForDepthEstimation",DPTForDepthEstimation]],["depth_anything",["DepthAnythingForDepthEstimation",DepthAnythingForDepthEstimation]],["glpn",["GLPNForDepthEstimation",GLPNForDepthEstimation]]]),MODEL_FOR_IMAGE_FEATURE_EXTRACTION_MAPPING_NAMES=new Map([["clip",["CLIPVisionModelWithProjection",CLIPVisionModelWithProjection]],["siglip",["SiglipVisionModel",SiglipVisionModel]]]),MODEL_CLASS_TYPE_MAPPING=[[MODEL_MAPPING_NAMES_ENCODER_ONLY,MODEL_TYPES.EncoderOnly],[MODEL_MAPPING_NAMES_ENCODER_DECODER,MODEL_TYPES.EncoderDecoder],[MODEL_MAPPING_NAMES_DECODER_ONLY,MODEL_TYPES.DecoderOnly],[MODEL_FOR_SEQUENCE_CLASSIFICATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_TOKEN_CLASSIFICATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_SEQ_TO_SEQ_CAUSAL_LM_MAPPING_NAMES,MODEL_TYPES.Seq2Seq],[MODEL_FOR_SPEECH_SEQ_2_SEQ_MAPPING_NAMES,MODEL_TYPES.Seq2Seq],[MODEL_WITH_LM_HEAD_MAPPING_NAMES,MODEL_TYPES.DecoderOnly],[MODEL_FOR_MASKED_LM_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_QUESTION_ANSWERING_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_VISION_2_SEQ_MAPPING_NAMES,MODEL_TYPES.Vision2Seq],[MODEL_FOR_IMAGE_CLASSIFICATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_IMAGE_SEGMENTATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_SEMANTIC_SEGMENTATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_IMAGE_MATTING_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_IMAGE_TO_IMAGE_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_DEPTH_ESTIMATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_OBJECT_DETECTION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_ZERO_SHOT_OBJECT_DETECTION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_MASK_GENERATION_MAPPING_NAMES,MODEL_TYPES.MaskGeneration],[MODEL_FOR_CTC_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_AUDIO_CLASSIFICATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_TEXT_TO_SPECTROGRAM_MAPPING_NAMES,MODEL_TYPES.Seq2Seq],[MODEL_FOR_TEXT_TO_WAVEFORM_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_AUDIO_XVECTOR_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_AUDIO_FRAME_CLASSIFICATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_IMAGE_FEATURE_EXTRACTION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly]];for(const[t,e]of MODEL_CLASS_TYPE_MAPPING)for(const[n,i]of t.values())MODEL_TYPE_MAPPING.set(n,e),MODEL_CLASS_TO_NAME_MAPPING.set(i,n),MODEL_NAME_TO_CLASS_MAPPING.set(n,i);const CUSTOM_MAPPING=[["CLIPTextModelWithProjection",CLIPTextModelWithProjection,MODEL_TYPES.EncoderOnly],["SiglipTextModel",SiglipTextModel,MODEL_TYPES.EncoderOnly],["ClapTextModelWithProjection",ClapTextModelWithProjection,MODEL_TYPES.EncoderOnly],["ClapAudioModelWithProjection",ClapAudioModelWithProjection,MODEL_TYPES.EncoderOnly]];for(const[t,e,n]of CUSTOM_MAPPING)MODEL_TYPE_MAPPING.set(t,n),MODEL_CLASS_TO_NAME_MAPPING.set(e,t),MODEL_NAME_TO_CLASS_MAPPING.set(t,e);class AutoModel extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=MODEL_CLASS_TYPE_MAPPING.map(e=>e[0]);static BASE_IF_FAIL=!0}class AutoModelForSequenceClassification extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_SEQUENCE_CLASSIFICATION_MAPPING_NAMES]}class AutoModelForTokenClassification extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_TOKEN_CLASSIFICATION_MAPPING_NAMES]}class AutoModelForSeq2SeqLM extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_SEQ_TO_SEQ_CAUSAL_LM_MAPPING_NAMES]}class AutoModelForSpeechSeq2Seq extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_SPEECH_SEQ_2_SEQ_MAPPING_NAMES]}class AutoModelForTextToSpectrogram extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_TEXT_TO_SPECTROGRAM_MAPPING_NAMES]}class AutoModelForTextToWaveform extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_TEXT_TO_WAVEFORM_MAPPING_NAMES]}class AutoModelForCausalLM extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_WITH_LM_HEAD_MAPPING_NAMES]}class AutoModelForMaskedLM extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_MASKED_LM_MAPPING_NAMES]}class AutoModelForQuestionAnswering extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_QUESTION_ANSWERING_MAPPING_NAMES]}class AutoModelForVision2Seq extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_VISION_2_SEQ_MAPPING_NAMES]}class AutoModelForImageClassification extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_IMAGE_CLASSIFICATION_MAPPING_NAMES]}class AutoModelForImageSegmentation extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_IMAGE_SEGMENTATION_MAPPING_NAMES]}class AutoModelForSemanticSegmentation extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_SEMANTIC_SEGMENTATION_MAPPING_NAMES]}class AutoModelForObjectDetection extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_OBJECT_DETECTION_MAPPING_NAMES]}class AutoModelForZeroShotObjectDetection extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_ZERO_SHOT_OBJECT_DETECTION_MAPPING_NAMES]}class AutoModelForCTC extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_CTC_MAPPING_NAMES]}class AutoModelForAudioClassification extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_AUDIO_CLASSIFICATION_MAPPING_NAMES]}class AutoModelForDocumentQuestionAnswering extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_DOCUMENT_QUESTION_ANSWERING_MAPPING_NAMES]}class AutoModelForImageToImage extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_IMAGE_TO_IMAGE_MAPPING_NAMES]}class AutoModelForDepthEstimation extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_DEPTH_ESTIMATION_MAPPING_NAMES]}class AutoModelForImageFeatureExtraction extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_IMAGE_FEATURE_EXTRACTION_MAPPING_NAMES]}class Seq2SeqLMOutput extends ModelOutput{constructor({logits:e,past_key_values:n,encoder_outputs:i,decoder_attentions:o=null,cross_attentions:u=null}){super(),this.logits=e,this.past_key_values=n,this.encoder_outputs=i,this.decoder_attentions=o,this.cross_attentions=u}}class SequenceClassifierOutput extends ModelOutput{constructor({logits:e}){super(),this.logits=e}}class XVectorOutput extends ModelOutput{constructor({logits:e,embeddings:n}){super(),this.logits=e,this.embeddings=n}}class TokenClassifierOutput extends ModelOutput{constructor({logits:e}){super(),this.logits=e}}class MaskedLMOutput extends ModelOutput{constructor({logits:e}){super(),this.logits=e}}class QuestionAnsweringModelOutput extends ModelOutput{constructor({start_logits:e,end_logits:n}){super(),this.start_logits=e,this.end_logits=n}}class CausalLMOutput extends ModelOutput{constructor({logits:e}){super(),this.logits=e}}class ImageMattingOutput extends ModelOutput{constructor({alphas:e}){super(),this.alphas=e}}class VitsModelOutput extends ModelOutput{constructor({waveform:e,spectrogram:n}){super(),this.waveform=e,this.spectrogram=n}}const BROWSER_ENV=typeof self<"u",WEBWORKER_ENV=BROWSER_ENV&&self.constructor.name==="DedicatedWorkerGlobalScope";let createCanvasFunction,ImageDataClass,loadImageFunction;if(BROWSER_ENV)createCanvasFunction=(t,e)=>{if(!self.OffscreenCanvas)throw new Error("OffscreenCanvas not supported by this browser.");return new self.OffscreenCanvas(t,e)},loadImageFunction=self.createImageBitmap,ImageDataClass=self.ImageData;else if(sharp)loadImageFunction=async t=>{const n=(await t.metadata()).channels;let{data:i,info:o}=await t.rotate().raw().toBuffer({resolveWithObject:!0});const u=new RawImage(new Uint8ClampedArray(i),o.width,o.height,o.channels);return n!==void 0&&n!==o.channels&&u.convert(n),u};else throw new Error("Unable to load image processing library.");const RESAMPLING_MAPPING={0:"nearest",1:"lanczos",2:"bilinear",3:"bicubic",4:"box",5:"hamming"},CONTENT_TYPE_MAP=new Map([["png","image/png"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["gif","image/gif"]]);class RawImage{constructor(e,n,i,o){this.data=e,this.width=n,this.height=i,this.channels=o}get size(){return[this.width,this.height]}static async read(e){if(e instanceof RawImage)return e;if(typeof e=="string"||e instanceof URL)return await this.fromURL(e);throw new Error(`Unsupported input type: ${typeof e}`)}static async fromURL(e){let n=await getFile(e);if(n.status!==200)throw new Error(`Unable to read image from "${e}" (${n.status} ${n.statusText})`);let i=await n.blob();return this.fromBlob(i)}static async fromBlob(e){if(BROWSER_ENV){let n=await loadImageFunction(e);const i=createCanvasFunction(n.width,n.height).getContext("2d");return i.drawImage(n,0,0),new this(i.getImageData(0,0,n.width,n.height).data,n.width,n.height,4)}else{let n=sharp(await e.arrayBuffer());return await loadImageFunction(n)}}static fromTensor(e,n="CHW"){if(e.dims.length!==3)throw new Error(`Tensor should have 3 dimensions, but has ${e.dims.length} dimensions.`);if(n==="CHW")e=e.transpose(1,2,0);else if(n!=="HWC")throw new Error(`Unsupported channel format: ${n}`);if(!(e.data instanceof Uint8ClampedArray||e.data instanceof Uint8Array))throw new Error(`Unsupported tensor type: ${e.type}`);switch(e.dims[2]){case 1:case 2:case 3:case 4:return new RawImage(e.data,e.dims[1],e.dims[0],e.dims[2]);default:throw new Error(`Unsupported number of channels: ${e.dims[2]}`)}}grayscale(){if(this.channels===1)return this;let e=new Uint8ClampedArray(this.width*this.height*1);switch(this.channels){case 3:case 4:for(let n=0,i=0;n<this.data.length;n+=this.channels){const o=this.data[n],u=this.data[n+1],d=this.data[n+2];e[i++]=Math.round(.2989*o+.587*u+.114*d)}break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(e,this.width,this.height,1)}rgb(){if(this.channels===3)return this;let e=new Uint8ClampedArray(this.width*this.height*3);switch(this.channels){case 1:for(let n=0,i=0;n<this.data.length;++n)e[i++]=this.data[n],e[i++]=this.data[n],e[i++]=this.data[n];break;case 4:for(let n=0,i=0;n<this.data.length;n+=4)e[i++]=this.data[n],e[i++]=this.data[n+1],e[i++]=this.data[n+2];break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(e,this.width,this.height,3)}rgba(){if(this.channels===4)return this;let e=new Uint8ClampedArray(this.width*this.height*4);switch(this.channels){case 1:for(let n=0,i=0;n<this.data.length;++n)e[i++]=this.data[n],e[i++]=this.data[n],e[i++]=this.data[n],e[i++]=255;break;case 3:for(let n=0,i=0;n<this.data.length;n+=3)e[i++]=this.data[n],e[i++]=this.data[n+1],e[i++]=this.data[n+2],e[i++]=255;break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(e,this.width,this.height,4)}async resize(e,n,{resample:i=2}={}){let o=RESAMPLING_MAPPING[i]??i;if(BROWSER_ENV){let u=this.channels,d=this.toCanvas();const h=createCanvasFunction(e,n).getContext("2d");return h.drawImage(d,0,0,e,n),new RawImage(h.getImageData(0,0,e,n).data,e,n,4).convert(u)}else{let u=this.toSharp();switch(o){case"box":case"hamming":(o==="box"||o==="hamming")&&(console.warn(`Resampling method ${o} is not yet supported. Using bilinear instead.`),o="bilinear");case"nearest":case"bilinear":case"bicubic":u=u.affine([e/this.width,0,0,n/this.height],{interpolator:o});break;case"lanczos":u=u.resize({width:e,height:n,fit:"fill",kernel:"lanczos3"});break;default:throw new Error(`Resampling method ${o} is not supported.`)}return await loadImageFunction(u)}}async pad([e,n,i,o]){if(e=Math.max(e,0),n=Math.max(n,0),i=Math.max(i,0),o=Math.max(o,0),e===0&&n===0&&i===0&&o===0)return this;if(BROWSER_ENV){let u=this.channels,d=this.toCanvas(),h=this.width+e+n,m=this.height+i+o;const p=createCanvasFunction(h,m).getContext("2d");return p.drawImage(d,0,0,this.width,this.height,e,i,h,m),new RawImage(p.getImageData(0,0,h,m).data,h,m,4).convert(u)}else{let u=this.toSharp().extend({left:e,right:n,top:i,bottom:o});return await loadImageFunction(u)}}async crop([e,n,i,o]){if(e=Math.max(e,0),n=Math.max(n,0),i=Math.min(i,this.width-1),o=Math.min(o,this.height-1),e===0&&n===0&&i===this.width-1&&o===this.height-1)return this;const u=i-e+1,d=o-n+1;if(BROWSER_ENV){const h=this.channels,m=this.toCanvas(),p=createCanvasFunction(u,d).getContext("2d");return p.drawImage(m,e,n,u,d,0,0,u,d),new RawImage(p.getImageData(0,0,u,d).data,u,d,4).convert(h)}else{const h=this.toSharp().extract({left:e,top:n,width:u,height:d});return await loadImageFunction(h)}}async center_crop(e,n){if(this.width===e&&this.height===n)return this;let i=(this.width-e)/2,o=(this.height-n)/2;if(BROWSER_ENV){let u=this.channels,d=this.toCanvas();const h=createCanvasFunction(e,n).getContext("2d");let m=0,p=0,_=0,f=0;return i>=0?m=i:_=-i,o>=0?p=o:f=-o,h.drawImage(d,m,p,e,n,_,f,e,n),new RawImage(h.getImageData(0,0,e,n).data,e,n,4).convert(u)}else{let u=this.toSharp();if(i>=0&&o>=0)u=u.extract({left:Math.floor(i),top:Math.floor(o),width:e,height:n});else if(i<=0&&o<=0){let d=Math.floor(-o),h=Math.floor(-i);u=u.extend({top:d,left:h,right:e-this.width-h,bottom:n-this.height-d})}else{let d=[0,0],h=0;o<0?(d[0]=Math.floor(-o),d[1]=n-this.height-d[0]):h=Math.floor(o);let m=[0,0],p=0;i<0?(m[0]=Math.floor(-i),m[1]=e-this.width-m[0]):p=Math.floor(i),u=u.extend({top:d[0],bottom:d[1],left:m[0],right:m[1]}).extract({left:p,top:h,width:e,height:n})}return await loadImageFunction(u)}}async toBlob(e="image/png",n=1){if(!BROWSER_ENV)throw new Error("toBlob() is only supported in browser environments.");return await this.toCanvas().convertToBlob({type:e,quality:n})}toTensor(e="CHW"){let n=new Tensor("uint8",new Uint8Array(this.data),[this.height,this.width,this.channels]);if(e!=="HWC")if(e==="CHW")n=n.permute(2,0,1);else throw new Error(`Unsupported channel format: ${e}`);return n}toCanvas(){if(!BROWSER_ENV)throw new Error("toCanvas() is only supported in browser environments.");let e=this.clone().rgba(),n=createCanvasFunction(e.width,e.height),i=new ImageDataClass(e.data,e.width,e.height);return n.getContext("2d").putImageData(i,0,0),n}_update(e,n,i,o=null){return this.data=e,this.width=n,this.height=i,o!==null&&(this.channels=o),this}clone(){return new RawImage(this.data.slice(),this.width,this.height,this.channels)}convert(e){if(this.channels===e)return this;switch(e){case 1:this.grayscale();break;case 3:this.rgb();break;case 4:this.rgba();break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this}async save(e){if(BROWSER_ENV){if(WEBWORKER_ENV)throw new Error("Unable to save an image from a Web Worker.");const n=e.split(".").pop().toLowerCase(),i=CONTENT_TYPE_MAP.get(n)??"image/png",o=await this.toBlob(i),u=URL.createObjectURL(o),d=document.createElement("a");d.href=u,d.download=e,d.click(),d.remove()}else{if(env$1.useFS)return await this.toSharp().toFile(e);throw new Error("Unable to save the image because filesystem is disabled in this environment.")}}toSharp(){if(BROWSER_ENV)throw new Error("toSharp() is only supported in server-side environments.");return sharp(this.data,{raw:{width:this.width,height:this.height,channels:this.channels}})}}async function read_audio(t,e){if(typeof AudioContext>"u")throw Error("Unable to load audio from path/URL since `AudioContext` is not available in your environment. Instead, audio data should be passed directly to the pipeline/processor. For more information and some example code, see https://huggingface.co/docs/transformers.js/guides/node-audio-processing.");const n=await(await getFile(t)).arrayBuffer(),i=new AudioContext({sampleRate:e});typeof e>"u"&&console.warn(`No sampling rate provided, using default of ${i.sampleRate}Hz.`);const o=await i.decodeAudioData(n);let u;if(o.numberOfChannels===2){const d=Math.sqrt(2),h=o.getChannelData(0),m=o.getChannelData(1);u=new Float32Array(h.length);for(let p=0;p<o.length;++p)u[p]=d*(h[p]+m[p])/2}else u=o.getChannelData(0);return u}function hanning(t){if(t<1)return new Float64Array;if(t===1)return new Float64Array([1]);const e=t-1,n=Math.PI/e,i=new Float64Array(t);for(let o=0;o<t;++o){const u=2*o-e;i[o]=.5+.5*Math.cos(n*u)}return i}const HERTZ_TO_MEL_MAPPING={htk:t=>2595*Math.log10(1+t/700),kaldi:t=>1127*Math.log(1+t/700),slaney:(t,e=1e3,n=15,i=27/Math.log(6.4))=>t>=e?n+Math.log(t/e)*i:3*t/200};function hertz_to_mel(t,e="htk"){const n=HERTZ_TO_MEL_MAPPING[e];if(!n)throw new Error('mel_scale should be one of "htk", "slaney" or "kaldi".');return typeof t=="number"?n(t):t.map(i=>n(i))}const MEL_TO_HERTZ_MAPPING={htk:t=>700*(10**(t/2595)-1),kaldi:t=>700*(Math.exp(t/1127)-1),slaney:(t,e=1e3,n=15,i=Math.log(6.4)/27)=>t>=n?e*Math.exp(i*(t-n)):200*t/3};function mel_to_hertz(t,e="htk"){const n=MEL_TO_HERTZ_MAPPING[e];if(!n)throw new Error('mel_scale should be one of "htk", "slaney" or "kaldi".');return typeof t=="number"?n(t):t.map(i=>n(i))}function _create_triangular_filter_bank(t,e){const n=Float64Array.from({length:e.length-1},(d,h)=>e[h+1]-e[h]),i=Array.from({length:t.length},()=>new Array(e.length));for(let d=0;d<t.length;++d){const h=i[d];for(let m=0;m<e.length;++m)h[m]=e[m]-t[d]}const o=e.length-2,u=Array.from({length:o},()=>new Array(t.length));for(let d=0;d<t.length;++d){const h=i[d];for(let m=0;m<o;++m){const p=-h[m]/n[m],_=h[m+2]/n[m+1];u[m][d]=Math.max(0,Math.min(p,_))}}return u}function linspace(t,e,n){const i=(e-t)/(n-1);return Float64Array.from({length:n},(o,u)=>t+i*u)}function mel_filter_bank(t,e,n,i,o,u=null,d="htk",h=!1){if(u!==null&&u!=="slaney")throw new Error('norm must be one of null or "slaney"');const m=hertz_to_mel(n,d),p=hertz_to_mel(i,d),_=linspace(m,p,e+2);let f=mel_to_hertz(_,d),l;if(h){const v=o/(t*2);l=hertz_to_mel(Float64Array.from({length:t},(S,T)=>T*v),d),f=_}else l=linspace(0,Math.floor(o/2),t);const g=_create_triangular_filter_bank(l,f);if(u!==null&&u==="slaney")for(let v=0;v<e;++v){const S=g[v],T=2/(f[v+2]-f[v]);for(let E=0;E<t;++E)S[E]*=T}return g}function padReflect(t,e,n){const i=new t.constructor(t.length+e+n),o=t.length-1;for(let u=0;u<t.length;++u)i[e+u]=t[u];for(let u=1;u<=e;++u)i[e-u]=t[calculateReflectOffset(u,o)];for(let u=1;u<=n;++u)i[o+e+u]=t[calculateReflectOffset(o-u,o)];return i}function _db_conversion_helper(t,e,n,i,o){if(n<=0)throw new Error("reference must be greater than zero");if(i<=0)throw new Error("min_value must be greater than zero");n=Math.max(i,n);const u=Math.log10(n);for(let d=0;d<t.length;++d)t[d]=e*Math.log10(Math.max(i,t[d])-u);if(o!==null){if(o<=0)throw new Error("db_range must be greater than zero");const d=max(t)[0]-o;for(let h=0;h<t.length;++h)t[h]=Math.max(t[h],d)}return t}function amplitude_to_db(t,e=1,n=1e-5,i=null){return _db_conversion_helper(t,20,e,n,i)}function power_to_db(t,e=1,n=1e-10,i=null){return _db_conversion_helper(t,10,e,n,i)}function spectrogram(t,e,n,i,{fft_length:o=null,power:u=1,center:d=!0,pad_mode:h="reflect",onesided:m=!0,preemphasis:p=null,mel_filters:_=null,mel_floor:f=1e-10,log_mel:l=null,reference:g=1,min_value:v=1e-10,db_range:S=null,remove_dc_offset:T=null,max_num_frames:E=null,do_pad:O=!0,transpose:R=!1}={}){const M=e.length;if(o===null&&(o=n),n>o)throw Error(`frame_length (${n}) may not be larger than fft_length (${o})`);if(M!==n)throw new Error(`Length of the window (${M}) must equal frame_length (${n})`);if(i<=0)throw new Error("hop_length must be greater than zero");if(u===null&&_!==null)throw new Error("You have provided `mel_filters` but `power` is `None`. Mel spectrogram computation is not yet supported for complex-valued spectrogram. Specify `power` to fix this issue.");if(d){if(h!=="reflect")throw new Error(`pad_mode="${h}" not implemented yet.`);const V=Math.floor((o-1)/2)+1;t=padReflect(t,V,V)}const C=Math.floor(1+Math.floor((t.length-n)/i)),j=m?Math.floor(o/2)+1:o;let $=C,L=C;E!==null&&(E>C?O&&(L=E):L=$=E);const N=new FFT(o),B=new Float64Array(o),U=new Float64Array(N.outputBufferSize),H=new Array($);for(let V=0;V<$;++V){const G=V*i;for(let Z=0;Z<n;++Z)B[Z]=t[G+Z];if(T){let Z=0;for(let ee=0;ee<n;++ee)Z+=B[ee];const te=Z/n;for(let ee=0;ee<n;++ee)B[ee]-=te}if(p!==null){for(let Z=n-1;Z>=1;--Z)B[Z]-=p*B[Z-1];B[0]*=1-p}for(let Z=0;Z<e.length;++Z)B[Z]*=e[Z];N.realTransform(U,B);const ie=new Array(j);for(let Z=0;Z<ie.length;++Z){const te=Z<<1;ie[Z]=U[te]**2+U[te+1]**2}H[V]=ie}if(u!==null&&u!==2){const V=2/u;for(let G=0;G<H.length;++G){const ie=H[G];for(let Z=0;Z<ie.length;++Z)ie[Z]**=V}}const Y=_.length,K=new Float32Array(Y*L),z=R?[L,Y]:[Y,L];for(let V=0;V<Y;++V){const G=_[V];for(let ie=0;ie<$;++ie){const Z=H[ie];let te=0;for(let ee=0;ee<j;++ee)te+=G[ee]*Z[ee];K[R?ie*Y+V:V*$+ie]=Math.max(f,te)}}if(u!==null&&l!==null){const V=Math.min(K.length,$*Y);switch(l){case"log":for(let G=0;G<V;++G)K[G]=Math.log(K[G]);break;case"log10":for(let G=0;G<V;++G)K[G]=Math.log10(K[G]);break;case"dB":if(u===1)amplitude_to_db(K,g,v,S);else if(u===2)power_to_db(K,g,v,S);else throw new Error(`Cannot use log_mel option '${l}' with power ${u}`);break;default:throw new Error(`log_mel must be one of null, 'log', 'log10' or 'dB'. Got '${l}'`)}}return{data:K,dims:z}}function window_function(t,e,{periodic:n=!0,frame_length:i=null,center:o=!0}={}){const u=n?t+1:t;let d;switch(e){case"boxcar":d=new Float64Array(u).fill(1);break;case"hann":case"hann_window":d=hanning(u);break;case"povey":d=hanning(u).map(h=>Math.pow(h,.85));break;default:throw new Error(`Unknown window type ${e}.`)}if(n&&(d=d.subarray(0,t)),i===null)return d;if(t>i)throw new Error(`Length of the window (${t}) may not be larger than frame_length (${i})`);return d}function center_to_corners_format([t,e,n,i]){return[t-n/2,e-i/2,t+n/2,e+i/2]}function post_process_object_detection(t,e=.5,n=null,i=!1){const o=t.logits,u=t.pred_boxes,[d,h,m]=o.dims;if(n!==null&&n.length!==d)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");let p=[];for(let _=0;_<d;++_){let f=n!==null?n[_]:null,l={boxes:[],classes:[],scores:[]},g=o[_],v=u[_];for(let S=0;S<h;++S){let T=g[S],E=[],O;if(i){O=T.sigmoid().data;for(let R=0;R<O.length;++R)O[R]>e&&E.push(R)}else{let R=max(T.data)[1];if(R===m-1)continue;E.push(R),O=softmax(T.data)}for(const R of E){let M=v[S].data;M=center_to_corners_format(M),f!==null&&(M=M.map((C,j)=>C*f[(j+1)%2])),l.boxes.push(M),l.classes.push(R),l.scores.push(O[R])}}p.push(l)}return p}function validate_audio_inputs(t,e){if(!(t instanceof Float32Array||t instanceof Float64Array))throw new Error(`${e} expects input to be a Float32Array or a Float64Array, but got ${t?.constructor?.name??typeof t} instead. If using the feature extractor directly, remember to use \`read_audio(url, sampling_rate)\` to obtain the raw audio data of the file/url.`)}function constraint_to_multiple_of(t,e,n=0,i=null){const o=t/e;let u=bankers_round(o)*e;return i!==null&&u>i&&(u=Math.floor(o)*e),u<n&&(u=Math.ceil(o)*e),u}function enforce_size_divisibility([t,e],n){return[Math.max(Math.floor(t/n),1)*n,Math.max(Math.floor(e/n),1)*n]}class FeatureExtractor extends Callable{constructor(e){super(),this.config=e}}class ImageFeatureExtractor extends FeatureExtractor{constructor(e){super(e),this.image_mean=this.config.image_mean??this.config.mean,this.image_std=this.config.image_std??this.config.std,this.resample=this.config.resample??2,this.do_rescale=this.config.do_rescale??!0,this.rescale_factor=this.config.rescale_factor??1/255,this.do_normalize=this.config.do_normalize,this.do_resize=this.config.do_resize,this.do_thumbnail=this.config.do_thumbnail,this.size=this.config.size,this.size_divisibility=this.config.size_divisibility??this.config.size_divisor,this.do_center_crop=this.config.do_center_crop,this.crop_size=this.config.crop_size,this.do_convert_rgb=this.config.do_convert_rgb??!0,this.do_crop_margin=this.config.do_crop_margin,this.pad_size=this.config.pad_size,this.do_pad=this.config.do_pad,this.do_pad&&!this.pad_size&&this.size&&this.size.width!==void 0&&this.size.height!==void 0&&(this.pad_size=this.size),this.do_flip_channel_order=this.config.do_flip_channel_order??!1}async thumbnail(e,n,i=2){const o=e.height,u=e.width,d=n.height,h=n.width;let m=Math.min(o,d),p=Math.min(u,h);return m===o&&p===u?e:(o>u?p=Math.floor(u*m/o):u>o&&(m=Math.floor(o*p/u)),await e.resize(p,m,{resample:i}))}async crop_margin(e,n=200){const i=e.clone().grayscale(),o=min(i.data)[0],d=max(i.data)[0]-o;if(d===0)return e;const h=n/255;let m=i.width,p=i.height,_=0,f=0;for(let l=0;l<i.height;++l){const g=l*i.width;for(let v=0;v<i.width;++v)(i.data[g+v]-o)/d<h&&(m=Math.min(m,v),p=Math.min(p,l),_=Math.max(_,v),f=Math.max(f,l))}return e=await e.crop([m,p,_,f]),e}pad_image(e,n,i,{mode:o="constant",center:u=!1,constant_values:d=0}={}){const[h,m,p]=n;let _,f;if(typeof i=="number"?(_=i,f=i):(_=i.width,f=i.height),_!==m||f!==h){const l=new Float32Array(_*f*p);if(Array.isArray(d))for(let S=0;S<l.length;++S)l[S]=d[S%p];else d!==0&&l.fill(d);const[g,v]=u?[Math.floor((_-m)/2),Math.floor((f-h)/2)]:[0,0];for(let S=0;S<h;++S){const T=(S+v)*_,E=S*m;for(let O=0;O<m;++O){const R=(T+O+g)*p,M=(E+O)*p;for(let C=0;C<p;++C)l[R+C]=e[M+C]}}if(o==="symmetric"){if(u)throw new Error("`center` padding is not supported when `mode` is set to `symmetric`.");const S=h-1,T=m-1;for(let E=0;E<f;++E){const O=E*_,R=calculateReflectOffset(E,S)*m;for(let M=0;M<_;++M){if(E<h&&M<m)continue;const C=(O+M)*p,j=(R+calculateReflectOffset(M,T))*p;for(let $=0;$<p;++$)l[C+$]=e[j+$]}}}e=l,n=[f,_,p]}return[e,n]}rescale(e){for(let n=0;n<e.length;++n)e[n]=this.rescale_factor*e[n]}get_resize_output_image_size(e,n){const[i,o]=e.size;let u,d;if(this.do_thumbnail){const{height:h,width:m}=n;u=Math.min(h,m)}else Number.isInteger(n)?(u=n,d=this.config.max_size??u):n!==void 0&&(u=n.shortest_edge,d=n.longest_edge);if(u!==void 0||d!==void 0){const h=u===void 0?1:Math.max(u/i,u/o),m=i*h,p=o*h,_=d===void 0?1:Math.min(d/m,d/p);let f=Math.floor(Number((m*_).toFixed(2))),l=Math.floor(Number((p*_).toFixed(2)));return this.size_divisibility!==void 0&&([f,l]=enforce_size_divisibility([f,l],this.size_divisibility)),[f,l]}else if(n!==void 0&&n.width!==void 0&&n.height!==void 0){let h=n.width,m=n.height;if(this.config.keep_aspect_ratio&&this.config.ensure_multiple_of){let p=m/o,_=h/i;Math.abs(1-_)<Math.abs(1-p)?p=_:_=p,m=constraint_to_multiple_of(p*o,this.config.ensure_multiple_of),h=constraint_to_multiple_of(_*i,this.config.ensure_multiple_of)}return[h,m]}else{if(this.size_divisibility!==void 0)return enforce_size_divisibility([i,o],this.size_divisibility);throw new Error(`Could not resize image due to unsupported \`this.size\` option in config: ${JSON.stringify(n)}`)}}async resize(e){const[n,i]=this.get_resize_output_image_size(e,this.size);return await e.resize(n,i,{resample:this.resample})}async preprocess(e,{do_normalize:n=null,do_pad:i=null,do_convert_rgb:o=null,do_convert_grayscale:u=null,do_flip_channel_order:d=null}={}){this.do_crop_margin&&(e=await this.crop_margin(e));const[h,m]=e.size;if(o??this.do_convert_rgb?e=e.rgb():u&&(e=e.grayscale()),this.do_resize&&(e=await this.resize(e)),this.do_thumbnail&&(e=await this.thumbnail(e,this.size,this.resample)),this.do_center_crop){let g,v;Number.isInteger(this.crop_size)?(g=this.crop_size,v=this.crop_size):(g=this.crop_size.width,v=this.crop_size.height),e=await e.center_crop(g,v)}const p=[e.height,e.width];let _=Float32Array.from(e.data),f=[e.height,e.width,e.channels];if(this.do_rescale&&this.rescale(_),n??this.do_normalize){let g=this.image_mean;Array.isArray(this.image_mean)||(g=new Array(e.channels).fill(g));let v=this.image_std;if(Array.isArray(this.image_std)||(v=new Array(e.channels).fill(g)),g.length!==e.channels||v.length!==e.channels)throw new Error(`When set to arrays, the length of \`image_mean\` (${g.length}) and \`image_std\` (${v.length}) must match the number of channels in the image (${e.channels}).`);for(let S=0;S<_.length;S+=e.channels)for(let T=0;T<e.channels;++T)_[S+T]=(_[S+T]-g[T])/v[T]}if(i??this.do_pad){if(this.pad_size)[_,f]=this.pad_image(_,[e.height,e.width,e.channels],this.pad_size);else if(this.size_divisibility){const[g,v]=enforce_size_divisibility([f[1],f[0]],this.size_divisibility);[_,f]=this.pad_image(_,f,{width:g,height:v})}}if(d??this.do_flip_channel_order){if(f[2]!==3)throw new Error("Flipping channel order is only supported for RGB images.");for(let g=0;g<_.length;g+=3){const v=_[g];_[g]=_[g+2],_[g+2]=v}}const l=new Tensor("float32",_,f).permute(2,0,1);return{original_size:[m,h],reshaped_input_size:p,pixel_values:l}}async _call(e,...n){Array.isArray(e)||(e=[e]);const i=await Promise.all(e.map(u=>this.preprocess(u)));return{pixel_values:stack(i.map(u=>u.pixel_values),0),original_sizes:i.map(u=>u.original_size),reshaped_input_sizes:i.map(u=>u.reshaped_input_size)}}}class SegformerFeatureExtractor extends ImageFeatureExtractor{post_process_semantic_segmentation(e,n=null){const i=e.logits,o=i.dims[0];if(n!==null&&n.length!==o)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");const u=[];for(let d=0;d<o;++d){const h=n!==null?n[d]:null;let m=i[d];h!==null&&(m=interpolate(m,h,"bilinear",!1));const[p,_]=h??m.dims.slice(-2),f=new Tensor("int32",new Int32Array(p*_),[p,_]),l=m[0].data;for(let T=1;T<m.dims[0];++T){const E=m[T].data;for(let O=0;O<E.length;++O)E[O]>l[O]&&(l[O]=E[O],f.data[O]=T)}const g=new Array(m.dims[0]),v=f.data;for(let T=0;T<v.length;++T){const E=v[T];g[E]=E}const S=g.filter(T=>T!==void 0);u.push({segmentation:f,labels:S})}return u}}class DPTFeatureExtractor extends ImageFeatureExtractor{}class DPTImageProcessor extends DPTFeatureExtractor{}class BitImageProcessor extends ImageFeatureExtractor{}class GLPNFeatureExtractor extends ImageFeatureExtractor{}class CLIPFeatureExtractor extends ImageFeatureExtractor{}class ChineseCLIPFeatureExtractor extends ImageFeatureExtractor{}class SiglipImageProcessor extends ImageFeatureExtractor{}class ConvNextFeatureExtractor extends ImageFeatureExtractor{constructor(e){super(e),this.crop_pct=this.config.crop_pct??224/256}async resize(e){const n=this.size?.shortest_edge;if(n===void 0)throw new Error("Size dictionary must contain 'shortest_edge' key.");if(n<384){const i=Math.floor(n/this.crop_pct),[o,u]=this.get_resize_output_image_size(e,{shortest_edge:i});e=await e.resize(o,u,{resample:this.resample}),e=await e.center_crop(n,n)}else e=await e.resize(n,n,{resample:this.resample});return e}}class ConvNextImageProcessor extends ConvNextFeatureExtractor{}class ViTFeatureExtractor extends ImageFeatureExtractor{}class ViTImageProcessor extends ImageFeatureExtractor{}class EfficientNetImageProcessor extends ImageFeatureExtractor{constructor(e){super(e),this.include_top=this.config.include_top??!0,this.include_top&&(this.image_std=this.image_std.map(n=>n*n))}}class MobileViTFeatureExtractor extends ImageFeatureExtractor{}class MobileViTImageProcessor extends MobileViTFeatureExtractor{}class OwlViTFeatureExtractor extends ImageFeatureExtractor{post_process_object_detection(...e){return post_process_object_detection(...e)}}class Owlv2ImageProcessor extends OwlViTFeatureExtractor{}class DeiTFeatureExtractor extends ImageFeatureExtractor{}class BeitFeatureExtractor extends ImageFeatureExtractor{}class DonutFeatureExtractor extends ImageFeatureExtractor{pad_image(e,n,i,o={}){const[u,d,h]=n;let m=this.image_mean;Array.isArray(this.image_mean)||(m=new Array(h).fill(m));let p=this.image_std;Array.isArray(p)||(p=new Array(h).fill(m));const _=m.map((f,l)=>-f/p[l]);return super.pad_image(e,n,i,{center:!0,constant_values:_,...o})}}class NougatImageProcessor extends DonutFeatureExtractor{}class DetrFeatureExtractor extends ImageFeatureExtractor{async _call(e){const n=await super._call(e),i=[n.pixel_values.dims[0],64,64],o=new Tensor("int64",new BigInt64Array(i.reduce((u,d)=>u*d)).fill(1n),i);return{...n,pixel_mask:o}}post_process_object_detection(...e){return post_process_object_detection(...e)}remove_low_and_no_objects(e,n,i,o){let u=[],d=[],h=[];for(let m=0;m<e.dims[0];++m){let p=e[m],_=n[m],f=max(p.data)[1];if(f===o)continue;let g=softmax(p.data)[f];g>i&&(u.push(_),d.push(g),h.push(f))}return[u,d,h]}check_segment_validity(e,n,i,o=.5,u=.8){let d=[],h=0,m=0;for(let _=0;_<e.length;++_)e[_]===i&&(d.push(_),++h),n[i].data[_]>=o&&++m;let p=h>0&&m>0;return p&&(p=h/m>u),[p,d]}compute_segments(e,n,i,o,u,d=null,h=null){let[m,p]=h??e[0].dims,_=new Tensor("int32",new Int32Array(m*p),[m,p]),f=[];if(h!==null)for(let S=0;S<e.length;++S)e[S]=interpolate(e[S],h,"bilinear",!1);let l=new Int32Array(e[0].data.length),g=new Float32Array(e[0].data.length);for(let S=0;S<e.length;++S){let T=n[S];for(let E=0;E<e[S].data.length;++E)e[S].data[E]*=T,e[S].data[E]>g[E]&&(l[E]=S,g[E]=e[S].data[E])}let v=0;for(let S=0;S<i.length;++S){let T=i[S],[E,O]=this.check_segment_validity(l,e,S,o,u);if(E){++v;for(let R of O)_.data[R]=v;f.push({id:v,label_id:T,score:n[S]})}}return[_,f]}post_process_panoptic_segmentation(e,n=.5,i=.5,o=.8,u=null,d=null){u===null&&(console.warn("`label_ids_to_fuse` unset. No instance will be fused."),u=new Set);const h=e.logits,p=e.pred_masks.sigmoid();let[_,f,l]=h.dims;if(l-=1,d!==null&&d.length!==_)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");let g=[];for(let v=0;v<_;++v){let S=d!==null?d[v]:null,T=h[v],E=p[v],[O,R,M]=this.remove_low_and_no_objects(T,E,n,l);if(M.length===0){let[$,L]=S??E.dims.slice(-2),N=new Tensor("int32",new Int32Array($*L).fill(-1),[$,L]);g.push({segmentation:N,segments_info:[]});continue}let[C,j]=this.compute_segments(O,R,M,i,o,u,S);g.push({segmentation:C,segments_info:j})}return g}post_process_instance_segmentation(){throw Error("Not implemented yet")}}class YolosFeatureExtractor extends ImageFeatureExtractor{post_process_object_detection(...e){return post_process_object_detection(...e)}}class SamImageProcessor extends ImageFeatureExtractor{reshape_input_points(e,n,i){e=structuredClone(e);let o=calculateDimensions(e);if(o.length===3)o=[1,...o],e=[e];else if(o.length!==4)throw Error("The input_points must be a 4D tensor of shape `batch_size`, `point_batch_size`, `nb_points_per_image`, `2`.");for(let u=0;u<e.length;++u){let d=n[u],h=i[u],m=[h[0]/d[0],h[1]/d[1]];for(let p=0;p<e[u].length;++p)for(let _=0;_<e[u][p].length;++_)for(let f=0;f<e[u][p][_].length;++f)e[u][p][_][f]*=m[f]}return new Tensor("float32",Float32Array.from(e.flat(1/0)),o)}add_input_labels(e,n){let i=calculateDimensions(e);if(i.length===2)i=[1,...i],e=[e];else if(i.length!==3)throw Error("The input_points must be a 4D tensor of shape `batch_size`, `point_batch_size`, `nb_points_per_image`, `2`.");if(i.some((o,u)=>o!==n.dims[u]))throw Error(`The first ${i.length} dimensions of 'input_points' and 'input_labels' must be the same.`);return new Tensor("int64",e.flat(1/0).map(BigInt),i)}async _call(e,n=null,i=null){const o=await super._call(e);if(n&&(o.input_points=this.reshape_input_points(n,o.original_sizes,o.reshaped_input_sizes)),i){if(!o.input_points)throw Error("`input_points` must be provided if `input_labels` are provided.");o.input_labels=this.add_input_labels(i,o.input_points)}return o}post_process_masks(e,n,i,{mask_threshold:o=0,binarize:u=!0,pad_size:d=null}={}){const h=[];d=d??this.pad_size;const m=[d.height,d.width];for(let p=0;p<n.length;++p){const _=n[p],f=i[p],l=e[p],g=[];for(let v=0;v<l.dims[0];++v){const S=l[v];let T=interpolate(S,m,"bilinear",!1);if(T=T.slice(null,[0,f[0]],[0,f[1]]),T=interpolate(T,_,"bilinear",!1),u){const E=new Uint8Array(T.data.length);for(let O=0;O<T.data.length;++O)T.data[O]>o&&(E[O]=1);T=new Tensor("bool",E,T.dims)}g.push(T)}h.push(stack(g))}return h}}class Swin2SRImageProcessor extends ImageFeatureExtractor{pad_image(e,n,i,o={}){const[u,d,h]=n;return super.pad_image(e,n,{width:d+(i-d%i)%i,height:u+(i-u%i)%i},{mode:"symmetric",center:!1,constant_values:-1,...o})}}class VitMatteImageProcessor extends ImageFeatureExtractor{async _call(e,n){Array.isArray(e)||(e=[e]),Array.isArray(n)||(n=[n]);const i=await Promise.all(e.map(d=>this.preprocess(d))),o=await Promise.all(n.map(d=>this.preprocess(d,{do_normalize:!1,do_convert_rgb:!1,do_convert_grayscale:!0})));return{pixel_values:stack(i.map((d,h)=>cat([d.pixel_values,o[h].pixel_values],0)),0),original_sizes:i.map(d=>d.original_size),reshaped_input_sizes:i.map(d=>d.reshaped_input_size)}}}class WhisperFeatureExtractor extends FeatureExtractor{constructor(e){super(e),this.config.mel_filters??=mel_filter_bank(Math.floor(1+this.config.n_fft/2),this.config.feature_size,0,8e3,this.config.sampling_rate,"slaney","slaney"),this.window=window_function(this.config.n_fft,"hann")}_extract_fbank_features(e){const{data:n,dims:i}=spectrogram(e,this.window,this.config.n_fft,this.config.hop_length,{power:2,mel_filters:this.config.mel_filters,log_mel:"log10",max_num_frames:this.config.nb_max_frames}),o=max(n)[0];for(let u=0;u<n.length;++u)n[u]=(Math.max(n[u],o-8)+4)/4;return{data:n,dims:i}}async _call(e){validate_audio_inputs(e,"WhisperFeatureExtractor");let n;e.length>this.config.n_samples?(console.warn("Attempting to extract features for audio longer than 30 seconds. If using a pipeline to extract transcript from a long audio clip, remember to specify `chunk_length_s` and/or `stride_length_s`."),n=e.slice(0,this.config.n_samples)):(n=new Float32Array(this.config.n_samples),n.set(e));const{data:i,dims:o}=this._extract_fbank_features(n);return{input_features:new Tensor("float32",i,[1,...o])}}}class Wav2Vec2FeatureExtractor extends FeatureExtractor{_zero_mean_unit_var_norm(e){const i=e.reduce((u,d)=>u+d,0)/e.length,o=e.reduce((u,d)=>u+(d-i)**2,0)/e.length;return e.map(u=>(u-i)/Math.sqrt(o+1e-7))}async _call(e){validate_audio_inputs(e,"Wav2Vec2FeatureExtractor"),e instanceof Float64Array&&(e=new Float32Array(e));let n=e;this.config.do_normalize&&(n=this._zero_mean_unit_var_norm(n));const i=[1,n.length];return{input_values:new Tensor("float32",n,i),attention_mask:new Tensor("int64",new BigInt64Array(n.length).fill(1n),i)}}}class SeamlessM4TFeatureExtractor extends FeatureExtractor{constructor(e){super(e);const n=this.config.sampling_rate,i=mel_filter_bank(256,this.config.num_mel_bins,20,Math.floor(n/2),n,null,"kaldi",!0);for(let o=0;o<i.length;++o)i[o].push(0);this.mel_filters=i,this.window=window_function(400,"povey",{periodic:!1})}_extract_fbank_features(e,n){return e=e.map(i=>i*32768),spectrogram(e,this.window,400,160,{fft_length:512,power:2,center:!1,preemphasis:.97,mel_filters:this.mel_filters,log_mel:"log",mel_floor:1192092955078125e-22,remove_dc_offset:!0,max_num_frames:n,transpose:!0})}async _call(e,{padding:n=!0,pad_to_multiple_of:i=2,do_normalize_per_mel_bins:o=!0,return_attention_mask:u=!0}={}){validate_audio_inputs(e,"SeamlessM4TFeatureExtractor");let d=this._extract_fbank_features(e,this.config.max_length);if(o){const[v,S]=d.dims;for(let T=0;T<S;++T){let E=0;for(let C=0;C<v;++C)E+=d.data[C*S+T];const O=E/v;let R=0;for(let C=0;C<v;++C)R+=(d.data[C*S+T]-O)**2;R/=v-1;const M=Math.sqrt(R+1e-7);for(let C=0;C<v;++C){const j=C*S+T;d.data[j]=(d.data[j]-O)/M}}}let h;if(n){const[v,S]=d.dims,T=v%i;if(T>0){const E=new Float32Array(S*(v+T));E.set(d.data),E.fill(this.config.padding_value,d.data.length);const O=v+T;d={data:E,dims:[O,S]},u&&(h=new Tensor("int64",new BigInt64Array(O),[1,O]),h.data.fill(1n,0,v))}}const[m,p]=d.dims,_=this.config.stride;if(m%_!==0)throw new Error(`The number of frames (${m}) must be a multiple of the stride (${_}).`);const l=new Tensor("float32",d.data,d.dims).view(1,Math.floor(m/_),p*_),g={input_features:l};if(u){const v=l.dims[1],S=new Tensor("int64",new BigInt64Array(v),[1,v]);if(h)for(let T=1,E=0;T<m;T+=_,++E)S.data[E]=h.data[T];else S.data.fill(1n);g.attention_mask=S}return g}}class ASTFeatureExtractor extends FeatureExtractor{constructor(e){super(e);const n=this.config.sampling_rate,i=mel_filter_bank(256,this.config.num_mel_bins,20,Math.floor(n/2),n,null,"kaldi",!0);for(let o=0;o<i.length;++o)i[o].push(0);this.mel_filters=i,this.window=window_function(400,"hann",{periodic:!1}),this.mean=this.config.mean,this.std=this.config.std}_extract_fbank_features(e,n){return spectrogram(e,this.window,400,160,{fft_length:512,power:2,center:!1,preemphasis:.97,mel_filters:this.mel_filters,log_mel:"log",mel_floor:1192092955078125e-22,remove_dc_offset:!0,max_num_frames:n,transpose:!0})}async _call(e){validate_audio_inputs(e,"ASTFeatureExtractor");const n=this._extract_fbank_features(e,this.config.max_length);if(this.config.do_normalize){const i=this.std*2;for(let o=0;o<n.data.length;++o)n.data[o]=(n.data[o]-this.mean)/i}return{input_values:new Tensor("float32",n.data,[1,...n.dims])}}}class ClapFeatureExtractor extends FeatureExtractor{constructor(e){super(e),this.mel_filters=mel_filter_bank(this.config.nb_frequency_bins,this.config.feature_size,this.config.frequency_min,this.config.frequency_max,this.config.sampling_rate,null,"htk"),this.mel_filters_slaney=mel_filter_bank(this.config.nb_frequency_bins,this.config.feature_size,this.config.frequency_min,this.config.frequency_max,this.config.sampling_rate,"slaney","slaney"),this.window=window_function(this.config.fft_window_size,"hann")}_get_input_mel(e,n,i,o){let u,d=!1;const h=e.length-n;if(h>0)if(i==="rand_trunc"){d=!0;const m=Math.floor(Math.random()*(h+1));e=e.subarray(m,m+n),u=this._extract_fbank_features(e,this.mel_filters_slaney,this.config.nb_max_samples),u.dims=[1,...u.dims]}else throw new Error(`Truncation strategy "${i}" not implemented`);else{if(h<0){let m=new Float64Array(n);if(m.set(e),o==="repeat")for(let p=e.length;p<n;p+=e.length)m.set(e.subarray(0,Math.min(e.length,n-p)),p);else if(o==="repeatpad")for(let p=e.length;p<-h;p+=e.length)m.set(e,p);e=m}if(i==="fusion")throw new Error(`Truncation strategy "${i}" not implemented`);u=this._extract_fbank_features(e,this.mel_filters_slaney,this.config.nb_max_samples),u.dims=[1,...u.dims]}return{...u,longer:d}}_extract_fbank_features(e,n,i=null){return spectrogram(e,this.window,this.config.fft_window_size,this.config.hop_length,{power:2,mel_filters:n,log_mel:"dB",max_num_frames:i,do_pad:!1,transpose:!0})}async _call(e,{max_length:n=null}={}){validate_audio_inputs(e,"ClapFeatureExtractor");const i=this._get_input_mel(e,n??this.config.nb_max_samples,this.config.truncation,this.config.padding);return{input_features:new Tensor("float32",i.data,[1,...i.dims])}}}class SpeechT5FeatureExtractor extends FeatureExtractor{}class Processor extends Callable{constructor(e){super(),this.feature_extractor=e}async _call(e,...n){return await this.feature_extractor(e,...n)}}class SamProcessor extends Processor{async _call(...e){return await this.feature_extractor(...e)}post_process_masks(...e){return this.feature_extractor.post_process_masks(...e)}reshape_input_points(...e){return this.feature_extractor.reshape_input_points(...e)}}class WhisperProcessor extends Processor{async _call(e){return await this.feature_extractor(e)}}class Wav2Vec2ProcessorWithLM extends Processor{async _call(e){return await this.feature_extractor(e)}}class SpeechT5Processor extends Processor{async _call(e){return await this.feature_extractor(e)}}class OwlViTProcessor extends Processor{}class AutoProcessor{static FEATURE_EXTRACTOR_CLASS_MAPPING={ImageFeatureExtractor,WhisperFeatureExtractor,ViTFeatureExtractor,MobileViTFeatureExtractor,MobileViTImageProcessor,OwlViTFeatureExtractor,Owlv2ImageProcessor,CLIPFeatureExtractor,ChineseCLIPFeatureExtractor,SiglipImageProcessor,ConvNextFeatureExtractor,ConvNextImageProcessor,SegformerFeatureExtractor,BitImageProcessor,DPTImageProcessor,DPTFeatureExtractor,GLPNFeatureExtractor,BeitFeatureExtractor,DeiTFeatureExtractor,DetrFeatureExtractor,YolosFeatureExtractor,DonutFeatureExtractor,NougatImageProcessor,EfficientNetImageProcessor,ViTImageProcessor,VitMatteImageProcessor,SamImageProcessor,Swin2SRImageProcessor,Wav2Vec2FeatureExtractor,SeamlessM4TFeatureExtractor,SpeechT5FeatureExtractor,ASTFeatureExtractor,ClapFeatureExtractor};static PROCESSOR_CLASS_MAPPING={WhisperProcessor,Wav2Vec2ProcessorWithLM,SamProcessor,SpeechT5Processor,OwlViTProcessor};static async from_pretrained(e,{progress_callback:n=null,config:i=null,cache_dir:o=null,local_files_only:u=!1,revision:d="main"}={}){let h=i??await getModelJSON(e,"preprocessor_config.json",!0,{progress_callback:n,cache_dir:o,local_files_only:u,revision:d}),m=h.feature_extractor_type??h.image_processor_type,p=this.FEATURE_EXTRACTOR_CLASS_MAPPING[m];if(!p)if(h.size!==void 0)console.warn(`Feature extractor type "${m}" not found, assuming ImageFeatureExtractor due to size parameter in config.`),p=ImageFeatureExtractor;else throw new Error(`Unknown Feature Extractor type: ${m}`);let _=this.PROCESSOR_CLASS_MAPPING[h.processor_class]??Processor,f=new p(h);return new _(f)}}async function prepareImages(t){return Array.isArray(t)||(t=[t]),await Promise.all(t.map(e=>RawImage.read(e)))}async function prepareAudios(t,e){return Array.isArray(t)||(t=[t]),await Promise.all(t.map(n=>typeof n=="string"||n instanceof URL?read_audio(n,e):n instanceof Float64Array?new Float32Array(n):n))}function get_bounding_box(t,e){e&&(t=t.map(d=>d|0));const[n,i,o,u]=t;return{xmin:n,ymin:i,xmax:o,ymax:u}}class Pipeline extends Callable{constructor({task:e,model:n,tokenizer:i=null,processor:o=null}){super(),this.task=e,this.model=n,this.tokenizer=i,this.processor=o}async dispose(){await this.model.dispose()}}class TextClassificationPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{topk:n=1}={}){const i=this.tokenizer(e,{padding:!0,truncation:!0}),o=await this.model(i),u=this.model.config.problem_type==="multi_label_classification"?m=>m.sigmoid().data:m=>softmax(m.data),d=this.model.config.id2label,h=[];for(const m of o.logits){const p=u(m),f=getTopItems(p,n).map(l=>({label:d[l[0]],score:l[1]}));n===1?h.push(...f):h.push(f)}return Array.isArray(e)||n===1?h:h[0]}}class TokenClassificationPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{ignore_labels:n=["O"]}={}){const i=Array.isArray(e),o=this.tokenizer(i?e:[e],{padding:!0,truncation:!0}),d=(await this.model(o)).logits,h=this.model.config.id2label,m=[];for(let p=0;p<d.dims[0];++p){const _=o.input_ids[p],f=d[p],l=[];for(let g=0;g<f.dims[0];++g){const v=f[g],S=max(v.data)[1],T=h?h[S]:`LABEL_${S}`;if(n.includes(T))continue;const E=this.tokenizer.decode([_[g].item()],{skip_special_tokens:!0});if(E==="")continue;const O=softmax(v.data);l.push({entity:T,score:O[S],index:g,word:E,start:null,end:null})}m.push(l)}return i?m:m[0]}}class QuestionAnsweringPipeline extends Pipeline{constructor(e){super(e)}async _call(e,n,{topk:i=1}={}){const o=this.tokenizer(e,{text_pair:n,padding:!0,truncation:!0}),u=await this.model(o),d=[];for(let h=0;h<u.start_logits.dims[0];++h){const m=o.input_ids[h],p=m.indexOf(this.tokenizer.sep_token_id),_=Array.from(softmax(u.start_logits[h].data)).map((g,v)=>[g,v]).filter(g=>g[1]>p),f=Array.from(softmax(u.end_logits[h].data)).map((g,v)=>[g,v]).filter(g=>g[1]>p),l=product(_,f).filter(g=>g[0][1]<=g[1][1]).map(g=>[g[0][1],g[1][1],g[0][0]*g[1][0]]).sort((g,v)=>v[2]-g[2]);for(let g=0;g<Math.min(l.length,i);++g){const[v,S,T]=l[g],E=[...m].slice(v,S+1),O=this.tokenizer.decode(E,{skip_special_tokens:!0});d.push({answer:O,score:T})}}return i===1?d[0]:d}}class FillMaskPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{topk:n=5}={}){const i=this.tokenizer(e,{padding:!0,truncation:!0}),o=await this.model(i),u=[];for(let d=0;d<i.input_ids.dims[0];++d){const h=i.input_ids[d],m=h.indexOf(this.tokenizer.mask_token_id);if(m===-1)throw Error(`Mask token (${this.tokenizer.mask_token}) not found in text.`);const _=o.logits[d][m],f=getTopItems(softmax(_.data),n);u.push(f.map(l=>{const g=[...h];return g[m]=l[0],{score:l[1],token:l[0],token_str:this.tokenizer.model.vocab[l[0]],sequence:this.tokenizer.decode(g,{skip_special_tokens:!0})}}))}return Array.isArray(e)?u:u[0]}}class Text2TextGenerationPipeline extends Pipeline{_key="generated_text";constructor(e){super(e)}async _call(e,n={}){Array.isArray(e)||(e=[e]),this.model.config.prefix&&(e=e.map(m=>this.model.config.prefix+m));const i=this.model.config.task_specific_params;i&&i[this.task]&&i[this.task].prefix&&(e=e.map(m=>i[this.task].prefix+m));const o=this.tokenizer,u={padding:!0,truncation:!0};let d;this instanceof TranslationPipeline&&"_build_translation_inputs"in o?d=o._build_translation_inputs(e,u,n).input_ids:d=o(e,u).input_ids;const h=await this.model.generate(d,n);return o.batch_decode(h,{skip_special_tokens:!0}).map(m=>({[this._key]:m}))}}class SummarizationPipeline extends Text2TextGenerationPipeline{_key="summary_text";constructor(e){super(e)}}class TranslationPipeline extends Text2TextGenerationPipeline{_key="translation_text";constructor(e){super(e)}}function isChat(t){return Array.isArray(t)&&t.every(e=>"role"in e&&"content"in e)}class TextGenerationPipeline extends Pipeline{constructor(e){super(e)}async _call(e,n={}){let i=!1,o=!1,u;if(typeof e=="string")u=e=[e];else if(Array.isArray(e)&&e.every(v=>typeof v=="string"))i=!0,u=e;else{if(isChat(e))e=[e];else if(Array.isArray(e)&&e.every(isChat))i=!0;else throw new Error("Input must be a string, an array of strings, a Chat, or an array of Chats");o=!0,u=e.map(v=>this.tokenizer.apply_chat_template(v,{tokenize:!1,add_generation_prompt:!0}))}const d=n.add_special_tokens??!1,h=o?!1:n.return_full_text??!0;this.tokenizer.padding_side="left";const{input_ids:m,attention_mask:p}=this.tokenizer(u,{add_special_tokens:d,padding:!0,truncation:!0}),_=await this.model.generate(m,n,null,{inputs_attention_mask:p});let f=this.tokenizer.batch_decode(_,{skip_special_tokens:!0}),l;!h&&m.dims.at(-1)>0&&(l=this.tokenizer.batch_decode(m,{skip_special_tokens:!0}).map(v=>v.length));const g=Array.from({length:e.length},v=>[]);for(let v=0;v<f.length;++v){const S=Math.floor(v/_.length*e.length);l&&(f[v]=f[v].slice(l[S])),g[S].push({generated_text:o?[...e[S],{role:"assistant",content:f[v]}]:f[v]})}return!i&&g.length===1?g[0]:g}}class ZeroShotClassificationPipeline extends Pipeline{constructor(e){super(e),this.label2id=Object.fromEntries(Object.entries(this.model.config.label2id).map(([n,i])=>[n.toLowerCase(),i])),this.entailment_id=this.label2id.entailment,this.entailment_id===void 0&&(console.warn("Could not find 'entailment' in label2id mapping. Using 2 as entailment_id."),this.entailment_id=2),this.contradiction_id=this.label2id.contradiction??this.label2id.not_entailment,this.contradiction_id===void 0&&(console.warn("Could not find 'contradiction' in label2id mapping. Using 0 as contradiction_id."),this.contradiction_id=0)}async _call(e,n,{hypothesis_template:i="This example is {}.",multi_label:o=!1}={}){const u=Array.isArray(e);u||(e=[e]),Array.isArray(n)||(n=[n]);const d=n.map(p=>i.replace("{}",p)),h=o||n.length===1,m=[];for(const p of e){const _=[];for(const g of d){const v=this.tokenizer(p,{text_pair:g,padding:!0,truncation:!0}),S=await this.model(v);h?_.push([S.logits.data[this.contradiction_id],S.logits.data[this.entailment_id]]):_.push(S.logits.data[this.entailment_id])}const l=(h?_.map(g=>softmax(g)[1]):softmax(_)).map((g,v)=>[g,v]).sort((g,v)=>v[0]-g[0]);m.push({sequence:p,labels:l.map(g=>n[g[1]]),scores:l.map(g=>g[0])})}return u?m:m[0]}}class FeatureExtractionPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{pooling:n="none",normalize:i=!1,quantize:o=!1,precision:u="binary"}={}){const d=this.tokenizer(e,{padding:!0,truncation:!0}),h=await this.model(d);let m=h.last_hidden_state??h.logits??h.token_embeddings;if(n!=="none")if(n==="mean")m=mean_pooling(m,d.attention_mask);else if(n==="cls")m=m.slice(null,0);else throw Error(`Pooling method '${n}' not supported.`);return i&&(m=m.normalize(2,-1)),o&&(m=quantize_embeddings(m,u)),m}}class ImageFeatureExtractionPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{pool:n=null}={}){const i=await prepareImages(e),{pixel_values:o}=await this.processor(i),u=await this.model({pixel_values:o});let d;if(n){if(!("pooler_output"in u))throw Error("No pooled output was returned. Make sure the model has a 'pooler' layer when using the 'pool' option.");d=u.pooler_output}else d=u.last_hidden_state??u.logits??u.image_embeds;return d}}class AudioClassificationPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{topk:n=null}={}){const i=!Array.isArray(e),o=this.processor.feature_extractor.config.sampling_rate,u=await prepareAudios(e,o),d=this.model.config.id2label,h=[];for(const m of u){const p=await this.processor(m),f=(await this.model(p)).logits[0],g=getTopItems(softmax(f.data),n).map(v=>({label:d[v[0]],score:v[1]}));n===1?h.push(...g):h.push(g)}return!i||n===1?h:h[0]}}class ZeroShotAudioClassificationPipeline extends Pipeline{constructor(e){super(e)}async _call(e,n,{hypothesis_template:i="This is a sound of {}."}={}){const o=!Array.isArray(e);o&&(e=[e]);const u=n.map(_=>i.replace("{}",_)),d=this.tokenizer(u,{padding:!0,truncation:!0}),h=this.processor.feature_extractor.config.sampling_rate,m=await prepareAudios(e,h),p=[];for(const _ of m){const f=await this.processor(_),l=await this.model({...d,...f}),g=softmax(l.logits_per_audio.data);p.push([...g].map((v,S)=>({score:v,label:n[S]})))}return o?p[0]:p}}class AutomaticSpeechRecognitionPipeline extends Pipeline{constructor(e){super(e)}async _call(e,n={}){switch(this.model.config.model_type){case"whisper":return this._call_whisper(e,n);case"wav2vec2":case"wav2vec2-bert":case"unispeech":case"unispeech-sat":case"hubert":return this._call_wav2vec2(e,n);default:throw new Error(`AutomaticSpeechRecognitionPipeline does not support model type '${this.model.config.model_type}'.`)}}async _call_wav2vec2(e,n={}){n.language&&console.warn('`language` parameter is not yet supported for `wav2vec2` models, defaulting to "English".'),n.task&&console.warn('`task` parameter is not yet supported for `wav2vec2` models, defaulting to "transcribe".');const i=!Array.isArray(e);i&&(e=[e]);const o=this.processor.feature_extractor.config.sampling_rate,u=await prepareAudios(e,o),d=[];for(const h of u){const m=await this.processor(h),_=(await this.model(m)).logits[0],f=[];for(const g of _)f.push(max(g.data)[1]);const l=this.tokenizer.decode(f);d.push({text:l})}return i?d[0]:d}async _call_whisper(e,n={}){const i=n.return_timestamps??!1,o=n.chunk_length_s??0,u=n.chunk_callback??null,d=n.force_full_sequences??!1;let h=n.stride_length_s??null;i==="word"&&(n.return_token_timestamps=!0);const m=pop(n,"language",null),p=pop(n,"task",null);if(m||p||i){if(n.forced_decoder_ids)throw new Error("Cannot specify `language`/`task`/`return_timestamps` and `forced_decoder_ids` at the same time.");const T=this.tokenizer.get_decoder_prompt_ids({language:m,task:p,no_timestamps:!i});T.length>0&&(n.forced_decoder_ids=T)}const _=!Array.isArray(e);_&&(e=[e]);const f=this.processor.feature_extractor.config.chunk_length/this.model.config.max_source_positions,l=this.processor.feature_extractor.config.hop_length,g=this.processor.feature_extractor.config.sampling_rate,v=await prepareAudios(e,g),S=[];for(const T of v){let E=[];if(o>0){if(h===null)h=o/6;else if(o<=h)throw Error("`chunk_length_s` must be larger than `stride_length_s`.");const M=g*o,C=g*h,j=M-2*C;let $=0;for(;$<T.length;){const L=T.subarray($,$+M),N=await this.processor(L),B=$===0,U=$+j>=T.length;E.push({stride:[L.length,B?0:C,U?0:C],input_features:N.input_features,is_last:U}),$+=j}}else E=[{stride:[T.length,0,0],input_features:(await this.processor(T)).input_features,is_last:!0}];for(const M of E){n.num_frames=Math.floor(M.stride[0]/l);const C=await this.model.generate(M.input_features,n);i==="word"?(M.tokens=C.sequences[0],M.token_timestamps=C.token_timestamps.tolist()[0].map(j=>round(j,2))):M.tokens=C[0],M.stride=M.stride.map(j=>j/g),u!==null&&u(M)}const[O,R]=this.tokenizer._decode_asr(E,{time_precision:f,return_timestamps:i,force_full_sequences:d});S.push({text:O,...R})}return _?S[0]:S}}class ImageToTextPipeline extends Pipeline{constructor(e){super(e)}async _call(e,n={}){const i=Array.isArray(e),o=await prepareImages(e),{pixel_values:u}=await this.processor(o),d=[];for(const h of u){h.dims=[1,...h.dims];const m=await this.model.generate(h,n),p=this.tokenizer.batch_decode(m,{skip_special_tokens:!0}).map(_=>({generated_text:_.trim()}));d.push(p)}return i?d:d[0]}}class ImageClassificationPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{topk:n=1}={}){const i=Array.isArray(e),o=await prepareImages(e),{pixel_values:u}=await this.processor(o),d=await this.model({pixel_values:u}),h=this.model.config.id2label,m=[];for(const p of d.logits){const f=getTopItems(softmax(p.data),n).map(l=>({label:h[l[0]],score:l[1]}));n===1?m.push(...f):m.push(f)}return i||n===1?m:m[0]}}class ImageSegmentationPipeline extends Pipeline{constructor(e){super(e),this.subtasks_mapping={panoptic:"post_process_panoptic_segmentation",instance:"post_process_instance_segmentation",semantic:"post_process_semantic_segmentation"}}async _call(e,{threshold:n=.5,mask_threshold:i=.5,overlap_mask_area_threshold:o=.8,label_ids_to_fuse:u=null,target_sizes:d=null,subtask:h=null}={}){if(Array.isArray(e)&&e.length!==1)throw Error("Image segmentation pipeline currently only supports a batch size of 1.");const p=await prepareImages(e),_=p.map(E=>[E.height,E.width]),{pixel_values:f,pixel_mask:l}=await this.processor(p),g=await this.model({pixel_values:f,pixel_mask:l});let v=null;if(h!==null)v=this.subtasks_mapping[h];else for(let[E,O]of Object.entries(this.subtasks_mapping))if(O in this.processor.feature_extractor){v=this.processor.feature_extractor[O].bind(this.processor.feature_extractor),h=E;break}const S=this.model.config.id2label,T=[];if(h==="panoptic"||h==="instance"){const E=v(g,n,i,o,u,d??_)[0],O=E.segmentation;for(const R of E.segments_info){const M=new Uint8ClampedArray(O.data.length);for(let j=0;j<O.data.length;++j)O.data[j]===R.id&&(M[j]=255);const C=new RawImage(M,O.dims[1],O.dims[0],1);T.push({score:R.score,label:S[R.label_id],mask:C})}}else if(h==="semantic"){const{segmentation:E,labels:O}=v(g,d??_)[0];for(const R of O){const M=new Uint8ClampedArray(E.data.length);for(let j=0;j<E.data.length;++j)E.data[j]===R&&(M[j]=255);const C=new RawImage(M,E.dims[1],E.dims[0],1);T.push({score:null,label:S[R],mask:C})}}else throw Error(`Subtask ${h} not supported.`);return T}}class ZeroShotImageClassificationPipeline extends Pipeline{constructor(e){super(e)}async _call(e,n,{hypothesis_template:i="This is a photo of {}"}={}){const o=Array.isArray(e),u=await prepareImages(e),d=n.map(l=>i.replace("{}",l)),h=this.tokenizer(d,{padding:this.model.config.model_type==="siglip"?"max_length":!0,truncation:!0}),{pixel_values:m}=await this.processor(u),p=await this.model({...h,pixel_values:m}),_=this.model.config.model_type==="siglip"?l=>l.sigmoid().data:l=>softmax(l.data),f=[];for(const l of p.logits_per_image){const v=[..._(l)].map((S,T)=>({score:S,label:n[T]}));v.sort((S,T)=>T.score-S.score),f.push(v)}return o?f:f[0]}}class ObjectDetectionPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{threshold:n=.9,percentage:i=!1}={}){const o=Array.isArray(e);if(o&&e.length!==1)throw Error("Object detection pipeline currently only supports a batch size of 1.");const u=await prepareImages(e),d=i?null:u.map(g=>[g.height,g.width]),{pixel_values:h,pixel_mask:m}=await this.processor(u),p=await this.model({pixel_values:h,pixel_mask:m}),_=this.processor.feature_extractor.post_process_object_detection(p,n,d),f=this.model.config.id2label,l=_.map(g=>g.boxes.map((v,S)=>({score:g.scores[S],label:f[g.classes[S]],box:get_bounding_box(v,!i)})));return o?l:l[0]}}class ZeroShotObjectDetectionPipeline extends Pipeline{constructor(e){super(e)}async _call(e,n,{threshold:i=.1,topk:o=null,percentage:u=!1}={}){const d=Array.isArray(e),h=await prepareImages(e),m=this.tokenizer(n,{padding:!0,truncation:!0}),p=await this.processor(h),_=[];for(let f=0;f<h.length;++f){const l=h[f],g=u?null:[[l.height,l.width]],v=p.pixel_values[f].unsqueeze_(0),S=await this.model({...m,pixel_values:v}),T=this.processor.feature_extractor.post_process_object_detection(S,i,g,!0)[0];let E=T.boxes.map((O,R)=>({score:T.scores[R],label:n[T.classes[R]],box:get_bounding_box(O,!u)})).sort((O,R)=>R.score-O.score);o!==null&&(E=E.slice(0,o)),_.push(E)}return d?_:_[0]}}class DocumentQuestionAnsweringPipeline extends Pipeline{constructor(e){super(e)}async _call(e,n,i={}){const o=(await prepareImages(e))[0],{pixel_values:u}=await this.processor(o),d=`<s_docvqa><s_question>${n}</s_question><s_answer>`,h=this.tokenizer(d,{add_special_tokens:!1,padding:!0,truncation:!0}).input_ids,m=await this.model.generate(u,{...i,decoder_input_ids:h,max_length:this.model.config.decoder.max_position_embeddings}),_=this.tokenizer.batch_decode(m)[0].match(/<s_answer>(.*?)<\/s_answer>/);let f=null;return _&&_.length>=2&&(f=_[1].trim()),[{answer:f}]}}class TextToAudioPipeline extends Pipeline{DEFAULT_VOCODER_ID="Xenova/speecht5_hifigan";constructor(e){super(e),this.vocoder=e.vocoder??null}async _call(e,{speaker_embeddings:n=null}={}){return this.processor?this._call_text_to_spectrogram(e,{speaker_embeddings:n}):this._call_text_to_waveform(e)}async _call_text_to_waveform(e){const n=this.tokenizer(e,{padding:!0,truncation:!0}),{waveform:i}=await this.model(n),o=this.model.config.sampling_rate;return{audio:i.data,sampling_rate:o}}async _call_text_to_spectrogram(e,{speaker_embeddings:n}){if(this.vocoder||(console.log("No vocoder specified, using default HifiGan vocoder."),this.vocoder=await AutoModel.from_pretrained(this.DEFAULT_VOCODER_ID,{quantized:!1})),(typeof n=="string"||n instanceof URL)&&(n=new Float32Array(await(await fetch(n)).arrayBuffer())),n instanceof Float32Array)n=new Tensor("float32",n,[1,n.length]);else if(!(n instanceof Tensor))throw new Error("Speaker embeddings must be a `Tensor`, `Float32Array`, `string`, or `URL`.");const{input_ids:i}=this.tokenizer(e,{padding:!0,truncation:!0}),{waveform:o}=await this.model.generate_speech(i,n,{vocoder:this.vocoder}),u=this.processor.feature_extractor.config.sampling_rate;return{audio:o.data,sampling_rate:u}}}class ImageToImagePipeline extends Pipeline{constructor(e){super(e)}async _call(e){const n=await prepareImages(e),i=await this.processor(n),o=await this.model(i),u=[];for(const d of o.reconstruction){const h=d.squeeze().clamp_(0,1).mul_(255).round_().to("uint8");u.push(RawImage.fromTensor(h))}return u.length>1?u:u[0]}}class DepthEstimationPipeline extends Pipeline{constructor(e){super(e)}async _call(e){const n=await prepareImages(e),i=await this.processor(n),{predicted_depth:o}=await this.model(i),u=[];for(let d=0;d<n.length;++d){const h=interpolate(o[d],n[d].size.reverse(),"bilinear",!1),m=h.mul_(255/max(h.data)[0]).to("uint8");u.push({predicted_depth:o[d],depth:RawImage.fromTensor(m)})}return u.length>1?u:u[0]}}const SUPPORTED_TASKS=Object.freeze({"text-classification":{tokenizer:AutoTokenizer,pipeline:TextClassificationPipeline,model:AutoModelForSequenceClassification,default:{model:"Xenova/distilbert-base-uncased-finetuned-sst-2-english"},type:"text"},"token-classification":{tokenizer:AutoTokenizer,pipeline:TokenClassificationPipeline,model:AutoModelForTokenClassification,default:{model:"Xenova/bert-base-multilingual-cased-ner-hrl"},type:"text"},"question-answering":{tokenizer:AutoTokenizer,pipeline:QuestionAnsweringPipeline,model:AutoModelForQuestionAnswering,default:{model:"Xenova/distilbert-base-cased-distilled-squad"},type:"text"},"fill-mask":{tokenizer:AutoTokenizer,pipeline:FillMaskPipeline,model:AutoModelForMaskedLM,default:{model:"Xenova/bert-base-uncased"},type:"text"},summarization:{tokenizer:AutoTokenizer,pipeline:SummarizationPipeline,model:AutoModelForSeq2SeqLM,default:{model:"Xenova/distilbart-cnn-6-6"},type:"text"},translation:{tokenizer:AutoTokenizer,pipeline:TranslationPipeline,model:AutoModelForSeq2SeqLM,default:{model:"Xenova/t5-small"},type:"text"},"text2text-generation":{tokenizer:AutoTokenizer,pipeline:Text2TextGenerationPipeline,model:AutoModelForSeq2SeqLM,default:{model:"Xenova/flan-t5-small"},type:"text"},"text-generation":{tokenizer:AutoTokenizer,pipeline:TextGenerationPipeline,model:AutoModelForCausalLM,default:{model:"Xenova/gpt2"},type:"text"},"zero-shot-classification":{tokenizer:AutoTokenizer,pipeline:ZeroShotClassificationPipeline,model:AutoModelForSequenceClassification,default:{model:"Xenova/distilbert-base-uncased-mnli"},type:"text"},"audio-classification":{pipeline:AudioClassificationPipeline,model:AutoModelForAudioClassification,processor:AutoProcessor,default:{model:"Xenova/wav2vec2-base-superb-ks"},type:"audio"},"zero-shot-audio-classification":{tokenizer:AutoTokenizer,pipeline:ZeroShotAudioClassificationPipeline,model:AutoModel,processor:AutoProcessor,default:{model:"Xenova/clap-htsat-unfused"},type:"multimodal"},"automatic-speech-recognition":{tokenizer:AutoTokenizer,pipeline:AutomaticSpeechRecognitionPipeline,model:[AutoModelForSpeechSeq2Seq,AutoModelForCTC],processor:AutoProcessor,default:{model:"Xenova/whisper-tiny.en"},type:"multimodal"},"text-to-audio":{tokenizer:AutoTokenizer,pipeline:TextToAudioPipeline,model:[AutoModelForTextToWaveform,AutoModelForTextToSpectrogram],processor:[AutoProcessor,null],default:{model:"Xenova/speecht5_tts"},type:"text"},"image-to-text":{tokenizer:AutoTokenizer,pipeline:ImageToTextPipeline,model:AutoModelForVision2Seq,processor:AutoProcessor,default:{model:"Xenova/vit-gpt2-image-captioning"},type:"multimodal"},"image-classification":{pipeline:ImageClassificationPipeline,model:AutoModelForImageClassification,processor:AutoProcessor,default:{model:"Xenova/vit-base-patch16-224"},type:"multimodal"},"image-segmentation":{pipeline:ImageSegmentationPipeline,model:[AutoModelForImageSegmentation,AutoModelForSemanticSegmentation],processor:AutoProcessor,default:{model:"Xenova/detr-resnet-50-panoptic"},type:"multimodal"},"zero-shot-image-classification":{tokenizer:AutoTokenizer,pipeline:ZeroShotImageClassificationPipeline,model:AutoModel,processor:AutoProcessor,default:{model:"Xenova/clip-vit-base-patch32"},type:"multimodal"},"object-detection":{pipeline:ObjectDetectionPipeline,model:AutoModelForObjectDetection,processor:AutoProcessor,default:{model:"Xenova/detr-resnet-50"},type:"multimodal"},"zero-shot-object-detection":{tokenizer:AutoTokenizer,pipeline:ZeroShotObjectDetectionPipeline,model:AutoModelForZeroShotObjectDetection,processor:AutoProcessor,default:{model:"Xenova/owlvit-base-patch32"},type:"multimodal"},"document-question-answering":{tokenizer:AutoTokenizer,pipeline:DocumentQuestionAnsweringPipeline,model:AutoModelForDocumentQuestionAnswering,processor:AutoProcessor,default:{model:"Xenova/donut-base-finetuned-docvqa"},type:"multimodal"},"image-to-image":{pipeline:ImageToImagePipeline,model:AutoModelForImageToImage,processor:AutoProcessor,default:{model:"Xenova/swin2SR-classical-sr-x2-64"},type:"image"},"depth-estimation":{pipeline:DepthEstimationPipeline,model:AutoModelForDepthEstimation,processor:AutoProcessor,default:{model:"Xenova/dpt-large"},type:"image"},"feature-extraction":{tokenizer:AutoTokenizer,pipeline:FeatureExtractionPipeline,model:AutoModel,default:{model:"Xenova/all-MiniLM-L6-v2"},type:"text"},"image-feature-extraction":{processor:AutoProcessor,pipeline:ImageFeatureExtractionPipeline,model:[AutoModelForImageFeatureExtraction,AutoModel],default:{model:"Xenova/vit-base-patch16-224-in21k"},type:"image"}}),TASK_ALIASES=Object.freeze({"sentiment-analysis":"text-classification",ner:"token-classification",asr:"automatic-speech-recognition","text-to-speech":"text-to-audio",embeddings:"feature-extraction"});async function pipeline(t,e=null,{quantized:n=!0,progress_callback:i=null,config:o=null,cache_dir:u=null,local_files_only:d=!1,revision:h="main",model_file_name:m=null}={}){t=TASK_ALIASES[t]??t;const p=SUPPORTED_TASKS[t.split("_",1)[0]];if(!p)throw Error(`Unsupported pipeline: ${t}. Must be one of [${Object.keys(SUPPORTED_TASKS)}]`);e||(e=p.default.model,console.log(`No model specified. Using default model: "${e}".`));const _={quantized:n,progress_callback:i,config:o,cache_dir:u,local_files_only:d,revision:h,model_file_name:m},f=new Map([["tokenizer",p.tokenizer],["model",p.model],["processor",p.processor]]),l=await loadItems(f,e,_);l.task=t,dispatchCallback(i,{status:"ready",task:t,model:e});const g=p.pipeline;return new g(l)}async function loadItems(t,e,n){const i=Object.create(null),o=[];for(let[u,d]of t.entries()){if(!d)continue;let h;Array.isArray(d)?h=new Promise(async(m,p)=>{let _;for(let f of d){if(f===null){m(null);return}try{m(await f.from_pretrained(e,n));return}catch(l){_=l}}p(_)}):h=d.from_pretrained(e,n),i[u]=h,o.push(h)}await Promise.all(o);for(let[u,d]of Object.entries(i))i[u]=await d;return i}const splashImage="/assets/splash_v2-Dx7wFXFd.jpg";env$1.allowLocalModels=!1;env$1.useBrowserCache=!0;const Sidebar=({activeTab:t,setActiveTab:e,mobileOpen:n,setMobileOpen:i})=>{const o=[{id:"dashboard",label:"Dashboard",icon:LayoutDashboard},{id:"news",label:"Manage News",icon:Newspaper},{id:"shorts",label:"Manage Shorts",icon:Film},{id:"advertisements",label:"Manage Ads",icon:Radio},{id:"approvals",label:"User Approvals",icon:FileCheck},{id:"analytics",label:"Analytics",icon:ChartNoAxesColumn},{id:"app_preview",label:"App View",icon:Smartphone},{id:"settings",label:"Settings",icon:Settings}];return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[n&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden",onClick:()=>i(!1)}),jsxRuntimeExports.jsx("div",{className:`fixed md:static inset-y-0 left-0 z-50 w-64 bg-[#0f172a] border-r border-slate-800 transform transition-transform duration-200 ease-in-out ${n?"translate-x-0":"-translate-x-full md:translate-x-0"}`,children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col h-full",children:[jsxRuntimeExports.jsx("div",{className:"p-6 border-b border-slate-800 flex justify-center",children:jsxRuntimeExports.jsx("img",{src:logoImage,alt:"SAMANYUDU TV",className:"h-16 object-contain"})}),jsxRuntimeExports.jsx("nav",{className:"flex-1 py-6 px-3 space-y-1",children:o.map(u=>jsxRuntimeExports.jsxs("button",{onClick:()=>{e(u.id),i(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors duration-200 ${t===u.id?"bg-yellow-500 text-slate-900 font-semibold":"text-slate-300 hover:bg-slate-800 hover:text-white"}`,children:[jsxRuntimeExports.jsx(u.icon,{size:20}),jsxRuntimeExports.jsx("span",{children:u.label})]},u.id))}),jsxRuntimeExports.jsx("div",{className:"p-4 border-t border-slate-800"})]})})]})},AnalyticsView=({news:t,shorts:e})=>{const n=t.length,i=e.length,o=new Date,u=(f,l)=>f.getDate()===l.getDate()&&f.getMonth()===l.getMonth()&&f.getFullYear()===l.getFullYear(),d=t.filter(f=>u(new Date(f.timestamp),o)).length,h=e.filter(f=>u(new Date(f.timestamp),o)).length,m=Array.from({length:7},(f,l)=>{const g=new Date;g.setDate(g.getDate()-(6-l));const v=g.toLocaleDateString("en-US",{weekday:"short",day:"numeric"}),S=t.filter(E=>u(new Date(E.timestamp),g)).length,T=e.filter(E=>u(new Date(E.timestamp),g)).length;return{date:v,News:S,Shorts:T}}),p=t.reduce((f,l)=>{const g=l.author||"Unknown";return f[g]=(f[g]||0)+1,f},{}),_=Object.entries(p).map(([f,l])=>({name:f,count:l})).sort((f,l)=>l.count-f.count).slice(0,10);return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white",children:"Analytics Overview"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[{label:"Total News Articles",value:n,icon:Newspaper,color:"text-blue-500"},{label:"Total Shorts",value:i,icon:Film,color:"text-purple-500"},{label:"News Uploaded Today",value:d,icon:Database,color:"text-green-500"},{label:"Shorts Uploaded Today",value:h,icon:Video,color:"text-yellow-500"}].map((f,l)=>jsxRuntimeExports.jsxs("div",{className:"bg-slate-800 p-6 rounded-xl border border-slate-700 flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-slate-400 text-sm font-medium",children:f.label}),jsxRuntimeExports.jsx("h3",{className:"text-3xl font-bold text-white mt-2",children:f.value})]}),jsxRuntimeExports.jsx("div",{className:`p-4 bg-slate-700/50 rounded-lg ${f.color}`,children:jsxRuntimeExports.jsx(f.icon,{size:24})})]},l))}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"bg-slate-800 p-6 rounded-xl border border-slate-700",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-white mb-6",children:"News Upload Trends"}),jsxRuntimeExports.jsx("div",{style:{width:"100%",height:300},children:jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"100%",children:jsxRuntimeExports.jsxs(AreaChart,{data:m,margin:{top:10,right:10,left:0,bottom:0},children:[jsxRuntimeExports.jsx("defs",{children:jsxRuntimeExports.jsxs("linearGradient",{id:"colorNews",x1:"0",y1:"0",x2:"0",y2:"1",children:[jsxRuntimeExports.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.8}),jsxRuntimeExports.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:0})]})}),jsxRuntimeExports.jsx(XAxis,{dataKey:"date",stroke:"#94a3b8",tick:{fill:"#94a3b8"},axisLine:{stroke:"#475569"},fontSize:12}),jsxRuntimeExports.jsx(YAxis,{stroke:"#94a3b8",tick:{fill:"#94a3b8"},axisLine:{stroke:"#475569"},fontSize:12,allowDecimals:!1}),jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3",stroke:"#334155",vertical:!1}),jsxRuntimeExports.jsx(Tooltip,{contentStyle:{backgroundColor:"#1e293b",borderColor:"#334155",color:"#f8fafc"}}),jsxRuntimeExports.jsx(Area,{type:"monotone",dataKey:"News",stroke:"#3b82f6",fillOpacity:1,fill:"url(#colorNews)",strokeWidth:2})]})})})]}),jsxRuntimeExports.jsxs("div",{className:"bg-slate-800 p-6 rounded-xl border border-slate-700",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-white mb-6",children:"Shorts Upload Trends"}),jsxRuntimeExports.jsx("div",{style:{width:"100%",height:300},children:jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"100%",children:jsxRuntimeExports.jsxs(AreaChart,{data:m,margin:{top:10,right:10,left:0,bottom:0},children:[jsxRuntimeExports.jsx("defs",{children:jsxRuntimeExports.jsxs("linearGradient",{id:"colorShorts",x1:"0",y1:"0",x2:"0",y2:"1",children:[jsxRuntimeExports.jsx("stop",{offset:"5%",stopColor:"#eab308",stopOpacity:.8}),jsxRuntimeExports.jsx("stop",{offset:"95%",stopColor:"#eab308",stopOpacity:0})]})}),jsxRuntimeExports.jsx(XAxis,{dataKey:"date",stroke:"#94a3b8",tick:{fill:"#94a3b8"},axisLine:{stroke:"#475569"},fontSize:12}),jsxRuntimeExports.jsx(YAxis,{stroke:"#94a3b8",tick:{fill:"#94a3b8"},axisLine:{stroke:"#475569"},fontSize:12,allowDecimals:!1}),jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3",stroke:"#334155",vertical:!1}),jsxRuntimeExports.jsx(Tooltip,{contentStyle:{backgroundColor:"#1e293b",borderColor:"#334155",color:"#f8fafc"}}),jsxRuntimeExports.jsx(Area,{type:"monotone",dataKey:"Shorts",stroke:"#eab308",fillOpacity:1,fill:"url(#colorShorts)",strokeWidth:2})]})})})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-slate-800 p-6 rounded-xl border border-slate-700",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-white mb-6",children:"Top Contributors (Articles)"}),jsxRuntimeExports.jsx("div",{style:{width:"100%",height:350},children:_.length>0?jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"100%",children:jsxRuntimeExports.jsxs(BarChart,{data:_,margin:{top:20,right:30,left:20,bottom:5},children:[jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3",stroke:"#334155",vertical:!1}),jsxRuntimeExports.jsx(XAxis,{dataKey:"name",stroke:"#94a3b8",tick:{fill:"#94a3b8"},axisLine:{stroke:"#475569"}}),jsxRuntimeExports.jsx(YAxis,{stroke:"#94a3b8",tick:{fill:"#94a3b8"},axisLine:{stroke:"#475569"},allowDecimals:!1}),jsxRuntimeExports.jsx(Tooltip,{contentStyle:{backgroundColor:"#1e293b",borderColor:"#334155",color:"#f8fafc"},cursor:{fill:"#334155",opacity:.4}}),jsxRuntimeExports.jsx(Bar,{dataKey:"count",name:"Articles",fill:"#10b981",radius:[4,4,0,0],maxBarSize:60})]})}):jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-full text-slate-500",children:"No contributor data available"})})]})]})},SettingsView=()=>jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white",children:"Settings"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"lg:col-span-1 bg-slate-800 rounded-xl border border-slate-700 p-6 flex flex-col items-center text-center",children:[jsxRuntimeExports.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-slate-700 to-slate-600 rounded-full flex items-center justify-center text-slate-300 mb-4 ring-4 ring-slate-900 shadow-xl",children:jsxRuntimeExports.jsx(CircleUser,{size:48})}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-white",children:"Super Admin"}),jsxRuntimeExports.jsx("p",{className:"text-slate-400 text-sm mb-6",children:"admin@samanyudu.tv"}),jsxRuntimeExports.jsx("button",{className:"w-full py-2 px-4 bg-slate-700 hover:bg-slate-600 text-white rounded-lg text-sm font-medium transition-colors",children:"Edit Profile"})]}),jsxRuntimeExports.jsxs("div",{className:"lg:col-span-2 bg-slate-800 rounded-xl border border-slate-700 p-6 space-y-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-white border-b border-slate-700 pb-2",children:"App Configuration"}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-900/50 rounded-lg border border-slate-700/50",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"p-2 bg-blue-500/10 rounded-lg text-blue-500",children:jsxRuntimeExports.jsx(Bell,{size:20})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-medium text-white",children:"Push Notifications"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-slate-400",children:"Send alerts to users for breaking news"})]})]}),jsxRuntimeExports.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",className:"sr-only peer",defaultChecked:!0}),jsxRuntimeExports.jsx("div",{className:"w-11 h-6 bg-slate-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-500"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-900/50 rounded-lg border border-slate-700/50",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"p-2 bg-yellow-500/10 rounded-lg text-yellow-500",children:jsxRuntimeExports.jsx(Smartphone,{size:20})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-medium text-white",children:"App Maintenance Mode"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-slate-400",children:"Show maintenance screen to users"})]})]}),jsxRuntimeExports.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",className:"sr-only peer"}),jsxRuntimeExports.jsx("div",{className:"w-11 h-6 bg-slate-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-yellow-500"})]})]})]}),jsxRuntimeExports.jsx("div",{className:"pt-4 flex justify-end",children:jsxRuntimeExports.jsx("button",{className:"px-6 py-2 bg-yellow-500 hover:bg-yellow-400 text-slate-900 font-bold rounded-lg transition-colors",children:"Save Changes"})})]})]})]}),useItemInteractions=t=>{const[e,n]=reactExports.useState(()=>localStorage.getItem(`like_${t.id}`)==="true"),[i,o]=reactExports.useState(()=>localStorage.getItem(`saved_${t.id}`)==="true"),[u]=reactExports.useState(t.likes||0),[d,h]=reactExports.useState(u+(e?1:0));reactExports.useEffect(()=>{h(u+(e?1:0)),localStorage.setItem(`like_${t.id}`,e.toString())},[e,u,t.id]),reactExports.useEffect(()=>{localStorage.setItem(`saved_${t.id}`,i.toString())},[i,t.id]);const m=g=>{g.stopPropagation(),n(!e)},p=g=>{g.stopPropagation(),o(!i),toast.success(i?"Removed from Saved":"Saved to your list")},_="title"in t?t.title:"Check this out",f=`Check this out on Samanyudu TV: ${_}`;return{liked:e,saved:i,likeCount:d,handleLike:m,handleSave:p,handleShare:async g=>{if(g.stopPropagation(),navigator.share)try{await navigator.share({title:_,text:f,url:window.location.href})}catch(v){console.log("Share cancelled/failed",v)}else navigator.clipboard.writeText(window.location.href),toast.success("Link copied to clipboard")}}},MediaPlayer=({item:t,onClose:e})=>{if("duration"in t){const _=t,{liked:f,saved:l,likeCount:g,handleLike:v,handleSave:S,handleShare:T}=useItemInteractions(_);return jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/90 backdrop-blur-sm",onClick:e,children:[jsxRuntimeExports.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-white hover:text-yellow-500 transition-colors z-[110] bg-black/50 rounded-full p-2",children:jsxRuntimeExports.jsx(X,{size:32})}),jsxRuntimeExports.jsx("div",{className:"relative bg-slate-900 rounded-xl overflow-hidden shadow-2xl border border-slate-800 aspect-[3/4]",style:{height:"60vh",maxHeight:"600px"},onClick:E=>E.stopPropagation(),children:_.videoUrl?jsxRuntimeExports.jsxs("div",{className:"relative w-full h-full group",children:[jsxRuntimeExports.jsx("video",{src:_.videoUrl,className:"w-full h-full object-cover bg-black",controls:!1,controlsList:"nodownload noremoteplayback",loop:!0,autoPlay:!0,playsInline:!0,onClick:E=>{const O=E.currentTarget;O.paused?O.play():O.pause()},onError:E=>{console.error("Video Error:",E.currentTarget.error,_.videoUrl);const O=E.currentTarget.error?E.currentTarget.error.message:"Unknown Error";toast.error(`Video Error: ${O}. Check URL.`);const R=E.currentTarget.parentElement;if(R){const M=document.createElement("div");M.className="absolute inset-0 flex flex-col items-center justify-center bg-slate-900 p-4 text-center z-10",M.innerHTML=`
                      <div class="text-red-500 mb-2"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" x2="12" y1="8" y2="12"/><line x1="12" x2="12.01" y1="16" y2="16"/></svg></div>
                      <p class="text-white font-bold mb-1">Playback Failed</p>
                      <p class="text-slate-400 text-xs break-all">${_.videoUrl}</p>
                    `,R.appendChild(M),E.currentTarget.style.display="none"}},children:"Your browser does not support the video tag."}),jsxRuntimeExports.jsxs("div",{className:"absolute right-3 bottom-12 flex flex-col items-center gap-6 z-20 pb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center gap-1",children:[jsxRuntimeExports.jsx("button",{onClick:v,className:"group relative transition-transform active:scale-90",children:jsxRuntimeExports.jsx(Heart,{size:32,className:`drop-shadow-lg transition-colors ${f?"fill-red-500 text-red-500":"text-white fill-transparent stroke-[2px]"}`})}),jsxRuntimeExports.jsx("span",{className:"text-white text-[13px] font-medium drop-shadow-md",children:g})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center gap-1",children:[jsxRuntimeExports.jsx("button",{onClick:T,className:"group transition-transform active:scale-90",children:jsxRuntimeExports.jsx(Share2,{size:30,className:"text-white drop-shadow-lg stroke-[2px]"})}),jsxRuntimeExports.jsx("span",{className:"text-white text-[13px] font-medium drop-shadow-md",children:"Share"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center gap-1",children:[jsxRuntimeExports.jsx("button",{onClick:S,className:"group transition-transform active:scale-90",children:jsxRuntimeExports.jsx(Bookmark,{size:30,className:`drop-shadow-lg transition-colors stroke-[2px] ${l?"fill-white text-white":"text-white fill-transparent"}`})}),jsxRuntimeExports.jsx("span",{className:"text-white text-[13px] font-medium drop-shadow-md",children:"Save"})]}),jsxRuntimeExports.jsx("button",{className:"mt-2 transition-transform active:scale-90 opacity-90 hover:opacity-100",children:jsxRuntimeExports.jsx(EllipsisVertical,{size:28,className:"text-white drop-shadow-lg"})}),jsxRuntimeExports.jsx("div",{className:"mt-4 w-10 h-10 rounded-lg bg-gradient-to-tr from-yellow-400 to-yellow-600 border-2 border-white overflow-hidden animate-spin-slow shadow-lg",children:jsxRuntimeExports.jsx("div",{className:"w-full h-full flex items-center justify-center bg-black/20",children:jsxRuntimeExports.jsx(Volume2,{size:16,className:"text-white"})})})]}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 inset-x-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent p-4 pb-6 pointer-events-none z-10",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-start gap-3 w-[80%]",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 pointer-events-auto cursor-pointer",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-100 border border-white p-0.5 overflow-hidden",children:jsxRuntimeExports.jsx("img",{src:logoImage,className:"w-full h-full object-cover rounded-full",alt:"Profile"})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col align-start",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-white font-bold text-sm tracking-wide shadow-black drop-shadow-md",children:"samanyudu.tv"}),jsxRuntimeExports.jsx(CircleCheck,{size:12,className:"text-blue-400 bg-white rounded-full"})]}),jsxRuntimeExports.jsx("span",{className:"text-xs text-slate-200 opacity-90 drop-shadow-md",children:"Original Audio"})]}),jsxRuntimeExports.jsx("button",{className:"ml-2 px-3 py-1 bg-transparent border border-white/40 text-white hover:bg-white/20 text-xs font-semibold rounded-lg transition-colors backdrop-blur-sm",children:"Follow"})]}),jsxRuntimeExports.jsx("div",{className:"pointer-events-auto",children:jsxRuntimeExports.jsxs("p",{className:"text-white text-[15px] leading-snug drop-shadow-md line-clamp-2",children:[_.title,jsxRuntimeExports.jsx("span",{className:"text-slate-300 ml-2 text-sm font-normal",children:"... more"})]})})]})})]}):jsxRuntimeExports.jsxs("div",{className:"w-full h-full flex items-center justify-center text-slate-500 flex-col gap-2",children:[jsxRuntimeExports.jsx(CircleAlert,{size:48}),jsxRuntimeExports.jsx("p",{children:"No video available"})]})})]})}const i=t,{liked:o,saved:u,likeCount:d,handleLike:h,handleSave:m,handleShare:p}=useItemInteractions(i);return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",onClick:e,children:jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-slate-900 w-full max-w-2xl max-h-[90vh] rounded-xl border border-slate-700 shadow-2xl overflow-y-auto relative flex flex-col",onClick:_=>_.stopPropagation(),children:[jsxRuntimeExports.jsxs("div",{className:`relative w-full ${i.videoUrl||i.imageUrl?"bg-black min-h-[200px]":"bg-slate-900 min-h-[50px] border-b border-slate-800"}`,children:[jsxRuntimeExports.jsx("button",{onClick:e,className:"absolute top-3 right-3 z-20 bg-black/50 text-white p-1.5 rounded-full hover:bg-slate-700 hover:text-yellow-500 transition-colors backdrop-blur-md",children:jsxRuntimeExports.jsx(X,{size:18})}),i.videoUrl?jsxRuntimeExports.jsx("div",{className:"w-full aspect-video bg-black",children:jsxRuntimeExports.jsx("video",{src:i.videoUrl,controls:!0,className:"w-full h-full",autoPlay:!0,playsInline:!0})}):i.imageUrl?jsxRuntimeExports.jsx("div",{className:"w-full max-h-[35vh] bg-black flex items-center justify-center overflow-hidden",children:jsxRuntimeExports.jsx("img",{src:i.imageUrl,className:"w-full h-full object-contain",alt:i.title,onError:_=>{console.error("MediaPlayer Image Load Failed:",i.imageUrl),toast.error("Image failed to load. Check bucket permissions."),_.currentTarget.style.display="none"}})}):jsxRuntimeExports.jsxs("div",{className:"w-full h-32 bg-slate-800 flex flex-col items-center justify-center border-b border-slate-700",children:[jsxRuntimeExports.jsx(Image$1,{size:32,className:"text-slate-600 mb-2"}),jsxRuntimeExports.jsx("p",{className:"text-slate-500 text-sm",children:"No image available for this article"})]})]}),jsxRuntimeExports.jsxs("div",{className:"p-6 bg-slate-900",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between border-b border-slate-800 pb-4 mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsxs("button",{onClick:h,className:`flex items-center gap-1.5 px-3 py-1.5 rounded-full transition-colors text-sm font-medium ${o?"bg-red-500/10 text-red-500":"bg-slate-800 text-slate-400 hover:bg-slate-700 hover:text-white border border-slate-700"}`,children:[jsxRuntimeExports.jsx(Heart,{size:16,fill:o?"currentColor":"none"}),jsxRuntimeExports.jsx("span",{children:d>0?d:"Like"})]}),jsxRuntimeExports.jsxs("button",{onClick:p,className:"flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-slate-800 text-slate-400 hover:bg-slate-700 hover:text-white transition-colors border border-slate-700 text-sm font-medium",children:[jsxRuntimeExports.jsx(Share2,{size:16}),jsxRuntimeExports.jsx("span",{children:"Share"})]})]}),jsxRuntimeExports.jsx("button",{onClick:m,className:`p-1.5 rounded-full transition-colors border border-slate-700 ${u?"text-yellow-500 bg-yellow-500/10 border-yellow-500/50":"text-slate-400 hover:text-white hover:bg-slate-800 bg-slate-800"}`,children:jsxRuntimeExports.jsx(Bookmark,{size:18,fill:u?"currentColor":"none"})})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-4",children:[jsxRuntimeExports.jsx("span",{className:"px-2.5 py-1 rounded-md text-xs font-bold bg-yellow-500 text-slate-900 uppercase tracking-wide",children:i.type}),i.isBreaking&&jsxRuntimeExports.jsxs("span",{className:"px-2.5 py-1 rounded-md text-xs font-bold bg-red-600 text-white uppercase tracking-wide flex items-center gap-1",children:[jsxRuntimeExports.jsx(CircleAlert,{size:12})," Breaking"]}),jsxRuntimeExports.jsxs("span",{className:"text-slate-400 text-xs flex items-center gap-1",children:[jsxRuntimeExports.jsx("span",{className:"w-1 h-1 rounded-full bg-slate-500"}),new Date(i.timestamp).toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),jsxRuntimeExports.jsxs("span",{className:"text-slate-400 text-xs flex items-center gap-1",children:[jsxRuntimeExports.jsx("span",{className:"w-1 h-1 rounded-full bg-slate-500"}),i.area]})]}),jsxRuntimeExports.jsx("h2",{className:"text-2xl md:text-2xl font-bold text-white mb-6 leading-tight",children:i.title}),i.liveLink&&jsxRuntimeExports.jsx("div",{className:"mb-6",children:jsxRuntimeExports.jsxs("a",{href:i.liveLink,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-bold rounded-lg transition-colors animate-pulse shadow-lg shadow-red-900/20",children:[jsxRuntimeExports.jsx(Radio,{size:18}),jsxRuntimeExports.jsx("span",{children:"Watch Live Coverage"}),jsxRuntimeExports.jsx(ExternalLink,{size:14,className:"opacity-70"})]})}),jsxRuntimeExports.jsx("div",{className:"text-slate-300 leading-relaxed whitespace-pre-wrap text-base md:text-base border-b border-slate-800 pb-6 mb-4",children:i.description})]})]})})},useTextToSpeech=()=>{const[t,e]=reactExports.useState(null);return reactExports.useEffect(()=>()=>{window.speechSynthesis.cancel()},[]),{playingId:t,handleSpeak:i=>{if(t===i.id){window.speechSynthesis.cancel(),e(null);return}window.speechSynthesis.cancel();const o=`${i.title}. ${i.description}`,u=new SpeechSynthesisUtterance(o);u.rate=.9,u.pitch=1;const d=window.speechSynthesis.getVoices(),h=/[\u0c00-\u0c7f]/.test(o),m=/[\u0900-\u097f]/.test(o);let p=null;if(h){u.lang="te-IN";const _=d.filter(f=>f.lang.includes("te"));p=_.find(f=>f.name.includes("Google"))||_.find(f=>f.name.includes("Kalpana"))||_.find(f=>f.name.toLowerCase().includes("female"))||_[0]}else m?(u.lang="hi-IN",p=d.find(_=>_.lang.includes("hi")&&(_.name.includes("Female")||_.name.includes("Google")))):(p=d.find(_=>_.lang==="en-IN"&&(_.name.includes("Google")||_.name.includes("Heera")||_.name.includes("Rishi")||_.name.toLowerCase().includes("india"))),p||(p=d.find(_=>_.lang==="en-IN")),p||(p=d.find(_=>_.lang.includes("en")&&(_.name.includes("Female")||_.name.includes("Zira")))));p?(u.voice=p,console.log("Selected Voice:",p.name)):console.log("No specific preferred voice found, using default for lang:",u.lang),u.onend=()=>e(null),u.onerror=()=>e(null),e(i.id),window.speechSynthesis.speak(u)}}},DashboardStats=({newsCount:t,shortsCount:e,pendingCount:n})=>jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[jsxRuntimeExports.jsxs("div",{className:"bg-slate-800 p-6 rounded-xl border border-slate-700",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-slate-400 text-sm font-medium",children:"Total News Articles"}),jsxRuntimeExports.jsx("h3",{className:"text-3xl font-bold text-white mt-2",children:t})]}),jsxRuntimeExports.jsx("div",{className:"p-3 bg-blue-500/20 rounded-lg",children:jsxRuntimeExports.jsx(Newspaper,{className:"text-blue-500",size:24})})]}),jsxRuntimeExports.jsx("div",{className:"mt-4 flex items-center text-sm text-green-400",children:jsxRuntimeExports.jsxs("span",{className:"flex items-center",children:[jsxRuntimeExports.jsx(Plus,{size:14,className:"mr-1"})," 12 this week"]})})]}),jsxRuntimeExports.jsxs("div",{className:"bg-slate-800 p-6 rounded-xl border border-slate-700",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-slate-400 text-sm font-medium",children:"Total Shorts/Reels"}),jsxRuntimeExports.jsx("h3",{className:"text-3xl font-bold text-white mt-2",children:e})]}),jsxRuntimeExports.jsx("div",{className:"p-3 bg-purple-500/20 rounded-lg",children:jsxRuntimeExports.jsx(Film,{className:"text-purple-500",size:24})})]}),jsxRuntimeExports.jsx("div",{className:"mt-4 flex items-center text-sm text-green-400",children:jsxRuntimeExports.jsxs("span",{className:"flex items-center",children:[jsxRuntimeExports.jsx(Plus,{size:14,className:"mr-1"})," 5 this week"]})})]}),jsxRuntimeExports.jsxs("div",{className:"bg-slate-800 p-6 rounded-xl border border-slate-700",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-slate-400 text-sm font-medium",children:"Pending Approvals"}),jsxRuntimeExports.jsx("h3",{className:"text-3xl font-bold text-white mt-2",children:n})]}),jsxRuntimeExports.jsx("div",{className:"p-3 bg-orange-500/20 rounded-lg",children:jsxRuntimeExports.jsx(FileCheck,{className:"text-orange-500",size:24})})]}),jsxRuntimeExports.jsx("div",{className:"mt-4 flex items-center text-sm text-yellow-400",children:jsxRuntimeExports.jsx("span",{className:"flex items-center",children:"Requires attention"})})]})]}),NewsForm=({initialData:t,onSave:e,onCancel:n})=>{const[i,o]=reactExports.useState({title:t?.title||"",description:t?.description||"",area:t?.area||"",type:t?.type||"Others",isBreaking:t?.isBreaking||!1,liveLink:t?.liveLink||"",imageUrl:t?.imageUrl||"",videoUrl:t?.videoUrl||""}),u=["Political","Accident","Education","Crime","Weather","Sports","Business","Social","Others"],[d,h]=reactExports.useState(!1),[m,p]=reactExports.useState(!1),[_,f]=reactExports.useState(!1),l=async()=>{if(!i.title||!i.description){toast.error("Please enter both title and description to generate an AI image");return}f(!0);const T=toast.loading("Generating AI Image... (Takes up to 15 seconds)");try{const E=/[\u0C00-\u0C7F]/.test(i.title);let O=i.title;if(E){toast.loading("Translating prompt...",{id:T});try{const L=await(await pipeline("translation","Xenova/opus-mt-te-en"))(i.title);L&&L[0]&&L[0].translation_text&&(O=L[0].translation_text)}catch($){console.warn("Translation for image prompt failed",$)}}toast.loading("Generating AI Image...",{id:T});const R=`Realistic news thumbnail. Headline: ${O}. No text in the image. High quality photography.`,M=encodeURIComponent(R),C=Math.floor(Math.random()*1e6),j=`https://image.pollinations.ai/prompt/${M}?width=800&height=450&nologo=true&seed=${C}`;o($=>({...$,imageUrl:j})),toast.success("AI Image generated successfully!",{id:T})}catch(E){console.error("Image Generation Error:",E),toast.error(`AI Image Error: ${E.message||"Unknown error"}`,{id:T,duration:5e3})}finally{f(!1),h(!1)}},g=async()=>{if(!i.title){toast.error("Please enter a title first");return}p(!0);const T=toast.loading("Initializing AI Model... (This may take a moment)");try{env$1.allowLocalModels=!1,env$1.useBrowserCache=!1,console.log("AI Env Configured:",{allowLocal:env$1.allowLocalModels,useCache:env$1.useBrowserCache});const E=await pipeline("text2text-generation","Xenova/LaMini-Flan-T5-77M");toast.loading("Generating description...",{id:T});const O=/[\u0C00-\u0C7F]/.test(i.title);console.log("Language Detected:",O?"Telugu":"English/Other");let R=i.title;if(O){toast.loading("Translating title to English...",{id:T});try{const L=await(await pipeline("translation","Xenova/opus-mt-te-en"))(i.title);L&&L[0]&&L[0].translation_text&&(R=L[0].translation_text,console.log("Translated Title (TE->EN):",R))}catch($){console.warn("TE->EN Translation failed, trying direct generation",$)}}toast.loading("Generating description...",{id:T});const M=`Write a short news description based on this headline: "${R}"`,C=await E(M,{max_new_tokens:150,temperature:.7,repetition_penalty:1.2});let j="";if(C&&C[0]&&C[0].generated_text&&(j=C[0].generated_text),!j)throw new Error("No text generated");if(O){toast.loading("Translating result to Telugu...",{id:T});try{const L=await(await pipeline("translation","Xenova/opus-mt-en-te"))(j);L&&L[0]&&L[0].translation_text&&(j=L[0].translation_text,console.log("Translated Description (EN->TE):",j))}catch($){console.error("EN->TE Translation failed",$),toast.error("Generated English text but failed to translate to Telugu.")}}o($=>({...$,description:j})),toast.success(O?" !":"Description generated!",{id:T})}catch(E){console.error("AI Generation Error:",E),toast.error(`AI Error: ${E.message||"Unknown error"}. Check console details.`,{id:T,duration:5e3})}finally{p(!1)}},v=async(T,E)=>{if(!T.target.files||T.target.files.length===0)return;const O=T.target.files[0];console.log(`Selected file for ${E}:`,O.name),h(!0);try{const R=await api.uploadFile(O);console.log(`Received URL for ${E}:`,R),o(E==="image"?M=>({...M,imageUrl:R}):M=>({...M,videoUrl:R})),toast.success(`${E==="image"?"Image":"Video"} uploaded successfully`)}catch(R){console.error("NewsForm Upload Error:",R),R.message&&R.message.includes("Bucket not found")?(toast.error("CRITICAL: 'news-media' bucket missing! Check INSTRUCTIONS_TO_FIX_UPLOAD.md"),window.open("https://supabase.com/dashboard/project/vgokxvelxjgsfoitayyw/storage/buckets","_blank")):R.message&&R.message.includes("row-level security")?(toast.error("PERMISSION DENIED: You need to add a proper Policy to the 'news-media' bucket. See INSTRUCTIONS."),window.open("https://supabase.com/dashboard/project/vgokxvelxjgsfoitayyw/storage/buckets","_blank")):toast.error("Upload failed: "+(R.message||"Check storage bucket permissions"))}finally{h(!1)}},S=T=>{if(T.preventDefault(),console.log("Submitting News Form Data:",i),!i.title||!i.description||!i.area){toast.error("Please fill in all required fields");return}e(i)};return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm",children:jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-slate-900 w-full max-w-2xl rounded-xl border border-slate-700 shadow-2xl overflow-hidden max-h-[90vh] flex flex-col",children:[jsxRuntimeExports.jsxs("div",{className:"p-6 border-b border-slate-800 flex justify-between items-center bg-slate-800/50",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-white",children:t?"Edit News Article":"Upload New Article"}),jsxRuntimeExports.jsx("button",{onClick:n,className:"text-slate-400 hover:text-white transition-colors",children:jsxRuntimeExports.jsx(X,{size:24})})]}),jsxRuntimeExports.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar flex-1",children:jsxRuntimeExports.jsx("form",{id:"newsForm",onSubmit:S,className:"space-y-6",children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-1",children:["Title ",jsxRuntimeExports.jsx("span",{className:"text-red-400",children:"*"})]}),jsxRuntimeExports.jsx("input",{type:"text",value:i.title,onChange:T=>o({...i,title:T.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-yellow-500/50 focus:border-yellow-500",placeholder:"Enter news headline..."})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-4 bg-red-500/10 border border-red-500/20 rounded-lg",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-red-400",children:"Breaking News Alert"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-red-300/70",children:"Enable this to show the red scrolling ticker on the user app."})]}),jsxRuntimeExports.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:i.isBreaking,onChange:T=>o({...i,isBreaking:T.target.checked}),className:"sr-only peer"}),jsxRuntimeExports.jsx("div",{className:"w-11 h-6 bg-slate-700 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-red-800 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-red-600"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-1",children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-medium text-slate-300",children:["Description ",jsxRuntimeExports.jsx("span",{className:"text-red-400",children:"*"})]}),jsxRuntimeExports.jsx("button",{type:"button",onClick:g,disabled:m||!i.title,className:"text-xs flex items-center gap-1 text-yellow-500 hover:text-yellow-400 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:m?jsxRuntimeExports.jsx("span",{className:"animate-pulse",children:"Generating..."}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Sparkles,{size:12}),jsxRuntimeExports.jsx("span",{children:"Auto-Write with AI"})]})})]}),jsxRuntimeExports.jsx("textarea",{value:i.description,onChange:T=>o({...i,description:T.target.value}),rows:4,className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-yellow-500/50 focus:border-yellow-500 resize-none",placeholder:"Enter full news details..."})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-1",children:["Area / Location ",jsxRuntimeExports.jsx("span",{className:"text-red-400",children:"*"})]}),jsxRuntimeExports.jsx("input",{type:"text",value:i.area,onChange:T=>o({...i,area:T.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-yellow-500/50 focus:border-yellow-500",placeholder:"e.g. Vijayawada, Hyderabad"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-1",children:["Category ",jsxRuntimeExports.jsx("span",{className:"text-red-400",children:"*"})]}),jsxRuntimeExports.jsx("select",{value:i.type,onChange:T=>o({...i,type:T.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-yellow-500/50 focus:border-yellow-500",children:u.map(T=>jsxRuntimeExports.jsx("option",{value:T,children:T},T))})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-1",children:"Live / External Link (Optional)"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:jsxRuntimeExports.jsx(Cast,{size:16,className:"text-slate-500"})}),jsxRuntimeExports.jsx("input",{type:"url",value:i.liveLink,onChange:T=>o({...i,liveLink:T.target.value}),className:"w-full bg-slate-800 border border-slate-700 rounded-lg pl-10 pr-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-yellow-500/50 focus:border-yellow-500",placeholder:"https://youtube.com/watch?v=..."})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Add a YouTube or streaming URL for live coverage."})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3 pt-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-slate-300",children:"Media Attachments"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:l,disabled:_||!i.title||!i.description,className:"text-xs flex items-center gap-1 text-yellow-500 hover:text-yellow-400 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:_?jsxRuntimeExports.jsx("span",{className:"animate-pulse",children:"Generating Image..."}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Image$1,{size:12}),jsxRuntimeExports.jsx("span",{children:"Generate AI Image"})]})})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"relative group",children:[jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*",onChange:T=>v(T,"image"),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10",disabled:d}),jsxRuntimeExports.jsx("div",{className:`border-2 border-dashed ${i.imageUrl?"border-green-500 bg-green-500/10":"border-slate-700 bg-slate-800/50"} rounded-lg p-6 flex flex-col items-center justify-center hover:border-yellow-500/50 transition-colors`,children:d?jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-yellow-500"}):i.imageUrl?jsxRuntimeExports.jsxs("div",{className:"w-full relative group/preview",children:[jsxRuntimeExports.jsx("img",{src:i.imageUrl,alt:"Preview",className:"h-24 w-full object-cover rounded mb-2",onError:T=>{console.error("Image failed to load:",i.imageUrl),T.currentTarget.src="https://placehold.co/600x400?text=Load+Error",toast.error("Image uploaded but failed to load. Check if 'media' bucket is Public.")}}),jsxRuntimeExports.jsx("button",{type:"button",onClick:T=>{T.preventDefault(),T.stopPropagation(),o(E=>({...E,imageUrl:""})),toast.info("Image removed")},className:"absolute top-1 right-1 p-1 bg-red-500 rounded-full text-white z-20 hover:bg-red-600 transition-colors shadow-md",title:"Remove Image",children:jsxRuntimeExports.jsx(X,{size:14})}),jsxRuntimeExports.jsx("span",{className:"text-xs text-green-500 block text-center font-bold",children:"Image Uploaded"})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Image$1,{className:"text-slate-400 mb-2",size:24}),jsxRuntimeExports.jsx("span",{className:"text-xs text-slate-400",children:"Add Photos"})]})})]}),jsxRuntimeExports.jsxs("div",{className:"relative group",children:[jsxRuntimeExports.jsx("input",{type:"file",accept:"video/*",onChange:T=>v(T,"video"),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10",disabled:d}),jsxRuntimeExports.jsx("div",{className:`border-2 border-dashed ${i.videoUrl?"border-green-500 bg-green-500/10":"border-slate-700 bg-slate-800/50"} rounded-lg p-6 flex flex-col items-center justify-center hover:border-yellow-500/50 transition-colors`,children:d?jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-yellow-500"}):i.videoUrl?jsxRuntimeExports.jsxs("div",{className:"w-full relative",children:[jsxRuntimeExports.jsx(Video,{className:"text-green-500 mb-2 mx-auto",size:24}),jsxRuntimeExports.jsx("span",{className:"text-xs text-green-500 block text-center font-bold",children:"Video Uploaded"})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Video,{className:"text-slate-400 mb-2",size:24}),jsxRuntimeExports.jsx("span",{className:"text-xs text-slate-400",children:"Add Video"})]})})]})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-slate-500",children:"Supports JPG, PNG and MP4 formats. Require 'media' bucket in Supabase."})]})]})})}),jsxRuntimeExports.jsxs("div",{className:"p-6 border-t border-slate-800 bg-slate-800/50 flex justify-end space-x-3",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-slate-300 hover:text-white hover:bg-slate-700 rounded-lg transition-colors",children:"Cancel"}),jsxRuntimeExports.jsx("button",{type:"submit",form:"newsForm",className:"px-6 py-2 bg-yellow-500 hover:bg-yellow-400 text-slate-900 font-bold rounded-lg transition-colors shadow-lg shadow-yellow-500/20",children:t?"Update News":"Publish News"})]})]})})},NewsManager=({news:t,setNews:e,onViewItem:n})=>{const[i,o]=reactExports.useState(!1),[u,d]=reactExports.useState(null),[h,m]=reactExports.useState("All"),[p,_]=reactExports.useState(""),[f,l]=reactExports.useState(""),[g,v]=reactExports.useState(null),[S,T]=reactExports.useState("Female"),[E,O]=reactExports.useState(1),[R,M]=reactExports.useState("list"),C=N=>{if(g===N.id){window.speechSynthesis.cancel(),v(null);return}window.speechSynthesis.cancel();const B=`${N.title}. ${N.description}`,U=new SpeechSynthesisUtterance(B),H=window.speechSynthesis.getVoices(),Y=/[\u0c00-\u0c7f]/.test(B),K=/[\u0900-\u097f]/.test(B);let z=null;U.rate=E,U.pitch=S==="Female"?1.05:.95;const V=Z=>{const te=Z.name.toLowerCase();return S.toLowerCase()==="female"?te.includes("female")||te.includes("kalpana")||te.includes("zira")||te.includes("heera")||te.includes("google")&&!te.includes("male"):te.includes("male")||te.includes("david")||te.includes("hemant")||te.includes("ravi")},G=Z=>Z.name.includes("Online")||Z.name.includes("Natural")||Z.name.includes("Neural"),ie=Z=>{const te=Z.name.toLowerCase();return!te.includes("male")&&!te.includes("hemant")&&!te.includes("david")&&!te.includes("ravi")};if(Y){U.lang="te-IN";const Z=H.filter(te=>te.lang.includes("te"));S==="Female"?z=Z.find(te=>V(te)&&G(te))||Z.find(te=>V(te)&&te.name.includes("Google"))||Z.find(te=>V(te))||Z.find(te=>ie(te))||Z[0]:z=Z.find(te=>V(te))||Z[0]}else if(K){U.lang="hi-IN";const Z=H.filter(te=>te.lang.includes("hi"));S==="Female"?z=Z.find(te=>V(te)&&G(te))||Z.find(te=>V(te)&&te.name.includes("Google"))||Z.find(te=>V(te))||Z.find(te=>ie(te))||Z[0]:z=Z.find(te=>V(te))||Z[0]}else{const Z=H.filter(te=>te.lang.includes("en-IN")||te.lang.includes("en-GB")||te.lang.includes("en-US"));S==="Female"?z=Z.find(te=>te.lang==="en-IN"&&V(te)&&G(te))||Z.find(te=>te.lang==="en-IN"&&V(te))||Z.find(te=>V(te)&&te.name.includes("Google"))||Z.find(te=>V(te))||Z.find(te=>ie(te))||Z[0]:z=Z.find(te=>V(te))||Z[0]}z?(U.voice=z,console.log("Selected Voice:",z.name)):console.log("No specific preferred voice found, using default for lang:",U.lang),Y&&console.log("Available Telugu Voices:",H.filter(Z=>Z.lang.includes("te")).map(Z=>Z.name)),U.onend=()=>v(null),U.onerror=()=>v(null),v(N.id),window.speechSynthesis.speak(U)},j=async N=>{if(confirm("Are you sure you want to delete this news item?"))try{await api.deleteNews(N);const B=await api.getNews();e(B.filter(U=>U.status==="published")),toast.success("News item deleted successfully")}catch(B){console.error(B),toast.error("Failed to delete news")}},$=async N=>{try{u?(await api.updateNews(u.id,N),toast.success("News updated successfully")):(await api.createNews(N),toast.success("News published successfully"));const B=await api.getNews();e(B.filter(U=>U.status==="published")),o(!1),d(null)}catch(B){console.error(B),toast.error("Failed to save news: "+(B.message||"Unknown error"))}},L=t.filter(N=>{const B=N.title.toLowerCase().includes(p.toLowerCase())||N.description.toLowerCase().includes(p.toLowerCase()),U=h==="All"||N.type===h;let H=!0;if(f){const Y=new Date(N.timestamp),K=new Date(f);H=Y.getDate()===K.getDate()&&Y.getMonth()===K.getMonth()&&Y.getFullYear()===K.getFullYear()}return B&&U&&H});return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white",children:"Manage News"}),jsxRuntimeExports.jsxs("button",{onClick:()=>{d(null),o(!0)},className:"flex items-center gap-2 bg-yellow-500 hover:bg-yellow-400 text-slate-900 px-4 py-2 rounded-lg font-bold transition-all",children:[jsxRuntimeExports.jsx(Plus,{size:20}),jsxRuntimeExports.jsx("span",{children:"Upload News"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:flex-row gap-4 bg-slate-800 p-4 rounded-xl border border-slate-700",children:[jsxRuntimeExports.jsxs("div",{className:"relative flex-1",children:[jsxRuntimeExports.jsx(Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Search news...",value:p,onChange:N=>_(N.target.value),className:"w-full bg-slate-900 border border-slate-700 rounded-lg pl-10 pr-4 py-2 text-white focus:outline-none focus:border-yellow-500"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 bg-slate-900 border border-slate-700 rounded-lg px-2 py-0.5",children:[jsxRuntimeExports.jsx("span",{className:"text-slate-400 text-sm",children:"Voice:"}),jsxRuntimeExports.jsxs("select",{value:S,onChange:N=>T(N.target.value),className:"bg-transparent text-white text-sm py-1.5 focus:outline-none cursor-pointer",children:[jsxRuntimeExports.jsx("option",{value:"Female",className:"bg-slate-900 text-white",children:"Female"}),jsxRuntimeExports.jsx("option",{value:"Male",className:"bg-slate-900 text-white",children:"Male"})]}),jsxRuntimeExports.jsx("div",{className:"w-px h-4 bg-slate-700 mx-1"}),jsxRuntimeExports.jsx("span",{className:"text-slate-400 text-sm",children:"Speed:"}),jsxRuntimeExports.jsxs("select",{value:E,onChange:N=>O(parseFloat(N.target.value)),className:"bg-transparent text-white text-sm py-1.5 focus:outline-none cursor-pointer",children:[jsxRuntimeExports.jsx("option",{value:.5,className:"bg-slate-900 text-white",children:"0.5x"}),jsxRuntimeExports.jsx("option",{value:.75,className:"bg-slate-900 text-white",children:"0.75x"}),jsxRuntimeExports.jsx("option",{value:.9,className:"bg-slate-900 text-white",children:"0.9x"}),jsxRuntimeExports.jsx("option",{value:1,className:"bg-slate-900 text-white",children:"1.0x"}),jsxRuntimeExports.jsx("option",{value:1.25,className:"bg-slate-900 text-white",children:"1.25x"}),jsxRuntimeExports.jsx("option",{value:1.5,className:"bg-slate-900 text-white",children:"1.5x"}),jsxRuntimeExports.jsx("option",{value:2,className:"bg-slate-900 text-white",children:"2.0x"})]})]}),jsxRuntimeExports.jsx("div",{className:"w-px h-6 bg-slate-700 mx-1"}),jsxRuntimeExports.jsx("div",{className:"relative",children:jsxRuntimeExports.jsx("input",{type:"date",value:f,onChange:N=>l(N.target.value),className:"bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-white text-sm focus:outline-none focus:border-yellow-500 invert-calendar-icon"})}),jsxRuntimeExports.jsx("div",{className:"w-px h-6 bg-slate-700 mx-1"}),jsxRuntimeExports.jsx(Funnel,{size:18,className:"text-slate-400"}),jsxRuntimeExports.jsxs("select",{value:h,onChange:N=>m(N.target.value),className:"bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-yellow-500",children:[jsxRuntimeExports.jsx("option",{value:"All",children:"All Categories"}),["Political","Accident","Education","Crime","Weather","Sports","Business","Social","Others"].map(N=>jsxRuntimeExports.jsx("option",{value:N,children:N},N))]}),jsxRuntimeExports.jsx("div",{className:"w-px h-6 bg-slate-700 mx-1"}),jsxRuntimeExports.jsxs("div",{className:"flex bg-slate-900 border border-slate-700 rounded-lg p-0.5",children:[jsxRuntimeExports.jsx("button",{onClick:()=>M("list"),className:`p-1.5 rounded-md transition-all ${R==="list"?"bg-slate-700 text-white shadow-sm":"text-slate-400 hover:text-white"}`,title:"List View",children:jsxRuntimeExports.jsx(LayoutList,{size:18})}),jsxRuntimeExports.jsx("button",{onClick:()=>M("grid"),className:`p-1.5 rounded-md transition-all ${R==="grid"?"bg-slate-700 text-white shadow-sm":"text-slate-400 hover:text-white"}`,title:"Grid View",children:jsxRuntimeExports.jsx(LayoutGrid,{size:18})})]})]})]}),jsxRuntimeExports.jsxs("div",{className:R==="list"?"grid grid-cols-1 gap-4":"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[L.map(N=>jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`bg-slate-800 rounded-xl border border-slate-700 p-4 transition-colors hover:border-slate-600 ${R==="list"?"flex flex-col md:flex-row gap-6":"flex flex-col gap-6"}`,children:[jsxRuntimeExports.jsx("div",{className:`${R==="list"?"w-full md:w-48 h-32":"w-full aspect-square"} bg-slate-700 rounded-lg overflow-hidden flex-shrink-0 relative group`,children:N.imageUrl?jsxRuntimeExports.jsx("img",{src:N.imageUrl,alt:N.title,className:"w-full h-full object-cover transition-transform group-hover:scale-105"}):jsxRuntimeExports.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-500",children:jsxRuntimeExports.jsx(Image$1,{size:32})})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 flex flex-col justify-between h-full",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:`${R==="list"?"flex items-start justify-between mb-2":"mb-3"}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-slate-700 text-slate-300 border border-slate-600",children:N.type}),jsxRuntimeExports.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium bg-slate-700 text-slate-300 border border-slate-600",children:N.area}),N.isBreaking&&jsxRuntimeExports.jsxs("span",{className:"px-2 py-0.5 rounded text-xs font-bold bg-red-500/20 text-red-500 border border-red-500/30 flex items-center gap-1",children:[jsxRuntimeExports.jsx(CircleAlert,{size:10})," BREAKING"]})]}),R==="list"&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 shrink-0 ml-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>n(N),className:"p-2 text-slate-400 hover:text-white hover:bg-slate-700 rounded-lg transition-colors",title:"View Details",children:jsxRuntimeExports.jsx(Eye,{size:18})}),jsxRuntimeExports.jsx("button",{onClick:()=>C(N),className:`p-2 rounded-lg transition-colors ${g===N.id?"text-yellow-500 bg-yellow-500/10":"text-slate-400 hover:text-white hover:bg-slate-700"}`,title:g===N.id?"Stop Reading":"Read Aloud",children:g===N.id?jsxRuntimeExports.jsx(CircleStop,{size:18}):jsxRuntimeExports.jsx(Volume2,{size:18})}),jsxRuntimeExports.jsx("button",{onClick:()=>{d(N),o(!0)},className:"p-2 text-slate-400 hover:text-white hover:bg-slate-700 rounded-lg transition-colors",title:"Edit",children:jsxRuntimeExports.jsx(SquarePen,{size:18})}),jsxRuntimeExports.jsx("button",{onClick:()=>j(N.id),className:"p-2 text-slate-400 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-colors",title:"Delete",children:jsxRuntimeExports.jsx(Trash2,{size:18})})]})]}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-bold text-white mb-2 line-clamp-2 leading-tight",children:N.title}),jsxRuntimeExports.jsx("p",{className:"text-slate-400 text-sm line-clamp-2 mb-3",children:N.description})]}),jsxRuntimeExports.jsxs("div",{className:`flex ${R==="list"?"items-center justify-start mt-1":"flex-col gap-3 mt-auto"}`,children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-slate-500",children:jsxRuntimeExports.jsxs("span",{children:["Posted on ",new Date(N.timestamp).toLocaleDateString()," at ",new Date(N.timestamp).toLocaleTimeString()]})}),R==="grid"&&jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between border-t border-slate-700/50 pt-3 mt-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx("button",{onClick:()=>n(N),className:"p-2 text-slate-400 hover:text-white hover:bg-slate-700 rounded-lg transition-colors hover:scale-105",title:"View",children:jsxRuntimeExports.jsx(Eye,{size:18})}),jsxRuntimeExports.jsx("button",{onClick:()=>C(N),className:`p-2 rounded-lg transition-colors hover:scale-105 ${g===N.id?"text-yellow-500 bg-yellow-500/10":"text-slate-400 hover:text-white hover:bg-slate-700"}`,title:"Read",children:g===N.id?jsxRuntimeExports.jsx(CircleStop,{size:18}):jsxRuntimeExports.jsx(Volume2,{size:18})})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx("button",{onClick:()=>{d(N),o(!0)},className:"p-2 text-slate-400 hover:text-blue-400 hover:bg-slate-700 rounded-lg transition-colors hover:scale-105",title:"Edit",children:jsxRuntimeExports.jsx(SquarePen,{size:18})}),jsxRuntimeExports.jsx("button",{onClick:()=>j(N.id),className:"p-2 text-slate-400 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition-colors hover:scale-105",title:"Delete",children:jsxRuntimeExports.jsx(Trash2,{size:18})})]})]})]})]})]},N.id)),L.length===0&&jsxRuntimeExports.jsxs("div",{className:"text-center py-12 text-slate-500 bg-slate-800/50 rounded-xl border border-dashed border-slate-700",children:[jsxRuntimeExports.jsx(Newspaper,{size:48,className:"mx-auto mb-3 opacity-20"}),jsxRuntimeExports.jsx("p",{children:"No news articles found matching your criteria."})]})]}),i&&jsxRuntimeExports.jsx(NewsForm,{initialData:u,onSave:$,onCancel:()=>{o(!1),d(null)}})]})},NewsApprovalManager=({pendingNews:t,setPendingNews:e,setNews:n})=>{const[i,o]=reactExports.useState(null),u=async h=>{try{await api.updateNews(h.id,{status:"published"});const m=await api.getNews();n(m.filter(p=>p.status==="published")),e(m.filter(p=>p.status==="pending")),o(null),toast.success(`News from ${h.author} approved and published!`)}catch(m){console.error(m),toast.error("Failed to approve news")}},d=async h=>{if(confirm("Are you sure you want to reject this submission? It will be removed permanently."))try{await api.updateNews(h,{status:"rejected"});const m=await api.getNews();e(m.filter(p=>p.status==="pending")),o(null),toast.error("Submission rejected.")}catch(m){console.error(m),toast.error("Failed to reject submission")}};return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white",children:"Pending User Approvals"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[t.map(h=>jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"bg-slate-800 rounded-xl border border-slate-700 p-4 flex flex-col md:flex-row gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"w-full md:w-48 h-32 bg-slate-700 rounded-lg overflow-hidden flex-shrink-0 relative",children:[h.imageUrl?jsxRuntimeExports.jsx("img",{src:h.imageUrl,alt:h.title,className:"w-full h-full object-cover"}):jsxRuntimeExports.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-500",children:jsxRuntimeExports.jsx(Image$1,{size:32})}),jsxRuntimeExports.jsx("div",{className:"absolute top-2 left-2 bg-orange-500 text-white text-xs font-bold px-2 py-1 rounded shadow-lg",children:"PENDING"})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 flex flex-col justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[jsxRuntimeExports.jsx("span",{className:"px-3 py-1 bg-yellow-500 text-slate-900 font-bold rounded-lg text-sm",children:h.type}),jsxRuntimeExports.jsxs("span",{className:"text-slate-400 text-sm flex items-center gap-1",children:[jsxRuntimeExports.jsx(Globe,{size:14}),h.area]}),h.liveLink&&jsxRuntimeExports.jsxs("a",{href:h.liveLink,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-1 bg-red-600 hover:bg-red-700 text-white font-bold rounded-lg text-sm flex items-center gap-1 transition-colors animate-pulse",children:[jsxRuntimeExports.jsx(Radio,{size:14}),"Watch Live"]}),jsxRuntimeExports.jsx("span",{className:"text-slate-500 text-sm ml-auto",children:new Date(h.timestamp).toLocaleDateString()})]}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-bold text-white mb-1",children:h.title}),jsxRuntimeExports.jsx("p",{className:"text-slate-400 text-sm line-clamp-2",children:h.description})]}),jsxRuntimeExports.jsxs("div",{className:"mt-4 flex items-center gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:()=>o(h),className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white text-sm font-medium rounded-lg transition-colors",children:"Review Details"}),jsxRuntimeExports.jsxs("button",{onClick:()=>u(h),className:"px-4 py-2 bg-green-600 hover:bg-green-500 text-white text-sm font-medium rounded-lg transition-colors flex items-center gap-2",children:[jsxRuntimeExports.jsx(CircleCheck,{size:16})," Approve"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>d(h.id),className:"px-4 py-2 bg-red-500/10 hover:bg-red-500/20 text-red-400 border border-red-500/20 text-sm font-medium rounded-lg transition-colors flex items-center gap-2",children:[jsxRuntimeExports.jsx(X,{size:16})," Reject"]})]})]})]},h.id)),t.length===0&&jsxRuntimeExports.jsxs("div",{className:"text-center py-16 text-slate-500 bg-slate-800/50 rounded-xl border border-dashed border-slate-700",children:[jsxRuntimeExports.jsx(CircleCheck,{size:48,className:"mx-auto mb-3 opacity-20 text-green-500"}),jsxRuntimeExports.jsx("p",{className:"text-lg font-medium text-slate-400",children:"All caught up!"}),jsxRuntimeExports.jsx("p",{className:"text-sm",children:"No pending submissions from users."})]})]}),i&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",children:jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-slate-900 w-full max-w-2xl rounded-xl border border-slate-700 shadow-2xl overflow-hidden max-h-[90vh] flex flex-col",children:[jsxRuntimeExports.jsxs("div",{className:"p-6 border-b border-slate-800 flex justify-between items-center bg-slate-800/50",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-white",children:"Review Submission"}),jsxRuntimeExports.jsx("button",{onClick:()=>o(null),className:"text-slate-400 hover:text-white",children:jsxRuntimeExports.jsx(X,{size:24})})]}),jsxRuntimeExports.jsxs("div",{className:"p-6 overflow-y-auto custom-scrollbar flex-1 space-y-6",children:[i.imageUrl&&jsxRuntimeExports.jsx("div",{className:"w-full h-64 bg-slate-800 rounded-lg overflow-hidden border border-slate-700",children:jsxRuntimeExports.jsx("img",{src:i.imageUrl,alt:i.title,className:"w-full h-full object-cover"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:i.title}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[jsxRuntimeExports.jsxs("span",{className:"px-3 py-1 bg-slate-800 rounded-full text-xs text-slate-300 border border-slate-700",children:["Category: ",i.type]}),jsxRuntimeExports.jsxs("span",{className:"px-3 py-1 bg-slate-800 rounded-full text-xs text-slate-300 border border-slate-700",children:["Area: ",i.area]}),jsxRuntimeExports.jsxs("span",{className:"px-3 py-1 bg-blue-900/30 rounded-full text-xs text-blue-400 border border-blue-500/20",children:["User: ",i.author]}),jsxRuntimeExports.jsxs("span",{className:"px-3 py-1 bg-slate-800 rounded-full text-xs text-slate-400 border border-slate-700",children:["Time: ",new Date(i.timestamp).toLocaleString()]})]}),jsxRuntimeExports.jsx("div",{className:"bg-slate-800/50 p-4 rounded-lg border border-slate-700",children:jsxRuntimeExports.jsx("p",{className:"text-slate-300 leading-relaxed whitespace-pre-wrap",children:i.description})})]})]}),jsxRuntimeExports.jsxs("div",{className:"p-6 border-t border-slate-800 bg-slate-800/50 flex justify-end gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:()=>d(i.id),className:"px-6 py-2 bg-red-500/10 hover:bg-red-500/20 text-red-400 border border-red-500/20 font-bold rounded-lg transition-colors",children:"Reject"}),jsxRuntimeExports.jsx("button",{onClick:()=>u(i),className:"px-6 py-2 bg-green-600 hover:bg-green-500 text-white font-bold rounded-lg transition-colors shadow-lg shadow-green-500/20",children:"Approve & Publish"})]})]})})]})},ShortCard=({short:t,onViewItem:e})=>{const{liked:n,saved:i,likeCount:o,handleLike:u,handleShare:d}=useItemInteractions(t);return jsxRuntimeExports.jsxs("div",{onClick:()=>e(t),className:"shrink-0 w-48 aspect-[9/16] bg-slate-800 rounded-lg overflow-hidden relative border border-slate-700 shadow-md group cursor-pointer hover:border-yellow-500/50 transition-colors",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-slate-700 flex items-center justify-center group-hover:bg-slate-700/50 transition-colors",children:t.videoUrl?jsxRuntimeExports.jsx("video",{src:t.videoUrl,className:"w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity",muted:!0,playsInline:!0,onMouseOver:h=>h.currentTarget.play(),onMouseOut:h=>{h.currentTarget.pause(),h.currentTarget.currentTime=0}}):jsxRuntimeExports.jsx(Video,{size:32,className:"text-slate-500 group-hover:text-yellow-500 transition-colors"})}),jsxRuntimeExports.jsxs("div",{className:"absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent p-3 pt-10 flex flex-col justify-end",children:[jsxRuntimeExports.jsx("p",{className:"text-white text-sm font-medium line-clamp-2 leading-tight mb-2",children:t.title}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("span",{className:"text-xs text-slate-400",children:[t.duration,"s"]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx("button",{className:`p-1.5 rounded-full backdrop-blur-sm transition-colors ${n?"bg-red-500 text-white":"bg-white/10 text-white hover:bg-white/20"}`,onClick:u,children:jsxRuntimeExports.jsx(Heart,{size:14,fill:n?"currentColor":"none"})}),jsxRuntimeExports.jsx("span",{className:"text-[10px] text-white font-medium",children:o})]}),jsxRuntimeExports.jsx("button",{className:"p-1.5 rounded-full bg-white/10 hover:bg-white/20 text-white transition-colors backdrop-blur-sm",onClick:d,children:jsxRuntimeExports.jsx(Share2,{size:14})})]})]}),i&&jsxRuntimeExports.jsx("div",{className:"absolute top-2 right-2 bg-yellow-500 text-slate-900 p-1 rounded-full shadow-lg z-10",children:jsxRuntimeExports.jsx(Bookmark,{size:12,fill:"currentColor"})})]})},AppPreview=({news:t,shorts:e,onViewItem:n})=>{const[i,o]=reactExports.useState("home"),u=t.reduce((h,m)=>((m.status==="published"||!m.status)&&(h[m.type]||(h[m.type]=[]),h[m.type].push(m)),h),{}),d=Array.from(new Set(t.map(h=>h.type)));return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white",children:"User App Content"}),jsxRuntimeExports.jsxs("div",{className:"flex bg-slate-800 p-1 rounded-lg border border-slate-700",children:[jsxRuntimeExports.jsx("button",{onClick:()=>o("home"),className:`px-4 py-1.5 rounded-md text-sm font-medium transition-all ${i==="home"?"bg-yellow-500 text-slate-900 shadow":"text-slate-400 hover:text-white"}`,children:"Home"}),jsxRuntimeExports.jsx("button",{onClick:()=>o("categories"),className:`px-4 py-1.5 rounded-md text-sm font-medium transition-all ${i==="categories"?"bg-yellow-500 text-slate-900 shadow":"text-slate-400 hover:text-white"}`,children:"Categories"}),jsxRuntimeExports.jsx("button",{onClick:()=>o("saved"),className:`px-4 py-1.5 rounded-md text-sm font-medium transition-all ${i==="saved"?"bg-yellow-500 text-slate-900 shadow":"text-slate-400 hover:text-white"}`,children:"Saved"})]})]}),jsxRuntimeExports.jsx("div",{className:"bg-slate-900/50 rounded-xl border border-slate-800 p-6 min-h-[600px]",children:i==="home"?jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between bg-[#048ABF] p-4 rounded-xl border border-slate-700 backdrop-blur-sm shadow-lg shadow-blue-900/20",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-yellow-400 to-yellow-600 rounded-full flex items-center justify-center text-slate-900 shadow-lg",children:jsxRuntimeExports.jsx(CircleUser,{size:24})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-white text-sm font-bold leading-none",children:"Admin"}),jsxRuntimeExports.jsx("span",{className:"text-[10px] text-yellow-500 font-medium bg-yellow-500/10 px-1.5 py-0.5 rounded border border-yellow-500/20 mt-1 inline-block",children:"VERIFIED"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-white",children:[jsxRuntimeExports.jsx(CloudSun,{size:24,className:"text-yellow-400"}),jsxRuntimeExports.jsx("span",{className:"font-bold text-xl",children:"28C"})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-slate-400 font-medium",children:"Vijayawada"})]}),jsxRuntimeExports.jsxs("button",{className:"relative p-2.5 bg-slate-700/50 hover:bg-slate-700 text-white rounded-full transition-all hover:scale-105 active:scale-95 border border-slate-600",children:[jsxRuntimeExports.jsx(Bell,{size:20}),jsxRuntimeExports.jsx("span",{className:"absolute top-0 right-0 w-3 h-3 bg-red-500 border-2 border-slate-800 rounded-full animate-pulse"})]})]}),t.some(h=>h.isBreaking)&&jsxRuntimeExports.jsxs("div",{className:"bg-red-600 text-white px-4 py-2 text-sm font-bold flex items-center gap-4 overflow-hidden rounded-lg shadow-lg shadow-red-900/20",children:[jsxRuntimeExports.jsx("span",{className:"bg-white text-red-600 px-2 py-0.5 text-xs rounded uppercase tracking-wider animate-pulse font-bold shrink-0",children:"Breaking News"}),jsxRuntimeExports.jsx("div",{className:"animate-marquee whitespace-nowrap overflow-hidden flex items-center gap-4",children:t.filter(h=>h.isBreaking).map((h,m)=>jsxRuntimeExports.jsxs("span",{onClick:()=>n(h),className:"cursor-pointer hover:underline hover:text-white/90 transition-colors inline-flex items-center",children:[h.title,m<t.filter(p=>p.isBreaking).length-1&&jsxRuntimeExports.jsx("span",{className:"mx-4 text-red-200 opacity-50",children:""})]},h.id))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h3",{className:"text-white font-bold text-xl mb-4 flex items-center gap-2 border-b border-slate-800 pb-2",children:[jsxRuntimeExports.jsx(Film,{size:20,className:"text-yellow-500"})," Shorts & Reels"]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4 overflow-x-auto pb-4 custom-scrollbar",children:[e.map(h=>jsxRuntimeExports.jsx(ShortCard,{short:h,onViewItem:n},h.id)),e.length===0&&jsxRuntimeExports.jsx("div",{className:"text-slate-500 italic px-4 py-8 w-full text-center bg-slate-800/30 rounded-lg border border-dashed border-slate-800",children:"No shorts available currently."})]})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:Object.entries(u).map(([h,m])=>jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between border-b border-slate-800 pb-2",children:[jsxRuntimeExports.jsx("h3",{className:"text-white font-bold text-xl capitalize border-l-4 border-yellow-500 pl-3",children:h}),jsxRuntimeExports.jsx("button",{className:"text-sm text-yellow-500 font-medium hover:text-yellow-400",children:"View All"})]}),jsxRuntimeExports.jsx("div",{className:"space-y-4",children:m.slice(0,3).map(p=>jsxRuntimeExports.jsxs("div",{onClick:()=>n(p),className:"bg-slate-800 rounded-lg overflow-hidden border border-slate-700 shadow-sm flex h-28 hover:border-slate-600 transition-colors cursor-pointer",children:[jsxRuntimeExports.jsx("div",{className:"w-32 h-full bg-slate-700 relative shrink-0",children:p.imageUrl&&jsxRuntimeExports.jsx("img",{src:p.imageUrl,className:"w-full h-full object-cover",alt:""})}),jsxRuntimeExports.jsxs("div",{className:"p-3 flex flex-col justify-between flex-1",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"text-white font-semibold text-base line-clamp-2 leading-tight mb-1",children:p.title}),jsxRuntimeExports.jsx("p",{className:"text-slate-400 text-xs line-clamp-1",children:p.description})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 mt-2",children:[jsxRuntimeExports.jsx("span",{className:"bg-slate-700/50 px-1.5 py-0.5 rounded",children:p.area}),jsxRuntimeExports.jsx("span",{children:""}),jsxRuntimeExports.jsx("span",{children:new Date(p.timestamp).toLocaleDateString()})]})]})]},p.id))})]},h))})]}):jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4",children:[d.map(h=>jsxRuntimeExports.jsxs("div",{className:"aspect-square bg-slate-800 border border-slate-700 rounded-xl flex flex-col items-center justify-center gap-3 hover:border-yellow-500/50 hover:bg-slate-800/80 transition-all cursor-pointer group shadow-lg",children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 rounded-full bg-slate-900 flex items-center justify-center group-hover:bg-yellow-500/10 transition-colors",children:jsxRuntimeExports.jsx(Newspaper,{className:"text-slate-400 group-hover:text-yellow-500",size:24})}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("span",{className:"block text-white font-bold text-base",children:h}),jsxRuntimeExports.jsxs("span",{className:"text-xs text-slate-500",children:[u[h]?.length||0," articles"]})]})]},h)),d.length===0&&jsxRuntimeExports.jsxs("div",{className:"col-span-full text-center text-slate-500 py-20 flex flex-col items-center",children:[jsxRuntimeExports.jsx(Funnel,{size:48,className:"opacity-20 mb-4"}),jsxRuntimeExports.jsx("p",{children:"No categories found."})]})]})})]})},ShortsForm=({initialData:t,onSave:e,onCancel:n})=>{const[i,o]=reactExports.useState(t?.title||""),[u,d]=reactExports.useState(t?.duration||0),[h,m]=reactExports.useState(null),[p,_]=reactExports.useState(!1),f=async l=>{if(l.preventDefault(),!i){toast.error("Please enter a title");return}if(!t&&!h){toast.error("Please select a video file");return}_(!0);try{let g=t?.videoUrl||"",v=u;h&&(g=await api.uploadFile(h),v===0&&(v=Math.floor(Math.random()*30)+5)),v>60,e({title:i,videoUrl:g,duration:v||15})}catch(g){console.error("Shorts Upload Error:",g),toast.error("Failed to upload short: "+(g.message||"Unknown error"))}finally{_(!1)}};return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm",children:jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-slate-900 w-full max-w-md rounded-xl border border-slate-700 shadow-2xl overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"p-6 border-b border-slate-800 flex justify-between items-center bg-slate-800/50",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-white",children:t?"Edit Short":"Upload New Short"}),jsxRuntimeExports.jsx("button",{onClick:n,className:"text-slate-400 hover:text-white transition-colors",disabled:p,children:jsxRuntimeExports.jsx(X,{size:24})})]}),jsxRuntimeExports.jsxs("form",{onSubmit:f,className:"p-6 space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-1",children:["Title ",jsxRuntimeExports.jsx("span",{className:"text-red-400",children:"*"})]}),jsxRuntimeExports.jsx("input",{type:"text",value:i,onChange:l=>o(l.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-yellow-500/50 focus:border-yellow-500",placeholder:"Enter short title...",disabled:p})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-1",children:["Video File ",jsxRuntimeExports.jsx("span",{className:"text-red-400",children:"*"})]}),jsxRuntimeExports.jsxs("div",{className:`border-2 border-dashed border-slate-700 rounded-lg p-8 flex flex-col items-center justify-center ${p?"opacity-50 cursor-not-allowed":"hover:border-yellow-500/50 cursor-pointer"} transition-colors bg-slate-800/50 relative group`,children:[jsxRuntimeExports.jsx("input",{type:"file",accept:"video/*",className:"absolute inset-0 opacity-0 cursor-pointer",disabled:p,onChange:l=>{l.target.files?.[0]&&(m(l.target.files[0]),toast.info("Video selected."))}}),jsxRuntimeExports.jsx(Video,{className:"text-slate-400 mb-2 group-hover:text-yellow-500 transition-colors",size:32}),jsxRuntimeExports.jsx("span",{className:"text-sm text-slate-400 group-hover:text-slate-200",children:h?h.name:t?.videoUrl?"Change video file":"Click to upload video"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-slate-500 mt-1",children:"Max duration: 60 seconds"})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/20 rounded-lg p-3 flex gap-3 items-start",children:[jsxRuntimeExports.jsx(CircleAlert,{className:"text-yellow-500 flex-shrink-0 mt-0.5",size:16}),jsxRuntimeExports.jsx("p",{className:"text-xs text-yellow-200/80",children:"Vertical videos (9:16) work best."})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end space-x-3 pt-2",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-slate-300 hover:text-white hover:bg-slate-700 rounded-lg transition-colors",disabled:p,children:"Cancel"}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:p,className:"px-6 py-2 bg-yellow-500 hover:bg-yellow-400 text-slate-900 font-bold rounded-lg transition-colors shadow-lg shadow-yellow-500/20 flex items-center gap-2",children:p?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{className:"animate-spin h-4 w-4 border-2 border-slate-900 border-t-transparent rounded-full"}),"Uploading..."]}):t?"Update Short":"Upload Short"})]})]})]})})},ShortsManager=({shorts:t,setShorts:e,onViewItem:n})=>{const[i,o]=reactExports.useState(!1),[u,d]=reactExports.useState(null),[h,m]=reactExports.useState(""),[p,_]=reactExports.useState(""),[f,l]=reactExports.useState("grid"),g=t.filter(T=>{const E=T.title.toLowerCase().includes(h.toLowerCase());let O=!0;if(p){const R=new Date(T.timestamp),M=new Date(p);O=R.getDate()===M.getDate()&&R.getMonth()===M.getMonth()&&R.getFullYear()===M.getFullYear()}return E&&O}),v=async T=>{if(confirm("Are you sure you want to delete this short?"))try{await api.deleteShort(T);const E=await api.getShorts();e(E),toast.success("Short deleted successfully")}catch(E){console.error(E),toast.error("Failed to delete short")}},S=async T=>{try{u?(await api.updateShort(u.id,T),toast.success("Short updated successfully")):(await api.createShort(T),toast.success("Short uploaded successfully"));const E=await api.getShorts();e(E),o(!1),d(null)}catch(E){console.error(E),toast.error("Failed to save short")}};return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white",children:"Manage Shorts"}),jsxRuntimeExports.jsxs("button",{onClick:()=>{d(null),o(!0)},className:"flex items-center gap-2 bg-yellow-500 hover:bg-yellow-400 text-slate-900 px-4 py-2 rounded-lg font-bold transition-all",children:[jsxRuntimeExports.jsx(Plus,{size:20}),jsxRuntimeExports.jsx("span",{children:"Upload Short"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:flex-row gap-4 bg-slate-800 p-4 rounded-xl border border-slate-700",children:[jsxRuntimeExports.jsxs("div",{className:"relative flex-1",children:[jsxRuntimeExports.jsx(Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Search shorts...",value:h,onChange:T=>m(T.target.value),className:"w-full bg-slate-900 border border-slate-700 rounded-lg pl-10 pr-4 py-2 text-white focus:outline-none focus:border-yellow-500"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"relative",children:jsxRuntimeExports.jsx("input",{type:"date",value:p,onChange:T=>_(T.target.value),className:"bg-slate-900 border border-slate-700 rounded-lg px-3 py-2 text-white text-sm focus:outline-none focus:border-yellow-500 invert-calendar-icon"})}),jsxRuntimeExports.jsx("div",{className:"w-px h-6 bg-slate-700 mx-1"}),jsxRuntimeExports.jsxs("div",{className:"flex bg-slate-900 border border-slate-700 rounded-lg p-0.5",children:[jsxRuntimeExports.jsx("button",{onClick:()=>l("list"),className:`p-1.5 rounded-md transition-all ${f==="list"?"bg-slate-700 text-white shadow-sm":"text-slate-400 hover:text-white"}`,title:"List View",children:jsxRuntimeExports.jsx(LayoutList,{size:18})}),jsxRuntimeExports.jsx("button",{onClick:()=>l("grid"),className:`p-1.5 rounded-md transition-all ${f==="grid"?"bg-slate-700 text-white shadow-sm":"text-slate-400 hover:text-white"}`,title:"Grid View",children:jsxRuntimeExports.jsx(LayoutGrid,{size:18})})]})]})]}),jsxRuntimeExports.jsxs("div",{className:f==="list"?"grid grid-cols-1 gap-4":"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:[g.map(T=>f==="grid"?jsxRuntimeExports.jsxs("div",{className:"group relative aspect-[9/16] bg-slate-800 rounded-xl overflow-hidden border border-slate-700 shadow-lg",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-slate-700 flex items-center justify-center",children:jsxRuntimeExports.jsx(Video,{size:48,className:"text-slate-600"})}),jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/20 to-transparent p-4 flex flex-col justify-end",children:[jsxRuntimeExports.jsx("h3",{className:"text-white font-bold line-clamp-2 mb-1",children:T.title}),jsxRuntimeExports.jsxs("span",{className:"text-xs text-slate-300 mb-3",children:[T.duration," sec"]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-2 opacity-0 group-hover:opacity-100 transition-opacity transform translate-y-2 group-hover:translate-y-0",children:[jsxRuntimeExports.jsx("button",{onClick:()=>n(T),className:"bg-blue-500/80 hover:bg-blue-600 text-white p-2 rounded-lg flex justify-center backdrop-blur-sm transition-colors",title:"View",children:jsxRuntimeExports.jsx(Eye,{size:16})}),jsxRuntimeExports.jsx("button",{onClick:()=>{d(T),o(!0)},className:"bg-slate-800/80 hover:bg-white hover:text-slate-900 text-white p-2 rounded-lg flex justify-center backdrop-blur-sm transition-colors",children:jsxRuntimeExports.jsx(SquarePen,{size:16})}),jsxRuntimeExports.jsx("button",{onClick:()=>v(T.id),className:"bg-red-500/80 hover:bg-red-600 text-white p-2 rounded-lg flex justify-center backdrop-blur-sm transition-colors",children:jsxRuntimeExports.jsx(Trash2,{size:16})})]})]})]},T.id):jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},className:"bg-slate-800 rounded-xl border border-slate-700 p-4 flex gap-6 hover:border-slate-600 transition-colors",children:[jsxRuntimeExports.jsx("div",{className:"h-32 w-24 bg-slate-900 rounded-lg flex items-center justify-center flex-shrink-0 border border-slate-700",children:jsxRuntimeExports.jsx(Video,{size:32,className:"text-slate-600"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 flex flex-col justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-bold text-white mb-1",children:T.title}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-400",children:[jsxRuntimeExports.jsxs("span",{children:[T.duration," seconds"]}),jsxRuntimeExports.jsx("span",{children:""}),jsxRuntimeExports.jsx("span",{children:new Date(T.timestamp).toLocaleDateString()})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3 mt-2",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>n(T),className:"flex items-center gap-2 px-3 py-1.5 bg-blue-500/10 hover:bg-blue-500/20 text-blue-400 border border-blue-500/20 text-xs font-medium rounded-lg transition-colors",children:[jsxRuntimeExports.jsx(Eye,{size:14})," View"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{d(T),o(!0)},className:"flex items-center gap-2 px-3 py-1.5 bg-slate-700 hover:bg-slate-600 text-white text-xs font-medium rounded-lg transition-colors",children:[jsxRuntimeExports.jsx(SquarePen,{size:14})," Edit"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>v(T.id),className:"flex items-center gap-2 px-3 py-1.5 bg-red-500/10 hover:bg-red-500/20 text-red-400 border border-red-500/20 text-xs font-medium rounded-lg transition-colors",children:[jsxRuntimeExports.jsx(Trash2,{size:14})," Delete"]})]})]})]},T.id)),g.length===0&&jsxRuntimeExports.jsxs("div",{className:"col-span-full py-12 text-center text-slate-500 border border-dashed border-slate-700 rounded-xl bg-slate-800/30",children:[jsxRuntimeExports.jsx(Film,{size:48,className:"mx-auto mb-3 opacity-20"}),jsxRuntimeExports.jsx("p",{children:"No shorts found matching your search."})]})]}),i&&jsxRuntimeExports.jsx(ShortsForm,{initialData:u,onSave:S,onCancel:()=>{o(!1),d(null)}})]})},AdvertisementsManager=({advertisements:t,onAdd:e,onUpdate:n,onDelete:i})=>{const[o,u]=reactExports.useState(!1),[d,h]=reactExports.useState(!1),[m,p]=reactExports.useState({mediaUrl:"",intervalMinutes:15,clickUrl:"",isActive:!0}),[_,f]=reactExports.useState(null),l=async g=>{if(g.preventDefault(),!_&&!m.mediaUrl){toast.error("Please select an image or video");return}h(!0);try{let v=m.mediaUrl;_&&(v=await api.uploadFile(_)),await e({mediaUrl:v,intervalMinutes:m.intervalMinutes,clickUrl:m.clickUrl,isActive:m.isActive}),u(!1),p({mediaUrl:"",intervalMinutes:15,clickUrl:"",isActive:!0}),f(null),toast.success("Advertisement added successfully")}catch{toast.error("Failed to add ad")}finally{h(!1)}};return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white",children:"Manage Advertisements"}),jsxRuntimeExports.jsxs("button",{onClick:()=>u(!o),className:"flex items-center gap-2 px-4 py-2 bg-yellow-500 hover:bg-yellow-400 text-slate-900 font-bold rounded-lg transition-colors",children:[o?jsxRuntimeExports.jsx(X,{size:20}):jsxRuntimeExports.jsx(Plus,{size:20}),o?"Cancel":"Upload Ad"]})]}),o&&jsxRuntimeExports.jsxs("form",{onSubmit:l,className:"bg-slate-800 p-6 rounded-xl border border-slate-700 space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-1",children:"Media (Image/Video) *"}),jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*,video/*",onChange:g=>f(g.target.files?.[0]||null),className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-2 text-white outline-none focus:border-yellow-500 transition-colors"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-1",children:"Interval (Minutes)"}),jsxRuntimeExports.jsx("input",{type:"number",min:"1",value:m.intervalMinutes,onChange:g=>p(v=>({...v,intervalMinutes:parseInt(g.target.value)||15})),className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-2 text-white outline-none focus:border-yellow-500 transition-colors",required:!0})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-1",children:"Click URL (Optional)"}),jsxRuntimeExports.jsx("input",{type:"url",value:m.clickUrl,onChange:g=>p(v=>({...v,clickUrl:g.target.value})),placeholder:"https://",className:"w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-2 text-white outline-none focus:border-yellow-500 transition-colors"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-slate-300",children:"Active"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>p(g=>({...g,isActive:!g.isActive})),className:`w-11 h-6 rounded-full relative transition-colors ${m.isActive?"bg-yellow-500":"bg-slate-700"}`,children:jsxRuntimeExports.jsx("div",{className:`w-4 h-4 rounded-full bg-white absolute top-1 transition-transform ${m.isActive?"left-6":"left-1"}`})})]}),jsxRuntimeExports.jsx("div",{className:"flex justify-end pt-4",children:jsxRuntimeExports.jsx("button",{type:"submit",disabled:d,className:"flex items-center gap-2 px-6 py-2 bg-yellow-500 hover:bg-yellow-400 text-slate-900 font-bold rounded-lg transition-colors disabled:opacity-50",children:d?"Uploading...":"Save Advertisement"})})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:t.map(g=>jsxRuntimeExports.jsxs("div",{className:"bg-slate-800 rounded-xl border border-slate-700 overflow-hidden relative group",children:[jsxRuntimeExports.jsx("div",{className:"h-32 bg-black relative",children:g.mediaUrl.match(/\.(mp4|webm|ogg)$/i)?jsxRuntimeExports.jsx("video",{src:g.mediaUrl,className:"w-full h-full object-cover",controls:!0}):jsxRuntimeExports.jsx("img",{src:g.mediaUrl,className:"w-full h-full object-cover",alt:"Ad"})}),jsxRuntimeExports.jsxs("div",{className:"p-3 space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsxs("span",{className:"text-[10px] text-slate-400 flex items-center gap-2",children:["Int: ",g.intervalMinutes,"m",jsxRuntimeExports.jsx("button",{onClick:()=>{const v=window.prompt("Enter new interval (minutes):",g.intervalMinutes.toString());if(v){const S=parseInt(v,10);!isNaN(S)&&S>0&&n(g.id,{intervalMinutes:S})}},className:"text-yellow-500 hover:text-yellow-400 p-1",title:"Edit Interval",children:jsxRuntimeExports.jsx(SquarePen,{size:12})})]}),jsxRuntimeExports.jsx("span",{className:`px-1.5 py-0.5 rounded text-[10px] font-bold ${g.isActive?"bg-green-500/20 text-green-500":"bg-red-500/20 text-red-500"}`,children:g.isActive?"Active":"Paused"})]}),g.clickUrl&&jsxRuntimeExports.jsx("a",{href:g.clickUrl,target:"_blank",rel:"noreferrer",className:"text-blue-400 text-[10px] truncate block hover:underline",children:g.clickUrl}),jsxRuntimeExports.jsxs("div",{className:"pt-2 flex gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>n(g.id,{isActive:!g.isActive}),className:"flex-1 py-1 bg-slate-700 hover:bg-slate-600 rounded text-xs text-white transition-colors",children:g.isActive?"Pause":"Activate"}),jsxRuntimeExports.jsx("button",{onClick:()=>{window.confirm("Delete this ad?")&&i(g.id)},className:"px-2 py-1 bg-red-500/10 hover:bg-red-500/20 text-red-500 rounded transition-colors",children:jsxRuntimeExports.jsx(Trash2,{size:14})})]})]})]},g.id))})]})};function App(){const{playingId:t,handleSpeak:e}=useTextToSpeech(),[n,i]=reactExports.useState(!0),[o,u]=reactExports.useState("dashboard"),[d,h]=reactExports.useState(null),[m,p]=reactExports.useState([]),[_,f]=reactExports.useState([]),[l,g]=reactExports.useState([]),[v,S]=reactExports.useState([]),[T,E]=reactExports.useState(!1);reactExports.useEffect(()=>{(async()=>{try{const[j,$,L]=await Promise.all([api.getNews(),api.getShorts(),api.getAdvertisements()]);p(j.filter(N=>N.status==="published"||!N.status)),f(j.filter(N=>N.status==="pending")),g($),S(L)}catch(j){console.error("Failed to fetch data:",j),toast.error("Failed to connect to database")}})()},[]);const O=async C=>{try{const j=await api.createAdvertisement(C);S([j,...v])}catch(j){throw console.error(j),j}},R=async(C,j)=>{try{const $=await api.updateAdvertisement(C,j);S(v.map(L=>L.id===C?$:L))}catch($){throw console.error($),$}},M=async C=>{try{await api.deleteAdvertisement(C),S(v.filter(j=>j.id!==C))}catch(j){throw console.error(j),j}};return reactExports.useEffect(()=>{const C=setTimeout(()=>{i(!1)},3e3);return()=>clearTimeout(C)},[]),n?jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-[#020617] z-[100]",children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5,ease:"easeOut"},className:"w-full h-full relative flex items-center justify-center bg-black",children:jsxRuntimeExports.jsx("img",{src:splashImage,alt:"Loading...",className:"w-full h-full object-contain"})})}):jsxRuntimeExports.jsxs("div",{className:"flex h-screen bg-[#020617] text-slate-100 font-sans overflow-hidden selection:bg-yellow-500/30",children:[jsxRuntimeExports.jsx(Toaster,{position:"top-right",theme:"dark"}),jsxRuntimeExports.jsx(Sidebar,{activeTab:o,setActiveTab:u,mobileOpen:T,setMobileOpen:E}),jsxRuntimeExports.jsxs("div",{className:"flex-1 flex flex-col h-full overflow-hidden",children:[jsxRuntimeExports.jsx("header",{className:"md:hidden h-16 bg-[#0f172a] border-b border-slate-800 flex items-center px-4 justify-between",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:()=>E(!0),className:"text-slate-300",children:jsxRuntimeExports.jsx(Menu,{size:24})}),jsxRuntimeExports.jsx("h1",{className:"text-lg font-bold text-yellow-500",children:"SAMANYUDU TV"})]})}),jsxRuntimeExports.jsx("main",{className:"flex-1 overflow-y-auto p-4 md:p-8",children:jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto",children:[o==="dashboard"&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"space-y-8",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Dashboard Overview"}),jsxRuntimeExports.jsx(DashboardStats,{newsCount:m.length,shortsCount:l.length,pendingCount:_.length}),jsxRuntimeExports.jsxs("div",{className:"bg-slate-800 rounded-xl border border-slate-700 p-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Recent Breaking News"}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[m.filter(C=>C.isBreaking).slice(0,3).map(C=>jsxRuntimeExports.jsxs("div",{onClick:()=>h(C),className:"flex items-center gap-3 p-3 bg-red-500/5 border border-red-500/10 rounded-lg hover:bg-red-500/10 transition-colors cursor-pointer",children:[jsxRuntimeExports.jsx(CircleAlert,{className:"text-red-500 flex-shrink-0",size:20}),jsxRuntimeExports.jsx("span",{className:"text-white font-medium truncate",children:C.title})]},C.id)),m.filter(C=>C.isBreaking).length===0&&jsxRuntimeExports.jsx("p",{className:"text-slate-500 text-sm",children:"No breaking news active currently."})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-slate-800 rounded-xl border border-slate-700 p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-white",children:"Latest Shorts Updates"}),jsxRuntimeExports.jsx("button",{onClick:()=>u("shorts"),className:"text-sm text-yellow-500 hover:text-yellow-400",children:"View All"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[l.slice(0,4).map(C=>jsxRuntimeExports.jsxs("div",{onClick:()=>h(C),className:"group relative aspect-[9/16] bg-slate-700 rounded-lg overflow-hidden border border-slate-600 shadow-sm hover:shadow-md transition-all cursor-pointer",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-slate-800 flex items-center justify-center",children:C.videoUrl?jsxRuntimeExports.jsx("video",{src:C.videoUrl,className:"w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity",muted:!0,playsInline:!0,onMouseOver:j=>j.currentTarget.play(),onMouseOut:j=>{j.currentTarget.pause(),j.currentTarget.currentTime=0}}):jsxRuntimeExports.jsx(Video,{size:32,className:"text-slate-600"})}),jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-transparent to-transparent p-3 flex flex-col justify-end pointer-events-none",children:[jsxRuntimeExports.jsx("h4",{className:"text-white font-medium text-xs line-clamp-2 leading-snug",children:C.title}),jsxRuntimeExports.jsxs("span",{className:"text-[10px] text-slate-300 mt-1",children:[C.duration,"s"]})]})]},C.id)),l.length===0&&jsxRuntimeExports.jsx("p",{className:"col-span-full text-slate-500 text-center py-4",children:"No shorts available."})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-slate-800 rounded-xl border border-slate-700 p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-white",children:"Latest News Updates"}),jsxRuntimeExports.jsx("button",{onClick:()=>u("news"),className:"text-sm text-yellow-500 hover:text-yellow-400",children:"View All"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[m.slice(0,5).map(C=>jsxRuntimeExports.jsxs("div",{onClick:()=>h(C),className:"flex items-center gap-4 p-3 bg-slate-700/30 border border-slate-700/50 rounded-lg hover:bg-slate-700/50 transition-colors cursor-pointer group",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-12 bg-slate-600 rounded overflow-hidden flex-shrink-0",children:jsxRuntimeExports.jsx("img",{src:C.imageUrl,alt:"",className:"w-full h-full object-cover"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("h4",{className:"text-white font-medium text-sm line-clamp-2 leading-snug break-words",children:C.title}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[jsxRuntimeExports.jsx("span",{className:"text-[10px] uppercase tracking-wider text-slate-400 font-semibold bg-slate-700 px-1.5 rounded",children:C.type}),jsxRuntimeExports.jsx("span",{className:"text-xs text-slate-500",children:new Date(C.timestamp).toLocaleDateString()})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[C.isBreaking&&jsxRuntimeExports.jsx("span",{className:"flex-shrink-0 text-[10px] font-bold text-red-500 bg-red-500/10 border border-red-500/20 px-2 py-0.5 rounded uppercase",children:"Breaking"}),jsxRuntimeExports.jsx("button",{onClick:j=>{j.stopPropagation(),e(C)},className:`p-2 rounded-full transition-colors ${t===C.id?"text-yellow-500 bg-yellow-500/10":"text-slate-400 hover:text-white hover:bg-slate-600"}`,title:t===C.id?"Stop Reading":"Read Aloud",children:t===C.id?jsxRuntimeExports.jsx(CircleStop,{size:18}):jsxRuntimeExports.jsx(Volume2,{size:18})})]})]},C.id)),m.length===0&&jsxRuntimeExports.jsx("p",{className:"text-slate-500 text-center py-4",children:"No news articles available."})]})]})]}),o==="news"&&jsxRuntimeExports.jsx(NewsManager,{news:m,setNews:p,onViewItem:h}),o==="app_preview"&&jsxRuntimeExports.jsx(AppPreview,{news:m,shorts:l,onViewItem:h}),o==="approvals"&&jsxRuntimeExports.jsx(NewsApprovalManager,{pendingNews:_,setPendingNews:f,setNews:p}),o==="analytics"&&jsxRuntimeExports.jsx(AnalyticsView,{news:m,shorts:l}),o==="shorts"&&jsxRuntimeExports.jsx(ShortsManager,{shorts:l,setShorts:g,onViewItem:h}),o==="advertisements"&&jsxRuntimeExports.jsx(AdvertisementsManager,{advertisements:v,onAdd:O,onUpdate:R,onDelete:M}),o==="settings"&&jsxRuntimeExports.jsx(SettingsView,{}),d&&jsxRuntimeExports.jsx(MediaPlayer,{item:d,onClose:()=>h(null)})]})})]})]})}clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(App,{}));
